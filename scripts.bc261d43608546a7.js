function _possibleConstructorReturn(F,b){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?F:b}function _inherits(F,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);F.prototype=Object.create(b&&b.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(F,b):F.__proto__=b)}function _classCallCheck(F,b){if(!(F instanceof b))throw new TypeError("Cannot call a class as a function")}function __guard__(F,b){return null!=F?b(F):void 0}function __guardMethod__(F,b,v){return null!=F&&"function"==typeof F[b]?v(F,b):void 0}(function(F,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=F.document?b(F,!0):function(v){if(!v.document)throw new Error("jQuery requires a window with a document");return b(v)}:b(F)})("undefined"!=typeof window?window:this,function(F,b){"use strict";var v=[],A=F.document,l=Object.getPrototypeOf,P=v.slice,I=v.concat,N=v.push,et=v.indexOf,Lt={},Zt=Lt.toString,Mt=Lt.hasOwnProperty,Yt=Mt.toString,$t=Yt.call(Object),vt={},lt=function(w){return"function"==typeof w&&"number"!=typeof w.nodeType},Vt=function(w){return null!=w&&w===w.window},xe={type:!0,src:!0,nonce:!0,noModule:!0};function Ze(w,z,V){var Z,dt,bt=(V=V||A).createElement("script");if(bt.text=w,z)for(Z in xe)(dt=z[Z]||z.getAttribute&&z.getAttribute(Z))&&bt.setAttribute(Z,dt);V.head.appendChild(bt).parentNode.removeChild(bt)}function Ye(w){return null==w?w+"":"object"==typeof w||"function"==typeof w?Lt[Zt.call(w)]||"object":typeof w}var q=function(w,z){return new q.fn.init(w,z)},Wi=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function Ti(w){var z=!!w&&"length"in w&&w.length,V=Ye(w);return!lt(w)&&!Vt(w)&&("array"===V||0===z||"number"==typeof z&&0<z&&z-1 in w)}q.fn=q.prototype={jquery:"3.4.1",constructor:q,length:0,toArray:function(){return P.call(this)},get:function(w){return null==w?P.call(this):w<0?this[w+this.length]:this[w]},pushStack:function(w){var z=q.merge(this.constructor(),w);return z.prevObject=this,z},each:function(w){return q.each(this,w)},map:function(w){return this.pushStack(q.map(this,function(z,V){return w.call(z,V,z)}))},slice:function(){return this.pushStack(P.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(w){var z=this.length,V=+w+(w<0?z:0);return this.pushStack(0<=V&&V<z?[this[V]]:[])},end:function(){return this.prevObject||this.constructor()},push:N,sort:v.sort,splice:v.splice},q.extend=q.fn.extend=function(){var w,z,V,Z,dt,bt,At=arguments[0]||{},Xt=1,ie=arguments.length,ge=!1;for("boolean"==typeof At&&(ge=At,At=arguments[Xt]||{},Xt++),"object"==typeof At||lt(At)||(At={}),Xt===ie&&(At=this,Xt--);Xt<ie;Xt++)if(null!=(w=arguments[Xt]))for(z in w)Z=w[z],"__proto__"!==z&&At!==Z&&(ge&&Z&&(q.isPlainObject(Z)||(dt=Array.isArray(Z)))?(V=At[z],bt=dt&&!Array.isArray(V)?[]:dt||q.isPlainObject(V)?V:{},dt=!1,At[z]=q.extend(ge,bt,Z)):void 0!==Z&&(At[z]=Z));return At},q.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(w){throw new Error(w)},noop:function(){},isPlainObject:function(w){var z,V;return!(!w||"[object Object]"!==Zt.call(w)||(z=l(w))&&("function"!=typeof(V=Mt.call(z,"constructor")&&z.constructor)||Yt.call(V)!==$t))},isEmptyObject:function(w){var z;for(z in w)return!1;return!0},globalEval:function(w,z){Ze(w,{nonce:z&&z.nonce})},each:function(w,z){var V,Z=0;if(Ti(w))for(V=w.length;Z<V&&!1!==z.call(w[Z],Z,w[Z]);Z++);else for(Z in w)if(!1===z.call(w[Z],Z,w[Z]))break;return w},trim:function(w){return null==w?"":(w+"").replace(Wi,"")},makeArray:function(w,z){var V=z||[];return null!=w&&(Ti(Object(w))?q.merge(V,"string"==typeof w?[w]:w):N.call(V,w)),V},inArray:function(w,z,V){return null==z?-1:et.call(z,w,V)},merge:function(w,z){for(var V=+z.length,Z=0,dt=w.length;Z<V;Z++)w[dt++]=z[Z];return w.length=dt,w},grep:function(w,z,V){for(var Z=[],dt=0,bt=w.length,At=!V;dt<bt;dt++)!z(w[dt],dt)!==At&&Z.push(w[dt]);return Z},map:function(w,z,V){var Z,dt,bt=0,At=[];if(Ti(w))for(Z=w.length;bt<Z;bt++)null!=(dt=z(w[bt],bt,V))&&At.push(dt);else for(bt in w)null!=(dt=z(w[bt],bt,V))&&At.push(dt);return I.apply([],At)},guid:1,support:vt}),"function"==typeof Symbol&&(q.fn[Symbol.iterator]=v[Symbol.iterator]),q.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(w,z){Lt["[object "+z+"]"]=z.toLowerCase()});var ti=function(w){var z,V,Z,dt,bt,At,Xt,ie,ge,Xe,pi,je,Ge,Ki,xr,Yi,ro,En,Gn,sn="sizzle"+1*new Date,gi=w.document,Ho=0,Wr=0,ln=ee(),Aa=ee(),Oo=ee(),Qn=ee(),sa=function(kt,Qt){return kt===Qt&&(pi=!0),0},Zo={}.hasOwnProperty,er=[],Wo=er.pop,Ta=er.push,un=er.push,da=er.slice,Ao=function(kt,Qt){for(var de=0,Te=kt.length;de<Te;de++)if(kt[de]===Qt)return de;return-1},Jo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Kr="[\\x20\\t\\r\\n\\f]",en="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",to="\\["+Kr+"*("+en+")(?:"+Kr+"*([*^$|!~]?=)"+Kr+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+en+"))|)"+Kr+"*\\]",vo=":("+en+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+to+")*)|.*)\\)|)",Hn=new RegExp(Kr+"+","g"),Xn=new RegExp("^"+Kr+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Kr+"+$","g"),ts=new RegExp("^"+Kr+"*,"+Kr+"*"),Qo=new RegExp("^"+Kr+"*([>+~]|"+Kr+")"+Kr+"*"),eo=new RegExp(Kr+"|>"),es=new RegExp(vo),Ua=new RegExp("^"+en+"$"),vs={ID:new RegExp("^#("+en+")"),CLASS:new RegExp("^\\.("+en+")"),TAG:new RegExp("^("+en+"|[*])"),ATTR:new RegExp("^"+to),PSEUDO:new RegExp("^"+vo),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Kr+"*(even|odd|(([+-]|)(\\d*)n|)"+Kr+"*(?:([+-]|)"+Kr+"*(\\d+)|))"+Kr+"*\\)|)","i"),bool:new RegExp("^(?:"+Jo+")$","i"),needsContext:new RegExp("^"+Kr+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Kr+"*((?:-\\d)?\\d*)"+Kr+"*\\)|)(?=[^-]|$)","i")},Go=/HTML$/i,Na=/^(?:input|select|textarea|button)$/i,is=/^h\d$/i,ja=/^[^{]+\{\s*\[native \w/,rs=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Bs=/[+~]/,Xo=new RegExp("\\\\([\\da-f]{1,6}"+Kr+"?|("+Kr+")|.)","ig"),ta=function(kt,Qt,de){var Te="0x"+Qt-65536;return Te!=Te||de?Qt:Te<0?String.fromCharCode(Te+65536):String.fromCharCode(Te>>10|55296,1023&Te|56320)},Va=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ke=function(kt,Qt){return Qt?"\0"===kt?"\ufffd":kt.slice(0,-1)+"\\"+kt.charCodeAt(kt.length-1).toString(16)+" ":"\\"+kt},ye=function(){je()},Q=zo(function(kt){return!0===kt.disabled&&"fieldset"===kt.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{un.apply(er=da.call(gi.childNodes),gi.childNodes)}catch(kt){un={apply:er.length?function(Qt,de){Ta.apply(Qt,da.call(de))}:function(Qt,de){for(var Te=Qt.length,ve=0;Qt[Te++]=de[ve++];);Qt.length=Te-1}}}function gt(kt,Qt,de,Te){var ve,yi,Je,oe,ci,kr,Br,Vi=Qt&&Qt.ownerDocument,Gr=Qt?Qt.nodeType:9;if(de=de||[],"string"!=typeof kt||!kt||1!==Gr&&9!==Gr&&11!==Gr)return de;if(!Te&&((Qt?Qt.ownerDocument||Qt:gi)!==Ge&&je(Qt),Qt=Qt||Ge,xr)){if(11!==Gr&&(ci=rs.exec(kt)))if(ve=ci[1]){if(9===Gr){if(!(Je=Qt.getElementById(ve)))return de;if(Je.id===ve)return de.push(Je),de}else if(Vi&&(Je=Vi.getElementById(ve))&&Gn(Qt,Je)&&Je.id===ve)return de.push(Je),de}else{if(ci[2])return un.apply(de,Qt.getElementsByTagName(kt)),de;if((ve=ci[3])&&V.getElementsByClassName&&Qt.getElementsByClassName)return un.apply(de,Qt.getElementsByClassName(ve)),de}if(V.qsa&&!Qn[kt+" "]&&(!Yi||!Yi.test(kt))&&(1!==Gr||"object"!==Qt.nodeName.toLowerCase())){if(Br=kt,Vi=Qt,1===Gr&&eo.test(kt)){for((oe=Qt.getAttribute("id"))?oe=oe.replace(Va,ke):Qt.setAttribute("id",oe=sn),yi=(kr=At(kt)).length;yi--;)kr[yi]="#"+oe+" "+fa(kr[yi]);Br=kr.join(","),Vi=Bs.test(kt)&&Ko(Qt.parentNode)||Qt}try{return un.apply(de,Vi.querySelectorAll(Br)),de}catch(Nr){Qn(kt,!0)}finally{oe===sn&&Qt.removeAttribute("id")}}}return ie(kt.replace(Xn,"$1"),Qt,de,Te)}function ee(){var kt=[];return function Qt(de,Te){return kt.push(de+" ")>Z.cacheLength&&delete Qt[kt.shift()],Qt[de+" "]=Te}}function we(kt){return kt[sn]=!0,kt}function Ae(kt){var Qt=Ge.createElement("fieldset");try{return!!kt(Qt)}catch(de){return!1}finally{Qt.parentNode&&Qt.parentNode.removeChild(Qt),Qt=null}}function Di(kt,Qt){for(var de=kt.split("|"),Te=de.length;Te--;)Z.attrHandle[de[Te]]=Qt}function zr(kt,Qt){var de=Qt&&kt,Te=de&&1===kt.nodeType&&1===Qt.nodeType&&kt.sourceIndex-Qt.sourceIndex;if(Te)return Te;if(de)for(;de=de.nextSibling;)if(de===Qt)return-1;return kt?1:-1}function Rn(kt){return function(Qt){return"input"===Qt.nodeName.toLowerCase()&&Qt.type===kt}}function On(kt){return function(Qt){var de=Qt.nodeName.toLowerCase();return("input"===de||"button"===de)&&Qt.type===kt}}function $o(kt){return function(Qt){return"form"in Qt?Qt.parentNode&&!1===Qt.disabled?"label"in Qt?"label"in Qt.parentNode?Qt.parentNode.disabled===kt:Qt.disabled===kt:Qt.isDisabled===kt||Qt.isDisabled!==!kt&&Q(Qt)===kt:Qt.disabled===kt:"label"in Qt&&Qt.disabled===kt}}function _n(kt){return we(function(Qt){return Qt=+Qt,we(function(de,Te){for(var ve,yi=kt([],de.length,Qt),Je=yi.length;Je--;)de[ve=yi[Je]]&&(de[ve]=!(Te[ve]=de[ve]))})})}function Ko(kt){return kt&&void 0!==kt.getElementsByTagName&&kt}for(z in V=gt.support={},bt=gt.isXML=function(kt){var de=(kt.ownerDocument||kt).documentElement;return!Go.test(kt.namespaceURI||de&&de.nodeName||"HTML")},je=gt.setDocument=function(kt){var Qt,de,Te=kt?kt.ownerDocument||kt:gi;return Te!==Ge&&9===Te.nodeType&&Te.documentElement&&(Ki=(Ge=Te).documentElement,xr=!bt(Ge),gi!==Ge&&(de=Ge.defaultView)&&de.top!==de&&(de.addEventListener?de.addEventListener("unload",ye,!1):de.attachEvent&&de.attachEvent("onunload",ye)),V.attributes=Ae(function(ve){return ve.className="i",!ve.getAttribute("className")}),V.getElementsByTagName=Ae(function(ve){return ve.appendChild(Ge.createComment("")),!ve.getElementsByTagName("*").length}),V.getElementsByClassName=ja.test(Ge.getElementsByClassName),V.getById=Ae(function(ve){return Ki.appendChild(ve).id=sn,!Ge.getElementsByName||!Ge.getElementsByName(sn).length}),V.getById?(Z.filter.ID=function(ve){var yi=ve.replace(Xo,ta);return function(Je){return Je.getAttribute("id")===yi}},Z.find.ID=function(ve,yi){if(void 0!==yi.getElementById&&xr){var Je=yi.getElementById(ve);return Je?[Je]:[]}}):(Z.filter.ID=function(ve){var yi=ve.replace(Xo,ta);return function(Je){var oe=void 0!==Je.getAttributeNode&&Je.getAttributeNode("id");return oe&&oe.value===yi}},Z.find.ID=function(ve,yi){if(void 0!==yi.getElementById&&xr){var Je,oe,ci,kr=yi.getElementById(ve);if(kr){if((Je=kr.getAttributeNode("id"))&&Je.value===ve)return[kr];for(ci=yi.getElementsByName(ve),oe=0;kr=ci[oe++];)if((Je=kr.getAttributeNode("id"))&&Je.value===ve)return[kr]}return[]}}),Z.find.TAG=V.getElementsByTagName?function(ve,yi){return void 0!==yi.getElementsByTagName?yi.getElementsByTagName(ve):V.qsa?yi.querySelectorAll(ve):void 0}:function(ve,yi){var Je,oe=[],ci=0,kr=yi.getElementsByTagName(ve);if("*"===ve){for(;Je=kr[ci++];)1===Je.nodeType&&oe.push(Je);return oe}return kr},Z.find.CLASS=V.getElementsByClassName&&function(ve,yi){if(void 0!==yi.getElementsByClassName&&xr)return yi.getElementsByClassName(ve)},ro=[],Yi=[],(V.qsa=ja.test(Ge.querySelectorAll))&&(Ae(function(ve){Ki.appendChild(ve).innerHTML="<a id='"+sn+"'></a><select id='"+sn+"-\r\\' msallowcapture=''><option selected=''></option></select>",ve.querySelectorAll("[msallowcapture^='']").length&&Yi.push("[*^$]="+Kr+"*(?:''|\"\")"),ve.querySelectorAll("[selected]").length||Yi.push("\\["+Kr+"*(?:value|"+Jo+")"),ve.querySelectorAll("[id~="+sn+"-]").length||Yi.push("~="),ve.querySelectorAll(":checked").length||Yi.push(":checked"),ve.querySelectorAll("a#"+sn+"+*").length||Yi.push(".#.+[+~]")}),Ae(function(ve){ve.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var yi=Ge.createElement("input");yi.setAttribute("type","hidden"),ve.appendChild(yi).setAttribute("name","D"),ve.querySelectorAll("[name=d]").length&&Yi.push("name"+Kr+"*[*^$|!~]?="),2!==ve.querySelectorAll(":enabled").length&&Yi.push(":enabled",":disabled"),Ki.appendChild(ve).disabled=!0,2!==ve.querySelectorAll(":disabled").length&&Yi.push(":enabled",":disabled"),ve.querySelectorAll("*,:x"),Yi.push(",.*:")})),(V.matchesSelector=ja.test(En=Ki.matches||Ki.webkitMatchesSelector||Ki.mozMatchesSelector||Ki.oMatchesSelector||Ki.msMatchesSelector))&&Ae(function(ve){V.disconnectedMatch=En.call(ve,"*"),En.call(ve,"[s!='']:x"),ro.push("!=",vo)}),Yi=Yi.length&&new RegExp(Yi.join("|")),ro=ro.length&&new RegExp(ro.join("|")),Qt=ja.test(Ki.compareDocumentPosition),Gn=Qt||ja.test(Ki.contains)?function(ve,yi){var Je=9===ve.nodeType?ve.documentElement:ve,oe=yi&&yi.parentNode;return ve===oe||!(!oe||1!==oe.nodeType||!(Je.contains?Je.contains(oe):ve.compareDocumentPosition&&16&ve.compareDocumentPosition(oe)))}:function(ve,yi){if(yi)for(;yi=yi.parentNode;)if(yi===ve)return!0;return!1},sa=Qt?function(ve,yi){if(ve===yi)return pi=!0,0;var Je=!ve.compareDocumentPosition-!yi.compareDocumentPosition;return Je||(1&(Je=(ve.ownerDocument||ve)===(yi.ownerDocument||yi)?ve.compareDocumentPosition(yi):1)||!V.sortDetached&&yi.compareDocumentPosition(ve)===Je?ve===Ge||ve.ownerDocument===gi&&Gn(gi,ve)?-1:yi===Ge||yi.ownerDocument===gi&&Gn(gi,yi)?1:Xe?Ao(Xe,ve)-Ao(Xe,yi):0:4&Je?-1:1)}:function(ve,yi){if(ve===yi)return pi=!0,0;var Je,oe=0,ci=ve.parentNode,kr=yi.parentNode,Br=[ve],Vi=[yi];if(!ci||!kr)return ve===Ge?-1:yi===Ge?1:ci?-1:kr?1:Xe?Ao(Xe,ve)-Ao(Xe,yi):0;if(ci===kr)return zr(ve,yi);for(Je=ve;Je=Je.parentNode;)Br.unshift(Je);for(Je=yi;Je=Je.parentNode;)Vi.unshift(Je);for(;Br[oe]===Vi[oe];)oe++;return oe?zr(Br[oe],Vi[oe]):Br[oe]===gi?-1:Vi[oe]===gi?1:0}),Ge},gt.matches=function(kt,Qt){return gt(kt,null,null,Qt)},gt.matchesSelector=function(kt,Qt){if((kt.ownerDocument||kt)!==Ge&&je(kt),V.matchesSelector&&xr&&!Qn[Qt+" "]&&(!ro||!ro.test(Qt))&&(!Yi||!Yi.test(Qt)))try{var de=En.call(kt,Qt);if(de||V.disconnectedMatch||kt.document&&11!==kt.document.nodeType)return de}catch(Te){Qn(Qt,!0)}return 0<gt(Qt,Ge,null,[kt]).length},gt.contains=function(kt,Qt){return(kt.ownerDocument||kt)!==Ge&&je(kt),Gn(kt,Qt)},gt.attr=function(kt,Qt){(kt.ownerDocument||kt)!==Ge&&je(kt);var de=Z.attrHandle[Qt.toLowerCase()],Te=de&&Zo.call(Z.attrHandle,Qt.toLowerCase())?de(kt,Qt,!xr):void 0;return void 0!==Te?Te:V.attributes||!xr?kt.getAttribute(Qt):(Te=kt.getAttributeNode(Qt))&&Te.specified?Te.value:null},gt.escape=function(kt){return(kt+"").replace(Va,ke)},gt.error=function(kt){throw new Error("Syntax error, unrecognized expression: "+kt)},gt.uniqueSort=function(kt){var Qt,de=[],Te=0,ve=0;if(pi=!V.detectDuplicates,Xe=!V.sortStable&&kt.slice(0),kt.sort(sa),pi){for(;Qt=kt[ve++];)Qt===kt[ve]&&(Te=de.push(ve));for(;Te--;)kt.splice(de[Te],1)}return Xe=null,kt},dt=gt.getText=function(kt){var Qt,de="",Te=0,ve=kt.nodeType;if(ve){if(1===ve||9===ve||11===ve){if("string"==typeof kt.textContent)return kt.textContent;for(kt=kt.firstChild;kt;kt=kt.nextSibling)de+=dt(kt)}else if(3===ve||4===ve)return kt.nodeValue}else for(;Qt=kt[Te++];)de+=dt(Qt);return de},(Z=gt.selectors={cacheLength:50,createPseudo:we,match:vs,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(kt){return kt[1]=kt[1].replace(Xo,ta),kt[3]=(kt[3]||kt[4]||kt[5]||"").replace(Xo,ta),"~="===kt[2]&&(kt[3]=" "+kt[3]+" "),kt.slice(0,4)},CHILD:function(kt){return kt[1]=kt[1].toLowerCase(),"nth"===kt[1].slice(0,3)?(kt[3]||gt.error(kt[0]),kt[4]=+(kt[4]?kt[5]+(kt[6]||1):2*("even"===kt[3]||"odd"===kt[3])),kt[5]=+(kt[7]+kt[8]||"odd"===kt[3])):kt[3]&&gt.error(kt[0]),kt},PSEUDO:function(kt){var Qt,de=!kt[6]&&kt[2];return vs.CHILD.test(kt[0])?null:(kt[3]?kt[2]=kt[4]||kt[5]||"":de&&es.test(de)&&(Qt=At(de,!0))&&(Qt=de.indexOf(")",de.length-Qt)-de.length)&&(kt[0]=kt[0].slice(0,Qt),kt[2]=de.slice(0,Qt)),kt.slice(0,3))}},filter:{TAG:function(kt){var Qt=kt.replace(Xo,ta).toLowerCase();return"*"===kt?function(){return!0}:function(de){return de.nodeName&&de.nodeName.toLowerCase()===Qt}},CLASS:function(kt){var Qt=ln[kt+" "];return Qt||(Qt=new RegExp("(^|"+Kr+")"+kt+"("+Kr+"|$)"))&&ln(kt,function(de){return Qt.test("string"==typeof de.className&&de.className||void 0!==de.getAttribute&&de.getAttribute("class")||"")})},ATTR:function(kt,Qt,de){return function(Te){var ve=gt.attr(Te,kt);return null==ve?"!="===Qt:!Qt||(ve+="","="===Qt?ve===de:"!="===Qt?ve!==de:"^="===Qt?de&&0===ve.indexOf(de):"*="===Qt?de&&-1<ve.indexOf(de):"$="===Qt?de&&ve.slice(-de.length)===de:"~="===Qt?-1<(" "+ve.replace(Hn," ")+" ").indexOf(de):"|="===Qt&&(ve===de||ve.slice(0,de.length+1)===de+"-"))}},CHILD:function(kt,Qt,de,Te,ve){var yi="nth"!==kt.slice(0,3),Je="last"!==kt.slice(-4),oe="of-type"===Qt;return 1===Te&&0===ve?function(ci){return!!ci.parentNode}:function(ci,kr,Br){var Vi,Gr,Nr,ce,co,Cn,Bn=yi!==Je?"nextSibling":"previousSibling",fn=ci.parentNode,Ra=oe&&ci.nodeName.toLowerCase(),Po=!Br&&!oe,Mo=!1;if(fn){if(yi){for(;Bn;){for(ce=ci;ce=ce[Bn];)if(oe?ce.nodeName.toLowerCase()===Ra:1===ce.nodeType)return!1;Cn=Bn="only"===kt&&!Cn&&"nextSibling"}return!0}if(Cn=[Je?fn.firstChild:fn.lastChild],Je&&Po){for(Mo=(co=(Vi=(Gr=(Nr=(ce=fn)[sn]||(ce[sn]={}))[ce.uniqueID]||(Nr[ce.uniqueID]={}))[kt]||[])[0]===Ho&&Vi[1])&&Vi[2],ce=co&&fn.childNodes[co];ce=++co&&ce&&ce[Bn]||(Mo=co=0)||Cn.pop();)if(1===ce.nodeType&&++Mo&&ce===ci){Gr[kt]=[Ho,co,Mo];break}}else if(Po&&(Mo=co=(Vi=(Gr=(Nr=(ce=ci)[sn]||(ce[sn]={}))[ce.uniqueID]||(Nr[ce.uniqueID]={}))[kt]||[])[0]===Ho&&Vi[1]),!1===Mo)for(;(ce=++co&&ce&&ce[Bn]||(Mo=co=0)||Cn.pop())&&((oe?ce.nodeName.toLowerCase()!==Ra:1!==ce.nodeType)||!++Mo||(Po&&((Gr=(Nr=ce[sn]||(ce[sn]={}))[ce.uniqueID]||(Nr[ce.uniqueID]={}))[kt]=[Ho,Mo]),ce!==ci)););return(Mo-=ve)===Te||Mo%Te==0&&0<=Mo/Te}}},PSEUDO:function(kt,Qt){var de,Te=Z.pseudos[kt]||Z.setFilters[kt.toLowerCase()]||gt.error("unsupported pseudo: "+kt);return Te[sn]?Te(Qt):1<Te.length?(de=[kt,kt,"",Qt],Z.setFilters.hasOwnProperty(kt.toLowerCase())?we(function(ve,yi){for(var Je,oe=Te(ve,Qt),ci=oe.length;ci--;)ve[Je=Ao(ve,oe[ci])]=!(yi[Je]=oe[ci])}):function(ve){return Te(ve,0,de)}):Te}},pseudos:{not:we(function(kt){var Qt=[],de=[],Te=Xt(kt.replace(Xn,"$1"));return Te[sn]?we(function(ve,yi,Je,oe){for(var ci,kr=Te(ve,null,oe,[]),Br=ve.length;Br--;)(ci=kr[Br])&&(ve[Br]=!(yi[Br]=ci))}):function(ve,yi,Je){return Qt[0]=ve,Te(Qt,null,Je,de),Qt[0]=null,!de.pop()}}),has:we(function(kt){return function(Qt){return 0<gt(kt,Qt).length}}),contains:we(function(kt){return kt=kt.replace(Xo,ta),function(Qt){return-1<(Qt.textContent||dt(Qt)).indexOf(kt)}}),lang:we(function(kt){return Ua.test(kt||"")||gt.error("unsupported lang: "+kt),kt=kt.replace(Xo,ta).toLowerCase(),function(Qt){var de;do{if(de=xr?Qt.lang:Qt.getAttribute("xml:lang")||Qt.getAttribute("lang"))return(de=de.toLowerCase())===kt||0===de.indexOf(kt+"-")}while((Qt=Qt.parentNode)&&1===Qt.nodeType);return!1}}),target:function(kt){var Qt=w.location&&w.location.hash;return Qt&&Qt.slice(1)===kt.id},root:function(kt){return kt===Ki},focus:function(kt){return kt===Ge.activeElement&&(!Ge.hasFocus||Ge.hasFocus())&&!!(kt.type||kt.href||~kt.tabIndex)},enabled:$o(!1),disabled:$o(!0),checked:function(kt){var Qt=kt.nodeName.toLowerCase();return"input"===Qt&&!!kt.checked||"option"===Qt&&!!kt.selected},selected:function(kt){return!0===kt.selected},empty:function(kt){for(kt=kt.firstChild;kt;kt=kt.nextSibling)if(kt.nodeType<6)return!1;return!0},parent:function(kt){return!Z.pseudos.empty(kt)},header:function(kt){return is.test(kt.nodeName)},input:function(kt){return Na.test(kt.nodeName)},button:function(kt){var Qt=kt.nodeName.toLowerCase();return"input"===Qt&&"button"===kt.type||"button"===Qt},text:function(kt){var Qt;return"input"===kt.nodeName.toLowerCase()&&"text"===kt.type&&(null==(Qt=kt.getAttribute("type"))||"text"===Qt.toLowerCase())},first:_n(function(){return[0]}),last:_n(function(kt,Qt){return[Qt-1]}),eq:_n(function(kt,Qt,de){return[de<0?de+Qt:de]}),even:_n(function(kt,Qt){for(var de=0;de<Qt;de+=2)kt.push(de);return kt}),odd:_n(function(kt,Qt){for(var de=1;de<Qt;de+=2)kt.push(de);return kt}),lt:_n(function(kt,Qt,de){for(var Te=de<0?de+Qt:Qt<de?Qt:de;0<=--Te;)kt.push(Te);return kt}),gt:_n(function(kt,Qt,de){for(var Te=de<0?de+Qt:de;++Te<Qt;)kt.push(Te);return kt})}}).pseudos.nth=Z.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Z.pseudos[z]=Rn(z);for(z in{submit:!0,reset:!0})Z.pseudos[z]=On(z);function or(){}function fa(kt){for(var Qt=0,de=kt.length,Te="";Qt<de;Qt++)Te+=kt[Qt].value;return Te}function zo(kt,Qt,de){var Te=Qt.dir,ve=Qt.next,yi=ve||Te,Je=de&&"parentNode"===yi,oe=Wr++;return Qt.first?function(ci,kr,Br){for(;ci=ci[Te];)if(1===ci.nodeType||Je)return kt(ci,kr,Br);return!1}:function(ci,kr,Br){var Vi,Gr,Nr,ce=[Ho,oe];if(Br){for(;ci=ci[Te];)if((1===ci.nodeType||Je)&&kt(ci,kr,Br))return!0}else for(;ci=ci[Te];)if(1===ci.nodeType||Je)if(Gr=(Nr=ci[sn]||(ci[sn]={}))[ci.uniqueID]||(Nr[ci.uniqueID]={}),ve&&ve===ci.nodeName.toLowerCase())ci=ci[Te]||ci;else{if((Vi=Gr[yi])&&Vi[0]===Ho&&Vi[1]===oe)return ce[2]=Vi[2];if((Gr[yi]=ce)[2]=kt(ci,kr,Br))return!0}return!1}}function la(kt){return 1<kt.length?function(Qt,de,Te){for(var ve=kt.length;ve--;)if(!kt[ve](Qt,de,Te))return!1;return!0}:kt[0]}function ur(kt,Qt,de,Te,ve){for(var yi,Je=[],oe=0,ci=kt.length,kr=null!=Qt;oe<ci;oe++)(yi=kt[oe])&&(de&&!de(yi,Te,ve)||(Je.push(yi),kr&&Qt.push(oe)));return Je}function Ir(kt,Qt,de,Te,ve,yi){return Te&&!Te[sn]&&(Te=Ir(Te)),ve&&!ve[sn]&&(ve=Ir(ve,yi)),we(function(Je,oe,ci,kr){var Br,Vi,Gr,Nr=[],ce=[],co=oe.length,Cn=Je||function(Ra,Po,Mo){for(var no=0,_o=Po.length;no<_o;no++)gt(Ra,Po[no],Mo);return Mo}(Qt||"*",ci.nodeType?[ci]:ci,[]),Bn=!kt||!Je&&Qt?Cn:ur(Cn,Nr,kt,ci,kr),fn=de?ve||(Je?kt:co||Te)?[]:oe:Bn;if(de&&de(Bn,fn,ci,kr),Te)for(Br=ur(fn,ce),Te(Br,[],ci,kr),Vi=Br.length;Vi--;)(Gr=Br[Vi])&&(fn[ce[Vi]]=!(Bn[ce[Vi]]=Gr));if(Je){if(ve||kt){if(ve){for(Br=[],Vi=fn.length;Vi--;)(Gr=fn[Vi])&&Br.push(Bn[Vi]=Gr);ve(null,fn=[],Br,kr)}for(Vi=fn.length;Vi--;)(Gr=fn[Vi])&&-1<(Br=ve?Ao(Je,Gr):Nr[Vi])&&(Je[Br]=!(oe[Br]=Gr))}}else fn=ur(fn===oe?fn.splice(co,fn.length):fn),ve?ve(null,oe,fn,kr):un.apply(oe,fn)})}function Ro(kt){for(var Qt,de,Te,ve=kt.length,yi=Z.relative[kt[0].type],Je=yi||Z.relative[" "],oe=yi?1:0,ci=zo(function(Vi){return Vi===Qt},Je,!0),kr=zo(function(Vi){return-1<Ao(Qt,Vi)},Je,!0),Br=[function(Vi,Gr,Nr){var ce=!yi&&(Nr||Gr!==ge)||((Qt=Gr).nodeType?ci(Vi,Gr,Nr):kr(Vi,Gr,Nr));return Qt=null,ce}];oe<ve;oe++)if(de=Z.relative[kt[oe].type])Br=[zo(la(Br),de)];else{if((de=Z.filter[kt[oe].type].apply(null,kt[oe].matches))[sn]){for(Te=++oe;Te<ve&&!Z.relative[kt[Te].type];Te++);return Ir(1<oe&&la(Br),1<oe&&fa(kt.slice(0,oe-1).concat({value:" "===kt[oe-2].type?"*":""})).replace(Xn,"$1"),de,oe<Te&&Ro(kt.slice(oe,Te)),Te<ve&&Ro(kt=kt.slice(Te)),Te<ve&&fa(kt))}Br.push(de)}return la(Br)}return or.prototype=Z.filters=Z.pseudos,Z.setFilters=new or,At=gt.tokenize=function(kt,Qt){var de,Te,ve,yi,Je,oe,ci,kr=Aa[kt+" "];if(kr)return Qt?0:kr.slice(0);for(Je=kt,oe=[],ci=Z.preFilter;Je;){for(yi in de&&!(Te=ts.exec(Je))||(Te&&(Je=Je.slice(Te[0].length)||Je),oe.push(ve=[])),de=!1,(Te=Qo.exec(Je))&&(de=Te.shift(),ve.push({value:de,type:Te[0].replace(Xn," ")}),Je=Je.slice(de.length)),Z.filter)!(Te=vs[yi].exec(Je))||ci[yi]&&!(Te=ci[yi](Te))||(de=Te.shift(),ve.push({value:de,type:yi,matches:Te}),Je=Je.slice(de.length));if(!de)break}return Qt?Je.length:Je?gt.error(kt):Aa(kt,oe).slice(0)},Xt=gt.compile=function(kt,Qt){var de,Te,ve,yi,Je,oe,ci=[],kr=[],Br=Oo[kt+" "];if(!Br){for(Qt||(Qt=At(kt)),de=Qt.length;de--;)(Br=Ro(Qt[de]))[sn]?ci.push(Br):kr.push(Br);(Br=Oo(kt,(Te=kr,yi=0<(ve=ci).length,Je=0<Te.length,oe=function(Vi,Gr,Nr,ce,co){var Cn,Bn,fn,Ra=0,Po="0",Mo=Vi&&[],no=[],_o=ge,ua=Vi||Je&&Z.find.TAG("*",co),Ds=Ho+=null==_o?1:Math.random()||.1,oo=ua.length;for(co&&(ge=Gr===Ge||Gr||co);Po!==oo&&null!=(Cn=ua[Po]);Po++){if(Je&&Cn){for(Bn=0,Gr||Cn.ownerDocument===Ge||(je(Cn),Nr=!xr);fn=Te[Bn++];)if(fn(Cn,Gr||Ge,Nr)){ce.push(Cn);break}co&&(Ho=Ds)}yi&&((Cn=!fn&&Cn)&&Ra--,Vi&&Mo.push(Cn))}if(Ra+=Po,yi&&Po!==Ra){for(Bn=0;fn=ve[Bn++];)fn(Mo,no,Gr,Nr);if(Vi){if(0<Ra)for(;Po--;)Mo[Po]||no[Po]||(no[Po]=Wo.call(ce));no=ur(no)}un.apply(ce,no),co&&!Vi&&0<no.length&&1<Ra+ve.length&&gt.uniqueSort(ce)}return co&&(Ho=Ds,ge=_o),Mo},yi?we(oe):oe))).selector=kt}return Br},ie=gt.select=function(kt,Qt,de,Te){var ve,yi,Je,oe,ci,kr="function"==typeof kt&&kt,Br=!Te&&At(kt=kr.selector||kt);if(de=de||[],1===Br.length){if(2<(yi=Br[0]=Br[0].slice(0)).length&&"ID"===(Je=yi[0]).type&&9===Qt.nodeType&&xr&&Z.relative[yi[1].type]){if(!(Qt=(Z.find.ID(Je.matches[0].replace(Xo,ta),Qt)||[])[0]))return de;kr&&(Qt=Qt.parentNode),kt=kt.slice(yi.shift().value.length)}for(ve=vs.needsContext.test(kt)?0:yi.length;ve--&&!Z.relative[oe=(Je=yi[ve]).type];)if((ci=Z.find[oe])&&(Te=ci(Je.matches[0].replace(Xo,ta),Bs.test(yi[0].type)&&Ko(Qt.parentNode)||Qt))){if(yi.splice(ve,1),!(kt=Te.length&&fa(yi)))return un.apply(de,Te),de;break}}return(kr||Xt(kt,Br))(Te,Qt,!xr,de,!Qt||Bs.test(kt)&&Ko(Qt.parentNode)||Qt),de},V.sortStable=sn.split("").sort(sa).join("")===sn,V.detectDuplicates=!!pi,je(),V.sortDetached=Ae(function(kt){return 1&kt.compareDocumentPosition(Ge.createElement("fieldset"))}),Ae(function(kt){return kt.innerHTML="<a href='#'></a>","#"===kt.firstChild.getAttribute("href")})||Di("type|href|height|width",function(kt,Qt,de){if(!de)return kt.getAttribute(Qt,"type"===Qt.toLowerCase()?1:2)}),V.attributes&&Ae(function(kt){return kt.innerHTML="<input/>",kt.firstChild.setAttribute("value",""),""===kt.firstChild.getAttribute("value")})||Di("value",function(kt,Qt,de){if(!de&&"input"===kt.nodeName.toLowerCase())return kt.defaultValue}),Ae(function(kt){return null==kt.getAttribute("disabled")})||Di(Jo,function(kt,Qt,de){var Te;if(!de)return!0===kt[Qt]?Qt.toLowerCase():(Te=kt.getAttributeNode(Qt))&&Te.specified?Te.value:null}),gt}(F);q.find=ti,q.expr=ti.selectors,q.expr[":"]=q.expr.pseudos,q.uniqueSort=q.unique=ti.uniqueSort,q.text=ti.getText,q.isXMLDoc=ti.isXML,q.contains=ti.contains,q.escapeSelector=ti.escape;var ae=function(w,z,V){for(var Z=[],dt=void 0!==V;(w=w[z])&&9!==w.nodeType;)if(1===w.nodeType){if(dt&&q(w).is(V))break;Z.push(w)}return Z},zt=function(w,z){for(var V=[];w;w=w.nextSibling)1===w.nodeType&&w!==z&&V.push(w);return V},Ht=q.expr.match.needsContext;function ht(w,z){return w.nodeName&&w.nodeName.toLowerCase()===z.toLowerCase()}var mt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function rt(w,z,V){return lt(z)?q.grep(w,function(Z,dt){return!!z.call(Z,dt,Z)!==V}):z.nodeType?q.grep(w,function(Z){return Z===z!==V}):"string"!=typeof z?q.grep(w,function(Z){return-1<et.call(z,Z)!==V}):q.filter(z,w,V)}q.filter=function(w,z,V){var Z=z[0];return V&&(w=":not("+w+")"),1===z.length&&1===Z.nodeType?q.find.matchesSelector(Z,w)?[Z]:[]:q.find.matches(w,q.grep(z,function(dt){return 1===dt.nodeType}))},q.fn.extend({find:function(w){var z,V,Z=this.length,dt=this;if("string"!=typeof w)return this.pushStack(q(w).filter(function(){for(z=0;z<Z;z++)if(q.contains(dt[z],this))return!0}));for(V=this.pushStack([]),z=0;z<Z;z++)q.find(w,dt[z],V);return 1<Z?q.uniqueSort(V):V},filter:function(w){return this.pushStack(rt(this,w||[],!1))},not:function(w){return this.pushStack(rt(this,w||[],!0))},is:function(w){return!!rt(this,"string"==typeof w&&Ht.test(w)?q(w):w||[],!1).length}});var J,d=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(q.fn.init=function(w,z,V){var Z,dt;if(!w)return this;if(V=V||J,"string"==typeof w){if(!(Z="<"===w[0]&&">"===w[w.length-1]&&3<=w.length?[null,w,null]:d.exec(w))||!Z[1]&&z)return!z||z.jquery?(z||V).find(w):this.constructor(z).find(w);if(Z[1]){if(q.merge(this,q.parseHTML(Z[1],(z=z instanceof q?z[0]:z)&&z.nodeType?z.ownerDocument||z:A,!0)),mt.test(Z[1])&&q.isPlainObject(z))for(Z in z)lt(this[Z])?this[Z](z[Z]):this.attr(Z,z[Z]);return this}return(dt=A.getElementById(Z[2]))&&(this[0]=dt,this.length=1),this}return w.nodeType?(this[0]=w,this.length=1,this):lt(w)?void 0!==V.ready?V.ready(w):w(q):q.makeArray(w,this)}).prototype=q.fn,J=q(A);var Pt=/^(?:parents|prev(?:Until|All))/,Et={children:!0,contents:!0,next:!0,prev:!0};function se(w,z){for(;(w=w[z])&&1!==w.nodeType;);return w}q.fn.extend({has:function(w){var z=q(w,this),V=z.length;return this.filter(function(){for(var Z=0;Z<V;Z++)if(q.contains(this,z[Z]))return!0})},closest:function(w,z){var V,Z=0,dt=this.length,bt=[],At="string"!=typeof w&&q(w);if(!Ht.test(w))for(;Z<dt;Z++)for(V=this[Z];V&&V!==z;V=V.parentNode)if(V.nodeType<11&&(At?-1<At.index(V):1===V.nodeType&&q.find.matchesSelector(V,w))){bt.push(V);break}return this.pushStack(1<bt.length?q.uniqueSort(bt):bt)},index:function(w){return w?"string"==typeof w?et.call(q(w),this[0]):et.call(this,w.jquery?w[0]:w):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(w,z){return this.pushStack(q.uniqueSort(q.merge(this.get(),q(w,z))))},addBack:function(w){return this.add(null==w?this.prevObject:this.prevObject.filter(w))}}),q.each({parent:function(w){var z=w.parentNode;return z&&11!==z.nodeType?z:null},parents:function(w){return ae(w,"parentNode")},parentsUntil:function(w,z,V){return ae(w,"parentNode",V)},next:function(w){return se(w,"nextSibling")},prev:function(w){return se(w,"previousSibling")},nextAll:function(w){return ae(w,"nextSibling")},prevAll:function(w){return ae(w,"previousSibling")},nextUntil:function(w,z,V){return ae(w,"nextSibling",V)},prevUntil:function(w,z,V){return ae(w,"previousSibling",V)},siblings:function(w){return zt((w.parentNode||{}).firstChild,w)},children:function(w){return zt(w.firstChild)},contents:function(w){return void 0!==w.contentDocument?w.contentDocument:(ht(w,"template")&&(w=w.content||w),q.merge([],w.childNodes))}},function(w,z){q.fn[w]=function(V,Z){var dt=q.map(this,z,V);return"Until"!==w.slice(-5)&&(Z=V),Z&&"string"==typeof Z&&(dt=q.filter(Z,dt)),1<this.length&&(Et[w]||q.uniqueSort(dt),Pt.test(w)&&dt.reverse()),this.pushStack(dt)}});var Ie=/[^\x20\t\r\n\f]+/g;function ei(w){return w}function _e(w){throw w}function Ri(w,z,V,Z){var dt;try{w&&lt(dt=w.promise)?dt.call(w).done(z).fail(V):w&&lt(dt=w.then)?dt.call(w,z,V):z.apply(void 0,[w].slice(Z))}catch(bt){V.apply(void 0,[bt])}}q.Callbacks=function(w){var V;w="string"==typeof w?(V={},q.each(w.match(Ie)||[],function(je,Ge){V[Ge]=!0}),V):q.extend({},w);var Z,dt,bt,At,Xt=[],ie=[],ge=-1,Xe=function(){for(At=At||w.once,bt=Z=!0;ie.length;ge=-1)for(dt=ie.shift();++ge<Xt.length;)!1===Xt[ge].apply(dt[0],dt[1])&&w.stopOnFalse&&(ge=Xt.length,dt=!1);w.memory||(dt=!1),Z=!1,At&&(Xt=dt?[]:"")},pi={add:function(){return Xt&&(dt&&!Z&&(ge=Xt.length-1,ie.push(dt)),function je(Ge){q.each(Ge,function(Ki,xr){lt(xr)?w.unique&&pi.has(xr)||Xt.push(xr):xr&&xr.length&&"string"!==Ye(xr)&&je(xr)})}(arguments),dt&&!Z&&Xe()),this},remove:function(){return q.each(arguments,function(je,Ge){for(var Ki;-1<(Ki=q.inArray(Ge,Xt,Ki));)Xt.splice(Ki,1),Ki<=ge&&ge--}),this},has:function(je){return je?-1<q.inArray(je,Xt):0<Xt.length},empty:function(){return Xt&&(Xt=[]),this},disable:function(){return At=ie=[],Xt=dt="",this},disabled:function(){return!Xt},lock:function(){return At=ie=[],dt||Z||(Xt=dt=""),this},locked:function(){return!!At},fireWith:function(je,Ge){return At||(Ge=[je,(Ge=Ge||[]).slice?Ge.slice():Ge],ie.push(Ge),Z||Xe()),this},fire:function(){return pi.fireWith(this,arguments),this},fired:function(){return!!bt}};return pi},q.extend({Deferred:function(w){var z=[["notify","progress",q.Callbacks("memory"),q.Callbacks("memory"),2],["resolve","done",q.Callbacks("once memory"),q.Callbacks("once memory"),0,"resolved"],["reject","fail",q.Callbacks("once memory"),q.Callbacks("once memory"),1,"rejected"]],V="pending",Z={state:function(){return V},always:function(){return dt.done(arguments).fail(arguments),this},catch:function(bt){return Z.then(null,bt)},pipe:function(){var bt=arguments;return q.Deferred(function(At){q.each(z,function(Xt,ie){var ge=lt(bt[ie[4]])&&bt[ie[4]];dt[ie[1]](function(){var Xe=ge&&ge.apply(this,arguments);Xe&&lt(Xe.promise)?Xe.promise().progress(At.notify).done(At.resolve).fail(At.reject):At[ie[0]+"With"](this,ge?[Xe]:arguments)})}),bt=null}).promise()},then:function(bt,At,Xt){var ie=0;function ge(Xe,pi,je,Ge){return function(){var Ki=this,xr=arguments,Yi=function(){var En,Gn;if(!(Xe<ie)){if((En=je.apply(Ki,xr))===pi.promise())throw new TypeError("Thenable self-resolution");lt(Gn=En&&("object"==typeof En||"function"==typeof En)&&En.then)?Ge?Gn.call(En,ge(ie,pi,ei,Ge),ge(ie,pi,_e,Ge)):(ie++,Gn.call(En,ge(ie,pi,ei,Ge),ge(ie,pi,_e,Ge),ge(ie,pi,ei,pi.notifyWith))):(je!==ei&&(Ki=void 0,xr=[En]),(Ge||pi.resolveWith)(Ki,xr))}},ro=Ge?Yi:function(){try{Yi()}catch(En){q.Deferred.exceptionHook&&q.Deferred.exceptionHook(En,ro.stackTrace),ie<=Xe+1&&(je!==_e&&(Ki=void 0,xr=[En]),pi.rejectWith(Ki,xr))}};Xe?ro():(q.Deferred.getStackHook&&(ro.stackTrace=q.Deferred.getStackHook()),F.setTimeout(ro))}}return q.Deferred(function(Xe){z[0][3].add(ge(0,Xe,lt(Xt)?Xt:ei,Xe.notifyWith)),z[1][3].add(ge(0,Xe,lt(bt)?bt:ei)),z[2][3].add(ge(0,Xe,lt(At)?At:_e))}).promise()},promise:function(bt){return null!=bt?q.extend(bt,Z):Z}},dt={};return q.each(z,function(bt,At){var Xt=At[2],ie=At[5];Z[At[1]]=Xt.add,ie&&Xt.add(function(){V=ie},z[3-bt][2].disable,z[3-bt][3].disable,z[0][2].lock,z[0][3].lock),Xt.add(At[3].fire),dt[At[0]]=function(){return dt[At[0]+"With"](this===dt?void 0:this,arguments),this},dt[At[0]+"With"]=Xt.fireWith}),Z.promise(dt),w&&w.call(dt,dt),dt},when:function(w){var z=arguments.length,V=z,Z=Array(V),dt=P.call(arguments),bt=q.Deferred(),At=function(Xt){return function(ie){Z[Xt]=this,dt[Xt]=1<arguments.length?P.call(arguments):ie,--z||bt.resolveWith(Z,dt)}};if(z<=1&&(Ri(w,bt.done(At(V)).resolve,bt.reject,!z),"pending"===bt.state()||lt(dt[V]&&dt[V].then)))return bt.then();for(;V--;)Ri(dt[V],At(V),bt.reject);return bt.promise()}});var Gi=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;q.Deferred.exceptionHook=function(w,z){F.console&&F.console.warn&&w&&Gi.test(w.name)&&F.console.warn("jQuery.Deferred exception: "+w.message,w.stack,z)},q.readyException=function(w){F.setTimeout(function(){throw w})};var _i=q.Deferred();function Hr(){A.removeEventListener("DOMContentLoaded",Hr),F.removeEventListener("load",Hr),q.ready()}q.fn.ready=function(w){return _i.then(w).catch(function(z){q.readyException(z)}),this},q.extend({isReady:!1,readyWait:1,ready:function(w){(!0===w?--q.readyWait:q.isReady)||(q.isReady=!0)!==w&&0<--q.readyWait||_i.resolveWith(A,[q])}}),q.ready.then=_i.then,"complete"===A.readyState||"loading"!==A.readyState&&!A.documentElement.doScroll?F.setTimeout(q.ready):(A.addEventListener("DOMContentLoaded",Hr),F.addEventListener("load",Hr));var Tr=function(w,z,V,Z,dt,bt,At){var Xt=0,ie=w.length,ge=null==V;if("object"===Ye(V))for(Xt in dt=!0,V)Tr(w,z,Xt,V[Xt],!0,bt,At);else if(void 0!==Z&&(dt=!0,lt(Z)||(At=!0),ge&&(At?(z.call(w,Z),z=null):(ge=z,z=function(Xe,pi,je){return ge.call(q(Xe),je)})),z))for(;Xt<ie;Xt++)z(w[Xt],V,At?Z:Z.call(w[Xt],Xt,z(w[Xt],V)));return dt?w:ge?z.call(w):ie?z(w[0],V):bt},sr=/^-ms-/,Tn=/-([a-z])/g;function Ln(w,z){return z.toUpperCase()}function Dt(w){return w.replace(sr,"ms-").replace(Tn,Ln)}var Ft=function(w){return 1===w.nodeType||9===w.nodeType||!+w.nodeType};function Fe(){this.expando=q.expando+Fe.uid++}Fe.uid=1,Fe.prototype={cache:function(w){var z=w[this.expando];return z||(z={},Ft(w)&&(w.nodeType?w[this.expando]=z:Object.defineProperty(w,this.expando,{value:z,configurable:!0}))),z},set:function(w,z,V){var Z,dt=this.cache(w);if("string"==typeof z)dt[Dt(z)]=V;else for(Z in z)dt[Dt(Z)]=z[Z];return dt},get:function(w,z){return void 0===z?this.cache(w):w[this.expando]&&w[this.expando][Dt(z)]},access:function(w,z,V){return void 0===z||z&&"string"==typeof z&&void 0===V?this.get(w,z):(this.set(w,z,V),void 0!==V?V:z)},remove:function(w,z){var V,Z=w[this.expando];if(void 0!==Z){if(void 0!==z)for((V=(z=Array.isArray(z)?z.map(Dt):(z=Dt(z))in Z?[z]:z.match(Ie)||[]).length);V--;)delete Z[z[V]];(void 0===z||q.isEmptyObject(Z))&&(w.nodeType?w[this.expando]=void 0:delete w[this.expando])}},hasData:function(w){var z=w[this.expando];return void 0!==z&&!q.isEmptyObject(z)}};var Le=new Fe,st=new Fe,Rt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,me=/[A-Z]/g;function Me(w,z,V){var Z,dt;if(void 0===V&&1===w.nodeType)if(Z="data-"+z.replace(me,"-$&").toLowerCase(),"string"==typeof(V=w.getAttribute(Z))){try{V="true"===(dt=V)||"false"!==dt&&("null"===dt?null:dt===+dt+""?+dt:Rt.test(dt)?JSON.parse(dt):dt)}catch(bt){}st.set(w,z,V)}else V=void 0;return V}q.extend({hasData:function(w){return st.hasData(w)||Le.hasData(w)},data:function(w,z,V){return st.access(w,z,V)},removeData:function(w,z){st.remove(w,z)},_data:function(w,z,V){return Le.access(w,z,V)},_removeData:function(w,z){Le.remove(w,z)}}),q.fn.extend({data:function(w,z){var V,Z,dt,bt=this[0],At=bt&&bt.attributes;if(void 0===w){if(this.length&&(dt=st.get(bt),1===bt.nodeType&&!Le.get(bt,"hasDataAttrs"))){for(V=At.length;V--;)At[V]&&0===(Z=At[V].name).indexOf("data-")&&(Z=Dt(Z.slice(5)),Me(bt,Z,dt[Z]));Le.set(bt,"hasDataAttrs",!0)}return dt}return"object"==typeof w?this.each(function(){st.set(this,w)}):Tr(this,function(Xt){var ie;if(bt&&void 0===Xt)return void 0!==(ie=st.get(bt,w))||void 0!==(ie=Me(bt,w))?ie:void 0;this.each(function(){st.set(this,w,Xt)})},null,z,1<arguments.length,null,!0)},removeData:function(w){return this.each(function(){st.remove(this,w)})}}),q.extend({queue:function(w,z,V){var Z;if(w)return Z=Le.get(w,z=(z||"fx")+"queue"),V&&(!Z||Array.isArray(V)?Z=Le.access(w,z,q.makeArray(V)):Z.push(V)),Z||[]},dequeue:function(w,z){var V=q.queue(w,z=z||"fx"),Z=V.length,dt=V.shift(),bt=q._queueHooks(w,z);"inprogress"===dt&&(dt=V.shift(),Z--),dt&&("fx"===z&&V.unshift("inprogress"),delete bt.stop,dt.call(w,function(){q.dequeue(w,z)},bt)),!Z&&bt&&bt.empty.fire()},_queueHooks:function(w,z){var V=z+"queueHooks";return Le.get(w,V)||Le.access(w,V,{empty:q.Callbacks("once memory").add(function(){Le.remove(w,[z+"queue",V])})})}}),q.fn.extend({queue:function(w,z){var V=2;return"string"!=typeof w&&(z=w,w="fx",V--),arguments.length<V?q.queue(this[0],w):void 0===z?this:this.each(function(){var Z=q.queue(this,w,z);q._queueHooks(this,w),"fx"===w&&"inprogress"!==Z[0]&&q.dequeue(this,w)})},dequeue:function(w){return this.each(function(){q.dequeue(this,w)})},clearQueue:function(w){return this.queue(w||"fx",[])},promise:function(w,z){var V,Z=1,dt=q.Deferred(),bt=this,At=this.length,Xt=function(){--Z||dt.resolveWith(bt,[bt])};for("string"!=typeof w&&(z=w,w=void 0),w=w||"fx";At--;)(V=Le.get(bt[At],w+"queueHooks"))&&V.empty&&(Z++,V.empty.add(Xt));return Xt(),dt.promise(z)}});var ii=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+ii+")([a-z%]*)$","i"),Bt=["Top","Right","Bottom","Left"],Kt=A.documentElement,ne=function(w){return q.contains(w.ownerDocument,w)},Pe={composed:!0};Kt.getRootNode&&(ne=function(w){return q.contains(w.ownerDocument,w)||w.getRootNode(Pe)===w.ownerDocument});var oi=function(w,z){return"none"===(w=z||w).style.display||""===w.style.display&&ne(w)&&"none"===q.css(w,"display")},Ci=function(w,z,V,Z){var dt,bt,At={};for(bt in z)At[bt]=w.style[bt],w.style[bt]=z[bt];for(bt in dt=V.apply(w,Z||[]),z)w.style[bt]=At[bt];return dt};function ar(w,z,V,Z){var dt,bt,At=20,Xt=Z?function(){return Z.cur()}:function(){return q.css(w,z,"")},ie=Xt(),ge=V&&V[3]||(q.cssNumber[z]?"":"px"),Xe=w.nodeType&&(q.cssNumber[z]||"px"!==ge&&+ie)&&re.exec(q.css(w,z));if(Xe&&Xe[3]!==ge){for(ge=ge||Xe[3],Xe=+(ie/=2)||1;At--;)q.style(w,z,Xe+ge),(1-bt)*(1-(bt=Xt()/ie||.5))<=0&&(At=0),Xe/=bt;q.style(w,z,(Xe*=2)+ge),V=V||[]}return V&&(Xe=+Xe||+ie||0,dt=V[1]?Xe+(V[1]+1)*V[2]:+V[2],Z&&(Z.unit=ge,Z.start=Xe,Z.end=dt)),dt}var tr={};function Qr(w,z){for(var V,Z,dt,bt,At,Xt,ie,ge=[],Xe=0,pi=w.length;Xe<pi;Xe++)(Z=w[Xe]).style&&(V=Z.style.display,z?("none"===V&&(ge[Xe]=Le.get(Z,"display")||null,ge[Xe]||(Z.style.display="")),""===Z.style.display&&oi(Z)&&(ge[Xe]=(ie=At=bt=void 0,At=(dt=Z).ownerDocument,(ie=tr[Xt=dt.nodeName])||(bt=At.body.appendChild(At.createElement(Xt)),ie=q.css(bt,"display"),bt.parentNode.removeChild(bt),"none"===ie&&(ie="block"),tr[Xt]=ie)))):"none"!==V&&(ge[Xe]="none",Le.set(Z,"display",V)));for(Xe=0;Xe<pi;Xe++)null!=ge[Xe]&&(w[Xe].style.display=ge[Xe]);return w}q.fn.extend({show:function(){return Qr(this,!0)},hide:function(){return Qr(this)},toggle:function(w){return"boolean"==typeof w?w?this.show():this.hide():this.each(function(){oi(this)?q(this).show():q(this).hide()})}});var vn=/^(?:checkbox|radio)$/i,Xr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,dn=/^$|^module$|\/(?:java|ecma)script/i,xt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function pt(w,z){var V;return V=void 0!==w.getElementsByTagName?w.getElementsByTagName(z||"*"):void 0!==w.querySelectorAll?w.querySelectorAll(z||"*"):[],void 0===z||z&&ht(w,z)?q.merge([w],V):V}function Wt(w,z){for(var V=0,Z=w.length;V<Z;V++)Le.set(w[V],"globalEval",!z||Le.get(z[V],"globalEval"))}xt.optgroup=xt.option,xt.tbody=xt.tfoot=xt.colgroup=xt.caption=xt.thead,xt.th=xt.td;var ue,We,ri=/<|&#?\w+;/;function Ne(w,z,V,Z,dt){for(var bt,At,Xt,ie,ge,Xe,pi=z.createDocumentFragment(),je=[],Ge=0,Ki=w.length;Ge<Ki;Ge++)if((bt=w[Ge])||0===bt)if("object"===Ye(bt))q.merge(je,bt.nodeType?[bt]:bt);else if(ri.test(bt)){for(At=At||pi.appendChild(z.createElement("div")),Xt=(Xr.exec(bt)||["",""])[1].toLowerCase(),At.innerHTML=(ie=xt[Xt]||xt._default)[1]+q.htmlPrefilter(bt)+ie[2],Xe=ie[0];Xe--;)At=At.lastChild;q.merge(je,At.childNodes),(At=pi.firstChild).textContent=""}else je.push(z.createTextNode(bt));for(pi.textContent="",Ge=0;bt=je[Ge++];)if(Z&&-1<q.inArray(bt,Z))dt&&dt.push(bt);else if(ge=ne(bt),At=pt(pi.appendChild(bt),"script"),ge&&Wt(At),V)for(Xe=0;bt=At[Xe++];)dn.test(bt.type||"")&&V.push(bt);return pi}ue=A.createDocumentFragment().appendChild(A.createElement("div")),(We=A.createElement("input")).setAttribute("type","radio"),We.setAttribute("checked","checked"),We.setAttribute("name","t"),ue.appendChild(We),vt.checkClone=ue.cloneNode(!0).cloneNode(!0).lastChild.checked,ue.innerHTML="<textarea>x</textarea>",vt.noCloneChecked=!!ue.cloneNode(!0).lastChild.defaultValue;var zi=/^key/,Fi=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ni=/^([^.]*)(?:\.(.+)|)/;function Ii(){return!0}function wi(){return!1}function Li(w,z){return w===function(){try{return A.activeElement}catch(V){}}()==("focus"===z)}function cr(w,z,V,Z,dt,bt){var At,Xt;if("object"==typeof z){for(Xt in"string"!=typeof V&&(Z=Z||V,V=void 0),z)cr(w,Xt,V,Z,z[Xt],bt);return w}if(null==Z&&null==dt?(dt=V,Z=V=void 0):null==dt&&("string"==typeof V?(dt=Z,Z=void 0):(dt=Z,Z=V,V=void 0)),!1===dt)dt=wi;else if(!dt)return w;return 1===bt&&(At=dt,(dt=function(ie){return q().off(ie),At.apply(this,arguments)}).guid=At.guid||(At.guid=q.guid++)),w.each(function(){q.event.add(this,z,dt,Z,V)})}function Or(w,z,V){V?(Le.set(w,z,!1),q.event.add(w,z,{namespace:!1,handler:function(Z){var dt,bt,At=Le.get(this,z);if(1&Z.isTrigger&&this[z]){if(At.length)(q.event.special[z]||{}).delegateType&&Z.stopPropagation();else if(At=P.call(arguments),Le.set(this,z,At),dt=V(this,z),this[z](),At!==(bt=Le.get(this,z))||dt?Le.set(this,z,!1):bt={},At!==bt)return Z.stopImmediatePropagation(),Z.preventDefault(),bt.value}else At.length&&(Le.set(this,z,{value:q.event.trigger(q.extend(At[0],q.Event.prototype),At.slice(1),this)}),Z.stopImmediatePropagation())}})):void 0===Le.get(w,z)&&q.event.add(w,z,Ii)}q.event={global:{},add:function(w,z,V,Z,dt){var bt,At,Xt,ie,ge,Xe,pi,je,Ge,Ki,xr,Yi=Le.get(w);if(Yi)for(V.handler&&(V=(bt=V).handler,dt=bt.selector),dt&&q.find.matchesSelector(Kt,dt),V.guid||(V.guid=q.guid++),(ie=Yi.events)||(ie=Yi.events={}),(At=Yi.handle)||(At=Yi.handle=function(ro){return void 0!==q&&q.event.triggered!==ro.type?q.event.dispatch.apply(w,arguments):void 0}),ge=(z=(z||"").match(Ie)||[""]).length;ge--;)Ge=xr=(Xt=Ni.exec(z[ge])||[])[1],Ki=(Xt[2]||"").split(".").sort(),Ge&&(pi=q.event.special[Ge]||{},pi=q.event.special[Ge=(dt?pi.delegateType:pi.bindType)||Ge]||{},Xe=q.extend({type:Ge,origType:xr,data:Z,handler:V,guid:V.guid,selector:dt,needsContext:dt&&q.expr.match.needsContext.test(dt),namespace:Ki.join(".")},bt),(je=ie[Ge])||((je=ie[Ge]=[]).delegateCount=0,pi.setup&&!1!==pi.setup.call(w,Z,Ki,At)||w.addEventListener&&w.addEventListener(Ge,At)),pi.add&&(pi.add.call(w,Xe),Xe.handler.guid||(Xe.handler.guid=V.guid)),dt?je.splice(je.delegateCount++,0,Xe):je.push(Xe),q.event.global[Ge]=!0)},remove:function(w,z,V,Z,dt){var bt,At,Xt,ie,ge,Xe,pi,je,Ge,Ki,xr,Yi=Le.hasData(w)&&Le.get(w);if(Yi&&(ie=Yi.events)){for(ge=(z=(z||"").match(Ie)||[""]).length;ge--;)if(Ge=xr=(Xt=Ni.exec(z[ge])||[])[1],Ki=(Xt[2]||"").split(".").sort(),Ge){for(pi=q.event.special[Ge]||{},je=ie[Ge=(Z?pi.delegateType:pi.bindType)||Ge]||[],Xt=Xt[2]&&new RegExp("(^|\\.)"+Ki.join("\\.(?:.*\\.|)")+"(\\.|$)"),At=bt=je.length;bt--;)Xe=je[bt],!dt&&xr!==Xe.origType||V&&V.guid!==Xe.guid||Xt&&!Xt.test(Xe.namespace)||Z&&Z!==Xe.selector&&("**"!==Z||!Xe.selector)||(je.splice(bt,1),Xe.selector&&je.delegateCount--,pi.remove&&pi.remove.call(w,Xe));At&&!je.length&&(pi.teardown&&!1!==pi.teardown.call(w,Ki,Yi.handle)||q.removeEvent(w,Ge,Yi.handle),delete ie[Ge])}else for(Ge in ie)q.event.remove(w,Ge+z[ge],V,Z,!0);q.isEmptyObject(ie)&&Le.remove(w,"handle events")}},dispatch:function(w){var z,V,Z,dt,bt,At,Xt=q.event.fix(w),ie=new Array(arguments.length),ge=(Le.get(this,"events")||{})[Xt.type]||[],Xe=q.event.special[Xt.type]||{};for(ie[0]=Xt,z=1;z<arguments.length;z++)ie[z]=arguments[z];if(Xt.delegateTarget=this,!Xe.preDispatch||!1!==Xe.preDispatch.call(this,Xt)){for(At=q.event.handlers.call(this,Xt,ge),z=0;(dt=At[z++])&&!Xt.isPropagationStopped();)for(Xt.currentTarget=dt.elem,V=0;(bt=dt.handlers[V++])&&!Xt.isImmediatePropagationStopped();)Xt.rnamespace&&!1!==bt.namespace&&!Xt.rnamespace.test(bt.namespace)||(Xt.handleObj=bt,Xt.data=bt.data,void 0!==(Z=((q.event.special[bt.origType]||{}).handle||bt.handler).apply(dt.elem,ie))&&!1===(Xt.result=Z)&&(Xt.preventDefault(),Xt.stopPropagation()));return Xe.postDispatch&&Xe.postDispatch.call(this,Xt),Xt.result}},handlers:function(w,z){var V,Z,dt,bt,At,Xt=[],ie=z.delegateCount,ge=w.target;if(ie&&ge.nodeType&&!("click"===w.type&&1<=w.button))for(;ge!==this;ge=ge.parentNode||this)if(1===ge.nodeType&&("click"!==w.type||!0!==ge.disabled)){for(bt=[],At={},V=0;V<ie;V++)void 0===At[dt=(Z=z[V]).selector+" "]&&(At[dt]=Z.needsContext?-1<q(dt,this).index(ge):q.find(dt,this,null,[ge]).length),At[dt]&&bt.push(Z);bt.length&&Xt.push({elem:ge,handlers:bt})}return ge=this,ie<z.length&&Xt.push({elem:ge,handlers:z.slice(ie)}),Xt},addProp:function(w,z){Object.defineProperty(q.Event.prototype,w,{enumerable:!0,configurable:!0,get:lt(z)?function(){if(this.originalEvent)return z(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[w]},set:function(V){Object.defineProperty(this,w,{enumerable:!0,configurable:!0,writable:!0,value:V})}})},fix:function(w){return w[q.expando]?w:new q.Event(w)},special:{load:{noBubble:!0},click:{setup:function(w){var z=this||w;return vn.test(z.type)&&z.click&&ht(z,"input")&&Or(z,"click",Ii),!1},trigger:function(w){var z=this||w;return vn.test(z.type)&&z.click&&ht(z,"input")&&Or(z,"click"),!0},_default:function(w){var z=w.target;return vn.test(z.type)&&z.click&&ht(z,"input")&&Le.get(z,"click")||ht(z,"a")}},beforeunload:{postDispatch:function(w){void 0!==w.result&&w.originalEvent&&(w.originalEvent.returnValue=w.result)}}}},q.removeEvent=function(w,z,V){w.removeEventListener&&w.removeEventListener(z,V)},q.Event=function(w,z){if(!(this instanceof q.Event))return new q.Event(w,z);w&&w.type?(this.originalEvent=w,this.type=w.type,this.isDefaultPrevented=w.defaultPrevented||void 0===w.defaultPrevented&&!1===w.returnValue?Ii:wi,this.target=w.target&&3===w.target.nodeType?w.target.parentNode:w.target,this.currentTarget=w.currentTarget,this.relatedTarget=w.relatedTarget):this.type=w,z&&q.extend(this,z),this.timeStamp=w&&w.timeStamp||Date.now(),this[q.expando]=!0},q.Event.prototype={constructor:q.Event,isDefaultPrevented:wi,isPropagationStopped:wi,isImmediatePropagationStopped:wi,isSimulated:!1,preventDefault:function(){var w=this.originalEvent;this.isDefaultPrevented=Ii,w&&!this.isSimulated&&w.preventDefault()},stopPropagation:function(){var w=this.originalEvent;this.isPropagationStopped=Ii,w&&!this.isSimulated&&w.stopPropagation()},stopImmediatePropagation:function(){var w=this.originalEvent;this.isImmediatePropagationStopped=Ii,w&&!this.isSimulated&&w.stopImmediatePropagation(),this.stopPropagation()}},q.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(w){var z=w.button;return null==w.which&&zi.test(w.type)?null!=w.charCode?w.charCode:w.keyCode:!w.which&&void 0!==z&&Fi.test(w.type)?1&z?1:2&z?3:4&z?2:0:w.which}},q.event.addProp),q.each({focus:"focusin",blur:"focusout"},function(w,z){q.event.special[w]={setup:function(){return Or(this,w,Li),!1},trigger:function(){return Or(this,w),!0},delegateType:z}}),q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(w,z){q.event.special[w]={delegateType:z,bindType:z,handle:function(V){var Z,dt=V.relatedTarget,bt=V.handleObj;return dt&&(dt===this||q.contains(this,dt))||(V.type=bt.origType,Z=bt.handler.apply(this,arguments),V.type=z),Z}}}),q.fn.extend({on:function(w,z,V,Z){return cr(this,w,z,V,Z)},one:function(w,z,V,Z){return cr(this,w,z,V,Z,1)},off:function(w,z,V){var Z,dt;if(w&&w.preventDefault&&w.handleObj)return Z=w.handleObj,q(w.delegateTarget).off(Z.namespace?Z.origType+"."+Z.namespace:Z.origType,Z.selector,Z.handler),this;if("object"==typeof w){for(dt in w)this.off(dt,z,w[dt]);return this}return!1!==z&&"function"!=typeof z||(V=z,z=void 0),!1===V&&(V=wi),this.each(function(){q.event.remove(this,w,V,z)})}});var Mi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qi=/<script|<style|<link/i,_r=/checked\s*(?:[^=]|=\s*.checked.)/i,ji=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Zr(w,z){return ht(w,"table")&&ht(11!==z.nodeType?z:z.firstChild,"tr")&&q(w).children("tbody")[0]||w}function ir(w){return w.type=(null!==w.getAttribute("type"))+"/"+w.type,w}function x(w){return"true/"===(w.type||"").slice(0,5)?w.type=w.type.slice(5):w.removeAttribute("type"),w}function E(w,z){var V,Z,dt,bt,At,Xt,ie,ge;if(1===z.nodeType){if(Le.hasData(w)&&(bt=Le.access(w),At=Le.set(z,bt),ge=bt.events))for(dt in delete At.handle,At.events={},ge)for(V=0,Z=ge[dt].length;V<Z;V++)q.event.add(z,dt,ge[dt][V]);st.hasData(w)&&(Xt=st.access(w),ie=q.extend({},Xt),st.set(z,ie))}}function D(w,z,V,Z){z=I.apply([],z);var dt,bt,At,Xt,ie,ge,Xe=0,pi=w.length,je=pi-1,Ge=z[0],Ki=lt(Ge);if(Ki||1<pi&&"string"==typeof Ge&&!vt.checkClone&&_r.test(Ge))return w.each(function(xr){var Yi=w.eq(xr);Ki&&(z[0]=Ge.call(this,xr,Yi.html())),D(Yi,z,V,Z)});if(pi&&(bt=(dt=Ne(z,w[0].ownerDocument,!1,w,Z)).firstChild,1===dt.childNodes.length&&(dt=bt),bt||Z)){for(Xt=(At=q.map(pt(dt,"script"),ir)).length;Xe<pi;Xe++)ie=dt,Xe!==je&&(ie=q.clone(ie,!0,!0),Xt&&q.merge(At,pt(ie,"script"))),V.call(w[Xe],ie,Xe);if(Xt)for(ge=At[At.length-1].ownerDocument,q.map(At,x),Xe=0;Xe<Xt;Xe++)dn.test((ie=At[Xe]).type||"")&&!Le.access(ie,"globalEval")&&q.contains(ge,ie)&&(ie.src&&"module"!==(ie.type||"").toLowerCase()?q._evalUrl&&!ie.noModule&&q._evalUrl(ie.src,{nonce:ie.nonce||ie.getAttribute("nonce")}):Ze(ie.textContent.replace(ji,""),ie,ge))}return w}function j(w,z,V){for(var Z,dt=z?q.filter(z,w):w,bt=0;null!=(Z=dt[bt]);bt++)V||1!==Z.nodeType||q.cleanData(pt(Z)),Z.parentNode&&(V&&ne(Z)&&Wt(pt(Z,"script")),Z.parentNode.removeChild(Z));return w}q.extend({htmlPrefilter:function(w){return w.replace(Mi,"<$1></$2>")},clone:function(w,z,V){var Z,dt,bt,At,Xt,ie,ge,Xe=w.cloneNode(!0),pi=ne(w);if(!(vt.noCloneChecked||1!==w.nodeType&&11!==w.nodeType||q.isXMLDoc(w)))for(At=pt(Xe),Z=0,dt=(bt=pt(w)).length;Z<dt;Z++)Xt=bt[Z],"input"===(ge=(ie=At[Z]).nodeName.toLowerCase())&&vn.test(Xt.type)?ie.checked=Xt.checked:"input"!==ge&&"textarea"!==ge||(ie.defaultValue=Xt.defaultValue);if(z)if(V)for(bt=bt||pt(w),At=At||pt(Xe),Z=0,dt=bt.length;Z<dt;Z++)E(bt[Z],At[Z]);else E(w,Xe);return 0<(At=pt(Xe,"script")).length&&Wt(At,!pi&&pt(w,"script")),Xe},cleanData:function(w){for(var z,V,Z,dt=q.event.special,bt=0;void 0!==(V=w[bt]);bt++)if(Ft(V)){if(z=V[Le.expando]){if(z.events)for(Z in z.events)dt[Z]?q.event.remove(V,Z):q.removeEvent(V,Z,z.handle);V[Le.expando]=void 0}V[st.expando]&&(V[st.expando]=void 0)}}}),q.fn.extend({detach:function(w){return j(this,w,!0)},remove:function(w){return j(this,w)},text:function(w){return Tr(this,function(z){return void 0===z?q.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=z)})},null,w,arguments.length)},append:function(){return D(this,arguments,function(w){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Zr(this,w).appendChild(w)})},prepend:function(){return D(this,arguments,function(w){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var z=Zr(this,w);z.insertBefore(w,z.firstChild)}})},before:function(){return D(this,arguments,function(w){this.parentNode&&this.parentNode.insertBefore(w,this)})},after:function(){return D(this,arguments,function(w){this.parentNode&&this.parentNode.insertBefore(w,this.nextSibling)})},empty:function(){for(var w,z=0;null!=(w=this[z]);z++)1===w.nodeType&&(q.cleanData(pt(w,!1)),w.textContent="");return this},clone:function(w,z){return w=null!=w&&w,z=null==z?w:z,this.map(function(){return q.clone(this,w,z)})},html:function(w){return Tr(this,function(z){var V=this[0]||{},Z=0,dt=this.length;if(void 0===z&&1===V.nodeType)return V.innerHTML;if("string"==typeof z&&!qi.test(z)&&!xt[(Xr.exec(z)||["",""])[1].toLowerCase()]){z=q.htmlPrefilter(z);try{for(;Z<dt;Z++)1===(V=this[Z]||{}).nodeType&&(q.cleanData(pt(V,!1)),V.innerHTML=z);V=0}catch(bt){}}V&&this.empty().append(z)},null,w,arguments.length)},replaceWith:function(){var w=[];return D(this,arguments,function(z){var V=this.parentNode;q.inArray(this,w)<0&&(q.cleanData(pt(this)),V&&V.replaceChild(z,this))},w)}}),q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(w,z){q.fn[w]=function(V){for(var Z,dt=[],bt=q(V),At=bt.length-1,Xt=0;Xt<=At;Xt++)Z=Xt===At?this:this.clone(!0),q(bt[Xt])[z](Z),N.apply(dt,Z.get());return this.pushStack(dt)}});var K=new RegExp("^("+ii+")(?!px)[a-z%]+$","i"),ct=function(w){var z=w.ownerDocument.defaultView;return z&&z.opener||(z=F),z.getComputedStyle(w)},yt=new RegExp(Bt.join("|"),"i");function at(w,z,V){var Z,dt,bt,At,Xt=w.style;return(V=V||ct(w))&&(""!==(At=V.getPropertyValue(z)||V[z])||ne(w)||(At=q.style(w,z)),!vt.pixelBoxStyles()&&K.test(At)&&yt.test(z)&&(Z=Xt.width,dt=Xt.minWidth,bt=Xt.maxWidth,Xt.minWidth=Xt.maxWidth=Xt.width=At,At=V.width,Xt.width=Z,Xt.minWidth=dt,Xt.maxWidth=bt)),void 0!==At?At+"":At}function nt(w,z){return{get:function(){if(!w())return(this.get=z).apply(this,arguments);delete this.get}}}!function(){function w(){if(ie){Xt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ie.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Kt.appendChild(Xt).appendChild(ie);var ge=F.getComputedStyle(ie);V="1%"!==ge.top,At=12===z(ge.marginLeft),ie.style.right="60%",bt=36===z(ge.right),Z=36===z(ge.width),ie.style.position="absolute",dt=12===z(ie.offsetWidth/3),Kt.removeChild(Xt),ie=null}}function z(ge){return Math.round(parseFloat(ge))}var V,Z,dt,bt,At,Xt=A.createElement("div"),ie=A.createElement("div");ie.style&&(ie.style.backgroundClip="content-box",ie.cloneNode(!0).style.backgroundClip="",vt.clearCloneStyle="content-box"===ie.style.backgroundClip,q.extend(vt,{boxSizingReliable:function(){return w(),Z},pixelBoxStyles:function(){return w(),bt},pixelPosition:function(){return w(),V},reliableMarginLeft:function(){return w(),At},scrollboxSize:function(){return w(),dt}}))}();var tt=["Webkit","Moz","ms"],Ot=A.createElement("div").style,jt={};function Nt(w){return q.cssProps[w]||jt[w]||(w in Ot?w:jt[w]=function(V){for(var Z=V[0].toUpperCase()+V.slice(1),dt=tt.length;dt--;)if((V=tt[dt]+Z)in Ot)return V}(w)||w)}var fe=/^(none|table(?!-c[ea]).+)/,he=/^--/,qe={position:"absolute",visibility:"hidden",display:"block"},Be={letterSpacing:"0",fontWeight:"400"};function ze(w,z,V){var Z=re.exec(z);return Z?Math.max(0,Z[2]-(V||0))+(Z[3]||"px"):z}function ai(w,z,V,Z,dt,bt){var At="width"===z?1:0,Xt=0,ie=0;if(V===(Z?"border":"content"))return 0;for(;At<4;At+=2)"margin"===V&&(ie+=q.css(w,V+Bt[At],!0,dt)),Z?("content"===V&&(ie-=q.css(w,"padding"+Bt[At],!0,dt)),"margin"!==V&&(ie-=q.css(w,"border"+Bt[At]+"Width",!0,dt))):(ie+=q.css(w,"padding"+Bt[At],!0,dt),"padding"!==V?ie+=q.css(w,"border"+Bt[At]+"Width",!0,dt):Xt+=q.css(w,"border"+Bt[At]+"Width",!0,dt));return!Z&&0<=bt&&(ie+=Math.max(0,Math.ceil(w["offset"+z[0].toUpperCase()+z.slice(1)]-bt-ie-Xt-.5))||0),ie}function Qe(w,z,V){var Z=ct(w),dt=(!vt.boxSizingReliable()||V)&&"border-box"===q.css(w,"boxSizing",!1,Z),bt=dt,At=at(w,z,Z),Xt="offset"+z[0].toUpperCase()+z.slice(1);if(K.test(At)){if(!V)return At;At="auto"}return(!vt.boxSizingReliable()&&dt||"auto"===At||!parseFloat(At)&&"inline"===q.css(w,"display",!1,Z))&&w.getClientRects().length&&(dt="border-box"===q.css(w,"boxSizing",!1,Z),(bt=Xt in w)&&(At=w[Xt])),(At=parseFloat(At)||0)+ai(w,z,V||(dt?"border":"content"),bt,Z,At)+"px"}function di(w,z,V,Z,dt){return new di.prototype.init(w,z,V,Z,dt)}q.extend({cssHooks:{opacity:{get:function(w,z){if(z){var V=at(w,"opacity");return""===V?"1":V}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(w,z,V,Z){if(w&&3!==w.nodeType&&8!==w.nodeType&&w.style){var dt,bt,At,Xt=Dt(z),ie=he.test(z),ge=w.style;if(ie||(z=Nt(Xt)),At=q.cssHooks[z]||q.cssHooks[Xt],void 0===V)return At&&"get"in At&&void 0!==(dt=At.get(w,!1,Z))?dt:ge[z];"string"==(bt=typeof V)&&(dt=re.exec(V))&&dt[1]&&(V=ar(w,z,dt),bt="number"),null!=V&&V==V&&("number"!==bt||ie||(V+=dt&&dt[3]||(q.cssNumber[Xt]?"":"px")),vt.clearCloneStyle||""!==V||0!==z.indexOf("background")||(ge[z]="inherit"),At&&"set"in At&&void 0===(V=At.set(w,V,Z))||(ie?ge.setProperty(z,V):ge[z]=V))}},css:function(w,z,V,Z){var dt,bt,At,Xt=Dt(z);return he.test(z)||(z=Nt(Xt)),(At=q.cssHooks[z]||q.cssHooks[Xt])&&"get"in At&&(dt=At.get(w,!0,V)),void 0===dt&&(dt=at(w,z,Z)),"normal"===dt&&z in Be&&(dt=Be[z]),""===V||V?(bt=parseFloat(dt),!0===V||isFinite(bt)?bt||0:dt):dt}}),q.each(["height","width"],function(w,z){q.cssHooks[z]={get:function(V,Z,dt){if(Z)return!fe.test(q.css(V,"display"))||V.getClientRects().length&&V.getBoundingClientRect().width?Qe(V,z,dt):Ci(V,qe,function(){return Qe(V,z,dt)})},set:function(V,Z,dt){var bt,At=ct(V),Xt=!vt.scrollboxSize()&&"absolute"===At.position,ie=(Xt||dt)&&"border-box"===q.css(V,"boxSizing",!1,At),ge=dt?ai(V,z,dt,ie,At):0;return ie&&Xt&&(ge-=Math.ceil(V["offset"+z[0].toUpperCase()+z.slice(1)]-parseFloat(At[z])-ai(V,z,"border",!1,At)-.5)),ge&&(bt=re.exec(Z))&&"px"!==(bt[3]||"px")&&(V.style[z]=Z,Z=q.css(V,z)),ze(0,Z,ge)}}}),q.cssHooks.marginLeft=nt(vt.reliableMarginLeft,function(w,z){if(z)return(parseFloat(at(w,"marginLeft"))||w.getBoundingClientRect().left-Ci(w,{marginLeft:0},function(){return w.getBoundingClientRect().left}))+"px"}),q.each({margin:"",padding:"",border:"Width"},function(w,z){q.cssHooks[w+z]={expand:function(V){for(var Z=0,dt={},bt="string"==typeof V?V.split(" "):[V];Z<4;Z++)dt[w+Bt[Z]+z]=bt[Z]||bt[Z-2]||bt[0];return dt}},"margin"!==w&&(q.cssHooks[w+z].set=ze)}),q.fn.extend({css:function(w,z){return Tr(this,function(V,Z,dt){var bt,At,Xt={},ie=0;if(Array.isArray(Z)){for(bt=ct(V),At=Z.length;ie<At;ie++)Xt[Z[ie]]=q.css(V,Z[ie],!1,bt);return Xt}return void 0!==dt?q.style(V,Z,dt):q.css(V,Z)},w,z,1<arguments.length)}}),((q.Tween=di).prototype={constructor:di,init:function(w,z,V,Z,dt,bt){this.elem=w,this.prop=V,this.easing=dt||q.easing._default,this.options=z,this.start=this.now=this.cur(),this.end=Z,this.unit=bt||(q.cssNumber[V]?"":"px")},cur:function(){var w=di.propHooks[this.prop];return w&&w.get?w.get(this):di.propHooks._default.get(this)},run:function(w){var z,V=di.propHooks[this.prop];return this.pos=z=this.options.duration?q.easing[this.easing](w,this.options.duration*w,0,1,this.options.duration):w,this.now=(this.end-this.start)*z+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),V&&V.set?V.set(this):di.propHooks._default.set(this),this}}).init.prototype=di.prototype,(di.propHooks={_default:{get:function(w){var z;return 1!==w.elem.nodeType||null!=w.elem[w.prop]&&null==w.elem.style[w.prop]?w.elem[w.prop]:(z=q.css(w.elem,w.prop,""))&&"auto"!==z?z:0},set:function(w){q.fx.step[w.prop]?q.fx.step[w.prop](w):1!==w.elem.nodeType||!q.cssHooks[w.prop]&&null==w.elem.style[Nt(w.prop)]?w.elem[w.prop]=w.now:q.style(w.elem,w.prop,w.now+w.unit)}}}).scrollTop=di.propHooks.scrollLeft={set:function(w){w.elem.nodeType&&w.elem.parentNode&&(w.elem[w.prop]=w.now)}},q.easing={linear:function(w){return w},swing:function(w){return.5-Math.cos(w*Math.PI)/2},_default:"swing"},q.fx=di.prototype.init,q.fx.step={};var Ei,Cr,Ue,Sr,tn=/^(?:toggle|show|hide)$/,mr=/queueHooks$/;function Rr(){Cr&&(!1===A.hidden&&F.requestAnimationFrame?F.requestAnimationFrame(Rr):F.setTimeout(Rr,q.fx.interval),q.fx.tick())}function In(){return F.setTimeout(function(){Ei=void 0}),Ei=Date.now()}function Xi(w,z){var V,Z=0,dt={height:w};for(z=z?1:0;Z<4;Z+=2-z)dt["margin"+(V=Bt[Z])]=dt["padding"+V]=w;return z&&(dt.opacity=dt.width=w),dt}function vr(w,z,V){for(var Z,dt=(Hi.tweeners[z]||[]).concat(Hi.tweeners["*"]),bt=0,At=dt.length;bt<At;bt++)if(Z=dt[bt].call(V,z,w))return Z}function Hi(w,z,V){var Z,dt,bt=0,At=Hi.prefilters.length,Xt=q.Deferred().always(function(){delete ie.elem}),ie=function(){if(dt)return!1;for(var pi=Ei||In(),je=Math.max(0,ge.startTime+ge.duration-pi),Ge=1-(je/ge.duration||0),Ki=0,xr=ge.tweens.length;Ki<xr;Ki++)ge.tweens[Ki].run(Ge);return Xt.notifyWith(w,[ge,Ge,je]),Ge<1&&xr?je:(xr||Xt.notifyWith(w,[ge,1,0]),Xt.resolveWith(w,[ge]),!1)},ge=Xt.promise({elem:w,props:q.extend({},z),opts:q.extend(!0,{specialEasing:{},easing:q.easing._default},V),originalProperties:z,originalOptions:V,startTime:Ei||In(),duration:V.duration,tweens:[],createTween:function(pi,je){var Ge=q.Tween(w,ge.opts,pi,je,ge.opts.specialEasing[pi]||ge.opts.easing);return ge.tweens.push(Ge),Ge},stop:function(pi){var je=0,Ge=pi?ge.tweens.length:0;if(dt)return this;for(dt=!0;je<Ge;je++)ge.tweens[je].run(1);return pi?(Xt.notifyWith(w,[ge,1,0]),Xt.resolveWith(w,[ge,pi])):Xt.rejectWith(w,[ge,pi]),this}}),Xe=ge.props;for(function(pi,je){var Ge,Ki,xr,Yi,ro;for(Ge in pi)if(xr=je[Ki=Dt(Ge)],Yi=pi[Ge],Array.isArray(Yi)&&(xr=Yi[1],Yi=pi[Ge]=Yi[0]),Ge!==Ki&&(pi[Ki]=Yi,delete pi[Ge]),(ro=q.cssHooks[Ki])&&"expand"in ro)for(Ge in Yi=ro.expand(Yi),delete pi[Ki],Yi)Ge in pi||(pi[Ge]=Yi[Ge],je[Ge]=xr);else je[Ki]=xr}(Xe,ge.opts.specialEasing);bt<At;bt++)if(Z=Hi.prefilters[bt].call(ge,w,Xe,ge.opts))return lt(Z.stop)&&(q._queueHooks(ge.elem,ge.opts.queue).stop=Z.stop.bind(Z)),Z;return q.map(Xe,vr,ge),lt(ge.opts.start)&&ge.opts.start.call(w,ge),ge.progress(ge.opts.progress).done(ge.opts.done,ge.opts.complete).fail(ge.opts.fail).always(ge.opts.always),q.fx.timer(q.extend(ie,{elem:w,anim:ge,queue:ge.opts.queue})),ge}q.Animation=q.extend(Hi,{tweeners:{"*":[function(w,z){var V=this.createTween(w,z);return ar(V.elem,w,re.exec(z),V),V}]},tweener:function(w,z){lt(w)?(z=w,w=["*"]):w=w.match(Ie);for(var V,Z=0,dt=w.length;Z<dt;Z++)(Hi.tweeners[V=w[Z]]=Hi.tweeners[V]||[]).unshift(z)},prefilters:[function(w,z,V){var Z,dt,bt,At,Xt,ie,ge,Xe,pi="width"in z||"height"in z,je=this,Ge={},Ki=w.style,xr=w.nodeType&&oi(w),Yi=Le.get(w,"fxshow");for(Z in V.queue||(null==(At=q._queueHooks(w,"fx")).unqueued&&(At.unqueued=0,Xt=At.empty.fire,At.empty.fire=function(){At.unqueued||Xt()}),At.unqueued++,je.always(function(){je.always(function(){At.unqueued--,q.queue(w,"fx").length||At.empty.fire()})})),z)if(tn.test(dt=z[Z])){if(delete z[Z],bt=bt||"toggle"===dt,dt===(xr?"hide":"show")){if("show"!==dt||!Yi||void 0===Yi[Z])continue;xr=!0}Ge[Z]=Yi&&Yi[Z]||q.style(w,Z)}if((ie=!q.isEmptyObject(z))||!q.isEmptyObject(Ge))for(Z in pi&&1===w.nodeType&&(V.overflow=[Ki.overflow,Ki.overflowX,Ki.overflowY],null==(ge=Yi&&Yi.display)&&(ge=Le.get(w,"display")),"none"===(Xe=q.css(w,"display"))&&(ge?Xe=ge:(Qr([w],!0),ge=w.style.display||ge,Xe=q.css(w,"display"),Qr([w]))),("inline"===Xe||"inline-block"===Xe&&null!=ge)&&"none"===q.css(w,"float")&&(ie||(je.done(function(){Ki.display=ge}),null==ge&&(ge="none"===(Xe=Ki.display)?"":Xe)),Ki.display="inline-block")),V.overflow&&(Ki.overflow="hidden",je.always(function(){Ki.overflow=V.overflow[0],Ki.overflowX=V.overflow[1],Ki.overflowY=V.overflow[2]})),ie=!1,Ge)ie||(Yi?"hidden"in Yi&&(xr=Yi.hidden):Yi=Le.access(w,"fxshow",{display:ge}),bt&&(Yi.hidden=!xr),xr&&Qr([w],!0),je.done(function(){for(Z in xr||Qr([w]),Le.remove(w,"fxshow"),Ge)q.style(w,Z,Ge[Z])})),ie=vr(xr?Yi[Z]:0,Z,je),Z in Yi||(Yi[Z]=ie.start,xr&&(ie.end=ie.start,ie.start=0))}],prefilter:function(w,z){z?Hi.prefilters.unshift(w):Hi.prefilters.push(w)}}),q.speed=function(w,z,V){var Z=w&&"object"==typeof w?q.extend({},w):{complete:V||!V&&z||lt(w)&&w,duration:w,easing:V&&z||z&&!lt(z)&&z};return q.fx.off?Z.duration=0:"number"!=typeof Z.duration&&(Z.duration=Z.duration in q.fx.speeds?q.fx.speeds[Z.duration]:q.fx.speeds._default),null!=Z.queue&&!0!==Z.queue||(Z.queue="fx"),Z.old=Z.complete,Z.complete=function(){lt(Z.old)&&Z.old.call(this),Z.queue&&q.dequeue(this,Z.queue)},Z},q.fn.extend({fadeTo:function(w,z,V,Z){return this.filter(oi).css("opacity",0).show().end().animate({opacity:z},w,V,Z)},animate:function(w,z,V,Z){var dt=q.isEmptyObject(w),bt=q.speed(z,V,Z),At=function(){var Xt=Hi(this,q.extend({},w),bt);(dt||Le.get(this,"finish"))&&Xt.stop(!0)};return At.finish=At,dt||!1===bt.queue?this.each(At):this.queue(bt.queue,At)},stop:function(w,z,V){var Z=function(dt){var bt=dt.stop;delete dt.stop,bt(V)};return"string"!=typeof w&&(V=z,z=w,w=void 0),z&&!1!==w&&this.queue(w||"fx",[]),this.each(function(){var dt=!0,bt=null!=w&&w+"queueHooks",At=q.timers,Xt=Le.get(this);if(bt)Xt[bt]&&Xt[bt].stop&&Z(Xt[bt]);else for(bt in Xt)Xt[bt]&&Xt[bt].stop&&mr.test(bt)&&Z(Xt[bt]);for(bt=At.length;bt--;)At[bt].elem!==this||null!=w&&At[bt].queue!==w||(At[bt].anim.stop(V),dt=!1,At.splice(bt,1));!dt&&V||q.dequeue(this,w)})},finish:function(w){return!1!==w&&(w=w||"fx"),this.each(function(){var z,V=Le.get(this),Z=V[w+"queue"],dt=V[w+"queueHooks"],bt=q.timers,At=Z?Z.length:0;for(V.finish=!0,q.queue(this,w,[]),dt&&dt.stop&&dt.stop.call(this,!0),z=bt.length;z--;)bt[z].elem===this&&bt[z].queue===w&&(bt[z].anim.stop(!0),bt.splice(z,1));for(z=0;z<At;z++)Z[z]&&Z[z].finish&&Z[z].finish.call(this);delete V.finish})}}),q.each(["toggle","show","hide"],function(w,z){var V=q.fn[z];q.fn[z]=function(Z,dt,bt){return null==Z||"boolean"==typeof Z?V.apply(this,arguments):this.animate(Xi(z,!0),Z,dt,bt)}}),q.each({slideDown:Xi("show"),slideUp:Xi("hide"),slideToggle:Xi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(w,z){q.fn[w]=function(V,Z,dt){return this.animate(z,V,Z,dt)}}),q.timers=[],q.fx.tick=function(){var w,z=0,V=q.timers;for(Ei=Date.now();z<V.length;z++)(w=V[z])()||V[z]!==w||V.splice(z--,1);V.length||q.fx.stop(),Ei=void 0},q.fx.timer=function(w){q.timers.push(w),q.fx.start()},q.fx.interval=13,q.fx.start=function(){Cr||(Cr=!0,Rr())},q.fx.stop=function(){Cr=null},q.fx.speeds={slow:600,fast:200,_default:400},q.fn.delay=function(w,z){return w=q.fx&&q.fx.speeds[w]||w,this.queue(z=z||"fx",function(V,Z){var dt=F.setTimeout(V,w);Z.stop=function(){F.clearTimeout(dt)}})},Ue=A.createElement("input"),Sr=A.createElement("select").appendChild(A.createElement("option")),Ue.type="checkbox",vt.checkOn=""!==Ue.value,vt.optSelected=Sr.selected,(Ue=A.createElement("input")).value="t",Ue.type="radio",vt.radioValue="t"===Ue.value;var on,Ar=q.expr.attrHandle;q.fn.extend({attr:function(w,z){return Tr(this,q.attr,w,z,1<arguments.length)},removeAttr:function(w){return this.each(function(){q.removeAttr(this,w)})}}),q.extend({attr:function(w,z,V){var Z,dt,bt=w.nodeType;if(3!==bt&&8!==bt&&2!==bt)return void 0===w.getAttribute?q.prop(w,z,V):(1===bt&&q.isXMLDoc(w)||(dt=q.attrHooks[z.toLowerCase()]||(q.expr.match.bool.test(z)?on:void 0)),void 0!==V?null===V?void q.removeAttr(w,z):dt&&"set"in dt&&void 0!==(Z=dt.set(w,V,z))?Z:(w.setAttribute(z,V+""),V):dt&&"get"in dt&&null!==(Z=dt.get(w,z))?Z:null==(Z=q.find.attr(w,z))?void 0:Z)},attrHooks:{type:{set:function(w,z){if(!vt.radioValue&&"radio"===z&&ht(w,"input")){var V=w.value;return w.setAttribute("type",z),V&&(w.value=V),z}}}},removeAttr:function(w,z){var V,Z=0,dt=z&&z.match(Ie);if(dt&&1===w.nodeType)for(;V=dt[Z++];)w.removeAttribute(V)}}),on={set:function(w,z,V){return!1===z?q.removeAttr(w,V):w.setAttribute(V,V),V}},q.each(q.expr.match.bool.source.match(/\w+/g),function(w,z){var V=Ar[z]||q.find.attr;Ar[z]=function(Z,dt,bt){var At,Xt,ie=dt.toLowerCase();return bt||(Xt=Ar[ie],Ar[ie]=At,At=null!=V(Z,dt,bt)?ie:null,Ar[ie]=Xt),At}});var an=/^(?:input|select|textarea|button)$/i,qn=/^(?:a|area)$/i;function Zn(w){return(w.match(Ie)||[]).join(" ")}function ns(w){return w.getAttribute&&w.getAttribute("class")||""}function Wn(w){return Array.isArray(w)?w:"string"==typeof w&&w.match(Ie)||[]}q.fn.extend({prop:function(w,z){return Tr(this,q.prop,w,z,1<arguments.length)},removeProp:function(w){return this.each(function(){delete this[q.propFix[w]||w]})}}),q.extend({prop:function(w,z,V){var Z,dt,bt=w.nodeType;if(3!==bt&&8!==bt&&2!==bt)return 1===bt&&q.isXMLDoc(w)||(dt=q.propHooks[z=q.propFix[z]||z]),void 0!==V?dt&&"set"in dt&&void 0!==(Z=dt.set(w,V,z))?Z:w[z]=V:dt&&"get"in dt&&null!==(Z=dt.get(w,z))?Z:w[z]},propHooks:{tabIndex:{get:function(w){var z=q.find.attr(w,"tabindex");return z?parseInt(z,10):an.test(w.nodeName)||qn.test(w.nodeName)&&w.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),vt.optSelected||(q.propHooks.selected={get:function(w){return null},set:function(w){}}),q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){q.propFix[this.toLowerCase()]=this}),q.fn.extend({addClass:function(w){var z,V,Z,dt,bt,At,Xt,ie=0;if(lt(w))return this.each(function(ge){q(this).addClass(w.call(this,ge,ns(this)))});if((z=Wn(w)).length)for(;V=this[ie++];)if(dt=ns(V),Z=1===V.nodeType&&" "+Zn(dt)+" "){for(At=0;bt=z[At++];)Z.indexOf(" "+bt+" ")<0&&(Z+=bt+" ");dt!==(Xt=Zn(Z))&&V.setAttribute("class",Xt)}return this},removeClass:function(w){var z,V,Z,dt,bt,At,Xt,ie=0;if(lt(w))return this.each(function(ge){q(this).removeClass(w.call(this,ge,ns(this)))});if(!arguments.length)return this.attr("class","");if((z=Wn(w)).length)for(;V=this[ie++];)if(dt=ns(V),Z=1===V.nodeType&&" "+Zn(dt)+" "){for(At=0;bt=z[At++];)for(;-1<Z.indexOf(" "+bt+" ");)Z=Z.replace(" "+bt+" "," ");dt!==(Xt=Zn(Z))&&V.setAttribute("class",Xt)}return this},toggleClass:function(w,z){var V=typeof w,Z="string"===V||Array.isArray(w);return"boolean"==typeof z&&Z?z?this.addClass(w):this.removeClass(w):lt(w)?this.each(function(dt){q(this).toggleClass(w.call(this,dt,ns(this),z),z)}):this.each(function(){var dt,bt,At,Xt;if(Z)for(bt=0,At=q(this),Xt=Wn(w);dt=Xt[bt++];)At.hasClass(dt)?At.removeClass(dt):At.addClass(dt);else void 0!==w&&"boolean"!==V||((dt=ns(this))&&Le.set(this,"__className__",dt),this.setAttribute&&this.setAttribute("class",dt||!1===w?"":Le.get(this,"__className__")||""))})},hasClass:function(w){var z,V,Z=0;for(z=" "+w+" ";V=this[Z++];)if(1===V.nodeType&&-1<(" "+Zn(ns(V))+" ").indexOf(z))return!0;return!1}});var Ls=/\r/g;q.fn.extend({val:function(w){var z,V,Z,dt=this[0];return arguments.length?(Z=lt(w),this.each(function(bt){var At;1===this.nodeType&&(null==(At=Z?w.call(this,bt,q(this).val()):w)?At="":"number"==typeof At?At+="":Array.isArray(At)&&(At=q.map(At,function(Xt){return null==Xt?"":Xt+""})),(z=q.valHooks[this.type]||q.valHooks[this.nodeName.toLowerCase()])&&"set"in z&&void 0!==z.set(this,At,"value")||(this.value=At))})):dt?(z=q.valHooks[dt.type]||q.valHooks[dt.nodeName.toLowerCase()])&&"get"in z&&void 0!==(V=z.get(dt,"value"))?V:"string"==typeof(V=dt.value)?V.replace(Ls,""):null==V?"":V:void 0}}),q.extend({valHooks:{option:{get:function(w){var z=q.find.attr(w,"value");return null!=z?z:Zn(q.text(w))}},select:{get:function(w){var z,V,Z,dt=w.options,bt=w.selectedIndex,At="select-one"===w.type,Xt=At?null:[],ie=At?bt+1:dt.length;for(Z=bt<0?ie:At?bt:0;Z<ie;Z++)if(((V=dt[Z]).selected||Z===bt)&&!V.disabled&&(!V.parentNode.disabled||!ht(V.parentNode,"optgroup"))){if(z=q(V).val(),At)return z;Xt.push(z)}return Xt},set:function(w,z){for(var V,Z,dt=w.options,bt=q.makeArray(z),At=dt.length;At--;)((Z=dt[At]).selected=-1<q.inArray(q.valHooks.option.get(Z),bt))&&(V=!0);return V||(w.selectedIndex=-1),bt}}}}),q.each(["radio","checkbox"],function(){q.valHooks[this]={set:function(w,z){if(Array.isArray(z))return w.checked=-1<q.inArray(q(w).val(),z)}},vt.checkOn||(q.valHooks[this].get=function(w){return null===w.getAttribute("value")?"on":w.value})}),vt.focusin="onfocusin"in F;var qo=/^(?:focusinfocus|focusoutblur)$/,pr=function(w){w.stopPropagation()};q.extend(q.event,{trigger:function(w,z,V,Z){var dt,bt,At,Xt,ie,ge,Xe,pi,je=[V||A],Ge=Mt.call(w,"type")?w.type:w,Ki=Mt.call(w,"namespace")?w.namespace.split("."):[];if(bt=pi=At=V=V||A,3!==V.nodeType&&8!==V.nodeType&&!qo.test(Ge+q.event.triggered)&&(-1<Ge.indexOf(".")&&(Ge=(Ki=Ge.split(".")).shift(),Ki.sort()),ie=Ge.indexOf(":")<0&&"on"+Ge,(w=w[q.expando]?w:new q.Event(Ge,"object"==typeof w&&w)).isTrigger=Z?2:3,w.namespace=Ki.join("."),w.rnamespace=w.namespace?new RegExp("(^|\\.)"+Ki.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,w.result=void 0,w.target||(w.target=V),z=null==z?[w]:q.makeArray(z,[w]),Xe=q.event.special[Ge]||{},Z||!Xe.trigger||!1!==Xe.trigger.apply(V,z))){if(!Z&&!Xe.noBubble&&!Vt(V)){for(qo.test((Xt=Xe.delegateType||Ge)+Ge)||(bt=bt.parentNode);bt;bt=bt.parentNode)je.push(bt),At=bt;At===(V.ownerDocument||A)&&je.push(At.defaultView||At.parentWindow||F)}for(dt=0;(bt=je[dt++])&&!w.isPropagationStopped();)pi=bt,w.type=1<dt?Xt:Xe.bindType||Ge,(ge=(Le.get(bt,"events")||{})[w.type]&&Le.get(bt,"handle"))&&ge.apply(bt,z),(ge=ie&&bt[ie])&&ge.apply&&Ft(bt)&&(w.result=ge.apply(bt,z),!1===w.result&&w.preventDefault());return w.type=Ge,Z||w.isDefaultPrevented()||Xe._default&&!1!==Xe._default.apply(je.pop(),z)||!Ft(V)||ie&&lt(V[Ge])&&!Vt(V)&&((At=V[ie])&&(V[ie]=null),q.event.triggered=Ge,w.isPropagationStopped()&&pi.addEventListener(Ge,pr),V[Ge](),w.isPropagationStopped()&&pi.removeEventListener(Ge,pr),q.event.triggered=void 0,At&&(V[ie]=At)),w.result}},simulate:function(w,z,V){var Z=q.extend(new q.Event,V,{type:w,isSimulated:!0});q.event.trigger(Z,null,z)}}),q.fn.extend({trigger:function(w,z){return this.each(function(){q.event.trigger(w,z,this)})},triggerHandler:function(w,z){var V=this[0];if(V)return q.event.trigger(w,z,V,!0)}}),vt.focusin||q.each({focus:"focusin",blur:"focusout"},function(w,z){var V=function(Z){q.event.simulate(z,Z.target,q.event.fix(Z))};q.event.special[z]={setup:function(){var Z=this.ownerDocument||this,dt=Le.access(Z,z);dt||Z.addEventListener(w,V,!0),Le.access(Z,z,(dt||0)+1)},teardown:function(){var Z=this.ownerDocument||this,dt=Le.access(Z,z)-1;dt?Le.access(Z,z,dt):(Z.removeEventListener(w,V,!0),Le.remove(Z,z))}}});var xn=F.location,Ea=Date.now(),lo=/\?/;q.parseXML=function(w){var z;if(!w||"string"!=typeof w)return null;try{z=(new F.DOMParser).parseFromString(w,"text/xml")}catch(V){z=void 0}return z&&!z.getElementsByTagName("parsererror").length||q.error("Invalid XML: "+w),z};var os=/\[\]$/,Do=/\r?\n/g,Yo=/^(?:submit|button|image|reset|file)$/i,as=/^(?:input|select|textarea|keygen)/i;function Lo(w,z,V,Z){var dt;if(Array.isArray(z))q.each(z,function(bt,At){V||os.test(w)?Z(w,At):Lo(w+"["+("object"==typeof At&&null!=At?bt:"")+"]",At,V,Z)});else if(V||"object"!==Ye(z))Z(w,z);else for(dt in z)Lo(w+"["+dt+"]",z[dt],V,Z)}q.param=function(w,z){var V,Z=[],dt=function(bt,At){var Xt=lt(At)?At():At;Z[Z.length]=encodeURIComponent(bt)+"="+encodeURIComponent(null==Xt?"":Xt)};if(null==w)return"";if(Array.isArray(w)||w.jquery&&!q.isPlainObject(w))q.each(w,function(){dt(this.name,this.value)});else for(V in w)Lo(V,w[V],z,dt);return Z.join("&")},q.fn.extend({serialize:function(){return q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var w=q.prop(this,"elements");return w?q.makeArray(w):this}).filter(function(){var w=this.type;return this.name&&!q(this).is(":disabled")&&as.test(this.nodeName)&&!Yo.test(w)&&(this.checked||!vn.test(w))}).map(function(w,z){var V=q(this).val();return null==V?null:Array.isArray(V)?q.map(V,function(Z){return{name:z.name,value:Z.replace(Do,"\r\n")}}):{name:z.name,value:V.replace(Do,"\r\n")}}).get()}});var $r=/%20/g,ca=/#.*$/,Ba=/([?&])_=[^&]*/,Ca=/^(.*?):[ \t]*([^\r\n]*)$/gm,Os=/^(?:GET|HEAD)$/,Ia=/^\/\//,ko={},pa={},Qa="*/".concat("*"),ha=A.createElement("a");function Ms(w){return function(z,V){"string"!=typeof z&&(V=z,z="*");var Z,dt=0,bt=z.toLowerCase().match(Ie)||[];if(lt(V))for(;Z=bt[dt++];)"+"===Z[0]?(Z=Z.slice(1)||"*",(w[Z]=w[Z]||[]).unshift(V)):(w[Z]=w[Z]||[]).push(V)}}function gs(w,z,V,Z){var dt={},bt=w===pa;function At(Xt){var ie;return dt[Xt]=!0,q.each(w[Xt]||[],function(ge,Xe){var pi=Xe(z,V,Z);return"string"!=typeof pi||bt||dt[pi]?bt?!(ie=pi):void 0:(z.dataTypes.unshift(pi),At(pi),!1)}),ie}return At(z.dataTypes[0])||!dt["*"]&&At("*")}function ss(w,z){var V,Z,dt=q.ajaxSettings.flatOptions||{};for(V in z)void 0!==z[V]&&((dt[V]?w:Z||(Z={}))[V]=z[V]);return Z&&q.extend(!0,w,Z),w}ha.href=xn.href,q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qa,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(w,z){return z?ss(ss(w,q.ajaxSettings),z):ss(q.ajaxSettings,w)},ajaxPrefilter:Ms(ko),ajaxTransport:Ms(pa),ajax:function(w,z){"object"==typeof w&&(z=w,w=void 0);var V,Z,dt,bt,At,Xt,ie,ge,Xe,pi,je=q.ajaxSetup({},z=z||{}),Ge=je.context||je,Ki=je.context&&(Ge.nodeType||Ge.jquery)?q(Ge):q.event,xr=q.Deferred(),Yi=q.Callbacks("once memory"),ro=je.statusCode||{},En={},Gn={},sn="canceled",gi={readyState:0,getResponseHeader:function(Wr){var ln;if(ie){if(!bt)for(bt={};ln=Ca.exec(dt);)bt[ln[1].toLowerCase()+" "]=(bt[ln[1].toLowerCase()+" "]||[]).concat(ln[2]);ln=bt[Wr.toLowerCase()+" "]}return null==ln?null:ln.join(", ")},getAllResponseHeaders:function(){return ie?dt:null},setRequestHeader:function(Wr,ln){return null==ie&&(Wr=Gn[Wr.toLowerCase()]=Gn[Wr.toLowerCase()]||Wr,En[Wr]=ln),this},overrideMimeType:function(Wr){return null==ie&&(je.mimeType=Wr),this},statusCode:function(Wr){var ln;if(Wr)if(ie)gi.always(Wr[gi.status]);else for(ln in Wr)ro[ln]=[ro[ln],Wr[ln]];return this},abort:function(Wr){var ln=Wr||sn;return V&&V.abort(ln),Ho(0,ln),this}};if(xr.promise(gi),je.url=((w||je.url||xn.href)+"").replace(Ia,xn.protocol+"//"),je.type=z.method||z.type||je.method||je.type,je.dataTypes=(je.dataType||"*").toLowerCase().match(Ie)||[""],null==je.crossDomain){Xt=A.createElement("a");try{Xt.href=je.url,Xt.href=Xt.href,je.crossDomain=ha.protocol+"//"+ha.host!=Xt.protocol+"//"+Xt.host}catch(Wr){je.crossDomain=!0}}if(je.data&&je.processData&&"string"!=typeof je.data&&(je.data=q.param(je.data,je.traditional)),gs(ko,je,z,gi),ie)return gi;for(Xe in(ge=q.event&&je.global)&&0==q.active++&&q.event.trigger("ajaxStart"),je.type=je.type.toUpperCase(),je.hasContent=!Os.test(je.type),Z=je.url.replace(ca,""),je.hasContent?je.data&&je.processData&&0===(je.contentType||"").indexOf("application/x-www-form-urlencoded")&&(je.data=je.data.replace($r,"+")):(pi=je.url.slice(Z.length),je.data&&(je.processData||"string"==typeof je.data)&&(Z+=(lo.test(Z)?"&":"?")+je.data,delete je.data),!1===je.cache&&(Z=Z.replace(Ba,"$1"),pi=(lo.test(Z)?"&":"?")+"_="+Ea+++pi),je.url=Z+pi),je.ifModified&&(q.lastModified[Z]&&gi.setRequestHeader("If-Modified-Since",q.lastModified[Z]),q.etag[Z]&&gi.setRequestHeader("If-None-Match",q.etag[Z])),(je.data&&je.hasContent&&!1!==je.contentType||z.contentType)&&gi.setRequestHeader("Content-Type",je.contentType),gi.setRequestHeader("Accept",je.dataTypes[0]&&je.accepts[je.dataTypes[0]]?je.accepts[je.dataTypes[0]]+("*"!==je.dataTypes[0]?", "+Qa+"; q=0.01":""):je.accepts["*"]),je.headers)gi.setRequestHeader(Xe,je.headers[Xe]);if(je.beforeSend&&(!1===je.beforeSend.call(Ge,gi,je)||ie))return gi.abort();if(sn="abort",Yi.add(je.complete),gi.done(je.success),gi.fail(je.error),V=gs(pa,je,z,gi)){if(gi.readyState=1,ge&&Ki.trigger("ajaxSend",[gi,je]),ie)return gi;je.async&&0<je.timeout&&(At=F.setTimeout(function(){gi.abort("timeout")},je.timeout));try{ie=!1,V.send(En,Ho)}catch(Wr){if(ie)throw Wr;Ho(-1,Wr)}}else Ho(-1,"No Transport");function Ho(Wr,ln,Aa,Oo){var Qn,sa,Zo,er,Wo,Ta=ln;ie||(ie=!0,At&&F.clearTimeout(At),V=void 0,dt=Oo||"",gi.readyState=0<Wr?4:0,Qn=200<=Wr&&Wr<300||304===Wr,Aa&&(er=function(un,da,Ao){for(var Jo,Kr,en,to,vo=un.contents,Hn=un.dataTypes;"*"===Hn[0];)Hn.shift(),void 0===Jo&&(Jo=un.mimeType||da.getResponseHeader("Content-Type"));if(Jo)for(Kr in vo)if(vo[Kr]&&vo[Kr].test(Jo)){Hn.unshift(Kr);break}if(Hn[0]in Ao)en=Hn[0];else{for(Kr in Ao){if(!Hn[0]||un.converters[Kr+" "+Hn[0]]){en=Kr;break}to||(to=Kr)}en=en||to}if(en)return en!==Hn[0]&&Hn.unshift(en),Ao[en]}(je,gi,Aa)),er=function(un,da,Ao,Jo){var Kr,en,to,vo,Hn,Xn={},ts=un.dataTypes.slice();if(ts[1])for(to in un.converters)Xn[to.toLowerCase()]=un.converters[to];for(en=ts.shift();en;)if(un.responseFields[en]&&(Ao[un.responseFields[en]]=da),!Hn&&Jo&&un.dataFilter&&(da=un.dataFilter(da,un.dataType)),Hn=en,en=ts.shift())if("*"===en)en=Hn;else if("*"!==Hn&&Hn!==en){if(!(to=Xn[Hn+" "+en]||Xn["* "+en]))for(Kr in Xn)if((vo=Kr.split(" "))[1]===en&&(to=Xn[Hn+" "+vo[0]]||Xn["* "+vo[0]])){!0===to?to=Xn[Kr]:!0!==Xn[Kr]&&(en=vo[0],ts.unshift(vo[1]));break}if(!0!==to)if(to&&un.throws)da=to(da);else try{da=to(da)}catch(Qo){return{state:"parsererror",error:to?Qo:"No conversion from "+Hn+" to "+en}}}return{state:"success",data:da}}(je,er,gi,Qn),Qn?(je.ifModified&&((Wo=gi.getResponseHeader("Last-Modified"))&&(q.lastModified[Z]=Wo),(Wo=gi.getResponseHeader("etag"))&&(q.etag[Z]=Wo)),204===Wr||"HEAD"===je.type?Ta="nocontent":304===Wr?Ta="notmodified":(Ta=er.state,sa=er.data,Qn=!(Zo=er.error))):(Zo=Ta,!Wr&&Ta||(Ta="error",Wr<0&&(Wr=0))),gi.status=Wr,gi.statusText=(ln||Ta)+"",Qn?xr.resolveWith(Ge,[sa,Ta,gi]):xr.rejectWith(Ge,[gi,Ta,Zo]),gi.statusCode(ro),ro=void 0,ge&&Ki.trigger(Qn?"ajaxSuccess":"ajaxError",[gi,je,Qn?sa:Zo]),Yi.fireWith(Ge,[gi,Ta]),ge&&(Ki.trigger("ajaxComplete",[gi,je]),--q.active||q.event.trigger("ajaxStop")))}return gi},getJSON:function(w,z,V){return q.get(w,z,V,"json")},getScript:function(w,z){return q.get(w,void 0,z,"script")}}),q.each(["get","post"],function(w,z){q[z]=function(V,Z,dt,bt){return lt(Z)&&(bt=bt||dt,dt=Z,Z=void 0),q.ajax(q.extend({url:V,type:z,dataType:bt,data:Z,success:dt},q.isPlainObject(V)&&V))}}),q._evalUrl=function(w,z){return q.ajax({url:w,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(V){q.globalEval(V,z)}})},q.fn.extend({wrapAll:function(w){var z;return this[0]&&(lt(w)&&(w=w.call(this[0])),z=q(w,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&z.insertBefore(this[0]),z.map(function(){for(var V=this;V.firstElementChild;)V=V.firstElementChild;return V}).append(this)),this},wrapInner:function(w){return lt(w)?this.each(function(z){q(this).wrapInner(w.call(this,z))}):this.each(function(){var z=q(this),V=z.contents();V.length?V.wrapAll(w):z.append(w)})},wrap:function(w){var z=lt(w);return this.each(function(V){q(this).wrapAll(z?w.call(this,V):w)})},unwrap:function(w){return this.parent(w).not("body").each(function(){q(this).replaceWith(this.childNodes)}),this}}),q.expr.pseudos.hidden=function(w){return!q.expr.pseudos.visible(w)},q.expr.pseudos.visible=function(w){return!!(w.offsetWidth||w.offsetHeight||w.getClientRects().length)},q.ajaxSettings.xhr=function(){try{return new F.XMLHttpRequest}catch(w){}};var uo={0:200,1223:204},go=q.ajaxSettings.xhr();vt.cors=!!go&&"withCredentials"in go,vt.ajax=go=!!go,q.ajaxTransport(function(w){var z,V;if(vt.cors||go&&!w.crossDomain)return{send:function(Z,dt){var bt,At=w.xhr();if(At.open(w.type,w.url,w.async,w.username,w.password),w.xhrFields)for(bt in w.xhrFields)At[bt]=w.xhrFields[bt];for(bt in w.mimeType&&At.overrideMimeType&&At.overrideMimeType(w.mimeType),w.crossDomain||Z["X-Requested-With"]||(Z["X-Requested-With"]="XMLHttpRequest"),Z)At.setRequestHeader(bt,Z[bt]);z=function(Xt){return function(){z&&(z=V=At.onload=At.onerror=At.onabort=At.ontimeout=At.onreadystatechange=null,"abort"===Xt?At.abort():"error"===Xt?"number"!=typeof At.status?dt(0,"error"):dt(At.status,At.statusText):dt(uo[At.status]||At.status,At.statusText,"text"!==(At.responseType||"text")||"string"!=typeof At.responseText?{binary:At.response}:{text:At.responseText},At.getAllResponseHeaders()))}},At.onload=z(),V=At.onerror=At.ontimeout=z("error"),void 0!==At.onabort?At.onabort=V:At.onreadystatechange=function(){4===At.readyState&&F.setTimeout(function(){z&&V()})},z=z("abort");try{At.send(w.hasContent&&w.data||null)}catch(Xt){if(z)throw Xt}},abort:function(){z&&z()}}}),q.ajaxPrefilter(function(w){w.crossDomain&&(w.contents.script=!1)}),q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(w){return q.globalEval(w),w}}}),q.ajaxPrefilter("script",function(w){void 0===w.cache&&(w.cache=!1),w.crossDomain&&(w.type="GET")}),q.ajaxTransport("script",function(w){var z,V;if(w.crossDomain||w.scriptAttrs)return{send:function(Z,dt){z=q("<script>").attr(w.scriptAttrs||{}).prop({charset:w.scriptCharset,src:w.url}).on("load error",V=function(bt){z.remove(),V=null,bt&&dt("error"===bt.type?404:200,bt.type)}),A.head.appendChild(z[0])},abort:function(){V&&V()}}});var ka,aa=[],Rs=/(=)\?(?=&|$)|\?\?/;q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var w=aa.pop()||q.expando+"_"+Ea++;return this[w]=!0,w}}),q.ajaxPrefilter("json jsonp",function(w,z,V){var Z,dt,bt,At=!1!==w.jsonp&&(Rs.test(w.url)?"url":"string"==typeof w.data&&0===(w.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rs.test(w.data)&&"data");if(At||"jsonp"===w.dataTypes[0])return Z=w.jsonpCallback=lt(w.jsonpCallback)?w.jsonpCallback():w.jsonpCallback,At?w[At]=w[At].replace(Rs,"$1"+Z):!1!==w.jsonp&&(w.url+=(lo.test(w.url)?"&":"?")+w.jsonp+"="+Z),w.converters["script json"]=function(){return bt||q.error(Z+" was not called"),bt[0]},w.dataTypes[0]="json",dt=F[Z],F[Z]=function(){bt=arguments},V.always(function(){void 0===dt?q(F).removeProp(Z):F[Z]=dt,w[Z]&&(w.jsonpCallback=z.jsonpCallback,aa.push(Z)),bt&&lt(dt)&&dt(bt[0]),bt=dt=void 0}),"script"}),vt.createHTMLDocument=((ka=A.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===ka.childNodes.length),q.parseHTML=function(w,z,V){return"string"!=typeof w?[]:("boolean"==typeof z&&(V=z,z=!1),z||(vt.createHTMLDocument?((Z=(z=A.implementation.createHTMLDocument("")).createElement("base")).href=A.location.href,z.head.appendChild(Z)):z=A),bt=!V&&[],(dt=mt.exec(w))?[z.createElement(dt[1])]:(dt=Ne([w],z,bt),bt&&bt.length&&q(bt).remove(),q.merge([],dt.childNodes)));var Z,dt,bt},q.fn.load=function(w,z,V){var Z,dt,bt,At=this,Xt=w.indexOf(" ");return-1<Xt&&(Z=Zn(w.slice(Xt)),w=w.slice(0,Xt)),lt(z)?(V=z,z=void 0):z&&"object"==typeof z&&(dt="POST"),0<At.length&&q.ajax({url:w,type:dt||"GET",dataType:"html",data:z}).done(function(ie){bt=arguments,At.html(Z?q("<div>").append(q.parseHTML(ie)).find(Z):ie)}).always(V&&function(ie,ge){At.each(function(){V.apply(this,bt||[ie.responseText,ge,ie])})}),this},q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(w,z){q.fn[z]=function(V){return this.on(z,V)}}),q.expr.pseudos.animated=function(w){return q.grep(q.timers,function(z){return w===z.elem}).length},q.offset={setOffset:function(w,z,V){var Z,dt,bt,At,Xt,ie,ge=q.css(w,"position"),Xe=q(w),pi={};"static"===ge&&(w.style.position="relative"),Xt=Xe.offset(),bt=q.css(w,"top"),ie=q.css(w,"left"),("absolute"===ge||"fixed"===ge)&&-1<(bt+ie).indexOf("auto")?(At=(Z=Xe.position()).top,dt=Z.left):(At=parseFloat(bt)||0,dt=parseFloat(ie)||0),lt(z)&&(z=z.call(w,V,q.extend({},Xt))),null!=z.top&&(pi.top=z.top-Xt.top+At),null!=z.left&&(pi.left=z.left-Xt.left+dt),"using"in z?z.using.call(w,pi):Xe.css(pi)}},q.fn.extend({offset:function(w){if(arguments.length)return void 0===w?this:this.each(function(dt){q.offset.setOffset(this,w,dt)});var z,V,Z=this[0];return Z?Z.getClientRects().length?{top:(z=Z.getBoundingClientRect()).top+(V=Z.ownerDocument.defaultView).pageYOffset,left:z.left+V.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var w,z,V,Z=this[0],dt={top:0,left:0};if("fixed"===q.css(Z,"position"))z=Z.getBoundingClientRect();else{for(z=this.offset(),V=Z.ownerDocument,w=Z.offsetParent||V.documentElement;w&&(w===V.body||w===V.documentElement)&&"static"===q.css(w,"position");)w=w.parentNode;w&&w!==Z&&1===w.nodeType&&((dt=q(w).offset()).top+=q.css(w,"borderTopWidth",!0),dt.left+=q.css(w,"borderLeftWidth",!0))}return{top:z.top-dt.top-q.css(Z,"marginTop",!0),left:z.left-dt.left-q.css(Z,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var w=this.offsetParent;w&&"static"===q.css(w,"position");)w=w.offsetParent;return w||Kt})}}),q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(w,z){var V="pageYOffset"===z;q.fn[w]=function(Z){return Tr(this,function(dt,bt,At){var Xt;if(Vt(dt)?Xt=dt:9===dt.nodeType&&(Xt=dt.defaultView),void 0===At)return Xt?Xt[z]:dt[bt];Xt?Xt.scrollTo(V?Xt.pageXOffset:At,V?At:Xt.pageYOffset):dt[bt]=At},w,Z,arguments.length)}}),q.each(["top","left"],function(w,z){q.cssHooks[z]=nt(vt.pixelPosition,function(V,Z){if(Z)return Z=at(V,z),K.test(Z)?q(V).position()[z]+"px":Z})}),q.each({Height:"height",Width:"width"},function(w,z){q.each({padding:"inner"+w,content:z,"":"outer"+w},function(V,Z){q.fn[Z]=function(dt,bt){var At=arguments.length&&(V||"boolean"!=typeof dt),Xt=V||(!0===dt||!0===bt?"margin":"border");return Tr(this,function(ie,ge,Xe){var pi;return Vt(ie)?0===Z.indexOf("outer")?ie["inner"+w]:ie.document.documentElement["client"+w]:9===ie.nodeType?(pi=ie.documentElement,Math.max(ie.body["scroll"+w],pi["scroll"+w],ie.body["offset"+w],pi["offset"+w],pi["client"+w])):void 0===Xe?q.css(ie,ge,Xt):q.style(ie,ge,Xe,Xt)},z,At?dt:void 0,At)}})}),q.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(w,z){q.fn[z]=function(V,Z){return 0<arguments.length?this.on(z,null,V,Z):this.trigger(z)}}),q.fn.extend({hover:function(w,z){return this.mouseenter(w).mouseleave(z||w)}}),q.fn.extend({bind:function(w,z,V){return this.on(w,null,z,V)},unbind:function(w,z){return this.off(w,null,z)},delegate:function(w,z,V,Z){return this.on(z,w,V,Z)},undelegate:function(w,z,V){return 1===arguments.length?this.off(w,"**"):this.off(z,w||"**",V)}}),q.proxy=function(w,z){var V,Z,dt;if("string"==typeof z&&(V=w[z],z=w,w=V),lt(w))return Z=P.call(arguments,2),(dt=function(){return w.apply(z||this,Z.concat(P.call(arguments)))}).guid=w.guid=w.guid||q.guid++,dt},q.holdReady=function(w){w?q.readyWait++:q.ready(!0)},q.isArray=Array.isArray,q.parseJSON=JSON.parse,q.nodeName=ht,q.isFunction=lt,q.isWindow=Vt,q.camelCase=Dt,q.type=Ye,q.now=Date.now,q.isNumeric=function(w){var z=q.type(w);return("number"===z||"string"===z)&&!isNaN(w-parseFloat(w))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return q});var Oa=F.jQuery,Fa=F.$;return q.noConflict=function(w){return F.$===q&&(F.$=Fa),w&&F.jQuery===q&&(F.jQuery=Oa),q},b||(F.jQuery=F.$=q),q}),function(F,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):F.Popper=b()}(this,function(){"use strict";function F(xt){return xt&&"[object Function]"==={}.toString.call(xt)}function b(xt,pt){if(1!==xt.nodeType)return[];var Wt=getComputedStyle(xt,null);return pt?Wt[pt]:Wt}function v(xt){return"HTML"===xt.nodeName?xt:xt.parentNode||xt.host}function A(xt){if(!xt)return document.body;switch(xt.nodeName){case"HTML":case"BODY":return xt.ownerDocument.body;case"#document":return xt.body}var pt=b(xt);return/(auto|scroll|overlay)/.test(pt.overflow+pt.overflowY+pt.overflowX)?xt:A(v(xt))}function l(xt){return 11===xt?ne:10===xt?Pe:ne||Pe}function P(xt){if(!xt)return document.documentElement;for(var pt=l(10)?document.body:null,Wt=xt.offsetParent;Wt===pt&&xt.nextElementSibling;)Wt=(xt=xt.nextElementSibling).offsetParent;var ue=Wt&&Wt.nodeName;return ue&&"BODY"!==ue&&"HTML"!==ue?-1!==["TD","TABLE"].indexOf(Wt.nodeName)&&"static"===b(Wt,"position")?P(Wt):Wt:xt?xt.ownerDocument.documentElement:document.documentElement}function N(xt){return null===xt.parentNode?xt:N(xt.parentNode)}function et(xt,pt){if(!(xt&&xt.nodeType&&pt&&pt.nodeType))return document.documentElement;var Wt=xt.compareDocumentPosition(pt)&Node.DOCUMENT_POSITION_FOLLOWING,ue=Wt?xt:pt,We=Wt?pt:xt,ri=document.createRange();ri.setStart(ue,0),ri.setEnd(We,0);var Ne=ri.commonAncestorContainer;if(xt!==Ne&&pt!==Ne||ue.contains(We))return function I(xt){var pt=xt.nodeName;return"BODY"!==pt&&("HTML"===pt||P(xt.firstElementChild)===xt)}(Ne)?Ne:P(Ne);var zi=N(xt);return zi.host?et(zi.host,pt):et(xt,N(pt).host)}function Lt(xt){var pt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top",Wt="top"===pt?"scrollTop":"scrollLeft",ue=xt.nodeName;if("BODY"===ue||"HTML"===ue){var We=xt.ownerDocument.documentElement,ri=xt.ownerDocument.scrollingElement||We;return ri[Wt]}return xt[Wt]}function Zt(xt,pt){var Wt=2<arguments.length&&void 0!==arguments[2]&&arguments[2],ue=Lt(pt,"top"),We=Lt(pt,"left"),ri=Wt?-1:1;return xt.top+=ue*ri,xt.bottom+=ue*ri,xt.left+=We*ri,xt.right+=We*ri,xt}function Mt(xt,pt){var Wt="x"===pt?"Left":"Top",ue="Left"==Wt?"Right":"Bottom";return parseFloat(xt["border"+Wt+"Width"],10)+parseFloat(xt["border"+ue+"Width"],10)}function Yt(xt,pt,Wt,ue){return Rt(pt["offset"+xt],pt["scroll"+xt],Wt["client"+xt],Wt["offset"+xt],Wt["scroll"+xt],l(10)?parseInt(Wt["offset"+xt])+parseInt(ue["margin"+("Height"===xt?"Top":"Left")])+parseInt(ue["margin"+("Height"===xt?"Bottom":"Right")]):0)}function $t(xt){var pt=xt.body,Wt=xt.documentElement,ue=l(10)&&getComputedStyle(Wt);return{height:Yt("Height",pt,Wt,ue),width:Yt("Width",pt,Wt,ue)}}function vt(xt){return tr({},xt,{right:xt.left+xt.width,bottom:xt.top+xt.height})}function lt(xt){var pt={};try{if(l(10)){pt=xt.getBoundingClientRect();var Wt=Lt(xt,"top"),ue=Lt(xt,"left");pt.top+=Wt,pt.left+=ue,pt.bottom+=Wt,pt.right+=ue}else pt=xt.getBoundingClientRect()}catch(wi){}var We={left:pt.left,top:pt.top,width:pt.right-pt.left,height:pt.bottom-pt.top},ri="HTML"===xt.nodeName?$t(xt.ownerDocument):{},Fi=xt.offsetWidth-(ri.width||xt.clientWidth||We.right-We.left),Ni=xt.offsetHeight-(ri.height||xt.clientHeight||We.bottom-We.top);if(Fi||Ni){var Ii=b(xt);Fi-=Mt(Ii,"x"),Ni-=Mt(Ii,"y"),We.width-=Fi,We.height-=Ni}return vt(We)}function Vt(xt,pt){var Wt=2<arguments.length&&void 0!==arguments[2]&&arguments[2],ue=l(10),We="HTML"===pt.nodeName,ri=lt(xt),Ne=lt(pt),zi=A(xt),Fi=b(pt),Ni=parseFloat(Fi.borderTopWidth,10),Ii=parseFloat(Fi.borderLeftWidth,10);Wt&&We&&(Ne.top=Rt(Ne.top,0),Ne.left=Rt(Ne.left,0));var wi=vt({top:ri.top-Ne.top-Ni,left:ri.left-Ne.left-Ii,width:ri.width,height:ri.height});if(wi.marginTop=0,wi.marginLeft=0,!ue&&We){var Li=parseFloat(Fi.marginTop,10),cr=parseFloat(Fi.marginLeft,10);wi.top-=Ni-Li,wi.bottom-=Ni-Li,wi.left-=Ii-cr,wi.right-=Ii-cr,wi.marginTop=Li,wi.marginLeft=cr}return(ue&&!Wt?pt.contains(zi):pt===zi&&"BODY"!==zi.nodeName)&&(wi=Zt(wi,pt)),wi}function xe(xt){var pt=1<arguments.length&&void 0!==arguments[1]&&arguments[1],Wt=xt.ownerDocument.documentElement,ue=Vt(xt,Wt),We=Rt(Wt.clientWidth,window.innerWidth||0),ri=Rt(Wt.clientHeight,window.innerHeight||0),Ne=pt?0:Lt(Wt),zi=pt?0:Lt(Wt,"left"),Fi={top:Ne-ue.top+ue.marginTop,left:zi-ue.left+ue.marginLeft,width:We,height:ri};return vt(Fi)}function Ze(xt){var pt=xt.nodeName;return"BODY"!==pt&&"HTML"!==pt&&("fixed"===b(xt,"position")||Ze(v(xt)))}function Ye(xt){if(!xt||!xt.parentElement||l())return document.documentElement;for(var pt=xt.parentElement;pt&&"none"===b(pt,"transform");)pt=pt.parentElement;return pt||document.documentElement}function Ui(xt,pt,Wt,ue){var We=4<arguments.length&&void 0!==arguments[4]&&arguments[4],ri={top:0,left:0},Ne=We?Ye(xt):et(xt,pt);if("viewport"===ue)ri=xe(Ne,We);else{var zi;"scrollParent"===ue?"BODY"===(zi=A(v(pt))).nodeName&&(zi=xt.ownerDocument.documentElement):zi="window"===ue?xt.ownerDocument.documentElement:ue;var Fi=Vt(zi,Ne,We);if("HTML"!==zi.nodeName||Ze(Ne))ri=Fi;else{var Ni=$t(xt.ownerDocument),Ii=Ni.height,wi=Ni.width;ri.top+=Fi.top-Fi.marginTop,ri.bottom=Ii+Fi.top,ri.left+=Fi.left-Fi.marginLeft,ri.right=wi+Fi.left}}var Li="number"==typeof(Wt=Wt||0);return ri.left+=Li?Wt:Wt.left||0,ri.top+=Li?Wt:Wt.top||0,ri.right-=Li?Wt:Wt.right||0,ri.bottom-=Li?Wt:Wt.bottom||0,ri}function q(xt){return xt.width*xt.height}function Wi(xt,pt,Wt,ue,We){var ri=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===xt.indexOf("auto"))return xt;var Ne=Ui(Wt,ue,ri,We),zi={top:{width:Ne.width,height:pt.top-Ne.top},right:{width:Ne.right-pt.right,height:Ne.height},bottom:{width:Ne.width,height:Ne.bottom-pt.bottom},left:{width:pt.left-Ne.left,height:Ne.height}},Fi=Object.keys(zi).map(function(Li){return tr({key:Li},zi[Li],{area:q(zi[Li])})}).sort(function(Li,cr){return cr.area-Li.area}),Ni=Fi.filter(function(Li){return Li.width>=Wt.clientWidth&&Li.height>=Wt.clientHeight}),Ii=0<Ni.length?Ni[0].key:Fi[0].key,wi=xt.split("-")[1];return Ii+(wi?"-"+wi:"")}function Ti(xt,pt,Wt){var ue=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,We=ue?Ye(pt):et(pt,Wt);return Vt(Wt,We,ue)}function ti(xt){var pt=getComputedStyle(xt),Wt=parseFloat(pt.marginTop)+parseFloat(pt.marginBottom),ue=parseFloat(pt.marginLeft)+parseFloat(pt.marginRight);return{width:xt.offsetWidth+ue,height:xt.offsetHeight+Wt}}function ae(xt){var pt={left:"right",right:"left",bottom:"top",top:"bottom"};return xt.replace(/left|right|bottom|top/g,function(Wt){return pt[Wt]})}function zt(xt,pt,Wt){Wt=Wt.split("-")[0];var ue=ti(xt),We={width:ue.width,height:ue.height},ri=-1!==["right","left"].indexOf(Wt),Ne=ri?"top":"left",zi=ri?"left":"top",Fi=ri?"height":"width",Ni=ri?"width":"height";return We[Ne]=pt[Ne]+pt[Fi]/2-ue[Fi]/2,We[zi]=Wt===zi?pt[zi]-ue[Ni]:pt[ae(zi)],We}function Ht(xt,pt){return Array.prototype.find?xt.find(pt):xt.filter(pt)[0]}function mt(xt,pt,Wt){var ue=void 0===Wt?xt:xt.slice(0,function ht(xt,pt,Wt){if(Array.prototype.findIndex)return xt.findIndex(function(We){return We[pt]===Wt});var ue=Ht(xt,function(We){return We[pt]===Wt});return xt.indexOf(ue)}(xt,"name",Wt));return ue.forEach(function(We){We.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var ri=We.function||We.fn;We.enabled&&F(ri)&&(pt.offsets.popper=vt(pt.offsets.popper),pt.offsets.reference=vt(pt.offsets.reference),pt=ri(pt,We))}),pt}function rt(){if(!this.state.isDestroyed){var xt={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};xt.offsets.reference=Ti(this.state,this.popper,this.reference,this.options.positionFixed),xt.placement=Wi(this.options.placement,xt.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),xt.originalPlacement=xt.placement,xt.positionFixed=this.options.positionFixed,xt.offsets.popper=zt(this.popper,xt.offsets.reference,xt.placement),xt.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",xt=mt(this.modifiers,xt),this.state.isCreated?this.options.onUpdate(xt):(this.state.isCreated=!0,this.options.onCreate(xt))}}function J(xt,pt){return xt.some(function(Wt){return Wt.enabled&&Wt.name===pt})}function d(xt){for(var pt=[!1,"ms","Webkit","Moz","O"],Wt=xt.charAt(0).toUpperCase()+xt.slice(1),ue=0;ue<pt.length;ue++){var We=pt[ue],ri=We?""+We+Wt:xt;if(void 0!==document.body.style[ri])return ri}return null}function Pt(){return this.state.isDestroyed=!0,J(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[d("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function Et(xt){var pt=xt.ownerDocument;return pt?pt.defaultView:window}function se(xt,pt,Wt,ue){var We="BODY"===xt.nodeName,ri=We?xt.ownerDocument.defaultView:xt;ri.addEventListener(pt,Wt,{passive:!0}),We||se(A(ri.parentNode),pt,Wt,ue),ue.push(ri)}function Ie(xt,pt,Wt,ue){Wt.updateBound=ue,Et(xt).addEventListener("resize",Wt.updateBound,{passive:!0});var We=A(xt);return se(We,"scroll",Wt.updateBound,Wt.scrollParents),Wt.scrollElement=We,Wt.eventsEnabled=!0,Wt}function ei(){this.state.eventsEnabled||(this.state=Ie(this.reference,0,this.state,this.scheduleUpdate))}function Ri(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function _e(xt,pt){return Et(xt).removeEventListener("resize",pt.updateBound),pt.scrollParents.forEach(function(Wt){Wt.removeEventListener("scroll",pt.updateBound)}),pt.updateBound=null,pt.scrollParents=[],pt.scrollElement=null,pt.eventsEnabled=!1,pt}(this.reference,this.state))}function Gi(xt){return""!==xt&&!isNaN(parseFloat(xt))&&isFinite(xt)}function _i(xt,pt){Object.keys(pt).forEach(function(Wt){var ue="";-1!==["width","height","top","right","bottom","left"].indexOf(Wt)&&Gi(pt[Wt])&&(ue="px"),xt.style[Wt]=pt[Wt]+ue})}function Tr(xt,pt,Wt){var ue=Ht(xt,function(Ne){return Ne.name===pt}),We=!!ue&&xt.some(function(Ne){return Ne.name===Wt&&Ne.enabled&&Ne.order<ue.order});if(!We){var ri="`"+pt+"`";console.warn("`"+Wt+"` modifier is required by "+ri+" modifier in order to work, be sure to include it before "+ri+"!")}return We}function Tn(xt){var pt=1<arguments.length&&void 0!==arguments[1]&&arguments[1],Wt=vn.indexOf(xt),ue=vn.slice(Wt+1).concat(vn.slice(0,Wt));return pt?ue.reverse():ue}for(var Fe=Math.min,Le=Math.round,st=Math.floor,Rt=Math.max,me="undefined"!=typeof window&&"undefined"!=typeof document,Me=["Edge","Trident","Firefox"],ii=0,re=0;re<Me.length;re+=1)if(me&&0<=navigator.userAgent.indexOf(Me[re])){ii=1;break}var Kt=me&&window.Promise?function(xt){var pt=!1;return function(){pt||(pt=!0,window.Promise.resolve().then(function(){pt=!1,xt()}))}}:function(xt){var pt=!1;return function(){pt||(pt=!0,setTimeout(function(){pt=!1,xt()},ii))}},ne=me&&!(!window.MSInputMethodContext||!document.documentMode),Pe=me&&/MSIE 10/.test(navigator.userAgent),oi=function(xt,pt){if(!(xt instanceof pt))throw new TypeError("Cannot call a class as a function")},Ci=function(){function xt(pt,Wt){for(var ue,We=0;We<Wt.length;We++)(ue=Wt[We]).enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(pt,ue.key,ue)}return function(pt,Wt,ue){return Wt&&xt(pt.prototype,Wt),ue&&xt(pt,ue),pt}}(),ar=function(xt,pt,Wt){return pt in xt?Object.defineProperty(xt,pt,{value:Wt,enumerable:!0,configurable:!0,writable:!0}):xt[pt]=Wt,xt},tr=Object.assign||function(xt){for(var pt,Wt=1;Wt<arguments.length;Wt++)for(var ue in pt=arguments[Wt])Object.prototype.hasOwnProperty.call(pt,ue)&&(xt[ue]=pt[ue]);return xt},Qr=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],vn=Qr.slice(3),dn=function(){function xt(pt,Wt){var ue=this,We=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};oi(this,xt),this.scheduleUpdate=function(){return requestAnimationFrame(ue.update)},this.update=Kt(this.update.bind(this)),this.options=tr({},xt.Defaults,We),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=pt&&pt.jquery?pt[0]:pt,this.popper=Wt&&Wt.jquery?Wt[0]:Wt,this.options.modifiers={},Object.keys(tr({},xt.Defaults.modifiers,We.modifiers)).forEach(function(Ne){ue.options.modifiers[Ne]=tr({},xt.Defaults.modifiers[Ne]||{},We.modifiers?We.modifiers[Ne]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(Ne){return tr({name:Ne},ue.options.modifiers[Ne])}).sort(function(Ne,zi){return Ne.order-zi.order}),this.modifiers.forEach(function(Ne){Ne.enabled&&F(Ne.onLoad)&&Ne.onLoad(ue.reference,ue.popper,ue.options,Ne,ue.state)}),this.update();var ri=this.options.eventsEnabled;ri&&this.enableEventListeners(),this.state.eventsEnabled=ri}return Ci(xt,[{key:"update",value:function(){return rt.call(this)}},{key:"destroy",value:function(){return Pt.call(this)}},{key:"enableEventListeners",value:function(){return ei.call(this)}},{key:"disableEventListeners",value:function(){return Ri.call(this)}}]),xt}();return dn.Utils=("undefined"==typeof window?global:window).PopperUtils,dn.placements=Qr,dn.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(xt){var pt=xt.placement,Wt=pt.split("-")[0],ue=pt.split("-")[1];if(ue){var We=xt.offsets,ri=We.reference,Ne=We.popper,zi=-1!==["bottom","top"].indexOf(Wt),Fi=zi?"left":"top",Ni=zi?"width":"height",Ii={start:ar({},Fi,ri[Fi]),end:ar({},Fi,ri[Fi]+ri[Ni]-Ne[Ni])};xt.offsets.popper=tr({},Ne,Ii[ue])}return xt}},offset:{order:200,enabled:!0,fn:function Ft(xt,pt){var Wt,ue=pt.offset,ri=xt.offsets,Ne=ri.popper,zi=ri.reference,Fi=xt.placement.split("-")[0];return Wt=Gi(+ue)?[+ue,0]:function Dt(xt,pt,Wt,ue){var We=[0,0],ri=-1!==["right","left"].indexOf(ue),Ne=xt.split(/(\+|\-)/).map(function(Ii){return Ii.trim()}),zi=Ne.indexOf(Ht(Ne,function(Ii){return-1!==Ii.search(/,|\s/)}));Ne[zi]&&-1===Ne[zi].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var Fi=/\s*,\s*|\s+/,Ni=-1===zi?[Ne]:[Ne.slice(0,zi).concat([Ne[zi].split(Fi)[0]]),[Ne[zi].split(Fi)[1]].concat(Ne.slice(zi+1))];return Ni=Ni.map(function(Ii,wi){var Li=(1===wi?!ri:ri)?"height":"width",cr=!1;return Ii.reduce(function(Or,Mi){return""===Or[Or.length-1]&&-1!==["+","-"].indexOf(Mi)?(Or[Or.length-1]=Mi,cr=!0,Or):cr?(Or[Or.length-1]+=Mi,cr=!1,Or):Or.concat(Mi)},[]).map(function(Or){return function Ln(xt,pt,Wt,ue){var We=xt.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),ri=+We[1],Ne=We[2];return ri?0===Ne.indexOf("%")?vt("%p"===Ne?Wt:ue)[pt]/100*ri:"vh"===Ne||"vw"===Ne?("vh"===Ne?Rt(document.documentElement.clientHeight,window.innerHeight||0):Rt(document.documentElement.clientWidth,window.innerWidth||0))/100*ri:ri:xt}(Or,Li,pt,Wt)})}),Ni.forEach(function(Ii,wi){Ii.forEach(function(Li,cr){Gi(Li)&&(We[wi]+=Li*("-"===Ii[cr-1]?-1:1))})}),We}(ue,Ne,zi,Fi),"left"===Fi?(Ne.top+=Wt[0],Ne.left-=Wt[1]):"right"===Fi?(Ne.top+=Wt[0],Ne.left+=Wt[1]):"top"===Fi?(Ne.left+=Wt[0],Ne.top-=Wt[1]):"bottom"===Fi&&(Ne.left+=Wt[0],Ne.top+=Wt[1]),xt.popper=Ne,xt},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(xt,pt){var Wt=pt.boundariesElement||P(xt.instance.popper);xt.instance.reference===Wt&&(Wt=P(Wt));var ue=d("transform"),We=xt.instance.popper.style,ri=We.top,Ne=We.left,zi=We[ue];We.top="",We.left="",We[ue]="";var Fi=Ui(xt.instance.popper,xt.instance.reference,pt.padding,Wt,xt.positionFixed);We.top=ri,We.left=Ne,We[ue]=zi,pt.boundaries=Fi;var Ii=xt.offsets.popper,wi={primary:function(Li){var cr=Ii[Li];return Ii[Li]<Fi[Li]&&!pt.escapeWithReference&&(cr=Rt(Ii[Li],Fi[Li])),ar({},Li,cr)},secondary:function(Li){var cr="right"===Li?"left":"top",Or=Ii[cr];return Ii[Li]>Fi[Li]&&!pt.escapeWithReference&&(Or=Fe(Ii[cr],Fi[Li]-("right"===Li?Ii.width:Ii.height))),ar({},cr,Or)}};return pt.priority.forEach(function(Li){var cr=-1===["left","top"].indexOf(Li)?"secondary":"primary";Ii=tr({},Ii,wi[cr](Li))}),xt.offsets.popper=Ii,xt},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(xt){var pt=xt.offsets,Wt=pt.popper,ue=pt.reference,We=xt.placement.split("-")[0],ri=st,Ne=-1!==["top","bottom"].indexOf(We),zi=Ne?"right":"bottom",Fi=Ne?"left":"top",Ni=Ne?"width":"height";return Wt[zi]<ri(ue[Fi])&&(xt.offsets.popper[Fi]=ri(ue[Fi])-Wt[Ni]),Wt[Fi]>ri(ue[zi])&&(xt.offsets.popper[Fi]=ri(ue[zi])),xt}},arrow:{order:500,enabled:!0,fn:function(xt,pt){var Wt;if(!Tr(xt.instance.modifiers,"arrow","keepTogether"))return xt;var ue=pt.element;if("string"==typeof ue){if(!(ue=xt.instance.popper.querySelector(ue)))return xt}else if(!xt.instance.popper.contains(ue))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),xt;var We=xt.placement.split("-")[0],ri=xt.offsets,Ne=ri.popper,zi=ri.reference,Fi=-1!==["left","right"].indexOf(We),Ni=Fi?"height":"width",Ii=Fi?"Top":"Left",wi=Ii.toLowerCase(),Li=Fi?"left":"top",cr=Fi?"bottom":"right",Or=ti(ue)[Ni];zi[cr]-Or<Ne[wi]&&(xt.offsets.popper[wi]-=Ne[wi]-(zi[cr]-Or)),zi[wi]+Or>Ne[cr]&&(xt.offsets.popper[wi]+=zi[wi]+Or-Ne[cr]),xt.offsets.popper=vt(xt.offsets.popper);var Mi=zi[wi]+zi[Ni]/2-Or/2,qi=b(xt.instance.popper),_r=parseFloat(qi["margin"+Ii],10),ji=parseFloat(qi["border"+Ii+"Width"],10),Zr=Mi-xt.offsets.popper[wi]-_r-ji;return Zr=Rt(Fe(Ne[Ni]-Or,Zr),0),xt.arrowElement=ue,xt.offsets.arrow=(ar(Wt={},wi,Le(Zr)),ar(Wt,Li,""),Wt),xt},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(xt,pt){if(J(xt.instance.modifiers,"inner")||xt.flipped&&xt.placement===xt.originalPlacement)return xt;var Wt=Ui(xt.instance.popper,xt.instance.reference,pt.padding,pt.boundariesElement,xt.positionFixed),ue=xt.placement.split("-")[0],We=ae(ue),ri=xt.placement.split("-")[1]||"",Ne=[];switch(pt.behavior){case"flip":Ne=[ue,We];break;case"clockwise":Ne=Tn(ue);break;case"counterclockwise":Ne=Tn(ue,!0);break;default:Ne=pt.behavior}return Ne.forEach(function(zi,Fi){if(ue!==zi||Ne.length===Fi+1)return xt;ue=xt.placement.split("-")[0],We=ae(ue);var Ni=xt.offsets.popper,Ii=xt.offsets.reference,wi=st,Li="left"===ue&&wi(Ni.right)>wi(Ii.left)||"right"===ue&&wi(Ni.left)<wi(Ii.right)||"top"===ue&&wi(Ni.bottom)>wi(Ii.top)||"bottom"===ue&&wi(Ni.top)<wi(Ii.bottom),cr=wi(Ni.left)<wi(Wt.left),Or=wi(Ni.right)>wi(Wt.right),Mi=wi(Ni.top)<wi(Wt.top),qi=wi(Ni.bottom)>wi(Wt.bottom),_r="left"===ue&&cr||"right"===ue&&Or||"top"===ue&&Mi||"bottom"===ue&&qi,ji=-1!==["top","bottom"].indexOf(ue),Zr=!!pt.flipVariations&&(ji&&"start"===ri&&cr||ji&&"end"===ri&&Or||!ji&&"start"===ri&&Mi||!ji&&"end"===ri&&qi);(Li||_r||Zr)&&(xt.flipped=!0,(Li||_r)&&(ue=Ne[Fi+1]),Zr&&(ri=function sr(xt){return"end"===xt?"start":"start"===xt?"end":xt}(ri)),xt.placement=ue+(ri?"-"+ri:""),xt.offsets.popper=tr({},xt.offsets.popper,zt(xt.instance.popper,xt.offsets.reference,xt.placement)),xt=mt(xt.instance.modifiers,xt,"flip"))}),xt},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(xt){var pt=xt.placement,Wt=pt.split("-")[0],ue=xt.offsets,We=ue.popper,ri=ue.reference,Ne=-1!==["left","right"].indexOf(Wt),zi=-1===["top","left"].indexOf(Wt);return We[Ne?"left":"top"]=ri[Wt]-(zi?We[Ne?"width":"height"]:0),xt.placement=ae(pt),xt.offsets.popper=vt(We),xt}},hide:{order:800,enabled:!0,fn:function(xt){if(!Tr(xt.instance.modifiers,"hide","preventOverflow"))return xt;var pt=xt.offsets.reference,Wt=Ht(xt.instance.modifiers,function(ue){return"preventOverflow"===ue.name}).boundaries;if(pt.bottom<Wt.top||pt.left>Wt.right||pt.top>Wt.bottom||pt.right<Wt.left){if(!0===xt.hide)return xt;xt.hide=!0,xt.attributes["x-out-of-boundaries"]=""}else{if(!1===xt.hide)return xt;xt.hide=!1,xt.attributes["x-out-of-boundaries"]=!1}return xt}},computeStyle:{order:850,enabled:!0,fn:function(xt,pt){var Wt=pt.x,ue=pt.y,We=xt.offsets.popper,ri=Ht(xt.instance.modifiers,function(Zr){return"applyStyle"===Zr.name}).gpuAcceleration;void 0!==ri&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var Ne,zi,Fi=void 0===ri?pt.gpuAcceleration:ri,Ni=P(xt.instance.popper),Ii=lt(Ni),wi={position:We.position},Li={left:st(We.left),top:Le(We.top),bottom:Le(We.bottom),right:st(We.right)},cr="bottom"===Wt?"top":"bottom",Or="right"===ue?"left":"right",Mi=d("transform");if(zi="bottom"==cr?"HTML"===Ni.nodeName?-Ni.clientHeight+Li.bottom:-Ii.height+Li.bottom:Li.top,Ne="right"==Or?"HTML"===Ni.nodeName?-Ni.clientWidth+Li.right:-Ii.width+Li.right:Li.left,Fi&&Mi)wi[Mi]="translate3d("+Ne+"px, "+zi+"px, 0)",wi[cr]=0,wi[Or]=0,wi.willChange="transform";else{var _r="right"==Or?-1:1;wi[cr]=zi*("bottom"==cr?-1:1),wi[Or]=Ne*_r,wi.willChange=cr+", "+Or}return xt.attributes=tr({},{"x-placement":xt.placement},xt.attributes),xt.styles=tr({},wi,xt.styles),xt.arrowStyles=tr({},xt.offsets.arrow,xt.arrowStyles),xt},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(xt){return _i(xt.instance.popper,xt.styles),function Hr(xt,pt){Object.keys(pt).forEach(function(Wt){!1===pt[Wt]?xt.removeAttribute(Wt):xt.setAttribute(Wt,pt[Wt])})}(xt.instance.popper,xt.attributes),xt.arrowElement&&Object.keys(xt.arrowStyles).length&&_i(xt.arrowElement,xt.arrowStyles),xt},onLoad:function(xt,pt,Wt,ue,We){var ri=Ti(We,pt,xt,Wt.positionFixed),Ne=Wi(Wt.placement,ri,pt,xt,Wt.modifiers.flip.boundariesElement,Wt.modifiers.flip.padding);return pt.setAttribute("x-placement",Ne),_i(pt,{position:Wt.positionFixed?"fixed":"absolute"}),Wt},gpuAcceleration:void 0}}},dn}),function(){"use strict";function F(A){if(!A)throw new Error("No options passed to Waypoint constructor");if(!A.element)throw new Error("No element option passed to Waypoint constructor");if(!A.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+b,this.options=F.Adapter.extend({},F.defaults,A),this.element=this.options.element,this.adapter=new F.Adapter(this.element),this.callback=A.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=F.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=F.Context.findOrCreateByElement(this.options.context),F.offsetAliases[this.options.offset]&&(this.options.offset=F.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),v[this.key]=this,b+=1}var b=0,v={};F.prototype.queueTrigger=function(A){this.group.queueTrigger(this,A)},F.prototype.trigger=function(A){this.enabled&&this.callback&&this.callback.apply(this,A)},F.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete v[this.key]},F.prototype.disable=function(){return this.enabled=!1,this},F.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},F.prototype.next=function(){return this.group.next(this)},F.prototype.previous=function(){return this.group.previous(this)},F.invokeAll=function(A){var l=[];for(var P in v)l.push(v[P]);for(var I=0,N=l.length;N>I;I++)l[I][A]()},F.destroyAll=function(){F.invokeAll("destroy")},F.disableAll=function(){F.invokeAll("disable")},F.enableAll=function(){F.invokeAll("enable")},F.refreshAll=function(){F.Context.refreshAll()},F.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},F.viewportWidth=function(){return document.documentElement.clientWidth},F.adapters=[],F.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},F.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=F}(),function(){"use strict";function F(I){window.setTimeout(I,1e3/60)}function b(I){this.element=I,this.Adapter=l.Adapter,this.adapter=new this.Adapter(I),this.key="waypoint-context-"+v,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},I.waypointContextKey=this.key,A[I.waypointContextKey]=this,v+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var v=0,A={},l=window.Waypoint,P=window.onload;b.prototype.add=function(I){this.waypoints[I.options.horizontal?"horizontal":"vertical"][I.key]=I,this.refresh()},b.prototype.checkEmpty=function(){var I=this.Adapter.isEmptyObject(this.waypoints.horizontal),N=this.Adapter.isEmptyObject(this.waypoints.vertical);I&&N&&(this.adapter.off(".waypoints"),delete A[this.key])},b.prototype.createThrottledResizeHandler=function(){function I(){N.handleResize(),N.didResize=!1}var N=this;this.adapter.on("resize.waypoints",function(){N.didResize||(N.didResize=!0,l.requestAnimationFrame(I))})},b.prototype.createThrottledScrollHandler=function(){function I(){N.handleScroll(),N.didScroll=!1}var N=this;this.adapter.on("scroll.waypoints",function(){(!N.didScroll||l.isTouch)&&(N.didScroll=!0,l.requestAnimationFrame(I))})},b.prototype.handleResize=function(){l.Context.refreshAll()},b.prototype.handleScroll=function(){var I={},N={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var et in N){var Lt=N[et],Mt=Lt.newScroll>Lt.oldScroll?Lt.forward:Lt.backward;for(var Yt in this.waypoints[et]){var $t=this.waypoints[et][Yt],vt=Lt.oldScroll<$t.triggerPoint,lt=Lt.newScroll>=$t.triggerPoint;(vt&&lt||!vt&&!lt)&&($t.queueTrigger(Mt),I[$t.group.id]=$t.group)}}for(var Ze in I)I[Ze].flushTriggers();this.oldScroll={x:N.horizontal.newScroll,y:N.vertical.newScroll}},b.prototype.innerHeight=function(){return this.element==this.element.window?l.viewportHeight():this.adapter.innerHeight()},b.prototype.remove=function(I){delete this.waypoints[I.axis][I.key],this.checkEmpty()},b.prototype.innerWidth=function(){return this.element==this.element.window?l.viewportWidth():this.adapter.innerWidth()},b.prototype.destroy=function(){var I=[];for(var N in this.waypoints)for(var et in this.waypoints[N])I.push(this.waypoints[N][et]);for(var Lt=0,Zt=I.length;Zt>Lt;Lt++)I[Lt].destroy()},b.prototype.refresh=function(){var I,N=this.element==this.element.window,et=N?void 0:this.adapter.offset(),Lt={};for(var Zt in this.handleScroll(),I={horizontal:{contextOffset:N?0:et.left,contextScroll:N?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:N?0:et.top,contextScroll:N?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var Mt=I[Zt];for(var Yt in this.waypoints[Zt]){var vt,lt,xe,Ze=this.waypoints[Zt][Yt],Ye=Ze.options.offset,Ui=Ze.triggerPoint,q=0,Wi=null==Ui;Ze.element!==Ze.element.window&&(q=Ze.adapter.offset()[Mt.offsetProp]),"function"==typeof Ye?Ye=Ye.apply(Ze):"string"==typeof Ye&&(Ye=parseFloat(Ye),Ze.options.offset.indexOf("%")>-1&&(Ye=Math.ceil(Mt.contextDimension*Ye/100))),Ze.triggerPoint=q+(Mt.contextScroll-Mt.contextOffset)-Ye,lt=Ze.triggerPoint>=Mt.oldScroll,xe=!(vt=Ui<Mt.oldScroll)&&!lt,!Wi&&vt&&lt?(Ze.queueTrigger(Mt.backward),Lt[Ze.group.id]=Ze.group):(!Wi&&xe||Wi&&Mt.oldScroll>=Ze.triggerPoint)&&(Ze.queueTrigger(Mt.forward),Lt[Ze.group.id]=Ze.group)}}return l.requestAnimationFrame(function(){for(var Ti in Lt)Lt[Ti].flushTriggers()}),this},b.findOrCreateByElement=function(I){return b.findByElement(I)||new b(I)},b.refreshAll=function(){for(var I in A)A[I].refresh()},b.findByElement=function(I){return A[I.waypointContextKey]},window.onload=function(){P&&P(),b.refreshAll()},l.requestAnimationFrame=function(I){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||F).call(window,I)},l.Context=b}(),function(){"use strict";function F(P,I){return P.triggerPoint-I.triggerPoint}function b(P,I){return I.triggerPoint-P.triggerPoint}function v(P){this.name=P.name,this.axis=P.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),A[this.axis][this.name]=this}var A={vertical:{},horizontal:{}},l=window.Waypoint;v.prototype.add=function(P){this.waypoints.push(P)},v.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},v.prototype.flushTriggers=function(){for(var P in this.triggerQueues){var I=this.triggerQueues[P];I.sort("up"===P||"left"===P?b:F);for(var et=0,Lt=I.length;Lt>et;et+=1){var Zt=I[et];(Zt.options.continuous||et===I.length-1)&&Zt.trigger([P])}}this.clearTriggerQueues()},v.prototype.next=function(P){this.waypoints.sort(F);var I=l.Adapter.inArray(P,this.waypoints);return I===this.waypoints.length-1?null:this.waypoints[I+1]},v.prototype.previous=function(P){this.waypoints.sort(F);var I=l.Adapter.inArray(P,this.waypoints);return I?this.waypoints[I-1]:null},v.prototype.queueTrigger=function(P,I){this.triggerQueues[I].push(P)},v.prototype.remove=function(P){var I=l.Adapter.inArray(P,this.waypoints);I>-1&&this.waypoints.splice(I,1)},v.prototype.first=function(){return this.waypoints[0]},v.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},v.findOrCreate=function(P){return A[P.axis][P.name]||new v(P)},l.Group=v}(),function(){"use strict";function F(l){return l===l.window}function b(l){return F(l)?l:l.defaultView}function v(l){this.element=l,this.handlers={}}var A=window.Waypoint;v.prototype.innerHeight=function(){return F(this.element)?this.element.innerHeight:this.element.clientHeight},v.prototype.innerWidth=function(){return F(this.element)?this.element.innerWidth:this.element.clientWidth},v.prototype.off=function(l,P){function I($t,vt,lt){for(var Vt=0,xe=vt.length-1;xe>Vt;Vt++){var Ze=vt[Vt];lt&&lt!==Ze||$t.removeEventListener(Ze)}}var N=l.split("."),et=N[0],Lt=N[1],Zt=this.element;if(Lt&&this.handlers[Lt]&&et)I(Zt,this.handlers[Lt][et],P),this.handlers[Lt][et]=[];else if(et)for(var Mt in this.handlers)I(Zt,this.handlers[Mt][et]||[],P),this.handlers[Mt][et]=[];else if(Lt&&this.handlers[Lt]){for(var Yt in this.handlers[Lt])I(Zt,this.handlers[Lt][Yt],P);this.handlers[Lt]={}}},v.prototype.offset=function(){if(!this.element.ownerDocument)return null;var l=this.element.ownerDocument.documentElement,P=b(this.element.ownerDocument),I={top:0,left:0};return this.element.getBoundingClientRect&&(I=this.element.getBoundingClientRect()),{top:I.top+P.pageYOffset-l.clientTop,left:I.left+P.pageXOffset-l.clientLeft}},v.prototype.on=function(l,P){var I=l.split("."),N=I[0],et=I[1]||"__default",Lt=this.handlers[et]=this.handlers[et]||{};(Lt[N]=Lt[N]||[]).push(P),this.element.addEventListener(N,P)},v.prototype.outerHeight=function(l){var P,I=this.innerHeight();return l&&!F(this.element)&&(P=window.getComputedStyle(this.element),I+=parseInt(P.marginTop,10),I+=parseInt(P.marginBottom,10)),I},v.prototype.outerWidth=function(l){var P,I=this.innerWidth();return l&&!F(this.element)&&(P=window.getComputedStyle(this.element),I+=parseInt(P.marginLeft,10),I+=parseInt(P.marginRight,10)),I},v.prototype.scrollLeft=function(){var l=b(this.element);return l?l.pageXOffset:this.element.scrollLeft},v.prototype.scrollTop=function(){var l=b(this.element);return l?l.pageYOffset:this.element.scrollTop},v.extend=function(){function l(et,Lt){if("object"==typeof et&&"object"==typeof Lt)for(var Zt in Lt)Lt.hasOwnProperty(Zt)&&(et[Zt]=Lt[Zt]);return et}for(var P=Array.prototype.slice.call(arguments),I=1,N=P.length;N>I;I++)l(P[0],P[I]);return P[0]},v.inArray=function(l,P,I){return null==P?-1:P.indexOf(l,I)},v.isEmptyObject=function(l){for(var P in l)return!1;return!0},A.adapters.push({name:"noframework",Adapter:v}),A.Adapter=v}(),function(F,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],b):b((F=F||self).bootstrap={},F.jQuery,F.Popper)}(this,function(F,b,v){"use strict";function A(ke,ye){for(var Q=0;Q<ye.length;Q++){var gt=ye[Q];gt.enumerable=gt.enumerable||!1,gt.configurable=!0,"value"in gt&&(gt.writable=!0),Object.defineProperty(ke,gt.key,gt)}}function l(ke,ye,Q){return ye&&A(ke.prototype,ye),Q&&A(ke,Q),ke}function P(ke){for(var ye=1;ye<arguments.length;ye++){var Q=null!=arguments[ye]?arguments[ye]:{},gt=Object.keys(Q);"function"==typeof Object.getOwnPropertySymbols&&(gt=gt.concat(Object.getOwnPropertySymbols(Q).filter(function(ee){return Object.getOwnPropertyDescriptor(Q,ee).enumerable}))),gt.forEach(function(ee){var we,Ae,Di;Di=Q[Ae=ee],Ae in(we=ke)?Object.defineProperty(we,Ae,{value:Di,enumerable:!0,configurable:!0,writable:!0}):we[Ae]=Di})}return ke}b=b&&b.hasOwnProperty("default")?b.default:b,v=v&&v.hasOwnProperty("default")?v.default:v;var I="transitionend",et={TRANSITION_END:"bsTransitionEnd",getUID:function(ke){for(;ke+=~~(1e6*Math.random()),document.getElementById(ke););return ke},getSelectorFromElement:function(ke){var ye=ke.getAttribute("data-target");if(!ye||"#"===ye){var Q=ke.getAttribute("href");ye=Q&&"#"!==Q?Q.trim():""}try{return document.querySelector(ye)?ye:null}catch(gt){return null}},getTransitionDurationFromElement:function(ke){if(!ke)return 0;var ye=b(ke).css("transition-duration"),Q=b(ke).css("transition-delay"),gt=parseFloat(ye),ee=parseFloat(Q);return gt||ee?(ye=ye.split(",")[0],Q=Q.split(",")[0],1e3*(parseFloat(ye)+parseFloat(Q))):0},reflow:function(ke){return ke.offsetHeight},triggerTransitionEnd:function(ke){b(ke).trigger(I)},supportsTransitionEnd:function(){return Boolean(I)},isElement:function(ke){return(ke[0]||ke).nodeType},typeCheckConfig:function(ke,ye,Q){for(var gt in Q)if(Object.prototype.hasOwnProperty.call(Q,gt)){var ee=Q[gt],we=ye[gt],Ae=we&&et.isElement(we)?"element":{}.toString.call(we).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(ee).test(Ae))throw new Error(ke.toUpperCase()+': Option "'+gt+'" provided type "'+Ae+'" but expected type "'+ee+'".')}},findShadowRoot:function(ke){if(!document.documentElement.attachShadow)return null;if("function"!=typeof ke.getRootNode)return ke instanceof ShadowRoot?ke:ke.parentNode?et.findShadowRoot(ke.parentNode):null;var ye=ke.getRootNode();return ye instanceof ShadowRoot?ye:null}};b.fn.emulateTransitionEnd=function N(ke){var ye=this,Q=!1;return b(this).one(et.TRANSITION_END,function(){Q=!0}),setTimeout(function(){Q||et.triggerTransitionEnd(ye)},ke),this},b.event.special[et.TRANSITION_END]={bindType:I,delegateType:I,handle:function(ke){if(b(ke.target).is(this))return ke.handleObj.handler.apply(this,arguments)}};var Lt="alert",Zt="bs.alert",Mt="."+Zt,Yt=b.fn[Lt],$t={CLOSE:"close"+Mt,CLOSED:"closed"+Mt,CLICK_DATA_API:"click"+Mt+".data-api"},xe=function(){function ke(Q){this._element=Q}var ye=ke.prototype;return ye.close=function(Q){var gt=this._element;Q&&(gt=this._getRootElement(Q)),this._triggerCloseEvent(gt).isDefaultPrevented()||this._removeElement(gt)},ye.dispose=function(){b.removeData(this._element,Zt),this._element=null},ye._getRootElement=function(Q){var gt=et.getSelectorFromElement(Q),ee=!1;return gt&&(ee=document.querySelector(gt)),ee||(ee=b(Q).closest(".alert")[0]),ee},ye._triggerCloseEvent=function(Q){var gt=b.Event($t.CLOSE);return b(Q).trigger(gt),gt},ye._removeElement=function(Q){var gt=this;if(b(Q).removeClass("show"),b(Q).hasClass("fade")){var ee=et.getTransitionDurationFromElement(Q);b(Q).one(et.TRANSITION_END,function(we){return gt._destroyElement(Q,we)}).emulateTransitionEnd(ee)}else this._destroyElement(Q)},ye._destroyElement=function(Q){b(Q).detach().trigger($t.CLOSED).remove()},ke._jQueryInterface=function(Q){return this.each(function(){var gt=b(this),ee=gt.data(Zt);ee||(ee=new ke(this),gt.data(Zt,ee)),"close"===Q&&ee[Q](this)})},ke._handleDismiss=function(Q){return function(gt){gt&&gt.preventDefault(),Q.close(this)}},l(ke,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),ke}();b(document).on($t.CLICK_DATA_API,'[data-dismiss="alert"]',xe._handleDismiss(new xe)),b.fn[Lt]=xe._jQueryInterface,b.fn[Lt].Constructor=xe,b.fn[Lt].noConflict=function(){return b.fn[Lt]=Yt,xe._jQueryInterface};var Ze="button",Ye="bs.button",Ui="."+Ye,q=".data-api",Wi=b.fn[Ze],Ti="active",zt='[data-toggle^="button"]',J={CLICK_DATA_API:"click"+Ui+q,FOCUS_BLUR_DATA_API:"focus"+Ui+q+" blur"+Ui+q},d=function(){function ke(Q){this._element=Q}var ye=ke.prototype;return ye.toggle=function(){var Q=!0,gt=!0,ee=b(this._element).closest('[data-toggle="buttons"]')[0];if(ee){var we=this._element.querySelector('input:not([type="hidden"])');if(we){if("radio"===we.type)if(we.checked&&this._element.classList.contains(Ti))Q=!1;else{var Ae=ee.querySelector(".active");Ae&&b(Ae).removeClass(Ti)}if(Q){if(we.hasAttribute("disabled")||ee.hasAttribute("disabled")||we.classList.contains("disabled")||ee.classList.contains("disabled"))return;we.checked=!this._element.classList.contains(Ti),b(we).trigger("change")}we.focus(),gt=!1}}gt&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(Ti)),Q&&b(this._element).toggleClass(Ti)},ye.dispose=function(){b.removeData(this._element,Ye),this._element=null},ke._jQueryInterface=function(Q){return this.each(function(){var gt=b(this).data(Ye);gt||(gt=new ke(this),b(this).data(Ye,gt)),"toggle"===Q&&gt[Q]()})},l(ke,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),ke}();b(document).on(J.CLICK_DATA_API,zt,function(ke){ke.preventDefault();var ye=ke.target;b(ye).hasClass("btn")||(ye=b(ye).closest(".btn")),d._jQueryInterface.call(b(ye),"toggle")}).on(J.FOCUS_BLUR_DATA_API,zt,function(ke){var ye=b(ke.target).closest(".btn")[0];b(ye).toggleClass("focus",/^focus(in)?$/.test(ke.type))}),b.fn[Ze]=d._jQueryInterface,b.fn[Ze].Constructor=d,b.fn[Ze].noConflict=function(){return b.fn[Ze]=Wi,d._jQueryInterface};var Pt="carousel",Et="bs.carousel",se="."+Et,Ie=".data-api",ei=b.fn[Pt],_e={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Ri={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Gi="next",_i="prev",sr={SLIDE:"slide"+se,SLID:"slid"+se,KEYDOWN:"keydown"+se,MOUSEENTER:"mouseenter"+se,MOUSELEAVE:"mouseleave"+se,TOUCHSTART:"touchstart"+se,TOUCHMOVE:"touchmove"+se,TOUCHEND:"touchend"+se,POINTERDOWN:"pointerdown"+se,POINTERUP:"pointerup"+se,DRAG_START:"dragstart"+se,LOAD_DATA_API:"load"+se+Ie,CLICK_DATA_API:"click"+se+Ie},Ln="active",Me=".active.carousel-item",oi={TOUCH:"touch",PEN:"pen"},Ci=function(){function ke(Q,gt){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(gt),this._element=Q,this._indicatorsElement=this._element.querySelector(".carousel-indicators"),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var ye=ke.prototype;return ye.next=function(){this._isSliding||this._slide(Gi)},ye.nextWhenVisible=function(){!document.hidden&&b(this._element).is(":visible")&&"hidden"!==b(this._element).css("visibility")&&this.next()},ye.prev=function(){this._isSliding||this._slide(_i)},ye.pause=function(Q){Q||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(et.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},ye.cycle=function(Q){Q||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},ye.to=function(Q){var gt=this;this._activeElement=this._element.querySelector(Me);var ee=this._getItemIndex(this._activeElement);if(!(Q>this._items.length-1||Q<0))if(this._isSliding)b(this._element).one(sr.SLID,function(){return gt.to(Q)});else{if(ee===Q)return this.pause(),void this.cycle();this._slide(ee<Q?Gi:_i,this._items[Q])}},ye.dispose=function(){b(this._element).off(se),b.removeData(this._element,Et),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},ye._getConfig=function(Q){return Q=P({},_e,Q),et.typeCheckConfig(Pt,Q,Ri),Q},ye._handleSwipe=function(){var Q=Math.abs(this.touchDeltaX);if(!(Q<=40)){var gt=Q/this.touchDeltaX;0<gt&&this.prev(),gt<0&&this.next()}},ye._addEventListeners=function(){var Q=this;this._config.keyboard&&b(this._element).on(sr.KEYDOWN,function(gt){return Q._keydown(gt)}),"hover"===this._config.pause&&b(this._element).on(sr.MOUSEENTER,function(gt){return Q.pause(gt)}).on(sr.MOUSELEAVE,function(gt){return Q.cycle(gt)}),this._config.touch&&this._addTouchEventListeners()},ye._addTouchEventListeners=function(){var Q=this;if(this._touchSupported){var gt=function(we){Q._pointerEvent&&oi[we.originalEvent.pointerType.toUpperCase()]?Q.touchStartX=we.originalEvent.clientX:Q._pointerEvent||(Q.touchStartX=we.originalEvent.touches[0].clientX)},ee=function(we){Q._pointerEvent&&oi[we.originalEvent.pointerType.toUpperCase()]&&(Q.touchDeltaX=we.originalEvent.clientX-Q.touchStartX),Q._handleSwipe(),"hover"===Q._config.pause&&(Q.pause(),Q.touchTimeout&&clearTimeout(Q.touchTimeout),Q.touchTimeout=setTimeout(function(Ae){return Q.cycle(Ae)},500+Q._config.interval))};b(this._element.querySelectorAll(".carousel-item img")).on(sr.DRAG_START,function(we){return we.preventDefault()}),this._pointerEvent?(b(this._element).on(sr.POINTERDOWN,function(we){return gt(we)}),b(this._element).on(sr.POINTERUP,function(we){return ee(we)}),this._element.classList.add("pointer-event")):(b(this._element).on(sr.TOUCHSTART,function(we){return gt(we)}),b(this._element).on(sr.TOUCHMOVE,function(we){var Ae;Q.touchDeltaX=(Ae=we).originalEvent.touches&&1<Ae.originalEvent.touches.length?0:Ae.originalEvent.touches[0].clientX-Q.touchStartX}),b(this._element).on(sr.TOUCHEND,function(we){return ee(we)}))}},ye._keydown=function(Q){if(!/input|textarea/i.test(Q.target.tagName))switch(Q.which){case 37:Q.preventDefault(),this.prev();break;case 39:Q.preventDefault(),this.next()}},ye._getItemIndex=function(Q){return this._items=Q&&Q.parentNode?[].slice.call(Q.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(Q)},ye._getItemByDirection=function(Q,gt){var ee=Q===Gi,we=Q===_i,Ae=this._getItemIndex(gt);if((we&&0===Ae||ee&&Ae===this._items.length-1)&&!this._config.wrap)return gt;var zr=(Ae+(Q===_i?-1:1))%this._items.length;return-1===zr?this._items[this._items.length-1]:this._items[zr]},ye._triggerSlideEvent=function(Q,gt){var ee=this._getItemIndex(Q),we=this._getItemIndex(this._element.querySelector(Me)),Ae=b.Event(sr.SLIDE,{relatedTarget:Q,direction:gt,from:we,to:ee});return b(this._element).trigger(Ae),Ae},ye._setActiveIndicatorElement=function(Q){if(this._indicatorsElement){var gt=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));b(gt).removeClass(Ln);var ee=this._indicatorsElement.children[this._getItemIndex(Q)];ee&&b(ee).addClass(Ln)}},ye._slide=function(Q,gt){var ee,we,Ae,Di=this,zr=this._element.querySelector(Me),Rn=this._getItemIndex(zr),On=gt||zr&&this._getItemByDirection(Q,zr),$o=this._getItemIndex(On),_n=Boolean(this._interval);if(Ae=Q===Gi?(ee="carousel-item-left",we="carousel-item-next","left"):(ee="carousel-item-right",we="carousel-item-prev","right"),On&&b(On).hasClass(Ln))this._isSliding=!1;else if(!this._triggerSlideEvent(On,Ae).isDefaultPrevented()&&zr&&On){this._isSliding=!0,_n&&this.pause(),this._setActiveIndicatorElement(On);var Ko=b.Event(sr.SLID,{relatedTarget:On,direction:Ae,from:Rn,to:$o});if(b(this._element).hasClass("slide")){b(On).addClass(we),et.reflow(On),b(zr).addClass(ee),b(On).addClass(ee);var or=parseInt(On.getAttribute("data-interval"),10);this._config.interval=or?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,or):this._config.defaultInterval||this._config.interval;var fa=et.getTransitionDurationFromElement(zr);b(zr).one(et.TRANSITION_END,function(){b(On).removeClass(ee+" "+we).addClass(Ln),b(zr).removeClass(Ln+" "+we+" "+ee),Di._isSliding=!1,setTimeout(function(){return b(Di._element).trigger(Ko)},0)}).emulateTransitionEnd(fa)}else b(zr).removeClass(Ln),b(On).addClass(Ln),this._isSliding=!1,b(this._element).trigger(Ko);_n&&this.cycle()}},ke._jQueryInterface=function(Q){return this.each(function(){var gt=b(this).data(Et),ee=P({},_e,b(this).data());"object"==typeof Q&&(ee=P({},ee,Q));var we="string"==typeof Q?Q:ee.slide;if(gt||(gt=new ke(this,ee),b(this).data(Et,gt)),"number"==typeof Q)gt.to(Q);else if("string"==typeof we){if(void 0===gt[we])throw new TypeError('No method named "'+we+'"');gt[we]()}else ee.interval&&ee.ride&&(gt.pause(),gt.cycle())})},ke._dataApiClickHandler=function(Q){var gt=et.getSelectorFromElement(this);if(gt){var ee=b(gt)[0];if(ee&&b(ee).hasClass("carousel")){var we=P({},b(ee).data(),b(this).data()),Ae=this.getAttribute("data-slide-to");Ae&&(we.interval=!1),ke._jQueryInterface.call(b(ee),we),Ae&&b(ee).data(Et).to(Ae),Q.preventDefault()}}},l(ke,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return _e}}]),ke}();b(document).on(sr.CLICK_DATA_API,"[data-slide], [data-slide-to]",Ci._dataApiClickHandler),b(window).on(sr.LOAD_DATA_API,function(){for(var ke=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),ye=0,Q=ke.length;ye<Q;ye++){var gt=b(ke[ye]);Ci._jQueryInterface.call(gt,gt.data())}}),b.fn[Pt]=Ci._jQueryInterface,b.fn[Pt].Constructor=Ci,b.fn[Pt].noConflict=function(){return b.fn[Pt]=ei,Ci._jQueryInterface};var ar="collapse",tr="bs.collapse",Qr="."+tr,vn=b.fn[ar],Xr={toggle:!0,parent:""},dn={toggle:"boolean",parent:"(string|element)"},xt={SHOW:"show"+Qr,SHOWN:"shown"+Qr,HIDE:"hide"+Qr,HIDDEN:"hidden"+Qr,CLICK_DATA_API:"click"+Qr+".data-api"},pt="show",Wt="collapse",ue="collapsing",We="collapsed",Fi='[data-toggle="collapse"]',Ni=function(){function ke(Q,gt){this._isTransitioning=!1,this._element=Q,this._config=this._getConfig(gt),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+Q.id+'"],[data-toggle="collapse"][data-target="#'+Q.id+'"]'));for(var ee=[].slice.call(document.querySelectorAll(Fi)),we=0,Ae=ee.length;we<Ae;we++){var Di=ee[we],zr=et.getSelectorFromElement(Di),Rn=[].slice.call(document.querySelectorAll(zr)).filter(function(On){return On===Q});null!==zr&&0<Rn.length&&(this._selector=zr,this._triggerArray.push(Di))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var ye=ke.prototype;return ye.toggle=function(){b(this._element).hasClass(pt)?this.hide():this.show()},ye.show=function(){var Q,gt,ee=this;if(!(this._isTransitioning||b(this._element).hasClass(pt)||(this._parent&&0===(Q=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter(function(Rn){return"string"==typeof ee._config.parent?Rn.getAttribute("data-parent")===ee._config.parent:Rn.classList.contains(Wt)})).length&&(Q=null),Q&&(gt=b(Q).not(this._selector).data(tr))&&gt._isTransitioning))){var we=b.Event(xt.SHOW);if(b(this._element).trigger(we),!we.isDefaultPrevented()){Q&&(ke._jQueryInterface.call(b(Q).not(this._selector),"hide"),gt||b(Q).data(tr,null));var Ae=this._getDimension();b(this._element).removeClass(Wt).addClass(ue),this._element.style[Ae]=0,this._triggerArray.length&&b(this._triggerArray).removeClass(We).attr("aria-expanded",!0),this.setTransitioning(!0);var Di="scroll"+(Ae[0].toUpperCase()+Ae.slice(1)),zr=et.getTransitionDurationFromElement(this._element);b(this._element).one(et.TRANSITION_END,function(){b(ee._element).removeClass(ue).addClass(Wt).addClass(pt),ee._element.style[Ae]="",ee.setTransitioning(!1),b(ee._element).trigger(xt.SHOWN)}).emulateTransitionEnd(zr),this._element.style[Ae]=this._element[Di]+"px"}}},ye.hide=function(){var Q=this;if(!this._isTransitioning&&b(this._element).hasClass(pt)){var gt=b.Event(xt.HIDE);if(b(this._element).trigger(gt),!gt.isDefaultPrevented()){var ee=this._getDimension();this._element.style[ee]=this._element.getBoundingClientRect()[ee]+"px",et.reflow(this._element),b(this._element).addClass(ue).removeClass(Wt).removeClass(pt);var we=this._triggerArray.length;if(0<we)for(var Ae=0;Ae<we;Ae++){var Di=this._triggerArray[Ae],zr=et.getSelectorFromElement(Di);null!==zr&&(b([].slice.call(document.querySelectorAll(zr))).hasClass(pt)||b(Di).addClass(We).attr("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[ee]="";var Rn=et.getTransitionDurationFromElement(this._element);b(this._element).one(et.TRANSITION_END,function(){Q.setTransitioning(!1),b(Q._element).removeClass(ue).addClass(Wt).trigger(xt.HIDDEN)}).emulateTransitionEnd(Rn)}}},ye.setTransitioning=function(Q){this._isTransitioning=Q},ye.dispose=function(){b.removeData(this._element,tr),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},ye._getConfig=function(Q){return(Q=P({},Xr,Q)).toggle=Boolean(Q.toggle),et.typeCheckConfig(ar,Q,dn),Q},ye._getDimension=function(){return b(this._element).hasClass("width")?"width":"height"},ye._getParent=function(){var Q,gt=this;et.isElement(this._config.parent)?(Q=this._config.parent,void 0!==this._config.parent.jquery&&(Q=this._config.parent[0])):Q=document.querySelector(this._config.parent);var we=[].slice.call(Q.querySelectorAll('[data-toggle="collapse"][data-parent="'+this._config.parent+'"]'));return b(we).each(function(Ae,Di){gt._addAriaAndCollapsedClass(ke._getTargetFromElement(Di),[Di])}),Q},ye._addAriaAndCollapsedClass=function(Q,gt){var ee=b(Q).hasClass(pt);gt.length&&b(gt).toggleClass(We,!ee).attr("aria-expanded",ee)},ke._getTargetFromElement=function(Q){var gt=et.getSelectorFromElement(Q);return gt?document.querySelector(gt):null},ke._jQueryInterface=function(Q){return this.each(function(){var gt=b(this),ee=gt.data(tr),we=P({},Xr,gt.data(),"object"==typeof Q&&Q?Q:{});if(!ee&&we.toggle&&/show|hide/.test(Q)&&(we.toggle=!1),ee||(ee=new ke(this,we),gt.data(tr,ee)),"string"==typeof Q){if(void 0===ee[Q])throw new TypeError('No method named "'+Q+'"');ee[Q]()}})},l(ke,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Xr}}]),ke}();b(document).on(xt.CLICK_DATA_API,Fi,function(ke){"A"===ke.currentTarget.tagName&&ke.preventDefault();var ye=b(this),Q=et.getSelectorFromElement(this),gt=[].slice.call(document.querySelectorAll(Q));b(gt).each(function(){var ee=b(this),we=ee.data(tr)?"toggle":ye.data();Ni._jQueryInterface.call(ee,we)})}),b.fn[ar]=Ni._jQueryInterface,b.fn[ar].Constructor=Ni,b.fn[ar].noConflict=function(){return b.fn[ar]=vn,Ni._jQueryInterface};var Ii="dropdown",wi="bs.dropdown",Li="."+wi,cr=".data-api",Or=b.fn[Ii],Mi=new RegExp("38|40|27"),qi={HIDE:"hide"+Li,HIDDEN:"hidden"+Li,SHOW:"show"+Li,SHOWN:"shown"+Li,CLICK:"click"+Li,CLICK_DATA_API:"click"+Li+cr,KEYDOWN_DATA_API:"keydown"+Li+cr,KEYUP_DATA_API:"keyup"+Li+cr},_r="disabled",ji="show",E="dropdown-menu-right",j='[data-toggle="dropdown"]',ct=".dropdown-menu",he={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},qe={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},Be=function(){function ke(Q,gt){this._element=Q,this._popper=null,this._config=this._getConfig(gt),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var ye=ke.prototype;return ye.toggle=function(){if(!this._element.disabled&&!b(this._element).hasClass(_r)){var Q=ke._getParentFromElement(this._element),gt=b(this._menu).hasClass(ji);if(ke._clearMenus(),!gt){var ee={relatedTarget:this._element},we=b.Event(qi.SHOW,ee);if(b(Q).trigger(we),!we.isDefaultPrevented()){if(!this._inNavbar){if(void 0===v)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var Ae=this._element;"parent"===this._config.reference?Ae=Q:et.isElement(this._config.reference)&&(Ae=this._config.reference,void 0!==this._config.reference.jquery&&(Ae=this._config.reference[0])),"scrollParent"!==this._config.boundary&&b(Q).addClass("position-static"),this._popper=new v(Ae,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===b(Q).closest(".navbar-nav").length&&b(document.body).children().on("mouseover",null,b.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),b(this._menu).toggleClass(ji),b(Q).toggleClass(ji).trigger(b.Event(qi.SHOWN,ee))}}}},ye.show=function(){if(!(this._element.disabled||b(this._element).hasClass(_r)||b(this._menu).hasClass(ji))){var Q={relatedTarget:this._element},gt=b.Event(qi.SHOW,Q),ee=ke._getParentFromElement(this._element);b(ee).trigger(gt),gt.isDefaultPrevented()||(b(this._menu).toggleClass(ji),b(ee).toggleClass(ji).trigger(b.Event(qi.SHOWN,Q)))}},ye.hide=function(){if(!this._element.disabled&&!b(this._element).hasClass(_r)&&b(this._menu).hasClass(ji)){var Q={relatedTarget:this._element},gt=b.Event(qi.HIDE,Q),ee=ke._getParentFromElement(this._element);b(ee).trigger(gt),gt.isDefaultPrevented()||(b(this._menu).toggleClass(ji),b(ee).toggleClass(ji).trigger(b.Event(qi.HIDDEN,Q)))}},ye.dispose=function(){b.removeData(this._element,wi),b(this._element).off(Li),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},ye.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},ye._addEventListeners=function(){var Q=this;b(this._element).on(qi.CLICK,function(gt){gt.preventDefault(),gt.stopPropagation(),Q.toggle()})},ye._getConfig=function(Q){return Q=P({},this.constructor.Default,b(this._element).data(),Q),et.typeCheckConfig(Ii,Q,this.constructor.DefaultType),Q},ye._getMenuElement=function(){if(!this._menu){var Q=ke._getParentFromElement(this._element);Q&&(this._menu=Q.querySelector(ct))}return this._menu},ye._getPlacement=function(){var Q=b(this._element.parentNode),gt="bottom-start";return Q.hasClass("dropup")?(gt="top-start",b(this._menu).hasClass(E)&&(gt="top-end")):Q.hasClass("dropright")?gt="right-start":Q.hasClass("dropleft")?gt="left-start":b(this._menu).hasClass(E)&&(gt="bottom-end"),gt},ye._detectNavbar=function(){return 0<b(this._element).closest(".navbar").length},ye._getOffset=function(){var Q=this,gt={};return"function"==typeof this._config.offset?gt.fn=function(ee){return ee.offsets=P({},ee.offsets,Q._config.offset(ee.offsets,Q._element)||{}),ee}:gt.offset=this._config.offset,gt},ye._getPopperConfig=function(){var Q={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(Q.modifiers.applyStyle={enabled:!1}),Q},ke._jQueryInterface=function(Q){return this.each(function(){var gt=b(this).data(wi);if(gt||(gt=new ke(this,"object"==typeof Q?Q:null),b(this).data(wi,gt)),"string"==typeof Q){if(void 0===gt[Q])throw new TypeError('No method named "'+Q+'"');gt[Q]()}})},ke._clearMenus=function(Q){if(!Q||3!==Q.which&&("keyup"!==Q.type||9===Q.which))for(var gt=[].slice.call(document.querySelectorAll(j)),ee=0,we=gt.length;ee<we;ee++){var Ae=ke._getParentFromElement(gt[ee]),Di=b(gt[ee]).data(wi),zr={relatedTarget:gt[ee]};if(Q&&"click"===Q.type&&(zr.clickEvent=Q),Di){var Rn=Di._menu;if(b(Ae).hasClass(ji)&&!(Q&&("click"===Q.type&&/input|textarea/i.test(Q.target.tagName)||"keyup"===Q.type&&9===Q.which)&&b.contains(Ae,Q.target))){var On=b.Event(qi.HIDE,zr);b(Ae).trigger(On),On.isDefaultPrevented()||("ontouchstart"in document.documentElement&&b(document.body).children().off("mouseover",null,b.noop),gt[ee].setAttribute("aria-expanded","false"),b(Rn).removeClass(ji),b(Ae).removeClass(ji).trigger(b.Event(qi.HIDDEN,zr)))}}}},ke._getParentFromElement=function(Q){var gt,ee=et.getSelectorFromElement(Q);return ee&&(gt=document.querySelector(ee)),gt||Q.parentNode},ke._dataApiKeydownHandler=function(Q){if((/input|textarea/i.test(Q.target.tagName)?!(32===Q.which||27!==Q.which&&(40!==Q.which&&38!==Q.which||b(Q.target).closest(ct).length)):Mi.test(Q.which))&&(Q.preventDefault(),Q.stopPropagation(),!this.disabled&&!b(this).hasClass(_r))){var gt=ke._getParentFromElement(this),ee=b(gt).hasClass(ji);if(ee&&(!ee||27!==Q.which&&32!==Q.which)){var we=[].slice.call(gt.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"));if(0!==we.length){var Ae=we.indexOf(Q.target);38===Q.which&&0<Ae&&Ae--,40===Q.which&&Ae<we.length-1&&Ae++,Ae<0&&(Ae=0),we[Ae].focus()}}else{if(27===Q.which){var Di=gt.querySelector(j);b(Di).trigger("focus")}b(this).trigger("click")}}},l(ke,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return he}},{key:"DefaultType",get:function(){return qe}}]),ke}();b(document).on(qi.KEYDOWN_DATA_API,j,Be._dataApiKeydownHandler).on(qi.KEYDOWN_DATA_API,ct,Be._dataApiKeydownHandler).on(qi.CLICK_DATA_API+" "+qi.KEYUP_DATA_API,Be._clearMenus).on(qi.CLICK_DATA_API,j,function(ke){ke.preventDefault(),ke.stopPropagation(),Be._jQueryInterface.call(b(this),"toggle")}).on(qi.CLICK_DATA_API,".dropdown form",function(ke){ke.stopPropagation()}),b.fn[Ii]=Be._jQueryInterface,b.fn[Ii].Constructor=Be,b.fn[Ii].noConflict=function(){return b.fn[Ii]=Or,Be._jQueryInterface};var ze="modal",ai="bs.modal",Qe="."+ai,di=b.fn[ze],Ei={backdrop:!0,keyboard:!0,focus:!0,show:!0},Cr={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Ue={HIDE:"hide"+Qe,HIDDEN:"hidden"+Qe,SHOW:"show"+Qe,SHOWN:"shown"+Qe,FOCUSIN:"focusin"+Qe,RESIZE:"resize"+Qe,CLICK_DISMISS:"click.dismiss"+Qe,KEYDOWN_DISMISS:"keydown.dismiss"+Qe,MOUSEUP_DISMISS:"mouseup.dismiss"+Qe,MOUSEDOWN_DISMISS:"mousedown.dismiss"+Qe,CLICK_DATA_API:"click"+Qe+".data-api"},Rr="modal-open",In="fade",Xi="show",an=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",qn=".sticky-top",Zn=function(){function ke(Q,gt){this._config=this._getConfig(gt),this._element=Q,this._dialog=Q.querySelector(".modal-dialog"),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var ye=ke.prototype;return ye.toggle=function(Q){return this._isShown?this.hide():this.show(Q)},ye.show=function(Q){var gt=this;if(!this._isShown&&!this._isTransitioning){b(this._element).hasClass(In)&&(this._isTransitioning=!0);var ee=b.Event(Ue.SHOW,{relatedTarget:Q});b(this._element).trigger(ee),this._isShown||ee.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),b(this._element).on(Ue.CLICK_DISMISS,'[data-dismiss="modal"]',function(we){return gt.hide(we)}),b(this._dialog).on(Ue.MOUSEDOWN_DISMISS,function(){b(gt._element).one(Ue.MOUSEUP_DISMISS,function(we){b(we.target).is(gt._element)&&(gt._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return gt._showElement(Q)}))}},ye.hide=function(Q){var gt=this;if(Q&&Q.preventDefault(),this._isShown&&!this._isTransitioning){var ee=b.Event(Ue.HIDE);if(b(this._element).trigger(ee),this._isShown&&!ee.isDefaultPrevented()){this._isShown=!1;var we=b(this._element).hasClass(In);if(we&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),b(document).off(Ue.FOCUSIN),b(this._element).removeClass(Xi),b(this._element).off(Ue.CLICK_DISMISS),b(this._dialog).off(Ue.MOUSEDOWN_DISMISS),we){var Ae=et.getTransitionDurationFromElement(this._element);b(this._element).one(et.TRANSITION_END,function(Di){return gt._hideModal(Di)}).emulateTransitionEnd(Ae)}else this._hideModal()}}},ye.dispose=function(){[window,this._element,this._dialog].forEach(function(Q){return b(Q).off(Qe)}),b(document).off(Ue.FOCUSIN),b.removeData(this._element,ai),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},ye.handleUpdate=function(){this._adjustDialog()},ye._getConfig=function(Q){return Q=P({},Ei,Q),et.typeCheckConfig(ze,Q,Cr),Q},ye._showElement=function(Q){var gt=this,ee=b(this._element).hasClass(In);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),b(this._dialog).hasClass("modal-dialog-scrollable")?this._dialog.querySelector(".modal-body").scrollTop=0:this._element.scrollTop=0,ee&&et.reflow(this._element),b(this._element).addClass(Xi),this._config.focus&&this._enforceFocus();var we=b.Event(Ue.SHOWN,{relatedTarget:Q}),Ae=function(){gt._config.focus&&gt._element.focus(),gt._isTransitioning=!1,b(gt._element).trigger(we)};if(ee){var Di=et.getTransitionDurationFromElement(this._dialog);b(this._dialog).one(et.TRANSITION_END,Ae).emulateTransitionEnd(Di)}else Ae()},ye._enforceFocus=function(){var Q=this;b(document).off(Ue.FOCUSIN).on(Ue.FOCUSIN,function(gt){document!==gt.target&&Q._element!==gt.target&&0===b(Q._element).has(gt.target).length&&Q._element.focus()})},ye._setEscapeEvent=function(){var Q=this;this._isShown&&this._config.keyboard?b(this._element).on(Ue.KEYDOWN_DISMISS,function(gt){27===gt.which&&(gt.preventDefault(),Q.hide())}):this._isShown||b(this._element).off(Ue.KEYDOWN_DISMISS)},ye._setResizeEvent=function(){var Q=this;this._isShown?b(window).on(Ue.RESIZE,function(gt){return Q.handleUpdate(gt)}):b(window).off(Ue.RESIZE)},ye._hideModal=function(){var Q=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){b(document.body).removeClass(Rr),Q._resetAdjustments(),Q._resetScrollbar(),b(Q._element).trigger(Ue.HIDDEN)})},ye._removeBackdrop=function(){this._backdrop&&(b(this._backdrop).remove(),this._backdrop=null)},ye._showBackdrop=function(Q){var gt=this,ee=b(this._element).hasClass(In)?In:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",ee&&this._backdrop.classList.add(ee),b(this._backdrop).appendTo(document.body),b(this._element).on(Ue.CLICK_DISMISS,function(zr){gt._ignoreBackdropClick?gt._ignoreBackdropClick=!1:zr.target===zr.currentTarget&&("static"===gt._config.backdrop?gt._element.focus():gt.hide())}),ee&&et.reflow(this._backdrop),b(this._backdrop).addClass(Xi),!Q)return;if(!ee)return void Q();var we=et.getTransitionDurationFromElement(this._backdrop);b(this._backdrop).one(et.TRANSITION_END,Q).emulateTransitionEnd(we)}else if(!this._isShown&&this._backdrop){b(this._backdrop).removeClass(Xi);var Ae=function(){gt._removeBackdrop(),Q&&Q()};if(b(this._element).hasClass(In)){var Di=et.getTransitionDurationFromElement(this._backdrop);b(this._backdrop).one(et.TRANSITION_END,Ae).emulateTransitionEnd(Di)}else Ae()}else Q&&Q()},ye._adjustDialog=function(){var Q=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&Q&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!Q&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},ye._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},ye._checkScrollbar=function(){var Q=document.body.getBoundingClientRect();this._isBodyOverflowing=Q.left+Q.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},ye._setScrollbar=function(){var Q=this;if(this._isBodyOverflowing){var gt=[].slice.call(document.querySelectorAll(an)),ee=[].slice.call(document.querySelectorAll(qn));b(gt).each(function(Di,zr){var Rn=zr.style.paddingRight,On=b(zr).css("padding-right");b(zr).data("padding-right",Rn).css("padding-right",parseFloat(On)+Q._scrollbarWidth+"px")}),b(ee).each(function(Di,zr){var Rn=zr.style.marginRight,On=b(zr).css("margin-right");b(zr).data("margin-right",Rn).css("margin-right",parseFloat(On)-Q._scrollbarWidth+"px")});var we=document.body.style.paddingRight,Ae=b(document.body).css("padding-right");b(document.body).data("padding-right",we).css("padding-right",parseFloat(Ae)+this._scrollbarWidth+"px")}b(document.body).addClass(Rr)},ye._resetScrollbar=function(){var Q=[].slice.call(document.querySelectorAll(an));b(Q).each(function(we,Ae){var Di=b(Ae).data("padding-right");b(Ae).removeData("padding-right"),Ae.style.paddingRight=Di||""});var gt=[].slice.call(document.querySelectorAll(""+qn));b(gt).each(function(we,Ae){var Di=b(Ae).data("margin-right");void 0!==Di&&b(Ae).css("margin-right",Di).removeData("margin-right")});var ee=b(document.body).data("padding-right");b(document.body).removeData("padding-right"),document.body.style.paddingRight=ee||""},ye._getScrollbarWidth=function(){var Q=document.createElement("div");Q.className="modal-scrollbar-measure",document.body.appendChild(Q);var gt=Q.getBoundingClientRect().width-Q.clientWidth;return document.body.removeChild(Q),gt},ke._jQueryInterface=function(Q,gt){return this.each(function(){var ee=b(this).data(ai),we=P({},Ei,b(this).data(),"object"==typeof Q&&Q?Q:{});if(ee||(ee=new ke(this,we),b(this).data(ai,ee)),"string"==typeof Q){if(void 0===ee[Q])throw new TypeError('No method named "'+Q+'"');ee[Q](gt)}else we.show&&ee.show(gt)})},l(ke,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Ei}}]),ke}();b(document).on(Ue.CLICK_DATA_API,'[data-toggle="modal"]',function(ke){var ye,Q=this,gt=et.getSelectorFromElement(this);gt&&(ye=document.querySelector(gt));var ee=b(ye).data(ai)?"toggle":P({},b(ye).data(),b(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||ke.preventDefault();var we=b(ye).one(Ue.SHOW,function(Ae){Ae.isDefaultPrevented()||we.one(Ue.HIDDEN,function(){b(Q).is(":visible")&&Q.focus()})});Zn._jQueryInterface.call(b(ye),ee,this)}),b.fn[ze]=Zn._jQueryInterface,b.fn[ze].Constructor=Zn,b.fn[ze].noConflict=function(){return b.fn[ze]=di,Zn._jQueryInterface};var ns=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Ls=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,qo=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function pr(ke,ye,Q){if(0===ke.length)return ke;if(Q&&"function"==typeof Q)return Q(ke);for(var gt=(new window.DOMParser).parseFromString(ke,"text/html"),ee=Object.keys(ye),we=[].slice.call(gt.body.querySelectorAll("*")),Ae=function(Rn,On){var $o=we[Rn],_n=$o.nodeName.toLowerCase();if(-1===ee.indexOf($o.nodeName.toLowerCase()))return $o.parentNode.removeChild($o),"continue";var Ko=[].slice.call($o.attributes),or=[].concat(ye["*"]||[],ye[_n]||[]);Ko.forEach(function(fa){(function(zo,la){var ur=zo.nodeName.toLowerCase();if(-1!==la.indexOf(ur))return-1===ns.indexOf(ur)||Boolean(zo.nodeValue.match(Ls)||zo.nodeValue.match(qo));for(var Ir=la.filter(function(Qt){return Qt instanceof RegExp}),Ro=0,kt=Ir.length;Ro<kt;Ro++)if(ur.match(Ir[Ro]))return!0;return!1})(fa,or)||$o.removeAttribute(fa.nodeName)})},Di=0,zr=we.length;Di<zr;Di++)Ae(Di);return gt.body.innerHTML}var xn="tooltip",Ea="bs.tooltip",lo="."+Ea,os=b.fn[xn],Do="bs-tooltip",Yo=new RegExp("(^|\\s)"+Do+"\\S+","g"),as=["sanitize","whiteList","sanitizeFn"],Lo={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},$r={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},ca={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},Ba="show",Os={HIDE:"hide"+lo,HIDDEN:"hidden"+lo,SHOW:"show"+lo,SHOWN:"shown"+lo,INSERTED:"inserted"+lo,CLICK:"click"+lo,FOCUSIN:"focusin"+lo,FOCUSOUT:"focusout"+lo,MOUSEENTER:"mouseenter"+lo,MOUSELEAVE:"mouseleave"+lo},Ia="fade",ko="show",ha="hover",Ms="focus",uo=function(){function ke(Q,gt){if(void 0===v)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=Q,this.config=this._getConfig(gt),this.tip=null,this._setListeners()}var ye=ke.prototype;return ye.enable=function(){this._isEnabled=!0},ye.disable=function(){this._isEnabled=!1},ye.toggleEnabled=function(){this._isEnabled=!this._isEnabled},ye.toggle=function(Q){if(this._isEnabled)if(Q){var gt=this.constructor.DATA_KEY,ee=b(Q.currentTarget).data(gt);ee||(ee=new this.constructor(Q.currentTarget,this._getDelegateConfig()),b(Q.currentTarget).data(gt,ee)),ee._activeTrigger.click=!ee._activeTrigger.click,ee._isWithActiveTrigger()?ee._enter(null,ee):ee._leave(null,ee)}else{if(b(this.getTipElement()).hasClass(ko))return void this._leave(null,this);this._enter(null,this)}},ye.dispose=function(){clearTimeout(this._timeout),b.removeData(this.element,this.constructor.DATA_KEY),b(this.element).off(this.constructor.EVENT_KEY),b(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&b(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},ye.show=function(){var Q=this;if("none"===b(this.element).css("display"))throw new Error("Please use show on visible elements");var gt=b.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){b(this.element).trigger(gt);var ee=et.findShadowRoot(this.element),we=b.contains(null!==ee?ee:this.element.ownerDocument.documentElement,this.element);if(gt.isDefaultPrevented()||!we)return;var Ae=this.getTipElement(),Di=et.getUID(this.constructor.NAME);Ae.setAttribute("id",Di),this.element.setAttribute("aria-describedby",Di),this.setContent(),this.config.animation&&b(Ae).addClass(Ia);var zr="function"==typeof this.config.placement?this.config.placement.call(this,Ae,this.element):this.config.placement,Rn=this._getAttachment(zr);this.addAttachmentClass(Rn);var On=this._getContainer();b(Ae).data(this.constructor.DATA_KEY,this),b.contains(this.element.ownerDocument.documentElement,this.tip)||b(Ae).appendTo(On),b(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new v(this.element,Ae,{placement:Rn,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(Ko){Ko.originalPlacement!==Ko.placement&&Q._handlePopperPlacementChange(Ko)},onUpdate:function(Ko){return Q._handlePopperPlacementChange(Ko)}}),b(Ae).addClass(ko),"ontouchstart"in document.documentElement&&b(document.body).children().on("mouseover",null,b.noop);var $o=function(){Q.config.animation&&Q._fixTransition();var Ko=Q._hoverState;Q._hoverState=null,b(Q.element).trigger(Q.constructor.Event.SHOWN),"out"===Ko&&Q._leave(null,Q)};if(b(this.tip).hasClass(Ia)){var _n=et.getTransitionDurationFromElement(this.tip);b(this.tip).one(et.TRANSITION_END,$o).emulateTransitionEnd(_n)}else $o()}},ye.hide=function(Q){var gt=this,ee=this.getTipElement(),we=b.Event(this.constructor.Event.HIDE),Ae=function(){gt._hoverState!==Ba&&ee.parentNode&&ee.parentNode.removeChild(ee),gt._cleanTipClass(),gt.element.removeAttribute("aria-describedby"),b(gt.element).trigger(gt.constructor.Event.HIDDEN),null!==gt._popper&&gt._popper.destroy(),Q&&Q()};if(b(this.element).trigger(we),!we.isDefaultPrevented()){if(b(ee).removeClass(ko),"ontouchstart"in document.documentElement&&b(document.body).children().off("mouseover",null,b.noop),this._activeTrigger.click=!1,this._activeTrigger[Ms]=!1,this._activeTrigger[ha]=!1,b(this.tip).hasClass(Ia)){var Di=et.getTransitionDurationFromElement(ee);b(ee).one(et.TRANSITION_END,Ae).emulateTransitionEnd(Di)}else Ae();this._hoverState=""}},ye.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},ye.isWithContent=function(){return Boolean(this.getTitle())},ye.addAttachmentClass=function(Q){b(this.getTipElement()).addClass(Do+"-"+Q)},ye.getTipElement=function(){return this.tip=this.tip||b(this.config.template)[0],this.tip},ye.setContent=function(){var Q=this.getTipElement();this.setElementContent(b(Q.querySelectorAll(".tooltip-inner")),this.getTitle()),b(Q).removeClass(Ia+" "+ko)},ye.setElementContent=function(Q,gt){"object"!=typeof gt||!gt.nodeType&&!gt.jquery?this.config.html?(this.config.sanitize&&(gt=pr(gt,this.config.whiteList,this.config.sanitizeFn)),Q.html(gt)):Q.text(gt):this.config.html?b(gt).parent().is(Q)||Q.empty().append(gt):Q.text(b(gt).text())},ye.getTitle=function(){var Q=this.element.getAttribute("data-original-title");return Q||(Q="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),Q},ye._getOffset=function(){var Q=this,gt={};return"function"==typeof this.config.offset?gt.fn=function(ee){return ee.offsets=P({},ee.offsets,Q.config.offset(ee.offsets,Q.element)||{}),ee}:gt.offset=this.config.offset,gt},ye._getContainer=function(){return!1===this.config.container?document.body:et.isElement(this.config.container)?b(this.config.container):b(document).find(this.config.container)},ye._getAttachment=function(Q){return $r[Q.toUpperCase()]},ye._setListeners=function(){var Q=this;this.config.trigger.split(" ").forEach(function(gt){if("click"===gt)b(Q.element).on(Q.constructor.Event.CLICK,Q.config.selector,function(Ae){return Q.toggle(Ae)});else if("manual"!==gt){var ee=gt===ha?Q.constructor.Event.MOUSEENTER:Q.constructor.Event.FOCUSIN,we=gt===ha?Q.constructor.Event.MOUSELEAVE:Q.constructor.Event.FOCUSOUT;b(Q.element).on(ee,Q.config.selector,function(Ae){return Q._enter(Ae)}).on(we,Q.config.selector,function(Ae){return Q._leave(Ae)})}}),b(this.element).closest(".modal").on("hide.bs.modal",function(){Q.element&&Q.hide()}),this.config.selector?this.config=P({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},ye._fixTitle=function(){var Q=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==Q)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},ye._enter=function(Q,gt){var ee=this.constructor.DATA_KEY;(gt=gt||b(Q.currentTarget).data(ee))||(gt=new this.constructor(Q.currentTarget,this._getDelegateConfig()),b(Q.currentTarget).data(ee,gt)),Q&&(gt._activeTrigger["focusin"===Q.type?Ms:ha]=!0),b(gt.getTipElement()).hasClass(ko)||gt._hoverState===Ba?gt._hoverState=Ba:(clearTimeout(gt._timeout),gt._hoverState=Ba,gt.config.delay&&gt.config.delay.show?gt._timeout=setTimeout(function(){gt._hoverState===Ba&&gt.show()},gt.config.delay.show):gt.show())},ye._leave=function(Q,gt){var ee=this.constructor.DATA_KEY;(gt=gt||b(Q.currentTarget).data(ee))||(gt=new this.constructor(Q.currentTarget,this._getDelegateConfig()),b(Q.currentTarget).data(ee,gt)),Q&&(gt._activeTrigger["focusout"===Q.type?Ms:ha]=!1),gt._isWithActiveTrigger()||(clearTimeout(gt._timeout),gt._hoverState="out",gt.config.delay&&gt.config.delay.hide?gt._timeout=setTimeout(function(){"out"===gt._hoverState&&gt.hide()},gt.config.delay.hide):gt.hide())},ye._isWithActiveTrigger=function(){for(var Q in this._activeTrigger)if(this._activeTrigger[Q])return!0;return!1},ye._getConfig=function(Q){var gt=b(this.element).data();return Object.keys(gt).forEach(function(ee){-1!==as.indexOf(ee)&&delete gt[ee]}),"number"==typeof(Q=P({},this.constructor.Default,gt,"object"==typeof Q&&Q?Q:{})).delay&&(Q.delay={show:Q.delay,hide:Q.delay}),"number"==typeof Q.title&&(Q.title=Q.title.toString()),"number"==typeof Q.content&&(Q.content=Q.content.toString()),et.typeCheckConfig(xn,Q,this.constructor.DefaultType),Q.sanitize&&(Q.template=pr(Q.template,Q.whiteList,Q.sanitizeFn)),Q},ye._getDelegateConfig=function(){var Q={};if(this.config)for(var gt in this.config)this.constructor.Default[gt]!==this.config[gt]&&(Q[gt]=this.config[gt]);return Q},ye._cleanTipClass=function(){var Q=b(this.getTipElement()),gt=Q.attr("class").match(Yo);null!==gt&&gt.length&&Q.removeClass(gt.join(""))},ye._handlePopperPlacementChange=function(Q){this.tip=Q.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(Q.placement))},ye._fixTransition=function(){var Q=this.getTipElement(),gt=this.config.animation;null===Q.getAttribute("x-placement")&&(b(Q).removeClass(Ia),this.config.animation=!1,this.hide(),this.show(),this.config.animation=gt)},ke._jQueryInterface=function(Q){return this.each(function(){var gt=b(this).data(Ea),ee="object"==typeof Q&&Q;if((gt||!/dispose|hide/.test(Q))&&(gt||(gt=new ke(this,ee),b(this).data(Ea,gt)),"string"==typeof Q)){if(void 0===gt[Q])throw new TypeError('No method named "'+Q+'"');gt[Q]()}})},l(ke,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return ca}},{key:"NAME",get:function(){return xn}},{key:"DATA_KEY",get:function(){return Ea}},{key:"Event",get:function(){return Os}},{key:"EVENT_KEY",get:function(){return lo}},{key:"DefaultType",get:function(){return Lo}}]),ke}();b.fn[xn]=uo._jQueryInterface,b.fn[xn].Constructor=uo,b.fn[xn].noConflict=function(){return b.fn[xn]=os,uo._jQueryInterface};var go="popover",ka="bs.popover",aa="."+ka,Rs=b.fn[go],Oa="bs-popover",Fa=new RegExp("(^|\\s)"+Oa+"\\S+","g"),w=P({},uo.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),z=P({},uo.DefaultType,{content:"(string|element|function)"}),At={HIDE:"hide"+aa,HIDDEN:"hidden"+aa,SHOW:"show"+aa,SHOWN:"shown"+aa,INSERTED:"inserted"+aa,CLICK:"click"+aa,FOCUSIN:"focusin"+aa,FOCUSOUT:"focusout"+aa,MOUSEENTER:"mouseenter"+aa,MOUSELEAVE:"mouseleave"+aa},Xt=function(ke){var ye,Q;function gt(){return ke.apply(this,arguments)||this}Q=ke,(ye=gt).prototype=Object.create(Q.prototype),(ye.prototype.constructor=ye).__proto__=Q;var ee=gt.prototype;return ee.isWithContent=function(){return this.getTitle()||this._getContent()},ee.addAttachmentClass=function(we){b(this.getTipElement()).addClass(Oa+"-"+we)},ee.getTipElement=function(){return this.tip=this.tip||b(this.config.template)[0],this.tip},ee.setContent=function(){var we=b(this.getTipElement());this.setElementContent(we.find(".popover-header"),this.getTitle());var Ae=this._getContent();"function"==typeof Ae&&(Ae=Ae.call(this.element)),this.setElementContent(we.find(".popover-body"),Ae),we.removeClass("fade show")},ee._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},ee._cleanTipClass=function(){var we=b(this.getTipElement()),Ae=we.attr("class").match(Fa);null!==Ae&&0<Ae.length&&we.removeClass(Ae.join(""))},gt._jQueryInterface=function(we){return this.each(function(){var Ae=b(this).data(ka),Di="object"==typeof we?we:null;if((Ae||!/dispose|hide/.test(we))&&(Ae||(Ae=new gt(this,Di),b(this).data(ka,Ae)),"string"==typeof we)){if(void 0===Ae[we])throw new TypeError('No method named "'+we+'"');Ae[we]()}})},l(gt,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return w}},{key:"NAME",get:function(){return go}},{key:"DATA_KEY",get:function(){return ka}},{key:"Event",get:function(){return At}},{key:"EVENT_KEY",get:function(){return aa}},{key:"DefaultType",get:function(){return z}}]),gt}(uo);b.fn[go]=Xt._jQueryInterface,b.fn[go].Constructor=Xt,b.fn[go].noConflict=function(){return b.fn[go]=Rs,Xt._jQueryInterface};var ie="scrollspy",ge="bs.scrollspy",Xe="."+ge,pi=b.fn[ie],je={offset:10,method:"auto",target:""},Ge={offset:"number",method:"string",target:"(string|element)"},Ki={ACTIVATE:"activate"+Xe,SCROLL:"scroll"+Xe,LOAD_DATA_API:"load"+Xe+".data-api"},Yi="active",En=".nav, .list-group",Gn=".nav-link",gi=".list-group-item",Oo="position",Qn=function(){function ke(Q,gt){var ee=this;this._element=Q,this._scrollElement="BODY"===Q.tagName?window:Q,this._config=this._getConfig(gt),this._selector=this._config.target+" "+Gn+","+this._config.target+" "+gi+","+this._config.target+" .dropdown-item",this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,b(this._scrollElement).on(Ki.SCROLL,function(we){return ee._process(we)}),this.refresh(),this._process()}var ye=ke.prototype;return ye.refresh=function(){var Q=this,ee="auto"===this._config.method?this._scrollElement===this._scrollElement.window?"offset":Oo:this._config.method,we=ee===Oo?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(Ae){var Di,zr=et.getSelectorFromElement(Ae);if(zr&&(Di=document.querySelector(zr)),Di){var Rn=Di.getBoundingClientRect();if(Rn.width||Rn.height)return[b(Di)[ee]().top+we,zr]}return null}).filter(function(Ae){return Ae}).sort(function(Ae,Di){return Ae[0]-Di[0]}).forEach(function(Ae){Q._offsets.push(Ae[0]),Q._targets.push(Ae[1])})},ye.dispose=function(){b.removeData(this._element,ge),b(this._scrollElement).off(Xe),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},ye._getConfig=function(Q){if("string"!=typeof(Q=P({},je,"object"==typeof Q&&Q?Q:{})).target){var gt=b(Q.target).attr("id");gt||(gt=et.getUID(ie),b(Q.target).attr("id",gt)),Q.target="#"+gt}return et.typeCheckConfig(ie,Q,Ge),Q},ye._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},ye._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},ye._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},ye._process=function(){var Q=this._getScrollTop()+this._config.offset,gt=this._getScrollHeight(),ee=this._config.offset+gt-this._getOffsetHeight();if(this._scrollHeight!==gt&&this.refresh(),ee<=Q){var we=this._targets[this._targets.length-1];this._activeTarget!==we&&this._activate(we)}else{if(this._activeTarget&&Q<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var Ae=this._offsets.length;Ae--;)this._activeTarget!==this._targets[Ae]&&Q>=this._offsets[Ae]&&(void 0===this._offsets[Ae+1]||Q<this._offsets[Ae+1])&&this._activate(this._targets[Ae])}},ye._activate=function(Q){this._activeTarget=Q,this._clear();var gt=this._selector.split(",").map(function(we){return we+'[data-target="'+Q+'"],'+we+'[href="'+Q+'"]'}),ee=b([].slice.call(document.querySelectorAll(gt.join(","))));ee.hasClass("dropdown-item")?(ee.closest(".dropdown").find(".dropdown-toggle").addClass(Yi),ee.addClass(Yi)):(ee.addClass(Yi),ee.parents(En).prev(Gn+", "+gi).addClass(Yi),ee.parents(En).prev(".nav-item").children(Gn).addClass(Yi)),b(this._scrollElement).trigger(Ki.ACTIVATE,{relatedTarget:Q})},ye._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(Q){return Q.classList.contains(Yi)}).forEach(function(Q){return Q.classList.remove(Yi)})},ke._jQueryInterface=function(Q){return this.each(function(){var gt=b(this).data(ge);if(gt||(gt=new ke(this,"object"==typeof Q&&Q),b(this).data(ge,gt)),"string"==typeof Q){if(void 0===gt[Q])throw new TypeError('No method named "'+Q+'"');gt[Q]()}})},l(ke,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return je}}]),ke}();b(window).on(Ki.LOAD_DATA_API,function(){for(var ke=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),ye=ke.length;ye--;){var Q=b(ke[ye]);Qn._jQueryInterface.call(Q,Q.data())}}),b.fn[ie]=Qn._jQueryInterface,b.fn[ie].Constructor=Qn,b.fn[ie].noConflict=function(){return b.fn[ie]=pi,Qn._jQueryInterface};var sa="bs.tab",Zo="."+sa,er=b.fn.tab,Wo={HIDE:"hide"+Zo,HIDDEN:"hidden"+Zo,SHOW:"show"+Zo,SHOWN:"shown"+Zo,CLICK_DATA_API:"click"+Zo+".data-api"},un="active",to=".active",vo="> li > .active",Qo=function(){function ke(Q){this._element=Q}var ye=ke.prototype;return ye.show=function(){var Q=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&b(this._element).hasClass(un)||b(this._element).hasClass("disabled"))){var gt,ee,we=b(this._element).closest(".nav, .list-group")[0],Ae=et.getSelectorFromElement(this._element);if(we){var Di="UL"===we.nodeName||"OL"===we.nodeName?vo:to;ee=(ee=b.makeArray(b(we).find(Di)))[ee.length-1]}var zr=b.Event(Wo.HIDE,{relatedTarget:this._element}),Rn=b.Event(Wo.SHOW,{relatedTarget:ee});if(ee&&b(ee).trigger(zr),b(this._element).trigger(Rn),!Rn.isDefaultPrevented()&&!zr.isDefaultPrevented()){Ae&&(gt=document.querySelector(Ae)),this._activate(this._element,we);var On=function(){var $o=b.Event(Wo.HIDDEN,{relatedTarget:Q._element}),_n=b.Event(Wo.SHOWN,{relatedTarget:ee});b(ee).trigger($o),b(Q._element).trigger(_n)};gt?this._activate(gt,gt.parentNode,On):On()}}},ye.dispose=function(){b.removeData(this._element,sa),this._element=null},ye._activate=function(Q,gt,ee){var we=this,Ae=(!gt||"UL"!==gt.nodeName&&"OL"!==gt.nodeName?b(gt).children(to):b(gt).find(vo))[0],Di=ee&&Ae&&b(Ae).hasClass("fade"),zr=function(){return we._transitionComplete(Q,Ae,ee)};if(Ae&&Di){var Rn=et.getTransitionDurationFromElement(Ae);b(Ae).removeClass("show").one(et.TRANSITION_END,zr).emulateTransitionEnd(Rn)}else zr()},ye._transitionComplete=function(Q,gt,ee){if(gt){b(gt).removeClass(un);var we=b(gt.parentNode).find("> .dropdown-menu .active")[0];we&&b(we).removeClass(un),"tab"===gt.getAttribute("role")&&gt.setAttribute("aria-selected",!1)}if(b(Q).addClass(un),"tab"===Q.getAttribute("role")&&Q.setAttribute("aria-selected",!0),et.reflow(Q),Q.classList.contains("fade")&&Q.classList.add("show"),Q.parentNode&&b(Q.parentNode).hasClass("dropdown-menu")){var Ae=b(Q).closest(".dropdown")[0];if(Ae){var Di=[].slice.call(Ae.querySelectorAll(".dropdown-toggle"));b(Di).addClass(un)}Q.setAttribute("aria-expanded",!0)}ee&&ee()},ke._jQueryInterface=function(Q){return this.each(function(){var gt=b(this),ee=gt.data(sa);if(ee||(ee=new ke(this),gt.data(sa,ee)),"string"==typeof Q){if(void 0===ee[Q])throw new TypeError('No method named "'+Q+'"');ee[Q]()}})},l(ke,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),ke}();b(document).on(Wo.CLICK_DATA_API,'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(ke){ke.preventDefault(),Qo._jQueryInterface.call(b(this),"show")}),b.fn.tab=Qo._jQueryInterface,b.fn.tab.Constructor=Qo,b.fn.tab.noConflict=function(){return b.fn.tab=er,Qo._jQueryInterface};var eo="toast",es="bs.toast",Ua="."+es,vs=b.fn[eo],Go={CLICK_DISMISS:"click.dismiss"+Ua,HIDE:"hide"+Ua,HIDDEN:"hidden"+Ua,SHOW:"show"+Ua,SHOWN:"shown"+Ua},ja="show",rs="showing",Bs={animation:"boolean",autohide:"boolean",delay:"number"},Xo={animation:!0,autohide:!0,delay:500},Va=function(){function ke(Q,gt){this._element=Q,this._config=this._getConfig(gt),this._timeout=null,this._setListeners()}var ye=ke.prototype;return ye.show=function(){var Q=this;b(this._element).trigger(Go.SHOW),this._config.animation&&this._element.classList.add("fade");var gt=function(){Q._element.classList.remove(rs),Q._element.classList.add(ja),b(Q._element).trigger(Go.SHOWN),Q._config.autohide&&Q.hide()};if(this._element.classList.remove("hide"),this._element.classList.add(rs),this._config.animation){var ee=et.getTransitionDurationFromElement(this._element);b(this._element).one(et.TRANSITION_END,gt).emulateTransitionEnd(ee)}else gt()},ye.hide=function(Q){var gt=this;this._element.classList.contains(ja)&&(b(this._element).trigger(Go.HIDE),Q?this._close():this._timeout=setTimeout(function(){gt._close()},this._config.delay))},ye.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(ja)&&this._element.classList.remove(ja),b(this._element).off(Go.CLICK_DISMISS),b.removeData(this._element,es),this._element=null,this._config=null},ye._getConfig=function(Q){return Q=P({},Xo,b(this._element).data(),"object"==typeof Q&&Q?Q:{}),et.typeCheckConfig(eo,Q,this.constructor.DefaultType),Q},ye._setListeners=function(){var Q=this;b(this._element).on(Go.CLICK_DISMISS,'[data-dismiss="toast"]',function(){return Q.hide(!0)})},ye._close=function(){var Q=this,gt=function(){Q._element.classList.add("hide"),b(Q._element).trigger(Go.HIDDEN)};if(this._element.classList.remove(ja),this._config.animation){var ee=et.getTransitionDurationFromElement(this._element);b(this._element).one(et.TRANSITION_END,gt).emulateTransitionEnd(ee)}else gt()},ke._jQueryInterface=function(Q){return this.each(function(){var gt=b(this),ee=gt.data(es);if(ee||(ee=new ke(this,"object"==typeof Q&&Q),gt.data(es,ee)),"string"==typeof Q){if(void 0===ee[Q])throw new TypeError('No method named "'+Q+'"');ee[Q](this)}})},l(ke,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"DefaultType",get:function(){return Bs}},{key:"Default",get:function(){return Xo}}]),ke}();b.fn[eo]=Va._jQueryInterface,b.fn[eo].Constructor=Va,b.fn[eo].noConflict=function(){return b.fn[eo]=vs,Va._jQueryInterface},function(){if(void 0===b)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var ke=b.fn.jquery.split(" ")[0].split(".");if(ke[0]<2&&ke[1]<9||1===ke[0]&&9===ke[1]&&ke[2]<1||4<=ke[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),F.Util=et,F.Alert=xe,F.Button=d,F.Carousel=Ci,F.Collapse=Ni,F.Dropdown=Be,F.Modal=Zn,F.Popover=Xt,F.Scrollspy=Qn,F.Tab=Qo,F.Toast=Va,F.Tooltip=uo,Object.defineProperty(F,"__esModule",{value:!0})}),function(F){"function"==typeof define&&define.amd?define(["jquery"],F):F("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(F){var b,v,A,l,P,I,N="Close",et="BeforeClose",Mt="MarkupParse",Yt="Open",lt=".mfp",Vt="mfp-ready",xe="mfp-removing",Ze="mfp-prevent-close",Ye=function(){},Ui=!!window.jQuery,q=F(window),Wi=function(Dt,Ft){b.ev.on("mfp"+Dt+lt,Ft)},Ti=function(Dt,Ft,Fe,Le){var st=document.createElement("div");return st.className="mfp-"+Dt,Fe&&(st.innerHTML=Fe),Le?Ft&&Ft.appendChild(st):(st=F(st),Ft&&st.appendTo(Ft)),st},ti=function(Dt,Ft){b.ev.triggerHandler("mfp"+Dt,Ft),b.st.callbacks&&(Dt=Dt.charAt(0).toLowerCase()+Dt.slice(1),b.st.callbacks[Dt]&&b.st.callbacks[Dt].apply(b,F.isArray(Ft)?Ft:[Ft]))},ae=function(Dt){return Dt===I&&b.currTemplate.closeBtn||(b.currTemplate.closeBtn=F(b.st.closeMarkup.replace("%title%",b.st.tClose)),I=Dt),b.currTemplate.closeBtn},zt=function(){F.magnificPopup.instance||((b=new Ye).init(),F.magnificPopup.instance=b)};Ye.prototype={constructor:Ye,init:function(){var Dt=navigator.appVersion;b.isLowIE=b.isIE8=document.all&&!document.addEventListener,b.isAndroid=/android/gi.test(Dt),b.isIOS=/iphone|ipad|ipod/gi.test(Dt),b.supportsTransition=function(){var Dt=document.createElement("p").style,Ft=["ms","O","Moz","Webkit"];if(void 0!==Dt.transition)return!0;for(;Ft.length;)if(Ft.pop()+"Transition"in Dt)return!0;return!1}(),b.probablyMobile=b.isAndroid||b.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),A=F(document),b.popupsCache={}},open:function(Dt){var Ft;if(!1===Dt.isObj){b.items=Dt.items.toArray(),b.index=0;var Fe,Le=Dt.items;for(Ft=0;Ft<Le.length;Ft++)if((Fe=Le[Ft]).parsed&&(Fe=Fe.el[0]),Fe===Dt.el[0]){b.index=Ft;break}}else b.items=F.isArray(Dt.items)?Dt.items:[Dt.items],b.index=Dt.index||0;if(!b.isOpen){b.types=[],P="",b.ev=Dt.mainEl&&Dt.mainEl.length?Dt.mainEl.eq(0):A,Dt.key?(b.popupsCache[Dt.key]||(b.popupsCache[Dt.key]={}),b.currTemplate=b.popupsCache[Dt.key]):b.currTemplate={},b.st=F.extend(!0,{},F.magnificPopup.defaults,Dt),b.fixedContentPos="auto"===b.st.fixedContentPos?!b.probablyMobile:b.st.fixedContentPos,b.st.modal&&(b.st.closeOnContentClick=!1,b.st.closeOnBgClick=!1,b.st.showCloseBtn=!1,b.st.enableEscapeKey=!1),b.bgOverlay||(b.bgOverlay=Ti("bg").on("click"+lt,function(){b.close()}),b.wrap=Ti("wrap").attr("tabindex",-1).on("click"+lt,function(Bt){b._checkIfClose(Bt.target)&&b.close()}),b.container=Ti("container",b.wrap)),b.contentContainer=Ti("content"),b.st.preloader&&(b.preloader=Ti("preloader",b.container,b.st.tLoading));var st=F.magnificPopup.modules;for(Ft=0;Ft<st.length;Ft++){var Rt=st[Ft];Rt=Rt.charAt(0).toUpperCase()+Rt.slice(1),b["init"+Rt].call(b)}ti("BeforeOpen"),b.st.showCloseBtn&&(b.st.closeBtnInside?(Wi(Mt,function(Bt,Kt,ne,Pe){ne.close_replaceWith=ae(Pe.type)}),P+=" mfp-close-btn-in"):b.wrap.append(ae())),b.st.alignTop&&(P+=" mfp-align-top"),b.wrap.css(b.fixedContentPos?{overflow:b.st.overflowY,overflowX:"hidden",overflowY:b.st.overflowY}:{top:q.scrollTop(),position:"absolute"}),(!1===b.st.fixedBgPos||"auto"===b.st.fixedBgPos&&!b.fixedContentPos)&&b.bgOverlay.css({height:A.height(),position:"absolute"}),b.st.enableEscapeKey&&A.on("keyup"+lt,function(Bt){27===Bt.keyCode&&b.close()}),q.on("resize"+lt,function(){b.updateSize()}),b.st.closeOnContentClick||(P+=" mfp-auto-cursor"),P&&b.wrap.addClass(P);var me=b.wH=q.height(),Me={};if(b.fixedContentPos&&b._hasScrollBar(me)){var ii=b._getScrollbarSize();ii&&(Me.marginRight=ii)}b.fixedContentPos&&(b.isIE7?F("body, html").css("overflow","hidden"):Me.overflow="hidden");var re=b.st.mainClass;return b.isIE7&&(re+=" mfp-ie7"),re&&b._addClassToMFP(re),b.updateItemHTML(),ti("BuildControls"),F("html").css(Me),b.bgOverlay.add(b.wrap).prependTo(b.st.prependTo||F(document.body)),b._lastFocusedEl=document.activeElement,setTimeout(function(){b.content?(b._addClassToMFP(Vt),b._setFocus()):b.bgOverlay.addClass(Vt),A.on("focusin"+lt,b._onFocusIn)},16),b.isOpen=!0,b.updateSize(me),ti(Yt),Dt}b.updateItemHTML()},close:function(){b.isOpen&&(ti(et),b.isOpen=!1,b.st.removalDelay&&!b.isLowIE&&b.supportsTransition?(b._addClassToMFP(xe),setTimeout(function(){b._close()},b.st.removalDelay)):b._close())},_close:function(){ti(N);var Dt=xe+" "+Vt+" ";if(b.bgOverlay.detach(),b.wrap.detach(),b.container.empty(),b.st.mainClass&&(Dt+=b.st.mainClass+" "),b._removeClassFromMFP(Dt),b.fixedContentPos){var Ft={marginRight:""};b.isIE7?F("body, html").css("overflow",""):Ft.overflow="",F("html").css(Ft)}A.off("keyup.mfp focusin"+lt),b.ev.off(lt),b.wrap.attr("class","mfp-wrap").removeAttr("style"),b.bgOverlay.attr("class","mfp-bg"),b.container.attr("class","mfp-container"),!b.st.showCloseBtn||b.st.closeBtnInside&&!0!==b.currTemplate[b.currItem.type]||b.currTemplate.closeBtn&&b.currTemplate.closeBtn.detach(),b.st.autoFocusLast&&b._lastFocusedEl&&F(b._lastFocusedEl).focus(),b.currItem=null,b.content=null,b.currTemplate=null,b.prevHeight=0,ti("AfterClose")},updateSize:function(Dt){if(b.isIOS){var Ft=document.documentElement.clientWidth/window.innerWidth,Fe=window.innerHeight*Ft;b.wrap.css("height",Fe),b.wH=Fe}else b.wH=Dt||q.height();b.fixedContentPos||b.wrap.css("height",b.wH),ti("Resize")},updateItemHTML:function(){var Dt=b.items[b.index];b.contentContainer.detach(),b.content&&b.content.detach(),Dt.parsed||(Dt=b.parseEl(b.index));var Ft=Dt.type;if(ti("BeforeChange",[b.currItem?b.currItem.type:"",Ft]),b.currItem=Dt,!b.currTemplate[Ft]){var Fe=!!b.st[Ft]&&b.st[Ft].markup;ti("FirstMarkupParse",Fe),b.currTemplate[Ft]=!Fe||F(Fe)}l&&l!==Dt.type&&b.container.removeClass("mfp-"+l+"-holder");var Le=b["get"+Ft.charAt(0).toUpperCase()+Ft.slice(1)](Dt,b.currTemplate[Ft]);b.appendContent(Le,Ft),Dt.preloaded=!0,ti("Change",Dt),l=Dt.type,b.container.prepend(b.contentContainer),ti("AfterChange")},appendContent:function(Dt,Ft){b.content=Dt,Dt?b.st.showCloseBtn&&b.st.closeBtnInside&&!0===b.currTemplate[Ft]?b.content.find(".mfp-close").length||b.content.append(ae()):b.content=Dt:b.content="",ti("BeforeAppend"),b.container.addClass("mfp-"+Ft+"-holder"),b.contentContainer.append(b.content)},parseEl:function(Dt){var Ft,Fe=b.items[Dt];if(Fe.tagName?Fe={el:F(Fe)}:(Ft=Fe.type,Fe={data:Fe,src:Fe.src}),Fe.el){for(var Le=b.types,st=0;st<Le.length;st++)if(Fe.el.hasClass("mfp-"+Le[st])){Ft=Le[st];break}Fe.src=Fe.el.attr("data-mfp-src"),Fe.src||(Fe.src=Fe.el.attr("href"))}return Fe.type=Ft||b.st.type||"inline",Fe.index=Dt,Fe.parsed=!0,b.items[Dt]=Fe,ti("ElementParse",Fe),b.items[Dt]},addGroup:function(Dt,Ft){var Fe=function(st){st.mfpEl=this,b._openClick(st,Dt,Ft)};Ft||(Ft={});var Le="click.magnificPopup";Ft.mainEl=Dt,Ft.items?(Ft.isObj=!0,Dt.off(Le).on(Le,Fe)):(Ft.isObj=!1,Ft.delegate?Dt.off(Le).on(Le,Ft.delegate,Fe):(Ft.items=Dt,Dt.off(Le).on(Le,Fe)))},_openClick:function(Dt,Ft,Fe){if((void 0!==Fe.midClick?Fe.midClick:F.magnificPopup.defaults.midClick)||!(2===Dt.which||Dt.ctrlKey||Dt.metaKey||Dt.altKey||Dt.shiftKey)){var st=void 0!==Fe.disableOn?Fe.disableOn:F.magnificPopup.defaults.disableOn;if(st)if(F.isFunction(st)){if(!st.call(b))return!0}else if(q.width()<st)return!0;Dt.type&&(Dt.preventDefault(),b.isOpen&&Dt.stopPropagation()),Fe.el=F(Dt.mfpEl),Fe.delegate&&(Fe.items=Ft.find(Fe.delegate)),b.open(Fe)}},updateStatus:function(Dt,Ft){if(b.preloader){v!==Dt&&b.container.removeClass("mfp-s-"+v),Ft||"loading"!==Dt||(Ft=b.st.tLoading);var Fe={status:Dt,text:Ft};ti("UpdateStatus",Fe),Dt=Fe.status,b.preloader.html(Ft=Fe.text),b.preloader.find("a").on("click",function(Le){Le.stopImmediatePropagation()}),b.container.addClass("mfp-s-"+Dt),v=Dt}},_checkIfClose:function(Dt){if(!F(Dt).hasClass(Ze)){var Ft=b.st.closeOnContentClick,Fe=b.st.closeOnBgClick;if(Ft&&Fe||!b.content||F(Dt).hasClass("mfp-close")||b.preloader&&Dt===b.preloader[0])return!0;if(Dt===b.content[0]||F.contains(b.content[0],Dt)){if(Ft)return!0}else if(Fe&&F.contains(document,Dt))return!0;return!1}},_addClassToMFP:function(Dt){b.bgOverlay.addClass(Dt),b.wrap.addClass(Dt)},_removeClassFromMFP:function(Dt){this.bgOverlay.removeClass(Dt),b.wrap.removeClass(Dt)},_hasScrollBar:function(Dt){return(b.isIE7?A.height():document.body.scrollHeight)>(Dt||q.height())},_setFocus:function(){(b.st.focus?b.content.find(b.st.focus).eq(0):b.wrap).focus()},_onFocusIn:function(Dt){return Dt.target===b.wrap[0]||F.contains(b.wrap[0],Dt.target)?void 0:(b._setFocus(),!1)},_parseMarkup:function(Dt,Ft,Fe){var Le;Fe.data&&(Ft=F.extend(Fe.data,Ft)),ti(Mt,[Dt,Ft,Fe]),F.each(Ft,function(st,Rt){if(void 0===Rt||!1===Rt)return!0;if((Le=st.split("_")).length>1){var me=Dt.find(lt+"-"+Le[0]);if(me.length>0){var Me=Le[1];"replaceWith"===Me?me[0]!==Rt[0]&&me.replaceWith(Rt):"img"===Me?me.is("img")?me.attr("src",Rt):me.replaceWith(F("<img>").attr("src",Rt).attr("class",me.attr("class"))):me.attr(Le[1],Rt)}}else Dt.find(lt+"-"+st).html(Rt)})},_getScrollbarSize:function(){if(void 0===b.scrollbarSize){var Dt=document.createElement("div");Dt.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(Dt),b.scrollbarSize=Dt.offsetWidth-Dt.clientWidth,document.body.removeChild(Dt)}return b.scrollbarSize}},F.magnificPopup={instance:null,proto:Ye.prototype,modules:[],open:function(Dt,Ft){return zt(),(Dt=Dt?F.extend(!0,{},Dt):{}).isObj=!0,Dt.index=Ft||0,this.instance.open(Dt)},close:function(){return F.magnificPopup.instance&&F.magnificPopup.instance.close()},registerModule:function(Dt,Ft){Ft.options&&(F.magnificPopup.defaults[Dt]=Ft.options),F.extend(this.proto,Ft.proto),this.modules.push(Dt)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},F.fn.magnificPopup=function(Dt){zt();var Ft=F(this);if("string"==typeof Dt)if("open"===Dt){var Fe,Le=Ui?Ft.data("magnificPopup"):Ft[0].magnificPopup,st=parseInt(arguments[1],10)||0;Le.items?Fe=Le.items[st]:(Fe=Ft,Le.delegate&&(Fe=Fe.find(Le.delegate)),Fe=Fe.eq(st)),b._openClick({mfpEl:Fe},Ft,Le)}else b.isOpen&&b[Dt].apply(b,Array.prototype.slice.call(arguments,1));else Dt=F.extend(!0,{},Dt),Ui?Ft.data("magnificPopup",Dt):Ft[0].magnificPopup=Dt,b.addGroup(Ft,Dt);return Ft};var ht,mt,rt,J="inline",d=function(){rt&&(mt.after(rt.addClass(ht)).detach(),rt=null)};F.magnificPopup.registerModule(J,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){b.types.push(J),Wi(N+"."+J,function(){d()})},getInline:function(Dt,Ft){if(d(),Dt.src){var Fe=b.st.inline,Le=F(Dt.src);if(Le.length){var st=Le[0].parentNode;st&&st.tagName&&(mt||(mt=Ti(ht=Fe.hiddenClass),ht="mfp-"+ht),rt=Le.after(mt).detach().removeClass(ht)),b.updateStatus("ready")}else b.updateStatus("error",Fe.tNotFound),Le=F("<div>");return Dt.inlineElement=Le,Le}return b.updateStatus("ready"),b._parseMarkup(Ft,{},Dt),Ft}}});var Pt,Et="ajax",se=function(){Pt&&F(document.body).removeClass(Pt)},Ie=function(){se(),b.req&&b.req.abort()};F.magnificPopup.registerModule(Et,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){b.types.push(Et),Pt=b.st.ajax.cursor,Wi(N+"."+Et,Ie),Wi("BeforeChange."+Et,Ie)},getAjax:function(Dt){Pt&&F(document.body).addClass(Pt),b.updateStatus("loading");var Ft=F.extend({url:Dt.src,success:function(Fe,Le,st){var Rt={data:Fe,xhr:st};ti("ParseAjax",Rt),b.appendContent(F(Rt.data),Et),Dt.finished=!0,se(),b._setFocus(),setTimeout(function(){b.wrap.addClass(Vt)},16),b.updateStatus("ready"),ti("AjaxContentAdded")},error:function(){se(),Dt.finished=Dt.loadError=!0,b.updateStatus("error",b.st.ajax.tError.replace("%url%",Dt.src))}},b.st.ajax.settings);return b.req=F.ajax(Ft),""}}});var ei,Ri,_e=function(Dt){if(Dt.data&&void 0!==Dt.data.title)return Dt.data.title;var Ft=b.st.image.titleSrc;if(Ft){if(F.isFunction(Ft))return Ft.call(b,Dt);if(Dt.el)return Dt.el.attr(Ft)||""}return""};F.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var Dt=b.st.image,Ft=".image";b.types.push("image"),Wi(Yt+Ft,function(){"image"===b.currItem.type&&Dt.cursor&&F(document.body).addClass(Dt.cursor)}),Wi(N+Ft,function(){Dt.cursor&&F(document.body).removeClass(Dt.cursor),q.off("resize"+lt)}),Wi("Resize"+Ft,b.resizeImage),b.isLowIE&&Wi("AfterChange",b.resizeImage)},resizeImage:function(){var Dt=b.currItem;if(Dt&&Dt.img&&b.st.image.verticalFit){var Ft=0;b.isLowIE&&(Ft=parseInt(Dt.img.css("padding-top"),10)+parseInt(Dt.img.css("padding-bottom"),10)),Dt.img.css("max-height",b.wH-Ft)}},_onImageHasSize:function(Dt){Dt.img&&(Dt.hasSize=!0,ei&&clearInterval(ei),Dt.isCheckingImgSize=!1,ti("ImageHasSize",Dt),Dt.imgHidden&&(b.content&&b.content.removeClass("mfp-loading"),Dt.imgHidden=!1))},findImageSize:function(Dt){var Ft=0,Fe=Dt.img[0],Le=function(st){ei&&clearInterval(ei),ei=setInterval(function(){return Fe.naturalWidth>0?void b._onImageHasSize(Dt):(Ft>200&&clearInterval(ei),void(3==++Ft?Le(10):40===Ft?Le(50):100===Ft&&Le(500)))},st)};Le(1)},getImage:function(Dt,Ft){var Fe=0,Le=function(){Dt&&(Dt.img[0].complete?(Dt.img.off(".mfploader"),Dt===b.currItem&&(b._onImageHasSize(Dt),b.updateStatus("ready")),Dt.hasSize=!0,Dt.loaded=!0,ti("ImageLoadComplete")):200>++Fe?setTimeout(Le,100):st())},st=function(){Dt&&(Dt.img.off(".mfploader"),Dt===b.currItem&&(b._onImageHasSize(Dt),b.updateStatus("error",Rt.tError.replace("%url%",Dt.src))),Dt.hasSize=!0,Dt.loaded=!0,Dt.loadError=!0)},Rt=b.st.image,me=Ft.find(".mfp-img");if(me.length){var Me=document.createElement("img");Me.className="mfp-img",Dt.el&&Dt.el.find("img").length&&(Me.alt=Dt.el.find("img").attr("alt")),Dt.img=F(Me).on("load.mfploader",Le).on("error.mfploader",st),Me.src=Dt.src,me.is("img")&&(Dt.img=Dt.img.clone()),(Me=Dt.img[0]).naturalWidth>0?Dt.hasSize=!0:Me.width||(Dt.hasSize=!1)}return b._parseMarkup(Ft,{title:_e(Dt),img_replaceWith:Dt.img},Dt),b.resizeImage(),Dt.hasSize?(ei&&clearInterval(ei),Dt.loadError?(Ft.addClass("mfp-loading"),b.updateStatus("error",Rt.tError.replace("%url%",Dt.src))):(Ft.removeClass("mfp-loading"),b.updateStatus("ready")),Ft):(b.updateStatus("loading"),Dt.loading=!0,Dt.hasSize||(Dt.imgHidden=!0,Ft.addClass("mfp-loading"),b.findImageSize(Dt)),Ft)}}}),F.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(Dt){return Dt.is("img")?Dt:Dt.find("img")}},proto:{initZoom:function(){var Dt,Ft=b.st.zoom,Fe=".zoom";if(Ft.enabled&&b.supportsTransition){var Le,st,Rt=Ft.duration,me=function(ii){var re=ii.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),Kt={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},ne="transition";return Kt["-webkit-"+ne]=Kt["-moz-"+ne]=Kt["-o-"+ne]=Kt[ne]="all "+Ft.duration/1e3+"s "+Ft.easing,re.css(Kt),re},Me=function(){b.content.css("visibility","visible")};Wi("BuildControls"+Fe,function(){if(b._allowZoom()){if(clearTimeout(Le),b.content.css("visibility","hidden"),!(Dt=b._getItemToZoom()))return void Me();(st=me(Dt)).css(b._getOffset()),b.wrap.append(st),Le=setTimeout(function(){st.css(b._getOffset(!0)),Le=setTimeout(function(){Me(),setTimeout(function(){st.remove(),Dt=st=null,ti("ZoomAnimationEnded")},16)},Rt)},16)}}),Wi(et+Fe,function(){if(b._allowZoom()){if(clearTimeout(Le),b.st.removalDelay=Rt,!Dt){if(!(Dt=b._getItemToZoom()))return;st=me(Dt)}st.css(b._getOffset(!0)),b.wrap.append(st),b.content.css("visibility","hidden"),setTimeout(function(){st.css(b._getOffset())},16)}}),Wi(N+Fe,function(){b._allowZoom()&&(Me(),st&&st.remove(),Dt=null)})}},_allowZoom:function(){return"image"===b.currItem.type},_getItemToZoom:function(){return!!b.currItem.hasSize&&b.currItem.img},_getOffset:function(Dt){var Ft,Fe=(Ft=Dt?b.currItem.img:b.st.zoom.opener(b.currItem.el||b.currItem)).offset(),Le=parseInt(Ft.css("padding-top"),10),st=parseInt(Ft.css("padding-bottom"),10);Fe.top-=F(window).scrollTop()-Le;var Rt={width:Ft.width(),height:(Ui?Ft.innerHeight():Ft[0].offsetHeight)-st-Le};return void 0===Ri&&(Ri=void 0!==document.createElement("p").style.MozTransform),Ri?Rt["-moz-transform"]=Rt.transform="translate("+Fe.left+"px,"+Fe.top+"px)":(Rt.left=Fe.left,Rt.top=Fe.top),Rt}}});var _i="iframe",Tr=function(Dt){if(b.currTemplate[_i]){var Ft=b.currTemplate[_i].find("iframe");Ft.length&&(Dt||(Ft[0].src="//about:blank"),b.isIE8&&Ft.css("display",Dt?"block":"none"))}};F.magnificPopup.registerModule(_i,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){b.types.push(_i),Wi("BeforeChange",function(Dt,Ft,Fe){Ft!==Fe&&(Ft===_i?Tr():Fe===_i&&Tr(!0))}),Wi(N+"."+_i,function(){Tr()})},getIframe:function(Dt,Ft){var Fe=Dt.src,Le=b.st.iframe;F.each(Le.patterns,function(){return Fe.indexOf(this.index)>-1?(this.id&&(Fe="string"==typeof this.id?Fe.substr(Fe.lastIndexOf(this.id)+this.id.length,Fe.length):this.id.call(this,Fe)),Fe=this.src.replace("%id%",Fe),!1):void 0});var st={};return Le.srcAction&&(st[Le.srcAction]=Fe),b._parseMarkup(Ft,st,Dt),b.updateStatus("ready"),Ft}}});var sr=function(Dt){var Ft=b.items.length;return Dt>Ft-1?Dt-Ft:0>Dt?Ft+Dt:Dt},Tn=function(Dt,Ft,Fe){return Dt.replace(/%curr%/gi,Ft+1).replace(/%total%/gi,Fe)};F.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var Dt=b.st.gallery,Ft=".mfp-gallery";return b.direction=!0,!(!Dt||!Dt.enabled)&&(P+=" mfp-gallery",Wi(Yt+Ft,function(){Dt.navigateByImgClick&&b.wrap.on("click"+Ft,".mfp-img",function(){return b.items.length>1?(b.next(),!1):void 0}),A.on("keydown"+Ft,function(Fe){37===Fe.keyCode?b.prev():39===Fe.keyCode&&b.next()})}),Wi("UpdateStatus"+Ft,function(Fe,Le){Le.text&&(Le.text=Tn(Le.text,b.currItem.index,b.items.length))}),Wi(Mt+Ft,function(Fe,Le,st,Rt){var me=b.items.length;st.counter=me>1?Tn(Dt.tCounter,Rt.index,me):""}),Wi("BuildControls"+Ft,function(){if(b.items.length>1&&Dt.arrows&&!b.arrowLeft){var Fe=Dt.arrowMarkup,Le=b.arrowLeft=F(Fe.replace(/%title%/gi,Dt.tPrev).replace(/%dir%/gi,"left")).addClass(Ze),st=b.arrowRight=F(Fe.replace(/%title%/gi,Dt.tNext).replace(/%dir%/gi,"right")).addClass(Ze);Le.click(function(){b.prev()}),st.click(function(){b.next()}),b.container.append(Le.add(st))}}),Wi("Change"+Ft,function(){b._preloadTimeout&&clearTimeout(b._preloadTimeout),b._preloadTimeout=setTimeout(function(){b.preloadNearbyImages(),b._preloadTimeout=null},16)}),void Wi(N+Ft,function(){A.off(Ft),b.wrap.off("click"+Ft),b.arrowRight=b.arrowLeft=null}))},next:function(){b.direction=!0,b.index=sr(b.index+1),b.updateItemHTML()},prev:function(){b.direction=!1,b.index=sr(b.index-1),b.updateItemHTML()},goTo:function(Dt){b.direction=Dt>=b.index,b.index=Dt,b.updateItemHTML()},preloadNearbyImages:function(){var Dt,Ft=b.st.gallery.preload,Fe=Math.min(Ft[0],b.items.length),Le=Math.min(Ft[1],b.items.length);for(Dt=1;Dt<=(b.direction?Le:Fe);Dt++)b._preloadItem(b.index+Dt);for(Dt=1;Dt<=(b.direction?Fe:Le);Dt++)b._preloadItem(b.index-Dt)},_preloadItem:function(Dt){if(Dt=sr(Dt),!b.items[Dt].preloaded){var Ft=b.items[Dt];Ft.parsed||(Ft=b.parseEl(Dt)),ti("LazyLoad",Ft),"image"===Ft.type&&(Ft.img=F('<img class="mfp-img" />').on("load.mfploader",function(){Ft.hasSize=!0}).on("error.mfploader",function(){Ft.hasSize=!0,Ft.loadError=!0,ti("LazyLoadError",Ft)}).attr("src",Ft.src)),Ft.preloaded=!0}}}});var Ln="retina";F.magnificPopup.registerModule(Ln,{options:{replaceSrc:function(Dt){return Dt.src.replace(/\.\w+$/,function(Ft){return"@2x"+Ft})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var Dt=b.st.retina,Ft=Dt.ratio;(Ft=isNaN(Ft)?Ft():Ft)>1&&(Wi("ImageHasSize."+Ln,function(Fe,Le){Le.img.css({"max-width":Le.img[0].naturalWidth/Ft,width:"100%"})}),Wi("ElementParse."+Ln,function(Fe,Le){Le.src=Dt.replaceSrc(Le,Ft)}))}}}}),zt()}),function(F){"function"==typeof define&&define.amd?define(["jquery"],F):"object"==typeof exports?module.exports=F(require("jquery")):F(jQuery)}(function(F){"use strict";var b=!1,v=!1,A=0,l=2e3,P=0,I=F,N=document,et=window,Lt=I(et),Zt=[],Mt=et.requestAnimationFrame||et.webkitRequestAnimationFrame||et.mozRequestAnimationFrame||!1,Yt=et.cancelAnimationFrame||et.webkitCancelAnimationFrame||et.mozCancelAnimationFrame||!1;if(Mt)et.cancelAnimationFrame||(Yt=function(ti){});else{var $t=0;Mt=function(ti,ae){var zt=(new Date).getTime(),Ht=Math.max(0,16-(zt-$t)),ht=et.setTimeout(function(){ti(zt+Ht)},Ht);return $t=zt+Ht,ht},Yt=function(ti){et.clearTimeout(ti)}}var zt,ti,ae,vt=et.MutationObserver||et.WebKitMutationObserver||!1,lt=Date.now||function(){return(new Date).getTime()},Vt={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"6px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:40,mousescrollstep:27,touchbehavior:!1,emulatetouch:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:(ti=N.currentScript||!!(zt=N.getElementsByTagName("script")).length&&zt[zt.length-1],ae=ti?ti.src.split("?")[0]:"",ae.split("/").length>0?ae.split("/").slice(0,-1).join("/")+"/":""),preventmultitouchscrolling:!0,disablemutationobserver:!1,enableobserver:!0,scrollbarid:!1},xe=!1,Ye=function(ti,ae){function zt(){var st=d.doc.css(_e.trstyle);return!(!st||"matrix"!=st.substr(0,6))&&st.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function ht(st,Rt,me){var Me=st.css(Rt),ii=parseFloat(Me);if(isNaN(ii)){var re=3==(ii=_i[Me]||0)?me?d.win.outerHeight()-d.win.innerHeight():d.win.outerWidth()-d.win.innerWidth():1;return d.isie8&&ii&&(ii+=1),re?ii:0}return ii}function mt(st,Rt,me,Me){d._bind(st,Rt,function(ii){var re={original:ii=ii||et.event,target:ii.target||ii.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==ii.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return ii.preventDefault?ii.preventDefault():ii.returnValue=!1,!1},stopImmediatePropagation:function(){ii.stopImmediatePropagation?ii.stopImmediatePropagation():ii.cancelBubble=!0}};return"mousewheel"==Rt?(ii.wheelDeltaX&&(re.deltaX=-.025*ii.wheelDeltaX),ii.wheelDeltaY&&(re.deltaY=-.025*ii.wheelDeltaY),!re.deltaY&&!re.deltaX&&(re.deltaY=-.025*ii.wheelDelta)):re.deltaY=ii.detail,me.call(st,re)},Me)}function rt(st,Rt,me,Me){d.scrollrunning||(d.newscrolly=d.getScrollTop(),d.newscrollx=d.getScrollLeft(),Dt=lt());var ii=lt()-Dt;if(Dt=lt(),ii>350?Ft=1:Ft+=(2-Ft)/10,Rt=Rt*Ft|0,st=st*Ft|0){if(Me)if(st<0){if(d.getScrollLeft()>=d.page.maxw)return!0}else if(d.getScrollLeft()<=0)return!0;var re=st>0?1:-1;Ln!==re&&(d.scrollmom&&d.scrollmom.stop(),d.newscrollx=d.getScrollLeft(),Ln=re),d.lastdeltax-=st}if(Rt){if(function(){var ne=d.getScrollTop();if(Rt<0){if(ne>=d.page.maxh)return!0}else if(ne<=0)return!0}()){if(Et.nativeparentscrolling&&me&&!d.ispage&&!d.zoomactive)return!0;var Bt=d.view.h>>1;d.newscrolly<-Bt?(d.newscrolly=-Bt,Rt=-1):d.newscrolly>d.page.maxh+Bt?(d.newscrolly=d.page.maxh+Bt,Rt=1):Rt=0}var Kt=Rt>0?1:-1;Tn!==Kt&&(d.scrollmom&&d.scrollmom.stop(),d.newscrolly=d.getScrollTop(),Tn=Kt),d.lastdeltay-=Rt}(Rt||st)&&d.synched("relativexy",function(){var ne=d.lastdeltay+d.newscrolly;d.lastdeltay=0;var Pe=d.lastdeltax+d.newscrollx;d.lastdeltax=0,d.rail.drag||d.doScrollPos(Pe,ne)})}function J(st,Rt,me){var Me,ii;return!(me||!Fe)||(0===st.deltaMode?(Me=Et.mousescrollstep/54*-st.deltaX|0,ii=Et.mousescrollstep/54*-st.deltaY|0):1===st.deltaMode&&(Me=-st.deltaX*Et.mousescrollstep*50/80|0,ii=-st.deltaY*Et.mousescrollstep*50/80|0),Rt&&Et.oneaxismousemode&&0===Me&&ii&&(Me=ii,ii=0,me&&(Me<0?d.getScrollLeft()>=d.page.maxw:d.getScrollLeft()<=0)&&(ii=Me,Me=0)),d.isrtlmode&&(Me=-Me),rt(Me,ii,me,!0)?void(me&&(Fe=!0)):(Fe=!1,st.stopImmediatePropagation(),st.preventDefault()))}var d=this;this.version="3.7.6",this.name="nicescroll",this.me=ae;var Pt=I("body"),Et=this.opt={doc:Pt,win:!1};if(I.extend(Et,Vt),Et.snapbackspeed=80,ti)for(var se in Et)void 0!==ti[se]&&(Et[se]=ti[se]);if(Et.disablemutationobserver&&(vt=!1),this.doc=Et.doc,this.iddoc=this.doc&&this.doc[0]&&this.doc[0].id||"",this.ispage=/^BODY|HTML/.test(Et.win?Et.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==Et.win,this.win=Et.win||(this.ispage?Lt:this.doc),this.docscroll=this.ispage&&!this.haswrapper?Lt:this.win,this.body=Pt,this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=Et.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,"auto"==Et.rtlmode){var Ie=this.win[0]==et?this.body:this.win,ei=Ie.css("writing-mode")||Ie.css("-webkit-writing-mode")||Ie.css("-ms-writing-mode")||Ie.css("-moz-writing-mode");"horizontal-tb"==ei||"lr-tb"==ei||""===ei?(this.isrtlmode="rtl"==Ie.css("direction"),this.isvertical=!1):(this.isrtlmode="vertical-rl"==ei||"tb"==ei||"tb-rl"==ei||"rl-tb"==ei,this.isvertical="vertical-rl"==ei||"tb"==ei||"tb-rl"==ei)}else this.isrtlmode=!0===Et.rtlmode,this.isvertical=!1;if(this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1,this.observerbody=!1,!1!==Et.scrollbarid)this.id=Et.scrollbarid;else do{this.id="ascrail"+l++}while(N.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.railslocked=!1,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=Et.overflowx,this.overflowy=Et.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=function(){if(xe)return xe;var ti=N.createElement("DIV"),ae=ti.style,zt=navigator.userAgent,Ht=navigator.platform,ht={};return ht.haspointerlock="pointerLockElement"in N||"webkitPointerLockElement"in N||"mozPointerLockElement"in N,ht.isopera="opera"in et,ht.isopera12=ht.isopera&&"getUserMedia"in navigator,ht.isoperamini="[object OperaMini]"===Object.prototype.toString.call(et.operamini),ht.isie="all"in N&&"attachEvent"in ti&&!ht.isopera,ht.isieold=ht.isie&&!("msInterpolationMode"in ae),ht.isie7=ht.isie&&!ht.isieold&&(!("documentMode"in N)||7===N.documentMode),ht.isie8=ht.isie&&"documentMode"in N&&8===N.documentMode,ht.isie9=ht.isie&&"performance"in et&&9===N.documentMode,ht.isie10=ht.isie&&"performance"in et&&10===N.documentMode,ht.isie11="msRequestFullscreen"in ti&&N.documentMode>=11,ht.ismsedge="msCredentials"in et,ht.ismozilla="MozAppearance"in ae,ht.iswebkit=!ht.ismsedge&&"WebkitAppearance"in ae,ht.ischrome=ht.iswebkit&&"chrome"in et,ht.ischrome38=ht.ischrome&&"touchAction"in ae,ht.ischrome22=!ht.ischrome38&&ht.ischrome&&ht.haspointerlock,ht.ischrome26=!ht.ischrome38&&ht.ischrome&&"transition"in ae,ht.cantouch="ontouchstart"in N.documentElement||"ontouchstart"in et,ht.hasw3ctouch=!!et.PointerEvent&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),ht.hasmstouch=!ht.hasw3ctouch&&(et.MSPointerEvent||!1),ht.ismac=/^mac$/i.test(Ht),ht.isios=ht.cantouch&&/iphone|ipad|ipod/i.test(Ht),ht.isios4=ht.isios&&!("seal"in Object),ht.isios7=ht.isios&&"webkitHidden"in N,ht.isios8=ht.isios&&"hidden"in N,ht.isios10=ht.isios&&et.Proxy,ht.isandroid=/android/i.test(zt),ht.haseventlistener="addEventListener"in ti,ht.trstyle=!1,ht.hastransform=!1,ht.hastranslate3d=!1,ht.transitionstyle=!1,ht.hastransition=!1,ht.transitionend=!1,ht.trstyle="transform",ht.hastransform="transform"in ae||function(){for(var mt=["msTransform","webkitTransform","MozTransform","OTransform"],rt=0,J=mt.length;rt<J;rt++)if(void 0!==ae[mt[rt]]){ht.trstyle=mt[rt];break}ht.hastransform=!!ht.trstyle}(),ht.hastransform&&(ae[ht.trstyle]="translate3d(1px,2px,3px)",ht.hastranslate3d=/translate3d/.test(ae[ht.trstyle])),ht.transitionstyle="transition",ht.prefixstyle="",ht.transitionend="transitionend",ht.hastransition="transition"in ae||function(){ht.transitionend=!1;for(var mt=["webkitTransition","msTransition","MozTransition","OTransition","OTransition","KhtmlTransition"],rt=["-webkit-","-ms-","-moz-","-o-","-o","-khtml-"],J=["webkitTransitionEnd","msTransitionEnd","transitionend","otransitionend","oTransitionEnd","KhtmlTransitionEnd"],d=0,Pt=mt.length;d<Pt;d++)if(mt[d]in ae){ht.transitionstyle=mt[d],ht.prefixstyle=rt[d],ht.transitionend=J[d];break}ht.ischrome26&&(ht.prefixstyle=rt[1]),ht.hastransition=ht.transitionstyle}(),ht.cursorgrabvalue=function(){var mt=["grab","-webkit-grab","-moz-grab"];(ht.ischrome&&!ht.ischrome38||ht.isie)&&(mt=[]);for(var rt=0,J=mt.length;rt<J;rt++){var d=mt[rt];if(ae.cursor=d,ae.cursor==d)return d}return"url(https://cdnjs.cloudflare.com/ajax/libs/slider-pro/1.3.0/css/images/openhand.cur),n-resize"}(),ht.hasmousecapture="setCapture"in ti,ht.hasMutationObserver=!1!==vt,ti=null,xe=ht,ht}();var _e=I.extend({},this.detected);this.canhwscroll=_e.hastransform&&Et.hwacceleration,this.ishwscroll=this.canhwscroll&&d.haswrapper,this.hasreversehr=!(!this.isrtlmode||(this.isvertical?_e.iswebkit||_e.isie||_e.isie11:_e.iswebkit||_e.isie&&!_e.isie10&&!_e.isie11)),this.istouchcapable=!1,(_e.cantouch||!_e.hasw3ctouch&&!_e.hasmstouch)&&(!_e.cantouch||_e.isios||_e.isandroid||!_e.iswebkit&&!_e.ismozilla)||(this.istouchcapable=!0),Et.enablemouselockapi||(_e.hasmousecapture=!1,_e.haspointerlock=!1),this.debounced=function(st,Rt,me){d&&(d.delaylist[st]||(d.delaylist[st]={h:Mt(function(){d.delaylist[st].fn.call(d),d.delaylist[st]=!1},me)},Rt.call(d)),d.delaylist[st].fn=Rt)},this.synched=function(st,Rt){d.synclist[st]?d.synclist[st]=Rt:(d.synclist[st]=Rt,Mt(function(){d&&(d.synclist[st]&&d.synclist[st].call(d),d.synclist[st]=null)}))},this.unsynched=function(st){d.synclist[st]&&(d.synclist[st]=!1)},this.css=function(st,Rt){for(var me in Rt)d.saved.css.push([st,me,st.css(me)]),st.css(me,Rt[me])},this.scrollTop=function(st){return void 0===st?d.getScrollTop():d.setScrollTop(st)},this.scrollLeft=function(st){return void 0===st?d.getScrollLeft():d.setScrollLeft(st)};var Ri=function(st,Rt,me,Me,ii,re,Bt){this.st=st,this.ed=Rt,this.spd=me,this.p1=Me||0,this.p2=ii||1,this.p3=re||0,this.p4=Bt||1,this.ts=lt(),this.df=Rt-st};if(Ri.prototype={B2:function(st){return 3*(1-st)*(1-st)*st},B3:function(st){return 3*(1-st)*st*st},B4:function(st){return st*st*st},getPos:function(){return(lt()-this.ts)/this.spd},getNow:function(){var st=(lt()-this.ts)/this.spd,Rt=this.B2(st)+this.B3(st)+this.B4(st);return st>=1?this.ed:this.st+this.df*Rt|0},update:function(st,Rt){return this.st=this.getNow(),this.ed=st,this.spd=Rt,this.ts=lt(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},_e.hastranslate3d&&_e.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(st){if(!st){var Rt=zt();if(Rt)return 16==Rt.length?-Rt[13]:-Rt[5];if(d.timerscroll&&d.timerscroll.bz)return d.timerscroll.bz.getNow()}return d.doc.translate.y},this.getScrollLeft=function(st){if(!st){var Rt=zt();if(Rt)return 16==Rt.length?-Rt[12]:-Rt[4];if(d.timerscroll&&d.timerscroll.bh)return d.timerscroll.bh.getNow()}return d.doc.translate.x},this.notifyScrollEvent=function(st){var Rt=N.createEvent("UIEvents");Rt.initUIEvent("scroll",!1,!1,et,1),Rt.niceevent=!0,st.dispatchEvent(Rt)};var Gi=this.isrtlmode?1:-1;_e.hastranslate3d&&Et.enabletranslate3d?(this.setScrollTop=function(st,Rt){d.doc.translate.y=st,d.doc.translate.ty=-1*st+"px",d.doc.css(_e.trstyle,"translate3d("+d.doc.translate.tx+","+d.doc.translate.ty+",0)"),Rt||d.notifyScrollEvent(d.win[0])},this.setScrollLeft=function(st,Rt){d.doc.translate.x=st,d.doc.translate.tx=st*Gi+"px",d.doc.css(_e.trstyle,"translate3d("+d.doc.translate.tx+","+d.doc.translate.ty+",0)"),Rt||d.notifyScrollEvent(d.win[0])}):(this.setScrollTop=function(st,Rt){d.doc.translate.y=st,d.doc.translate.ty=-1*st+"px",d.doc.css(_e.trstyle,"translate("+d.doc.translate.tx+","+d.doc.translate.ty+")"),Rt||d.notifyScrollEvent(d.win[0])},this.setScrollLeft=function(st,Rt){d.doc.translate.x=st,d.doc.translate.tx=st*Gi+"px",d.doc.css(_e.trstyle,"translate("+d.doc.translate.tx+","+d.doc.translate.ty+")"),Rt||d.notifyScrollEvent(d.win[0])})}else this.getScrollTop=function(){return d.docscroll.scrollTop()},this.setScrollTop=function(st){d.docscroll.scrollTop(st)},this.getScrollLeft=function(){return d.hasreversehr?d.detected.ismozilla?d.page.maxw-Math.abs(d.docscroll.scrollLeft()):d.page.maxw-d.docscroll.scrollLeft():d.docscroll.scrollLeft()},this.setScrollLeft=function(st){return setTimeout(function(){if(d)return d.hasreversehr&&(st=d.detected.ismozilla?-(d.page.maxw-st):d.page.maxw-st),d.docscroll.scrollLeft(st)},1)};this.getTarget=function(st){return!!st&&(st.target?st.target:!!st.srcElement&&st.srcElement)},this.hasParent=function(st,Rt){if(!st)return!1;for(var me=st.target||st.srcElement||st||!1;me&&me.id!=Rt;)me=me.parentNode||!1;return!1!==me};var _i={thin:1,medium:3,thick:5};this.getDocumentScrollOffset=function(){return{top:et.pageYOffset||N.documentElement.scrollTop,left:et.pageXOffset||N.documentElement.scrollLeft}},this.getOffset=function(){if(d.isfixed){var st=d.win.offset(),Rt=d.getDocumentScrollOffset();return st.top-=Rt.top,st.left-=Rt.left,st}var me=d.win.offset();if(!d.viewport)return me;var Me=d.viewport.offset();return{top:me.top-Me.top,left:me.left-Me.left}},this.updateScrollBar=function(st){var Rt,me;if(d.ishwscroll)d.rail.css({height:d.win.innerHeight()-(Et.railpadding.top+Et.railpadding.bottom)}),d.railh&&d.railh.css({width:d.win.innerWidth()-(Et.railpadding.left+Et.railpadding.right)});else{var Me=d.getOffset();if((Rt={top:Me.top,left:Me.left-(Et.railpadding.left+Et.railpadding.right)}).top+=ht(d.win,"border-top-width",!0),Rt.left+=d.rail.align?d.win.outerWidth()-ht(d.win,"border-right-width")-d.rail.width:ht(d.win,"border-left-width"),(me=Et.railoffset)&&(me.top&&(Rt.top+=me.top),me.left&&(Rt.left+=me.left)),d.railslocked||d.rail.css({top:Rt.top,left:Rt.left,height:(st?st.h:d.win.innerHeight())-(Et.railpadding.top+Et.railpadding.bottom)}),d.zoom&&d.zoom.css({top:Rt.top+1,left:1==d.rail.align?Rt.left-20:Rt.left+d.rail.width+4}),d.railh&&!d.railslocked){Rt={top:Me.top,left:Me.left},(me=Et.railhoffset)&&(me.top&&(Rt.top+=me.top),me.left&&(Rt.left+=me.left));var ii=d.railh.align?Rt.top+ht(d.win,"border-top-width",!0)+d.win.innerHeight()-d.railh.height:Rt.top+ht(d.win,"border-top-width",!0),re=Rt.left+ht(d.win,"border-left-width");d.railh.css({top:ii-(Et.railpadding.top+Et.railpadding.bottom),left:re,width:d.railh.width})}}},this.doRailClick=function(st,Rt,me){var Me,ii,re,Bt;d.railslocked||(d.cancelEvent(st),"pageY"in st||(st.pageX=st.clientX+N.documentElement.scrollLeft,st.pageY=st.clientY+N.documentElement.scrollTop),Rt?(Me=me?d.doScrollLeft:d.doScrollTop,re=me?(st.pageX-d.railh.offset().left-d.cursorwidth/2)*d.scrollratio.x:(st.pageY-d.rail.offset().top-d.cursorheight/2)*d.scrollratio.y,d.unsynched("relativexy"),Me(0|re)):(Me=me?d.doScrollLeftBy:d.doScrollBy,re=me?d.scroll.x:d.scroll.y,Bt=me?st.pageX-d.railh.offset().left:st.pageY-d.rail.offset().top,ii=me?d.view.w:d.view.h,Me(re>=Bt?ii:-ii)))},d.newscrolly=d.newscrollx=0,d.hasanimationframe="requestAnimationFrame"in et,d.hascancelanimationframe="cancelAnimationFrame"in et,d.hasborderbox=!1,this.init=function(){if(d.saved.css=[],_e.isoperamini||_e.isandroid&&!("hidden"in N))return!0;Et.emulatetouch=Et.emulatetouch||Et.touchbehavior,d.hasborderbox=et.getComputedStyle&&"border-box"===et.getComputedStyle(N.body)["box-sizing"];var st={"overflow-y":"hidden"};if((_e.isie11||_e.isie10)&&(st["-ms-overflow-style"]="none"),d.ishwscroll&&(this.doc.css(_e.transitionstyle,_e.prefixstyle+"transform 0ms ease-out"),_e.transitionend&&d.bind(d.doc,_e.transitionend,d.onScrollTransitionEnd,!1)),d.zindex="auto",d.zindex=d.ispage||"auto"!=Et.zindex?Et.zindex:function Ht(){var st=d.win;if("zIndex"in st)return st.zIndex();for(;st.length>0;){if(9==st[0].nodeType)return!1;var Rt=st.css("zIndex");if(!isNaN(Rt)&&0!==Rt)return parseInt(Rt);st=st.parent()}return!1}()||"auto",!d.ispage&&"auto"!=d.zindex&&d.zindex>P&&(P=d.zindex),d.isie&&0===d.zindex&&"auto"==Et.zindex&&(d.zindex="auto"),!d.ispage||!_e.isieold){var Rt=d.docscroll;d.ispage&&(Rt=d.haswrapper?d.win:d.doc),d.css(Rt,st),d.ispage&&(_e.isie11||_e.isie)&&d.css(I("html"),st),!_e.isios||d.ispage||d.haswrapper||d.css(Pt,{"-webkit-overflow-scrolling":"touch"});var me=I(N.createElement("div"));me.css({position:"relative",top:0,float:"right",width:Et.cursorwidth,height:0,"background-color":Et.cursorcolor,border:Et.cursorborder,"background-clip":"padding-box","-webkit-border-radius":Et.cursorborderradius,"-moz-border-radius":Et.cursorborderradius,"border-radius":Et.cursorborderradius}),me.addClass("nicescroll-cursors"),d.cursor=me;var Me=I(N.createElement("div"));Me.attr("id",d.id),Me.addClass("nicescroll-rails nicescroll-rails-vr");var ii,re,Bt=["left","right","top","bottom"];for(var Kt in Bt)(ii=Et.railpadding[re=Bt[Kt]]||0)&&Me.css("padding-"+re,ii+"px");Me.append(me),Me.width=Math.max(parseFloat(Et.cursorwidth),me.outerWidth()),Me.css({width:Me.width+"px",zIndex:d.zindex,background:Et.background,cursor:"default"}),Me.visibility=!0,Me.scrollable=!0,Me.align="left"==Et.railalign?0:1,d.rail=Me,d.rail.drag=!1;var Pe,ne=!1;if(!Et.boxzoom||d.ispage||_e.isieold||(ne=N.createElement("div"),d.bind(ne,"click",d.doZoom),d.bind(ne,"mouseenter",function(){d.zoom.css("opacity",Et.cursoropacitymax)}),d.bind(ne,"mouseleave",function(){d.zoom.css("opacity",Et.cursoropacitymin)}),d.zoom=I(ne),d.zoom.css({cursor:"pointer",zIndex:d.zindex,backgroundImage:"url("+Et.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0 0"}),Et.dblclickzoom&&d.bind(d.win,"dblclick",d.doZoom),_e.cantouch&&Et.gesturezoom&&(d.ongesturezoom=function(pt){return pt.scale>1.5&&d.doZoomIn(pt),pt.scale<.8&&d.doZoomOut(pt),d.cancelEvent(pt)},d.bind(d.win,"gestureend",d.ongesturezoom))),d.railh=!1,Et.horizrailenabled&&(d.css(Rt,{overflowX:"hidden"}),(me=I(N.createElement("div"))).css({position:"absolute",top:0,height:Et.cursorwidth,width:0,backgroundColor:Et.cursorcolor,border:Et.cursorborder,backgroundClip:"padding-box","-webkit-border-radius":Et.cursorborderradius,"-moz-border-radius":Et.cursorborderradius,"border-radius":Et.cursorborderradius}),_e.isieold&&me.css("overflow","hidden"),me.addClass("nicescroll-cursors"),d.cursorh=me,(Pe=I(N.createElement("div"))).attr("id",d.id+"-hr"),Pe.addClass("nicescroll-rails nicescroll-rails-hr"),Pe.height=Math.max(parseFloat(Et.cursorwidth),me.outerHeight()),Pe.css({height:Pe.height+"px",zIndex:d.zindex,background:Et.background}),Pe.append(me),Pe.visibility=!0,Pe.scrollable=!0,Pe.align="top"==Et.railvalign?0:1,d.railh=Pe,d.railh.drag=!1),d.ispage)Me.css({position:"fixed",top:0,height:"100%"}),Me.css(Me.align?{right:0}:{left:0}),d.body.append(Me),d.railh&&(Pe.css({position:"fixed",left:0,width:"100%"}),Pe.css(Pe.align?{bottom:0}:{top:0}),d.body.append(Pe));else{if(d.ishwscroll){"static"==d.win.css("position")&&d.css(d.win,{position:"relative"});var oi="HTML"==d.win[0].nodeName?d.body:d.win;I(oi).scrollTop(0).scrollLeft(0),d.zoom&&(d.zoom.css({position:"absolute",top:1,right:0,"margin-right":Me.width+4}),oi.append(d.zoom)),Me.css({position:"absolute",top:0}),Me.css(Me.align?{right:0}:{left:0}),oi.append(Me),Pe&&(Pe.css({position:"absolute",left:0,bottom:0}),Pe.css(Pe.align?{bottom:0}:{top:0}),oi.append(Pe))}else{d.isfixed="fixed"==d.win.css("position");var Ci=d.isfixed?"fixed":"absolute";d.isfixed||(d.viewport=d.getViewport(d.win[0])),d.viewport&&(d.body=d.viewport,/fixed|absolute/.test(d.viewport.css("position"))||d.css(d.viewport,{position:"relative"})),Me.css({position:Ci}),d.zoom&&d.zoom.css({position:Ci}),d.updateScrollBar(),d.body.append(Me),d.zoom&&d.body.append(d.zoom),d.railh&&(Pe.css({position:Ci}),d.body.append(Pe))}_e.isios&&d.css(d.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),Et.disableoutline&&(_e.isie&&d.win.attr("hideFocus","true"),_e.iswebkit&&d.win.css("outline","none"))}if(!1===Et.autohidemode?(d.autohidedom=!1,d.rail.css({opacity:Et.cursoropacitymax}),d.railh&&d.railh.css({opacity:Et.cursoropacitymax})):!0===Et.autohidemode||"leave"===Et.autohidemode?(d.autohidedom=I().add(d.rail),_e.isie8&&(d.autohidedom=d.autohidedom.add(d.cursor)),d.railh&&(d.autohidedom=d.autohidedom.add(d.railh)),d.railh&&_e.isie8&&(d.autohidedom=d.autohidedom.add(d.cursorh))):"scroll"==Et.autohidemode?(d.autohidedom=I().add(d.rail),d.railh&&(d.autohidedom=d.autohidedom.add(d.railh))):"cursor"==Et.autohidemode?(d.autohidedom=I().add(d.cursor),d.railh&&(d.autohidedom=d.autohidedom.add(d.cursorh))):"hidden"==Et.autohidemode&&(d.autohidedom=!1,d.hide(),d.railslocked=!1),_e.cantouch||d.istouchcapable||Et.emulatetouch||_e.hasmstouch){d.scrollmom=new Ui(d),d.ontouchstart=function(pt){if(d.locked||pt.pointerType&&("mouse"===pt.pointerType||pt.pointerType===pt.MSPOINTER_TYPE_MOUSE))return!1;if(d.hasmoving=!1,d.scrollmom.timer&&(d.triggerScrollEnd(),d.scrollmom.stop()),!d.railslocked){var Wt=d.getTarget(pt);if(Wt&&/INPUT/i.test(Wt.nodeName)&&/range/i.test(Wt.type))return d.stopPropagation(pt);var ue="mousedown"===pt.type;if(!("clientX"in pt)&&"changedTouches"in pt&&(pt.clientX=pt.changedTouches[0].clientX,pt.clientY=pt.changedTouches[0].clientY),d.forcescreen){var We=pt;(pt={original:pt.original?pt.original:pt}).clientX=We.screenX,pt.clientY=We.screenY}if(d.rail.drag={x:pt.clientX,y:pt.clientY,sx:d.scroll.x,sy:d.scroll.y,st:d.getScrollTop(),sl:d.getScrollLeft(),pt:2,dl:!1,tg:Wt},d.ispage||!Et.directionlockdeadzone)d.rail.drag.dl="f";else{var ri={w:Lt.width(),h:Lt.height()},Ne=d.getContentSize();d.rail.drag.ck=d.rail.scrollable&&!d.railh.scrollable?Ne.h-ri.h>0&&"v":!(d.rail.scrollable||!d.railh.scrollable)&&Ne.w-ri.w>0&&"h"}if(Et.emulatetouch&&d.isiframe&&_e.isie){var Ni=d.win.position();d.rail.drag.x+=Ni.left,d.rail.drag.y+=Ni.top}if(d.hasmoving=!1,d.lastmouseup=!1,d.scrollmom.reset(pt.clientX,pt.clientY),Wt&&ue){if(!/INPUT|SELECT|BUTTON|TEXTAREA/i.test(Wt.nodeName))return _e.hasmousecapture&&Wt.setCapture(),Et.emulatetouch?(Wt.onclick&&!Wt._onclick&&(Wt._onclick=Wt.onclick,Wt.onclick=function(Ii){if(d.hasmoving)return!1;Wt._onclick.call(this,Ii)}),d.cancelEvent(pt)):d.stopPropagation(pt);/SUBMIT|CANCEL|BUTTON/i.test(I(Wt).attr("type"))&&(d.preventclick={tg:Wt,click:!1})}}},d.ontouchend=function(pt){if(!d.rail.drag)return!0;if(2==d.rail.drag.pt){if(pt.pointerType&&("mouse"===pt.pointerType||pt.pointerType===pt.MSPOINTER_TYPE_MOUSE))return!1;d.rail.drag=!1;var Wt="mouseup"===pt.type;if(d.hasmoving&&(d.scrollmom.doMomentum(),d.lastmouseup=!0,d.hideCursor(),_e.hasmousecapture&&N.releaseCapture(),Wt))return d.cancelEvent(pt)}else if(1==d.rail.drag.pt)return d.onmouseup(pt)};var ar=Et.emulatetouch&&d.isiframe&&!_e.hasmousecapture,tr=.3*Et.directionlockdeadzone|0;d.ontouchmove=function(pt,Wt){if(!d.rail.drag||pt.targetTouches&&Et.preventmultitouchscrolling&&pt.targetTouches.length>1||pt.pointerType&&("mouse"===pt.pointerType||pt.pointerType===pt.MSPOINTER_TYPE_MOUSE))return!0;if(2==d.rail.drag.pt){var ue,We;if("changedTouches"in pt&&(pt.clientX=pt.changedTouches[0].clientX,pt.clientY=pt.changedTouches[0].clientY),We=ue=0,ar&&!Wt){var ri=d.win.position();We=-ri.left,ue=-ri.top}var Ne=pt.clientY+ue,zi=Ne-d.rail.drag.y,Fi=pt.clientX+We,Ni=Fi-d.rail.drag.x,Ii=d.rail.drag.st-zi;if(d.ishwscroll&&Et.bouncescroll)Ii<0?Ii=Math.round(Ii/2):Ii>d.page.maxh&&(Ii=d.page.maxh+Math.round((Ii-d.page.maxh)/2));else if(Ii<0?(Ii=0,Ne=0):Ii>d.page.maxh&&(Ii=d.page.maxh,Ne=0),0===Ne&&!d.hasmoving)return d.ispage||(d.rail.drag=!1),!0;var wi=d.getScrollLeft();if(d.railh&&d.railh.scrollable&&(wi=d.isrtlmode?Ni-d.rail.drag.sl:d.rail.drag.sl-Ni,d.ishwscroll&&Et.bouncescroll?wi<0?wi=Math.round(wi/2):wi>d.page.maxw&&(wi=d.page.maxw+Math.round((wi-d.page.maxw)/2)):(wi<0&&(wi=0,Fi=0),wi>d.page.maxw&&(wi=d.page.maxw,Fi=0))),!d.hasmoving){if(d.rail.drag.y===pt.clientY&&d.rail.drag.x===pt.clientX)return d.cancelEvent(pt);var Li=Math.abs(zi),cr=Math.abs(Ni),Or=Et.directionlockdeadzone;if(d.rail.drag.ck?"v"==d.rail.drag.ck?cr>Or&&Li<=tr?d.rail.drag=!1:Li>Or&&(d.rail.drag.dl="v"):"h"==d.rail.drag.ck&&(Li>Or&&cr<=tr?d.rail.drag=!1:cr>Or&&(d.rail.drag.dl="h")):Li>Or&&cr>Or?d.rail.drag.dl="f":Li>Or?d.rail.drag.dl=cr>tr?"f":"v":cr>Or&&(d.rail.drag.dl=Li>tr?"f":"h"),!d.rail.drag.dl)return d.cancelEvent(pt);d.triggerScrollStart(pt.clientX,pt.clientY,0,0,0),d.hasmoving=!0}return d.preventclick&&!d.preventclick.click&&(d.preventclick.click=d.preventclick.tg.onclick||!1,d.preventclick.tg.onclick=d.onpreventclick),d.rail.drag.dl&&("v"==d.rail.drag.dl?wi=d.rail.drag.sl:"h"==d.rail.drag.dl&&(Ii=d.rail.drag.st)),d.synched("touchmove",function(){d.rail.drag&&2==d.rail.drag.pt&&(d.prepareTransition&&d.resetTransition(),d.rail.scrollable&&d.setScrollTop(Ii),d.scrollmom.update(Fi,Ne),d.railh&&d.railh.scrollable?(d.setScrollLeft(wi),d.showCursor(Ii,wi)):d.showCursor(Ii),_e.isie10&&N.selection.clear())}),d.cancelEvent(pt)}return 1==d.rail.drag.pt?d.onmousemove(pt):void 0},d.ontouchstartCursor=function(pt,Wt){if(!d.rail.drag||3==d.rail.drag.pt){if(d.locked)return d.cancelEvent(pt);d.cancelScroll(),d.rail.drag={x:pt.touches[0].clientX,y:pt.touches[0].clientY,sx:d.scroll.x,sy:d.scroll.y,pt:3,hr:!!Wt};var ue=d.getTarget(pt);return!d.ispage&&_e.hasmousecapture&&ue.setCapture(),d.isiframe&&!_e.hasmousecapture&&(d.saved.csspointerevents=d.doc.css("pointer-events"),d.css(d.doc,{"pointer-events":"none"})),d.cancelEvent(pt)}},d.ontouchendCursor=function(pt){if(d.rail.drag)return _e.hasmousecapture&&N.releaseCapture(),d.isiframe&&!_e.hasmousecapture&&d.doc.css("pointer-events",d.saved.csspointerevents),3!=d.rail.drag.pt?void 0:(d.rail.drag=!1,d.cancelEvent(pt))},d.ontouchmoveCursor=function(pt){if(d.rail.drag){if(3!=d.rail.drag.pt)return;if(d.cursorfreezed=!0,d.rail.drag.hr){d.scroll.x=d.rail.drag.sx+(pt.touches[0].clientX-d.rail.drag.x),d.scroll.x<0&&(d.scroll.x=0);var Wt=d.scrollvaluemaxw;d.scroll.x>Wt&&(d.scroll.x=Wt)}else{d.scroll.y=d.rail.drag.sy+(pt.touches[0].clientY-d.rail.drag.y),d.scroll.y<0&&(d.scroll.y=0);var ue=d.scrollvaluemax;d.scroll.y>ue&&(d.scroll.y=ue)}return d.synched("touchmove",function(){d.rail.drag&&3==d.rail.drag.pt&&(d.showCursor(),d.rail.drag.hr?d.doScrollLeft(Math.round(d.scroll.x*d.scrollratio.x),Et.cursordragspeed):d.doScrollTop(Math.round(d.scroll.y*d.scrollratio.y),Et.cursordragspeed))}),d.cancelEvent(pt)}}}if(d.onmousedown=function(pt,Wt){if(!d.rail.drag||1==d.rail.drag.pt){if(d.railslocked)return d.cancelEvent(pt);d.cancelScroll(),d.rail.drag={x:pt.clientX,y:pt.clientY,sx:d.scroll.x,sy:d.scroll.y,pt:1,hr:Wt||!1};var ue=d.getTarget(pt);return _e.hasmousecapture&&ue.setCapture(),d.isiframe&&!_e.hasmousecapture&&(d.saved.csspointerevents=d.doc.css("pointer-events"),d.css(d.doc,{"pointer-events":"none"})),d.hasmoving=!1,d.cancelEvent(pt)}},d.onmouseup=function(pt){if(d.rail.drag)return 1!=d.rail.drag.pt||(_e.hasmousecapture&&N.releaseCapture(),d.isiframe&&!_e.hasmousecapture&&d.doc.css("pointer-events",d.saved.csspointerevents),d.rail.drag=!1,d.cursorfreezed=!1,d.hasmoving&&d.triggerScrollEnd(),d.cancelEvent(pt))},d.onmousemove=function(pt){if(d.rail.drag){if(1!==d.rail.drag.pt)return;if(_e.ischrome&&0===pt.which)return d.onmouseup(pt);if(d.cursorfreezed=!0,d.hasmoving||d.triggerScrollStart(pt.clientX,pt.clientY,0,0,0),d.hasmoving=!0,d.rail.drag.hr){d.scroll.x=d.rail.drag.sx+(pt.clientX-d.rail.drag.x),d.scroll.x<0&&(d.scroll.x=0);var Wt=d.scrollvaluemaxw;d.scroll.x>Wt&&(d.scroll.x=Wt)}else{d.scroll.y=d.rail.drag.sy+(pt.clientY-d.rail.drag.y),d.scroll.y<0&&(d.scroll.y=0);var ue=d.scrollvaluemax;d.scroll.y>ue&&(d.scroll.y=ue)}return d.synched("mousemove",function(){d.cursorfreezed&&(d.showCursor(),d.rail.drag.hr?d.scrollLeft(Math.round(d.scroll.x*d.scrollratio.x)):d.scrollTop(Math.round(d.scroll.y*d.scrollratio.y)))}),d.cancelEvent(pt)}d.checkarea=0},_e.cantouch||Et.emulatetouch)d.onpreventclick=function(pt){if(d.preventclick)return d.preventclick.tg.onclick=d.preventclick.click,d.preventclick=!1,d.cancelEvent(pt)},d.onclick=!_e.isios&&function(pt){return!d.lastmouseup||(d.lastmouseup=!1,d.cancelEvent(pt))},Et.grabcursorenabled&&_e.cursorgrabvalue&&(d.css(d.ispage?d.doc:d.win,{cursor:_e.cursorgrabvalue}),d.css(d.rail,{cursor:_e.cursorgrabvalue}));else{var Qr=function(pt){if(d.selectiondrag){if(pt){var Wt=d.win.outerHeight(),ue=pt.pageY-d.selectiondrag.top;ue>0&&ue<Wt&&(ue=0),ue>=Wt&&(ue-=Wt),d.selectiondrag.df=ue}0!==d.selectiondrag.df&&(d.doScrollBy(-2*d.selectiondrag.df/6|0),d.debounced("doselectionscroll",function(){Qr()},50))}};d.hasTextSelected="getSelection"in N?function(){return N.getSelection().rangeCount>0}:"selection"in N?function(){return"None"!=N.selection.type}:function(){return!1},d.onselectionstart=function(pt){d.ispage||(d.selectiondrag=d.win.offset())},d.onselectionend=function(pt){d.selectiondrag=!1},d.onselectiondrag=function(pt){d.selectiondrag&&d.hasTextSelected()&&d.debounced("selectionscroll",function(){Qr(pt)},250)}}if(_e.hasw3ctouch?(d.css(d.ispage?I("html"):d.win,{"touch-action":"none"}),d.css(d.rail,{"touch-action":"none"}),d.css(d.cursor,{"touch-action":"none"}),d.bind(d.win,"pointerdown",d.ontouchstart),d.bind(N,"pointerup",d.ontouchend),d.delegate(N,"pointermove",d.ontouchmove)):_e.hasmstouch?(d.css(d.ispage?I("html"):d.win,{"-ms-touch-action":"none"}),d.css(d.rail,{"-ms-touch-action":"none"}),d.css(d.cursor,{"-ms-touch-action":"none"}),d.bind(d.win,"MSPointerDown",d.ontouchstart),d.bind(N,"MSPointerUp",d.ontouchend),d.delegate(N,"MSPointerMove",d.ontouchmove),d.bind(d.cursor,"MSGestureHold",function(pt){pt.preventDefault()}),d.bind(d.cursor,"contextmenu",function(pt){pt.preventDefault()})):_e.cantouch&&(d.bind(d.win,"touchstart",d.ontouchstart,!1,!0),d.bind(N,"touchend",d.ontouchend,!1,!0),d.bind(N,"touchcancel",d.ontouchend,!1,!0),d.delegate(N,"touchmove",d.ontouchmove,!1,!0)),Et.emulatetouch&&(d.bind(d.win,"mousedown",d.ontouchstart,!1,!0),d.bind(N,"mouseup",d.ontouchend,!1,!0),d.bind(N,"mousemove",d.ontouchmove,!1,!0)),(Et.cursordragontouch||!_e.cantouch&&!Et.emulatetouch)&&(d.rail.css({cursor:"default"}),d.railh&&d.railh.css({cursor:"default"}),d.jqbind(d.rail,"mouseenter",function(){if(!d.ispage&&!d.win.is(":visible"))return!1;d.canshowonmouseevent&&d.showCursor(),d.rail.active=!0}),d.jqbind(d.rail,"mouseleave",function(){d.rail.active=!1,d.rail.drag||d.hideCursor()}),Et.sensitiverail&&(d.bind(d.rail,"click",function(pt){d.doRailClick(pt,!1,!1)}),d.bind(d.rail,"dblclick",function(pt){d.doRailClick(pt,!0,!1)}),d.bind(d.cursor,"click",function(pt){d.cancelEvent(pt)}),d.bind(d.cursor,"dblclick",function(pt){d.cancelEvent(pt)})),d.railh&&(d.jqbind(d.railh,"mouseenter",function(){if(!d.ispage&&!d.win.is(":visible"))return!1;d.canshowonmouseevent&&d.showCursor(),d.rail.active=!0}),d.jqbind(d.railh,"mouseleave",function(){d.rail.active=!1,d.rail.drag||d.hideCursor()}),Et.sensitiverail&&(d.bind(d.railh,"click",function(pt){d.doRailClick(pt,!1,!0)}),d.bind(d.railh,"dblclick",function(pt){d.doRailClick(pt,!0,!0)}),d.bind(d.cursorh,"click",function(pt){d.cancelEvent(pt)}),d.bind(d.cursorh,"dblclick",function(pt){d.cancelEvent(pt)})))),Et.cursordragontouch&&(this.istouchcapable||_e.cantouch)&&(d.bind(d.cursor,"touchstart",d.ontouchstartCursor),d.bind(d.cursor,"touchmove",d.ontouchmoveCursor),d.bind(d.cursor,"touchend",d.ontouchendCursor),d.cursorh&&d.bind(d.cursorh,"touchstart",function(pt){d.ontouchstartCursor(pt,!0)}),d.cursorh&&d.bind(d.cursorh,"touchmove",d.ontouchmoveCursor),d.cursorh&&d.bind(d.cursorh,"touchend",d.ontouchendCursor)),Et.emulatetouch||_e.isandroid||_e.isios?(d.bind(_e.hasmousecapture?d.win:N,"mouseup",d.ontouchend),d.onclick&&d.bind(N,"click",d.onclick),Et.cursordragontouch?(d.bind(d.cursor,"mousedown",d.onmousedown),d.bind(d.cursor,"mouseup",d.onmouseup),d.cursorh&&d.bind(d.cursorh,"mousedown",function(pt){d.onmousedown(pt,!0)}),d.cursorh&&d.bind(d.cursorh,"mouseup",d.onmouseup)):(d.bind(d.rail,"mousedown",function(pt){pt.preventDefault()}),d.railh&&d.bind(d.railh,"mousedown",function(pt){pt.preventDefault()}))):(d.bind(_e.hasmousecapture?d.win:N,"mouseup",d.onmouseup),d.bind(N,"mousemove",d.onmousemove),d.onclick&&d.bind(N,"click",d.onclick),d.bind(d.cursor,"mousedown",d.onmousedown),d.bind(d.cursor,"mouseup",d.onmouseup),d.railh&&(d.bind(d.cursorh,"mousedown",function(pt){d.onmousedown(pt,!0)}),d.bind(d.cursorh,"mouseup",d.onmouseup)),!d.ispage&&Et.enablescrollonselection&&(d.bind(d.win[0],"mousedown",d.onselectionstart),d.bind(N,"mouseup",d.onselectionend),d.bind(d.cursor,"mouseup",d.onselectionend),d.cursorh&&d.bind(d.cursorh,"mouseup",d.onselectionend),d.bind(N,"mousemove",d.onselectiondrag)),d.zoom&&(d.jqbind(d.zoom,"mouseenter",function(){d.canshowonmouseevent&&d.showCursor(),d.rail.active=!0}),d.jqbind(d.zoom,"mouseleave",function(){d.rail.active=!1,d.rail.drag||d.hideCursor()}))),Et.enablemousewheel&&(d.isiframe||d.mousewheel(_e.isie&&d.ispage?N:d.win,d.onmousewheel),d.mousewheel(d.rail,d.onmousewheel),d.railh&&d.mousewheel(d.railh,d.onmousewheelhr)),d.ispage||_e.cantouch||/HTML|^BODY/.test(d.win[0].nodeName)||(d.win.attr("tabindex")||d.win.attr({tabindex:++A}),d.bind(d.win,"focus",function(pt){b=d.getTarget(pt).id||d.getTarget(pt)||!1,d.hasfocus=!0,d.canshowonmouseevent&&d.noticeCursor()}),d.bind(d.win,"blur",function(pt){b=!1,d.hasfocus=!1}),d.bind(d.win,"mouseenter",function(pt){v=d.getTarget(pt).id||d.getTarget(pt)||!1,d.hasmousefocus=!0,d.canshowonmouseevent&&d.noticeCursor()}),d.bind(d.win,"mouseleave",function(pt){v=!1,d.hasmousefocus=!1,d.rail.drag||d.hideCursor()})),d.onkeypress=function(pt){if(d.railslocked&&0===d.page.maxh)return!0;var Wt=d.getTarget(pt=pt||et.event);if(Wt&&/INPUT|TEXTAREA|SELECT|OPTION/.test(Wt.nodeName)&&(!Wt.getAttribute("type")&&!Wt.type||!/submit|button|cancel/i.tp)||I(Wt).attr("contenteditable"))return!0;if(d.hasfocus||d.hasmousefocus&&!b||d.ispage&&!b&&!v){var ue=pt.keyCode;if(d.railslocked&&27!=ue)return d.cancelEvent(pt);var We=pt.ctrlKey||!1,ri=pt.shiftKey||!1,Ne=!1;switch(ue){case 38:case 63233:d.doScrollBy(72),Ne=!0;break;case 40:case 63235:d.doScrollBy(-72),Ne=!0;break;case 37:case 63232:d.railh&&(We?d.doScrollLeft(0):d.doScrollLeftBy(72),Ne=!0);break;case 39:case 63234:d.railh&&(We?d.doScrollLeft(d.page.maxw):d.doScrollLeftBy(-72),Ne=!0);break;case 33:case 63276:d.doScrollBy(d.view.h),Ne=!0;break;case 34:case 63277:d.doScrollBy(-d.view.h),Ne=!0;break;case 36:case 63273:d.railh&&We?d.doScrollPos(0,0):d.doScrollTo(0),Ne=!0;break;case 35:case 63275:d.railh&&We?d.doScrollPos(d.page.maxw,d.page.maxh):d.doScrollTo(d.page.maxh),Ne=!0;break;case 32:Et.spacebarenabled&&(d.doScrollBy(ri?d.view.h:-d.view.h),Ne=!0);break;case 27:d.zoomactive&&(d.doZoom(),Ne=!0)}if(Ne)return d.cancelEvent(pt)}},Et.enablekeyboard&&d.bind(N,_e.isopera&&!_e.isopera12?"keypress":"keydown",d.onkeypress),d.bind(N,"keydown",function(pt){pt.ctrlKey&&(d.wheelprevented=!0)}),d.bind(N,"keyup",function(pt){pt.ctrlKey||(d.wheelprevented=!1)}),d.bind(et,"blur",function(pt){d.wheelprevented=!1}),d.bind(et,"resize",d.onscreenresize),d.bind(et,"orientationchange",d.onscreenresize),d.bind(et,"load",d.lazyResize),_e.ischrome&&!d.ispage&&!d.haswrapper){var vn=d.win.attr("style"),Xr=parseFloat(d.win.css("width"))+1;d.win.css("width",Xr),d.synched("chromefix",function(){d.win.attr("style",vn)})}if(d.onAttributeChange=function(pt){d.lazyResize(d.isieold?250:30)},Et.enableobserver&&(d.isie11||!1===vt||(d.observerbody=new vt(function(pt){if(pt.forEach(function(Wt){if("attributes"==Wt.type)return Pt.hasClass("modal-open")&&Pt.hasClass("modal-dialog")&&!I.contains(I(".modal-dialog")[0],d.doc[0])?d.hide():d.show()}),d.me.clientWidth!=d.page.width||d.me.clientHeight!=d.page.height)return d.lazyResize(30)}),d.observerbody.observe(N.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]})),!d.ispage&&!d.haswrapper)){var dn=d.win[0];!1!==vt?(d.observer=new vt(function(pt){pt.forEach(d.onAttributeChange)}),d.observer.observe(dn,{childList:!0,characterData:!1,attributes:!0,subtree:!1}),d.observerremover=new vt(function(pt){pt.forEach(function(Wt){if(Wt.removedNodes.length>0)for(var ue in Wt.removedNodes)if(d&&Wt.removedNodes[ue]===dn)return d.remove()})}),d.observerremover.observe(dn.parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(d.bind(dn,_e.isie&&!_e.isie9?"propertychange":"DOMAttrModified",d.onAttributeChange),_e.isie9&&dn.attachEvent("onpropertychange",d.onAttributeChange),d.bind(dn,"DOMNodeRemoved",function(pt){pt.target===dn&&d.remove()}))}!d.ispage&&Et.boxzoom&&d.bind(et,"resize",d.resizeZoom),d.istextarea&&(d.bind(d.win,"keydown",d.lazyResize),d.bind(d.win,"mouseup",d.lazyResize)),d.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var xt=function(){var pt;d.iframexd=!1;try{pt="contentDocument"in this?this.contentDocument:this.contentWindow._doc}catch(ue){d.iframexd=!0,pt=!1}if(d.iframexd)return"console"in et&&console.log("NiceScroll error: policy restriced iframe"),!0;if(d.forcescreen=!0,d.isiframe&&(d.iframe={doc:I(pt),html:d.doc.contents().find("html")[0],body:d.doc.contents().find("body")[0]},d.getContentSize=function(){return{w:Math.max(d.iframe.html.scrollWidth,d.iframe.body.scrollWidth),h:Math.max(d.iframe.html.scrollHeight,d.iframe.body.scrollHeight)}},d.docscroll=I(d.iframe.body)),!_e.isios&&Et.iframeautoresize&&!d.isiframe){d.win.scrollTop(0),d.doc.height("");var Wt=Math.max(pt.getElementsByTagName("html")[0].scrollHeight,pt.body.scrollHeight);d.doc.height(Wt)}d.lazyResize(30),d.css(I(d.iframe.body),st),_e.isios&&d.haswrapper&&d.css(I(pt.body),{"-webkit-transform":"translate3d(0,0,0)"}),d.bind("contentWindow"in this?this.contentWindow:pt,"scroll",d.onscroll),Et.enablemousewheel&&d.mousewheel(pt,d.onmousewheel),Et.enablekeyboard&&d.bind(pt,_e.isopera?"keypress":"keydown",d.onkeypress),_e.cantouch?(d.bind(pt,"touchstart",d.ontouchstart),d.bind(pt,"touchmove",d.ontouchmove)):Et.emulatetouch&&(d.bind(pt,"mousedown",d.ontouchstart),d.bind(pt,"mousemove",function(ue){return d.ontouchmove(ue,!0)}),Et.grabcursorenabled&&_e.cursorgrabvalue&&d.css(I(pt.body),{cursor:_e.cursorgrabvalue})),d.bind(pt,"mouseup",d.ontouchend),d.zoom&&(Et.dblclickzoom&&d.bind(pt,"dblclick",d.doZoom),d.ongesturezoom&&d.bind(pt,"gestureend",d.ongesturezoom))};this.doc[0].readyState&&"complete"===this.doc[0].readyState&&setTimeout(function(){xt.call(d.doc[0],!1)},500),d.bind(this.doc,"load",xt)}},this.showCursor=function(st,Rt){if(d.cursortimeout&&(clearTimeout(d.cursortimeout),d.cursortimeout=0),d.rail){if(d.autohidedom&&(d.autohidedom.stop().css({opacity:Et.cursoropacitymax}),d.cursoractive=!0),d.rail.drag&&1==d.rail.drag.pt||(void 0!==st&&!1!==st&&(d.scroll.y=st/d.scrollratio.y|0),void 0!==Rt&&(d.scroll.x=Rt/d.scrollratio.x|0)),d.cursor.css({height:d.cursorheight,top:d.scroll.y}),d.cursorh){var me=d.hasreversehr?d.scrollvaluemaxw-d.scroll.x:d.scroll.x;d.cursorh.css({width:d.cursorwidth,left:!d.rail.align&&d.rail.visibility?me+d.rail.width:me}),d.cursoractive=!0}d.zoom&&d.zoom.stop().css({opacity:Et.cursoropacitymax})}},this.hideCursor=function(st){d.cursortimeout||d.rail&&d.autohidedom&&(d.hasmousefocus&&"leave"===Et.autohidemode||(d.cursortimeout=setTimeout(function(){d.rail.active&&d.showonmouseevent||(d.autohidedom.stop().animate({opacity:Et.cursoropacitymin}),d.zoom&&d.zoom.stop().animate({opacity:Et.cursoropacitymin}),d.cursoractive=!1),d.cursortimeout=0},st||Et.hidecursordelay)))},this.noticeCursor=function(st,Rt,me){d.showCursor(Rt,me),d.rail.active||d.hideCursor(st)},this.getContentSize=d.ispage?function(){return{w:Math.max(N.body.scrollWidth,N.documentElement.scrollWidth),h:Math.max(N.body.scrollHeight,N.documentElement.scrollHeight)}}:d.haswrapper?function(){return{w:d.doc[0].offsetWidth,h:d.doc[0].offsetHeight}}:function(){return{w:d.docscroll[0].scrollWidth,h:d.docscroll[0].scrollHeight}},this.onResize=function(st,Rt){if(!d||!d.win)return!1;var me=d.page.maxh,Me=d.page.maxw,ii=d.view.h,re=d.view.w;if(d.view={w:d.ispage?d.win.width():d.win[0].clientWidth,h:d.ispage?d.win.height():d.win[0].clientHeight},d.page=Rt||d.getContentSize(),d.page.maxh=Math.max(0,d.page.h-d.view.h),d.page.maxw=Math.max(0,d.page.w-d.view.w),d.page.maxh==me&&d.page.maxw==Me&&d.view.w==re&&d.view.h==ii){if(d.ispage)return d;var Bt=d.win.offset();if(d.lastposition){var Kt=d.lastposition;if(Kt.top==Bt.top&&Kt.left==Bt.left)return d}d.lastposition=Bt}return 0===d.page.maxh?(d.hideRail(),d.scrollvaluemax=0,d.scroll.y=0,d.scrollratio.y=0,d.cursorheight=0,d.setScrollTop(0),d.rail&&(d.rail.scrollable=!1)):(d.page.maxh-=Et.railpadding.top+Et.railpadding.bottom,d.rail.scrollable=!0),0===d.page.maxw?(d.hideRailHr(),d.scrollvaluemaxw=0,d.scroll.x=0,d.scrollratio.x=0,d.cursorwidth=0,d.setScrollLeft(0),d.railh&&(d.railh.scrollable=!1)):(d.page.maxw-=Et.railpadding.left+Et.railpadding.right,d.railh&&(d.railh.scrollable=Et.horizrailenabled)),d.railslocked=d.locked||0===d.page.maxh&&0===d.page.maxw,d.railslocked?(d.ispage||d.updateScrollBar(d.view),!1):(d.hidden||(d.rail.visibility||d.showRail(),d.railh&&!d.railh.visibility&&d.showRailHr()),d.istextarea&&d.win.css("resize")&&"none"!=d.win.css("resize")&&(d.view.h-=20),d.cursorheight=Math.min(d.view.h,Math.round(d.view.h*(d.view.h/d.page.h))),d.cursorheight=Et.cursorfixedheight?Et.cursorfixedheight:Math.max(Et.cursorminheight,d.cursorheight),d.cursorwidth=Math.min(d.view.w,Math.round(d.view.w*(d.view.w/d.page.w))),d.cursorwidth=Et.cursorfixedheight?Et.cursorfixedheight:Math.max(Et.cursorminheight,d.cursorwidth),d.scrollvaluemax=d.view.h-d.cursorheight-(Et.railpadding.top+Et.railpadding.bottom),d.hasborderbox||(d.scrollvaluemax-=d.cursor[0].offsetHeight-d.cursor[0].clientHeight),d.railh&&(d.railh.width=d.page.maxh>0?d.view.w-d.rail.width:d.view.w,d.scrollvaluemaxw=d.railh.width-d.cursorwidth-(Et.railpadding.left+Et.railpadding.right)),d.ispage||d.updateScrollBar(d.view),d.scrollratio={x:d.page.maxw/d.scrollvaluemaxw,y:d.page.maxh/d.scrollvaluemax},d.getScrollTop()>d.page.maxh?d.doScrollTop(d.page.maxh):(d.scroll.y=d.getScrollTop()/d.scrollratio.y|0,d.scroll.x=d.getScrollLeft()/d.scrollratio.x|0,d.cursoractive&&d.noticeCursor()),d.scroll.y&&0===d.getScrollTop()&&d.doScrollTo(d.scroll.y*d.scrollratio.y|0),d)},this.resize=d.onResize;var Hr=0;this.onscreenresize=function(st){clearTimeout(Hr);var Rt=!d.ispage&&!d.haswrapper;Rt&&d.hideRails(),Hr=setTimeout(function(){d&&(Rt&&d.showRails(),d.resize()),Hr=0},120)},this.lazyResize=function(st){return clearTimeout(Hr),st=isNaN(st)?240:st,Hr=setTimeout(function(){d&&d.resize(),Hr=0},st),d},this.jqbind=function(st,Rt,me){d.events.push({e:st,n:Rt,f:me,q:!0}),I(st).on(Rt,me)},this.mousewheel=function(st,Rt,me){var Me="jquery"in st?st[0]:st;if("onwheel"in N.createElement("div"))d._bind(Me,"wheel",Rt,me||!1);else{var ii=void 0!==N.onmousewheel?"mousewheel":"DOMMouseScroll";mt(Me,ii,Rt,me||!1),"DOMMouseScroll"==ii&&mt(Me,"MozMousePixelScroll",Rt,me||!1)}};var Tr=!1;if(_e.haseventlistener){try{var sr=Object.defineProperty({},"passive",{get:function(){Tr=!0}});et.addEventListener("test",null,sr)}catch(st){}this.stopPropagation=function(st){return!!st&&((st=st.original?st.original:st).stopPropagation(),!1)},this.cancelEvent=function(st){return st.cancelable&&st.preventDefault(),st.stopImmediatePropagation(),st.preventManipulation&&st.preventManipulation(),!1}}else Event.prototype.preventDefault=function(){this.returnValue=!1},Event.prototype.stopPropagation=function(){this.cancelBubble=!0},et.constructor.prototype.addEventListener=N.constructor.prototype.addEventListener=Element.prototype.addEventListener=function(st,Rt,me){this.attachEvent("on"+st,Rt)},et.constructor.prototype.removeEventListener=N.constructor.prototype.removeEventListener=Element.prototype.removeEventListener=function(st,Rt,me){this.detachEvent("on"+st,Rt)},this.cancelEvent=function(st){return(st=st||et.event)&&(st.cancelBubble=!0,st.cancel=!0,st.returnValue=!1),!1},this.stopPropagation=function(st){return(st=st||et.event)&&(st.cancelBubble=!0),!1};this.delegate=function(st,Rt,me,Me,ii){var re=Zt[Rt]||!1;re||(d.bind(st,Rt,(re={a:[],l:[],f:function(Bt){for(var Kt=re.l,ne=!1,Pe=Kt.length-1;Pe>=0;Pe--)if(!1===(ne=Kt[Pe].call(Bt.target,Bt)))return!1;return ne}}).f,Me,ii),Zt[Rt]=re),d.ispage?(re.a=[d.id].concat(re.a),re.l=[me].concat(re.l)):(re.a.push(d.id),re.l.push(me))},this.undelegate=function(st,Rt,me,Me,ii){var re=Zt[Rt]||!1;if(re&&re.l)for(var Bt=0,Kt=re.l.length;Bt<Kt;Bt++)re.a[Bt]===d.id&&(re.a.splice(Bt),re.l.splice(Bt),0===re.a.length&&(d._unbind(st,Rt,re.l.f),Zt[Rt]=null))},this.bind=function(st,Rt,me,Me,ii){d._bind("jquery"in st?st[0]:st,Rt,me,Me||!1,ii||!1)},this._bind=function(st,Rt,me,Me,ii){d.events.push({e:st,n:Rt,f:me,b:Me,q:!1}),st.addEventListener(Rt,me,Tr&&ii?{passive:!1,capture:Me}:Me||!1)},this._unbind=function(st,Rt,me,Me){Zt[Rt]?d.undelegate(st,Rt,me,Me):st.removeEventListener(Rt,me,Me)},this.unbindAll=function(){for(var st=0;st<d.events.length;st++){var Rt=d.events[st];Rt.q?Rt.e.unbind(Rt.n,Rt.f):d._unbind(Rt.e,Rt.n,Rt.f,Rt.b)}},this.showRails=function(){return d.showRail().showRailHr()},this.showRail=function(){return 0===d.page.maxh||!d.ispage&&"none"==d.win.css("display")||(d.rail.visibility=!0,d.rail.css("display","block")),d},this.showRailHr=function(){return d.railh&&(0===d.page.maxw||!d.ispage&&"none"==d.win.css("display")||(d.railh.visibility=!0,d.railh.css("display","block"))),d},this.hideRails=function(){return d.hideRail().hideRailHr()},this.hideRail=function(){return d.rail.visibility=!1,d.rail.css("display","none"),d},this.hideRailHr=function(){return d.railh&&(d.railh.visibility=!1,d.railh.css("display","none")),d},this.show=function(){return d.hidden=!1,d.railslocked=!1,d.showRails()},this.hide=function(){return d.hidden=!0,d.railslocked=!0,d.hideRails()},this.toggle=function(){return d.hidden?d.show():d.hide()},this.remove=function(){for(var st in d.stop(),d.cursortimeout&&clearTimeout(d.cursortimeout),d.delaylist)d.delaylist[st]&&Yt(d.delaylist[st].h);d.doZoomOut(),d.unbindAll(),_e.isie9&&d.win[0].detachEvent("onpropertychange",d.onAttributeChange),!1!==d.observer&&d.observer.disconnect(),!1!==d.observerremover&&d.observerremover.disconnect(),!1!==d.observerbody&&d.observerbody.disconnect(),d.events=null,d.cursor&&d.cursor.remove(),d.cursorh&&d.cursorh.remove(),d.rail&&d.rail.remove(),d.railh&&d.railh.remove(),d.zoom&&d.zoom.remove();for(var Rt=0;Rt<d.saved.css.length;Rt++){var me=d.saved.css[Rt];me[0].css(me[1],void 0===me[2]?"":me[2])}d.saved=!1,d.me.data("__nicescroll","");var Me=I.nicescroll;for(var ii in Me.each(function(re){if(this&&this.id===d.id){delete Me[re];for(var Bt=++re;Bt<Me.length;Bt++,re++)Me[re]=Me[Bt];--Me.length&&delete Me[Me.length]}}),d)d[ii]=null,delete d[ii];d=null},this.scrollstart=function(st){return this.onscrollstart=st,d},this.scrollend=function(st){return this.onscrollend=st,d},this.scrollcancel=function(st){return this.onscrollcancel=st,d},this.zoomin=function(st){return this.onzoomin=st,d},this.zoomout=function(st){return this.onzoomout=st,d},this.isScrollable=function(st){var Rt=st.target?st.target:st;if("OPTION"==Rt.nodeName)return!0;for(;Rt&&1==Rt.nodeType&&Rt!==this.me[0]&&!/^BODY|HTML/.test(Rt.nodeName);){var me=I(Rt),Me=me.css("overflowY")||me.css("overflowX")||me.css("overflow")||"";if(/scroll|auto/.test(Me))return Rt.clientHeight!=Rt.scrollHeight;Rt=!!Rt.parentNode&&Rt.parentNode}return!1},this.getViewport=function(st){for(var Rt=!(!st||!st.parentNode)&&st.parentNode;Rt&&1==Rt.nodeType&&!/^BODY|HTML/.test(Rt.nodeName);){var me=I(Rt);if(/fixed|absolute/.test(me.css("position")))return me;var Me=me.css("overflowY")||me.css("overflowX")||me.css("overflow")||"";if(/scroll|auto/.test(Me)&&Rt.clientHeight!=Rt.scrollHeight||me.getNiceScroll().length>0)return me;Rt=!!Rt.parentNode&&Rt.parentNode}return!1},this.triggerScrollStart=function(st,Rt,me,Me,ii){d.onscrollstart&&d.onscrollstart.call(d,{type:"scrollstart",current:{x:st,y:Rt},request:{x:me,y:Me},end:{x:d.newscrollx,y:d.newscrolly},speed:ii})},this.triggerScrollEnd=function(){if(d.onscrollend){var st=d.getScrollLeft(),Rt=d.getScrollTop();d.onscrollend.call(d,{type:"scrollend",current:{x:st,y:Rt},end:{x:st,y:Rt}})}};var Tn=0,Ln=0,Dt=0,Ft=1,Fe=!1;if(this.onmousewheel=function(st){if(d.wheelprevented||d.locked)return!1;if(d.railslocked)return d.debounced("checkunlock",d.resize,250),!1;if(d.rail.drag)return d.cancelEvent(st);if("auto"===Et.oneaxismousemode&&0!==st.deltaX&&(Et.oneaxismousemode=!1),Et.oneaxismousemode&&0===st.deltaX&&!d.rail.scrollable)return!d.railh||!d.railh.scrollable||d.onmousewheelhr(st);var Rt=lt(),me=!1;if(Et.preservenativescrolling&&d.checkarea+600<Rt&&(d.nativescrollingarea=d.isScrollable(st),me=!0),d.checkarea=Rt,d.nativescrollingarea)return!0;var Me=J(st,!1,me);return Me&&(d.checkarea=0),Me},this.onmousewheelhr=function(st){if(!d.wheelprevented){if(d.railslocked||!d.railh.scrollable)return!0;if(d.rail.drag)return d.cancelEvent(st);var Rt=lt(),me=!1;return Et.preservenativescrolling&&d.checkarea+600<Rt&&(d.nativescrollingarea=d.isScrollable(st),me=!0),d.checkarea=Rt,!!d.nativescrollingarea||(d.railslocked?d.cancelEvent(st):J(st,!0,me))}},this.stop=function(){return d.cancelScroll(),d.scrollmon&&d.scrollmon.stop(),d.cursorfreezed=!1,d.scroll.y=Math.round(d.getScrollTop()*(1/d.scrollratio.y)),d.noticeCursor(),d},this.getTransitionSpeed=function(st){return 80+st/72*Et.scrollspeed|0},Et.smoothscroll)if(d.ishwscroll&&_e.hastransition&&Et.usetransition&&Et.smoothscroll){var Le="";this.resetTransition=function(){Le="",d.doc.css(_e.prefixstyle+"transition-duration","0ms")},this.prepareTransition=function(st,Rt){var me=Rt?st:d.getTransitionSpeed(st),Me=me+"ms";return Le!==Me&&(Le=Me,d.doc.css(_e.prefixstyle+"transition-duration",Me)),me},this.doScrollLeft=function(st,Rt){var me=d.scrollrunning?d.newscrolly:d.getScrollTop();d.doScrollPos(st,me,Rt)},this.doScrollTop=function(st,Rt){var me=d.scrollrunning?d.newscrollx:d.getScrollLeft();d.doScrollPos(me,st,Rt)},this.cursorupdate={running:!1,start:function(){var st=this;if(!st.running){st.running=!0;var Rt=function(){st.running&&Mt(Rt),d.showCursor(d.getScrollTop(),d.getScrollLeft()),d.notifyScrollEvent(d.win[0])};Mt(Rt)}},stop:function(){this.running=!1}},this.doScrollPos=function(st,Rt,me){var Me=d.getScrollTop(),ii=d.getScrollLeft();if(((d.newscrolly-Me)*(Rt-Me)<0||(d.newscrollx-ii)*(st-ii)<0)&&d.cancelScroll(),Et.bouncescroll?(Rt<0?Rt=Rt/2|0:Rt>d.page.maxh&&(Rt=d.page.maxh+(Rt-d.page.maxh)/2|0),st<0?st=st/2|0:st>d.page.maxw&&(st=d.page.maxw+(st-d.page.maxw)/2|0)):(Rt<0?Rt=0:Rt>d.page.maxh&&(Rt=d.page.maxh),st<0?st=0:st>d.page.maxw&&(st=d.page.maxw)),d.scrollrunning&&st==d.newscrollx&&Rt==d.newscrolly)return!1;d.newscrolly=Rt,d.newscrollx=st;var re=d.getScrollTop(),Bt=d.getScrollLeft(),Kt={};Kt.x=st-Bt,Kt.y=Rt-re;var ne=0|Math.sqrt(Kt.x*Kt.x+Kt.y*Kt.y),Pe=d.prepareTransition(ne);d.scrollrunning||(d.scrollrunning=!0,d.triggerScrollStart(Bt,re,st,Rt,Pe),d.cursorupdate.start()),d.scrollendtrapped=!0,_e.transitionend||(d.scrollendtrapped&&clearTimeout(d.scrollendtrapped),d.scrollendtrapped=setTimeout(d.onScrollTransitionEnd,Pe)),d.setScrollTop(d.newscrolly),d.setScrollLeft(d.newscrollx)},this.cancelScroll=function(){if(!d.scrollendtrapped)return!0;var st=d.getScrollTop(),Rt=d.getScrollLeft();return d.scrollrunning=!1,_e.transitionend||clearTimeout(_e.transitionend),d.scrollendtrapped=!1,d.resetTransition(),d.setScrollTop(st),d.railh&&d.setScrollLeft(Rt),d.timerscroll&&d.timerscroll.tm&&clearInterval(d.timerscroll.tm),d.timerscroll=!1,d.cursorfreezed=!1,d.cursorupdate.stop(),d.showCursor(st,Rt),d},this.onScrollTransitionEnd=function(){if(d.scrollendtrapped){var st=d.getScrollTop(),Rt=d.getScrollLeft();if(st<0?st=0:st>d.page.maxh&&(st=d.page.maxh),Rt<0?Rt=0:Rt>d.page.maxw&&(Rt=d.page.maxw),st!=d.newscrolly||Rt!=d.newscrollx)return d.doScrollPos(Rt,st,Et.snapbackspeed);d.scrollrunning&&d.triggerScrollEnd(),d.scrollrunning=!1,d.scrollendtrapped=!1,d.resetTransition(),d.timerscroll=!1,d.setScrollTop(st),d.railh&&d.setScrollLeft(Rt),d.cursorupdate.stop(),d.noticeCursor(!1,st,Rt),d.cursorfreezed=!1}}}else this.doScrollLeft=function(st,Rt){var me=d.scrollrunning?d.newscrolly:d.getScrollTop();d.doScrollPos(st,me,Rt)},this.doScrollTop=function(st,Rt){var me=d.scrollrunning?d.newscrollx:d.getScrollLeft();d.doScrollPos(me,st,Rt)},this.doScrollPos=function(st,Rt,me){var Me=d.getScrollTop(),ii=d.getScrollLeft();((d.newscrolly-Me)*(Rt-Me)<0||(d.newscrollx-ii)*(st-ii)<0)&&d.cancelScroll();var re=!1;if(d.bouncescroll&&d.rail.visibility||(Rt<0?(Rt=0,re=!0):Rt>d.page.maxh&&(Rt=d.page.maxh,re=!0)),d.bouncescroll&&d.railh.visibility||(st<0?(st=0,re=!0):st>d.page.maxw&&(st=d.page.maxw,re=!0)),d.scrollrunning&&d.newscrolly===Rt&&d.newscrollx===st)return!0;d.newscrolly=Rt,d.newscrollx=st,d.dst={},d.dst.x=st-ii,d.dst.y=Rt-Me,d.dst.px=ii,d.dst.py=Me;var Bt=0|Math.sqrt(d.dst.x*d.dst.x+d.dst.y*d.dst.y),Kt=d.getTransitionSpeed(Bt);d.bzscroll={};var ne=re?1:.58;d.bzscroll.x=new Ri(ii,d.newscrollx,Kt,0,0,ne,1),d.bzscroll.y=new Ri(Me,d.newscrolly,Kt,0,0,ne,1),lt();var Pe=function(){if(d.scrollrunning){var oi=d.bzscroll.y.getPos();d.setScrollLeft(d.bzscroll.x.getNow()),d.setScrollTop(d.bzscroll.y.getNow()),oi<=1?d.timer=Mt(Pe):(d.scrollrunning=!1,d.timer=0,d.triggerScrollEnd())}};d.scrollrunning||(d.triggerScrollStart(ii,Me,st,Rt,Kt),d.scrollrunning=!0,d.timer=Mt(Pe))},this.cancelScroll=function(){return d.timer&&Yt(d.timer),d.timer=0,d.bzscroll=!1,d.scrollrunning=!1,d};else this.doScrollLeft=function(st,Rt){var me=d.getScrollTop();d.doScrollPos(st,me,Rt)},this.doScrollTop=function(st,Rt){var me=d.getScrollLeft();d.doScrollPos(me,st,Rt)},this.doScrollPos=function(st,Rt,me){var Me=st>d.page.maxw?d.page.maxw:st;Me<0&&(Me=0);var ii=Rt>d.page.maxh?d.page.maxh:Rt;ii<0&&(ii=0),d.synched("scroll",function(){d.setScrollTop(ii),d.setScrollLeft(Me)})},this.cancelScroll=function(){};this.doScrollBy=function(st,Rt){rt(0,st)},this.doScrollLeftBy=function(st,Rt){rt(st,0)},this.doScrollTo=function(st,Rt){var me=Rt?Math.round(st*d.scrollratio.y):st;me<0?me=0:me>d.page.maxh&&(me=d.page.maxh),d.cursorfreezed=!1,d.doScrollTop(st)},this.checkContentSize=function(){var st=d.getContentSize();st.h==d.page.h&&st.w==d.page.w||d.resize(!1,st)},d.onscroll=function(st){d.rail.drag||d.cursorfreezed||d.synched("scroll",function(){d.scroll.y=Math.round(d.getScrollTop()/d.scrollratio.y),d.railh&&(d.scroll.x=Math.round(d.getScrollLeft()/d.scrollratio.x)),d.noticeCursor()})},d.bind(d.docscroll,"scroll",d.onscroll),this.doZoomIn=function(st){if(!d.zoomactive){d.zoomactive=!0,d.zoomrestore={style:{}};var Rt=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],me=d.win[0].style;for(var Me in Rt){var ii=Rt[Me];d.zoomrestore.style[ii]=void 0!==me[ii]?me[ii]:""}d.zoomrestore.style.width=d.win.css("width"),d.zoomrestore.style.height=d.win.css("height"),d.zoomrestore.padding={w:d.win.outerWidth()-d.win.width(),h:d.win.outerHeight()-d.win.height()},_e.isios4&&(d.zoomrestore.scrollTop=Lt.scrollTop(),Lt.scrollTop(0)),d.win.css({position:_e.isios4?"absolute":"fixed",top:0,left:0,zIndex:P+100,margin:0});var re=d.win.css("backgroundColor");return(""===re||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(re))&&d.win.css("backgroundColor","#fff"),d.rail.css({zIndex:P+101}),d.zoom.css({zIndex:P+102}),d.zoom.css("backgroundPosition","0 -18px"),d.resizeZoom(),d.onzoomin&&d.onzoomin.call(d),d.cancelEvent(st)}},this.doZoomOut=function(st){if(d.zoomactive)return d.zoomactive=!1,d.win.css("margin",""),d.win.css(d.zoomrestore.style),_e.isios4&&Lt.scrollTop(d.zoomrestore.scrollTop),d.rail.css({"z-index":d.zindex}),d.zoom.css({"z-index":d.zindex}),d.zoomrestore=!1,d.zoom.css("backgroundPosition","0 0"),d.onResize(),d.onzoomout&&d.onzoomout.call(d),d.cancelEvent(st)},this.doZoom=function(st){return d.zoomactive?d.doZoomOut(st):d.doZoomIn(st)},this.resizeZoom=function(){if(d.zoomactive){var st=d.getScrollTop();d.win.css({width:Lt.width()-d.zoomrestore.padding.w+"px",height:Lt.height()-d.zoomrestore.padding.h+"px"}),d.onResize(),d.setScrollTop(Math.min(d.page.maxh,st))}},this.init(),I.nicescroll.push(this)},Ui=function(ti){var ae=this;this.nc=ti,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.reset=function(zt,Ht){ae.stop(),ae.steptime=0,ae.lasttime=lt(),ae.speedx=0,ae.speedy=0,ae.lastx=zt,ae.lasty=Ht,ae.lastscrollx=-1,ae.lastscrolly=-1},this.update=function(zt,Ht){var ht=lt();ae.steptime=ht-ae.lasttime,ae.lasttime=ht;var mt=Ht-ae.lasty,rt=zt-ae.lastx,J=ae.nc.getScrollTop()+mt,d=ae.nc.getScrollLeft()+rt;ae.snapx=d<0||d>ae.nc.page.maxw,ae.snapy=J<0||J>ae.nc.page.maxh,ae.speedx=rt,ae.speedy=mt,ae.lastx=zt,ae.lasty=Ht},this.stop=function(){ae.nc.unsynched("domomentum2d"),ae.timer&&clearTimeout(ae.timer),ae.timer=0,ae.lastscrollx=-1,ae.lastscrolly=-1},this.doSnapy=function(zt,Ht){var ht=!1;Ht<0?(Ht=0,ht=!0):Ht>ae.nc.page.maxh&&(Ht=ae.nc.page.maxh,ht=!0),zt<0?(zt=0,ht=!0):zt>ae.nc.page.maxw&&(zt=ae.nc.page.maxw,ht=!0),ht?ae.nc.doScrollPos(zt,Ht,ae.nc.opt.snapbackspeed):ae.nc.triggerScrollEnd()},this.doMomentum=function(zt){var Ht=lt(),ht=zt?Ht+zt:ae.lasttime,mt=ae.nc.getScrollLeft(),rt=ae.nc.getScrollTop(),J=ae.nc.page.maxh,d=ae.nc.page.maxw;ae.speedx=d>0?Math.min(60,ae.speedx):0,ae.speedy=J>0?Math.min(60,ae.speedy):0;var Pt=ht&&Ht-ht<=60;if((rt<0||rt>J||mt<0||mt>d)&&(Pt=!1),ae.speedy&&Pt&&ae.speedy||ae.speedx&&Pt&&ae.speedx){var Ie=Math.max(16,ae.steptime);if(Ie>50){var ei=Ie/50;ae.speedx*=ei,ae.speedy*=ei,Ie=50}ae.demulxy=0,ae.lastscrollx=ae.nc.getScrollLeft(),ae.chkx=ae.lastscrollx,ae.lastscrolly=ae.nc.getScrollTop(),ae.chky=ae.lastscrolly;var _e=ae.lastscrollx,Ri=ae.lastscrolly,Gi=function(){var _i=lt()-Ht>600?.04:.02;ae.speedx&&(_e=Math.floor(ae.lastscrollx-ae.speedx*(1-ae.demulxy)),ae.lastscrollx=_e,(_e<0||_e>d)&&(_i=.1)),ae.speedy&&(Ri=Math.floor(ae.lastscrolly-ae.speedy*(1-ae.demulxy)),ae.lastscrolly=Ri,(Ri<0||Ri>J)&&(_i=.1)),ae.demulxy=Math.min(1,ae.demulxy+_i),ae.nc.synched("domomentum2d",function(){ae.speedx&&(ae.nc.getScrollLeft(),ae.chkx=_e,ae.nc.setScrollLeft(_e)),ae.speedy&&(ae.nc.getScrollTop(),ae.chky=Ri,ae.nc.setScrollTop(Ri)),ae.timer||(ae.nc.hideCursor(),ae.doSnapy(_e,Ri))}),ae.demulxy<1?ae.timer=setTimeout(Gi,Ie):(ae.stop(),ae.nc.hideCursor(),ae.doSnapy(_e,Ri))};Gi()}else ae.doSnapy(ae.nc.getScrollLeft(),ae.nc.getScrollTop())}},q=F.fn.scrollTop;F.cssHooks.pageYOffset={get:function(ti,ae,zt){var Ht=I.data(ti,"__nicescroll")||!1;return Ht&&Ht.ishwscroll?Ht.getScrollTop():q.call(ti)},set:function(ti,ae){var zt=I.data(ti,"__nicescroll")||!1;return zt&&zt.ishwscroll?zt.setScrollTop(parseInt(ae)):q.call(ti,ae),this}},F.fn.scrollTop=function(ti){if(void 0===ti){var ae=!!this[0]&&(I.data(this[0],"__nicescroll")||!1);return ae&&ae.ishwscroll?ae.getScrollTop():q.call(this)}return this.each(function(){var zt=I.data(this,"__nicescroll")||!1;zt&&zt.ishwscroll?zt.setScrollTop(parseInt(ti)):q.call(I(this),ti)})};var Wi=F.fn.scrollLeft;I.cssHooks.pageXOffset={get:function(ti,ae,zt){var Ht=I.data(ti,"__nicescroll")||!1;return Ht&&Ht.ishwscroll?Ht.getScrollLeft():Wi.call(ti)},set:function(ti,ae){var zt=I.data(ti,"__nicescroll")||!1;return zt&&zt.ishwscroll?zt.setScrollLeft(parseInt(ae)):Wi.call(ti,ae),this}},F.fn.scrollLeft=function(ti){if(void 0===ti){var ae=!!this[0]&&(I.data(this[0],"__nicescroll")||!1);return ae&&ae.ishwscroll?ae.getScrollLeft():Wi.call(this)}return this.each(function(){var zt=I.data(this,"__nicescroll")||!1;zt&&zt.ishwscroll?zt.setScrollLeft(parseInt(ti)):Wi.call(I(this),ti)})};var Ti=function(ti){var ae=this;if(this.length=0,this.name="nicescrollarray",this.each=function(ht){return I.each(ae,ht),ae},this.push=function(ht){ae[ae.length]=ht,ae.length++},this.eq=function(ht){return ae[ht]},ti)for(var zt=0;zt<ti.length;zt++){var Ht=I.data(ti[zt],"__nicescroll")||!1;Ht&&(this[this.length]=Ht,this.length++)}return this};(function(ti,ae,zt){for(var Ht=0,ht=ae.length;Ht<ht;Ht++)zt(ti,ae[Ht])})(Ti.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(ti,ae){ti[ae]=function(){var zt=arguments;return this.each(function(){this[ae].apply(this,zt)})}}),F.fn.getNiceScroll=function(ti){return void 0===ti?new Ti(this):this[ti]&&I.data(this[ti],"__nicescroll")||!1},(F.expr.pseudos||F.expr[":"]).nicescroll=function(ti){return void 0!==I.data(ti,"__nicescroll")},I.fn.niceScroll=function(ti,ae){void 0!==ae||"object"!=typeof ti||"jquery"in ti||(ae=ti,ti=!1);var zt=new Ti;return this.each(function(){var Ht=I(this),ht=I.extend({},ae);if(ti){var mt=I(ti);ht.doc=mt.length>1?I(ti,Ht):mt,ht.win=Ht}!("doc"in ht)||"win"in ht||(ht.win=Ht);var rt=Ht.data("__nicescroll")||!1;rt||(ht.doc=ht.doc||Ht,rt=new Ye(ht,Ht),Ht.data("__nicescroll",rt)),zt.push(rt)}),1===zt.length?zt[0]:zt},et.NiceScroll={getjQuery:function(){return F}},I.nicescroll||(I.nicescroll=new Ti,I.nicescroll.options=Vt)}),function(F,b){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",b):"object"==typeof module&&module.exports?module.exports=b():F.EvEmitter=b()}("undefined"!=typeof window?window:this,function(){function F(){}var b=F.prototype;return b.on=function(v,A){if(v&&A){var l=this._events=this._events||{},P=l[v]=l[v]||[];return-1==P.indexOf(A)&&P.push(A),this}},b.once=function(v,A){if(v&&A){this.on(v,A);var l=this._onceEvents=this._onceEvents||{};return(l[v]=l[v]||{})[A]=!0,this}},b.off=function(v,A){var l=this._events&&this._events[v];if(l&&l.length){var P=l.indexOf(A);return-1!=P&&l.splice(P,1),this}},b.emitEvent=function(v,A){var l=this._events&&this._events[v];if(l&&l.length){l=l.slice(0),A=A||[];for(var P=this._onceEvents&&this._onceEvents[v],I=0;I<l.length;I++){var N=l[I];P&&P[N]&&(this.off(v,N),delete P[N]),N.apply(this,A)}return this}},b.allOff=function(){delete this._events,delete this._onceEvents},F}),function(F,b){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(v){return b(F,v)}):"object"==typeof module&&module.exports?module.exports=b(F,require("ev-emitter")):F.imagesLoaded=b(F,F.EvEmitter)}("undefined"!=typeof window?window:this,function(F,b){function v(Mt,Yt){for(var $t in Yt)Mt[$t]=Yt[$t];return Mt}function l(Mt,Yt,$t){if(!(this instanceof l))return new l(Mt,Yt,$t);var vt=Mt;return"string"==typeof Mt&&(vt=document.querySelectorAll(Mt)),vt?(this.elements=function A(Mt){return Array.isArray(Mt)?Mt:"object"==typeof Mt&&"number"==typeof Mt.length?Lt.call(Mt):[Mt]}(vt),this.options=v({},this.options),"function"==typeof Yt?$t=Yt:v(this.options,Yt),$t&&this.on("always",$t),this.getImages(),N&&(this.jqDeferred=new N.Deferred),void setTimeout(this.check.bind(this))):void et.error("Bad element for imagesLoaded "+(vt||Mt))}function P(Mt){this.img=Mt}function I(Mt,Yt){this.url=Mt,this.element=Yt,this.img=new Image}var N=F.jQuery,et=F.console,Lt=Array.prototype.slice;(l.prototype=Object.create(b.prototype)).options={},l.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},l.prototype.addElementImages=function(Mt){"IMG"==Mt.nodeName&&this.addImage(Mt),!0===this.options.background&&this.addElementBackgroundImages(Mt);var Yt=Mt.nodeType;if(Yt&&Zt[Yt]){for(var $t=Mt.querySelectorAll("img"),vt=0;vt<$t.length;vt++)this.addImage($t[vt]);if("string"==typeof this.options.background){var Vt=Mt.querySelectorAll(this.options.background);for(vt=0;vt<Vt.length;vt++)this.addElementBackgroundImages(Vt[vt])}}};var Zt={1:!0,9:!0,11:!0};return l.prototype.addElementBackgroundImages=function(Mt){var Yt=getComputedStyle(Mt);if(Yt)for(var $t=/url\((['"])?(.*?)\1\)/gi,vt=$t.exec(Yt.backgroundImage);null!==vt;){var lt=vt&&vt[2];lt&&this.addBackground(lt,Mt),vt=$t.exec(Yt.backgroundImage)}},l.prototype.addImage=function(Mt){var Yt=new P(Mt);this.images.push(Yt)},l.prototype.addBackground=function(Mt,Yt){var $t=new I(Mt,Yt);this.images.push($t)},l.prototype.check=function(){function Mt($t,vt,lt){setTimeout(function(){Yt.progress($t,vt,lt)})}var Yt=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function($t){$t.once("progress",Mt),$t.check()}):void this.complete()},l.prototype.progress=function(Mt,Yt,$t){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!Mt.isLoaded,this.emitEvent("progress",[this,Mt,Yt]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,Mt),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&et&&et.log("progress: "+$t,Mt,Yt)},l.prototype.complete=function(){var Mt=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(Mt,[this]),this.emitEvent("always",[this]),this.jqDeferred&&this.jqDeferred[this.hasAnyBroken?"reject":"resolve"](this)},(P.prototype=Object.create(b.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},P.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},P.prototype.confirm=function(Mt,Yt){this.isLoaded=Mt,this.emitEvent("progress",[this,this.img,Yt])},P.prototype.handleEvent=function(Mt){var Yt="on"+Mt.type;this[Yt]&&this[Yt](Mt)},P.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},P.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},P.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(I.prototype=Object.create(P.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},I.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},I.prototype.confirm=function(Mt,Yt){this.isLoaded=Mt,this.emitEvent("progress",[this,this.element,Yt])},l.makeJQueryPlugin=function(Mt){(Mt=Mt||F.jQuery)&&((N=Mt).fn.imagesLoaded=function(Yt,$t){return new l(this,Yt,$t).jqDeferred.promise(N(this))})},l.makeJQueryPlugin(),l}),function(F,b){function N(Bt,Kt){var ne=Bt.find(".steps li").eq(Kt.currentIndex);Bt.triggerHandler("finishing",[Kt.currentIndex])?(ne.addClass("done").removeClass("error"),Bt.triggerHandler("finished",[Kt.currentIndex])):ne.addClass("error")}function et(Bt){var Kt=Bt.data("eventNamespace");return null==Kt&&(Kt="."+Vt(Bt),Bt.data("eventNamespace",Kt)),Kt}function Lt(Bt,Kt){var ne=Vt(Bt);return Bt.find("#"+ne+Dt+Kt)}function Zt(Bt,Kt){var ne=Vt(Bt);return Bt.find("#"+ne+Ft+Kt)}function Yt(Bt){return Bt.data("options")}function $t(Bt){return Bt.data("state")}function vt(Bt){return Bt.data("steps")}function lt(Bt,Kt){var ne=vt(Bt);return(0>Kt||Kt>=ne.length)&&Tr(Le),ne[Kt]}function Vt(Bt){var Kt=Bt.data("uid");return null==Kt&&(null==(Kt=Bt._id())&&(Kt="steps-uid-".concat(Tn),Bt._id(Kt)),Tn++,Bt.data("uid",Kt)),Kt}function xe(Bt,Kt){if(sr("enumType",Bt),sr("keyOrValue",Kt),"string"==typeof Kt){var ne=Bt[Kt];return ne===b&&Tr("The enum key '{0}' does not exist.",Kt),ne}if("number"==typeof Kt){for(var Pe in Bt)if(Bt[Pe]===Kt)return Kt;Tr("Invalid enum value '{0}'.",Kt)}else Tr("Invalid key or value type.")}function Ze(Bt,Kt,ne){return Ht(Bt,Kt,ne,function q(Bt,Kt){return Bt.currentIndex+Kt}(ne,1))}function Ye(Bt,Kt,ne){return Ht(Bt,Kt,ne,function P(Bt,Kt){return Bt.currentIndex-Kt}(ne,1))}function Wi(Bt){var Kt=F.extend(!0,{},re,Bt);return this.each(function(){var ne=F(this),Pe={currentIndex:Kt.startIndex,currentStep:null,stepCount:0,transitionElement:null};ne.data("options",Kt),ne.data("state",Pe),ne.data("steps",[]),function A(Bt,Kt,ne){var Pe=Bt.children(Kt.headerTag),oi=Bt.children(Kt.bodyTag);Pe.length>oi.length?Tr(st,"contents"):Pe.length<oi.length&&Tr(st,"titles");var Ci=Kt.startIndex;if(ne.stepCount=Pe.length,Kt.saveState&&F.cookie){var ar=F.cookie(Ln+Vt(Bt)),tr=parseInt(ar,0);!isNaN(tr)&&tr<ne.stepCount&&(Ci=tr)}ne.currentIndex=Ci,Pe.each(function(Qr){var vn=F(this),Xr=oi.eq(Qr),dn=Xr.data("mode"),xt=null==dn?Rt.html:xe(Rt,/^\s*$/.test(dn)||isNaN(dn)?dn:parseInt(dn,0)),pt=xt===Rt.html||Xr.data("url")===b?"":Xr.data("url"),Wt=xt!==Rt.html&&"1"===Xr.data("loaded"),ue=F.extend({},ii,{title:vn.html(),content:xt===Rt.html?Xr.html():"",contentUrl:pt,contentMode:xt,contentLoaded:Wt});!function v(Bt,Kt){vt(Bt).push(Kt)}(Bt,ue)})}(ne,Kt,Pe),function se(Bt,Kt,ne){var Pe='<{0} class="{1}">{2}</{0}>',Ci=xe(me,Kt.stepsOrientation)===me.vertical?" vertical":"",ar=F(Pe.format(Kt.contentContainerTag,"content "+Kt.clearFixCssClass,Bt.html())),tr=F(Pe.format(Kt.stepsContainerTag,"steps "+Kt.clearFixCssClass,'<ul role="tablist"></ul>')),Qr=ar.children(Kt.headerTag),vn=ar.children(Kt.bodyTag);Bt.attr("role","application").empty().append(tr).append(ar).addClass(Kt.cssClass+" "+Kt.clearFixCssClass+Ci),vn.each(function(Xr){Ie(Bt,ne,F(this),Xr)}),Qr.each(function(Xr){Ri(Bt,Kt,ne,F(this),Xr)}),rt(Bt,Kt,ne),function ei(Bt,Kt,ne){if(Kt.enablePagination){var oi='<li><a href="#{0}" role="menuitem">{1}</a></li>',Ci="";Kt.forceMoveForward||(Ci+=oi.format("previous",Kt.labels.previous)),Ci+=oi.format("next",Kt.labels.next),Kt.enableFinishButton&&(Ci+=oi.format("finish",Kt.labels.finish)),Kt.enableCancelButton&&(Ci+=oi.format("cancel",Kt.labels.cancel)),Bt.append('<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>'.format(Kt.actionContainerTag,Kt.clearFixCssClass,Kt.labels.pagination,Ci)),mt(Bt,Kt,ne),zt(Bt,Kt,ne)}}(Bt,Kt,ne)}(ne,Kt,Pe),function d(Bt,Kt){var ne=et(Bt);Bt.bind("canceled"+ne,Kt.onCanceled),Bt.bind("contentLoaded"+ne,Kt.onContentLoaded),Bt.bind("finishing"+ne,Kt.onFinishing),Bt.bind("finished"+ne,Kt.onFinished),Bt.bind("init"+ne,Kt.onInit),Bt.bind("stepChanging"+ne,Kt.onStepChanging),Bt.bind("stepChanged"+ne,Kt.onStepChanged),Kt.enableKeyNavigation&&Bt.bind("keyup"+ne,ae),Bt.find(".actions a").bind("click"+ne,ht)}(ne,Kt),Kt.autoFocus&&0===Tn&&Lt(ne,Kt.startIndex).focus(),ne.triggerHandler("init",[Kt.startIndex])})}function Ti(Bt,Kt,ne,Pe,oi){(0>Pe||Pe>ne.stepCount)&&Tr(Le),function ti(Bt,Kt,ne){vt(Bt).splice(Kt,0,ne)}(Bt,Pe,oi=F.extend({},ii,oi)),ne.currentIndex!==ne.stepCount&&ne.currentIndex>=Pe&&(ne.currentIndex++,Gi(Bt,Kt,ne)),ne.stepCount++;var Ci=Bt.find(".content"),ar=F("<{0}>{1}</{0}>".format(Kt.headerTag,oi.title)),tr=F("<{0}></{0}>".format(Kt.bodyTag));return(null==oi.contentMode||oi.contentMode===Rt.html)&&tr.html(oi.content),0===Pe?Ci.prepend(tr).prepend(ar):Zt(Bt,Pe-1).after(tr).after(ar),Ie(Bt,ne,tr,Pe),Ri(Bt,Kt,ne,ar,Pe),J(Bt,Kt,ne,Pe),Pe===ne.currentIndex&&rt(Bt,Kt,ne),mt(Bt,Kt,ne),Bt}function ae(Bt){var Kt=F(this),ne=Yt(Kt),Pe=$t(Kt);if(ne.suppressPaginationOnFocus&&Kt.find(":focus").is(":input"))return Bt.preventDefault(),!1;37===Bt.keyCode?(Bt.preventDefault(),Ye(Kt,ne,Pe)):39===Bt.keyCode&&(Bt.preventDefault(),Ze(Kt,ne,Pe))}function zt(Bt,Kt,ne){if(ne.stepCount>0){var Pe=ne.currentIndex,oi=lt(Bt,Pe);if(!Kt.enableContentCache||!oi.contentLoaded)switch(xe(Rt,oi.contentMode)){case Rt.iframe:Bt.find(".content > .body").eq(ne.currentIndex).empty().html('<iframe src="'+oi.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case Rt.async:var Ci=Zt(Bt,Pe)._aria("busy","true").empty().append(_e(Kt.loadingTemplate,{text:Kt.labels.loading}));F.ajax({url:oi.contentUrl,cache:!1}).done(function(ar){Ci.empty().html(ar)._aria("busy","false").data("loaded","1"),Bt.triggerHandler("contentLoaded",[Pe])})}}}function Ht(Bt,Kt,ne,Pe){var oi=ne.currentIndex;if(Pe>=0&&Pe<ne.stepCount&&!(Kt.forceMoveForward&&Pe<ne.currentIndex)){var Ci=Lt(Bt,Pe),ar=Ci.parent(),tr=ar.hasClass("disabled");return ar._enableAria(),Ci.click(),oi!==ne.currentIndex||!tr||(ar._enableAria(!1),!1)}return!1}function ht(Bt){Bt.preventDefault();var Kt=F(this),ne=Kt.parent().parent().parent().parent(),Pe=Yt(ne),oi=$t(ne),Ci=Kt.attr("href");switch(Ci.substring(Ci.lastIndexOf("#")+1)){case"cancel":!function l(Bt){Bt.triggerHandler("canceled")}(ne);break;case"finish":N(ne,oi);break;case"next":Ze(ne,Pe,oi);break;case"previous":Ye(ne,Pe,oi)}}function mt(Bt,Kt,ne){if(Kt.enablePagination){var Pe=Bt.find(".actions a[href$='#finish']").parent(),oi=Bt.find(".actions a[href$='#next']").parent();Kt.forceMoveForward||Bt.find(".actions a[href$='#previous']").parent()._enableAria(ne.currentIndex>0),Kt.enableFinishButton&&Kt.showFinishButtonAlways?(Pe._enableAria(ne.stepCount>0),oi._enableAria(ne.stepCount>1&&ne.stepCount>ne.currentIndex+1)):(Pe._showAria(Kt.enableFinishButton&&ne.stepCount===ne.currentIndex+1),oi._showAria(0===ne.stepCount||ne.stepCount>ne.currentIndex+1)._enableAria(ne.stepCount>ne.currentIndex+1||!Kt.enableFinishButton))}}function rt(Bt,Kt,ne,Pe){var oi=Lt(Bt,ne.currentIndex),Ci=F('<span class="current-info audible">'+Kt.labels.current+" </span>"),ar=Bt.find(".content > .title");if(null!=Pe){var tr=Lt(Bt,Pe);tr.parent().addClass("done").removeClass("error")._selectAria(!1),ar.eq(Pe).removeClass("current").next(".body").removeClass("current"),Ci=tr.find(".current-info"),oi.focus()}oi.prepend(Ci).parent()._selectAria().removeClass("done")._enableAria(),ar.eq(ne.currentIndex).addClass("current").next(".body").addClass("current")}function J(Bt,Kt,ne,Pe){for(var oi=Vt(Bt),Ci=Pe;Ci<ne.stepCount;Ci++){var ar=oi+Dt+Ci,tr=oi+Ft+Ci,Qr=oi+Fe+Ci,vn=Bt.find(".title").eq(Ci)._id(Qr);Bt.find(".steps a").eq(Ci)._id(ar)._aria("controls",tr).attr("href","#"+Qr).html(_e(Kt.titleTemplate,{index:Ci+1,title:vn.html()})),Bt.find(".body").eq(Ci)._id(tr)._aria("labelledby",Qr)}}function Ie(Bt,Kt,ne,Pe){var oi=Vt(Bt),ar=oi+Fe+Pe;ne._id(oi+Ft+Pe).attr("role","tabpanel")._aria("labelledby",ar).addClass("body")._showAria(Kt.currentIndex===Pe)}function _e(Bt,Kt){for(var ne=Bt.match(/#([a-z]*)#/gi),Pe=0;Pe<ne.length;Pe++){var oi=ne[Pe],Ci=oi.substring(1,oi.length-1);Kt[Ci]===b&&Tr("The key '{0}' does not exist in the substitute collection!",Ci),Bt=Bt.replace(oi,Kt[Ci])}return Bt}function Ri(Bt,Kt,ne,Pe,oi){var Ci=Vt(Bt),ar=Ci+Dt+oi,tr=Ci+Ft+oi,Qr=Ci+Fe+oi,vn=Bt.find(".steps > ul"),Xr=_e(Kt.titleTemplate,{index:oi+1,title:Pe.html()}),dn=F('<li role="tab"><a id="'+ar+'" href="#'+Qr+'" aria-controls="'+tr+'">'+Xr+"</a></li>");dn._enableAria(Kt.enableAllSteps||ne.currentIndex>oi),ne.currentIndex>oi&&dn.addClass("done"),Pe._id(Qr).attr("tabindex","-1").addClass("title"),0===oi?vn.prepend(dn):vn.find("li").eq(oi-1).after(dn),0===oi&&vn.find("li").removeClass("first").eq(oi).addClass("first"),oi===ne.stepCount-1&&vn.find("li").removeClass("last").eq(oi).addClass("last"),dn.children("a").bind("click"+et(Bt),Hr)}function Gi(Bt,Kt,ne){Kt.saveState&&F.cookie&&F.cookie(Ln+Vt(Bt),ne.currentIndex)}function Hr(Bt){Bt.preventDefault();var Kt=F(this),ne=Kt.parent().parent().parent().parent(),Pe=Yt(ne),oi=$t(ne),Ci=oi.currentIndex;if(Kt.parent().is(":not(.disabled):not(.current)")){var ar=Kt.attr("href");!function Ui(Bt,Kt,ne,Pe){if((0>Pe||Pe>=ne.stepCount)&&Tr(Le),!(Kt.forceMoveForward&&Pe<ne.currentIndex)){var oi=ne.currentIndex;return Bt.triggerHandler("stepChanging",[ne.currentIndex,Pe])?(ne.currentIndex=Pe,Gi(Bt,Kt,ne),rt(Bt,Kt,ne,oi),mt(Bt,Kt,ne),zt(Bt,Kt,ne),function _i(Bt,Kt,ne,Pe,oi,Ci){var ar=Bt.find(".content > .body"),tr=xe(Me,Kt.transitionEffect),Qr=Kt.transitionEffectSpeed,vn=ar.eq(Pe),Xr=ar.eq(oi);switch(tr){case Me.fade:case Me.slide:var dn=tr===Me.fade?"fadeOut":"slideUp",xt=tr===Me.fade?"fadeIn":"slideDown";ne.transitionElement=vn,Xr[dn](Qr,function(){var ri=$t(F(this)._showAria(!1).parent().parent());ri.transitionElement&&(ri.transitionElement[xt](Qr,function(){F(this)._showAria()}).promise().done(Ci),ri.transitionElement=null)});break;case Me.slideLeft:var pt=Xr.outerWidth(!0),ue=Pe>oi?pt:-pt;F.when(Xr.animate({left:Pe>oi?-pt:pt},Qr,function(){F(this)._showAria(!1)}),vn.css("left",ue+"px")._showAria().animate({left:0},Qr)).done(Ci);break;default:F.when(Xr._showAria(!1),vn._showAria()).done(Ci)}}(Bt,Kt,ne,Pe,oi,function(){Bt.triggerHandler("stepChanged",[Pe,oi])})):Bt.find(".steps li").eq(oi).addClass("error"),!0}}(ne,Pe,oi,parseInt(ar.substring(ar.lastIndexOf("-")+1),0))}return Ci===oi.currentIndex?(Lt(ne,Ci).focus(),!1):void 0}function Tr(Bt){throw arguments.length>1&&(Bt=Bt.format(Array.prototype.slice.call(arguments,1))),new Error(Bt)}function sr(Bt,Kt){null==Kt&&Tr("The argument '{0}' is null or undefined.",Bt)}F.fn.extend({_aria:function(Bt,Kt){return this.attr("aria-"+Bt,Kt)},_removeAria:function(Bt){return this.removeAttr("aria-"+Bt)},_enableAria:function(Bt){return null==Bt||Bt?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(Bt){return null==Bt||Bt?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(Bt){return null==Bt||Bt?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(Bt){return Bt?this.attr("id",Bt):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var Bt=1===arguments.length&&F.isArray(arguments[0])?arguments[0]:arguments,Kt=this,ne=0;ne<Bt.length;ne++){var Pe=new RegExp("\\{"+ne+"\\}","gm");Kt=Kt.replace(Pe,Bt[ne])}return Kt});var Tn=0,Ln="jQu3ry_5teps_St@te_",Dt="-t-",Ft="-p-",Fe="-h-",Le="Index out of range.",st="One or more corresponding step {0} are missing.";F.fn.steps=function(Bt){return F.fn.steps[Bt]?F.fn.steps[Bt].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof Bt&&Bt?void F.error("Method "+Bt+" does not exist on jQuery.steps"):Wi.apply(this,arguments)},F.fn.steps.add=function(Bt){var Kt=$t(this);return Ti(this,Yt(this),Kt,Kt.stepCount,Bt)},F.fn.steps.destroy=function(){return function I(Bt,Kt){var ne=et(Bt);Bt.unbind(ne).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(ne),Bt.removeClass(Kt.clearFixCssClass+" vertical");var Pe=Bt.find(".content > *");Pe.removeData("loaded").removeData("mode").removeData("url"),Pe.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),Bt.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var oi=F('<{0} class="{1}"></{0}>'.format(Bt.get(0).tagName,Bt.attr("class"))),Ci=Bt._id();return null!=Ci&&""!==Ci&&oi._id(Ci),oi.html(Bt.find(".content").html()),Bt.after(oi),Bt.remove(),oi}(this,Yt(this))},F.fn.steps.finish=function(){N(this,$t(this))},F.fn.steps.getCurrentIndex=function(){return $t(this).currentIndex},F.fn.steps.getCurrentStep=function(){return lt(this,$t(this).currentIndex)},F.fn.steps.getStep=function(Bt){return lt(this,Bt)},F.fn.steps.insert=function(Bt,Kt){return Ti(this,Yt(this),$t(this),Bt,Kt)},F.fn.steps.next=function(){return Ze(this,Yt(this),$t(this))},F.fn.steps.previous=function(){return Ye(this,Yt(this),$t(this))},F.fn.steps.remove=function(Bt){return function Pt(Bt,Kt,ne,Pe){return!(0>Pe||Pe>=ne.stepCount||ne.currentIndex===Pe||(function Et(Bt,Kt){vt(Bt).splice(Kt,1)}(Bt,Pe),ne.currentIndex>Pe&&(ne.currentIndex--,Gi(Bt,Kt,ne)),ne.stepCount--,function Mt(Bt,Kt){var ne=Vt(Bt);return Bt.find("#"+ne+Fe+Kt)}(Bt,Pe).remove(),Zt(Bt,Pe).remove(),Lt(Bt,Pe).parent().remove(),0===Pe&&Bt.find(".steps li").first().addClass("first"),Pe===ne.stepCount&&Bt.find(".steps li").eq(Pe).addClass("last"),J(Bt,Kt,ne,Pe),mt(Bt,Kt,ne),0))}(this,Yt(this),$t(this),Bt)},F.fn.steps.setStep=function(){throw new Error("Not yet implemented!")},F.fn.steps.skip=function(){throw new Error("Not yet implemented!")};var Rt=F.fn.steps.contentMode={html:0,iframe:1,async:2},me=F.fn.steps.stepsOrientation={horizontal:0,vertical:1},Me=F.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},ii=F.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:Rt.html,contentLoaded:!1},re=F.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:me.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:Me.none,transitionEffectSpeed:200,onStepChanging:function(){return!0},onStepChanged:function(){},onCanceled:function(){},onFinishing:function(){return!0},onFinished:function(){},onContentLoaded:function(){},onInit:function(){},labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}}}(jQuery),function(F){"use strict";"function"==typeof define&&define.amd?define(["jquery"],F):F(jQuery)}(function(F){"use strict";function v(Zt){var Mt=Zt.toString().replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return new RegExp(Mt)}function l(Zt,Mt){var Yt="s",$t="";return Zt&&(1===(Zt=Zt.replace(/(:|;|\s)/gi,"").split(/\,/)).length?Yt=Zt[0]:($t=Zt[0],Yt=Zt[1])),1===Math.abs(Mt)?$t:Yt}var P=[],I=[],N={precision:100,elapse:!1};I.push(/^[0-9]*$/.source),I.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),I.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),I=new RegExp(I.join("|"));var et={Y:"years",m:"months",n:"daysToMonth",w:"weeks",d:"daysToWeek",D:"totalDays",H:"hours",M:"minutes",S:"seconds"},Lt=function(Zt,Mt,Yt){this.el=Zt,this.$el=F(Zt),this.interval=null,this.offset={},this.options=F.extend({},N),this.instanceNumber=P.length,P.push(this),this.$el.data("countdown-instance",this.instanceNumber),Yt&&("function"==typeof Yt?(this.$el.on("update.countdown",Yt),this.$el.on("stoped.countdown",Yt),this.$el.on("finish.countdown",Yt)):this.options=F.extend({},N,Yt)),this.setFinalDate(Mt),this.start()};F.extend(Lt.prototype,{start:function(){null!==this.interval&&clearInterval(this.interval);var Zt=this;this.update(),this.interval=setInterval(function(){Zt.update.call(Zt)},this.options.precision)},stop:function(){clearInterval(this.interval),this.interval=null,this.dispatchEvent("stoped")},toggle:function(){this.interval?this.stop():this.start()},pause:function(){this.stop()},resume:function(){this.start()},remove:function(){this.stop.call(this),P[this.instanceNumber]=null,delete this.$el.data().countdownInstance},setFinalDate:function(Zt){this.finalDate=function b(Zt){if(Zt instanceof Date)return Zt;if(String(Zt).match(I))return String(Zt).match(/^[0-9]*$/)&&(Zt=Number(Zt)),String(Zt).match(/\-/)&&(Zt=String(Zt).replace(/\-/g,"/")),new Date(Zt);throw new Error("Couldn't cast `"+Zt+"` to a date object.")}(Zt)},update:function(){if(0!==this.$el.closest("html").length){var Zt,Mt=void 0!==F._data(this.el,"events"),Yt=new Date;Zt=this.finalDate.getTime()-Yt.getTime(),Zt=Math.ceil(Zt/1e3),Zt=!this.options.elapse&&0>Zt?0:Math.abs(Zt),this.totalSecsLeft!==Zt&&Mt&&(this.totalSecsLeft=Zt,this.elapsed=Yt>=this.finalDate,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToWeek:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToMonth:Math.floor(this.totalSecsLeft/60/60/24%30.4368),totalDays:Math.floor(this.totalSecsLeft/60/60/24),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),months:Math.floor(this.totalSecsLeft/60/60/24/30.4368),years:Math.abs(this.finalDate.getFullYear()-Yt.getFullYear())},this.options.elapse||0!==this.totalSecsLeft?this.dispatchEvent("update"):(this.stop(),this.dispatchEvent("finish")))}else this.remove()},dispatchEvent:function(Zt){var Mt=F.Event(Zt+".countdown");Mt.finalDate=this.finalDate,Mt.elapsed=this.elapsed,Mt.offset=F.extend({},this.offset),Mt.strftime=function A(Zt){return function(Mt){var Yt=Mt.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(Yt)for(var $t=0,vt=Yt.length;vt>$t;++$t){var lt=Yt[$t].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),Vt=v(lt[0]),xe=lt[1]||"",Ze=lt[3]||"",Ye=null;et.hasOwnProperty(lt=lt[2])&&(Ye=et[lt],Ye=Number(Zt[Ye])),null!==Ye&&("!"===xe&&(Ye=l(Ze,Ye)),""===xe&&10>Ye&&(Ye="0"+Ye.toString()),Mt=Mt.replace(Vt,Ye.toString()))}return Mt.replace(/%%/,"%")}}(this.offset),this.$el.trigger(Mt)}}),F.fn.countdown=function(){var Zt=Array.prototype.slice.call(arguments,0);return this.each(function(){var Mt=F(this).data("countdown-instance");if(void 0!==Mt){var Yt=P[Mt],$t=Zt[0];Lt.prototype.hasOwnProperty($t)?Yt[$t].apply(Yt,Zt.slice(1)):null===String($t).match(/^[$A-Z_][0-9A-Z_$]*$/i)?(Yt.setFinalDate.call(Yt,$t),Yt.start()):F.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,$t))}else new Lt(this,Zt[0],Zt[1])})}}),function(F,b){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(v){return b(F,v)}):"object"==typeof module&&module.exports?module.exports=b(F,require("jquery")):F.jQueryBridget=b(F,F.jQuery)}(window,function(F,b){"use strict";function v(N,et,Lt){function Zt(Yt,$t,vt){var lt,Vt="$()."+N+'("'+$t+'")';return Yt.each(function(xe,Ze){var Ye=Lt.data(Ze,N);if(Ye){var Ui=Ye[$t];if(Ui&&"_"!=$t.charAt(0)){var q=Ui.apply(Ye,vt);lt=void 0===lt?q:lt}else I(Vt+" is not a valid method")}else I(N+" not initialized. Cannot call methods, i.e. "+Vt)}),void 0!==lt?lt:Yt}function Mt(Yt,$t){Yt.each(function(vt,lt){var Vt=Lt.data(lt,N);Vt?(Vt.option($t),Vt._init()):(Vt=new et(lt,$t),Lt.data(lt,N,Vt))})}(Lt=Lt||b||F.jQuery)&&(et.prototype.option||(et.prototype.option=function(Yt){Lt.isPlainObject(Yt)&&(this.options=Lt.extend(!0,this.options,Yt))}),Lt.fn[N]=function(Yt){if("string"==typeof Yt){var $t=l.call(arguments,1);return Zt(this,Yt,$t)}return Mt(this,Yt),this},A(Lt))}function A(N){!N||N&&N.bridget||(N.bridget=v)}var l=Array.prototype.slice,P=F.console,I=void 0===P?function(){}:function(N){P.error(N)};return A(b||F.jQuery),v}),function(F,b){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",b):"object"==typeof module&&module.exports?module.exports=b():F.EvEmitter=b()}("undefined"!=typeof window?window:this,function(){function F(){}var b=F.prototype;return b.on=function(v,A){if(v&&A){var l=this._events=this._events||{},P=l[v]=l[v]||[];return-1==P.indexOf(A)&&P.push(A),this}},b.once=function(v,A){if(v&&A){this.on(v,A);var l=this._onceEvents=this._onceEvents||{};return(l[v]=l[v]||{})[A]=!0,this}},b.off=function(v,A){var l=this._events&&this._events[v];if(l&&l.length){var P=l.indexOf(A);return-1!=P&&l.splice(P,1),this}},b.emitEvent=function(v,A){var l=this._events&&this._events[v];if(l&&l.length){l=l.slice(0),A=A||[];for(var P=this._onceEvents&&this._onceEvents[v],I=0;I<l.length;I++){var N=l[I];P&&P[N]&&(this.off(v,N),delete P[N]),N.apply(this,A)}return this}},b.allOff=function(){delete this._events,delete this._onceEvents},F}),function(F,b){"function"==typeof define&&define.amd?define("get-size/get-size",b):"object"==typeof module&&module.exports?module.exports=b():F.getSize=b()}(window,function(){"use strict";function F(Mt){var Yt=parseFloat(Mt);return-1==Mt.indexOf("%")&&!isNaN(Yt)&&Yt}function A(Mt){var Yt=getComputedStyle(Mt);return Yt||N("Style returned "+Yt+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),Yt}var I,N="undefined"==typeof console?function b(){}:function(Mt){console.error(Mt)},et=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],Lt=et.length,Zt=!1;return function P(Mt){if(function l(){if(!Zt){Zt=!0;var Mt=document.createElement("div");Mt.style.width="200px",Mt.style.padding="1px 2px 3px 4px",Mt.style.borderStyle="solid",Mt.style.borderWidth="1px 2px 3px 4px",Mt.style.boxSizing="border-box";var Yt=document.body||document.documentElement;Yt.appendChild(Mt);var $t=A(Mt);I=200==Math.round(F($t.width)),P.isBoxSizeOuter=I,Yt.removeChild(Mt)}}(),"string"==typeof Mt&&(Mt=document.querySelector(Mt)),Mt&&"object"==typeof Mt&&Mt.nodeType){var Yt=A(Mt);if("none"==Yt.display)return function v(){for(var Mt={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},Yt=0;Yt<Lt;Yt++)Mt[et[Yt]]=0;return Mt}();var $t={};$t.width=Mt.offsetWidth,$t.height=Mt.offsetHeight;for(var vt=$t.isBorderBox="border-box"==Yt.boxSizing,lt=0;lt<Lt;lt++){var Vt=et[lt],Ze=parseFloat(Yt[Vt]);$t[Vt]=isNaN(Ze)?0:Ze}var Ye=$t.paddingLeft+$t.paddingRight,Ui=$t.paddingTop+$t.paddingBottom,q=$t.marginLeft+$t.marginRight,Wi=$t.marginTop+$t.marginBottom,Ti=$t.borderLeftWidth+$t.borderRightWidth,ti=$t.borderTopWidth+$t.borderBottomWidth,ae=vt&&I,zt=F(Yt.width);!1!==zt&&($t.width=zt+(ae?0:Ye+Ti));var Ht=F(Yt.height);return!1!==Ht&&($t.height=Ht+(ae?0:Ui+ti)),$t.innerWidth=$t.width-(Ye+Ti),$t.innerHeight=$t.height-(Ui+ti),$t.outerWidth=$t.width+q,$t.outerHeight=$t.height+Wi,$t}}}),function(F,b){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",b):"object"==typeof module&&module.exports?module.exports=b():F.matchesSelector=b()}(window,function(){"use strict";var F=function(){var b=window.Element.prototype;if(b.matches)return"matches";if(b.matchesSelector)return"matchesSelector";for(var v=["webkit","moz","ms","o"],A=0;A<v.length;A++){var P=v[A]+"MatchesSelector";if(b[P])return P}}();return function(b,v){return b[F](v)}}),function(F,b){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(v){return b(F,v)}):"object"==typeof module&&module.exports?module.exports=b(F,require("desandro-matches-selector")):F.fizzyUIUtils=b(F,F.matchesSelector)}(window,function(F,b){var v={extend:function(P,I){for(var N in I)P[N]=I[N];return P},modulo:function(P,I){return(P%I+I)%I}},A=Array.prototype.slice;v.makeArray=function(P){return Array.isArray(P)?P:null==P?[]:"object"==typeof P&&"number"==typeof P.length?A.call(P):[P]},v.removeFrom=function(P,I){var N=P.indexOf(I);-1!=N&&P.splice(N,1)},v.getParent=function(P,I){for(;P.parentNode&&P!=document.body;)if(b(P=P.parentNode,I))return P},v.getQueryElement=function(P){return"string"==typeof P?document.querySelector(P):P},v.handleEvent=function(P){var I="on"+P.type;this[I]&&this[I](P)},v.filterFindElements=function(P,I){P=v.makeArray(P);var N=[];return P.forEach(function(et){if(et instanceof HTMLElement){if(!I)return void N.push(et);b(et,I)&&N.push(et);for(var Lt=et.querySelectorAll(I),Zt=0;Zt<Lt.length;Zt++)N.push(Lt[Zt])}}),N},v.debounceMethod=function(P,I,N){N=N||100;var et=P.prototype[I],Lt=I+"Timeout";P.prototype[I]=function(){var Zt=this[Lt];clearTimeout(Zt);var Mt=arguments,Yt=this;this[Lt]=setTimeout(function(){et.apply(Yt,Mt),delete Yt[Lt]},N)}},v.docReady=function(P){var I=document.readyState;"complete"==I||"interactive"==I?setTimeout(P):document.addEventListener("DOMContentLoaded",P)},v.toDashed=function(P){return P.replace(/(.)([A-Z])/g,function(I,N,et){return N+"-"+et}).toLowerCase()};var l=F.console;return v.htmlInit=function(P,I){v.docReady(function(){var N=v.toDashed(I),et="data-"+N,Lt=document.querySelectorAll("["+et+"]"),Zt=document.querySelectorAll(".js-"+N),Mt=v.makeArray(Lt).concat(v.makeArray(Zt)),Yt=et+"-options",$t=F.jQuery;Mt.forEach(function(vt){var lt,Vt=vt.getAttribute(et)||vt.getAttribute(Yt);try{lt=Vt&&JSON.parse(Vt)}catch(Ze){return void(l&&l.error("Error parsing "+et+" on "+vt.className+": "+Ze))}var xe=new P(vt,lt);$t&&$t.data(vt,I,xe)})})},v}),function(F,b){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],b):"object"==typeof module&&module.exports?module.exports=b(require("ev-emitter"),require("get-size")):(F.Outlayer={},F.Outlayer.Item=b(F.EvEmitter,F.getSize))}(window,function(F,b){"use strict";function A(vt,lt){vt&&(this.element=vt,this.layout=lt,this.position={x:0,y:0},this._create())}var P=document.documentElement.style,I="string"==typeof P.transition?"transition":"WebkitTransition",N="string"==typeof P.transform?"transform":"WebkitTransform",et={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[I],Lt={transform:N,transition:I,transitionDuration:I+"Duration",transitionProperty:I+"Property",transitionDelay:I+"Delay"},Zt=A.prototype=Object.create(F.prototype);Zt.constructor=A,Zt._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},Zt.handleEvent=function(vt){var lt="on"+vt.type;this[lt]&&this[lt](vt)},Zt.getSize=function(){this.size=b(this.element)},Zt.css=function(vt){var lt=this.element.style;for(var Vt in vt)lt[Lt[Vt]||Vt]=vt[Vt]},Zt.getPosition=function(){var vt=getComputedStyle(this.element),lt=this.layout._getOption("originLeft"),Vt=this.layout._getOption("originTop"),xe=vt[lt?"left":"right"],Ze=vt[Vt?"top":"bottom"],Ye=parseFloat(xe),Ui=parseFloat(Ze),q=this.layout.size;-1!=xe.indexOf("%")&&(Ye=Ye/100*q.width),-1!=Ze.indexOf("%")&&(Ui=Ui/100*q.height),Ye=isNaN(Ye)?0:Ye,Ui=isNaN(Ui)?0:Ui,Ui-=Vt?q.paddingTop:q.paddingBottom,this.position.x=Ye-=lt?q.paddingLeft:q.paddingRight,this.position.y=Ui},Zt.layoutPosition=function(){var vt=this.layout.size,lt={},Vt=this.layout._getOption("originLeft"),xe=this.layout._getOption("originTop"),Ui=Vt?"right":"left";lt[Vt?"left":"right"]=this.getXValue(this.position.x+vt[Vt?"paddingLeft":"paddingRight"]),lt[Ui]="";var ti=xe?"bottom":"top";lt[xe?"top":"bottom"]=this.getYValue(this.position.y+vt[xe?"paddingTop":"paddingBottom"]),lt[ti]="",this.css(lt),this.emitEvent("layout",[this])},Zt.getXValue=function(vt){var lt=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!lt?vt/this.layout.size.width*100+"%":vt+"px"},Zt.getYValue=function(vt){var lt=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&lt?vt/this.layout.size.height*100+"%":vt+"px"},Zt._transitionTo=function(vt,lt){this.getPosition();var Vt=this.position.x,xe=this.position.y,Ze=vt==this.position.x&&lt==this.position.y;if(this.setPosition(vt,lt),!Ze||this.isTransitioning){var q={};q.transform=this.getTranslate(vt-Vt,lt-xe),this.transition({to:q,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},Zt.getTranslate=function(vt,lt){return"translate3d("+(vt=this.layout._getOption("originLeft")?vt:-vt)+"px, "+(lt=this.layout._getOption("originTop")?lt:-lt)+"px, 0)"},Zt.goTo=function(vt,lt){this.setPosition(vt,lt),this.layoutPosition()},Zt.moveTo=Zt._transitionTo,Zt.setPosition=function(vt,lt){this.position.x=parseFloat(vt),this.position.y=parseFloat(lt)},Zt._nonTransition=function(vt){for(var lt in this.css(vt.to),vt.isCleaning&&this._removeStyles(vt.to),vt.onTransitionEnd)vt.onTransitionEnd[lt].call(this)},Zt.transition=function(vt){if(parseFloat(this.layout.options.transitionDuration)){var lt=this._transn;for(var Vt in vt.onTransitionEnd)lt.onEnd[Vt]=vt.onTransitionEnd[Vt];for(Vt in vt.to)lt.ingProperties[Vt]=!0,vt.isCleaning&&(lt.clean[Vt]=!0);vt.from&&this.css(vt.from),this.enableTransition(vt.to),this.css(vt.to),this.isTransitioning=!0}else this._nonTransition(vt)};var Mt="opacity,"+function l(vt){return vt.replace(/([A-Z])/g,function(lt){return"-"+lt.toLowerCase()})}(N);Zt.enableTransition=function(){if(!this.isTransitioning){var vt=this.layout.options.transitionDuration;this.css({transitionProperty:Mt,transitionDuration:vt="number"==typeof vt?vt+"ms":vt,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(et,this,!1)}},Zt.onwebkitTransitionEnd=function(vt){this.ontransitionend(vt)},Zt.onotransitionend=function(vt){this.ontransitionend(vt)};var Yt={"-webkit-transform":"transform"};Zt.ontransitionend=function(vt){if(vt.target===this.element){var lt=this._transn,Vt=Yt[vt.propertyName]||vt.propertyName;delete lt.ingProperties[Vt],function v(vt){for(var lt in vt)return!1;return!0}(lt.ingProperties)&&this.disableTransition(),Vt in lt.clean&&(this.element.style[vt.propertyName]="",delete lt.clean[Vt]),Vt in lt.onEnd&&(lt.onEnd[Vt].call(this),delete lt.onEnd[Vt]),this.emitEvent("transitionEnd",[this])}},Zt.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(et,this,!1),this.isTransitioning=!1},Zt._removeStyles=function(vt){var lt={};for(var Vt in vt)lt[Vt]="";this.css(lt)};var $t={transitionProperty:"",transitionDuration:"",transitionDelay:""};return Zt.removeTransitionStyles=function(){this.css($t)},Zt.stagger=function(vt){vt=isNaN(vt)?0:vt,this.staggerDelay=vt+"ms"},Zt.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},Zt.remove=function(){return I&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},Zt.reveal=function(){delete this.isHidden,this.css({display:""});var vt=this.layout.options,lt={};lt[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:vt.hiddenStyle,to:vt.visibleStyle,isCleaning:!0,onTransitionEnd:lt})},Zt.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},Zt.getHideRevealTransitionEndProperty=function(vt){var lt=this.layout.options[vt];if(lt.opacity)return"opacity";for(var Vt in lt)return Vt},Zt.hide=function(){this.isHidden=!0,this.css({display:""});var vt=this.layout.options,lt={};lt[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:vt.visibleStyle,to:vt.hiddenStyle,isCleaning:!0,onTransitionEnd:lt})},Zt.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},Zt.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},A}),function(F,b){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(v,A,l,P){return b(F,v,A,l,P)}):"object"==typeof module&&module.exports?module.exports=b(F,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):F.Outlayer=b(F,F.EvEmitter,F.getSize,F.fizzyUIUtils,F.Outlayer.Item)}(window,function(F,b,v,A,l){"use strict";function P(lt,Vt){var xe=A.getQueryElement(lt);if(xe){this.element=xe,Lt&&(this.$element=Lt(this.element)),this.options=A.extend({},this.constructor.defaults),this.option(Vt);var Ze=++Mt;this.element.outlayerGUID=Ze,Yt[Ze]=this,this._create(),this._getOption("initLayout")&&this.layout()}else et&&et.error("Bad element for "+this.constructor.namespace+": "+(xe||lt))}function I(lt){function Vt(){lt.apply(this,arguments)}return(Vt.prototype=Object.create(lt.prototype)).constructor=Vt,Vt}var et=F.console,Lt=F.jQuery,Zt=function(){},Mt=0,Yt={};P.namespace="outlayer",P.Item=l,P.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var $t=P.prototype;A.extend($t,b.prototype),$t.option=function(lt){A.extend(this.options,lt)},$t._getOption=function(lt){var Vt=this.constructor.compatOptions[lt];return Vt&&void 0!==this.options[Vt]?this.options[Vt]:this.options[lt]},P.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},$t._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),A.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},$t.reloadItems=function(){this.items=this._itemize(this.element.children)},$t._itemize=function(lt){for(var Vt=this._filterFindItemElements(lt),xe=this.constructor.Item,Ze=[],Ye=0;Ye<Vt.length;Ye++){var q=new xe(Vt[Ye],this);Ze.push(q)}return Ze},$t._filterFindItemElements=function(lt){return A.filterFindElements(lt,this.options.itemSelector)},$t.getItemElements=function(){return this.items.map(function(lt){return lt.element})},$t.layout=function(){this._resetLayout(),this._manageStamps();var lt=this._getOption("layoutInstant");this.layoutItems(this.items,void 0!==lt?lt:!this._isLayoutInited),this._isLayoutInited=!0},$t._init=$t.layout,$t._resetLayout=function(){this.getSize()},$t.getSize=function(){this.size=v(this.element)},$t._getMeasurement=function(lt,Vt){var xe,Ze=this.options[lt];Ze?("string"==typeof Ze?xe=this.element.querySelector(Ze):Ze instanceof HTMLElement&&(xe=Ze),this[lt]=xe?v(xe)[Vt]:Ze):this[lt]=0},$t.layoutItems=function(lt,Vt){lt=this._getItemsForLayout(lt),this._layoutItems(lt,Vt),this._postLayout()},$t._getItemsForLayout=function(lt){return lt.filter(function(Vt){return!Vt.isIgnored})},$t._layoutItems=function(lt,Vt){if(this._emitCompleteOnItems("layout",lt),lt&&lt.length){var xe=[];lt.forEach(function(Ze){var Ye=this._getItemLayoutPosition(Ze);Ye.item=Ze,Ye.isInstant=Vt||Ze.isLayoutInstant,xe.push(Ye)},this),this._processLayoutQueue(xe)}},$t._getItemLayoutPosition=function(){return{x:0,y:0}},$t._processLayoutQueue=function(lt){this.updateStagger(),lt.forEach(function(Vt,xe){this._positionItem(Vt.item,Vt.x,Vt.y,Vt.isInstant,xe)},this)},$t.updateStagger=function(){var lt=this.options.stagger;return null==lt?void(this.stagger=0):(this.stagger=function N(lt){if("number"==typeof lt)return lt;var Vt=lt.match(/(^\d*\.?\d*)(\w*)/),xe=Vt&&Vt[1],Ze=Vt&&Vt[2];return xe.length?(xe=parseFloat(xe))*(vt[Ze]||1):0}(lt),this.stagger)},$t._positionItem=function(lt,Vt,xe,Ze,Ye){Ze?lt.goTo(Vt,xe):(lt.stagger(Ye*this.stagger),lt.moveTo(Vt,xe))},$t._postLayout=function(){this.resizeContainer()},$t.resizeContainer=function(){if(this._getOption("resizeContainer")){var Vt=this._getContainerSize();Vt&&(this._setContainerMeasure(Vt.width,!0),this._setContainerMeasure(Vt.height,!1))}},$t._getContainerSize=Zt,$t._setContainerMeasure=function(lt,Vt){if(void 0!==lt){var xe=this.size;xe.isBorderBox&&(lt+=Vt?xe.paddingLeft+xe.paddingRight+xe.borderLeftWidth+xe.borderRightWidth:xe.paddingBottom+xe.paddingTop+xe.borderTopWidth+xe.borderBottomWidth),lt=Math.max(lt,0),this.element.style[Vt?"width":"height"]=lt+"px"}},$t._emitCompleteOnItems=function(lt,Vt){function xe(){Ye.dispatchEvent(lt+"Complete",null,[Vt])}function Ze(){++q==Ui&&xe()}var Ye=this,Ui=Vt.length;if(Vt&&Ui){var q=0;Vt.forEach(function(Wi){Wi.once(lt,Ze)})}else xe()},$t.dispatchEvent=function(lt,Vt,xe){var Ze=Vt?[Vt].concat(xe):xe;if(this.emitEvent(lt,Ze),Lt)if(this.$element=this.$element||Lt(this.element),Vt){var Ye=Lt.Event(Vt);Ye.type=lt,this.$element.trigger(Ye,xe)}else this.$element.trigger(lt,xe)},$t.ignore=function(lt){var Vt=this.getItem(lt);Vt&&(Vt.isIgnored=!0)},$t.unignore=function(lt){var Vt=this.getItem(lt);Vt&&delete Vt.isIgnored},$t.stamp=function(lt){(lt=this._find(lt))&&(this.stamps=this.stamps.concat(lt),lt.forEach(this.ignore,this))},$t.unstamp=function(lt){(lt=this._find(lt))&&lt.forEach(function(Vt){A.removeFrom(this.stamps,Vt),this.unignore(Vt)},this)},$t._find=function(lt){if(lt)return"string"==typeof lt&&(lt=this.element.querySelectorAll(lt)),A.makeArray(lt)},$t._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},$t._getBoundingRect=function(){var lt=this.element.getBoundingClientRect(),Vt=this.size;this._boundingRect={left:lt.left+Vt.paddingLeft+Vt.borderLeftWidth,top:lt.top+Vt.paddingTop+Vt.borderTopWidth,right:lt.right-(Vt.paddingRight+Vt.borderRightWidth),bottom:lt.bottom-(Vt.paddingBottom+Vt.borderBottomWidth)}},$t._manageStamp=Zt,$t._getElementOffset=function(lt){var Vt=lt.getBoundingClientRect(),xe=this._boundingRect,Ze=v(lt);return{left:Vt.left-xe.left-Ze.marginLeft,top:Vt.top-xe.top-Ze.marginTop,right:xe.right-Vt.right-Ze.marginRight,bottom:xe.bottom-Vt.bottom-Ze.marginBottom}},$t.handleEvent=A.handleEvent,$t.bindResize=function(){F.addEventListener("resize",this),this.isResizeBound=!0},$t.unbindResize=function(){F.removeEventListener("resize",this),this.isResizeBound=!1},$t.onresize=function(){this.resize()},A.debounceMethod(P,"onresize",100),$t.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},$t.needsResizeLayout=function(){var lt=v(this.element);return this.size&&lt&&lt.innerWidth!==this.size.innerWidth},$t.addItems=function(lt){var Vt=this._itemize(lt);return Vt.length&&(this.items=this.items.concat(Vt)),Vt},$t.appended=function(lt){var Vt=this.addItems(lt);Vt.length&&(this.layoutItems(Vt,!0),this.reveal(Vt))},$t.prepended=function(lt){var Vt=this._itemize(lt);if(Vt.length){var xe=this.items.slice(0);this.items=Vt.concat(xe),this._resetLayout(),this._manageStamps(),this.layoutItems(Vt,!0),this.reveal(Vt),this.layoutItems(xe)}},$t.reveal=function(lt){if(this._emitCompleteOnItems("reveal",lt),lt&&lt.length){var Vt=this.updateStagger();lt.forEach(function(xe,Ze){xe.stagger(Ze*Vt),xe.reveal()})}},$t.hide=function(lt){if(this._emitCompleteOnItems("hide",lt),lt&&lt.length){var Vt=this.updateStagger();lt.forEach(function(xe,Ze){xe.stagger(Ze*Vt),xe.hide()})}},$t.revealItemElements=function(lt){var Vt=this.getItems(lt);this.reveal(Vt)},$t.hideItemElements=function(lt){var Vt=this.getItems(lt);this.hide(Vt)},$t.getItem=function(lt){for(var Vt=0;Vt<this.items.length;Vt++){var xe=this.items[Vt];if(xe.element==lt)return xe}},$t.getItems=function(lt){lt=A.makeArray(lt);var Vt=[];return lt.forEach(function(xe){var Ze=this.getItem(xe);Ze&&Vt.push(Ze)},this),Vt},$t.remove=function(lt){var Vt=this.getItems(lt);this._emitCompleteOnItems("remove",Vt),Vt&&Vt.length&&Vt.forEach(function(xe){xe.remove(),A.removeFrom(this.items,xe)},this)},$t.destroy=function(){var lt=this.element.style;lt.height="",lt.position="",lt.width="",this.items.forEach(function(xe){xe.destroy()}),this.unbindResize(),delete Yt[this.element.outlayerGUID],delete this.element.outlayerGUID,Lt&&Lt.removeData(this.element,this.constructor.namespace)},P.data=function(lt){var Vt=(lt=A.getQueryElement(lt))&&lt.outlayerGUID;return Vt&&Yt[Vt]},P.create=function(lt,Vt){var xe=I(P);return xe.defaults=A.extend({},P.defaults),A.extend(xe.defaults,Vt),xe.compatOptions=A.extend({},P.compatOptions),xe.namespace=lt,xe.data=P.data,xe.Item=I(l),A.htmlInit(xe,lt),Lt&&Lt.bridget&&Lt.bridget(lt,xe),xe};var vt={ms:1,s:1e3};return P.Item=l,P}),function(F,b){"function"==typeof define&&define.amd?define("isotope-layout/js/item",["outlayer/outlayer"],b):"object"==typeof module&&module.exports?module.exports=b(require("outlayer")):(F.Isotope=F.Isotope||{},F.Isotope.Item=b(F.Outlayer))}(window,function(F){"use strict";function b(){F.Item.apply(this,arguments)}var v=b.prototype=Object.create(F.Item.prototype),A=v._create;v._create=function(){this.id=this.layout.itemGUID++,A.call(this),this.sortData={}},v.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var P=this.layout.options.getSortData,I=this.layout._sorters;for(var N in P)this.sortData[N]=(0,I[N])(this.element,this)}};var l=v.destroy;return v.destroy=function(){l.apply(this,arguments),this.css({display:""})},b}),function(F,b){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-mode",["get-size/get-size","outlayer/outlayer"],b):"object"==typeof module&&module.exports?module.exports=b(require("get-size"),require("outlayer")):(F.Isotope=F.Isotope||{},F.Isotope.LayoutMode=b(F.getSize,F.Outlayer))}(window,function(F,b){"use strict";function v(P){this.isotope=P,P&&(this.options=P.options[this.namespace],this.element=P.element,this.items=P.filteredItems,this.size=P.size)}var A=v.prototype;return["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout","_getOption"].forEach(function(P){A[P]=function(){return b.prototype[P].apply(this.isotope,arguments)}}),A.needsVerticalResizeLayout=function(){var P=F(this.isotope.element);return this.isotope.size&&P&&P.innerHeight!=this.isotope.size.innerHeight},A._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},A.getColumnWidth=function(){this.getSegmentSize("column","Width")},A.getRowHeight=function(){this.getSegmentSize("row","Height")},A.getSegmentSize=function(P,I){var N=P+I,et="outer"+I;if(this._getMeasurement(N,et),!this[N]){var Lt=this.getFirstItemSize();this[N]=Lt&&Lt[et]||this.isotope.size["inner"+I]}},A.getFirstItemSize=function(){var P=this.isotope.filteredItems[0];return P&&P.element&&F(P.element)},A.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},A.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},v.modes={},v.create=function(P,I){function N(){v.apply(this,arguments)}return(N.prototype=Object.create(A)).constructor=N,I&&(N.options=I),N.prototype.namespace=P,v.modes[P]=N,N},v}),function(F,b){"function"==typeof define&&define.amd?define("masonry-layout/masonry",["outlayer/outlayer","get-size/get-size"],b):"object"==typeof module&&module.exports?module.exports=b(require("outlayer"),require("get-size")):F.Masonry=b(F.Outlayer,F.getSize)}(window,function(F,b){var v=F.create("masonry");v.compatOptions.fitWidth="isFitWidth";var A=v.prototype;return A._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var l=0;l<this.cols;l++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},A.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var l=this.items[0],P=l&&l.element;this.columnWidth=P&&b(P).outerWidth||this.containerWidth}var I=this.columnWidth+=this.gutter,N=this.containerWidth+this.gutter,et=N/I,Lt=I-N%I;et=Math[Lt&&Lt<1?"round":"floor"](et),this.cols=Math.max(et,1)},A.getContainerWidth=function(){var l=this._getOption("fitWidth"),I=b(l?this.element.parentNode:this.element);this.containerWidth=I&&I.innerWidth},A._getItemLayoutPosition=function(l){l.getSize();var P=l.size.outerWidth%this.columnWidth,N=Math[P&&P<1?"round":"ceil"](l.size.outerWidth/this.columnWidth);N=Math.min(N,this.cols);for(var Lt=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](N,l),Zt={x:this.columnWidth*Lt.col,y:Lt.y},Mt=Lt.y+l.size.outerHeight,Yt=N+Lt.col,$t=Lt.col;$t<Yt;$t++)this.colYs[$t]=Mt;return Zt},A._getTopColPosition=function(l){var P=this._getTopColGroup(l),I=Math.min.apply(Math,P);return{col:P.indexOf(I),y:I}},A._getTopColGroup=function(l){if(l<2)return this.colYs;for(var P=[],I=this.cols+1-l,N=0;N<I;N++)P[N]=this._getColGroupY(N,l);return P},A._getColGroupY=function(l,P){if(P<2)return this.colYs[l];var I=this.colYs.slice(l,l+P);return Math.max.apply(Math,I)},A._getHorizontalColPosition=function(l,P){var I=this.horizontalColIndex%this.cols;return I=l>1&&I+l>this.cols?0:I,this.horizontalColIndex=P.size.outerWidth&&P.size.outerHeight?I+l:this.horizontalColIndex,{col:I,y:this._getColGroupY(I,l)}},A._manageStamp=function(l){var P=b(l),I=this._getElementOffset(l),et=this._getOption("originLeft")?I.left:I.right,Lt=et+P.outerWidth,Zt=Math.floor(et/this.columnWidth);Zt=Math.max(0,Zt);var Mt=Math.floor(Lt/this.columnWidth);Mt-=Lt%this.columnWidth?0:1,Mt=Math.min(this.cols-1,Mt);for(var $t=(this._getOption("originTop")?I.top:I.bottom)+P.outerHeight,vt=Zt;vt<=Mt;vt++)this.colYs[vt]=Math.max($t,this.colYs[vt])},A._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var l={height:this.maxY};return this._getOption("fitWidth")&&(l.width=this._getContainerFitWidth()),l},A._getContainerFitWidth=function(){for(var l=0,P=this.cols;--P&&0===this.colYs[P];)l++;return(this.cols-l)*this.columnWidth-this.gutter},A.needsResizeLayout=function(){var l=this.containerWidth;return this.getContainerWidth(),l!=this.containerWidth},v}),function(F,b){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/masonry",["layout-mode","masonry-layout/masonry"],b):"object"==typeof module&&module.exports?module.exports=b(require("layout-mode"),require("masonry-layout")):b(F.Isotope.LayoutMode,F.Masonry)}(window,function(F,b){"use strict";var v=F.create("masonry"),A=v.prototype,l={_getElementOffset:!0,layout:!0,_getMeasurement:!0};for(var P in b.prototype)l[P]||(A[P]=b.prototype[P]);var I=A.measureColumns;A.measureColumns=function(){this.items=this.isotope.filteredItems,I.call(this)};var N=A._getOption;return A._getOption=function(et){return"fitWidth"==et?void 0!==this.options.isFitWidth?this.options.isFitWidth:this.options.fitWidth:N.apply(this.isotope,arguments)},v}),function(F,b){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/fit-rows",["layout-mode"],b):"object"==typeof exports?module.exports=b(require("layout-mode")):b(F.Isotope.LayoutMode)}(window,function(F){"use strict";var b=F.create("fitRows"),v=b.prototype;return v._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},v._getItemLayoutPosition=function(A){A.getSize();var l=A.size.outerWidth+this.gutter;0!==this.x&&l+this.x>this.isotope.size.innerWidth+this.gutter&&(this.x=0,this.y=this.maxY);var I={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+A.size.outerHeight),this.x+=l,I},v._getContainerSize=function(){return{height:this.maxY}},b}),function(F,b){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/vertical",["layout-mode"],b):"object"==typeof module&&module.exports?module.exports=b(require("layout-mode")):b(F.Isotope.LayoutMode)}(window,function(F){"use strict";var b=F.create("vertical",{horizontalAlignment:0}),v=b.prototype;return v._resetLayout=function(){this.y=0},v._getItemLayoutPosition=function(A){A.getSize();var l=(this.isotope.size.innerWidth-A.size.outerWidth)*this.options.horizontalAlignment,P=this.y;return this.y+=A.size.outerHeight,{x:l,y:P}},v._getContainerSize=function(){return{height:this.y}},b}),function(F,b){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","desandro-matches-selector/matches-selector","fizzy-ui-utils/utils","isotope-layout/js/item","isotope-layout/js/layout-mode","isotope-layout/js/layout-modes/masonry","isotope-layout/js/layout-modes/fit-rows","isotope-layout/js/layout-modes/vertical"],function(v,A,l,P,I,N){return b(F,v,0,l,P,I,N)}):"object"==typeof module&&module.exports?module.exports=b(F,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("isotope-layout/js/item"),require("isotope-layout/js/layout-mode"),require("isotope-layout/js/layout-modes/masonry"),require("isotope-layout/js/layout-modes/fit-rows"),require("isotope-layout/js/layout-modes/vertical")):F.Isotope=b(F,F.Outlayer,0,F.matchesSelector,F.fizzyUIUtils,F.Isotope.Item,F.Isotope.LayoutMode)}(window,function(F,b,v,A,l,P,I){var et=F.jQuery,Lt=String.prototype.trim?function(vt){return vt.trim()}:function(vt){return vt.replace(/^\s+|\s+$/g,"")},Zt=b.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});Zt.Item=P,Zt.LayoutMode=I;var Mt=Zt.prototype;Mt._create=function(){for(var vt in this.itemGUID=0,this._sorters={},this._getSorters(),b.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"],I.modes)this._initLayoutMode(vt)},Mt.reloadItems=function(){this.itemGUID=0,b.prototype.reloadItems.call(this)},Mt._itemize=function(){for(var vt=b.prototype._itemize.apply(this,arguments),lt=0;lt<vt.length;lt++){var Vt=vt[lt];Vt.id=this.itemGUID++}return this._updateItemsSortData(vt),vt},Mt._initLayoutMode=function(vt){var lt=I.modes[vt],Vt=this.options[vt]||{};this.options[vt]=lt.options?l.extend(lt.options,Vt):Vt,this.modes[vt]=new lt(this)},Mt.layout=function(){return!this._isLayoutInited&&this._getOption("initLayout")?void this.arrange():void this._layout()},Mt._layout=function(){var vt=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,vt),this._isLayoutInited=!0},Mt.arrange=function(vt){this.option(vt),this._getIsInstant();var lt=this._filter(this.items);this.filteredItems=lt.matches,this._bindArrangeComplete(),this._isInstant?this._noTransition(this._hideReveal,[lt]):this._hideReveal(lt),this._sort(),this._layout()},Mt._init=Mt.arrange,Mt._hideReveal=function(vt){this.reveal(vt.needReveal),this.hide(vt.needHide)},Mt._getIsInstant=function(){var vt=this._getOption("layoutInstant"),lt=void 0!==vt?vt:!this._isLayoutInited;return this._isInstant=lt,lt},Mt._bindArrangeComplete=function(){function vt(){lt&&Vt&&xe&&Ze.dispatchEvent("arrangeComplete",null,[Ze.filteredItems])}var lt,Vt,xe,Ze=this;this.once("layoutComplete",function(){lt=!0,vt()}),this.once("hideComplete",function(){Vt=!0,vt()}),this.once("revealComplete",function(){xe=!0,vt()})},Mt._filter=function(vt){for(var lt=this.options.filter,Vt=[],xe=[],Ze=[],Ye=this._getFilterTest(lt=lt||"*"),Ui=0;Ui<vt.length;Ui++){var q=vt[Ui];if(!q.isIgnored){var Wi=Ye(q);Wi&&Vt.push(q),Wi&&q.isHidden?xe.push(q):Wi||q.isHidden||Ze.push(q)}}return{matches:Vt,needReveal:xe,needHide:Ze}},Mt._getFilterTest=function(vt){return et&&this.options.isJQueryFiltering?function(lt){return et(lt.element).is(vt)}:"function"==typeof vt?function(lt){return vt(lt.element)}:function(lt){return A(lt.element,vt)}},Mt.updateSortData=function(vt){var lt;vt?(vt=l.makeArray(vt),lt=this.getItems(vt)):lt=this.items,this._getSorters(),this._updateItemsSortData(lt)},Mt._getSorters=function(){var vt=this.options.getSortData;for(var lt in vt)this._sorters[lt]=Yt(vt[lt])},Mt._updateItemsSortData=function(vt){for(var lt=vt&&vt.length,Vt=0;lt&&Vt<lt;Vt++)vt[Vt].updateSortData()};var Yt=function vt(Vt){if("string"!=typeof Vt)return Vt;var xe=Lt(Vt).split(" "),Ze=xe[0],Ye=Ze.match(/^\[(.+)\]$/),q=function lt(Vt,xe){return Vt?function(Ze){return Ze.getAttribute(Vt)}:function(Ze){var Ye=Ze.querySelector(xe);return Ye&&Ye.textContent}}(Ye&&Ye[1],Ze),Wi=Zt.sortDataParsers[xe[1]];return Wi?function(Ti){return Ti&&Wi(q(Ti))}:function(Ti){return Ti&&q(Ti)}};Zt.sortDataParsers={parseInt:function(vt){return parseInt(vt,10)},parseFloat:function(vt){return parseFloat(vt)}},Mt._sort=function(){if(this.options.sortBy){var vt=l.makeArray(this.options.sortBy);this._getIsSameSortBy(vt)||(this.sortHistory=vt.concat(this.sortHistory));var lt=function N(vt,lt){return function(Vt,xe){for(var Ze=0;Ze<vt.length;Ze++){var Ye=vt[Ze],Ui=Vt.sortData[Ye],q=xe.sortData[Ye];if(Ui>q||Ui<q)return(Ui>q?1:-1)*((void 0!==lt[Ye]?lt[Ye]:lt)?1:-1)}return 0}}(this.sortHistory,this.options.sortAscending);this.filteredItems.sort(lt)}},Mt._getIsSameSortBy=function(vt){for(var lt=0;lt<vt.length;lt++)if(vt[lt]!=this.sortHistory[lt])return!1;return!0},Mt._mode=function(){var vt=this.options.layoutMode,lt=this.modes[vt];if(!lt)throw new Error("No layout mode: "+vt);return lt.options=this.options[vt],lt},Mt._resetLayout=function(){b.prototype._resetLayout.call(this),this._mode()._resetLayout()},Mt._getItemLayoutPosition=function(vt){return this._mode()._getItemLayoutPosition(vt)},Mt._manageStamp=function(vt){this._mode()._manageStamp(vt)},Mt._getContainerSize=function(){return this._mode()._getContainerSize()},Mt.needsResizeLayout=function(){return this._mode().needsResizeLayout()},Mt.appended=function(vt){var lt=this.addItems(vt);if(lt.length){var Vt=this._filterRevealAdded(lt);this.filteredItems=this.filteredItems.concat(Vt)}},Mt.prepended=function(vt){var lt=this._itemize(vt);if(lt.length){this._resetLayout(),this._manageStamps();var Vt=this._filterRevealAdded(lt);this.layoutItems(this.filteredItems),this.filteredItems=Vt.concat(this.filteredItems),this.items=lt.concat(this.items)}},Mt._filterRevealAdded=function(vt){var lt=this._filter(vt);return this.hide(lt.needHide),this.reveal(lt.matches),this.layoutItems(lt.matches,!0),lt.matches},Mt.insert=function(vt){var lt=this.addItems(vt);if(lt.length){var Vt,Ze=lt.length;for(Vt=0;Vt<Ze;Vt++)this.element.appendChild(lt[Vt].element);var Ye=this._filter(lt).matches;for(Vt=0;Vt<Ze;Vt++)lt[Vt].isLayoutInstant=!0;for(this.arrange(),Vt=0;Vt<Ze;Vt++)delete lt[Vt].isLayoutInstant;this.reveal(Ye)}};var $t=Mt.remove;return Mt.remove=function(vt){vt=l.makeArray(vt);var lt=this.getItems(vt);$t.call(this,vt);for(var Vt=lt&&lt.length,xe=0;Vt&&xe<Vt;xe++)l.removeFrom(this.filteredItems,lt[xe])},Mt.shuffle=function(){for(var vt=0;vt<this.items.length;vt++)this.items[vt].sortData.random=Math.random();this.options.sortBy="random",this._sort(),this._layout()},Mt._noTransition=function(vt,lt){var Vt=this.options.transitionDuration;this.options.transitionDuration=0;var xe=vt.apply(this,lt);return this.options.transitionDuration=Vt,xe},Mt.getFilteredItemElements=function(){return this.filteredItems.map(function(vt){return vt.element})},Zt}),function(F){"use strict";"function"==typeof define&&define.amd?define(["jquery"],F):"undefined"!=typeof exports?module.exports=F(require("jquery")):F(jQuery)}(function(F){"use strict";var v,b=window;(v=0,b=function(A,l){var P,I=this;I.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:F(A),appendDots:F(A),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(N,et){return F('<button type="button" />').text(et+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},I.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},F.extend(I,I.initials),I.activeBreakpoint=null,I.animType=null,I.animProp=null,I.breakpoints=[],I.breakpointSettings=[],I.cssTransitions=!1,I.focussed=!1,I.interrupted=!1,I.hidden="hidden",I.paused=!0,I.positionProp=null,I.respondTo=null,I.rowCount=1,I.shouldClick=!0,I.$slider=F(A),I.$slidesCache=null,I.transformType=null,I.transitionType=null,I.visibilityChange="visibilitychange",I.windowWidth=0,I.windowTimer=null,P=F(A).data("slick")||{},I.options=F.extend({},I.defaults,l,P),I.currentSlide=I.options.initialSlide,I.originalSettings=I.options,void 0!==document.mozHidden?(I.hidden="mozHidden",I.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(I.hidden="webkitHidden",I.visibilityChange="webkitvisibilitychange"),I.autoPlay=F.proxy(I.autoPlay,I),I.autoPlayClear=F.proxy(I.autoPlayClear,I),I.autoPlayIterator=F.proxy(I.autoPlayIterator,I),I.changeSlide=F.proxy(I.changeSlide,I),I.clickHandler=F.proxy(I.clickHandler,I),I.selectHandler=F.proxy(I.selectHandler,I),I.setPosition=F.proxy(I.setPosition,I),I.swipeHandler=F.proxy(I.swipeHandler,I),I.dragHandler=F.proxy(I.dragHandler,I),I.keyHandler=F.proxy(I.keyHandler,I),I.instanceUid=v++,I.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,I.registerBreakpoints(),I.init(!0)}).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},b.prototype.addSlide=b.prototype.slickAdd=function(v,A,l){var P=this;if("boolean"==typeof A)l=A,A=null;else if(A<0||A>=P.slideCount)return!1;P.unload(),"number"==typeof A?0===A&&0===P.$slides.length?F(v).appendTo(P.$slideTrack):l?F(v).insertBefore(P.$slides.eq(A)):F(v).insertAfter(P.$slides.eq(A)):!0===l?F(v).prependTo(P.$slideTrack):F(v).appendTo(P.$slideTrack),P.$slides=P.$slideTrack.children(this.options.slide),P.$slideTrack.children(this.options.slide).detach(),P.$slideTrack.append(P.$slides),P.$slides.each(function(I,N){F(N).attr("data-slick-index",I)}),P.$slidesCache=P.$slides,P.reinit()},b.prototype.animateHeight=function(){var v=this;if(1===v.options.slidesToShow&&!0===v.options.adaptiveHeight&&!1===v.options.vertical){var A=v.$slides.eq(v.currentSlide).outerHeight(!0);v.$list.animate({height:A},v.options.speed)}},b.prototype.animateSlide=function(v,A){var l={},P=this;P.animateHeight(),!0===P.options.rtl&&!1===P.options.vertical&&(v=-v),!1===P.transformsEnabled?P.$slideTrack.animate(!1===P.options.vertical?{left:v}:{top:v},P.options.speed,P.options.easing,A):!1===P.cssTransitions?(!0===P.options.rtl&&(P.currentLeft=-P.currentLeft),F({animStart:P.currentLeft}).animate({animStart:v},{duration:P.options.speed,easing:P.options.easing,step:function(I){I=Math.ceil(I),!1===P.options.vertical?(l[P.animType]="translate("+I+"px, 0px)",P.$slideTrack.css(l)):(l[P.animType]="translate(0px,"+I+"px)",P.$slideTrack.css(l))},complete:function(){A&&A.call()}})):(P.applyTransition(),v=Math.ceil(v),l[P.animType]=!1===P.options.vertical?"translate3d("+v+"px, 0px, 0px)":"translate3d(0px,"+v+"px, 0px)",P.$slideTrack.css(l),A&&setTimeout(function(){P.disableTransition(),A.call()},P.options.speed))},b.prototype.getNavTarget=function(){var A=this.options.asNavFor;return A&&null!==A&&(A=F(A).not(this.$slider)),A},b.prototype.asNavFor=function(v){var A=this.getNavTarget();null!==A&&"object"==typeof A&&A.each(function(){var l=F(this).slick("getSlick");l.unslicked||l.slideHandler(v,!0)})},b.prototype.applyTransition=function(v){var A=this,l={};l[A.transitionType]=!1===A.options.fade?A.transformType+" "+A.options.speed+"ms "+A.options.cssEase:"opacity "+A.options.speed+"ms "+A.options.cssEase,!1===A.options.fade?A.$slideTrack.css(l):A.$slides.eq(v).css(l)},b.prototype.autoPlay=function(){var v=this;v.autoPlayClear(),v.slideCount>v.options.slidesToShow&&(v.autoPlayTimer=setInterval(v.autoPlayIterator,v.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var v=this,A=v.currentSlide+v.options.slidesToScroll;v.paused||v.interrupted||v.focussed||(!1===v.options.infinite&&(1===v.direction&&v.currentSlide+1===v.slideCount-1?v.direction=0:0===v.direction&&(A=v.currentSlide-v.options.slidesToScroll,v.currentSlide-1==0&&(v.direction=1))),v.slideHandler(A))},b.prototype.buildArrows=function(){var v=this;!0===v.options.arrows&&(v.$prevArrow=F(v.options.prevArrow).addClass("slick-arrow"),v.$nextArrow=F(v.options.nextArrow).addClass("slick-arrow"),v.slideCount>v.options.slidesToShow?(v.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),v.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),v.htmlExpr.test(v.options.prevArrow)&&v.$prevArrow.prependTo(v.options.appendArrows),v.htmlExpr.test(v.options.nextArrow)&&v.$nextArrow.appendTo(v.options.appendArrows),!0!==v.options.infinite&&v.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):v.$prevArrow.add(v.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},b.prototype.buildDots=function(){var v,A,l=this;if(!0===l.options.dots){for(l.$slider.addClass("slick-dotted"),A=F("<ul />").addClass(l.options.dotsClass),v=0;v<=l.getDotCount();v+=1)A.append(F("<li />").append(l.options.customPaging.call(this,l,v)));l.$dots=A.appendTo(l.options.appendDots),l.$dots.find("li").first().addClass("slick-active")}},b.prototype.buildOut=function(){var v=this;v.$slides=v.$slider.children(v.options.slide+":not(.slick-cloned)").addClass("slick-slide"),v.slideCount=v.$slides.length,v.$slides.each(function(A,l){F(l).attr("data-slick-index",A).data("originalStyling",F(l).attr("style")||"")}),v.$slider.addClass("slick-slider"),v.$slideTrack=0===v.slideCount?F('<div class="slick-track"/>').appendTo(v.$slider):v.$slides.wrapAll('<div class="slick-track"/>').parent(),v.$list=v.$slideTrack.wrap('<div class="slick-list"/>').parent(),v.$slideTrack.css("opacity",0),!0!==v.options.centerMode&&!0!==v.options.swipeToSlide||(v.options.slidesToScroll=1),F("img[data-lazy]",v.$slider).not("[src]").addClass("slick-loading"),v.setupInfinite(),v.buildArrows(),v.buildDots(),v.updateDots(),v.setSlideClasses("number"==typeof v.currentSlide?v.currentSlide:0),!0===v.options.draggable&&v.$list.addClass("draggable")},b.prototype.buildRows=function(){var v,A,l,P,I,N,et,Lt=this;if(P=document.createDocumentFragment(),N=Lt.$slider.children(),Lt.options.rows>1){for(et=Lt.options.slidesPerRow*Lt.options.rows,I=Math.ceil(N.length/et),v=0;v<I;v++){var Zt=document.createElement("div");for(A=0;A<Lt.options.rows;A++){var Mt=document.createElement("div");for(l=0;l<Lt.options.slidesPerRow;l++){var Yt=v*et+(A*Lt.options.slidesPerRow+l);N.get(Yt)&&Mt.appendChild(N.get(Yt))}Zt.appendChild(Mt)}P.appendChild(Zt)}Lt.$slider.empty().append(P),Lt.$slider.children().children().children().css({width:100/Lt.options.slidesPerRow+"%",display:"inline-block"})}},b.prototype.checkResponsive=function(v,A){var l,P,I,N=this,et=!1,Lt=N.$slider.width(),Zt=window.innerWidth||F(window).width();if("window"===N.respondTo?I=Zt:"slider"===N.respondTo?I=Lt:"min"===N.respondTo&&(I=Math.min(Zt,Lt)),N.options.responsive&&N.options.responsive.length&&null!==N.options.responsive){for(l in P=null,N.breakpoints)N.breakpoints.hasOwnProperty(l)&&(!1===N.originalSettings.mobileFirst?I<N.breakpoints[l]&&(P=N.breakpoints[l]):I>N.breakpoints[l]&&(P=N.breakpoints[l]));null!==P?null!==N.activeBreakpoint?(P!==N.activeBreakpoint||A)&&(N.activeBreakpoint=P,"unslick"===N.breakpointSettings[P]?N.unslick(P):(N.options=F.extend({},N.originalSettings,N.breakpointSettings[P]),!0===v&&(N.currentSlide=N.options.initialSlide),N.refresh(v)),et=P):(N.activeBreakpoint=P,"unslick"===N.breakpointSettings[P]?N.unslick(P):(N.options=F.extend({},N.originalSettings,N.breakpointSettings[P]),!0===v&&(N.currentSlide=N.options.initialSlide),N.refresh(v)),et=P):null!==N.activeBreakpoint&&(N.activeBreakpoint=null,N.options=N.originalSettings,!0===v&&(N.currentSlide=N.options.initialSlide),N.refresh(v),et=P),v||!1===et||N.$slider.trigger("breakpoint",[N,et])}},b.prototype.changeSlide=function(v,A){var l,P,N=this,et=F(v.currentTarget);switch(et.is("a")&&v.preventDefault(),et.is("li")||(et=et.closest("li")),l=N.slideCount%N.options.slidesToScroll!=0?0:(N.slideCount-N.currentSlide)%N.options.slidesToScroll,v.data.message){case"previous":P=0===l?N.options.slidesToScroll:N.options.slidesToShow-l,N.slideCount>N.options.slidesToShow&&N.slideHandler(N.currentSlide-P,!1,A);break;case"next":P=0===l?N.options.slidesToScroll:l,N.slideCount>N.options.slidesToShow&&N.slideHandler(N.currentSlide+P,!1,A);break;case"index":var Lt=0===v.data.index?0:v.data.index||et.index()*N.options.slidesToScroll;N.slideHandler(N.checkNavigable(Lt),!1,A),et.children().trigger("focus");break;default:return}},b.prototype.checkNavigable=function(v){var A,l;if(l=0,v>(A=this.getNavigableIndexes())[A.length-1])v=A[A.length-1];else for(var P in A){if(v<A[P]){v=l;break}l=A[P]}return v},b.prototype.cleanUpEvents=function(){var v=this;v.options.dots&&null!==v.$dots&&(F("li",v.$dots).off("click.slick",v.changeSlide).off("mouseenter.slick",F.proxy(v.interrupt,v,!0)).off("mouseleave.slick",F.proxy(v.interrupt,v,!1)),!0===v.options.accessibility&&v.$dots.off("keydown.slick",v.keyHandler)),v.$slider.off("focus.slick blur.slick"),!0===v.options.arrows&&v.slideCount>v.options.slidesToShow&&(v.$prevArrow&&v.$prevArrow.off("click.slick",v.changeSlide),v.$nextArrow&&v.$nextArrow.off("click.slick",v.changeSlide),!0===v.options.accessibility&&(v.$prevArrow&&v.$prevArrow.off("keydown.slick",v.keyHandler),v.$nextArrow&&v.$nextArrow.off("keydown.slick",v.keyHandler))),v.$list.off("touchstart.slick mousedown.slick",v.swipeHandler),v.$list.off("touchmove.slick mousemove.slick",v.swipeHandler),v.$list.off("touchend.slick mouseup.slick",v.swipeHandler),v.$list.off("touchcancel.slick mouseleave.slick",v.swipeHandler),v.$list.off("click.slick",v.clickHandler),F(document).off(v.visibilityChange,v.visibility),v.cleanUpSlideEvents(),!0===v.options.accessibility&&v.$list.off("keydown.slick",v.keyHandler),!0===v.options.focusOnSelect&&F(v.$slideTrack).children().off("click.slick",v.selectHandler),F(window).off("orientationchange.slick.slick-"+v.instanceUid,v.orientationChange),F(window).off("resize.slick.slick-"+v.instanceUid,v.resize),F("[draggable!=true]",v.$slideTrack).off("dragstart",v.preventDefault),F(window).off("load.slick.slick-"+v.instanceUid,v.setPosition)},b.prototype.cleanUpSlideEvents=function(){var v=this;v.$list.off("mouseenter.slick",F.proxy(v.interrupt,v,!0)),v.$list.off("mouseleave.slick",F.proxy(v.interrupt,v,!1))},b.prototype.cleanUpRows=function(){var v,A=this;A.options.rows>1&&((v=A.$slides.children().children()).removeAttr("style"),A.$slider.empty().append(v))},b.prototype.clickHandler=function(v){!1===this.shouldClick&&(v.stopImmediatePropagation(),v.stopPropagation(),v.preventDefault())},b.prototype.destroy=function(v){var A=this;A.autoPlayClear(),A.touchObject={},A.cleanUpEvents(),F(".slick-cloned",A.$slider).detach(),A.$dots&&A.$dots.remove(),A.$prevArrow&&A.$prevArrow.length&&(A.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),A.htmlExpr.test(A.options.prevArrow)&&A.$prevArrow.remove()),A.$nextArrow&&A.$nextArrow.length&&(A.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),A.htmlExpr.test(A.options.nextArrow)&&A.$nextArrow.remove()),A.$slides&&(A.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){F(this).attr("style",F(this).data("originalStyling"))}),A.$slideTrack.children(this.options.slide).detach(),A.$slideTrack.detach(),A.$list.detach(),A.$slider.append(A.$slides)),A.cleanUpRows(),A.$slider.removeClass("slick-slider"),A.$slider.removeClass("slick-initialized"),A.$slider.removeClass("slick-dotted"),A.unslicked=!0,v||A.$slider.trigger("destroy",[A])},b.prototype.disableTransition=function(v){var A=this,l={};l[A.transitionType]="",!1===A.options.fade?A.$slideTrack.css(l):A.$slides.eq(v).css(l)},b.prototype.fadeSlide=function(v,A){var l=this;!1===l.cssTransitions?(l.$slides.eq(v).css({zIndex:l.options.zIndex}),l.$slides.eq(v).animate({opacity:1},l.options.speed,l.options.easing,A)):(l.applyTransition(v),l.$slides.eq(v).css({opacity:1,zIndex:l.options.zIndex}),A&&setTimeout(function(){l.disableTransition(v),A.call()},l.options.speed))},b.prototype.fadeSlideOut=function(v){var A=this;!1===A.cssTransitions?A.$slides.eq(v).animate({opacity:0,zIndex:A.options.zIndex-2},A.options.speed,A.options.easing):(A.applyTransition(v),A.$slides.eq(v).css({opacity:0,zIndex:A.options.zIndex-2}))},b.prototype.filterSlides=b.prototype.slickFilter=function(v){var A=this;null!==v&&(A.$slidesCache=A.$slides,A.unload(),A.$slideTrack.children(this.options.slide).detach(),A.$slidesCache.filter(v).appendTo(A.$slideTrack),A.reinit())},b.prototype.focusHandler=function(){var v=this;v.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(A){A.stopImmediatePropagation();var l=F(this);setTimeout(function(){v.options.pauseOnFocus&&(v.focussed=l.is(":focus"),v.autoPlay())},0)})},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){return this.currentSlide},b.prototype.getDotCount=function(){var v=this,A=0,l=0,P=0;if(!0===v.options.infinite)if(v.slideCount<=v.options.slidesToShow)++P;else for(;A<v.slideCount;)++P,A=l+v.options.slidesToScroll,l+=v.options.slidesToScroll<=v.options.slidesToShow?v.options.slidesToScroll:v.options.slidesToShow;else if(!0===v.options.centerMode)P=v.slideCount;else if(v.options.asNavFor)for(;A<v.slideCount;)++P,A=l+v.options.slidesToScroll,l+=v.options.slidesToScroll<=v.options.slidesToShow?v.options.slidesToScroll:v.options.slidesToShow;else P=1+Math.ceil((v.slideCount-v.options.slidesToShow)/v.options.slidesToScroll);return P-1},b.prototype.getLeft=function(v){var A,l,P,I,N=this,et=0;return N.slideOffset=0,l=N.$slides.first().outerHeight(!0),!0===N.options.infinite?(N.slideCount>N.options.slidesToShow&&(N.slideOffset=N.slideWidth*N.options.slidesToShow*-1,I=-1,!0===N.options.vertical&&!0===N.options.centerMode&&(2===N.options.slidesToShow?I=-1.5:1===N.options.slidesToShow&&(I=-2)),et=l*N.options.slidesToShow*I),N.slideCount%N.options.slidesToScroll!=0&&v+N.options.slidesToScroll>N.slideCount&&N.slideCount>N.options.slidesToShow&&(v>N.slideCount?(N.slideOffset=(N.options.slidesToShow-(v-N.slideCount))*N.slideWidth*-1,et=(N.options.slidesToShow-(v-N.slideCount))*l*-1):(N.slideOffset=N.slideCount%N.options.slidesToScroll*N.slideWidth*-1,et=N.slideCount%N.options.slidesToScroll*l*-1))):v+N.options.slidesToShow>N.slideCount&&(N.slideOffset=(v+N.options.slidesToShow-N.slideCount)*N.slideWidth,et=(v+N.options.slidesToShow-N.slideCount)*l),N.slideCount<=N.options.slidesToShow&&(N.slideOffset=0,et=0),!0===N.options.centerMode&&N.slideCount<=N.options.slidesToShow?N.slideOffset=N.slideWidth*Math.floor(N.options.slidesToShow)/2-N.slideWidth*N.slideCount/2:!0===N.options.centerMode&&!0===N.options.infinite?N.slideOffset+=N.slideWidth*Math.floor(N.options.slidesToShow/2)-N.slideWidth:!0===N.options.centerMode&&(N.slideOffset=0,N.slideOffset+=N.slideWidth*Math.floor(N.options.slidesToShow/2)),A=!1===N.options.vertical?v*N.slideWidth*-1+N.slideOffset:v*l*-1+et,!0===N.options.variableWidth&&(P=N.slideCount<=N.options.slidesToShow||!1===N.options.infinite?N.$slideTrack.children(".slick-slide").eq(v):N.$slideTrack.children(".slick-slide").eq(v+N.options.slidesToShow),A=!0===N.options.rtl?P[0]?-1*(N.$slideTrack.width()-P[0].offsetLeft-P.width()):0:P[0]?-1*P[0].offsetLeft:0,!0===N.options.centerMode&&(P=N.slideCount<=N.options.slidesToShow||!1===N.options.infinite?N.$slideTrack.children(".slick-slide").eq(v):N.$slideTrack.children(".slick-slide").eq(v+N.options.slidesToShow+1),A=!0===N.options.rtl?P[0]?-1*(N.$slideTrack.width()-P[0].offsetLeft-P.width()):0:P[0]?-1*P[0].offsetLeft:0,A+=(N.$list.width()-P.outerWidth())/2)),A},b.prototype.getOption=b.prototype.slickGetOption=function(v){return this.options[v]},b.prototype.getNavigableIndexes=function(){var v,A=this,l=0,P=0,I=[];for(!1===A.options.infinite?v=A.slideCount:(l=-1*A.options.slidesToScroll,P=-1*A.options.slidesToScroll,v=2*A.slideCount);l<v;)I.push(l),l=P+A.options.slidesToScroll,P+=A.options.slidesToScroll<=A.options.slidesToShow?A.options.slidesToScroll:A.options.slidesToShow;return I},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var v,A,l=this;return A=!0===l.options.centerMode?l.slideWidth*Math.floor(l.options.slidesToShow/2):0,!0===l.options.swipeToSlide?(l.$slideTrack.find(".slick-slide").each(function(P,I){if(I.offsetLeft-A+F(I).outerWidth()/2>-1*l.swipeLeft)return v=I,!1}),Math.abs(F(v).attr("data-slick-index")-l.currentSlide)||1):l.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(v,A){this.changeSlide({data:{message:"index",index:parseInt(v)}},A)},b.prototype.init=function(v){var A=this;F(A.$slider).hasClass("slick-initialized")||(F(A.$slider).addClass("slick-initialized"),A.buildRows(),A.buildOut(),A.setProps(),A.startLoad(),A.loadSlider(),A.initializeEvents(),A.updateArrows(),A.updateDots(),A.checkResponsive(!0),A.focusHandler()),v&&A.$slider.trigger("init",[A]),!0===A.options.accessibility&&A.initADA(),A.options.autoplay&&(A.paused=!1,A.autoPlay())},b.prototype.initADA=function(){var v=this,A=Math.ceil(v.slideCount/v.options.slidesToShow),l=v.getNavigableIndexes().filter(function(N){return N>=0&&N<v.slideCount});v.$slides.add(v.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==v.$dots&&(v.$slides.not(v.$slideTrack.find(".slick-cloned")).each(function(N){var et=l.indexOf(N);F(this).attr({role:"tabpanel",id:"slick-slide"+v.instanceUid+N,tabindex:-1}),-1!==et&&F(this).attr({"aria-describedby":"slick-slide-control"+v.instanceUid+et})}),v.$dots.attr("role","tablist").find("li").each(function(N){var et=l[N];F(this).attr({role:"presentation"}),F(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+v.instanceUid+N,"aria-controls":"slick-slide"+v.instanceUid+et,"aria-label":N+1+" of "+A,"aria-selected":null,tabindex:"-1"})}).eq(v.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var P=v.currentSlide,I=P+v.options.slidesToShow;P<I;P++)v.$slides.eq(P).attr("tabindex",0);v.activateADA()},b.prototype.initArrowEvents=function(){var v=this;!0===v.options.arrows&&v.slideCount>v.options.slidesToShow&&(v.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},v.changeSlide),v.$nextArrow.off("click.slick").on("click.slick",{message:"next"},v.changeSlide),!0===v.options.accessibility&&(v.$prevArrow.on("keydown.slick",v.keyHandler),v.$nextArrow.on("keydown.slick",v.keyHandler)))},b.prototype.initDotEvents=function(){var v=this;!0===v.options.dots&&(F("li",v.$dots).on("click.slick",{message:"index"},v.changeSlide),!0===v.options.accessibility&&v.$dots.on("keydown.slick",v.keyHandler)),!0===v.options.dots&&!0===v.options.pauseOnDotsHover&&F("li",v.$dots).on("mouseenter.slick",F.proxy(v.interrupt,v,!0)).on("mouseleave.slick",F.proxy(v.interrupt,v,!1))},b.prototype.initSlideEvents=function(){var v=this;v.options.pauseOnHover&&(v.$list.on("mouseenter.slick",F.proxy(v.interrupt,v,!0)),v.$list.on("mouseleave.slick",F.proxy(v.interrupt,v,!1)))},b.prototype.initializeEvents=function(){var v=this;v.initArrowEvents(),v.initDotEvents(),v.initSlideEvents(),v.$list.on("touchstart.slick mousedown.slick",{action:"start"},v.swipeHandler),v.$list.on("touchmove.slick mousemove.slick",{action:"move"},v.swipeHandler),v.$list.on("touchend.slick mouseup.slick",{action:"end"},v.swipeHandler),v.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},v.swipeHandler),v.$list.on("click.slick",v.clickHandler),F(document).on(v.visibilityChange,F.proxy(v.visibility,v)),!0===v.options.accessibility&&v.$list.on("keydown.slick",v.keyHandler),!0===v.options.focusOnSelect&&F(v.$slideTrack).children().on("click.slick",v.selectHandler),F(window).on("orientationchange.slick.slick-"+v.instanceUid,F.proxy(v.orientationChange,v)),F(window).on("resize.slick.slick-"+v.instanceUid,F.proxy(v.resize,v)),F("[draggable!=true]",v.$slideTrack).on("dragstart",v.preventDefault),F(window).on("load.slick.slick-"+v.instanceUid,v.setPosition),F(v.setPosition)},b.prototype.initUI=function(){var v=this;!0===v.options.arrows&&v.slideCount>v.options.slidesToShow&&(v.$prevArrow.show(),v.$nextArrow.show()),!0===v.options.dots&&v.slideCount>v.options.slidesToShow&&v.$dots.show()},b.prototype.keyHandler=function(v){var A=this;v.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===v.keyCode&&!0===A.options.accessibility?A.changeSlide({data:{message:!0===A.options.rtl?"next":"previous"}}):39===v.keyCode&&!0===A.options.accessibility&&A.changeSlide({data:{message:!0===A.options.rtl?"previous":"next"}}))},b.prototype.lazyLoad=function(){function v(Mt){F("img[data-lazy]",Mt).each(function(){var Yt=F(this),$t=F(this).attr("data-lazy"),vt=F(this).attr("data-srcset"),lt=F(this).attr("data-sizes")||I.$slider.attr("data-sizes"),Vt=document.createElement("img");Vt.onload=function(){Yt.animate({opacity:0},100,function(){vt&&(Yt.attr("srcset",vt),lt&&Yt.attr("sizes",lt)),Yt.attr("src",$t).animate({opacity:1},200,function(){Yt.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),I.$slider.trigger("lazyLoaded",[I,Yt,$t])})},Vt.onerror=function(){Yt.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),I.$slider.trigger("lazyLoadError",[I,Yt,$t])},Vt.src=$t})}var A,l,P,I=this;if(!0===I.options.centerMode?!0===I.options.infinite?P=(l=I.currentSlide+(I.options.slidesToShow/2+1))+I.options.slidesToShow+2:(l=Math.max(0,I.currentSlide-(I.options.slidesToShow/2+1)),P=I.options.slidesToShow/2+1+2+I.currentSlide):(l=I.options.infinite?I.options.slidesToShow+I.currentSlide:I.currentSlide,P=Math.ceil(l+I.options.slidesToShow),!0===I.options.fade&&(l>0&&l--,P<=I.slideCount&&P++)),A=I.$slider.find(".slick-slide").slice(l,P),"anticipated"===I.options.lazyLoad)for(var N=l-1,et=P,Lt=I.$slider.find(".slick-slide"),Zt=0;Zt<I.options.slidesToScroll;Zt++)N<0&&(N=I.slideCount-1),A=(A=A.add(Lt.eq(N))).add(Lt.eq(et)),N--,et++;v(A),I.slideCount<=I.options.slidesToShow?v(I.$slider.find(".slick-slide")):I.currentSlide>=I.slideCount-I.options.slidesToShow?v(I.$slider.find(".slick-cloned").slice(0,I.options.slidesToShow)):0===I.currentSlide&&v(I.$slider.find(".slick-cloned").slice(-1*I.options.slidesToShow))},b.prototype.loadSlider=function(){var v=this;v.setPosition(),v.$slideTrack.css({opacity:1}),v.$slider.removeClass("slick-loading"),v.initUI(),"progressive"===v.options.lazyLoad&&v.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},b.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},b.prototype.pause=b.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var v=this;v.autoPlay(),v.options.autoplay=!0,v.paused=!1,v.focussed=!1,v.interrupted=!1},b.prototype.postSlide=function(v){var A=this;A.unslicked||(A.$slider.trigger("afterChange",[A,v]),A.animating=!1,A.slideCount>A.options.slidesToShow&&A.setPosition(),A.swipeLeft=null,A.options.autoplay&&A.autoPlay(),!0===A.options.accessibility&&(A.initADA(),A.options.focusOnChange&&F(A.$slides.get(A.currentSlide)).attr("tabindex",0).focus()))},b.prototype.prev=b.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},b.prototype.preventDefault=function(v){v.preventDefault()},b.prototype.progressiveLazyLoad=function(v){v=v||1;var A,l,P,I,N,et=this,Lt=F("img[data-lazy]",et.$slider);Lt.length?(A=Lt.first(),l=A.attr("data-lazy"),P=A.attr("data-srcset"),I=A.attr("data-sizes")||et.$slider.attr("data-sizes"),(N=document.createElement("img")).onload=function(){P&&(A.attr("srcset",P),I&&A.attr("sizes",I)),A.attr("src",l).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===et.options.adaptiveHeight&&et.setPosition(),et.$slider.trigger("lazyLoaded",[et,A,l]),et.progressiveLazyLoad()},N.onerror=function(){v<3?setTimeout(function(){et.progressiveLazyLoad(v+1)},500):(A.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),et.$slider.trigger("lazyLoadError",[et,A,l]),et.progressiveLazyLoad())},N.src=l):et.$slider.trigger("allImagesLoaded",[et])},b.prototype.refresh=function(v){var A,l,P=this;l=P.slideCount-P.options.slidesToShow,!P.options.infinite&&P.currentSlide>l&&(P.currentSlide=l),P.slideCount<=P.options.slidesToShow&&(P.currentSlide=0),A=P.currentSlide,P.destroy(!0),F.extend(P,P.initials,{currentSlide:A}),P.init(),v||P.changeSlide({data:{message:"index",index:A}},!1)},b.prototype.registerBreakpoints=function(){var v,A,l,P=this,I=P.options.responsive||null;if("array"===F.type(I)&&I.length){for(v in P.respondTo=P.options.respondTo||"window",I)if(l=P.breakpoints.length-1,I.hasOwnProperty(v)){for(A=I[v].breakpoint;l>=0;)P.breakpoints[l]&&P.breakpoints[l]===A&&P.breakpoints.splice(l,1),l--;P.breakpoints.push(A),P.breakpointSettings[A]=I[v].settings}P.breakpoints.sort(function(N,et){return P.options.mobileFirst?N-et:et-N})}},b.prototype.reinit=function(){var v=this;v.$slides=v.$slideTrack.children(v.options.slide).addClass("slick-slide"),v.slideCount=v.$slides.length,v.currentSlide>=v.slideCount&&0!==v.currentSlide&&(v.currentSlide=v.currentSlide-v.options.slidesToScroll),v.slideCount<=v.options.slidesToShow&&(v.currentSlide=0),v.registerBreakpoints(),v.setProps(),v.setupInfinite(),v.buildArrows(),v.updateArrows(),v.initArrowEvents(),v.buildDots(),v.updateDots(),v.initDotEvents(),v.cleanUpSlideEvents(),v.initSlideEvents(),v.checkResponsive(!1,!0),!0===v.options.focusOnSelect&&F(v.$slideTrack).children().on("click.slick",v.selectHandler),v.setSlideClasses("number"==typeof v.currentSlide?v.currentSlide:0),v.setPosition(),v.focusHandler(),v.paused=!v.options.autoplay,v.autoPlay(),v.$slider.trigger("reInit",[v])},b.prototype.resize=function(){var v=this;F(window).width()!==v.windowWidth&&(clearTimeout(v.windowDelay),v.windowDelay=window.setTimeout(function(){v.windowWidth=F(window).width(),v.checkResponsive(),v.unslicked||v.setPosition()},50))},b.prototype.removeSlide=b.prototype.slickRemove=function(v,A,l){var P=this;if(v="boolean"==typeof v?!0===(A=v)?0:P.slideCount-1:!0===A?--v:v,P.slideCount<1||v<0||v>P.slideCount-1)return!1;P.unload(),!0===l?P.$slideTrack.children().remove():P.$slideTrack.children(this.options.slide).eq(v).remove(),P.$slides=P.$slideTrack.children(this.options.slide),P.$slideTrack.children(this.options.slide).detach(),P.$slideTrack.append(P.$slides),P.$slidesCache=P.$slides,P.reinit()},b.prototype.setCSS=function(v){var A,l,P=this,I={};!0===P.options.rtl&&(v=-v),A="left"==P.positionProp?Math.ceil(v)+"px":"0px",l="top"==P.positionProp?Math.ceil(v)+"px":"0px",I[P.positionProp]=v,!1===P.transformsEnabled?P.$slideTrack.css(I):(I={},!1===P.cssTransitions?(I[P.animType]="translate("+A+", "+l+")",P.$slideTrack.css(I)):(I[P.animType]="translate3d("+A+", "+l+", 0px)",P.$slideTrack.css(I)))},b.prototype.setDimensions=function(){var v=this;!1===v.options.vertical?!0===v.options.centerMode&&v.$list.css({padding:"0px "+v.options.centerPadding}):(v.$list.height(v.$slides.first().outerHeight(!0)*v.options.slidesToShow),!0===v.options.centerMode&&v.$list.css({padding:v.options.centerPadding+" 0px"})),v.listWidth=v.$list.width(),v.listHeight=v.$list.height(),!1===v.options.vertical&&!1===v.options.variableWidth?(v.slideWidth=Math.ceil(v.listWidth/v.options.slidesToShow),v.$slideTrack.width(Math.ceil(v.slideWidth*v.$slideTrack.children(".slick-slide").length))):!0===v.options.variableWidth?v.$slideTrack.width(5e3*v.slideCount):(v.slideWidth=Math.ceil(v.listWidth),v.$slideTrack.height(Math.ceil(v.$slides.first().outerHeight(!0)*v.$slideTrack.children(".slick-slide").length)));var A=v.$slides.first().outerWidth(!0)-v.$slides.first().width();!1===v.options.variableWidth&&v.$slideTrack.children(".slick-slide").width(v.slideWidth-A)},b.prototype.setFade=function(){var v,A=this;A.$slides.each(function(l,P){v=A.slideWidth*l*-1,!0===A.options.rtl?F(P).css({position:"relative",right:v,top:0,zIndex:A.options.zIndex-2,opacity:0}):F(P).css({position:"relative",left:v,top:0,zIndex:A.options.zIndex-2,opacity:0})}),A.$slides.eq(A.currentSlide).css({zIndex:A.options.zIndex-1,opacity:1})},b.prototype.setHeight=function(){var v=this;if(1===v.options.slidesToShow&&!0===v.options.adaptiveHeight&&!1===v.options.vertical){var A=v.$slides.eq(v.currentSlide).outerHeight(!0);v.$list.css("height",A)}},b.prototype.setOption=b.prototype.slickSetOption=function(){var v,A,l,P,I,N=this,et=!1;if("object"===F.type(arguments[0])?(l=arguments[0],et=arguments[1],I="multiple"):"string"===F.type(arguments[0])&&(l=arguments[0],P=arguments[1],et=arguments[2],"responsive"===arguments[0]&&"array"===F.type(arguments[1])?I="responsive":void 0!==arguments[1]&&(I="single")),"single"===I)N.options[l]=P;else if("multiple"===I)F.each(l,function(Lt,Zt){N.options[Lt]=Zt});else if("responsive"===I)for(A in P)if("array"!==F.type(N.options.responsive))N.options.responsive=[P[A]];else{for(v=N.options.responsive.length-1;v>=0;)N.options.responsive[v].breakpoint===P[A].breakpoint&&N.options.responsive.splice(v,1),v--;N.options.responsive.push(P[A])}et&&(N.unload(),N.reinit())},b.prototype.setPosition=function(){var v=this;v.setDimensions(),v.setHeight(),!1===v.options.fade?v.setCSS(v.getLeft(v.currentSlide)):v.setFade(),v.$slider.trigger("setPosition",[v])},b.prototype.setProps=function(){var v=this,A=document.body.style;v.positionProp=!0===v.options.vertical?"top":"left","top"===v.positionProp?v.$slider.addClass("slick-vertical"):v.$slider.removeClass("slick-vertical"),void 0===A.WebkitTransition&&void 0===A.MozTransition&&void 0===A.msTransition||!0===v.options.useCSS&&(v.cssTransitions=!0),v.options.fade&&("number"==typeof v.options.zIndex?v.options.zIndex<3&&(v.options.zIndex=3):v.options.zIndex=v.defaults.zIndex),void 0!==A.OTransform&&(v.animType="OTransform",v.transformType="-o-transform",v.transitionType="OTransition",void 0===A.perspectiveProperty&&void 0===A.webkitPerspective&&(v.animType=!1)),void 0!==A.MozTransform&&(v.animType="MozTransform",v.transformType="-moz-transform",v.transitionType="MozTransition",void 0===A.perspectiveProperty&&void 0===A.MozPerspective&&(v.animType=!1)),void 0!==A.webkitTransform&&(v.animType="webkitTransform",v.transformType="-webkit-transform",v.transitionType="webkitTransition",void 0===A.perspectiveProperty&&void 0===A.webkitPerspective&&(v.animType=!1)),void 0!==A.msTransform&&(v.animType="msTransform",v.transformType="-ms-transform",v.transitionType="msTransition",void 0===A.msTransform&&(v.animType=!1)),void 0!==A.transform&&!1!==v.animType&&(v.animType="transform",v.transformType="transform",v.transitionType="transition"),v.transformsEnabled=v.options.useTransform&&null!==v.animType&&!1!==v.animType},b.prototype.setSlideClasses=function(v){var A,l,P,I,N=this;if(l=N.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),N.$slides.eq(v).addClass("slick-current"),!0===N.options.centerMode){var et=N.options.slidesToShow%2==0?1:0;A=Math.floor(N.options.slidesToShow/2),!0===N.options.infinite&&(v>=A&&v<=N.slideCount-1-A?N.$slides.slice(v-A+et,v+A+1).addClass("slick-active").attr("aria-hidden","false"):l.slice((P=N.options.slidesToShow+v)-A+1+et,P+A+2).addClass("slick-active").attr("aria-hidden","false"),0===v?l.eq(l.length-1-N.options.slidesToShow).addClass("slick-center"):v===N.slideCount-1&&l.eq(N.options.slidesToShow).addClass("slick-center")),N.$slides.eq(v).addClass("slick-center")}else v>=0&&v<=N.slideCount-N.options.slidesToShow?N.$slides.slice(v,v+N.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):l.length<=N.options.slidesToShow?l.addClass("slick-active").attr("aria-hidden","false"):(I=N.slideCount%N.options.slidesToShow,P=!0===N.options.infinite?N.options.slidesToShow+v:v,N.options.slidesToShow==N.options.slidesToScroll&&N.slideCount-v<N.options.slidesToShow?l.slice(P-(N.options.slidesToShow-I),P+I).addClass("slick-active").attr("aria-hidden","false"):l.slice(P,P+N.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==N.options.lazyLoad&&"anticipated"!==N.options.lazyLoad||N.lazyLoad()},b.prototype.setupInfinite=function(){var v,A,l,P=this;if(!0===P.options.fade&&(P.options.centerMode=!1),!0===P.options.infinite&&!1===P.options.fade&&(A=null,P.slideCount>P.options.slidesToShow)){for(l=!0===P.options.centerMode?P.options.slidesToShow+1:P.options.slidesToShow,v=P.slideCount;v>P.slideCount-l;v-=1)F(P.$slides[A=v-1]).clone(!0).attr("id","").attr("data-slick-index",A-P.slideCount).prependTo(P.$slideTrack).addClass("slick-cloned");for(v=0;v<l+P.slideCount;v+=1)F(P.$slides[A=v]).clone(!0).attr("id","").attr("data-slick-index",A+P.slideCount).appendTo(P.$slideTrack).addClass("slick-cloned");P.$slideTrack.find(".slick-cloned").find("[id]").each(function(){F(this).attr("id","")})}},b.prototype.interrupt=function(v){v||this.autoPlay(),this.interrupted=v},b.prototype.selectHandler=function(v){var A=this,l=F(v.target).is(".slick-slide")?F(v.target):F(v.target).parents(".slick-slide"),P=parseInt(l.attr("data-slick-index"));P||(P=0),A.slideCount<=A.options.slidesToShow?A.slideHandler(P,!1,!0):A.slideHandler(P)},b.prototype.slideHandler=function(v,A,l){var P,I,N,et,Lt,Zt=null,Mt=this;if(A=A||!1,!(!0===Mt.animating&&!0===Mt.options.waitForAnimate||!0===Mt.options.fade&&Mt.currentSlide===v))if(!1===A&&Mt.asNavFor(v),Zt=Mt.getLeft(P=v),et=Mt.getLeft(Mt.currentSlide),Mt.currentLeft=null===Mt.swipeLeft?et:Mt.swipeLeft,!1===Mt.options.infinite&&!1===Mt.options.centerMode&&(v<0||v>Mt.getDotCount()*Mt.options.slidesToScroll))!1===Mt.options.fade&&(P=Mt.currentSlide,!0!==l?Mt.animateSlide(et,function(){Mt.postSlide(P)}):Mt.postSlide(P));else if(!1===Mt.options.infinite&&!0===Mt.options.centerMode&&(v<0||v>Mt.slideCount-Mt.options.slidesToScroll))!1===Mt.options.fade&&(P=Mt.currentSlide,!0!==l?Mt.animateSlide(et,function(){Mt.postSlide(P)}):Mt.postSlide(P));else{if(Mt.options.autoplay&&clearInterval(Mt.autoPlayTimer),I=P<0?Mt.slideCount%Mt.options.slidesToScroll!=0?Mt.slideCount-Mt.slideCount%Mt.options.slidesToScroll:Mt.slideCount+P:P>=Mt.slideCount?Mt.slideCount%Mt.options.slidesToScroll!=0?0:P-Mt.slideCount:P,Mt.animating=!0,Mt.$slider.trigger("beforeChange",[Mt,Mt.currentSlide,I]),N=Mt.currentSlide,Mt.currentSlide=I,Mt.setSlideClasses(Mt.currentSlide),Mt.options.asNavFor&&(Lt=(Lt=Mt.getNavTarget()).slick("getSlick")).slideCount<=Lt.options.slidesToShow&&Lt.setSlideClasses(Mt.currentSlide),Mt.updateDots(),Mt.updateArrows(),!0===Mt.options.fade)return!0!==l?(Mt.fadeSlideOut(N),Mt.fadeSlide(I,function(){Mt.postSlide(I)})):Mt.postSlide(I),void Mt.animateHeight();!0!==l?Mt.animateSlide(Zt,function(){Mt.postSlide(I)}):Mt.postSlide(I)}},b.prototype.startLoad=function(){var v=this;!0===v.options.arrows&&v.slideCount>v.options.slidesToShow&&(v.$prevArrow.hide(),v.$nextArrow.hide()),!0===v.options.dots&&v.slideCount>v.options.slidesToShow&&v.$dots.hide(),v.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var l,P,I=this;return l=Math.atan2(I.touchObject.startY-I.touchObject.curY,I.touchObject.startX-I.touchObject.curX),(P=Math.round(180*l/Math.PI))<0&&(P=360-Math.abs(P)),P<=45&&P>=0||P<=360&&P>=315?!1===I.options.rtl?"left":"right":P>=135&&P<=225?!1===I.options.rtl?"right":"left":!0===I.options.verticalSwiping?P>=35&&P<=135?"down":"up":"vertical"},b.prototype.swipeEnd=function(v){var A,l,P=this;if(P.dragging=!1,P.swiping=!1,P.scrolling)return P.scrolling=!1,!1;if(P.interrupted=!1,P.shouldClick=!(P.touchObject.swipeLength>10),void 0===P.touchObject.curX)return!1;if(!0===P.touchObject.edgeHit&&P.$slider.trigger("edge",[P,P.swipeDirection()]),P.touchObject.swipeLength>=P.touchObject.minSwipe){switch(l=P.swipeDirection()){case"left":case"down":A=P.options.swipeToSlide?P.checkNavigable(P.currentSlide+P.getSlideCount()):P.currentSlide+P.getSlideCount(),P.currentDirection=0;break;case"right":case"up":A=P.options.swipeToSlide?P.checkNavigable(P.currentSlide-P.getSlideCount()):P.currentSlide-P.getSlideCount(),P.currentDirection=1}"vertical"!=l&&(P.slideHandler(A),P.touchObject={},P.$slider.trigger("swipe",[P,l]))}else P.touchObject.startX!==P.touchObject.curX&&(P.slideHandler(P.currentSlide),P.touchObject={})},b.prototype.swipeHandler=function(v){var A=this;if(!(!1===A.options.swipe||"ontouchend"in document&&!1===A.options.swipe||!1===A.options.draggable&&-1!==v.type.indexOf("mouse")))switch(A.touchObject.fingerCount=v.originalEvent&&void 0!==v.originalEvent.touches?v.originalEvent.touches.length:1,A.touchObject.minSwipe=A.listWidth/A.options.touchThreshold,!0===A.options.verticalSwiping&&(A.touchObject.minSwipe=A.listHeight/A.options.touchThreshold),v.data.action){case"start":A.swipeStart(v);break;case"move":A.swipeMove(v);break;case"end":A.swipeEnd(v)}},b.prototype.swipeMove=function(v){var A,l,P,I,N,et,Lt=this;return N=void 0!==v.originalEvent?v.originalEvent.touches:null,!(!Lt.dragging||Lt.scrolling||N&&1!==N.length)&&(A=Lt.getLeft(Lt.currentSlide),Lt.touchObject.curX=void 0!==N?N[0].pageX:v.clientX,Lt.touchObject.curY=void 0!==N?N[0].pageY:v.clientY,Lt.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(Lt.touchObject.curX-Lt.touchObject.startX,2))),et=Math.round(Math.sqrt(Math.pow(Lt.touchObject.curY-Lt.touchObject.startY,2))),!Lt.options.verticalSwiping&&!Lt.swiping&&et>4?(Lt.scrolling=!0,!1):(!0===Lt.options.verticalSwiping&&(Lt.touchObject.swipeLength=et),l=Lt.swipeDirection(),void 0!==v.originalEvent&&Lt.touchObject.swipeLength>4&&(Lt.swiping=!0,v.preventDefault()),I=(!1===Lt.options.rtl?1:-1)*(Lt.touchObject.curX>Lt.touchObject.startX?1:-1),!0===Lt.options.verticalSwiping&&(I=Lt.touchObject.curY>Lt.touchObject.startY?1:-1),P=Lt.touchObject.swipeLength,Lt.touchObject.edgeHit=!1,!1===Lt.options.infinite&&(0===Lt.currentSlide&&"right"===l||Lt.currentSlide>=Lt.getDotCount()&&"left"===l)&&(P=Lt.touchObject.swipeLength*Lt.options.edgeFriction,Lt.touchObject.edgeHit=!0),Lt.swipeLeft=!1===Lt.options.vertical?A+P*I:A+P*(Lt.$list.height()/Lt.listWidth)*I,!0===Lt.options.verticalSwiping&&(Lt.swipeLeft=A+P*I),!0!==Lt.options.fade&&!1!==Lt.options.touchMove&&(!0===Lt.animating?(Lt.swipeLeft=null,!1):void Lt.setCSS(Lt.swipeLeft))))},b.prototype.swipeStart=function(v){var A,l=this;if(l.interrupted=!0,1!==l.touchObject.fingerCount||l.slideCount<=l.options.slidesToShow)return l.touchObject={},!1;void 0!==v.originalEvent&&void 0!==v.originalEvent.touches&&(A=v.originalEvent.touches[0]),l.touchObject.startX=l.touchObject.curX=void 0!==A?A.pageX:v.clientX,l.touchObject.startY=l.touchObject.curY=void 0!==A?A.pageY:v.clientY,l.dragging=!0},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var v=this;null!==v.$slidesCache&&(v.unload(),v.$slideTrack.children(this.options.slide).detach(),v.$slidesCache.appendTo(v.$slideTrack),v.reinit())},b.prototype.unload=function(){var v=this;F(".slick-cloned",v.$slider).remove(),v.$dots&&v.$dots.remove(),v.$prevArrow&&v.htmlExpr.test(v.options.prevArrow)&&v.$prevArrow.remove(),v.$nextArrow&&v.htmlExpr.test(v.options.nextArrow)&&v.$nextArrow.remove(),v.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},b.prototype.unslick=function(v){var A=this;A.$slider.trigger("unslick",[A,v]),A.destroy()},b.prototype.updateArrows=function(){var v=this;Math.floor(v.options.slidesToShow/2),!0===v.options.arrows&&v.slideCount>v.options.slidesToShow&&!v.options.infinite&&(v.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),v.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===v.currentSlide?(v.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),v.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):(v.currentSlide>=v.slideCount-v.options.slidesToShow&&!1===v.options.centerMode||v.currentSlide>=v.slideCount-1&&!0===v.options.centerMode)&&(v.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),v.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},b.prototype.updateDots=function(){var v=this;null!==v.$dots&&(v.$dots.find("li").removeClass("slick-active").end(),v.$dots.find("li").eq(Math.floor(v.currentSlide/v.options.slidesToScroll)).addClass("slick-active"))},b.prototype.visibility=function(){var v=this;v.options.autoplay&&(v.interrupted=!!document[v.hidden])},F.fn.slick=function(){var v,A,l=this,P=arguments[0],I=Array.prototype.slice.call(arguments,1),N=l.length;for(v=0;v<N;v++)if("object"==typeof P||void 0===P?l[v].slick=new b(l[v],P):A=l[v].slick[P].apply(l[v].slick,I),void 0!==A)return A;return l}}),function(F){"function"==typeof define&&define.amd?define(["jquery"],F):"object"==typeof module&&module.exports?module.exports=function(b,v){return void 0===v&&(v="undefined"!=typeof window?require("jquery"):require("jquery")(b)),F(v),v}:F(jQuery)}(function(F){var b=function(){if(F&&F.fn&&F.fn.select2&&F.fn.select2.amd)var A=F.fn.select2.amd;var l,P,I,N,et,Lt,Zt,Mt,Yt,$t,vt,lt,Vt,xe,Ze;function Ye(zt,Ht){return Vt.call(zt,Ht)}function Ui(zt,Ht){var ht,mt,rt,J,d,Pt,Et,se,Ie,ei,_e,Ri=Ht&&Ht.split("/"),Gi=vt.map,_i=Gi&&Gi["*"]||{};if(zt){for(d=(zt=zt.split("/")).length-1,vt.nodeIdCompat&&Ze.test(zt[d])&&(zt[d]=zt[d].replace(Ze,"")),"."===zt[0].charAt(0)&&Ri&&(zt=Ri.slice(0,Ri.length-1).concat(zt)),Ie=0;Ie<zt.length;Ie++)if("."===(_e=zt[Ie]))zt.splice(Ie,1),Ie-=1;else if(".."===_e){if(0===Ie||1===Ie&&".."===zt[2]||".."===zt[Ie-1])continue;0<Ie&&(zt.splice(Ie-1,2),Ie-=2)}zt=zt.join("/")}if((Ri||_i)&&Gi){for(Ie=(ht=zt.split("/")).length;0<Ie;Ie-=1){if(mt=ht.slice(0,Ie).join("/"),Ri)for(ei=Ri.length;0<ei;ei-=1)if(rt=(rt=Gi[Ri.slice(0,ei).join("/")])&&rt[mt]){J=rt,Pt=Ie;break}if(J)break;!Et&&_i&&_i[mt]&&(Et=_i[mt],se=Ie)}!J&&Et&&(J=Et,Pt=se),J&&(ht.splice(0,Pt,J),zt=ht.join("/"))}return zt}function q(zt,Ht){return function(){var ht=xe.call(arguments,0);return"string"!=typeof ht[0]&&1===ht.length&&ht.push(null),Lt.apply(N,ht.concat([zt,Ht]))}}function Wi(zt){return function(Ht){Yt[zt]=Ht}}function Ti(zt){if(Ye($t,zt)){var Ht=$t[zt];delete $t[zt],lt[zt]=!0,et.apply(N,Ht)}if(!Ye(Yt,zt)&&!Ye(lt,zt))throw new Error("No "+zt);return Yt[zt]}function ti(zt){var Ht,ht=zt?zt.indexOf("!"):-1;return-1<ht&&(Ht=zt.substring(0,ht),zt=zt.substring(ht+1,zt.length)),[Ht,zt]}function ae(zt){return zt?ti(zt):[]}return A&&A.requirejs||(A?P=A:A={},Yt={},$t={},vt={},lt={},Vt=Object.prototype.hasOwnProperty,xe=[].slice,Ze=/\.js$/,Zt=function(zt,Ht){var ht,d,mt=ti(zt),rt=mt[0],J=Ht[1];return zt=mt[1],rt&&(ht=Ti(rt=Ui(rt,J))),rt?zt=ht&&ht.normalize?ht.normalize(zt,(d=J,function(Pt){return Ui(Pt,d)})):Ui(zt,J):(rt=(mt=ti(zt=Ui(zt,J)))[0],zt=mt[1],rt&&(ht=Ti(rt))),{f:rt?rt+"!"+zt:zt,n:zt,pr:rt,p:ht}},Mt={require:function(zt){return q(zt)},exports:function(zt){var Ht=Yt[zt];return void 0!==Ht?Ht:Yt[zt]={}},module:function(zt){return{id:zt,uri:"",exports:Yt[zt],config:(Ht=zt,function(){return vt&&vt.config&&vt.config[Ht]||{}})};var Ht}},et=function(zt,Ht,ht,mt){var rt,J,d,Pt,Et,se,Ie,ei=[],_e=typeof ht;if(se=ae(mt=mt||zt),"undefined"==_e||"function"==_e){for(Ht=!Ht.length&&ht.length?["require","exports","module"]:Ht,Et=0;Et<Ht.length;Et+=1)if("require"===(J=(Pt=Zt(Ht[Et],se)).f))ei[Et]=Mt.require(zt);else if("exports"===J)ei[Et]=Mt.exports(zt),Ie=!0;else if("module"===J)rt=ei[Et]=Mt.module(zt);else if(Ye(Yt,J)||Ye($t,J)||Ye(lt,J))ei[Et]=Ti(J);else{if(!Pt.p)throw new Error(zt+" missing "+J);Pt.p.load(Pt.n,q(mt,!0),Wi(J),{}),ei[Et]=Yt[J]}d=ht?ht.apply(Yt[zt],ei):void 0,zt&&(rt&&rt.exports!==N&&rt.exports!==Yt[zt]?Yt[zt]=rt.exports:d===N&&Ie||(Yt[zt]=d))}else zt&&(Yt[zt]=ht)},l=P=Lt=function(zt,Ht,ht,mt,rt){if("string"==typeof zt)return Mt[zt]?Mt[zt](Ht):Ti(Zt(zt,ae(Ht)).f);if(!zt.splice){if((vt=zt).deps&&Lt(vt.deps,vt.callback),!Ht)return;Ht.splice?(zt=Ht,Ht=ht,ht=null):zt=N}return Ht=Ht||function(){},"function"==typeof ht&&(ht=mt,mt=rt),mt?et(N,zt,Ht,ht):setTimeout(function(){et(N,zt,Ht,ht)},4),Lt},Lt.config=function(zt){return Lt(zt)},l._defined=Yt,(I=function(zt,Ht,ht){if("string"!=typeof zt)throw new Error("See almond README: incorrect module build, no module name");Ht.splice||(ht=Ht,Ht=[]),Ye(Yt,zt)||Ye($t,zt)||($t[zt]=[zt,Ht,ht])}).amd={jQuery:!0},A.requirejs=l,A.require=P,A.define=I),A.define("almond",function(){}),A.define("jquery",[],function(){var zt=F||$;return null==zt&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),zt}),A.define("select2/utils",["jquery"],function(zt){var Ht={};function ht(J){var d=J.prototype,Pt=[];for(var Et in d)"function"==typeof d[Et]&&"constructor"!==Et&&Pt.push(Et);return Pt}function mt(){this.listeners={}}Ht.Extend=function(J,d){var Pt={}.hasOwnProperty;function Et(){this.constructor=J}for(var se in d)Pt.call(d,se)&&(J[se]=d[se]);return Et.prototype=d.prototype,J.prototype=new Et,J.__super__=d.prototype,J},Ht.Decorate=function(J,d){var Pt=ht(d),Et=ht(J);function se(){var _i=Array.prototype.unshift,Hr=d.prototype.constructor.length,Tr=J.prototype.constructor;0<Hr&&(_i.call(arguments,J.prototype.constructor),Tr=d.prototype.constructor),Tr.apply(this,arguments)}d.displayName=J.displayName,se.prototype=new function(){this.constructor=se};for(var Ie=0;Ie<Et.length;Ie++){var ei=Et[Ie];se.prototype[ei]=J.prototype[ei]}function _e(_i){var Hr=function(){};_i in se.prototype&&(Hr=se.prototype[_i]);var Tr=d.prototype[_i];return function(){return Array.prototype.unshift.call(arguments,Hr),Tr.apply(this,arguments)}}for(var Ri=0;Ri<Pt.length;Ri++){var Gi=Pt[Ri];se.prototype[Gi]=_e(Gi)}return se},mt.prototype.on=function(J,d){this.listeners=this.listeners||{},J in this.listeners?this.listeners[J].push(d):this.listeners[J]=[d]},mt.prototype.trigger=function(J){var d=Array.prototype.slice,Pt=d.call(arguments,1);this.listeners=this.listeners||{},null==Pt&&(Pt=[]),0===Pt.length&&Pt.push({}),(Pt[0]._type=J)in this.listeners&&this.invoke(this.listeners[J],d.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},mt.prototype.invoke=function(J,d){for(var Pt=0,Et=J.length;Pt<Et;Pt++)J[Pt].apply(this,d)},Ht.Observable=mt,Ht.generateChars=function(J){for(var d="",Pt=0;Pt<J;Pt++)d+=Math.floor(36*Math.random()).toString(36);return d},Ht.bind=function(J,d){return function(){J.apply(d,arguments)}},Ht._convertData=function(J){for(var d in J){var Pt=d.split("-"),Et=J;if(1!==Pt.length){for(var se=0;se<Pt.length;se++){var Ie=Pt[se];(Ie=Ie.substring(0,1).toLowerCase()+Ie.substring(1))in Et||(Et[Ie]={}),se==Pt.length-1&&(Et[Ie]=J[d]),Et=Et[Ie]}delete J[d]}}return J},Ht.hasScroll=function(J,d){var Pt=zt(d),Et=d.style.overflowX,se=d.style.overflowY;return(Et!==se||"hidden"!==se&&"visible"!==se)&&("scroll"===Et||"scroll"===se||Pt.innerHeight()<d.scrollHeight||Pt.innerWidth()<d.scrollWidth)},Ht.escapeMarkup=function(J){var d={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof J?J:String(J).replace(/[&<>"'\/\\]/g,function(Pt){return d[Pt]})},Ht.appendMany=function(J,d){if("1.7"===zt.fn.jquery.substr(0,3)){var Pt=zt();zt.map(d,function(Et){Pt=Pt.add(Et)}),d=Pt}J.append(d)},Ht.__cache={};var rt=0;return Ht.GetUniqueElementId=function(J){var d=J.getAttribute("data-select2-id");return null==d&&(J.id?J.setAttribute("data-select2-id",d=J.id):(J.setAttribute("data-select2-id",++rt),d=rt.toString())),d},Ht.StoreData=function(J,d,Pt){var Et=Ht.GetUniqueElementId(J);Ht.__cache[Et]||(Ht.__cache[Et]={}),Ht.__cache[Et][d]=Pt},Ht.GetData=function(J,d){var Pt=Ht.GetUniqueElementId(J);return d?Ht.__cache[Pt]&&null!=Ht.__cache[Pt][d]?Ht.__cache[Pt][d]:zt(J).data(d):Ht.__cache[Pt]},Ht.RemoveData=function(J){var d=Ht.GetUniqueElementId(J);null!=Ht.__cache[d]&&delete Ht.__cache[d],J.removeAttribute("data-select2-id")},Ht}),A.define("select2/results",["jquery","./utils"],function(zt,Ht){function ht(mt,rt,J){this.$element=mt,this.data=J,this.options=rt,ht.__super__.constructor.call(this)}return Ht.Extend(ht,Ht.Observable),ht.prototype.render=function(){var mt=zt('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&mt.attr("aria-multiselectable","true"),this.$results=mt},ht.prototype.clear=function(){this.$results.empty()},ht.prototype.displayMessage=function(mt){var rt=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var J=zt('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),d=this.options.get("translations").get(mt.message);J.append(rt(d(mt.args))),J[0].className+=" select2-results__message",this.$results.append(J)},ht.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},ht.prototype.append=function(mt){this.hideLoading();var rt=[];if(null!=mt.results&&0!==mt.results.length){mt.results=this.sort(mt.results);for(var J=0;J<mt.results.length;J++){var Pt=this.option(mt.results[J]);rt.push(Pt)}this.$results.append(rt)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},ht.prototype.position=function(mt,rt){rt.find(".select2-results").append(mt)},ht.prototype.sort=function(mt){return this.options.get("sorter")(mt)},ht.prototype.highlightFirstItem=function(){var mt=this.$results.find(".select2-results__option[aria-selected]"),rt=mt.filter("[aria-selected=true]");0<rt.length?rt.first().trigger("mouseenter"):mt.first().trigger("mouseenter"),this.ensureHighlightVisible()},ht.prototype.setClasses=function(){var mt=this;this.data.current(function(rt){var J=zt.map(rt,function(d){return d.id.toString()});mt.$results.find(".select2-results__option[aria-selected]").each(function(){var d=zt(this),Pt=Ht.GetData(this,"data");null!=Pt.element&&Pt.element.selected||null==Pt.element&&-1<zt.inArray(""+Pt.id,J)?d.attr("aria-selected","true"):d.attr("aria-selected","false")})})},ht.prototype.showLoading=function(mt){this.hideLoading();var rt={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(mt)},J=this.option(rt);J.className+=" loading-results",this.$results.prepend(J)},ht.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},ht.prototype.option=function(mt){var rt=document.createElement("li");rt.className="select2-results__option";var J={role:"option","aria-selected":"false"},d=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var Pt in(null!=mt.element&&d.call(mt.element,":disabled")||null==mt.element&&mt.disabled)&&(delete J["aria-selected"],J["aria-disabled"]="true"),null==mt.id&&delete J["aria-selected"],null!=mt._resultId&&(rt.id=mt._resultId),mt.title&&(rt.title=mt.title),mt.children&&(J.role="group",J["aria-label"]=mt.text,delete J["aria-selected"]),J)rt.setAttribute(Pt,J[Pt]);if(mt.children){var se=zt(rt),Ie=document.createElement("strong");Ie.className="select2-results__group",zt(Ie),this.template(mt,Ie);for(var ei=[],_e=0;_e<mt.children.length;_e++){var Gi=this.option(mt.children[_e]);ei.push(Gi)}var _i=zt("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});_i.append(ei),se.append(Ie),se.append(_i)}else this.template(mt,rt);return Ht.StoreData(rt,"data",mt),rt},ht.prototype.bind=function(mt,rt){var J=this;this.$results.attr("id",mt.id+"-results"),mt.on("results:all",function(Pt){J.clear(),J.append(Pt.data),mt.isOpen()&&(J.setClasses(),J.highlightFirstItem())}),mt.on("results:append",function(Pt){J.append(Pt.data),mt.isOpen()&&J.setClasses()}),mt.on("query",function(Pt){J.hideMessages(),J.showLoading(Pt)}),mt.on("select",function(){mt.isOpen()&&(J.setClasses(),J.options.get("scrollAfterSelect")&&J.highlightFirstItem())}),mt.on("unselect",function(){mt.isOpen()&&(J.setClasses(),J.options.get("scrollAfterSelect")&&J.highlightFirstItem())}),mt.on("open",function(){J.$results.attr("aria-expanded","true"),J.$results.attr("aria-hidden","false"),J.setClasses(),J.ensureHighlightVisible()}),mt.on("close",function(){J.$results.attr("aria-expanded","false"),J.$results.attr("aria-hidden","true"),J.$results.removeAttr("aria-activedescendant")}),mt.on("results:toggle",function(){var Pt=J.getHighlightedResults();0!==Pt.length&&Pt.trigger("mouseup")}),mt.on("results:select",function(){var Pt=J.getHighlightedResults();if(0!==Pt.length){var Et=Ht.GetData(Pt[0],"data");"true"==Pt.attr("aria-selected")?J.trigger("close",{}):J.trigger("select",{data:Et})}}),mt.on("results:previous",function(){var Pt=J.getHighlightedResults(),Et=J.$results.find("[aria-selected]"),se=Et.index(Pt);if(!(se<=0)){var Ie=se-1;0===Pt.length&&(Ie=0);var ei=Et.eq(Ie);ei.trigger("mouseenter");var _e=J.$results.offset().top,Ri=ei.offset().top,Gi=J.$results.scrollTop()+(Ri-_e);0===Ie?J.$results.scrollTop(0):Ri-_e<0&&J.$results.scrollTop(Gi)}}),mt.on("results:next",function(){var Pt=J.getHighlightedResults(),Et=J.$results.find("[aria-selected]"),se=Et.index(Pt)+1;if(!(se>=Et.length)){var Ie=Et.eq(se);Ie.trigger("mouseenter");var ei=J.$results.offset().top+J.$results.outerHeight(!1),_e=Ie.offset().top+Ie.outerHeight(!1),Ri=J.$results.scrollTop()+_e-ei;0===se?J.$results.scrollTop(0):ei<_e&&J.$results.scrollTop(Ri)}}),mt.on("results:focus",function(Pt){Pt.element.addClass("select2-results__option--highlighted")}),mt.on("results:message",function(Pt){J.displayMessage(Pt)}),zt.fn.mousewheel&&this.$results.on("mousewheel",function(Pt){var Et=J.$results.scrollTop(),se=J.$results.get(0).scrollHeight-Et+Pt.deltaY,Ie=0<Pt.deltaY&&Et-Pt.deltaY<=0,ei=Pt.deltaY<0&&se<=J.$results.height();Ie?(J.$results.scrollTop(0),Pt.preventDefault(),Pt.stopPropagation()):ei&&(J.$results.scrollTop(J.$results.get(0).scrollHeight-J.$results.height()),Pt.preventDefault(),Pt.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(Pt){var Et=zt(this),se=Ht.GetData(this,"data");"true"!==Et.attr("aria-selected")?J.trigger("select",{originalEvent:Pt,data:se}):J.options.get("multiple")?J.trigger("unselect",{originalEvent:Pt,data:se}):J.trigger("close",{})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(Pt){var Et=Ht.GetData(this,"data");J.getHighlightedResults().removeClass("select2-results__option--highlighted"),J.trigger("results:focus",{data:Et,element:zt(this)})})},ht.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},ht.prototype.destroy=function(){this.$results.remove()},ht.prototype.ensureHighlightVisible=function(){var mt=this.getHighlightedResults();if(0!==mt.length){var rt=this.$results.find("[aria-selected]").index(mt),J=this.$results.offset().top,d=mt.offset().top,Pt=this.$results.scrollTop()+(d-J),Et=d-J;Pt-=2*mt.outerHeight(!1),rt<=2?this.$results.scrollTop(0):(Et>this.$results.outerHeight()||Et<0)&&this.$results.scrollTop(Pt)}},ht.prototype.template=function(mt,rt){var J=this.options.get("templateResult"),d=this.options.get("escapeMarkup"),Pt=J(mt,rt);null==Pt?rt.style.display="none":"string"==typeof Pt?rt.innerHTML=d(Pt):zt(rt).append(Pt)},ht}),A.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),A.define("select2/selection/base",["jquery","../utils","../keys"],function(zt,Ht,ht){function mt(rt,J){this.$element=rt,this.options=J,mt.__super__.constructor.call(this)}return Ht.Extend(mt,Ht.Observable),mt.prototype.render=function(){var rt=zt('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=Ht.GetData(this.$element[0],"old-tabindex")?this._tabindex=Ht.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),rt.attr("title",this.$element.attr("title")),rt.attr("tabindex",this._tabindex),rt.attr("aria-disabled","false"),this.$selection=rt},mt.prototype.bind=function(rt,J){var d=this,Pt=rt.id+"-results";this.container=rt,this.$selection.on("focus",function(Et){d.trigger("focus",Et)}),this.$selection.on("blur",function(Et){d._handleBlur(Et)}),this.$selection.on("keydown",function(Et){d.trigger("keypress",Et),Et.which===ht.SPACE&&Et.preventDefault()}),rt.on("results:focus",function(Et){d.$selection.attr("aria-activedescendant",Et.data._resultId)}),rt.on("selection:update",function(Et){d.update(Et.data)}),rt.on("open",function(){d.$selection.attr("aria-expanded","true"),d.$selection.attr("aria-owns",Pt),d._attachCloseHandler(rt)}),rt.on("close",function(){d.$selection.attr("aria-expanded","false"),d.$selection.removeAttr("aria-activedescendant"),d.$selection.removeAttr("aria-owns"),d.$selection.trigger("focus"),d._detachCloseHandler(rt)}),rt.on("enable",function(){d.$selection.attr("tabindex",d._tabindex),d.$selection.attr("aria-disabled","false")}),rt.on("disable",function(){d.$selection.attr("tabindex","-1"),d.$selection.attr("aria-disabled","true")})},mt.prototype._handleBlur=function(rt){var J=this;window.setTimeout(function(){document.activeElement==J.$selection[0]||zt.contains(J.$selection[0],document.activeElement)||J.trigger("blur",rt)},1)},mt.prototype._attachCloseHandler=function(rt){zt(document.body).on("mousedown.select2."+rt.id,function(J){var d=zt(J.target).closest(".select2");zt(".select2.select2-container--open").each(function(){this!=d[0]&&Ht.GetData(this,"element").select2("close")})})},mt.prototype._detachCloseHandler=function(rt){zt(document.body).off("mousedown.select2."+rt.id)},mt.prototype.position=function(rt,J){J.find(".selection").append(rt)},mt.prototype.destroy=function(){this._detachCloseHandler(this.container)},mt.prototype.update=function(rt){throw new Error("The `update` method must be defined in child classes.")},mt.prototype.isEnabled=function(){return!this.isDisabled()},mt.prototype.isDisabled=function(){return this.options.get("disabled")},mt}),A.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(zt,Ht,ht,mt){function rt(){rt.__super__.constructor.apply(this,arguments)}return ht.Extend(rt,Ht),rt.prototype.render=function(){var J=rt.__super__.render.call(this);return J.addClass("select2-selection--single"),J.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),J},rt.prototype.bind=function(J,d){var Pt=this;rt.__super__.bind.apply(this,arguments);var Et=J.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",Et).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",Et),this.$selection.on("mousedown",function(se){1===se.which&&Pt.trigger("toggle",{originalEvent:se})}),this.$selection.on("focus",function(se){}),this.$selection.on("blur",function(se){}),J.on("focus",function(se){J.isOpen()||Pt.$selection.trigger("focus")})},rt.prototype.clear=function(){var J=this.$selection.find(".select2-selection__rendered");J.empty(),J.removeAttr("title")},rt.prototype.display=function(J,d){var Pt=this.options.get("templateSelection");return this.options.get("escapeMarkup")(Pt(J,d))},rt.prototype.selectionContainer=function(){return zt("<span></span>")},rt.prototype.update=function(J){if(0!==J.length){var d=J[0],Pt=this.$selection.find(".select2-selection__rendered"),Et=this.display(d,Pt);Pt.empty().append(Et);var se=d.title||d.text;se?Pt.attr("title",se):Pt.removeAttr("title")}else this.clear()},rt}),A.define("select2/selection/multiple",["jquery","./base","../utils"],function(zt,Ht,ht){function mt(rt,J){mt.__super__.constructor.apply(this,arguments)}return ht.Extend(mt,Ht),mt.prototype.render=function(){var rt=mt.__super__.render.call(this);return rt.addClass("select2-selection--multiple"),rt.html('<ul class="select2-selection__rendered"></ul>'),rt},mt.prototype.bind=function(rt,J){var d=this;mt.__super__.bind.apply(this,arguments),this.$selection.on("click",function(Pt){d.trigger("toggle",{originalEvent:Pt})}),this.$selection.on("click",".select2-selection__choice__remove",function(Pt){if(!d.isDisabled()){var Et=zt(this).parent(),se=ht.GetData(Et[0],"data");d.trigger("unselect",{originalEvent:Pt,data:se})}})},mt.prototype.clear=function(){var rt=this.$selection.find(".select2-selection__rendered");rt.empty(),rt.removeAttr("title")},mt.prototype.display=function(rt,J){var d=this.options.get("templateSelection");return this.options.get("escapeMarkup")(d(rt,J))},mt.prototype.selectionContainer=function(){return zt('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},mt.prototype.update=function(rt){if(this.clear(),0!==rt.length){for(var J=[],d=0;d<rt.length;d++){var Pt=rt[d],Et=this.selectionContainer(),se=this.display(Pt,Et);Et.append(se);var Ie=Pt.title||Pt.text;Ie&&Et.attr("title",Ie),ht.StoreData(Et[0],"data",Pt),J.push(Et)}var ei=this.$selection.find(".select2-selection__rendered");ht.appendMany(ei,J)}},mt}),A.define("select2/selection/placeholder",["../utils"],function(zt){function Ht(ht,mt,rt){this.placeholder=this.normalizePlaceholder(rt.get("placeholder")),ht.call(this,mt,rt)}return Ht.prototype.normalizePlaceholder=function(ht,mt){return"string"==typeof mt&&(mt={id:"",text:mt}),mt},Ht.prototype.createPlaceholder=function(ht,mt){var rt=this.selectionContainer();return rt.html(this.display(mt)),rt.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),rt},Ht.prototype.update=function(ht,mt){if(1<mt.length||1==mt.length&&mt[0].id!=this.placeholder.id)return ht.call(this,mt);this.clear();var J=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(J)},Ht}),A.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(zt,Ht,ht){function mt(){}return mt.prototype.bind=function(rt,J,d){var Pt=this;rt.call(this,J,d),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(Et){Pt._handleClear(Et)}),J.on("keypress",function(Et){Pt._handleKeyboardClear(Et,J)})},mt.prototype._handleClear=function(rt,J){if(!this.isDisabled()){var d=this.$selection.find(".select2-selection__clear");if(0!==d.length){J.stopPropagation();var Pt=ht.GetData(d[0],"data"),Et=this.$element.val();this.$element.val(this.placeholder.id);var se={data:Pt};if(this.trigger("clear",se),se.prevented)this.$element.val(Et);else{for(var Ie=0;Ie<Pt.length;Ie++)if(this.trigger("unselect",se={data:Pt[Ie]}),se.prevented)return void this.$element.val(Et);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},mt.prototype._handleKeyboardClear=function(rt,J,d){d.isOpen()||J.which!=Ht.DELETE&&J.which!=Ht.BACKSPACE||this._handleClear(J)},mt.prototype.update=function(rt,J){if(rt.call(this,J),!(0<this.$selection.find(".select2-selection__placeholder").length||0===J.length)){var d=this.options.get("translations").get("removeAllItems"),Pt=zt('<span class="select2-selection__clear" title="'+d()+'">&times;</span>');ht.StoreData(Pt[0],"data",J),this.$selection.find(".select2-selection__rendered").prepend(Pt)}},mt}),A.define("select2/selection/search",["jquery","../utils","../keys"],function(zt,Ht,ht){function mt(rt,J,d){rt.call(this,J,d)}return mt.prototype.render=function(rt){var J=zt('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></li>');this.$searchContainer=J,this.$search=J.find("input");var d=rt.call(this);return this._transferTabIndex(),d},mt.prototype.bind=function(rt,J,d){var Pt=this,Et=J.id+"-results";rt.call(this,J,d),J.on("open",function(){Pt.$search.attr("aria-controls",Et),Pt.$search.trigger("focus")}),J.on("close",function(){Pt.$search.val(""),Pt.$search.removeAttr("aria-controls"),Pt.$search.removeAttr("aria-activedescendant"),Pt.$search.trigger("focus")}),J.on("enable",function(){Pt.$search.prop("disabled",!1),Pt._transferTabIndex()}),J.on("disable",function(){Pt.$search.prop("disabled",!0)}),J.on("focus",function(ei){Pt.$search.trigger("focus")}),J.on("results:focus",function(ei){ei.data._resultId?Pt.$search.attr("aria-activedescendant",ei.data._resultId):Pt.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(ei){Pt.trigger("focus",ei)}),this.$selection.on("focusout",".select2-search--inline",function(ei){Pt._handleBlur(ei)}),this.$selection.on("keydown",".select2-search--inline",function(ei){if(ei.stopPropagation(),Pt.trigger("keypress",ei),Pt._keyUpPrevented=ei.isDefaultPrevented(),ei.which===ht.BACKSPACE&&""===Pt.$search.val()){var _e=Pt.$searchContainer.prev(".select2-selection__choice");if(0<_e.length){var Ri=Ht.GetData(_e[0],"data");Pt.searchRemoveChoice(Ri),ei.preventDefault()}}}),this.$selection.on("click",".select2-search--inline",function(ei){Pt.$search.val()&&ei.stopPropagation()});var se=document.documentMode,Ie=se&&se<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(ei){Pt.$selection.off(Ie?"input.search input.searchcheck":"keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(ei){if(Ie&&"input"===ei.type)Pt.$selection.off("input.search input.searchcheck");else{var _e=ei.which;_e!=ht.SHIFT&&_e!=ht.CTRL&&_e!=ht.ALT&&_e!=ht.TAB&&Pt.handleSearch(ei)}})},mt.prototype._transferTabIndex=function(rt){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},mt.prototype.createPlaceholder=function(rt,J){this.$search.attr("placeholder",J.text)},mt.prototype.update=function(rt,J){var d=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),rt.call(this,J),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),d&&this.$search.trigger("focus")},mt.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var rt=this.$search.val();this.trigger("query",{term:rt})}this._keyUpPrevented=!1},mt.prototype.searchRemoveChoice=function(rt,J){this.trigger("unselect",{data:J}),this.$search.val(J.text),this.handleSearch()},mt.prototype.resizeSearch=function(){this.$search.css("width","25px");var rt;rt=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").width():.75*(this.$search.val().length+1)+"em",this.$search.css("width",rt)},mt}),A.define("select2/selection/eventRelay",["jquery"],function(zt){function Ht(){}return Ht.prototype.bind=function(ht,mt,rt){var J=this,d=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],Pt=["opening","closing","selecting","unselecting","clearing"];ht.call(this,mt,rt),mt.on("*",function(Et,se){if(-1!==zt.inArray(Et,d)){var Ie=zt.Event("select2:"+Et,{params:se=se||{}});J.$element.trigger(Ie),-1!==zt.inArray(Et,Pt)&&(se.prevented=Ie.isDefaultPrevented())}})},Ht}),A.define("select2/translation",["jquery","require"],function(zt,Ht){function ht(mt){this.dict=mt||{}}return ht.prototype.all=function(){return this.dict},ht.prototype.get=function(mt){return this.dict[mt]},ht.prototype.extend=function(mt){this.dict=zt.extend({},mt.all(),this.dict)},ht._cache={},ht.loadPath=function(mt){if(!(mt in ht._cache)){var rt=Ht(mt);ht._cache[mt]=rt}return new ht(ht._cache[mt])},ht}),A.define("select2/diacritics",[],function(){return{"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u0152:"OE",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u0153:"oe",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03ce:"\u03c9",\u03c2:"\u03c3","\u2019":"'"}}),A.define("select2/data/base",["../utils"],function(zt){function Ht(ht,mt){Ht.__super__.constructor.call(this)}return zt.Extend(Ht,zt.Observable),Ht.prototype.current=function(ht){throw new Error("The `current` method must be defined in child classes.")},Ht.prototype.query=function(ht,mt){throw new Error("The `query` method must be defined in child classes.")},Ht.prototype.bind=function(ht,mt){},Ht.prototype.destroy=function(){},Ht.prototype.generateResultId=function(ht,mt){var rt=ht.id+"-result-";return(rt+=zt.generateChars(4))+(null!=mt.id?"-"+mt.id.toString():"-"+zt.generateChars(4))},Ht}),A.define("select2/data/select",["./base","../utils","jquery"],function(zt,Ht,ht){function mt(rt,J){this.$element=rt,this.options=J,mt.__super__.constructor.call(this)}return Ht.Extend(mt,zt),mt.prototype.current=function(rt){var J=[],d=this;this.$element.find(":selected").each(function(){var Pt=ht(this),Et=d.item(Pt);J.push(Et)}),rt(J)},mt.prototype.select=function(rt){var J=this;if(rt.selected=!0,ht(rt.element).is("option"))return rt.element.selected=!0,void this.$element.trigger("input").trigger("change");this.$element.prop("multiple")?this.current(function(Pt){var Et=[];(rt=[rt]).push.apply(rt,Pt);for(var se=0;se<rt.length;se++){var Ie=rt[se].id;-1===ht.inArray(Ie,Et)&&Et.push(Ie)}J.$element.val(Et),J.$element.trigger("input").trigger("change")}):(this.$element.val(rt.id),this.$element.trigger("input").trigger("change"))},mt.prototype.unselect=function(rt){var J=this;if(this.$element.prop("multiple")){if(rt.selected=!1,ht(rt.element).is("option"))return rt.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(d){for(var Pt=[],Et=0;Et<d.length;Et++){var se=d[Et].id;se!==rt.id&&-1===ht.inArray(se,Pt)&&Pt.push(se)}J.$element.val(Pt),J.$element.trigger("input").trigger("change")})}},mt.prototype.bind=function(rt,J){var d=this;(this.container=rt).on("select",function(Pt){d.select(Pt.data)}),rt.on("unselect",function(Pt){d.unselect(Pt.data)})},mt.prototype.destroy=function(){this.$element.find("*").each(function(){Ht.RemoveData(this)})},mt.prototype.query=function(rt,J){var d=[],Pt=this;this.$element.children().each(function(){var Et=ht(this);if(Et.is("option")||Et.is("optgroup")){var se=Pt.item(Et),Ie=Pt.matches(rt,se);null!==Ie&&d.push(Ie)}}),J({results:d})},mt.prototype.addOptions=function(rt){Ht.appendMany(this.$element,rt)},mt.prototype.option=function(rt){var J;rt.children?(J=document.createElement("optgroup")).label=rt.text:void 0!==(J=document.createElement("option")).textContent?J.textContent=rt.text:J.innerText=rt.text,void 0!==rt.id&&(J.value=rt.id),rt.disabled&&(J.disabled=!0),rt.selected&&(J.selected=!0),rt.title&&(J.title=rt.title);var d=ht(J),Pt=this._normalizeItem(rt);return Pt.element=J,Ht.StoreData(J,"data",Pt),d},mt.prototype.item=function(rt){var J={};if(null!=(J=Ht.GetData(rt[0],"data")))return J;if(rt.is("option"))J={id:rt.val(),text:rt.text(),disabled:rt.prop("disabled"),selected:rt.prop("selected"),title:rt.prop("title")};else if(rt.is("optgroup")){J={text:rt.prop("label"),children:[],title:rt.prop("title")};for(var d=rt.children("option"),Pt=[],Et=0;Et<d.length;Et++){var se=ht(d[Et]),Ie=this.item(se);Pt.push(Ie)}J.children=Pt}return(J=this._normalizeItem(J)).element=rt[0],Ht.StoreData(rt[0],"data",J),J},mt.prototype._normalizeItem=function(rt){return rt!==Object(rt)&&(rt={id:rt,text:rt}),null!=(rt=ht.extend({},{text:""},rt)).id&&(rt.id=rt.id.toString()),null!=rt.text&&(rt.text=rt.text.toString()),null==rt._resultId&&rt.id&&null!=this.container&&(rt._resultId=this.generateResultId(this.container,rt)),ht.extend({},{selected:!1,disabled:!1},rt)},mt.prototype.matches=function(rt,J){return this.options.get("matcher")(rt,J)},mt}),A.define("select2/data/array",["./select","../utils","jquery"],function(zt,Ht,ht){function mt(rt,J){this._dataToConvert=J.get("data")||[],mt.__super__.constructor.call(this,rt,J)}return Ht.Extend(mt,zt),mt.prototype.bind=function(rt,J){mt.__super__.bind.call(this,rt,J),this.addOptions(this.convertToOptions(this._dataToConvert))},mt.prototype.select=function(rt){var J=this.$element.find("option").filter(function(d,Pt){return Pt.value==rt.id.toString()});0===J.length&&(J=this.option(rt),this.addOptions(J)),mt.__super__.select.call(this,rt)},mt.prototype.convertToOptions=function(rt){var J=this,d=this.$element.find("option"),Pt=d.map(function(){return J.item(ht(this)).id}).get(),Et=[];function se(sr){return function(){return ht(this).val()==sr.id}}for(var Ie=0;Ie<rt.length;Ie++){var ei=this._normalizeItem(rt[Ie]);if(0<=ht.inArray(ei.id,Pt)){var _e=d.filter(se(ei)),Ri=this.item(_e),Gi=ht.extend(!0,{},ei,Ri),_i=this.option(Gi);_e.replaceWith(_i)}else{var Hr=this.option(ei);if(ei.children){var Tr=this.convertToOptions(ei.children);Ht.appendMany(Hr,Tr)}Et.push(Hr)}}return Et},mt}),A.define("select2/data/ajax",["./array","../utils","jquery"],function(zt,Ht,ht){function mt(rt,J){this.ajaxOptions=this._applyDefaults(J.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),mt.__super__.constructor.call(this,rt,J)}return Ht.Extend(mt,zt),mt.prototype._applyDefaults=function(rt){var J={data:function(d){return ht.extend({},d,{q:d.term})},transport:function(d,Pt,Et){var se=ht.ajax(d);return se.then(Pt),se.fail(Et),se}};return ht.extend({},J,rt,!0)},mt.prototype.processResults=function(rt){return rt},mt.prototype.query=function(rt,J){var d=this;null!=this._request&&(ht.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var Pt=ht.extend({type:"GET"},this.ajaxOptions);function Et(){var se=Pt.transport(Pt,function(Ie){var ei=d.processResults(Ie,rt);d.options.get("debug")&&window.console&&console.error&&(ei&&ei.results&&ht.isArray(ei.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),J(ei)},function(){"status"in se&&(0===se.status||"0"===se.status)||d.trigger("results:message",{message:"errorLoading"})});d._request=se}"function"==typeof Pt.url&&(Pt.url=Pt.url.call(this.$element,rt)),"function"==typeof Pt.data&&(Pt.data=Pt.data.call(this.$element,rt)),this.ajaxOptions.delay&&null!=rt.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(Et,this.ajaxOptions.delay)):Et()},mt}),A.define("select2/data/tags",["jquery"],function(zt){function Ht(ht,mt,rt){var J=rt.get("tags"),d=rt.get("createTag");void 0!==d&&(this.createTag=d);var Pt=rt.get("insertTag");if(void 0!==Pt&&(this.insertTag=Pt),ht.call(this,mt,rt),zt.isArray(J))for(var Et=0;Et<J.length;Et++){var Ie=this._normalizeItem(J[Et]),ei=this.option(Ie);this.$element.append(ei)}}return Ht.prototype.query=function(ht,mt,rt){var J=this;this._removeOldTags(),ht.call(this,mt,null!=mt.term&&null==mt.page?function d(Pt,Et){for(var se=Pt.results,Ie=0;Ie<se.length;Ie++){var ei=se[Ie],_e=null!=ei.children&&!d({results:ei.children},!0);if((ei.text||"").toUpperCase()===(mt.term||"").toUpperCase()||_e)return!Et&&(Pt.data=se,void rt(Pt))}if(Et)return!0;var Ri=J.createTag(mt);if(null!=Ri){var Gi=J.option(Ri);Gi.attr("data-select2-tag",!0),J.addOptions([Gi]),J.insertTag(se,Ri)}Pt.results=se,rt(Pt)}:rt)},Ht.prototype.createTag=function(ht,mt){var rt=zt.trim(mt.term);return""===rt?null:{id:rt,text:rt}},Ht.prototype.insertTag=function(ht,mt,rt){mt.unshift(rt)},Ht.prototype._removeOldTags=function(ht){this.$element.find("option[data-select2-tag]").each(function(){this.selected||zt(this).remove()})},Ht}),A.define("select2/data/tokenizer",["jquery"],function(zt){function Ht(ht,mt,rt){var J=rt.get("tokenizer");void 0!==J&&(this.tokenizer=J),ht.call(this,mt,rt)}return Ht.prototype.bind=function(ht,mt,rt){ht.call(this,mt,rt),this.$search=mt.dropdown.$search||mt.selection.$search||rt.find(".select2-search__field")},Ht.prototype.query=function(ht,mt,rt){var J=this;mt.term=mt.term||"";var d=this.tokenizer(mt,this.options,function(Pt){var Et=J._normalizeItem(Pt);if(!J.$element.find("option").filter(function(){return zt(this).val()===Et.id}).length){var se=J.option(Et);se.attr("data-select2-tag",!0),J._removeOldTags(),J.addOptions([se])}J.trigger("select",{data:Et})});d.term!==mt.term&&(this.$search.length&&(this.$search.val(d.term),this.$search.trigger("focus")),mt.term=d.term),ht.call(this,mt,rt)},Ht.prototype.tokenizer=function(ht,mt,rt,J){for(var d=rt.get("tokenSeparators")||[],Pt=mt.term,Et=0,se=this.createTag||function(Ri){return{id:Ri.term,text:Ri.term}};Et<Pt.length;)if(-1!==zt.inArray(Pt[Et],d)){var ei=Pt.substr(0,Et),_e=se(zt.extend({},mt,{term:ei}));null!=_e?(J(_e),Pt=Pt.substr(Et+1)||"",Et=0):Et++}else Et++;return{term:Pt}},Ht}),A.define("select2/data/minimumInputLength",[],function(){function zt(Ht,ht,mt){this.minimumInputLength=mt.get("minimumInputLength"),Ht.call(this,ht,mt)}return zt.prototype.query=function(Ht,ht,mt){ht.term=ht.term||"",ht.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:ht.term,params:ht}}):Ht.call(this,ht,mt)},zt}),A.define("select2/data/maximumInputLength",[],function(){function zt(Ht,ht,mt){this.maximumInputLength=mt.get("maximumInputLength"),Ht.call(this,ht,mt)}return zt.prototype.query=function(Ht,ht,mt){ht.term=ht.term||"",0<this.maximumInputLength&&ht.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:ht.term,params:ht}}):Ht.call(this,ht,mt)},zt}),A.define("select2/data/maximumSelectionLength",[],function(){function zt(Ht,ht,mt){this.maximumSelectionLength=mt.get("maximumSelectionLength"),Ht.call(this,ht,mt)}return zt.prototype.bind=function(Ht,ht,mt){var rt=this;Ht.call(this,ht,mt),ht.on("select",function(){rt._checkIfMaximumSelected()})},zt.prototype.query=function(Ht,ht,mt){var rt=this;this._checkIfMaximumSelected(function(){Ht.call(rt,ht,mt)})},zt.prototype._checkIfMaximumSelected=function(Ht,ht){var mt=this;this.current(function(rt){0<mt.maximumSelectionLength&&(null!=rt?rt.length:0)>=mt.maximumSelectionLength?mt.trigger("results:message",{message:"maximumSelected",args:{maximum:mt.maximumSelectionLength}}):ht&&ht()})},zt}),A.define("select2/dropdown",["jquery","./utils"],function(zt,Ht){function ht(mt,rt){this.$element=mt,this.options=rt,ht.__super__.constructor.call(this)}return Ht.Extend(ht,Ht.Observable),ht.prototype.render=function(){var mt=zt('<span class="select2-dropdown"><span class="select2-results"></span></span>');return mt.attr("dir",this.options.get("dir")),this.$dropdown=mt},ht.prototype.bind=function(){},ht.prototype.position=function(mt,rt){},ht.prototype.destroy=function(){this.$dropdown.remove()},ht}),A.define("select2/dropdown/search",["jquery","../utils"],function(zt,Ht){function ht(){}return ht.prototype.render=function(mt){var rt=mt.call(this),J=zt('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=J,this.$search=J.find("input"),rt.prepend(J),rt},ht.prototype.bind=function(mt,rt,J){var d=this,Pt=rt.id+"-results";mt.call(this,rt,J),this.$search.on("keydown",function(Et){d.trigger("keypress",Et),d._keyUpPrevented=Et.isDefaultPrevented()}),this.$search.on("input",function(Et){zt(this).off("keyup")}),this.$search.on("keyup input",function(Et){d.handleSearch(Et)}),rt.on("open",function(){d.$search.attr("tabindex",0),d.$search.attr("aria-controls",Pt),d.$search.trigger("focus"),window.setTimeout(function(){d.$search.trigger("focus")},0)}),rt.on("close",function(){d.$search.attr("tabindex",-1),d.$search.removeAttr("aria-controls"),d.$search.removeAttr("aria-activedescendant"),d.$search.val(""),d.$search.trigger("blur")}),rt.on("focus",function(){rt.isOpen()||d.$search.trigger("focus")}),rt.on("results:all",function(Et){null!=Et.query.term&&""!==Et.query.term||(d.showSearch(Et)?d.$searchContainer.removeClass("select2-search--hide"):d.$searchContainer.addClass("select2-search--hide"))}),rt.on("results:focus",function(Et){Et.data._resultId?d.$search.attr("aria-activedescendant",Et.data._resultId):d.$search.removeAttr("aria-activedescendant")})},ht.prototype.handleSearch=function(mt){if(!this._keyUpPrevented){var rt=this.$search.val();this.trigger("query",{term:rt})}this._keyUpPrevented=!1},ht.prototype.showSearch=function(mt,rt){return!0},ht}),A.define("select2/dropdown/hidePlaceholder",[],function(){function zt(Ht,ht,mt,rt){this.placeholder=this.normalizePlaceholder(mt.get("placeholder")),Ht.call(this,ht,mt,rt)}return zt.prototype.append=function(Ht,ht){ht.results=this.removePlaceholder(ht.results),Ht.call(this,ht)},zt.prototype.normalizePlaceholder=function(Ht,ht){return"string"==typeof ht&&(ht={id:"",text:ht}),ht},zt.prototype.removePlaceholder=function(Ht,ht){for(var mt=ht.slice(0),rt=ht.length-1;0<=rt;rt--)this.placeholder.id===ht[rt].id&&mt.splice(rt,1);return mt},zt}),A.define("select2/dropdown/infiniteScroll",["jquery"],function(zt){function Ht(ht,mt,rt,J){this.lastParams={},ht.call(this,mt,rt,J),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return Ht.prototype.append=function(ht,mt){this.$loadingMore.remove(),this.loading=!1,ht.call(this,mt),this.showLoadingMore(mt)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},Ht.prototype.bind=function(ht,mt,rt){var J=this;ht.call(this,mt,rt),mt.on("query",function(d){J.lastParams=d,J.loading=!0}),mt.on("query:append",function(d){J.lastParams=d,J.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},Ht.prototype.loadMoreIfNeeded=function(){var ht=zt.contains(document.documentElement,this.$loadingMore[0]);if(!this.loading&&ht){var mt=this.$results.offset().top+this.$results.outerHeight(!1);this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=mt+50&&this.loadMore()}},Ht.prototype.loadMore=function(){this.loading=!0;var ht=zt.extend({},{page:1},this.lastParams);ht.page++,this.trigger("query:append",ht)},Ht.prototype.showLoadingMore=function(ht,mt){return mt.pagination&&mt.pagination.more},Ht.prototype.createLoadingMore=function(){var ht=zt('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),mt=this.options.get("translations").get("loadingMore");return ht.html(mt(this.lastParams)),ht},Ht}),A.define("select2/dropdown/attachBody",["jquery","../utils"],function(zt,Ht){function ht(mt,rt,J){this.$dropdownParent=zt(J.get("dropdownParent")||document.body),mt.call(this,rt,J)}return ht.prototype.bind=function(mt,rt,J){var d=this;mt.call(this,rt,J),rt.on("open",function(){d._showDropdown(),d._attachPositioningHandler(rt),d._bindContainerResultHandlers(rt)}),rt.on("close",function(){d._hideDropdown(),d._detachPositioningHandler(rt)}),this.$dropdownContainer.on("mousedown",function(Pt){Pt.stopPropagation()})},ht.prototype.destroy=function(mt){mt.call(this),this.$dropdownContainer.remove()},ht.prototype.position=function(mt,rt,J){rt.attr("class",J.attr("class")),rt.removeClass("select2"),rt.addClass("select2-container--open"),rt.css({position:"absolute",top:-999999}),this.$container=J},ht.prototype.render=function(mt){var rt=zt("<span></span>"),J=mt.call(this);return rt.append(J),this.$dropdownContainer=rt},ht.prototype._hideDropdown=function(mt){this.$dropdownContainer.detach()},ht.prototype._bindContainerResultHandlers=function(mt,rt){if(!this._containerResultsHandlersBound){var J=this;rt.on("results:all",function(){J._positionDropdown(),J._resizeDropdown()}),rt.on("results:append",function(){J._positionDropdown(),J._resizeDropdown()}),rt.on("results:message",function(){J._positionDropdown(),J._resizeDropdown()}),rt.on("select",function(){J._positionDropdown(),J._resizeDropdown()}),rt.on("unselect",function(){J._positionDropdown(),J._resizeDropdown()}),this._containerResultsHandlersBound=!0}},ht.prototype._attachPositioningHandler=function(mt,rt){var J=this,d="scroll.select2."+rt.id,Pt="resize.select2."+rt.id,Et="orientationchange.select2."+rt.id,se=this.$container.parents().filter(Ht.hasScroll);se.each(function(){Ht.StoreData(this,"select2-scroll-position",{x:zt(this).scrollLeft(),y:zt(this).scrollTop()})}),se.on(d,function(Ie){var ei=Ht.GetData(this,"select2-scroll-position");zt(this).scrollTop(ei.y)}),zt(window).on(d+" "+Pt+" "+Et,function(Ie){J._positionDropdown(),J._resizeDropdown()})},ht.prototype._detachPositioningHandler=function(mt,rt){var J="scroll.select2."+rt.id,d="resize.select2."+rt.id,Pt="orientationchange.select2."+rt.id;this.$container.parents().filter(Ht.hasScroll).off(J),zt(window).off(J+" "+d+" "+Pt)},ht.prototype._positionDropdown=function(){var mt=zt(window),rt=this.$dropdown.hasClass("select2-dropdown--above"),J=this.$dropdown.hasClass("select2-dropdown--below"),d=null,Pt=this.$container.offset();Pt.bottom=Pt.top+this.$container.outerHeight(!1);var Et={height:this.$container.outerHeight(!1)};Et.top=Pt.top,Et.bottom=Pt.top+Et.height;var se=this.$dropdown.outerHeight(!1),Ie=mt.scrollTop(),ei=mt.scrollTop()+mt.height(),_e=Ie<Pt.top-se,Ri=ei>Pt.bottom+se,Gi={left:Pt.left,top:Et.bottom},_i=this.$dropdownParent;"static"===_i.css("position")&&(_i=_i.offsetParent());var Hr={top:0,left:0};(zt.contains(document.body,_i[0])||_i[0].isConnected)&&(Hr=_i.offset()),Gi.top-=Hr.top,Gi.left-=Hr.left,rt||J||(d="below"),Ri||!_e||rt?!_e&&Ri&&rt&&(d="below"):d="above",("above"==d||rt&&"below"!==d)&&(Gi.top=Et.top-Hr.top-se),null!=d&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+d),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+d)),this.$dropdownContainer.css(Gi)},ht.prototype._resizeDropdown=function(){var mt={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(mt.minWidth=mt.width,mt.position="relative",mt.width="auto"),this.$dropdown.css(mt)},ht.prototype._showDropdown=function(mt){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},ht}),A.define("select2/dropdown/minimumResultsForSearch",[],function(){function zt(Ht,ht,mt,rt){this.minimumResultsForSearch=mt.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),Ht.call(this,ht,mt,rt)}return zt.prototype.showSearch=function(Ht,ht){return!(function mt(rt){for(var J=0,d=0;d<rt.length;d++){var Pt=rt[d];Pt.children?J+=mt(Pt.children):J++}return J}(ht.data.results)<this.minimumResultsForSearch)&&Ht.call(this,ht)},zt}),A.define("select2/dropdown/selectOnClose",["../utils"],function(zt){function Ht(){}return Ht.prototype.bind=function(ht,mt,rt){var J=this;ht.call(this,mt,rt),mt.on("close",function(d){J._handleSelectOnClose(d)})},Ht.prototype._handleSelectOnClose=function(ht,mt){if(mt&&null!=mt.originalSelect2Event){var rt=mt.originalSelect2Event;if("select"===rt._type||"unselect"===rt._type)return}var J=this.getHighlightedResults();if(!(J.length<1)){var d=zt.GetData(J[0],"data");null!=d.element&&d.element.selected||null==d.element&&d.selected||this.trigger("select",{data:d})}},Ht}),A.define("select2/dropdown/closeOnSelect",[],function(){function zt(){}return zt.prototype.bind=function(Ht,ht,mt){var rt=this;Ht.call(this,ht,mt),ht.on("select",function(J){rt._selectTriggered(J)}),ht.on("unselect",function(J){rt._selectTriggered(J)})},zt.prototype._selectTriggered=function(Ht,ht){var mt=ht.originalEvent;mt&&(mt.ctrlKey||mt.metaKey)||this.trigger("close",{originalEvent:mt,originalSelect2Event:ht})},zt}),A.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(zt){var Ht=zt.input.length-zt.maximum,ht="Please delete "+Ht+" character";return 1!=Ht&&(ht+="s"),ht},inputTooShort:function(zt){return"Please enter "+(zt.minimum-zt.input.length)+" or more characters"},loadingMore:function(){return"Loading more results\u2026"},maximumSelected:function(zt){var Ht="You can only select "+zt.maximum+" item";return 1!=zt.maximum&&(Ht+="s"),Ht},noResults:function(){return"No results found"},searching:function(){return"Searching\u2026"},removeAllItems:function(){return"Remove all items"}}}),A.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(zt,Ht,ht,mt,rt,J,d,Pt,Et,se,Ie,ei,_e,Ri,Gi,_i,Hr,Tr,sr,Tn,Ln,Dt,Ft,Fe,Le,st,Rt,me,Me){function ii(){this.reset()}return ii.prototype.apply=function(re){if(null==(re=zt.extend(!0,{},this.defaults,re)).dataAdapter){if(re.dataAdapter=null!=re.ajax?Gi:null!=re.data?Ri:_e,0<re.minimumInputLength&&(re.dataAdapter=se.Decorate(re.dataAdapter,Tr)),0<re.maximumInputLength&&(re.dataAdapter=se.Decorate(re.dataAdapter,sr)),0<re.maximumSelectionLength&&(re.dataAdapter=se.Decorate(re.dataAdapter,Tn)),re.tags&&(re.dataAdapter=se.Decorate(re.dataAdapter,_i)),null==re.tokenSeparators&&null==re.tokenizer||(re.dataAdapter=se.Decorate(re.dataAdapter,Hr)),null!=re.query){var Bt=Ht(re.amdBase+"compat/query");re.dataAdapter=se.Decorate(re.dataAdapter,Bt)}if(null!=re.initSelection){var Kt=Ht(re.amdBase+"compat/initSelection");re.dataAdapter=se.Decorate(re.dataAdapter,Kt)}}if(null==re.resultsAdapter&&(re.resultsAdapter=ht,null!=re.ajax&&(re.resultsAdapter=se.Decorate(re.resultsAdapter,Fe)),null!=re.placeholder&&(re.resultsAdapter=se.Decorate(re.resultsAdapter,Ft)),re.selectOnClose&&(re.resultsAdapter=se.Decorate(re.resultsAdapter,Rt))),null==re.dropdownAdapter){if(re.multiple)re.dropdownAdapter=Ln;else{var ne=se.Decorate(Ln,Dt);re.dropdownAdapter=ne}if(0!==re.minimumResultsForSearch&&(re.dropdownAdapter=se.Decorate(re.dropdownAdapter,st)),re.closeOnSelect&&(re.dropdownAdapter=se.Decorate(re.dropdownAdapter,me)),null!=re.dropdownCssClass||null!=re.dropdownCss||null!=re.adaptDropdownCssClass){var Pe=Ht(re.amdBase+"compat/dropdownCss");re.dropdownAdapter=se.Decorate(re.dropdownAdapter,Pe)}re.dropdownAdapter=se.Decorate(re.dropdownAdapter,Le)}if(null==re.selectionAdapter){if(re.selectionAdapter=re.multiple?rt:mt,null!=re.placeholder&&(re.selectionAdapter=se.Decorate(re.selectionAdapter,J)),re.allowClear&&(re.selectionAdapter=se.Decorate(re.selectionAdapter,d)),re.multiple&&(re.selectionAdapter=se.Decorate(re.selectionAdapter,Pt)),null!=re.containerCssClass||null!=re.containerCss||null!=re.adaptContainerCssClass){var oi=Ht(re.amdBase+"compat/containerCss");re.selectionAdapter=se.Decorate(re.selectionAdapter,oi)}re.selectionAdapter=se.Decorate(re.selectionAdapter,Et)}re.language=this._resolveLanguage(re.language),re.language.push("en");for(var Ci=[],ar=0;ar<re.language.length;ar++){var tr=re.language[ar];-1===Ci.indexOf(tr)&&Ci.push(tr)}return re.language=Ci,re.translations=this._processTranslations(re.language,re.debug),re},ii.prototype.reset=function(){function re(Bt){return Bt.replace(/[^\u0000-\u007E]/g,function(Kt){return ei[Kt]||Kt})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:se.escapeMarkup,language:{},matcher:function Bt(Kt,ne){if(""===zt.trim(Kt.term))return ne;if(ne.children&&0<ne.children.length){for(var Pe=zt.extend(!0,{},ne),oi=ne.children.length-1;0<=oi;oi--)null==Bt(Kt,ne.children[oi])&&Pe.children.splice(oi,1);return 0<Pe.children.length?Pe:Bt(Kt,Pe)}var Ci=re(ne.text).toUpperCase(),ar=re(Kt.term).toUpperCase();return-1<Ci.indexOf(ar)?ne:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(Bt){return Bt},templateResult:function(Bt){return Bt.text},templateSelection:function(Bt){return Bt.text},theme:"default",width:"resolve"}},ii.prototype.applyFromElement=function(re,Bt){var Kt=re.language,ne=this.defaults.language,Pe=Bt.prop("lang"),oi=Bt.closest("[lang]").prop("lang"),Ci=Array.prototype.concat.call(this._resolveLanguage(Pe),this._resolveLanguage(Kt),this._resolveLanguage(ne),this._resolveLanguage(oi));return re.language=Ci,re},ii.prototype._resolveLanguage=function(re){if(!re)return[];if(zt.isEmptyObject(re))return[];if(zt.isPlainObject(re))return[re];var Bt;Bt=zt.isArray(re)?re:[re];for(var Kt=[],ne=0;ne<Bt.length;ne++)if(Kt.push(Bt[ne]),"string"==typeof Bt[ne]&&0<Bt[ne].indexOf("-")){var Pe=Bt[ne].split("-")[0];Kt.push(Pe)}return Kt},ii.prototype._processTranslations=function(re,Bt){for(var Kt=new Ie,ne=0;ne<re.length;ne++){var Pe=new Ie,oi=re[ne];if("string"==typeof oi)try{Pe=Ie.loadPath(oi)}catch(Ci){try{Pe=Ie.loadPath(oi=this.defaults.amdLanguageBase+oi)}catch(ar){Bt&&window.console&&console.warn&&console.warn('Select2: The language file for "'+oi+'" could not be automatically loaded. A fallback will be used instead.')}}else Pe=zt.isPlainObject(oi)?new Ie(oi):oi;Kt.extend(Pe)}return Kt},ii.prototype.set=function(re,Bt){var Kt={};Kt[zt.camelCase(re)]=Bt;var ne=se._convertData(Kt);zt.extend(!0,this.defaults,ne)},new ii}),A.define("select2/options",["require","jquery","./defaults","./utils"],function(zt,Ht,ht,mt){function rt(J,d){if(this.options=J,null!=d&&this.fromElement(d),null!=d&&(this.options=ht.applyFromElement(this.options,d)),this.options=ht.apply(this.options),d&&d.is("input")){var Pt=zt(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=mt.Decorate(this.options.dataAdapter,Pt)}}return rt.prototype.fromElement=function(J){var d=["select2"];null==this.options.multiple&&(this.options.multiple=J.prop("multiple")),null==this.options.disabled&&(this.options.disabled=J.prop("disabled")),null==this.options.dir&&(this.options.dir=J.prop("dir")?J.prop("dir"):J.closest("[dir]").prop("dir")?J.closest("[dir]").prop("dir"):"ltr"),J.prop("disabled",this.options.disabled),J.prop("multiple",this.options.multiple),mt.GetData(J[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),mt.StoreData(J[0],"data",mt.GetData(J[0],"select2Tags")),mt.StoreData(J[0],"tags",!0)),mt.GetData(J[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),J.attr("ajax--url",mt.GetData(J[0],"ajaxUrl")),mt.StoreData(J[0],"ajax-Url",mt.GetData(J[0],"ajaxUrl")));var Pt={};function Et(Hr,Tr){return Tr.toUpperCase()}for(var se=0;se<J[0].attributes.length;se++){var Ie=J[0].attributes[se].name,ei="data-";if(Ie.substr(0,ei.length)==ei){var _e=Ie.substring(ei.length),Ri=mt.GetData(J[0],_e);Pt[_e.replace(/-([a-z])/g,Et)]=Ri}}Ht.fn.jquery&&"1."==Ht.fn.jquery.substr(0,2)&&J[0].dataset&&(Pt=Ht.extend(!0,{},J[0].dataset,Pt));var Gi=Ht.extend(!0,{},mt.GetData(J[0]),Pt);for(var _i in Gi=mt._convertData(Gi))-1<Ht.inArray(_i,d)||(Ht.isPlainObject(this.options[_i])?Ht.extend(this.options[_i],Gi[_i]):this.options[_i]=Gi[_i]);return this},rt.prototype.get=function(J){return this.options[J]},rt.prototype.set=function(J,d){this.options[J]=d},rt}),A.define("select2/core",["jquery","./options","./utils","./keys"],function(zt,Ht,ht,mt){var rt=function(J,d){null!=ht.GetData(J[0],"select2")&&ht.GetData(J[0],"select2").destroy(),this.$element=J,this.id=this._generateId(J),this.options=new Ht(d=d||{},J),rt.__super__.constructor.call(this);var Pt=J.attr("tabindex")||0;ht.StoreData(J[0],"old-tabindex",Pt),J.attr("tabindex","-1");var Et=this.options.get("dataAdapter");this.dataAdapter=new Et(J,this.options);var se=this.render();this._placeContainer(se);var Ie=this.options.get("selectionAdapter");this.selection=new Ie(J,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,se);var ei=this.options.get("dropdownAdapter");this.dropdown=new ei(J,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,se);var _e=this.options.get("resultsAdapter");this.results=new _e(J,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var Ri=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(Gi){Ri.trigger("selection:update",{data:Gi})}),J.addClass("select2-hidden-accessible"),J.attr("aria-hidden","true"),this._syncAttributes(),ht.StoreData(J[0],"select2",this),J.data("select2",this)};return ht.Extend(rt,ht.Observable),rt.prototype._generateId=function(J){return"select2-"+(null!=J.attr("id")?J.attr("id"):null!=J.attr("name")?J.attr("name")+"-"+ht.generateChars(2):ht.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},rt.prototype._placeContainer=function(J){J.insertAfter(this.$element);var d=this._resolveWidth(this.$element,this.options.get("width"));null!=d&&J.css("width",d)},rt.prototype._resolveWidth=function(J,d){var Pt=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==d){var Et=this._resolveWidth(J,"style");return null!=Et?Et:this._resolveWidth(J,"element")}if("element"==d){var se=J.outerWidth(!1);return se<=0?"auto":se+"px"}if("style"!=d)return"computedstyle"!=d?d:window.getComputedStyle(J[0]).width;var Ie=J.attr("style");if("string"!=typeof Ie)return null;for(var ei=Ie.split(";"),_e=0,Ri=ei.length;_e<Ri;_e+=1){var Gi=ei[_e].replace(/\s/g,"").match(Pt);if(null!==Gi&&1<=Gi.length)return Gi[1]}return null},rt.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},rt.prototype._registerDomEvents=function(){var J=this;this.$element.on("change.select2",function(){J.dataAdapter.current(function(Pt){J.trigger("selection:update",{data:Pt})})}),this.$element.on("focus.select2",function(Pt){J.trigger("focus",Pt)}),this._syncA=ht.bind(this._syncAttributes,this),this._syncS=ht.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=d?(this._observer=new d(function(Pt){J._syncA(),J._syncS(null,Pt)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",J._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",J._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",J._syncS,!1))},rt.prototype._registerDataEvents=function(){var J=this;this.dataAdapter.on("*",function(d,Pt){J.trigger(d,Pt)})},rt.prototype._registerSelectionEvents=function(){var J=this,d=["toggle","focus"];this.selection.on("toggle",function(){J.toggleDropdown()}),this.selection.on("focus",function(Pt){J.focus(Pt)}),this.selection.on("*",function(Pt,Et){-1===zt.inArray(Pt,d)&&J.trigger(Pt,Et)})},rt.prototype._registerDropdownEvents=function(){var J=this;this.dropdown.on("*",function(d,Pt){J.trigger(d,Pt)})},rt.prototype._registerResultsEvents=function(){var J=this;this.results.on("*",function(d,Pt){J.trigger(d,Pt)})},rt.prototype._registerEvents=function(){var J=this;this.on("open",function(){J.$container.addClass("select2-container--open")}),this.on("close",function(){J.$container.removeClass("select2-container--open")}),this.on("enable",function(){J.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){J.$container.addClass("select2-container--disabled")}),this.on("blur",function(){J.$container.removeClass("select2-container--focus")}),this.on("query",function(d){J.isOpen()||J.trigger("open",{}),this.dataAdapter.query(d,function(Pt){J.trigger("results:all",{data:Pt,query:d})})}),this.on("query:append",function(d){this.dataAdapter.query(d,function(Pt){J.trigger("results:append",{data:Pt,query:d})})}),this.on("keypress",function(d){var Pt=d.which;J.isOpen()?Pt===mt.ESC||Pt===mt.TAB||Pt===mt.UP&&d.altKey?(J.close(d),d.preventDefault()):Pt===mt.ENTER?(J.trigger("results:select",{}),d.preventDefault()):Pt===mt.SPACE&&d.ctrlKey?(J.trigger("results:toggle",{}),d.preventDefault()):Pt===mt.UP?(J.trigger("results:previous",{}),d.preventDefault()):Pt===mt.DOWN&&(J.trigger("results:next",{}),d.preventDefault()):(Pt===mt.ENTER||Pt===mt.SPACE||Pt===mt.DOWN&&d.altKey)&&(J.open(),d.preventDefault())})},rt.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},rt.prototype._isChangeMutation=function(J,d){var Pt=!1,Et=this;if(!J||!J.target||"OPTION"===J.target.nodeName||"OPTGROUP"===J.target.nodeName){if(d)if(d.addedNodes&&0<d.addedNodes.length)for(var se=0;se<d.addedNodes.length;se++)d.addedNodes[se].selected&&(Pt=!0);else d.removedNodes&&0<d.removedNodes.length?Pt=!0:zt.isArray(d)&&zt.each(d,function(Ie,ei){if(Et._isChangeMutation(Ie,ei))return!(Pt=!0)});else Pt=!0;return Pt}},rt.prototype._syncSubtree=function(J,d){var Pt=this._isChangeMutation(J,d),Et=this;Pt&&this.dataAdapter.current(function(se){Et.trigger("selection:update",{data:se})})},rt.prototype.trigger=function(J,d){var Pt=rt.__super__.trigger,Et={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===d&&(d={}),J in Et){var Ie={prevented:!1,name:J,args:d};if(Pt.call(this,Et[J],Ie),Ie.prevented)return void(d.prevented=!0)}Pt.call(this,J,d)},rt.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},rt.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},rt.prototype.close=function(J){this.isOpen()&&this.trigger("close",{originalEvent:J})},rt.prototype.isEnabled=function(){return!this.isDisabled()},rt.prototype.isDisabled=function(){return this.options.get("disabled")},rt.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},rt.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},rt.prototype.focus=function(J){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},rt.prototype.enable=function(J){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=J&&0!==J.length||(J=[!0]),this.$element.prop("disabled",!J[0])},rt.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var J=[];return this.dataAdapter.current(function(d){J=d}),J},rt.prototype.val=function(J){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==J||0===J.length)return this.$element.val();var d=J[0];zt.isArray(d)&&(d=zt.map(d,function(Pt){return Pt.toString()})),this.$element.val(d).trigger("input").trigger("change")},rt.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",ht.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),ht.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},rt.prototype.render=function(){var J=zt('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return J.attr("dir",this.options.get("dir")),this.$container=J,this.$container.addClass("select2-container--"+this.options.get("theme")),ht.StoreData(J[0],"element",this.$element),J},rt}),A.define("jquery-mousewheel",["jquery"],function(zt){return zt}),A.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(zt,Ht,ht,mt,rt){if(null==zt.fn.select2){var J=["open","close","destroy"];zt.fn.select2=function(d){if("object"==typeof(d=d||{}))return this.each(function(){var se=zt.extend(!0,{},d);new ht(zt(this),se)}),this;if("string"!=typeof d)throw new Error("Invalid arguments for Select2: "+d);var Pt,Et=Array.prototype.slice.call(arguments,1);return this.each(function(){var se=rt.GetData(this,"select2");null==se&&window.console&&console.error&&console.error("The select2('"+d+"') method was called on an element that is not using Select2."),Pt=se[d].apply(se,Et)}),-1<zt.inArray(d,J)?this:Pt}}return null==zt.fn.select2.defaults&&(zt.fn.select2.defaults=mt),ht}),{define:A.define,require:A.require}}(),v=b.require("jquery.select2");return F.fn.select2.amd=b,v}),function(F){"use strict";F(window).on("load",function(){F(".acr-preloader").addClass("hidden")}),F(".aside-trigger").on("click",function(){F(".main-aside").toggleClass("open"),F("body").toggleClass("aside-open")}),F(".main-aside .menu-item-has-children > a").on("click",function(l){l.preventDefault();var P=F(this).next(".submenu");F(this).parent().hasClass("active")?(P.slideUp(200),F(this).parent().siblings().find(".submenu").slideUp(200),F(this).parent().removeClass("active")):(F(this).closest("ul").find(".menu-item-has-children").find(".submenu").slideUp(200),F(this).closest("ul").find(".menu-item-has-children").removeClass("active"),F(this).parent().addClass("active"),P.slideDown(200))});var b=F(".can-sticky"),v=b.innerHeight();function A(){window.pageYOffset>v?b.addClass("sticky"):b.removeClass("sticky")}A(),F(".listing-main-wrapper").niceScroll({cursorcolor:"#dcdcdc",cursorwidth:"5px"}),F(".banner-slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!0,dots:!1,fade:!0,prevArrow:F(".banner .slider-prev"),nextArrow:F(".banner .slider-next")}),F(".listing-banner-slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!0,dots:!1,prevArrow:F(".listing-banner-inner .slider-prev"),nextArrow:F(".listing-banner-inner .slider-next")}),F(".banner-featured-slider").slick({slidesToShow:2,slidesToScroll:2,arrows:!1,dots:!0,autoplay:!0,responsive:[{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1}}]}),F(".listings-slider").slick({slidesToShow:3,slidesToScroll:1,arrows:!0,prevArrow:F(".listings .slider-prev"),nextArrow:F(".listings .slider-next"),dots:!1,responsive:[{breakpoint:991,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]}),F(".top-listings-slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!0,dots:!1,autoplay:!0,prevArrow:F(".top-listings .slider-prev"),nextArrow:F(".top-listings .slider-next"),responsive:[{breakpoint:991,settings:{arrows:!1}}]}),F(".clients-slider").slick({slidesToShow:5,slidesToScroll:1,arrows:!1,dots:!1,autoplay:!0,responsive:[{breakpoint:991,settings:{slidesToShow:4}},{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:575,settings:{slidesToShow:2}}]}),F(".agents-slider").slick({slidesToShow:3,slidesToScroll:1,arrows:!0,prevArrow:F(".agents .slider-prev"),nextArrow:F(".agents .slider-next"),dots:!1,responsive:[{breakpoint:991,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]}),F(".acr-cs-bg-slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,autoplay:!0,dots:!0}),F(".listing-thumbnail-slider-main").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,asNavFor:".listing-thumbnail-slider-nav"}),F(".listing-thumbnail-slider-nav").slick({slidesToShow:4,slidesToScroll:1,asNavFor:".listing-thumbnail-slider-main",dots:!1,centerMode:!1,focusOnSelect:!0,autoplay:!0,responsive:[{breakpoint:768,settings:{slidesToShow:2}}]}),F(".acr-collapse-trigger").on("click",function(){F(this).next().slideToggle(200)}),F(".advanced-search-trigger").on("click",function(){F(".advanced-search").slideToggle(200),F(this).toggleClass("active")}),F(".filter-trigger").on("click",function(){F(".acr-filter-form").slideToggle(300)}),F(".acr-select2").select2({allowClear:!1}),F('[data-toggle="tooltip"]').tooltip(),F(".load-more-features").on("click",function(){F(this).hide(0),F(".hidden-listing-features").slideDown()}),F(".popup-youtube").magnificPopup({type:"iframe"}),F(".popup-vimeo").magnificPopup({type:"iframe"}),F(".popup-video").magnificPopup({type:"iframe"}),F(".gallery-thumb").magnificPopup({type:"image",gallery:{enabled:!0}}),F(".masonry").imagesLoaded(function(){F(".masonry").isotope({itemSelector:".masonry-item"})}),F("#acrListingGallery").length&&(Dropzone.autoDiscover=!1,F("#acrListingGallery").dropzone({url:"https://androthemes.com/scripts/silence.php",paramName:"file",maxFiles:5,maxFilesize:5,addRemoveLinks:!0,acceptedFiles:"image/*,application/pdf,.psd"})),F(window).on("scroll",function(){A()})}(jQuery);var _createClass=function(){function F(b,v){for(var A=0;A<v.length;A++){var l=v[A];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(b,l.key,l)}}return function(b,v,A){return v&&F(b.prototype,v),A&&F(b,A),b}}(),Emitter=function(){function F(){_classCallCheck(this,F)}return _createClass(F,[{key:"on",value:function(b,v){return this._callbacks=this._callbacks||{},this._callbacks[b]||(this._callbacks[b]=[]),this._callbacks[b].push(v),this}},{key:"emit",value:function(b){this._callbacks=this._callbacks||{};var v=this._callbacks[b];if(v){for(var A=arguments.length,l=Array(A>1?A-1:0),P=1;P<A;P++)l[P-1]=arguments[P];for(var I=0,N=N=v;!(I>=N.length);)N[I++].apply(this,l)}return this}},{key:"off",value:function(b,v){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var A=this._callbacks[b];if(!A)return this;if(1===arguments.length)return delete this._callbacks[b],this;for(var l=0;l<A.length;l++)if(A[l]===v){A.splice(l,1);break}return this}}]),F}(),Dropzone=function(F){function b(v,A){_classCallCheck(this,b);var I,l=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),P=void 0;if(l.element=v,l.version=b.version,l.defaultOptions.previewTemplate=l.defaultOptions.previewTemplate.replace(/\n*/g,""),l.clickableElements=[],l.listeners=[],l.files=[],"string"==typeof l.element&&(l.element=document.querySelector(l.element)),!l.element||null==l.element.nodeType)throw new Error("Invalid dropzone element.");if(l.element.dropzone)throw new Error("Dropzone already attached.");b.instances.push(l),l.element.dropzone=l;var et,N=null!=(I=b.optionsForElement(l.element))?I:{};if(l.options=b.extend({},l.defaultOptions,N,null!=A?A:{}),l.options.forceFallback||!b.isBrowserSupported())return et=l.options.fallback.call(l),_possibleConstructorReturn(l,et);if(null==l.options.url&&(l.options.url=l.element.getAttribute("action")),!l.options.url)throw new Error("No URL provided.");if(l.options.acceptedFiles&&l.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(l.options.uploadMultiple&&l.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return l.options.acceptedMimeTypes&&(l.options.acceptedFiles=l.options.acceptedMimeTypes,delete l.options.acceptedMimeTypes),null!=l.options.renameFilename&&(l.options.renameFile=function(Lt){return l.options.renameFilename.call(l,Lt.name,Lt)}),l.options.method=l.options.method.toUpperCase(),(P=l.getExistingFallback())&&P.parentNode&&P.parentNode.removeChild(P),!1!==l.options.previewsContainer&&(l.previewsContainer=l.options.previewsContainer?b.getElement(l.options.previewsContainer,"previewsContainer"):l.element),l.options.clickable&&(l.clickableElements=!0===l.options.clickable?[l.element]:b.getElements(l.options.clickable,"clickable")),l.init(),l}return _inherits(b,Emitter),_createClass(b,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(v,A,l){if(l)return{dzuuid:l.file.upload.uuid,dzchunkindex:l.index,dztotalfilesize:l.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:l.file.upload.totalChunkCount,dzchunkbyteoffset:l.index*this.options.chunkSize}},accept:function(v,A){return A()},chunksUploaded:function(v,A){A()},fallback:function(){var v=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var A=0,l=l=this.element.getElementsByTagName("div");!(A>=l.length);){var I=l[A++];if(/(^| )dz-message($| )/.test(I.className)){v=I,I.className="dz-message";break}}v||(v=b.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(v));var N=v.getElementsByTagName("span")[0];return N&&(null!=N.textContent?N.textContent=this.options.dictFallbackMessage:null!=N.innerText&&(N.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(v,A,l,P){var I={srcX:0,srcY:0,srcWidth:v.width,srcHeight:v.height},N=v.width/v.height;null==A&&null==l?(A=I.srcWidth,l=I.srcHeight):null==A?A=l*N:null==l&&(l=A/N);var et=(A=Math.min(A,I.srcWidth))/(l=Math.min(l,I.srcHeight));if(I.srcWidth>A||I.srcHeight>l)if("crop"===P)N>et?(I.srcHeight=v.height,I.srcWidth=I.srcHeight*et):(I.srcWidth=v.width,I.srcHeight=I.srcWidth/et);else{if("contain"!==P)throw new Error("Unknown resizeMethod '"+P+"'");N>et?l=A/N:A=l*N}return I.srcX=(v.width-I.srcWidth)/2,I.srcY=(v.height-I.srcHeight)/2,I.trgWidth=A,I.trgHeight=l,I},transformFile:function(v,A){return(this.options.resizeWidth||this.options.resizeHeight)&&v.type.match(/image.*/)?this.resizeImage(v,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,A):A(v)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(v){return this.element.classList.remove("dz-drag-hover")},dragstart:function(v){},dragend:function(v){return this.element.classList.remove("dz-drag-hover")},dragenter:function(v){return this.element.classList.add("dz-drag-hover")},dragover:function(v){return this.element.classList.add("dz-drag-hover")},dragleave:function(v){return this.element.classList.remove("dz-drag-hover")},paste:function(v){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(v){var A=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){v.previewElement=b.createElement(this.options.previewTemplate.trim()),v.previewTemplate=v.previewElement,this.previewsContainer.appendChild(v.previewElement);for(var l=0,P=P=v.previewElement.querySelectorAll("[data-dz-name]");!(l>=P.length);){var N=P[l++];N.textContent=v.name}for(var et=0,Lt=Lt=v.previewElement.querySelectorAll("[data-dz-size]");!(et>=Lt.length);)(N=Lt[et++]).innerHTML=this.filesize(v.size);this.options.addRemoveLinks&&(v._removeLink=b.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),v.previewElement.appendChild(v._removeLink));for(var Zt=function(vt){return vt.preventDefault(),vt.stopPropagation(),v.status===b.UPLOADING?b.confirm(A.options.dictCancelUploadConfirmation,function(){return A.removeFile(v)}):A.options.dictRemoveFileConfirmation?b.confirm(A.options.dictRemoveFileConfirmation,function(){return A.removeFile(v)}):A.removeFile(v)},Mt=0,Yt=Yt=v.previewElement.querySelectorAll("[data-dz-remove]");!(Mt>=Yt.length);)Yt[Mt++].addEventListener("click",Zt)}},removedfile:function(v){return null!=v.previewElement&&null!=v.previewElement.parentNode&&v.previewElement.parentNode.removeChild(v.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(v,A){if(v.previewElement){v.previewElement.classList.remove("dz-file-preview");for(var l=0,P=P=v.previewElement.querySelectorAll("[data-dz-thumbnail]");!(l>=P.length);){var N=P[l++];N.alt=v.name,N.src=A}return setTimeout(function(){return v.previewElement.classList.add("dz-image-preview")},1)}},error:function(v,A){if(v.previewElement){v.previewElement.classList.add("dz-error"),"String"!=typeof A&&A.error&&(A=A.error);for(var l=0,P=P=v.previewElement.querySelectorAll("[data-dz-errormessage]");!(l>=P.length);)P[l++].textContent=A}},errormultiple:function(){},processing:function(v){if(v.previewElement&&(v.previewElement.classList.add("dz-processing"),v._removeLink))return v._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(v,A,l){if(v.previewElement)for(var P=0,I=I=v.previewElement.querySelectorAll("[data-dz-uploadprogress]");!(P>=I.length);){var et=I[P++];"PROGRESS"===et.nodeName?et.value=A:et.style.width=A+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(v){if(v.previewElement)return v.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(v){return this.emit("error",v,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(v){if(v._removeLink&&(v._removeLink.innerHTML=this.options.dictRemoveFile),v.previewElement)return v.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(v){for(var A=arguments.length,l=Array(A>1?A-1:0),P=1;P<A;P++)l[P-1]=arguments[P];for(var I=0,N=N=l;!(I>=N.length);){var Lt=N[I++];for(var Zt in Lt){var Mt=Lt[Zt];v[Zt]=Mt}}return v}}]),_createClass(b,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(v){return v.accepted}).map(function(v){return v})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(v){return!v.accepted}).map(function(v){return v})}},{key:"getFilesWithStatus",value:function(v){return this.files.filter(function(A){return A.status===v}).map(function(A){return A})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(b.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(b.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(b.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(v){return v.status===b.UPLOADING||v.status===b.QUEUED}).map(function(v){return v})}},{key:"init",value:function(){var v=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(b.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&function et(){return v.hiddenFileInput&&v.hiddenFileInput.parentNode.removeChild(v.hiddenFileInput),v.hiddenFileInput=document.createElement("input"),v.hiddenFileInput.setAttribute("type","file"),(null===v.options.maxFiles||v.options.maxFiles>1)&&v.hiddenFileInput.setAttribute("multiple","multiple"),v.hiddenFileInput.className="dz-hidden-input",null!==v.options.acceptedFiles&&v.hiddenFileInput.setAttribute("accept",v.options.acceptedFiles),null!==v.options.capture&&v.hiddenFileInput.setAttribute("capture",v.options.capture),v.hiddenFileInput.style.visibility="hidden",v.hiddenFileInput.style.position="absolute",v.hiddenFileInput.style.top="0",v.hiddenFileInput.style.left="0",v.hiddenFileInput.style.height="0",v.hiddenFileInput.style.width="0",b.getElement(v.options.hiddenInputContainer,"hiddenInputContainer").appendChild(v.hiddenFileInput),v.hiddenFileInput.addEventListener("change",function(){var Lt=v.hiddenFileInput.files;if(Lt.length)for(var Zt=0,Mt=Mt=Lt;;){var Yt;if(Zt>=Mt.length)break;Yt=Mt[Zt++],v.addFile(Yt)}return v.emit("addedfiles",Lt),et()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;for(var A=0,l=l=this.events;;){var P;if(A>=l.length)break;P=l[A++],this.on(P,this.options[P])}this.on("uploadprogress",function(){return v.updateTotalUploadProgress()}),this.on("removedfile",function(){return v.updateTotalUploadProgress()}),this.on("canceled",function(et){return v.emit("complete",et)}),this.on("complete",function(et){if(0===v.getAddedFiles().length&&0===v.getUploadingFiles().length&&0===v.getQueuedFiles().length)return setTimeout(function(){return v.emit("queuecomplete")},0)});var N=function(et){return et.stopPropagation(),et.preventDefault?et.preventDefault():et.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(et){return v.emit("dragstart",et)},dragenter:function(et){return N(et),v.emit("dragenter",et)},dragover:function(et){var Lt=void 0;try{Lt=et.dataTransfer.effectAllowed}catch(Zt){}return et.dataTransfer.dropEffect="move"===Lt||"linkMove"===Lt?"move":"copy",N(et),v.emit("dragover",et)},dragleave:function(et){return v.emit("dragleave",et)},drop:function(et){return N(et),v.drop(et)},dragend:function(et){return v.emit("dragend",et)}}}],this.clickableElements.forEach(function(et){return v.listeners.push({element:et,events:{click:function(Lt){return(et!==v.element||Lt.target===v.element||b.elementInside(Lt.target,v.element.querySelector(".dz-message")))&&v.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,b.instances.splice(b.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var v=void 0,A=0,l=0;if(this.getActiveFiles().length){for(var P=0,I=I=this.getActiveFiles();;){var N;if(P>=I.length)break;A+=(N=I[P++]).upload.bytesSent,l+=N.upload.total}v=100*A/l}else v=100;return this.emit("totaluploadprogress",v,l,A)}},{key:"_getParamName",value:function(v){return"function"==typeof this.options.paramName?this.options.paramName(v):this.options.paramName+(this.options.uploadMultiple?"["+v+"]":"")}},{key:"_renameFile",value:function(v){return"function"!=typeof this.options.renameFile?v.name:this.options.renameFile(v)}},{key:"getFallbackForm",value:function(){var v,A=void 0;if(v=this.getExistingFallback())return v;var l='<div class="dz-fallback">';this.options.dictFallbackText&&(l+="<p>"+this.options.dictFallbackText+"</p>"),l+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var P=b.createElement(l);return"FORM"!==this.element.tagName?(A=b.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(P):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=A?A:P}},{key:"getExistingFallback",value:function(){for(var v=["div","form"],A=0;A<v.length;A++){var l;if(l=function(I){for(var N=0,et=et=I;!(N>=et.length);){var Zt=et[N++];if(/(^| )fallback($| )/.test(Zt.className))return Zt}}(this.element.getElementsByTagName(v[A])))return l}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(v){return function(){var A=[];for(var l in v.events)A.push(v.element.addEventListener(l,v.events[l],!1));return A}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(v){return function(){var A=[];for(var l in v.events)A.push(v.element.removeEventListener(l,v.events[l],!1));return A}()})}},{key:"disable",value:function(){var v=this;return this.clickableElements.forEach(function(A){return A.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(A){return v.cancelUpload(A)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(v){return v.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(v){var A=0,l="b";if(v>0){for(var P=["tb","gb","mb","kb","b"],I=0;I<P.length;I++){var N=P[I];if(v>=Math.pow(this.options.filesizeBase,4-I)/10){A=v/Math.pow(this.options.filesizeBase,4-I),l=N;break}}A=Math.round(10*A)/10}return"<strong>"+A+"</strong> "+this.options.dictFileSizeUnits[l]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(v){if(v.dataTransfer){this.emit("drop",v);for(var A=[],l=0;l<v.dataTransfer.files.length;l++)A[l]=v.dataTransfer.files[l];if(this.emit("addedfiles",A),A.length){var P=v.dataTransfer.items;P&&P.length&&null!=P[0].webkitGetAsEntry?this._addFilesFromItems(P):this.handleFiles(A)}}}},{key:"paste",value:function(v){if(null!=__guard__(null!=v?v.clipboardData:void 0,function(l){return l.items})){this.emit("paste",v);var A=v.clipboardData.items;return A.length?this._addFilesFromItems(A):void 0}}},{key:"handleFiles",value:function(v){for(var A=0,l=l=v;;){var P;if(A>=l.length)break;P=l[A++],this.addFile(P)}}},{key:"_addFilesFromItems",value:function(v){var A=this;return function(){for(var l=[],P=0,I=I=v;!(P>=I.length);){var et,Lt=I[P++];null!=Lt.webkitGetAsEntry&&(et=Lt.webkitGetAsEntry())?l.push(et.isFile?A.addFile(Lt.getAsFile()):et.isDirectory?A._addFilesFromDirectory(et,et.name):void 0):l.push(null==Lt.getAsFile||null!=Lt.kind&&"file"!==Lt.kind?void 0:A.addFile(Lt.getAsFile()))}return l}()}},{key:"_addFilesFromDirectory",value:function(v,A){var l=this,P=v.createReader(),I=function(N){return __guardMethod__(console,"log",function(et){return et.log(N)})};return function N(){return P.readEntries(function(et){if(et.length>0){for(var Lt=0,Zt=Zt=et;!(Lt>=Zt.length);){var Yt=Zt[Lt++];Yt.isFile?Yt.file(function($t){if(!l.options.ignoreHiddenFiles||"."!==$t.name.substring(0,1))return $t.fullPath=A+"/"+$t.name,l.addFile($t)}):Yt.isDirectory&&l._addFilesFromDirectory(Yt,A+"/"+Yt.name)}N()}return null},I)}()}},{key:"accept",value:function(v,A){return this.options.maxFilesize&&v.size>1024*this.options.maxFilesize*1024?A(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(v.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):b.isValidFile(v,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(A(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",v)):this.options.accept.call(this,v,A):A(this.options.dictInvalidFileType)}},{key:"addFile",value:function(v){var A=this;return v.upload={uuid:b.uuidv4(),progress:0,total:v.size,bytesSent:0,filename:this._renameFile(v),chunked:this.options.chunking&&(this.options.forceChunking||v.size>this.options.chunkSize),totalChunkCount:Math.ceil(v.size/this.options.chunkSize)},this.files.push(v),v.status=b.ADDED,this.emit("addedfile",v),this._enqueueThumbnail(v),this.accept(v,function(l){return l?(v.accepted=!1,A._errorProcessing([v],l)):(v.accepted=!0,A.options.autoQueue&&A.enqueueFile(v)),A._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(v){for(var A=0,l=l=v;;){var P;if(A>=l.length)break;P=l[A++],this.enqueueFile(P)}return null}},{key:"enqueueFile",value:function(v){var A=this;if(v.status!==b.ADDED||!0!==v.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(v.status=b.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return A.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(v){var A=this;if(this.options.createImageThumbnails&&v.type.match(/image.*/)&&v.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(v),setTimeout(function(){return A._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var v=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var A=this._thumbnailQueue.shift();return this.createThumbnail(A,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(l){return v.emit("thumbnail",A,l),v._processingThumbnail=!1,v._processThumbnailQueue()})}}},{key:"removeFile",value:function(v){if(v.status===b.UPLOADING&&this.cancelUpload(v),this.files=without(this.files,v),this.emit("removedfile",v),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(v){null==v&&(v=!1);for(var A=0,l=l=this.files.slice();;){var P;if(A>=l.length)break;((P=l[A++]).status!==b.UPLOADING||v)&&this.removeFile(P)}return null}},{key:"resizeImage",value:function(v,A,l,P,I){var N=this;return this.createThumbnail(v,A,l,P,!0,function(et,Lt){if(null==Lt)return I(v);var Zt=N.options.resizeMimeType;null==Zt&&(Zt=v.type);var Mt=Lt.toDataURL(Zt,N.options.resizeQuality);return"image/jpeg"!==Zt&&"image/jpg"!==Zt||(Mt=ExifRestore.restore(v.dataURL,Mt)),I(b.dataURItoBlob(Mt))})}},{key:"createThumbnail",value:function(v,A,l,P,I,N){var et=this,Lt=new FileReader;return Lt.onload=function(){return v.dataURL=Lt.result,"image/svg+xml"===v.type?void(null!=N&&N(Lt.result)):et.createThumbnailFromUrl(v,A,l,P,I,N)},Lt.readAsDataURL(v)}},{key:"createThumbnailFromUrl",value:function(v,A,l,P,I,N,et){var Lt=this,Zt=document.createElement("img");return et&&(Zt.crossOrigin=et),Zt.onload=function(){var Mt=function(Yt){return Yt(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&I&&(Mt=function(Yt){return EXIF.getData(Zt,function(){return Yt(EXIF.getTag(this,"Orientation"))})}),Mt(function(Yt){v.width=Zt.width,v.height=Zt.height;var $t=Lt.options.resize.call(Lt,v,A,l,P),vt=document.createElement("canvas"),lt=vt.getContext("2d");switch(vt.width=$t.trgWidth,vt.height=$t.trgHeight,Yt>4&&(vt.width=$t.trgHeight,vt.height=$t.trgWidth),Yt){case 2:lt.translate(vt.width,0),lt.scale(-1,1);break;case 3:lt.translate(vt.width,vt.height),lt.rotate(Math.PI);break;case 4:lt.translate(0,vt.height),lt.scale(1,-1);break;case 5:lt.rotate(.5*Math.PI),lt.scale(1,-1);break;case 6:lt.rotate(.5*Math.PI),lt.translate(0,-vt.width);break;case 7:lt.rotate(.5*Math.PI),lt.translate(vt.height,-vt.width),lt.scale(-1,1);break;case 8:lt.rotate(-.5*Math.PI),lt.translate(-vt.height,0)}drawImageIOSFix(lt,Zt,null!=$t.srcX?$t.srcX:0,null!=$t.srcY?$t.srcY:0,$t.srcWidth,$t.srcHeight,null!=$t.trgX?$t.trgX:0,null!=$t.trgY?$t.trgY:0,$t.trgWidth,$t.trgHeight);var Vt=vt.toDataURL("image/png");if(null!=N)return N(Vt,vt)})},null!=N&&(Zt.onerror=N),Zt.src=v.dataURL}},{key:"processQueue",value:function(){var v=this.options.parallelUploads,A=this.getUploadingFiles().length,l=A;if(!(A>=v)){var P=this.getQueuedFiles();if(P.length>0){if(this.options.uploadMultiple)return this.processFiles(P.slice(0,v-A));for(;l<v;){if(!P.length)return;this.processFile(P.shift()),l++}}}}},{key:"processFile",value:function(v){return this.processFiles([v])}},{key:"processFiles",value:function(v){for(var A=0,l=l=v;!(A>=l.length);){var I=l[A++];I.processing=!0,I.status=b.UPLOADING,this.emit("processing",I)}return this.options.uploadMultiple&&this.emit("processingmultiple",v),this.uploadFiles(v)}},{key:"_getFilesWithXhr",value:function(v){return this.files.filter(function(A){return A.xhr===v}).map(function(A){return A})}},{key:"cancelUpload",value:function(v){if(v.status===b.UPLOADING){for(var A=this._getFilesWithXhr(v.xhr),l=0,P=P=A;!(l>=P.length);)P[l++].status=b.CANCELED;void 0!==v.xhr&&v.xhr.abort();for(var N=0,et=et=A;;){var Lt;if(N>=et.length)break;Lt=et[N++],this.emit("canceled",Lt)}this.options.uploadMultiple&&this.emit("canceledmultiple",A)}else v.status!==b.ADDED&&v.status!==b.QUEUED||(v.status=b.CANCELED,this.emit("canceled",v),this.options.uploadMultiple&&this.emit("canceledmultiple",[v]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(v){if("function"==typeof v){for(var A=arguments.length,l=Array(A>1?A-1:0),P=1;P<A;P++)l[P-1]=arguments[P];return v.apply(this,l)}return v}},{key:"uploadFile",value:function(v){return this.uploadFiles([v])}},{key:"uploadFiles",value:function(v){var A=this;this._transformFiles(v,function(l){if(v[0].upload.chunked){var P=v[0],I=l[0];P.upload.chunks=[];var et=function(){for(var Yt=0;void 0!==P.upload.chunks[Yt];)Yt++;if(!(Yt>=P.upload.totalChunkCount)){var $t=Yt*A.options.chunkSize,vt=Math.min($t+A.options.chunkSize,P.size),lt={name:A._getParamName(0),data:I.webkitSlice?I.webkitSlice($t,vt):I.slice($t,vt),filename:P.upload.filename,chunkIndex:Yt};P.upload.chunks[Yt]={file:P,index:Yt,dataBlock:lt,status:b.UPLOADING,progress:0,retries:0},A._uploadData(v,[lt])}};if(P.upload.finishedChunkUpload=function(Yt){var $t=!0;Yt.status=b.SUCCESS,Yt.dataBlock=null,Yt.xhr=null;for(var vt=0;vt<P.upload.totalChunkCount;vt++){if(void 0===P.upload.chunks[vt])return et();P.upload.chunks[vt].status!==b.SUCCESS&&($t=!1)}$t&&A.options.chunksUploaded(P,function(){A._finished(v,"",null)})},A.options.parallelChunkUploads)for(var Lt=0;Lt<P.upload.totalChunkCount;Lt++)et();else et()}else{for(var Zt=[],Mt=0;Mt<v.length;Mt++)Zt[Mt]={name:A._getParamName(Mt),data:l[Mt],filename:v[Mt].upload.filename};A._uploadData(v,Zt)}})}},{key:"_getChunk",value:function(v,A){for(var l=0;l<v.upload.totalChunkCount;l++)if(void 0!==v.upload.chunks[l]&&v.upload.chunks[l].xhr===A)return v.upload.chunks[l]}},{key:"_uploadData",value:function(v,A){for(var l=this,P=new XMLHttpRequest,I=0,N=N=v;!(I>=N.length);)N[I++].xhr=P;v[0].upload.chunked&&(v[0].upload.chunks[A[0].chunkIndex].xhr=P);var Lt=this.resolveOption(this.options.method,v),Zt=this.resolveOption(this.options.url,v);P.open(Lt,Zt,!0),P.timeout=this.resolveOption(this.options.timeout,v),P.withCredentials=!!this.options.withCredentials,P.onload=function(ti){l._finishedUploading(v,P,ti)},P.onerror=function(){l._handleUploadError(v,P)},(null!=P.upload?P.upload:P).onprogress=function(ti){return l._updateFilesUploadProgress(v,P,ti)};var Mt={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var Yt in this.options.headers&&b.extend(Mt,this.options.headers),Mt){var $t=Mt[Yt];$t&&P.setRequestHeader(Yt,$t)}var vt=new FormData;if(this.options.params){var lt=this.options.params;for(var Vt in"function"==typeof lt&&(lt=lt.call(this,v,P,v[0].upload.chunked?this._getChunk(v[0],P):null)),lt)vt.append(Vt,lt[Vt])}for(var Ze=0,Ye=Ye=v;;){var Ui;if(Ze>=Ye.length)break;Ui=Ye[Ze++],this.emit("sending",Ui,P,vt)}this.options.uploadMultiple&&this.emit("sendingmultiple",v,P,vt),this._addFormElementData(vt);for(var Wi=0;Wi<A.length;Wi++){var Ti=A[Wi];vt.append(Ti.name,Ti.data,Ti.filename)}this.submitRequest(P,vt,v)}},{key:"_transformFiles",value:function(v,A){for(var l=this,P=[],I=0,N=0;N<v.length;N++)!function(et){l.options.transformFile.call(l,v[et],function(Lt){P[et]=Lt,++I===v.length&&A(P)})}(N)}},{key:"_addFormElementData",value:function(v){if("FORM"===this.element.tagName)for(var A=0,l=l=this.element.querySelectorAll("input, textarea, select, button");!(A>=l.length);){var I=l[A++],N=I.getAttribute("name"),et=I.getAttribute("type");if(et&&(et=et.toLowerCase()),null!=N)if("SELECT"===I.tagName&&I.hasAttribute("multiple"))for(var Lt=0,Zt=Zt=I.options;;){var Mt;if(Lt>=Zt.length)break;(Mt=Zt[Lt++]).selected&&v.append(N,Mt.value)}else(!et||"checkbox"!==et&&"radio"!==et||I.checked)&&v.append(N,I.value)}}},{key:"_updateFilesUploadProgress",value:function(v,A,l){var P=void 0;if(void 0!==l){if(P=100*l.loaded/l.total,v[0].upload.chunked){var I=v[0],N=this._getChunk(I,A);N.progress=P,N.total=l.total,N.bytesSent=l.loaded,I.upload.progress=0,I.upload.total=0,I.upload.bytesSent=0;for(var et=0;et<I.upload.totalChunkCount;et++)void 0!==I.upload.chunks[et]&&void 0!==I.upload.chunks[et].progress&&(I.upload.progress+=I.upload.chunks[et].progress,I.upload.total+=I.upload.chunks[et].total,I.upload.bytesSent+=I.upload.chunks[et].bytesSent);I.upload.progress=I.upload.progress/I.upload.totalChunkCount}else for(var Lt=0,Zt=Zt=v;!(Lt>=Zt.length);){var Yt=Zt[Lt++];Yt.upload.progress=P,Yt.upload.total=l.total,Yt.upload.bytesSent=l.loaded}for(var $t=0,vt=vt=v;;){var lt;if($t>=vt.length)break;lt=vt[$t++],this.emit("uploadprogress",lt,lt.upload.progress,lt.upload.bytesSent)}}else{var xe=!0;P=100;for(var Ze=0,Ye=Ye=v;!(Ze>=Ye.length);){var q=Ye[Ze++];100===q.upload.progress&&q.upload.bytesSent===q.upload.total||(xe=!1),q.upload.progress=P,q.upload.bytesSent=q.upload.total}if(xe)return;for(var Wi=0,Ti=Ti=v;;){var ti;if(Wi>=Ti.length)break;ti=Ti[Wi++],this.emit("uploadprogress",ti,P,ti.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(v,A,l){var P=void 0;if(v[0].status!==b.CANCELED&&4===A.readyState){if("arraybuffer"!==A.responseType&&"blob"!==A.responseType&&(P=A.responseText,A.getResponseHeader("content-type")&&~A.getResponseHeader("content-type").indexOf("application/json")))try{P=JSON.parse(P)}catch(I){l=I,P="Invalid JSON response from server."}this._updateFilesUploadProgress(v),200<=A.status&&A.status<300?v[0].upload.chunked?v[0].upload.finishedChunkUpload(this._getChunk(v[0],A)):this._finished(v,P,l):this._handleUploadError(v,A,P)}}},{key:"_handleUploadError",value:function(v,A,l){if(v[0].status!==b.CANCELED){if(v[0].upload.chunked&&this.options.retryChunks){var P=this._getChunk(v[0],A);if(P.retries++<this.options.retryChunksLimit)return void this._uploadData(v,[P.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var I=0,N=N=v;!(I>=N.length);)I++,this._errorProcessing(v,l||this.options.dictResponseError.replace("{{statusCode}}",A.status),A)}}},{key:"submitRequest",value:function(v,A,l){v.send(A)}},{key:"_finished",value:function(v,A,l){for(var P=0,I=I=v;!(P>=I.length);){var et=I[P++];et.status=b.SUCCESS,this.emit("success",et,A,l),this.emit("complete",et)}if(this.options.uploadMultiple&&(this.emit("successmultiple",v,A,l),this.emit("completemultiple",v)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(v,A,l){for(var P=0,I=I=v;!(P>=I.length);){var et=I[P++];et.status=b.ERROR,this.emit("error",et,A,l),this.emit("complete",et)}if(this.options.uploadMultiple&&(this.emit("errormultiple",v,A,l),this.emit("completemultiple",v)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(v){var A=16*Math.random()|0;return("x"===v?A:3&A|8).toString(16)})}}]),b}();Dropzone.initClass(),Dropzone.version="5.5.0",Dropzone.options={},Dropzone.optionsForElement=function(F){return F.getAttribute("id")?Dropzone.options[camelize(F.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(F){if("string"==typeof F&&(F=document.querySelector(F)),null==(null!=F?F.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return F.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var F=void 0;if(document.querySelectorAll)F=document.querySelectorAll(".dropzone");else{F=[];var b=function(v){return function(){for(var A=[],l=0,P=P=v;!(l>=P.length);){var N=P[l++];/(^| )dropzone($| )/.test(N.className)?A.push(F.push(N)):A.push(void 0)}return A}()};b(document.getElementsByTagName("div")),b(document.getElementsByTagName("form"))}return function(){for(var v=[],A=0,l=l=F;!(A>=l.length);){var I=l[A++];!1!==Dropzone.optionsForElement(I)?v.push(new Dropzone(I)):v.push(void 0)}return v}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var F=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var b=0,v=v=Dropzone.blacklistedBrowsers;!(b>=v.length);)v[b++].test(navigator.userAgent)&&(F=!1);else F=!1;else F=!1;return F},Dropzone.dataURItoBlob=function(F){for(var b=atob(F.split(",")[1]),v=F.split(",")[0].split(":")[1].split(";")[0],A=new ArrayBuffer(b.length),l=new Uint8Array(A),P=0,I=b.length,N=0<=I;N?P<=I:P>=I;N?P++:P--)l[P]=b.charCodeAt(P);return new Blob([A],{type:v})};var without=function(F,b){return F.filter(function(v){return v!==b}).map(function(v){return v})},camelize=function(F){return F.replace(/[\-_](\w)/g,function(b){return b.charAt(1).toUpperCase()})};Dropzone.createElement=function(F){var b=document.createElement("div");return b.innerHTML=F,b.childNodes[0]},Dropzone.elementInside=function(F,b){if(F===b)return!0;for(;F=F.parentNode;)if(F===b)return!0;return!1},Dropzone.getElement=function(F,b){var v=void 0;if("string"==typeof F?v=document.querySelector(F):null!=F.nodeType&&(v=F),null==v)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");return v},Dropzone.getElements=function(F,b){var v=void 0,A=void 0;if(F instanceof Array){A=[];try{for(var l=0,P=P=F;!(l>=P.length);)v=P[l++],A.push(this.getElement(v,b))}catch(et){A=null}}else if("string"==typeof F){A=[];for(var I=0,N=N=document.querySelectorAll(F);!(I>=N.length);)v=N[I++],A.push(v)}else null!=F.nodeType&&(A=[F]);if(null==A||!A.length)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return A},Dropzone.confirm=function(F,b,v){return window.confirm(F)?b():null!=v?v():void 0},Dropzone.isValidFile=function(F,b){if(!b)return!0;b=b.split(",");for(var v=F.type,A=v.replace(/\/.*$/,""),l=0,P=P=b;!(l>=P.length);){var N=P[l++];if("."===(N=N.trim()).charAt(0)){if(-1!==F.name.toLowerCase().indexOf(N.toLowerCase(),F.name.length-N.length))return!0}else if(/\/\*$/.test(N)){if(A===N.replace(/\/.*$/,""))return!0}else if(v===N)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(F){return this.each(function(){return new Dropzone(this,F)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function(F){var b=F.naturalHeight,v=document.createElement("canvas");v.width=1,v.height=b;var A=v.getContext("2d");A.drawImage(F,0,0);for(var P=A.getImageData(1,0,1,b).data,I=0,N=b,et=b;et>I;)0===P[4*(et-1)+3]?N=et:I=et,et=N+I>>1;var Lt=et/b;return 0===Lt?1:Lt},drawImageIOSFix=function(F,b,v,A,l,P,I,N,et,Lt){var Zt=detectVerticalSquash(b);return F.drawImage(b,v,A,l,P,I,N,et,Lt/Zt)},ExifRestore=function(){function F(){_classCallCheck(this,F)}return _createClass(F,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(b){for(var v="",A=void 0,l=void 0,P="",I=void 0,N=void 0,et=void 0,Lt="",Zt=0;I=(A=b[Zt++])>>2,N=(3&A)<<4|(l=b[Zt++])>>4,et=(15&l)<<2|(P=b[Zt++])>>6,Lt=63&P,isNaN(l)?et=Lt=64:isNaN(P)&&(Lt=64),v=v+this.KEY_STR.charAt(I)+this.KEY_STR.charAt(N)+this.KEY_STR.charAt(et)+this.KEY_STR.charAt(Lt),A=l=P="",I=N=et=Lt="",Zt<b.length;);return v}},{key:"restore",value:function(b,v){if(!b.match("data:image/jpeg;base64,"))return v;var A=this.decode64(b.replace("data:image/jpeg;base64,","")),l=this.slice2Segments(A),P=this.exifManipulation(v,l);return"data:image/jpeg;base64,"+this.encode64(P)}},{key:"exifManipulation",value:function(b,v){var A=this.getExifArray(v),l=this.insertExif(b,A);return new Uint8Array(l)}},{key:"getExifArray",value:function(b){for(var v=void 0,A=0;A<b.length;){if(255===(v=b[A])[0]&225===v[1])return v;A++}return[]}},{key:"insertExif",value:function(b,v){var A=b.replace("data:image/jpeg;base64,",""),l=this.decode64(A),P=l.indexOf(255,3),I=l.slice(0,P),N=l.slice(P);return I.concat(v).concat(N)}},{key:"slice2Segments",value:function(b){for(var v=0,A=[];!(255===b[v]&218===b[v+1]);){if(255===b[v]&216===b[v+1])v+=2;else{var P=v+(256*b[v+2]+b[v+3])+2,I=b.slice(v,P);A.push(I),v=P}if(v>b.length)break}return A}},{key:"decode64",value:function(b){var A=void 0,l="",P=void 0,I=void 0,N=void 0,et="",Lt=0,Zt=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(b)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");P=this.KEY_STR.indexOf(b.charAt(Lt++)),A=(15&(I=this.KEY_STR.indexOf(b.charAt(Lt++))))<<4|(N=this.KEY_STR.indexOf(b.charAt(Lt++)))>>2,l=(3&N)<<6|(et=this.KEY_STR.indexOf(b.charAt(Lt++))),Zt.push(P<<2|I>>4),64!==N&&Zt.push(A),64!==et&&Zt.push(l),A=l="",P=I=N=et="",Lt<b.length;);return Zt}}]),F}();ExifRestore.initClass();var contentLoaded=function(F,b){var v=!1,A=!0,l=F.document,P=l.documentElement,I=l.addEventListener?"addEventListener":"attachEvent",N=l.addEventListener?"removeEventListener":"detachEvent",et=l.addEventListener?"":"on",Lt=function Zt(Mt){if("readystatechange"!==Mt.type||"complete"===l.readyState)return("load"===Mt.type?F:l)[N](et+Mt.type,Zt,!1),!v&&(v=!0)?b.call(F,Mt.type||Mt):void 0};if("complete"!==l.readyState){if(l.createEventObject&&P.doScroll){try{A=!F.frameElement}catch(Zt){}A&&function Zt(){try{P.doScroll("left")}catch(Mt){return void setTimeout(Zt,50)}return Lt("poll")}()}return l[I](et+"DOMContentLoaded",Lt,!1),l[I](et+"readystatechange",Lt,!1),F[I](et+"load",Lt,!1)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction),function(F,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(F=F||self).mapboxgl=b()}(this,function(){"use strict";var F,b,v;function A(l,P){if(F)if(b){var I="var sharedChunk = {}; ("+F+")(sharedChunk); ("+b+")(sharedChunk);",N={};F(N),(v=P(N)).workerUrl=window.URL.createObjectURL(new Blob([I],{type:"text/javascript"}))}else b=P;else F=P}return A(0,function(l){function P(t,e){return t(e={exports:{}},e.exports),e.exports}var I=N;function N(t,e,i,a){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(a-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=a,this.p2x=i,this.p2y=a}N.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},N.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},N.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},N.prototype.solveCurveX=function(t,e){var i,a,u,c,h;for(void 0===e&&(e=1e-6),u=t,h=0;h<8;h++){if(c=this.sampleCurveX(u)-t,Math.abs(c)<e)return u;var m=this.sampleCurveDerivativeX(u);if(Math.abs(m)<1e-6)break;u-=c/m}if((u=t)<(i=0))return i;if(u>(a=1))return a;for(;i<a;){if(c=this.sampleCurveX(u),Math.abs(c-t)<e)return u;t>c?i=u:a=u,u=.5*(a-i)+i}return u},N.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var et=Lt;function Lt(t,e){this.x=t,this.y=e}function Zt(t,e,i,a){var u=new I(t,e,i,a);return function(c){return u.solve(c)}}Lt.prototype={clone:function(){return new Lt(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var i=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),u=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=u,this},_rotateAround:function(t,e){var i=Math.cos(t),a=Math.sin(t),c=e.y+a*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-a*(this.y-e.y),this.y=c,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Lt.convert=function(t){return t instanceof Lt?t:Array.isArray(t)?new Lt(t[0],t[1]):t};var Mt=Zt(.25,.1,.25,1);function Yt(t,e,i){return Math.min(i,Math.max(e,t))}function $t(t,e,i){var a=i-e,u=((t-e)%a+a)%a+e;return u===e?i:u}function vt(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var a=0,u=e;a<u.length;a+=1){var c=u[a];for(var h in c)t[h]=c[h]}return t}var lt=1;function Vt(){return lt++}function xe(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function Ze(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function Ye(t,e){t.forEach(function(i){e[i]&&(e[i]=e[i].bind(e))})}function Ui(t,e){return-1!==t.indexOf(e,t.length-e.length)}function q(t,e,i){var a={};for(var u in t)a[u]=e.call(i||this,t[u],u,t);return a}function Wi(t,e,i){var a={};for(var u in t)e.call(i||this,t[u],u,t)&&(a[u]=t[u]);return a}function Ti(t){return Array.isArray(t)?t.map(Ti):"object"==typeof t&&t?q(t,Ti):t}var ti={};function ae(t){ti[t]||("undefined"!=typeof console&&console.warn(t),ti[t]=!0)}function zt(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function Ht(t){for(var e=0,i=0,a=t.length,u=a-1,c=void 0,h=void 0;i<a;u=i++)e+=((h=t[u]).x-(c=t[i]).x)*(c.y+h.y);return e}function ht(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function mt(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(a,u,c,h){var m=c||h;return e[u]=!m||m.toLowerCase(),""}),e["max-age"]){var i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e}var rt=null;function J(t){if(null==rt){var e=t.navigator?t.navigator.userAgent:null;rt=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return rt}function d(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(i){return!1}}var Pt,Et,se,Ie,ei=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),_e=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Ri=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Gi={now:ei,frame:function(t){var e=_e(t);return{cancel:function(){return Ri(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var i=self.document.createElement("canvas"),a=i.getContext("2d");if(!a)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,a.drawImage(t,0,0,t.width,t.height),a.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return Pt||(Pt=self.document.createElement("a")),Pt.href=t,Pt.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==Et&&(Et=self.matchMedia("(prefers-reduced-motion: reduce)")),Et.matches)}},_i={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Hr={supported:!1,testSupport:function(t){Tr||!Ie||(sr?Tn(t):se=t)}},Tr=!1,sr=!1;function Tn(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,Ie),t.isContextLost())return;Hr.supported=!0}catch(i){}t.deleteTexture(e),Tr=!0}self.document&&((Ie=self.document.createElement("img")).onload=function(){se&&Tn(se),se=null,sr=!0},Ie.onerror=function(){Tr=!0,se=null},Ie.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ln="01",Dt=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function Ft(t){return 0===t.indexOf("mapbox:")}Dt.prototype._createSkuToken=function(){var t=function(){for(var e="",i=0;i<10;i++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ln,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},Dt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Dt.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},Dt.prototype.normalizeStyleURL=function(t,e){if(!Ft(t))return t;var i=Rt(t);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},Dt.prototype.normalizeGlyphsURL=function(t,e){if(!Ft(t))return t;var i=Rt(t);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},Dt.prototype.normalizeSourceURL=function(t,e){if(!Ft(t))return t;var i=Rt(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)},Dt.prototype.normalizeSpriteURL=function(t,e,i,a){var u=Rt(t);return Ft(t)?(u.path="/styles/v1"+u.path+"/sprite"+e+i,this._makeAPIURL(u,this._customAccessToken||a)):(u.path+=""+e+i,me(u))},Dt.prototype.normalizeTileURL=function(t,e,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),!e||!Ft(e))return t;var a=Rt(t);return a.path=a.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Gi.devicePixelRatio>=2||512===i?"@2x":"")+(Hr.supported?".webp":"$1")),a.path=a.path.replace(/^.+\/v4\//,"/"),a.path="/v4"+a.path,_i.REQUIRE_ACCESS_TOKEN&&(_i.ACCESS_TOKEN||this._customAccessToken)&&this._skuToken&&a.params.push("sku="+this._skuToken),this._makeAPIURL(a,this._customAccessToken)},Dt.prototype.canonicalizeTileURL=function(t){var e=Rt(t);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(/\.[\w]+$/))return t;var i="mapbox://tiles/";i+=e.path.replace("/v4/","");var a=e.params.filter(function(u){return!u.match(/^access_token=/)});return a.length&&(i+="?"+a.join("&")),i},Dt.prototype.canonicalizeTileset=function(t,e){if(!Ft(e))return t.tiles||[];for(var i=[],a=0,u=t.tiles;a<u.length;a+=1){var h=this.canonicalizeTileURL(u[a]);i.push(h)}return i},Dt.prototype._makeAPIURL=function(t,e){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",a=Rt(_i.API_URL);if(t.protocol=a.protocol,t.authority=a.authority,"/"!==a.path&&(t.path=""+a.path+t.path),!_i.REQUIRE_ACCESS_TOKEN)return me(t);if(!(e=e||_i.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return t.params=t.params.filter(function(u){return-1===u.indexOf("access_token")}),t.params.push("access_token="+e),me(t)};var Fe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Le(t){return Fe.test(t)}var st=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Rt(t){var e=t.match(st);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function me(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function Me(t){if(!t)return null;var i=t.split(".");if(!i||3!==i.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(i[1]).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(a){return null}}var ii=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ii.prototype.getStorageKey=function(t){var i=Me(_i.ACCESS_TOKEN),a="";return a=i&&i.u?self.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(u,c){return String.fromCharCode(Number("0x"+c))})):_i.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+a:"mapbox.eventData:"+a},ii.prototype.fetchEventData=function(){var t=d("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{var a=self.localStorage.getItem(e);a&&(this.eventData=JSON.parse(a));var u=self.localStorage.getItem(i);u&&(this.anonId=u)}catch(c){ae("Unable to read from LocalStorage")}},ii.prototype.saveEventData=function(){var t=d("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(a){ae("Unable to write to LocalStorage")}},ii.prototype.processRequests=function(t){},ii.prototype.postEvent=function(t,e,i,a){var u=this;if(_i.EVENTS_URL){var c=Rt(_i.EVENTS_URL);c.params.push("access_token="+(a||_i.ACCESS_TOKEN||""));var h={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.7.0",skuId:Ln,userId:this.anonId},m=e?vt(h,e):h,_={url:me(c),headers:{"Content-Type":"text/plain"},body:JSON.stringify([m])};this.pendingRequest=wi(_,function(T){u.pendingRequest=null,i(T),u.saveEventData(),u.processRequests(a)})}},ii.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var re,Bt,Kt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(i,a,u,c){this.skuToken=u,(_i.EVENTS_URL&&c||_i.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(h){return Ft(h)||Le(h)}))&&this.queueRequest({id:a,timestamp:Date.now()},c)},e.prototype.processRequests=function(i){var a=this;if(!this.pendingRequest&&0!==this.queue.length){var u=this.queue.shift(),c=u.id,h=u.timestamp;c&&this.success[c]||(this.anonId||this.fetchEventData(),Ze(this.anonId)||(this.anonId=xe()),this.postEvent(h,{skuToken:this.skuToken},function(m){m||c&&(a.success[c]=!0)},i))}},e}(ii),ne=new(function(t){function e(i){t.call(this,"appUserTurnstile"),this._customAccessToken=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(i,a){_i.EVENTS_URL&&_i.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(u){return Ft(u)||Le(u)})&&this.queueRequest(Date.now(),a)},e.prototype.processRequests=function(i){var a=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var u=Me(_i.ACCESS_TOKEN),c=u?u.u:_i.ACCESS_TOKEN,h=c!==this.eventData.tokenU;Ze(this.anonId)||(this.anonId=xe(),h=!0);var m=this.queue.shift();if(this.eventData.lastSuccess){var _=new Date(this.eventData.lastSuccess),T=new Date(m),C=(m-this.eventData.lastSuccess)/864e5;h=h||C>=1||C<-1||_.getDate()!==T.getDate()}else h=!0;if(!h)return this.processRequests();this.postEvent(m,{"enabled.telemetry":!1},function(M){M||(a.eventData.lastSuccess=m,a.eventData.tokenU=c)},i)}},e}(ii)),Pe=ne.postTurnstileEvent.bind(ne),oi=new Kt,Ci=oi.postMapLoadEvent.bind(oi),ar="mapbox-tiles",tr=500,Qr=50;function Xr(){self.caches&&!re&&(re=self.caches.open(ar))}function xt(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var Wt,ue=1/0;function We(){return null==Wt&&(Wt=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Wt}var ri={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ri);var Ne=function(t){function e(i,a,u){401===a&&Le(u)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,i),this.status=a,this.url=u,this.name=this.constructor.name,this.message=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),zi=ht()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};var Li,cr,Ni=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(zi())&&!/^\w+:/.test(i))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function Fi(t,e){var i,a=new self.AbortController,u=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:zi(),signal:a.signal}),c=!1,h=!1,m=(i=u.url).indexOf("sku=")>0&&Le(i);"json"===t.type&&u.headers.set("Accept","application/json");var _=function(C,M,R){if(!h){if(C&&"SecurityError"!==C.message&&ae(C),M&&R)return T(M);var O=Date.now();self.fetch(u).then(function(B){if(B.ok){var Y=m?B.clone():null;return T(B,Y,O)}return e(new Ne(B.statusText,B.status,t.url))}).catch(function(B){20!==B.code&&e(new Error(B.message))})}},T=function(C,M,R){("arrayBuffer"===t.type?C.arrayBuffer():"json"===t.type?C.json():C.text()).then(function(O){h||(M&&R&&function dn(t,e,i){if(Xr(),re){var a={status:e.status,statusText:e.statusText,headers:new self.Headers};e.headers.forEach(function(c,h){return a.headers.set(h,c)});var u=mt(e.headers.get("Cache-Control")||"");u["no-store"]||(u["max-age"]&&a.headers.set("Expires",new Date(i+1e3*u["max-age"]).toUTCString()),new Date(a.headers.get("Expires")).getTime()-i<42e4||function(c,h){if(void 0===Bt)try{new Response(new ReadableStream),Bt=!0}catch(m){Bt=!1}Bt?h(c.body):c.blob().then(h)}(e,function(c){var h=new self.Response(c,a);Xr(),re&&re.then(function(m){return m.put(xt(t.url),h)}).catch(function(m){return ae(m.message)})}))}}(u,M,R),c=!0,e(null,O,C.headers.get("Cache-Control"),C.headers.get("Expires")))}).catch(function(O){h||e(new Error(O.message))})};return m?function pt(t,e){if(Xr(),!re)return e(null);var i=xt(t.url);re.then(function(a){a.match(i).then(function(u){var c=function(h){if(!h)return!1;var m=new Date(h.headers.get("Expires")||0),_=mt(h.headers.get("Cache-Control")||"");return m>Date.now()&&!_["no-cache"]}(u);a.delete(i),c&&a.put(i,u.clone()),e(null,u,c)}).catch(e)}).catch(e)}(u,_):_(null,null),{cancel:function(){h=!0,c||a.abort()}}}(t,e);if(ht()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(a,u){var c=new self.XMLHttpRequest;for(var h in c.open(a.method||"GET",a.url,!0),"arrayBuffer"===a.type&&(c.responseType="arraybuffer"),a.headers)c.setRequestHeader(h,a.headers[h]);return"json"===a.type&&(c.responseType="text",c.setRequestHeader("Accept","application/json")),c.withCredentials="include"===a.credentials,c.onerror=function(){u(new Error(c.statusText))},c.onload=function(){if((c.status>=200&&c.status<300||0===c.status)&&null!==c.response){var m=c.response;if("json"===a.type)try{m=JSON.parse(c.response)}catch(_){return u(_)}u(null,m,c.getResponseHeader("Cache-Control"),c.getResponseHeader("Expires"))}else u(new Ne(c.statusText,c.status,a.url))},c.send(a.body),{cancel:function(){return c.abort()}}}(t,e)},Ii=function(t,e){return Ni(vt(t,{type:"arrayBuffer"}),e)},wi=function(t,e){return Ni(vt(t,{method:"POST"}),e)};Li=[],cr=0;var Mi=function(t,e){if(Hr.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),cr>=_i.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return Li.push(i),i}cr++;var a=!1,u=function(){if(!a)for(a=!0,cr--;Li.length&&cr<_i.MAX_PARALLEL_IMAGE_REQUESTS;){var h=Li.shift();h.cancelled||(h.cancel=Mi(h.requestParameters,h.callback).cancel)}},c=Ii(t,function(h,m,_,T){var M,R;u(),h?e(h):m&&(We()?(M=e,R=new self.Blob([new Uint8Array(m)],{type:"image/png"}),self.createImageBitmap(R).then(function(O){M(null,O)}).catch(function(O){M(new Error("Could not load image because of "+O.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(C,M,R,O){var B=new self.Image,Y=self.URL;B.onload=function(){M(null,B),Y.revokeObjectURL(B.src)},B.onerror=function(){return M(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var it=new self.Blob([new Uint8Array(C)],{type:"image/png"});B.cacheControl=R,B.expires=O,B.src=C.byteLength?Y.createObjectURL(it):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(m,e,_,T))});return{cancel:function(){c.cancel(),u()}}};function qi(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function _r(t,e,i){if(i&&i[t]){var a=i[t].indexOf(e);-1!==a&&i[t].splice(a,1)}}var ji=function(t,e){void 0===e&&(e={}),vt(this,e),this.type=t},Zr=function(t){function e(i,a){void 0===a&&(a={}),t.call(this,"error",vt({error:i},a))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(ji),ir=function(){};ir.prototype.on=function(t,e){return this._listeners=this._listeners||{},qi(t,e,this._listeners),this},ir.prototype.off=function(t,e){return _r(t,e,this._listeners),_r(t,e,this._oneTimeListeners),this},ir.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},qi(t,e,this._oneTimeListeners),this},ir.prototype.fire=function(t,e){"string"==typeof t&&(t=new ji(t,e||{}));var i=t.type;if(this.listens(i)){t.target=this;for(var a=0,u=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];a<u.length;a+=1)u[a].call(this,t);for(var c=0,h=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];c<h.length;c+=1){var m=h[c];_r(i,m,this._oneTimeListeners),m.call(this,t)}var _=this._eventedParent;_&&(vt(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),_.fire(t))}else t instanceof Zr&&console.error(t.error);return this},ir.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},ir.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var x={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},E=function(t,e,i,a){this.message=(t?t+": ":"")+i,a&&(this.identifier=a),null!=e&&e.__line__&&(this.line=e.__line__)};function D(t){var i=t.value;return i?[new E(t.key,i,"constants have been deprecated as of v8")]:[]}function j(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var a=0,u=e;a<u.length;a+=1){var c=u[a];for(var h in c)t[h]=c[h]}return t}function K(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function ct(t){if(Array.isArray(t))return t.map(ct);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var i in t)e[i]=ct(t[i]);return e}return K(t)}var yt=function(t){function e(i,a){t.call(this,a),this.message=a,this.key=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),at=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,a=e;i<a.length;i+=1){var u=a[i];this.bindings[u[0]]=u[1]}};at.prototype.concat=function(t){return new at(this,t)},at.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},at.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var nt={kind:"null"},tt={kind:"number"},Ot={kind:"string"},jt={kind:"boolean"},Nt={kind:"color"},fe={kind:"object"},he={kind:"value"},qe={kind:"collator"},Be={kind:"formatted"},ze={kind:"resolvedImage"};function ai(t,e){return{kind:"array",itemType:t,N:e}}function Qe(t){if("array"===t.kind){var e=Qe(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var di=[nt,tt,Ot,jt,Nt,Be,fe,ai(he),ze];function Ei(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Ei(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var i=0,a=di;i<a.length;i+=1)if(!Ei(a[i],e))return null}return"Expected "+Qe(t)+" but found "+Qe(e)+" instead."}var Cr=P(function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(_){return(_=Math.round(_))<0?0:_>255?255:_}function c(_){return a("%"===_[_.length-1]?parseFloat(_)/100*255:parseInt(_))}function h(_){return function u(_){return _<0?0:_>1?1:_}("%"===_[_.length-1]?parseFloat(_)/100:parseFloat(_))}function m(_,T,C){return C<0?C+=1:C>1&&(C-=1),6*C<1?_+(T-_)*C*6:2*C<1?T:3*C<2?_+(T-_)*(2/3-C)*6:_}try{e.parseCSSColor=function(_){var T,C=_.replace(/ /g,"").toLowerCase();if(C in i)return i[C].slice();if("#"===C[0])return 4===C.length?(T=parseInt(C.substr(1),16))>=0&&T<=4095?[(3840&T)>>4|(3840&T)>>8,240&T|(240&T)>>4,15&T|(15&T)<<4,1]:null:7===C.length&&(T=parseInt(C.substr(1),16))>=0&&T<=16777215?[(16711680&T)>>16,(65280&T)>>8,255&T,1]:null;var M=C.indexOf("("),R=C.indexOf(")");if(-1!==M&&R+1===C.length){var O=C.substr(0,M),B=C.substr(M+1,R-(M+1)).split(","),Y=1;switch(O){case"rgba":if(4!==B.length)return null;Y=h(B.pop());case"rgb":return 3!==B.length?null:[c(B[0]),c(B[1]),c(B[2]),Y];case"hsla":if(4!==B.length)return null;Y=h(B.pop());case"hsl":if(3!==B.length)return null;var it=(parseFloat(B[0])%360+360)%360/360,ot=h(B[1]),Tt=h(B[2]),wt=Tt<=.5?Tt*(ot+1):Tt+ot-Tt*ot,It=2*Tt-wt;return[a(255*m(It,wt,it+1/3)),a(255*m(It,wt,it)),a(255*m(It,wt,it-1/3)),Y];default:return null}}return null}}catch(_){}}).parseCSSColor,Ue=function(t,e,i,a){void 0===a&&(a=1),this.r=t,this.g=e,this.b=i,this.a=a};Ue.parse=function(t){if(t){if(t instanceof Ue)return t;if("string"==typeof t){var e=Cr(t);if(e)return new Ue(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Ue.prototype.toString=function(){var t=this.toArray(),i=t[1],a=t[2],u=t[3];return"rgba("+Math.round(t[0])+","+Math.round(i)+","+Math.round(a)+","+u+")"},Ue.prototype.toArray=function(){var a=this.a;return 0===a?[0,0,0,0]:[255*this.r/a,255*this.g/a,255*this.b/a,a]},Ue.black=new Ue(0,0,0,1),Ue.white=new Ue(1,1,1,1),Ue.transparent=new Ue(0,0,0,0),Ue.red=new Ue(1,0,0,1);var Sr=function(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Sr.prototype.compare=function(t,e){return this.collator.compare(t,e)},Sr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var tn=function(t,e,i,a,u){this.text=t,this.image=e,this.scale=i,this.fontStack=a,this.textColor=u},mr=function(t){this.sections=t};mr.fromString=function(t){return new mr([new tn(t,null,null,null,null)])},mr.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},mr.factory=function(t){return t instanceof mr?t:mr.fromString(t)},mr.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},mr.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var a=i[e];if(a.image)t.push(["image",a.image.name]);else{t.push(a.text);var u={};a.fontStack&&(u["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(u["font-scale"]=a.scale),a.textColor&&(u["text-color"]=["rgba"].concat(a.textColor.toArray())),t.push(u)}}return t};var Rr=function(t){this.name=t.name,this.available=t.available};function In(t,e,i,a){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===a||"number"==typeof a&&a>=0&&a<=1?null:"Invalid rgba value ["+[t,e,i,a].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof a?[t,e,i,a]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Xi(t){if(null===t)return nt;if("string"==typeof t)return Ot;if("boolean"==typeof t)return jt;if("number"==typeof t)return tt;if(t instanceof Ue)return Nt;if(t instanceof Sr)return qe;if(t instanceof mr)return Be;if(t instanceof Rr)return ze;if(Array.isArray(t)){for(var e,i=t.length,a=0,u=t;a<u.length;a+=1){var c=Xi(u[a]);if(e){if(e===c)continue;e=he;break}e=c}return ai(e||he,i)}return fe}function vr(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Ue||t instanceof mr||t instanceof Rr?t.toString():JSON.stringify(t)}Rr.prototype.toString=function(){return this.name},Rr.fromString=function(t){return new Rr({name:t,available:!1})},Rr.prototype.serialize=function(){return["image",this.name]};var Hi=function(t,e){this.type=t,this.value=e};Hi.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function c(h){if(null===h||"string"==typeof h||"boolean"==typeof h||"number"==typeof h||h instanceof Ue||h instanceof Sr||h instanceof mr||h instanceof Rr)return!0;if(Array.isArray(h)){for(var m=0,_=h;m<_.length;m+=1)if(!c(_[m]))return!1;return!0}if("object"==typeof h){for(var T in h)if(!c(h[T]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var i=t[1],a=Xi(i),u=e.expectedType;return"array"!==a.kind||0!==a.N||!u||"array"!==u.kind||"number"==typeof u.N&&0!==u.N||(a=u),new Hi(a,i)},Hi.prototype.evaluate=function(){return this.value},Hi.prototype.eachChild=function(){},Hi.prototype.possibleOutputs=function(){return[this.value]},Hi.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ue?["rgba"].concat(this.value.toArray()):this.value instanceof mr?this.value.serialize():this.value};var on=function(t){this.name="ExpressionEvaluationError",this.message=t};on.prototype.toJSON=function(){return this.message};var Ar={string:Ot,number:tt,boolean:jt,object:fe},an=function(t,e){this.type=t,this.args=e};an.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,a=1,u=t[0];if("array"===u){var c,h;if(t.length>2){var m=t[1];if("string"!=typeof m||!(m in Ar)||"object"===m)return e.error('The item type argument of "array" must be one of string, number, boolean',1);c=Ar[m],a++}else c=he;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);h=t[2],a++}i=ai(c,h)}else i=Ar[u];for(var _=[];a<t.length;a++){var T=e.parse(t[a],a,he);if(!T)return null;_.push(T)}return new an(i,_)},an.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!Ei(this.type,Xi(i)))return i;if(e===this.args.length-1)throw new on("Expected value to be of type "+Qe(this.type)+", but found "+Qe(Xi(i))+" instead.")}return null},an.prototype.eachChild=function(t){this.args.forEach(t)},an.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(e){return e.possibleOutputs()}))},an.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);var a=t.N;("number"==typeof a||this.args.length>1)&&e.push(a)}}return e.concat(this.args.map(function(u){return u.serialize()}))};var qn=function(t){this.type=Be,this.sections=t};qn.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var a=[],u=!1,c=1;c<=t.length-1;++c){var h=t[c];if(u&&"object"==typeof h&&!Array.isArray(h)){u=!1;var m=null;if(h["font-scale"]&&!(m=e.parse(h["font-scale"],1,tt)))return null;var _=null;if(h["text-font"]&&!(_=e.parse(h["text-font"],1,ai(Ot))))return null;var T=null;if(h["text-color"]&&!(T=e.parse(h["text-color"],1,Nt)))return null;var C=a[a.length-1];C.scale=m,C.font=_,C.textColor=T}else{var M=e.parse(t[c],1,he);if(!M)return null;var R=M.type.kind;if("string"!==R&&"value"!==R&&"null"!==R&&"resolvedImage"!==R)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,a.push({content:M,scale:null,font:null,textColor:null})}}return new qn(a)},qn.prototype.evaluate=function(t){return new mr(this.sections.map(function(e){var i=e.content.evaluate(t);return Xi(i)===ze?new tn("",i,null,null,null):new tn(vr(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))},qn.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var a=i[e];t(a.content),a.scale&&t(a.scale),a.font&&t(a.font),a.textColor&&t(a.textColor)}},qn.prototype.possibleOutputs=function(){return[void 0]},qn.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var a=i[e];t.push(a.content.serialize());var u={};a.scale&&(u["font-scale"]=a.scale.serialize()),a.font&&(u["text-font"]=a.font.serialize()),a.textColor&&(u["text-color"]=a.textColor.serialize()),t.push(u)}return t};var Zn=function(t){this.type=ze,this.input=t};Zn.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Ot);return i?new Zn(i):e.error("No image name provided.")},Zn.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=!1;return t.availableImages&&t.availableImages.indexOf(e)>-1&&(i=!0),new Rr({name:e,available:i})},Zn.prototype.eachChild=function(t){t(this.input)},Zn.prototype.possibleOutputs=function(){return[void 0]},Zn.prototype.serialize=function(){return["image",this.input.serialize()]};var ns={"to-boolean":jt,"to-color":Nt,"to-number":tt,"to-string":Ot},Wn=function(t,e){this.type=t,this.args=e};Wn.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var a=ns[i],u=[],c=1;c<t.length;c++){var h=e.parse(t[c],c,he);if(!h)return null;u.push(h)}return new Wn(a,u)},Wn.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,i,a=0,u=this.args;a<u.length;a+=1){if(i=null,(e=u[a].evaluate(t))instanceof Ue)return e;if("string"==typeof e){var c=t.parseColor(e);if(c)return c}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":In(e[0],e[1],e[2],e[3])))return new Ue(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new on(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var h=null,m=0,_=this.args;m<_.length;m+=1){if(null===(h=_[m].evaluate(t)))return 0;var T=Number(h);if(!isNaN(T))return T}throw new on("Could not convert "+JSON.stringify(h)+" to number.")}return"formatted"===this.type.kind?mr.fromString(vr(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Rr.fromString(vr(this.args[0].evaluate(t))):vr(this.args[0].evaluate(t))},Wn.prototype.eachChild=function(t){this.args.forEach(t)},Wn.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(e){return e.possibleOutputs()}))},Wn.prototype.serialize=function(){if("formatted"===this.type.kind)return new qn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Zn(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var Ls=["Unknown","Point","LineString","Polygon"],qo=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null};qo.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},qo.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Ls[this.feature.type]:this.feature.type:null},qo.prototype.properties=function(){return this.feature&&this.feature.properties||{}},qo.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Ue.parse(t)),e};var pr=function(t,e,i,a){this.name=t,this.type=e,this._evaluate=i,this.args=a};pr.prototype.evaluate=function(t){return this._evaluate(t,this.args)},pr.prototype.eachChild=function(t){this.args.forEach(t)},pr.prototype.possibleOutputs=function(){return[void 0]},pr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},pr.parse=function(t,e){var i,a=t[0],u=pr.definitions[a];if(!u)return e.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0);for(var c=Array.isArray(u)?u[0]:u.type,h=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,m=h.filter(function(Ke){var Re=Ke[0];return!Array.isArray(Re)||Re.length===t.length-1}),_=null,T=0,C=m;T<C.length;T+=1){var M=C[T],R=M[0],O=M[1];_=new Yo(e.registry,e.path,null,e.scope);for(var B=[],Y=!1,it=1;it<t.length;it++){var ot=t[it],Tt=Array.isArray(R)?R[it-1]:R.type,wt=_.parse(ot,1+B.length,Tt);if(!wt){Y=!0;break}B.push(wt)}if(!Y)if(Array.isArray(R)&&R.length!==B.length)_.error("Expected "+R.length+" arguments, but found "+B.length+" instead.");else{for(var It=0;It<B.length;It++){var qt=Array.isArray(R)?R[It]:R.type,Jt=B[It];_.concat(It+1).checkSubtype(qt,Jt.type)}if(0===_.errors.length)return new pr(a,c,O,B)}}if(1===m.length)(i=e.errors).push.apply(i,_.errors);else{for(var Gt=(m.length?m:h).map(function(Ke){var Re;return Re=Ke[0],Array.isArray(Re)?"("+Re.map(Qe).join(", ")+")":"("+Qe(Re.type)+"...)"}).join(" | "),be=[],He=1;He<t.length;He++){var Oe=e.parse(t[He],1+be.length);if(!Oe)return null;be.push(Qe(Oe.type))}e.error("Expected arguments of type "+Gt+", but found ("+be.join(", ")+") instead.")}return null},pr.register=function(t,e){for(var i in pr.definitions=e,e)t[i]=pr};var xn=function(t,e,i){this.type=qe,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e};function Ea(t){if(t instanceof pr&&("get"===t.name&&1===t.args.length||"feature-state"===t.name||"has"===t.name&&1===t.args.length||"properties"===t.name||"geometry-type"===t.name||"id"===t.name||/^filter-/.test(t.name)))return!1;var e=!0;return t.eachChild(function(i){e&&!Ea(i)&&(e=!1)}),e}function lo(t){if(t instanceof pr&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(i){e&&!lo(i)&&(e=!1)}),e}function os(t,e){if(t instanceof pr&&e.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild(function(a){i&&!os(a,e)&&(i=!1)}),i}xn.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var a=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,jt);if(!a)return null;var u=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,jt);if(!u)return null;var c=null;return i.locale&&!(c=e.parse(i.locale,1,Ot))?null:new xn(a,u,c)},xn.prototype.evaluate=function(t){return new Sr(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},xn.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},xn.prototype.possibleOutputs=function(){return[void 0]},xn.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Do=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Do.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new Do(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Do.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Do.prototype.eachChild=function(){},Do.prototype.possibleOutputs=function(){return[void 0]},Do.prototype.serialize=function(){return["var",this.name]};var Yo=function(t,e,i,a,u){void 0===e&&(e=[]),void 0===a&&(a=new at),void 0===u&&(u=[]),this.registry=t,this.path=e,this.key=e.map(function(c){return"["+c+"]"}).join(""),this.scope=a,this.errors=u,this.expectedType=i};function as(t,e){for(var i,u=t.length-1,c=0,h=u,m=0;c<=h;)if((i=t[m=Math.floor((c+h)/2)])<=e){if(m===u||e<t[m+1])return m;c=m+1}else{if(!(i>e))throw new on("Input is not a number.");h=m-1}return 0}Yo.prototype.parse=function(t,e,i,a,u){return void 0===u&&(u={}),e?this.concat(e,i,a)._parse(t,u):this._parse(t,u)},Yo.prototype._parse=function(t,e){function i(T,C,M){return"assert"===M?new an(C,[T]):"coerce"===M?new Wn(C,[T]):T}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var a=t[0];if("string"!=typeof a)return this.error("Expression name must be a string, but found "+typeof a+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var u=this.registry[a];if(u){var c=u.parse(t,this);if(!c)return null;if(this.expectedType){var h=this.expectedType,m=c.type;if("string"!==h.kind&&"number"!==h.kind&&"boolean"!==h.kind&&"object"!==h.kind&&"array"!==h.kind||"value"!==m.kind)if("color"!==h.kind&&"formatted"!==h.kind&&"resolvedImage"!==h.kind||"value"!==m.kind&&"string"!==m.kind){if(this.checkSubtype(h,m))return null}else c=i(c,h,e.typeAnnotation||"coerce");else c=i(c,h,e.typeAnnotation||"assert")}if(!(c instanceof Hi)&&"resolvedImage"!==c.type.kind&&function T(C){if(C instanceof Do)return T(C.boundExpression);if(C instanceof pr&&"error"===C.name||C instanceof xn)return!1;var M=C instanceof Wn||C instanceof an,R=!0;return C.eachChild(function(O){R=M?R&&T(O):R&&O instanceof Hi}),!!R&&Ea(C)&&os(C,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(c)){var _=new qo;try{c=new Hi(c.type,c.evaluate(_))}catch(T){return this.error(T.message),null}}return c}return this.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Yo.prototype.concat=function(t,e,i){var a="number"==typeof t?this.path.concat(t):this.path,u=i?this.scope.concat(i):this.scope;return new Yo(this.registry,a,e||null,u,this.errors)},Yo.prototype.error=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var a=""+this.key+e.map(function(u){return"["+u+"]"}).join("");this.errors.push(new yt(a,t))},Yo.prototype.checkSubtype=function(t,e){var i=Ei(t,e);return i&&this.error(i),i};var Lo=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var a=0,u=i;a<u.length;a+=1){var c=u[a],m=c[1];this.labels.push(c[0]),this.outputs.push(m)}};function $r(t,e,i){return t*(1-i)+e*i}Lo.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,tt);if(!i)return null;var a=[],u=null;e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=1;c<t.length;c+=2){var h=1===c?-1/0:t[c],m=t[c+1],_=c,T=c+1;if("number"!=typeof h)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_);if(a.length&&a[a.length-1][0]>=h)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_);var C=e.parse(m,T,u);if(!C)return null;u=u||C.type,a.push([h,C])}return new Lo(u,i,a)},Lo.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var a=this.input.evaluate(t);if(a<=e[0])return i[0].evaluate(t);var u=e.length;return a>=e[u-1]?i[u-1].evaluate(t):i[as(e,a)].evaluate(t)},Lo.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},Lo.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(e){return e.possibleOutputs()}))},Lo.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var ca=Object.freeze({__proto__:null,number:$r,color:function(t,e,i){return new Ue($r(t.r,e.r,i),$r(t.g,e.g,i),$r(t.b,e.b,i),$r(t.a,e.a,i))},array:function(t,e,i){return t.map(function(a,u){return $r(a,e[u],i)})}}),Ia=4/29,ko=6/29,pa=3*ko*ko,ha=Math.PI/180,Ms=180/Math.PI;function gs(t){return t>.008856451679035631?Math.pow(t,1/3):t/pa+Ia}function ss(t){return t>ko?t*t*t:pa*(t-Ia)}function uo(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function go(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ka(t){var e=go(t.r),i=go(t.g),a=go(t.b),u=gs((.4124564*e+.3575761*i+.1804375*a)/.95047),c=gs((.2126729*e+.7151522*i+.072175*a)/1);return{l:116*c-16,a:500*(u-c),b:200*(c-gs((.0193339*e+.119192*i+.9503041*a)/1.08883)),alpha:t.a}}function aa(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,a=isNaN(t.b)?e:e-t.b/200;return e=1*ss(e),i=.95047*ss(i),a=1.08883*ss(a),new Ue(uo(3.2404542*i-1.5371385*e-.4985314*a),uo(-.969266*i+1.8760108*e+.041556*a),uo(.0556434*i-.2040259*e+1.0572252*a),t.alpha)}function Rs(t,e,i){var a=e-t;return t+i*(a>180||a<-180?a-360*Math.round(a/360):a)}var Oa={forward:ka,reverse:aa,interpolate:function(t,e,i){return{l:$r(t.l,e.l,i),a:$r(t.a,e.a,i),b:$r(t.b,e.b,i),alpha:$r(t.alpha,e.alpha,i)}}},Fa={forward:function(t){var e=ka(t),i=e.l,a=e.a,u=e.b,c=Math.atan2(u,a)*Ms;return{h:c<0?c+360:c,c:Math.sqrt(a*a+u*u),l:i,alpha:t.a}},reverse:function(t){var e=t.h*ha,i=t.c;return aa({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:Rs(t.h,e.h,i),c:$r(t.c,e.c,i),l:$r(t.l,e.l,i),alpha:$r(t.alpha,e.alpha,i)}}},w=Object.freeze({__proto__:null,lab:Oa,hcl:Fa}),z=function(t,e,i,a,u){this.type=t,this.operator=e,this.interpolation=i,this.input=a,this.labels=[],this.outputs=[];for(var c=0,h=u;c<h.length;c+=1){var m=h[c],T=m[1];this.labels.push(m[0]),this.outputs.push(T)}};function V(t,e,i,a){var u=a-i,c=t-i;return 0===u?0:1===e?c/u:(Math.pow(e,c)-1)/(Math.pow(e,u)-1)}z.interpolationFactor=function(t,e,i,a){var u=0;if("exponential"===t.name)u=V(e,t.base,i,a);else if("linear"===t.name)u=V(e,1,i,a);else if("cubic-bezier"===t.name){var c=t.controlPoints;u=new I(c[0],c[1],c[2],c[3]).solve(V(e,1,i,a))}return u},z.parse=function(t,e){var i=t[0],a=t[1],u=t[2],c=t.slice(3);if(!Array.isArray(a)||0===a.length)return e.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var h=a[1];if("number"!=typeof h)return e.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:h}}else{if("cubic-bezier"!==a[0])return e.error("Unknown interpolation type "+String(a[0]),1,0);var m=a.slice(1);if(4!==m.length||m.some(function(it){return"number"!=typeof it||it<0||it>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:m}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(u=e.parse(u,2,tt)))return null;var _=[],T=null;"interpolate-hcl"===i||"interpolate-lab"===i?T=Nt:e.expectedType&&"value"!==e.expectedType.kind&&(T=e.expectedType);for(var C=0;C<c.length;C+=2){var M=c[C],R=c[C+1],O=C+3,B=C+4;if("number"!=typeof M)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(_.length&&_[_.length-1][0]>=M)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);var Y=e.parse(R,B,T);if(!Y)return null;T=T||Y.type,_.push([M,Y])}return"number"===T.kind||"color"===T.kind||"array"===T.kind&&"number"===T.itemType.kind&&"number"==typeof T.N?new z(T,i,a,u,_):e.error("Type "+Qe(T)+" is not interpolatable.")},z.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var a=this.input.evaluate(t);if(a<=e[0])return i[0].evaluate(t);var u=e.length;if(a>=e[u-1])return i[u-1].evaluate(t);var c=as(e,a),_=z.interpolationFactor(this.interpolation,a,e[c],e[c+1]),T=i[c].evaluate(t),C=i[c+1].evaluate(t);return"interpolate"===this.operator?ca[this.type.kind.toLowerCase()](T,C,_):"interpolate-hcl"===this.operator?Fa.reverse(Fa.interpolate(Fa.forward(T),Fa.forward(C),_)):Oa.reverse(Oa.interpolate(Oa.forward(T),Oa.forward(C),_))},z.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},z.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(e){return e.possibleOutputs()}))},z.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var Z=function(t,e){this.type=t,this.args=e};Z.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,a=e.expectedType;a&&"value"!==a.kind&&(i=a);for(var u=[],c=0,h=t.slice(1);c<h.length;c+=1){var _=e.parse(h[c],1+u.length,i,void 0,{typeAnnotation:"omit"});if(!_)return null;i=i||_.type,u.push(_)}var T=a&&u.some(function(C){return Ei(a,C.type)});return new Z(T?he:i,u)},Z.prototype.evaluate=function(t){for(var e,i=null,a=0,u=0,c=this.args;u<c.length&&(a++,(i=c[u].evaluate(t))&&i instanceof Rr&&!i.available&&(e||(e=i.name),i=null,a===this.args.length&&(i=e)),null===i);u+=1);return i},Z.prototype.eachChild=function(t){this.args.forEach(t)},Z.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(e){return e.possibleOutputs()}))},Z.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var dt=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};dt.prototype.evaluate=function(t){return this.result.evaluate(t)},dt.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},dt.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],a=1;a<t.length-1;a+=2){var u=t[a];if("string"!=typeof u)return e.error("Expected string, but found "+typeof u+" instead.",a);if(/[^a-zA-Z0-9_]/.test(u))return e.error("Variable names must contain only alphanumeric characters or '_'.",a);var c=e.parse(t[a+1],a+1);if(!c)return null;i.push([u,c])}var h=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return h?new dt(i,h):null},dt.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},dt.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var a=i[e];t.push(a[0],a[1].serialize())}return t.push(this.result.serialize()),t};var bt=function(t,e,i){this.type=t,this.index=e,this.input=i};bt.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,tt),a=e.parse(t[2],2,ai(e.expectedType||he));return i&&a?new bt(a.type.itemType,i,a):null},bt.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new on("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new on("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new on("Array index must be an integer, but found "+e+" instead.");return i[e]},bt.prototype.eachChild=function(t){t(this.index),t(this.input)},bt.prototype.possibleOutputs=function(){return[void 0]},bt.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var At=function(t,e){this.type=jt,this.needle=t,this.haystack=e};At.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i,a=e.parse(t[1],1,he),u=e.parse(t[2],2,he);return a&&u?"boolean"!==(i=a.type).kind&&"string"!==i.kind&&"number"!==i.kind&&"null"!==i.kind&&"value"!==i.kind?e.error("Expected first argument to be of type boolean, string, number or null, but found "+Qe(a.type)+" instead"):new At(a,u):null},At.prototype.evaluate=function(t){var a,e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!e||!i)return!1;if("boolean"!=typeof(a=e)&&"string"!=typeof a&&"number"!=typeof a)throw new on("Expected first argument to be of type boolean, string or number, but found "+Qe(Xi(e))+" instead.");if(!function(a){return Array.isArray(a)||"string"==typeof a}(i))throw new on("Expected second argument to be of type array or string, but found "+Qe(Xi(i))+" instead.");return i.indexOf(e)>=0},At.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},At.prototype.possibleOutputs=function(){return[!0,!1]},At.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Xt=function(t,e,i,a,u,c){this.inputType=t,this.type=e,this.input=i,this.cases=a,this.outputs=u,this.otherwise=c};Xt.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,a;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(var u={},c=[],h=2;h<t.length-1;h+=2){var m=t[h],_=t[h+1];Array.isArray(m)||(m=[m]);var T=e.concat(h);if(0===m.length)return T.error("Expected at least one branch label.");for(var C=0,M=m;C<M.length;C+=1){var R=M[C];if("number"!=typeof R&&"string"!=typeof R)return T.error("Branch labels must be numbers or strings.");if("number"==typeof R&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return T.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof R&&Math.floor(R)!==R)return T.error("Numeric branch labels must be integer values.");if(i){if(T.checkSubtype(i,Xi(R)))return null}else i=Xi(R);if(void 0!==u[String(R)])return T.error("Branch labels must be unique.");u[String(R)]=c.length}var O=e.parse(_,h,a);if(!O)return null;a=a||O.type,c.push(O)}var B=e.parse(t[1],1,he);if(!B)return null;var Y=e.parse(t[t.length-1],t.length-1,a);return Y?"value"!==B.type.kind&&e.concat(1).checkSubtype(i,B.type)?null:new Xt(i,a,B,u,c,Y):null},Xt.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(Xi(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Xt.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Xt.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(e){return e.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Xt.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],i=[],a={},u=0,c=Object.keys(this.cases).sort();u<c.length;u+=1){var h=c[u];void 0===(M=a[this.cases[h]])?(a[this.cases[h]]=i.length,i.push([this.cases[h],[h]])):i[M][1].push(h)}for(var m=function(O){return"number"===t.inputType.kind?Number(O):O},_=0,T=i;_<T.length;_+=1){var C=T[_],M=C[0],R=C[1];e.push(1===R.length?m(R[0]):R.map(m)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var ie=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};function ge(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Xe(t,e,i,a){return 0===a.compare(e,i)}function pi(t,e,i){var a="=="!==t&&"!="!==t;return function(){function u(c,h,m){this.type=jt,this.lhs=c,this.rhs=h,this.collator=m,this.hasUntypedArgument="value"===c.type.kind||"value"===h.type.kind}return u.parse=function(c,h){if(3!==c.length&&4!==c.length)return h.error("Expected two or three arguments.");var m=c[0],_=h.parse(c[1],1,he);if(!_)return null;if(!ge(m,_.type))return h.concat(1).error('"'+m+"\" comparisons are not supported for type '"+Qe(_.type)+"'.");var T=h.parse(c[2],2,he);if(!T)return null;if(!ge(m,T.type))return h.concat(2).error('"'+m+"\" comparisons are not supported for type '"+Qe(T.type)+"'.");if(_.type.kind!==T.type.kind&&"value"!==_.type.kind&&"value"!==T.type.kind)return h.error("Cannot compare types '"+Qe(_.type)+"' and '"+Qe(T.type)+"'.");a&&("value"===_.type.kind&&"value"!==T.type.kind?_=new an(T.type,[_]):"value"!==_.type.kind&&"value"===T.type.kind&&(T=new an(_.type,[T])));var C=null;if(4===c.length){if("string"!==_.type.kind&&"string"!==T.type.kind&&"value"!==_.type.kind&&"value"!==T.type.kind)return h.error("Cannot use collator to compare non-string types.");if(!(C=h.parse(c[3],3,qe)))return null}return new u(_,T,C)},u.prototype.evaluate=function(c){var h=this.lhs.evaluate(c),m=this.rhs.evaluate(c);if(a&&this.hasUntypedArgument){var _=Xi(h),T=Xi(m);if(_.kind!==T.kind||"string"!==_.kind&&"number"!==_.kind)throw new on('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+_.kind+", "+T.kind+") instead.")}if(this.collator&&!a&&this.hasUntypedArgument){var C=Xi(h),M=Xi(m);if("string"!==C.kind||"string"!==M.kind)return e(c,h,m)}return this.collator?i(c,h,m,this.collator.evaluate(c)):e(c,h,m)},u.prototype.eachChild=function(c){c(this.lhs),c(this.rhs),this.collator&&c(this.collator)},u.prototype.possibleOutputs=function(){return[!0,!1]},u.prototype.serialize=function(){var c=[t];return this.eachChild(function(h){c.push(h.serialize())}),c},u}()}ie.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var a=[],u=1;u<t.length-1;u+=2){var c=e.parse(t[u],u,jt);if(!c)return null;var h=e.parse(t[u+1],u+1,i);if(!h)return null;a.push([c,h]),i=i||h.type}var m=e.parse(t[t.length-1],t.length-1,i);return m?new ie(i,a,m):null},ie.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var a=i[e],c=a[1];if(a[0].evaluate(t))return c.evaluate(t)}return this.otherwise.evaluate(t)},ie.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var a=i[e],c=a[1];t(a[0]),t(c)}t(this.otherwise)},ie.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map(function(e){return e[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},ie.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var je=pi("==",function(t,e,i){return e===i},Xe),Ge=pi("!=",function(t,e,i){return e!==i},function(t,e,i,a){return!Xe(0,e,i,a)}),Ki=pi("<",function(t,e,i){return e<i},function(t,e,i,a){return a.compare(e,i)<0}),xr=pi(">",function(t,e,i){return e>i},function(t,e,i,a){return a.compare(e,i)>0}),Yi=pi("<=",function(t,e,i){return e<=i},function(t,e,i,a){return a.compare(e,i)<=0}),ro=pi(">=",function(t,e,i){return e>=i},function(t,e,i,a){return a.compare(e,i)>=0}),En=function(t,e,i,a,u){this.type=Ot,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=a,this.maxFractionDigits=u};En.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,tt);if(!i)return null;var a=t[2];if("object"!=typeof a||Array.isArray(a))return e.error("NumberFormat options argument must be an object.");var u=null;if(a.locale&&!(u=e.parse(a.locale,1,Ot)))return null;var c=null;if(a.currency&&!(c=e.parse(a.currency,1,Ot)))return null;var h=null;if(a["min-fraction-digits"]&&!(h=e.parse(a["min-fraction-digits"],1,tt)))return null;var m=null;return a["max-fraction-digits"]&&!(m=e.parse(a["max-fraction-digits"],1,tt))?null:new En(i,u,c,h,m)},En.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},En.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},En.prototype.possibleOutputs=function(){return[void 0]},En.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Gn=function(t){this.type=tt,this.input=t};Gn.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+Qe(i.type)+" instead."):new Gn(i):null},Gn.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e||Array.isArray(e))return e.length;throw new on("Expected value to be of type string or array, but found "+Qe(Xi(e))+" instead.")},Gn.prototype.eachChild=function(t){t(this.input)},Gn.prototype.possibleOutputs=function(){return[void 0]},Gn.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var sn={"==":je,"!=":Ge,">":xr,"<":Ki,">=":ro,"<=":Yi,array:an,at:bt,boolean:an,case:ie,coalesce:Z,collator:xn,format:qn,image:Zn,in:At,interpolate:z,"interpolate-hcl":z,"interpolate-lab":z,length:Gn,let:dt,literal:Hi,match:Xt,number:an,"number-format":En,object:an,step:Lo,string:an,"to-boolean":Wn,"to-color":Wn,"to-number":Wn,"to-string":Wn,var:Do};function gi(t,e){var i=e[0],a=e[1],u=e[2],c=e[3];i=i.evaluate(t),a=a.evaluate(t),u=u.evaluate(t);var h=c?c.evaluate(t):1,m=In(i,a,u,h);if(m)throw new on(m);return new Ue(i/255*h,a/255*h,u/255*h,h)}function Ho(t,e){return t in e}function Wr(t,e){var i=e[t];return void 0===i?null:i}function ln(t){return{type:t}}function Aa(t){return{result:"success",value:t}}function Oo(t){return{result:"error",value:t}}function Qn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function sa(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Zo(t){return!!t.expression&&t.expression.interpolated}function er(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Wo(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Ta(t){return t}function un(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function da(t,e,i,a,u){return un(typeof i===u?a[i]:void 0,t.default,e.default)}function Ao(t,e,i){if("number"!==er(i))return un(t.default,e.default);var a=t.stops.length;if(1===a||i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[a-1][0])return t.stops[a-1][1];var u=as(t.stops.map(function(c){return c[0]}),i);return t.stops[u][1]}function Jo(t,e,i){var a=void 0!==t.base?t.base:1;if("number"!==er(i))return un(t.default,e.default);var u=t.stops.length;if(1===u||i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[u-1][0])return t.stops[u-1][1];var R,O,Y,it,c=as(t.stops.map(function(M){return M[0]}),i),h=(R=a,it=i-(O=t.stops[c][0]),0==(Y=t.stops[c+1][0]-O)?0:1===R?it/Y:(Math.pow(R,it)-1)/(Math.pow(R,Y)-1)),m=t.stops[c][1],_=t.stops[c+1][1],T=ca[e.type]||Ta;if(t.colorSpace&&"rgb"!==t.colorSpace){var C=w[t.colorSpace];T=function(M,R){return C.reverse(C.interpolate(C.forward(M),C.forward(R),h))}}return"function"==typeof m.evaluate?{evaluate:function(){for(var M=[],R=arguments.length;R--;)M[R]=arguments[R];var O=m.evaluate.apply(void 0,M),B=_.evaluate.apply(void 0,M);if(void 0!==O&&void 0!==B)return T(O,B,h)}}:T(m,_,h)}function Kr(t,e,i){return"color"===e.type?i=Ue.parse(i):"formatted"===e.type?i=mr.fromString(i.toString()):"resolvedImage"===e.type?i=Rr.fromString(i.toString()):er(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),un(i,t.default,e.default)}pr.register(sn,{error:[{kind:"error"},[Ot],function(t,e){throw new on(e[0].evaluate(t))}],typeof:[Ot,[he],function(t,e){return Qe(Xi(e[0].evaluate(t)))}],"to-rgba":[ai(tt,4),[Nt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Nt,[tt,tt,tt],gi],rgba:[Nt,[tt,tt,tt,tt],gi],has:{type:jt,overloads:[[[Ot],function(t,e){return Ho(e[0].evaluate(t),t.properties())}],[[Ot,fe],function(t,e){var a=e[1];return Ho(e[0].evaluate(t),a.evaluate(t))}]]},get:{type:he,overloads:[[[Ot],function(t,e){return Wr(e[0].evaluate(t),t.properties())}],[[Ot,fe],function(t,e){var a=e[1];return Wr(e[0].evaluate(t),a.evaluate(t))}]]},"feature-state":[he,[Ot],function(t,e){return Wr(e[0].evaluate(t),t.featureState||{})}],properties:[fe,[],function(t){return t.properties()}],"geometry-type":[Ot,[],function(t){return t.geometryType()}],id:[he,[],function(t){return t.id()}],zoom:[tt,[],function(t){return t.globals.zoom}],"heatmap-density":[tt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[tt,[],function(t){return t.globals.lineProgress||0}],accumulated:[he,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[tt,ln(tt),function(t,e){for(var i=0,a=0,u=e;a<u.length;a+=1)i+=u[a].evaluate(t);return i}],"*":[tt,ln(tt),function(t,e){for(var i=1,a=0,u=e;a<u.length;a+=1)i*=u[a].evaluate(t);return i}],"-":{type:tt,overloads:[[[tt,tt],function(t,e){var a=e[1];return e[0].evaluate(t)-a.evaluate(t)}],[[tt],function(t,e){return-e[0].evaluate(t)}]]},"/":[tt,[tt,tt],function(t,e){var a=e[1];return e[0].evaluate(t)/a.evaluate(t)}],"%":[tt,[tt,tt],function(t,e){var a=e[1];return e[0].evaluate(t)%a.evaluate(t)}],ln2:[tt,[],function(){return Math.LN2}],pi:[tt,[],function(){return Math.PI}],e:[tt,[],function(){return Math.E}],"^":[tt,[tt,tt],function(t,e){var a=e[1];return Math.pow(e[0].evaluate(t),a.evaluate(t))}],sqrt:[tt,[tt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[tt,[tt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[tt,[tt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[tt,[tt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[tt,[tt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[tt,[tt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[tt,[tt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[tt,[tt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[tt,[tt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[tt,[tt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[tt,ln(tt),function(t,e){return Math.min.apply(Math,e.map(function(i){return i.evaluate(t)}))}],max:[tt,ln(tt),function(t,e){return Math.max.apply(Math,e.map(function(i){return i.evaluate(t)}))}],abs:[tt,[tt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[tt,[tt],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[tt,[tt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[tt,[tt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[jt,[Ot,he],function(t,e){var i=e[0],a=e[1];return t.properties()[i.value]===a.value}],"filter-id-==":[jt,[he],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[jt,[Ot],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[jt,[Ot,he],function(t,e){var i=e[0],a=e[1],u=t.properties()[i.value],c=a.value;return typeof u==typeof c&&u<c}],"filter-id-<":[jt,[he],function(t,e){var i=e[0],a=t.id(),u=i.value;return typeof a==typeof u&&a<u}],"filter->":[jt,[Ot,he],function(t,e){var i=e[0],a=e[1],u=t.properties()[i.value],c=a.value;return typeof u==typeof c&&u>c}],"filter-id->":[jt,[he],function(t,e){var i=e[0],a=t.id(),u=i.value;return typeof a==typeof u&&a>u}],"filter-<=":[jt,[Ot,he],function(t,e){var i=e[0],a=e[1],u=t.properties()[i.value],c=a.value;return typeof u==typeof c&&u<=c}],"filter-id-<=":[jt,[he],function(t,e){var i=e[0],a=t.id(),u=i.value;return typeof a==typeof u&&a<=u}],"filter->=":[jt,[Ot,he],function(t,e){var i=e[0],a=e[1],u=t.properties()[i.value],c=a.value;return typeof u==typeof c&&u>=c}],"filter-id->=":[jt,[he],function(t,e){var i=e[0],a=t.id(),u=i.value;return typeof a==typeof u&&a>=u}],"filter-has":[jt,[he],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[jt,[],function(t){return null!==t.id()}],"filter-type-in":[jt,[ai(Ot)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[jt,[ai(he)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[jt,[Ot,ai(he)],function(t,e){var i=e[0];return e[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[jt,[Ot,ai(he)],function(t,e){var i=e[0],a=e[1];return function(u,c,h,m){for(;h<=m;){var _=h+m>>1;if(c[_]===u)return!0;c[_]>u?m=_-1:h=_+1}return!1}(t.properties()[i.value],a.value,0,a.value.length-1)}],all:{type:jt,overloads:[[[jt,jt],function(t,e){var a=e[1];return e[0].evaluate(t)&&a.evaluate(t)}],[ln(jt),function(t,e){for(var i=0,a=e;i<a.length;i+=1)if(!a[i].evaluate(t))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],function(t,e){var a=e[1];return e[0].evaluate(t)||a.evaluate(t)}],[ln(jt),function(t,e){for(var i=0,a=e;i<a.length;i+=1)if(a[i].evaluate(t))return!0;return!1}]]},"!":[jt,[jt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[jt,[Ot],function(t,e){var a=t.globals&&t.globals.isSupportedScript;return!a||a(e[0].evaluate(t))}],upcase:[Ot,[Ot],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Ot,[Ot],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Ot,ln(he),function(t,e){return e.map(function(i){return vr(i.evaluate(t))}).join("")}],"resolved-locale":[Ot,[qe],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var en=function(t,e){var i;this.expression=t,this._warningHistory={},this._evaluator=new qo,this._defaultValue=e?"color"===(i=e).type&&Wo(i.default)?new Ue(0,0,0,0):"color"===i.type?Ue.parse(i.default)||null:void 0===i.default?null:i.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function to(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in sn}function vo(t,e){var u,c,i=new Yo(sn,[],e?(c={color:Nt,string:Ot,number:tt,enum:Ot,boolean:jt,formatted:Be,resolvedImage:ze},"array"===(u=e).type?ai(c[u.value]||he,u.length):c[u.type]):void 0),a=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return a?Aa(new en(a,e)):Oo(i.errors)}en.prototype.evaluateWithoutErrorHandling=function(t,e,i,a,u){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=u,this.expression.evaluate(this._evaluator)},en.prototype.evaluate=function(t,e,i,a,u){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=u||null;try{var c=this.expression.evaluate(this._evaluator);if(null==c||"number"==typeof c&&c!=c)return this._defaultValue;if(this._enumValues&&!(c in this._enumValues))throw new on("Expected value to be one of "+Object.keys(this._enumValues).map(function(h){return JSON.stringify(h)}).join(", ")+", but found "+JSON.stringify(c)+" instead.");return c}catch(h){return this._warningHistory[h.message]||(this._warningHistory[h.message]=!0,"undefined"!=typeof console&&console.warn(h.message)),this._defaultValue}};var Hn=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!lo(e.expression)};Hn.prototype.evaluateWithoutErrorHandling=function(t,e,i,a,u){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,a,u)},Hn.prototype.evaluate=function(t,e,i,a,u){return this._styleExpression.evaluate(t,e,i,a,u)};var Xn=function(t,e,i,a){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!lo(e.expression),this.interpolationType=a};function ts(t,e){if("error"===(t=vo(t,e)).result)return t;var i=t.value.expression,a=Ea(i);if(!a&&!Qn(e))return Oo([new yt("","data expressions not supported")]);var u=os(i,["zoom"]);if(!u&&!sa(e))return Oo([new yt("","zoom expressions not supported")]);var c=function m(_){var T=null;if(_ instanceof dt)T=m(_.result);else if(_ instanceof Z)for(var C=0,M=_.args;C<M.length&&!(T=m(M[C]));C+=1);else(_ instanceof Lo||_ instanceof z)&&_.input instanceof pr&&"zoom"===_.input.name&&(T=_);return T instanceof yt||_.eachChild(function(O){var B=m(O);B instanceof yt?T=B:!T&&B?T=new yt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):T&&B&&T!==B&&(T=new yt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),T}(i);return c||u?c instanceof yt?Oo([c]):c instanceof z&&!Zo(e)?Oo([new yt("",'"interpolate" expressions cannot be used with this property')]):Aa(c?new Xn(a?"camera":"composite",t.value,c.labels,c instanceof z?c.interpolation:void 0):new Hn(a?"constant":"source",t.value)):Oo([new yt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Xn.prototype.evaluateWithoutErrorHandling=function(t,e,i,a,u){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,a,u)},Xn.prototype.evaluate=function(t,e,i,a,u){return this._styleExpression.evaluate(t,e,i,a,u)},Xn.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?z.interpolationFactor(this.interpolationType,t,e,i):0};var Qo=function(t,e){this._parameters=t,this._specification=e,j(this,function i(a,u){var c,h,m,_="color"===u.type,T=a.stops&&"object"==typeof a.stops[0][0],M=T||!(T||void 0!==a.property),R=a.type||(Zo(u)?"exponential":"interval");if(_&&((a=j({},a)).stops&&(a.stops=a.stops.map(function(Ke){return[Ke[0],Ue.parse(Ke[1])]})),a.default=Ue.parse(a.default?a.default:u.default)),a.colorSpace&&"rgb"!==a.colorSpace&&!w[a.colorSpace])throw new Error("Unknown color space: "+a.colorSpace);if("exponential"===R)c=Jo;else if("interval"===R)c=Ao;else if("categorical"===R){c=da,h=Object.create(null);for(var O=0,B=a.stops;O<B.length;O+=1){var Y=B[O];h[Y[0]]=Y[1]}m=typeof a.stops[0][0]}else{if("identity"!==R)throw new Error('Unknown function type "'+R+'"');c=Kr}if(T){for(var it={},ot=[],Tt=0;Tt<a.stops.length;Tt++){var wt=a.stops[Tt],It=wt[0].zoom;void 0===it[It]&&(it[It]={zoom:It,type:a.type,property:a.property,default:a.default,stops:[]},ot.push(It)),it[It].stops.push([wt[0].value,wt[1]])}for(var qt=[],Jt=0,Gt=ot;Jt<Gt.length;Jt+=1){var be=Gt[Jt];qt.push([it[be].zoom,i(it[be],u)])}var He={name:"linear"};return{kind:"composite",interpolationType:He,interpolationFactor:z.interpolationFactor.bind(void 0,He),zoomStops:qt.map(function(Ke){return Ke[0]}),evaluate:function(Ke,Re){var Ee=Ke.zoom;return Jo({stops:qt,base:a.base},u,Ee).evaluate(Ee,Re)}}}if(M){var Oe="exponential"===R?{name:"exponential",base:void 0!==a.base?a.base:1}:null;return{kind:"camera",interpolationType:Oe,interpolationFactor:z.interpolationFactor.bind(void 0,Oe),zoomStops:a.stops.map(function(Ke){return Ke[0]}),evaluate:function(Ke){return c(a,u,Ke.zoom,h,m)}}}return{kind:"source",evaluate:function(Ke,Re){var Ee=Re&&Re.properties?Re.properties[a.property]:void 0;return void 0===Ee?un(a.default,u.default):c(a,u,Ee,h,m)}}}(this._parameters,this._specification))};function eo(t){var e=t.key,i=t.value,a=t.valueSpec||{},u=t.objectElementValidators||{},c=t.style,h=t.styleSpec,m=[],_=er(i);if("object"!==_)return[new E(e,i,"object expected, "+_+" found")];for(var T in i){var C=T.split(".")[0],M=a[C]||a["*"],R=void 0;if(u[C])R=u[C];else if(a[C])R=_n;else if(u["*"])R=u["*"];else{if(!a["*"]){m.push(new E(e,i[T],'unknown property "'+T+'"'));continue}R=_n}m=m.concat(R({key:(e&&e+".")+T,value:i[T],valueSpec:M,style:c,styleSpec:h,object:i,objectKey:T},i))}for(var O in a)u[O]||a[O].required&&void 0===a[O].default&&void 0===i[O]&&m.push(new E(e,i,'missing required property "'+O+'"'));return m}function es(t){var e=t.value,i=t.valueSpec,a=t.style,u=t.styleSpec,c=t.key,h=t.arrayElementValidator||_n;if("array"!==er(e))return[new E(c,e,"array expected, "+er(e)+" found")];if(i.length&&e.length!==i.length)return[new E(c,e,"array length "+i.length+" expected, length "+e.length+" found")];if(i["min-length"]&&e.length<i["min-length"])return[new E(c,e,"array length at least "+i["min-length"]+" expected, length "+e.length+" found")];var m={type:i.value,values:i.values};u.$version<7&&(m.function=i.function),"object"===er(i.value)&&(m=i.value);for(var _=[],T=0;T<e.length;T++)_=_.concat(h({array:e,arrayIndex:T,value:e[T],valueSpec:m,style:a,styleSpec:u,key:c+"["+T+"]"}));return _}function Ua(t){var e=t.key,i=t.value,a=t.valueSpec,u=er(i);return"number"===u&&i!=i&&(u="NaN"),"number"!==u?[new E(e,i,"number expected, "+u+" found")]:"minimum"in a&&i<a.minimum?[new E(e,i,i+" is less than the minimum value "+a.minimum)]:"maximum"in a&&i>a.maximum?[new E(e,i,i+" is greater than the maximum value "+a.maximum)]:[]}function vs(t){var e,i,a,u=t.valueSpec,c=K(t.value.type),h={},m="categorical"!==c&&void 0===t.value.property,_=!m,T="array"===er(t.value.stops)&&"array"===er(t.value.stops[0])&&"object"===er(t.value.stops[0][0]),C=eo({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(O){if("identity"===c)return[new E(O.key,O.value,'identity function may not have a "stops" property')];var B=[],Y=O.value;return B=B.concat(es({key:O.key,value:Y,valueSpec:O.valueSpec,style:O.style,styleSpec:O.styleSpec,arrayElementValidator:M})),"array"===er(Y)&&0===Y.length&&B.push(new E(O.key,Y,"array must have at least one stop")),B},default:function(O){return _n({key:O.key,value:O.value,valueSpec:u,style:O.style,styleSpec:O.styleSpec})}}});return"identity"===c&&m&&C.push(new E(t.key,t.value,'missing required property "property"')),"identity"===c||t.value.stops||C.push(new E(t.key,t.value,'missing required property "stops"')),"exponential"===c&&t.valueSpec.expression&&!Zo(t.valueSpec)&&C.push(new E(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(_&&!Qn(t.valueSpec)?C.push(new E(t.key,t.value,"property functions not supported")):m&&!sa(t.valueSpec)&&C.push(new E(t.key,t.value,"zoom functions not supported"))),"categorical"!==c&&!T||void 0!==t.value.property||C.push(new E(t.key,t.value,'"property" property is required')),C;function M(O){var B=[],Y=O.value,it=O.key;if("array"!==er(Y))return[new E(it,Y,"array expected, "+er(Y)+" found")];if(2!==Y.length)return[new E(it,Y,"array length 2 expected, length "+Y.length+" found")];if(T){if("object"!==er(Y[0]))return[new E(it,Y,"object expected, "+er(Y[0])+" found")];if(void 0===Y[0].zoom)return[new E(it,Y,"object stop key must have zoom")];if(void 0===Y[0].value)return[new E(it,Y,"object stop key must have value")];if(a&&a>K(Y[0].zoom))return[new E(it,Y[0].zoom,"stop zoom values must appear in ascending order")];K(Y[0].zoom)!==a&&(a=K(Y[0].zoom),i=void 0,h={}),B=B.concat(eo({key:it+"[0]",value:Y[0],valueSpec:{zoom:{}},style:O.style,styleSpec:O.styleSpec,objectElementValidators:{zoom:Ua,value:R}}))}else B=B.concat(R({key:it+"[0]",value:Y[0],valueSpec:{},style:O.style,styleSpec:O.styleSpec},Y));return to(ct(Y[1]))?B.concat([new E(it+"[1]",Y[1],"expressions are not allowed in function stops.")]):B.concat(_n({key:it+"[1]",value:Y[1],valueSpec:u,style:O.style,styleSpec:O.styleSpec}))}function R(O,B){var Y=er(O.value),it=K(O.value),ot=null!==O.value?O.value:B;if(e){if(Y!==e)return[new E(O.key,ot,Y+" stop domain type must match previous stop domain type "+e)]}else e=Y;if("number"!==Y&&"string"!==Y&&"boolean"!==Y)return[new E(O.key,ot,"stop domain value must be a number, string, or boolean")];if("number"!==Y&&"categorical"!==c){var Tt="number expected, "+Y+" found";return Qn(u)&&void 0===c&&(Tt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new E(O.key,ot,Tt)]}return"categorical"!==c||"number"!==Y||isFinite(it)&&Math.floor(it)===it?"categorical"!==c&&"number"===Y&&void 0!==i&&it<i?[new E(O.key,ot,"stop domain values must appear in ascending order")]:(i=it,"categorical"===c&&it in h?[new E(O.key,ot,"stop domain values must be unique")]:(h[it]=!0,[])):[new E(O.key,ot,"integer expected, found "+it)]}}function Go(t){var e=("property"===t.expressionContext?ts:vo)(ct(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(a){return new E(""+t.key+a.key,t.value,a.message)});var i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==i.possibleOutputs().indexOf(void 0))return[new E(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!lo(i))return[new E(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!lo(i))return[new E(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!os(i,["zoom","feature-state"]))return[new E(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Ea(i))return[new E(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Na(t){var e=t.key,i=t.value,a=t.valueSpec,u=[];return Array.isArray(a.values)?-1===a.values.indexOf(K(i))&&u.push(new E(e,i,"expected one of ["+a.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(a.values).indexOf(K(i))&&u.push(new E(e,i,"expected one of ["+Object.keys(a.values).join(", ")+"], "+JSON.stringify(i)+" found")),u}function is(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&Array.isArray(t[2]);case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var a=i[e];if(!is(a)&&"boolean"!=typeof a)return!1}return!0;default:return!0}}Qo.deserialize=function(t){return new Qo(t._parameters,t._specification)},Qo.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var ja={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function rs(t){if(null==t)return function(){return!0};is(t)||(t=Xo(t));var e=vo(t,ja);if("error"===e.result)throw new Error(e.value.map(function(i){return i.key+": "+i.message}).join(", "));return function(i,a){return e.value.evaluate(i,a)}}function Bs(t,e){return t<e?-1:t>e?1:0}function Xo(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?ta(t[1],t[2],"=="):"!="===i?ye(ta(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?ta(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(Xo))):"all"===i?["all"].concat(t.slice(1).map(Xo)):"none"===i?["all"].concat(t.slice(1).map(Xo).map(ye)):"in"===i?Va(t[1],t.slice(2)):"!in"===i?ye(Va(t[1],t.slice(2))):"has"===i?ke(t[1]):"!has"!==i||ye(ke(t[1]))}function ta(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function Va(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(i){return typeof i!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(Bs)]]:["filter-in-small",t,["literal",e]]}}function ke(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function ye(t){return["!",t]}function Q(t){return is(ct(t.value))?Go(j({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(i){var a=i.value,u=i.key;if("array"!==er(a))return[new E(u,a,"array expected, "+er(a)+" found")];var h,c=i.styleSpec,m=[];if(a.length<1)return[new E(u,a,"filter array must have at least 1 element")];switch(m=m.concat(Na({key:u+"[0]",value:a[0],valueSpec:c.filter_operator,style:i.style,styleSpec:i.styleSpec})),K(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&"$type"===K(a[1])&&m.push(new E(u,a,'"$type" cannot be use with operator "'+a[0]+'"'));case"==":case"!=":3!==a.length&&m.push(new E(u,a,'filter array for operator "'+a[0]+'" must have 3 elements'));case"in":case"!in":a.length>=2&&"string"!==(h=er(a[1]))&&m.push(new E(u+"[1]",a[1],"string expected, "+h+" found"));for(var _=2;_<a.length;_++)h=er(a[_]),"$type"===K(a[1])?m=m.concat(Na({key:u+"["+_+"]",value:a[_],valueSpec:c.geometry_type,style:i.style,styleSpec:i.styleSpec})):"string"!==h&&"number"!==h&&"boolean"!==h&&m.push(new E(u+"["+_+"]",a[_],"string, number, or boolean expected, "+h+" found"));break;case"any":case"all":case"none":for(var T=1;T<a.length;T++)m=m.concat(e({key:u+"["+T+"]",value:a[T],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":h=er(a[1]),2!==a.length?m.push(new E(u,a,'filter array for "'+a[0]+'" operator must have 2 elements')):"string"!==h&&m.push(new E(u+"[1]",a[1],"string expected, "+h+" found"))}return m}(t)}function gt(t,e){var i=t.key,a=t.style,u=t.styleSpec,c=t.value,h=t.objectKey,m=u[e+"_"+t.layerType];if(!m)return[];var _=h.match(/^(.*)-transition$/);if("paint"===e&&_&&m[_[1]]&&m[_[1]].transition)return _n({key:i,value:c,valueSpec:u.transition,style:a,styleSpec:u});var T,C=t.valueSpec||m[h];if(!C)return[new E(i,c,'unknown property "'+h+'"')];if("string"===er(c)&&Qn(C)&&!C.tokens&&(T=/^{([^}]+)}$/.exec(c)))return[new E(i,c,'"'+h+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(T[1])+" }`.")];var M=[];return"symbol"===t.layerType&&("text-field"===h&&a&&!a.glyphs&&M.push(new E(i,c,'use of "text-field" requires a style "glyphs" property')),"text-font"===h&&Wo(ct(c))&&"identity"===K(c.type)&&M.push(new E(i,c,'"text-font" does not support identity functions'))),M.concat(_n({key:t.key,value:c,valueSpec:C,style:a,styleSpec:u,expressionContext:"property",propertyType:e,propertyKey:h}))}function ee(t){return gt(t,"paint")}function we(t){return gt(t,"layout")}function Ae(t){var e=[],i=t.value,a=t.key,u=t.style,c=t.styleSpec;i.type||i.ref||e.push(new E(a,i,'either "type" or "ref" is required'));var h,m=K(i.type),_=K(i.ref);if(i.id)for(var T=K(i.id),C=0;C<t.arrayIndex;C++){var M=u.layers[C];K(M.id)===T&&e.push(new E(a,i.id,'duplicate layer id "'+i.id+'", previously used at line '+M.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(B){B in i&&e.push(new E(a,i[B],'"'+B+'" is prohibited for ref layers'))}),u.layers.forEach(function(B){K(B.id)===_&&(h=B)}),h?h.ref?e.push(new E(a,i.ref,"ref cannot reference another ref layer")):m=K(h.type):e.push(new E(a,i.ref,'ref layer "'+_+'" not found'));else if("background"!==m)if(i.source){var R=u.sources&&u.sources[i.source],O=R&&K(R.type);R?"vector"===O&&"raster"===m?e.push(new E(a,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===O&&"raster"!==m?e.push(new E(a,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==O||i["source-layer"]?"raster-dem"===O&&"hillshade"!==m?e.push(new E(a,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==m||!i.paint||!i.paint["line-gradient"]||"geojson"===O&&R.lineMetrics||e.push(new E(a,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new E(a,i,'layer "'+i.id+'" must specify a "source-layer"')):e.push(new E(a,i.source,'source "'+i.source+'" not found'))}else e.push(new E(a,i,'missing required property "source"'));return e=e.concat(eo({key:a,value:i,valueSpec:c.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return _n({key:a+".type",value:i.type,valueSpec:c.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"})},filter:Q,layout:function(B){return eo({layer:i,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,objectElementValidators:{"*":function(Y){return we(j({layerType:m},Y))}}})},paint:function(B){return eo({layer:i,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,objectElementValidators:{"*":function(Y){return ee(j({layerType:m},Y))}}})}}}))}function Di(t){var e=t.value,i=t.key,a=er(e);return"string"!==a?[new E(i,e,"string expected, "+a+" found")]:[]}var zr={promoteId:function(t){var e=t.key,i=t.value;if("string"===er(i))return Di({key:e,value:i});var a=[];for(var u in i)a.push.apply(a,Di({key:e+"."+u,value:i[u]}));return a}};function Rn(t){var e=t.value,i=t.key,a=t.styleSpec,u=t.style;if(!e.type)return[new E(i,e,'"type" is required')];var c,h=K(e.type);switch(h){case"vector":case"raster":case"raster-dem":return eo({key:i,value:e,valueSpec:a["source_"+h.replace("-","_")],style:t.style,styleSpec:a,objectElementValidators:zr});case"geojson":if(c=eo({key:i,value:e,valueSpec:a.source_geojson,style:u,styleSpec:a,objectElementValidators:zr}),e.cluster)for(var m in e.clusterProperties){var _=e.clusterProperties[m],T=_[0],M="string"==typeof T?[T,["accumulated"],["get",m]]:T;c.push.apply(c,Go({key:i+"."+m+".map",value:_[1],expressionContext:"cluster-map"})),c.push.apply(c,Go({key:i+"."+m+".reduce",value:M,expressionContext:"cluster-reduce"}))}return c;case"video":return eo({key:i,value:e,valueSpec:a.source_video,style:u,styleSpec:a});case"image":return eo({key:i,value:e,valueSpec:a.source_image,style:u,styleSpec:a});case"canvas":return[new E(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Na({key:i+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:u,styleSpec:a})}}function On(t){var e=t.value,i=t.styleSpec,a=i.light,u=t.style,c=[],h=er(e);if(void 0===e)return c;if("object"!==h)return c.concat([new E("light",e,"object expected, "+h+" found")]);for(var m in e){var _=m.match(/^(.*)-transition$/);c=c.concat(_&&a[_[1]]&&a[_[1]].transition?_n({key:m,value:e[m],valueSpec:i.transition,style:u,styleSpec:i}):a[m]?_n({key:m,value:e[m],valueSpec:a[m],style:u,styleSpec:i}):[new E(m,e[m],'unknown property "'+m+'"')])}return c}var $o={"*":function(){return[]},array:es,boolean:function(t){var e=t.value,i=t.key,a=er(e);return"boolean"!==a?[new E(i,e,"boolean expected, "+a+" found")]:[]},number:Ua,color:function(t){var e=t.key,i=t.value,a=er(i);return"string"!==a?[new E(e,i,"color expected, "+a+" found")]:null===Cr(i)?[new E(e,i,'color expected, "'+i+'" found')]:[]},constants:D,enum:Na,filter:Q,function:vs,layer:Ae,object:eo,source:Rn,light:On,string:Di,formatted:function(t){return 0===Di(t).length?[]:Go(t)},resolvedImage:function(t){return 0===Di(t).length?[]:Go(t)}};function _n(t){var e=t.value,i=t.valueSpec,a=t.styleSpec;return i.expression&&Wo(K(e))?vs(t):i.expression&&to(ct(e))?Go(t):i.type&&$o[i.type]?$o[i.type](t):eo(j({},t,{valueSpec:i.type?a[i.type]:i}))}function Ko(t){var e=t.value,i=t.key,a=Di(t);return a.length||(-1===e.indexOf("{fontstack}")&&a.push(new E(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&a.push(new E(i,e,'"glyphs" url must include a "{range}" token'))),a}function or(t,e){void 0===e&&(e=x);var i=[];return i=i.concat(_n({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Ko,"*":function(){return[]}}})),t.constants&&(i=i.concat(D({key:"constants",value:t.constants,style:t,styleSpec:e}))),fa(i)}function fa(t){return[].concat(t).sort(function(e,i){return e.line-i.line})}function zo(t){return function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return fa(t.apply(this,e))}}or.source=zo(Rn),or.light=zo(On),or.layer=zo(Ae),or.filter=zo(Q),or.paintProperty=zo(ee),or.layoutProperty=zo(we);var la=or,ur=la.light,Ir=la.paintProperty,Ro=la.layoutProperty;function kt(t,e){var i=!1;if(e&&e.length)for(var a=0,u=e;a<u.length;a+=1)t.fire(new Zr(new Error(u[a].message))),i=!0;return i}var Qt=Te;function Te(t,e,i){var a=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var u=new Int32Array(this.arrayBuffer);t=u[0],this.d=(e=u[1])+2*(i=u[2]);for(var c=0;c<this.d*this.d;c++){var h=u[3+c],m=u[3+c+1];a.push(h===m?null:u.subarray(h,m))}var T=u[3+a.length+1];this.keys=u.subarray(u[3+a.length],T),this.bboxes=u.subarray(T),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var C=0;C<this.d*this.d;C++)a.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var M=i/e*t;this.min=-M,this.max=t+M}Te.prototype.insert=function(t,e,i,a,u){this._forEachCell(e,i,a,u,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(u)},Te.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Te.prototype._insertCell=function(t,e,i,a,u,c){this.cells[u].push(c)},Te.prototype.query=function(t,e,i,a,u){var c=this.min,h=this.max;if(t<=c&&e<=c&&h<=i&&h<=a&&!u)return Array.prototype.slice.call(this.keys);var m=[];return this._forEachCell(t,e,i,a,this._queryCell,m,{},u),m},Te.prototype._queryCell=function(t,e,i,a,u,c,h,m){var _=this.cells[u];if(null!==_)for(var T=this.keys,C=this.bboxes,M=0;M<_.length;M++){var R=_[M];if(void 0===h[R]){var O=4*R;(m?m(C[O+0],C[O+1],C[O+2],C[O+3]):t<=C[O+2]&&e<=C[O+3]&&i>=C[O+0]&&a>=C[O+1])?(h[R]=!0,c.push(T[R])):h[R]=!1}}},Te.prototype._forEachCell=function(t,e,i,a,u,c,h,m){for(var _=this._convertToCellCoord(t),T=this._convertToCellCoord(e),C=this._convertToCellCoord(i),M=this._convertToCellCoord(a),R=_;R<=C;R++)for(var O=T;O<=M;O++){var B=this.d*O+R;if((!m||m(this._convertFromCellCoord(R),this._convertFromCellCoord(O),this._convertFromCellCoord(R+1),this._convertFromCellCoord(O+1)))&&u.call(this,t,e,i,a,B,c,h,m))return}},Te.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Te.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Te.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,a=0;a<this.cells.length;a++)i+=this.cells[a].length;var u=new Int32Array(e+i+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var c=e,h=0;h<t.length;h++){var m=t[h];u[3+h]=c,u.set(m,c),c+=m.length}return u[3+t.length]=c,u.set(this.keys,c),u[3+t.length+1]=c+=this.keys.length,u.set(this.bboxes,c),c+=this.bboxes.length,u.buffer};var ve=self.ImageData,yi=self.ImageBitmap,Je={};function oe(t,e,i){void 0===i&&(i={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Je[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}for(var ci in oe("Object",Object),Qt.serialize=function(t,e){var i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},Qt.deserialize=function(t){return new Qt(t.buffer)},oe("Grid",Qt),oe("Color",Ue),oe("Error",Error),oe("ResolvedImage",Rr),oe("StylePropertyFunction",Qo),oe("StyleExpression",en,{omit:["_evaluator"]}),oe("ZoomDependentExpression",Xn),oe("ZoomConstantExpression",Hn),oe("CompoundExpression",pr,{omit:["_evaluate"]}),sn)sn[ci]._classRegistryKey||oe("Expression_"+ci,sn[ci]);function kr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Br(t){return yi&&t instanceof yi}function Vi(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(kr(t)||Br(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var i=t;return e&&e.push(i.buffer),i}if(t instanceof ve)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var a=[],u=0,c=t;u<c.length;u+=1)a.push(Vi(c[u],e));return a}if("object"==typeof t){var m=t.constructor,_=m._classRegistryKey;if(!_)throw new Error("can't serialize object of unregistered class");var T=m.serialize?m.serialize(t,e):{};if(!m.serialize){for(var C in t)if(t.hasOwnProperty(C)&&!(Je[_].omit.indexOf(C)>=0)){var M=t[C];T[C]=Je[_].shallow.indexOf(C)>=0?M:Vi(M,e)}t instanceof Error&&(T.message=t.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==_&&(T.$name=_),T}throw new Error("can't serialize object of type "+typeof t)}function Gr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||kr(t)||Br(t)||ArrayBuffer.isView(t)||t instanceof ve)return t;if(Array.isArray(t))return t.map(Gr);if("object"==typeof t){var e=t.$name||"Object",i=Je[e].klass;if(!i)throw new Error("can't deserialize unregistered class "+e);if(i.deserialize)return i.deserialize(t);for(var a=Object.create(i.prototype),u=0,c=Object.keys(t);u<c.length;u+=1){var h=c[u];if("$name"!==h){var m=t[h];a[h]=Je[e].shallow.indexOf(h)>=0?m:Gr(m)}}return a}throw new Error("can't deserialize object of type "+typeof t)}var Nr=function(){this.first=!0};Nr.prototype.update=function(t,e){var i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))};var ce={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function co(t){for(var e=0,i=t;e<i.length;e+=1)if(Bn(i[e].charCodeAt(0)))return!0;return!1}function Cn(t){return!(ce.Arabic(t)||ce["Arabic Supplement"](t)||ce["Arabic Extended-A"](t)||ce["Arabic Presentation Forms-A"](t)||ce["Arabic Presentation Forms-B"](t))}function Bn(t){return!(746!==t&&747!==t&&(t<4352||!(ce["Bopomofo Extended"](t)||ce.Bopomofo(t)||ce["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||ce["CJK Compatibility Ideographs"](t)||ce["CJK Compatibility"](t)||ce["CJK Radicals Supplement"](t)||ce["CJK Strokes"](t)||!(!ce["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||ce["CJK Unified Ideographs Extension A"](t)||ce["CJK Unified Ideographs"](t)||ce["Enclosed CJK Letters and Months"](t)||ce["Hangul Compatibility Jamo"](t)||ce["Hangul Jamo Extended-A"](t)||ce["Hangul Jamo Extended-B"](t)||ce["Hangul Jamo"](t)||ce["Hangul Syllables"](t)||ce.Hiragana(t)||ce["Ideographic Description Characters"](t)||ce.Kanbun(t)||ce["Kangxi Radicals"](t)||ce["Katakana Phonetic Extensions"](t)||ce.Katakana(t)&&12540!==t||!(!ce["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!ce["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||ce["Unified Canadian Aboriginal Syllabics"](t)||ce["Unified Canadian Aboriginal Syllabics Extended"](t)||ce["Vertical Forms"](t)||ce["Yijing Hexagram Symbols"](t)||ce["Yi Syllables"](t)||ce["Yi Radicals"](t))))}function fn(t){return!(Bn(t)||(e=t,ce["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||ce["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||ce["Letterlike Symbols"](e)||ce["Number Forms"](e)||ce["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||ce["Control Pictures"](e)&&9251!==e||ce["Optical Character Recognition"](e)||ce["Enclosed Alphanumerics"](e)||ce["Geometric Shapes"](e)||ce["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||ce["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||ce["CJK Symbols and Punctuation"](e)||ce.Katakana(e)||ce["Private Use Area"](e)||ce["CJK Compatibility Forms"](e)||ce["Small Form Variants"](e)||ce["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function Ra(t){return t>=1424&&t<=2303||ce["Arabic Presentation Forms-A"](t)||ce["Arabic Presentation Forms-B"](t)}function Po(t,e){return!(!e&&Ra(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||ce.Khmer(t))}function Mo(t){for(var e=0,i=t;e<i.length;e+=1)if(Ra(i[e].charCodeAt(0)))return!0;return!1}var no="deferred",_o="loading",ua="loaded",Ds=null,oo="unavailable",ea=null,Zl=function(t){Ds&&Ds(t)};function ma(){Fs.fire(new ji("pluginStateChange",{pluginStatus:oo,pluginURL:ea}))}var Fs=new ir,_s=function(){return oo},dl=function(){if(oo!==no||!ea)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");oo=_o,ma(),ea&&Ii({url:ea},function(t){t?Zl(t):(oo=ua,ma())})},kn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return oo===ua||null!=kn.applyArabicShaping},isLoading:function(){return oo===_o},setState:function(t){oo=t.pluginStatus,ea=t.pluginURL},isParsed:function(){return null!=kn.applyArabicShaping&&null!=kn.processBidirectionalText&&null!=kn.processStyledBidirectionalText},getPluginURL:function(){return ea}},Pr=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Nr,this.transition={})};Pr.prototype.isSupportedScript=function(t){return function(e,i){for(var a=0,u=e;a<u.length;a+=1)if(!Po(u[a].charCodeAt(0),i))return!1;return!0}(t,kn.isLoaded())},Pr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Pr.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}};var ls=function(t,e){this.property=t,this.value=e,this.expression=function(i,a){if(Wo(i))return new Qo(i,a);if(to(i)){var u=ts(i,a);if("error"===u.result)throw new Error(u.value.map(function(h){return h.key+": "+h.message}).join(", "));return u.value}var c=i;return"string"==typeof i&&"color"===a.type&&(c=Ue.parse(i)),{kind:"constant",evaluate:function(){return c}}}(void 0===e?t.specification.default:e,t.specification)};ls.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ls.prototype.possiblyEvaluate=function(t,e){return this.property.possiblyEvaluate(this,t,e)};var qa=function(t){this.property=t,this.value=new ls(t,void 0)};qa.prototype.transitioned=function(t,e){return new fl(this.property,this.value,e,vt({},t.transition,this.transition),t.now)},qa.prototype.untransitioned=function(){return new fl(this.property,this.value,null,{},0)};var po=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};po.prototype.getValue=function(t){return Ti(this._values[t].value.value)},po.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new qa(this._values[t].property)),this._values[t].value=new ls(this._values[t].property,null===e?void 0:Ti(e))},po.prototype.getTransition=function(t){return Ti(this._values[t].transition)},po.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new qa(this._values[t].property)),this._values[t].transition=Ti(e)||void 0},po.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var a=i[e],u=this.getValue(a);void 0!==u&&(t[a]=u);var c=this.getTransition(a);void 0!==c&&(t[a+"-transition"]=c)}return t},po.prototype.transitioned=function(t,e){for(var i=new Us(this._properties),a=0,u=Object.keys(this._values);a<u.length;a+=1){var c=u[a];i._values[c]=this._values[c].transitioned(t,e._values[c])}return i},po.prototype.untransitioned=function(){for(var t=new Us(this._properties),e=0,i=Object.keys(this._values);e<i.length;e+=1){var a=i[e];t._values[a]=this._values[a].untransitioned()}return t};var fl=function(t,e,i,a,u){this.property=t,this.value=e,this.begin=u+a.delay||0,this.end=this.begin+a.duration||0,t.specification.transition&&(a.delay||a.duration)&&(this.prior=i)};fl.prototype.possiblyEvaluate=function(t,e){var i=t.now||0,a=this.value.possiblyEvaluate(t,e),u=this.prior;if(u){if(i>this.end)return this.prior=null,a;if(this.value.isDataDriven())return this.prior=null,a;if(i<this.begin)return u.possiblyEvaluate(t,e);var c=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(u.possiblyEvaluate(t,e),a,function(h){if(h<=0)return 0;if(h>=1)return 1;var m=h*h,_=m*h;return 4*(h<.5?_:3*(h-m)+_-.75)}(c))}return a};var Us=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Us.prototype.possiblyEvaluate=function(t,e){for(var i=new Ha(this._properties),a=0,u=Object.keys(this._values);a<u.length;a+=1){var c=u[a];i._values[c]=this._values[c].possiblyEvaluate(t,e)}return i},Us.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var ia=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};ia.prototype.getValue=function(t){return Ti(this._values[t].value)},ia.prototype.setValue=function(t,e){this._values[t]=new ls(this._values[t].property,null===e?void 0:Ti(e))},ia.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var a=i[e],u=this.getValue(a);void 0!==u&&(t[a]=u)}return t},ia.prototype.possiblyEvaluate=function(t,e){for(var i=new Ha(this._properties),a=0,u=Object.keys(this._values);a<u.length;a+=1){var c=u[a];i._values[c]=this._values[c].possiblyEvaluate(t,e)}return i};var io=function(t,e,i){this.property=t,this.value=e,this.parameters=i};io.prototype.isConstant=function(){return"constant"===this.value.kind},io.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},io.prototype.evaluate=function(t,e,i){return this.property.evaluate(this.value,this.parameters,t,e,i)};var Ha=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Ha.prototype.get=function(t){return this._values[t]};var Ve=function(t){this.specification=t};Ve.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Ve.prototype.interpolate=function(t,e,i){var a=ca[this.specification.type];return a?a(t,e,i):t};var hi=function(t,e){this.specification=t,this.overrides=e};hi.prototype.possiblyEvaluate=function(t,e,i){return new io(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i)}:t.expression,e)},hi.prototype.interpolate=function(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new io(this,{kind:"constant",value:void 0},t.parameters);var a=ca[this.specification.type];return a?new io(this,{kind:"constant",value:a(t.value.value,e.value.value,i)},t.parameters):t},hi.prototype.evaluate=function(t,e,i,a,u){return"constant"===t.kind?t.value:t.evaluate(e,i,a,u)};var Ns=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(i,a,u){if(void 0===i.value)return new io(this,{kind:"constant",value:void 0},a);if("constant"===i.expression.kind){var c=i.expression.evaluate(a,null,{},u),h="resolvedImage"===i.property.specification.type&&"string"!=typeof c?c.name:c,m=this._calculate(h,h,h,a);return new io(this,{kind:"constant",value:m},a)}if("camera"===i.expression.kind){var _=this._calculate(i.expression.evaluate({zoom:a.zoom-1}),i.expression.evaluate({zoom:a.zoom}),i.expression.evaluate({zoom:a.zoom+1}),a);return new io(this,{kind:"constant",value:_},a)}return new io(this,i.expression,a)},e.prototype.evaluate=function(i,a,u,c,h){if("source"===i.kind){var m=i.evaluate(a,u,c,h);return this._calculate(m,m,m,a)}return"composite"===i.kind?this._calculate(i.evaluate({zoom:Math.floor(a.zoom)-1},u,c),i.evaluate({zoom:Math.floor(a.zoom)},u,c),i.evaluate({zoom:Math.floor(a.zoom)+1},u,c),a):i.value},e.prototype._calculate=function(i,a,u,c){return c.zoom>c.zoomHistory.lastIntegerZoom?{from:i,to:a}:{from:u,to:a}},e.prototype.interpolate=function(i){return i},e}(hi),Za=function(t){this.specification=t};Za.prototype.possiblyEvaluate=function(t,e,i){if(void 0!==t.value){if("constant"===t.expression.kind){var a=t.expression.evaluate(e,null,{},i);return this._calculate(a,a,a,e)}return this._calculate(t.expression.evaluate(new Pr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Pr(Math.floor(e.zoom),e)),t.expression.evaluate(new Pr(Math.floor(e.zoom+1),e)),e)}},Za.prototype._calculate=function(t,e,i,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},Za.prototype.interpolate=function(t){return t};var r=function(t){this.specification=t};r.prototype.possiblyEvaluate=function(t,e,i){return!!t.expression.evaluate(e,null,{},i)},r.prototype.interpolate=function(){return!1};var o=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[e];i.specification.overridable&&this.overridableProperties.push(e);var a=this.defaultPropertyValues[e]=new ls(i,void 0),u=this.defaultTransitionablePropertyValues[e]=new qa(i);this.defaultTransitioningPropertyValues[e]=u.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=a.possiblyEvaluate({})}};oe("DataDrivenProperty",hi),oe("DataConstantProperty",Ve),oe("CrossFadedDataDrivenProperty",Ns),oe("CrossFadedProperty",Za),oe("ColorRampProperty",r);var n=function(t){function e(i,a){if(t.call(this),this.id=i.id,this.type=i.type,this._featureFilter=function(){return!0},"custom"!==i.type&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,"background"!==i.type&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),a.layout&&(this._unevaluatedLayout=new ia(a.layout)),a.paint)){for(var u in this._transitionablePaint=new po(a.paint),i.paint)this.setPaintProperty(u,i.paint[u],{validate:!1});for(var c in i.layout)this.setLayoutProperty(c,i.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(i){return"visibility"===i?this.visibility:this._unevaluatedLayout.getValue(i)},e.prototype.setLayoutProperty=function(i,a,u){void 0===u&&(u={}),null!=a&&this._validate(Ro,"layers."+this.id+".layout."+i,i,a,u)||("visibility"!==i?this._unevaluatedLayout.setValue(i,a):this.visibility=a)},e.prototype.getPaintProperty=function(i){return Ui(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},e.prototype.setPaintProperty=function(i,a,u){if(void 0===u&&(u={}),null!=a&&this._validate(Ir,"layers."+this.id+".paint."+i,i,a,u))return!1;if(Ui(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),a||void 0),!1;var h=this._transitionablePaint._values[i],m="cross-faded-data-driven"===h.property.specification["property-type"],_=h.value.isDataDriven(),T=h.value;this._transitionablePaint.setValue(i,a),this._handleSpecialPaintPropertyUpdate(i);var C=this._transitionablePaint._values[i].value;return C.isDataDriven()||_||m||this._handleOverridablePaintPropertyUpdate(i,T,C)},e.prototype._handleSpecialPaintPropertyUpdate=function(i){},e.prototype._handleOverridablePaintPropertyUpdate=function(i,a,u){return!1},e.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(i,a){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,a)),this.paint=this._transitioningPaint.possiblyEvaluate(i,a)},e.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Wi(i,function(a,u){return!(void 0===a||"layout"===u&&!Object.keys(a).length||"paint"===u&&!Object.keys(a).length)})},e.prototype._validate=function(i,a,u,c,h){return void 0===h&&(h={}),(!h||!1!==h.validate)&&kt(this,i.call(la,{key:a,layerType:this.type,objectKey:u,value:c,styleSpec:x,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var i in this.paint._values){var a=this.paint.get(i);if(a instanceof io&&Qn(a.property.specification)&&("source"===a.value.kind||"composite"===a.value.kind)&&a.value.isStateDependent)return!0}return!1},e}(ir),s={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},p=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},f=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function y(t,e){void 0===e&&(e=1);var i=0,a=0;return{members:t.map(function(u){var h=s[u.type].BYTES_PER_ELEMENT,m=i=g(i,Math.max(e,h)),_=u.components||1;return a=Math.max(a,h),i+=h*_,{name:u.name,type:u.type,components:_,offset:m}}),size:g(i,Math.max(a,e)),alignment:e}}function g(t,e){return Math.ceil(t/e)*e}f.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},f.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},f.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},f.prototype.clear=function(){this.length=0},f.prototype.resize=function(t){this.reserve(t),this.length=t},f.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},f.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var S=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a){var u=this.length;return this.resize(u+1),this.emplace(u,i,a)},e.prototype.emplace=function(i,a,u){var c=2*i;return this.int16[c+0]=a,this.int16[c+1]=u,i},e}(f);S.prototype.bytesPerElement=4,oe("StructArrayLayout2i4",S);var k=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c){var h=this.length;return this.resize(h+1),this.emplace(h,i,a,u,c)},e.prototype.emplace=function(i,a,u,c,h){var m=4*i;return this.int16[m+0]=a,this.int16[m+1]=u,this.int16[m+2]=c,this.int16[m+3]=h,i},e}(f);k.prototype.bytesPerElement=8,oe("StructArrayLayout4i8",k);var L=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m){var _=this.length;return this.resize(_+1),this.emplace(_,i,a,u,c,h,m)},e.prototype.emplace=function(i,a,u,c,h,m,_){var T=6*i;return this.int16[T+0]=a,this.int16[T+1]=u,this.int16[T+2]=c,this.int16[T+3]=h,this.int16[T+4]=m,this.int16[T+5]=_,i},e}(f);L.prototype.bytesPerElement=12,oe("StructArrayLayout2i4i12",L);var U=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m){var _=this.length;return this.resize(_+1),this.emplace(_,i,a,u,c,h,m)},e.prototype.emplace=function(i,a,u,c,h,m,_){var T=4*i,C=8*i;return this.int16[T+0]=a,this.int16[T+1]=u,this.uint8[C+4]=c,this.uint8[C+5]=h,this.uint8[C+6]=m,this.uint8[C+7]=_,i},e}(f);U.prototype.bytesPerElement=8,oe("StructArrayLayout2i4ub8",U);var X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m,_,T){var C=this.length;return this.resize(C+1),this.emplace(C,i,a,u,c,h,m,_,T)},e.prototype.emplace=function(i,a,u,c,h,m,_,T,C){var M=8*i;return this.uint16[M+0]=a,this.uint16[M+1]=u,this.uint16[M+2]=c,this.uint16[M+3]=h,this.uint16[M+4]=m,this.uint16[M+5]=_,this.uint16[M+6]=T,this.uint16[M+7]=C,i},e}(f);X.prototype.bytesPerElement=16,oe("StructArrayLayout8ui16",X);var W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m,_,T,C,M,R,O){var B=this.length;return this.resize(B+1),this.emplace(B,i,a,u,c,h,m,_,T,C,M,R,O)},e.prototype.emplace=function(i,a,u,c,h,m,_,T,C,M,R,O,B){var Y=12*i;return this.int16[Y+0]=a,this.int16[Y+1]=u,this.int16[Y+2]=c,this.int16[Y+3]=h,this.uint16[Y+4]=m,this.uint16[Y+5]=_,this.uint16[Y+6]=T,this.uint16[Y+7]=C,this.int16[Y+8]=M,this.int16[Y+9]=R,this.int16[Y+10]=O,this.int16[Y+11]=B,i},e}(f);W.prototype.bytesPerElement=24,oe("StructArrayLayout4i4ui4i24",W);var G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u){var c=this.length;return this.resize(c+1),this.emplace(c,i,a,u)},e.prototype.emplace=function(i,a,u,c){var h=3*i;return this.float32[h+0]=a,this.float32[h+1]=u,this.float32[h+2]=c,i},e}(f);G.prototype.bytesPerElement=12,oe("StructArrayLayout3f12",G);var H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i){var a=this.length;return this.resize(a+1),this.emplace(a,i)},e.prototype.emplace=function(i,a){return this.uint32[1*i+0]=a,i},e}(f);H.prototype.bytesPerElement=4,oe("StructArrayLayout1ul4",H);var ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m,_,T,C,M,R){var O=this.length;return this.resize(O+1),this.emplace(O,i,a,u,c,h,m,_,T,C,M,R)},e.prototype.emplace=function(i,a,u,c,h,m,_,T,C,M,R,O){var B=12*i,Y=6*i;return this.int16[B+0]=a,this.int16[B+1]=u,this.int16[B+2]=c,this.int16[B+3]=h,this.int16[B+4]=m,this.int16[B+5]=_,this.uint32[Y+3]=T,this.uint16[B+8]=C,this.uint16[B+9]=M,this.int16[B+10]=R,this.int16[B+11]=O,i},e}(f);ft.prototype.bytesPerElement=24,oe("StructArrayLayout6i1ul2ui2i24",ft);var ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m){var _=this.length;return this.resize(_+1),this.emplace(_,i,a,u,c,h,m)},e.prototype.emplace=function(i,a,u,c,h,m,_){var T=6*i;return this.int16[T+0]=a,this.int16[T+1]=u,this.int16[T+2]=c,this.int16[T+3]=h,this.int16[T+4]=m,this.int16[T+5]=_,i},e}(f);ut.prototype.bytesPerElement=12,oe("StructArrayLayout2i2i2i12",ut);var _t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c){var h=this.length;return this.resize(h+1),this.emplace(h,i,a,u,c)},e.prototype.emplace=function(i,a,u,c,h){var m=12*i,_=3*i;return this.uint8[m+0]=a,this.uint8[m+1]=u,this.float32[_+1]=c,this.float32[_+2]=h,i},e}(f);_t.prototype.bytesPerElement=12,oe("StructArrayLayout2ub2f12",_t);var St=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m,_,T,C,M,R,O,B,Y,it,ot,Tt){var wt=this.length;return this.resize(wt+1),this.emplace(wt,i,a,u,c,h,m,_,T,C,M,R,O,B,Y,it,ot,Tt)},e.prototype.emplace=function(i,a,u,c,h,m,_,T,C,M,R,O,B,Y,it,ot,Tt,wt){var It=24*i,qt=12*i,Jt=48*i;return this.int16[It+0]=a,this.int16[It+1]=u,this.uint16[It+2]=c,this.uint16[It+3]=h,this.uint32[qt+2]=m,this.uint32[qt+3]=_,this.uint32[qt+4]=T,this.uint16[It+10]=C,this.uint16[It+11]=M,this.uint16[It+12]=R,this.float32[qt+7]=O,this.float32[qt+8]=B,this.uint8[Jt+36]=Y,this.uint8[Jt+37]=it,this.uint8[Jt+38]=ot,this.uint32[qt+10]=Tt,this.int16[It+22]=wt,i},e}(f);St.prototype.bytesPerElement=48,oe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",St);var Ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m,_,T,C,M,R,O,B,Y,it,ot,Tt,wt,It,qt,Jt,Gt,be,He,Oe,Ke){var Re=this.length;return this.resize(Re+1),this.emplace(Re,i,a,u,c,h,m,_,T,C,M,R,O,B,Y,it,ot,Tt,wt,It,qt,Jt,Gt,be,He,Oe,Ke)},e.prototype.emplace=function(i,a,u,c,h,m,_,T,C,M,R,O,B,Y,it,ot,Tt,wt,It,qt,Jt,Gt,be,He,Oe,Ke,Re){var Ee=30*i,pe=15*i;return this.int16[Ee+0]=a,this.int16[Ee+1]=u,this.int16[Ee+2]=c,this.int16[Ee+3]=h,this.int16[Ee+4]=m,this.int16[Ee+5]=_,this.int16[Ee+6]=T,this.int16[Ee+7]=C,this.uint16[Ee+8]=M,this.uint16[Ee+9]=R,this.uint16[Ee+10]=O,this.uint16[Ee+11]=B,this.uint16[Ee+12]=Y,this.uint16[Ee+13]=it,this.uint16[Ee+14]=ot,this.uint16[Ee+15]=Tt,this.uint16[Ee+16]=wt,this.uint16[Ee+17]=It,this.uint16[Ee+18]=qt,this.uint16[Ee+19]=Jt,this.uint16[Ee+20]=Gt,this.uint16[Ee+21]=be,this.uint32[pe+11]=He,this.float32[pe+12]=Oe,this.float32[pe+13]=Ke,this.float32[pe+14]=Re,i},e}(f);Ct.prototype.bytesPerElement=60,oe("StructArrayLayout8i14ui1ul3f60",Ct);var Ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i){var a=this.length;return this.resize(a+1),this.emplace(a,i)},e.prototype.emplace=function(i,a){return this.float32[1*i+0]=a,i},e}(f);Ut.prototype.bytesPerElement=4,oe("StructArrayLayout1f4",Ut);var te=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u){var c=this.length;return this.resize(c+1),this.emplace(c,i,a,u)},e.prototype.emplace=function(i,a,u,c){var h=3*i;return this.int16[h+0]=a,this.int16[h+1]=u,this.int16[h+2]=c,i},e}(f);te.prototype.bytesPerElement=6,oe("StructArrayLayout3i6",te);var le=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u){var c=this.length;return this.resize(c+1),this.emplace(c,i,a,u)},e.prototype.emplace=function(i,a,u,c){var m=4*i;return this.uint32[2*i+0]=a,this.uint16[m+2]=u,this.uint16[m+3]=c,i},e}(f);le.prototype.bytesPerElement=8,oe("StructArrayLayout1ul2ui8",le);var De=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u){var c=this.length;return this.resize(c+1),this.emplace(c,i,a,u)},e.prototype.emplace=function(i,a,u,c){var h=3*i;return this.uint16[h+0]=a,this.uint16[h+1]=u,this.uint16[h+2]=c,i},e}(f);De.prototype.bytesPerElement=6,oe("StructArrayLayout3ui6",De);var Ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a){var u=this.length;return this.resize(u+1),this.emplace(u,i,a)},e.prototype.emplace=function(i,a,u){var c=2*i;return this.uint16[c+0]=a,this.uint16[c+1]=u,i},e}(f);Ce.prototype.bytesPerElement=4,oe("StructArrayLayout2ui4",Ce);var $e=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i){var a=this.length;return this.resize(a+1),this.emplace(a,i)},e.prototype.emplace=function(i,a){return this.uint16[1*i+0]=a,i},e}(f);$e.prototype.bytesPerElement=2,oe("StructArrayLayout1ui2",$e);var Se=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a){var u=this.length;return this.resize(u+1),this.emplace(u,i,a)},e.prototype.emplace=function(i,a,u){var c=2*i;return this.float32[c+0]=a,this.float32[c+1]=u,i},e}(f);Se.prototype.bytesPerElement=8,oe("StructArrayLayout2f8",Se);var fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c){var h=this.length;return this.resize(h+1),this.emplace(h,i,a,u,c)},e.prototype.emplace=function(i,a,u,c,h){var m=4*i;return this.float32[m+0]=a,this.float32[m+1]=u,this.float32[m+2]=c,this.float32[m+3]=h,i},e}(f);fi.prototype.bytesPerElement=16,oe("StructArrayLayout4f16",fi);var ni=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointX.set=function(a){this._structArray.int16[this._pos2+0]=a},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.anchorPointY.set=function(a){this._structArray.int16[this._pos2+1]=a},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.x1.set=function(a){this._structArray.int16[this._pos2+2]=a},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.y1.set=function(a){this._structArray.int16[this._pos2+3]=a},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.x2.set=function(a){this._structArray.int16[this._pos2+4]=a},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.y2.set=function(a){this._structArray.int16[this._pos2+5]=a},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.featureIndex.set=function(a){this._structArray.uint32[this._pos4+3]=a},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.sourceLayerIndex.set=function(a){this._structArray.uint16[this._pos2+8]=a},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.bucketIndex.set=function(a){this._structArray.uint16[this._pos2+9]=a},i.radius.get=function(){return this._structArray.int16[this._pos2+10]},i.radius.set=function(a){this._structArray.int16[this._pos2+10]=a},i.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},i.signedDistanceFromAnchor.set=function(a){this._structArray.int16[this._pos2+11]=a},i.anchorPoint.get=function(){return new et(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,i),e}(p);ni.prototype.size=24;var si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return new ni(this,i)},e}(ft);oe("CollisionBoxArray",si);var li=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorX.set=function(a){this._structArray.int16[this._pos2+0]=a},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.anchorY.set=function(a){this._structArray.int16[this._pos2+1]=a},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.glyphStartIndex.set=function(a){this._structArray.uint16[this._pos2+2]=a},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.numGlyphs.set=function(a){this._structArray.uint16[this._pos2+3]=a},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.vertexStartIndex.set=function(a){this._structArray.uint32[this._pos4+2]=a},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineStartIndex.set=function(a){this._structArray.uint32[this._pos4+3]=a},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.lineLength.set=function(a){this._structArray.uint32[this._pos4+4]=a},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.segment.set=function(a){this._structArray.uint16[this._pos2+10]=a},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.lowerSize.set=function(a){this._structArray.uint16[this._pos2+11]=a},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.upperSize.set=function(a){this._structArray.uint16[this._pos2+12]=a},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetX.set=function(a){this._structArray.float32[this._pos4+7]=a},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.lineOffsetY.set=function(a){this._structArray.float32[this._pos4+8]=a},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.writingMode.set=function(a){this._structArray.uint8[this._pos1+36]=a},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(a){this._structArray.uint8[this._pos1+37]=a},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(a){this._structArray.uint8[this._pos1+38]=a},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(a){this._structArray.uint32[this._pos4+10]=a},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},i.associatedIconIndex.set=function(a){this._structArray.int16[this._pos2+22]=a},Object.defineProperties(e.prototype,i),e}(p);li.prototype.size=48;var vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return new li(this,i)},e}(St);oe("PlacedSymbolArray",vi);var ui=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorX.set=function(a){this._structArray.int16[this._pos2+0]=a},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.anchorY.set=function(a){this._structArray.int16[this._pos2+1]=a},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.rightJustifiedTextSymbolIndex.set=function(a){this._structArray.int16[this._pos2+2]=a},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.centerJustifiedTextSymbolIndex.set=function(a){this._structArray.int16[this._pos2+3]=a},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.leftJustifiedTextSymbolIndex.set=function(a){this._structArray.int16[this._pos2+4]=a},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.verticalPlacedTextSymbolIndex.set=function(a){this._structArray.int16[this._pos2+5]=a},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.placedIconSymbolIndex.set=function(a){this._structArray.int16[this._pos2+6]=a},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.verticalPlacedIconSymbolIndex.set=function(a){this._structArray.int16[this._pos2+7]=a},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.key.set=function(a){this._structArray.uint16[this._pos2+8]=a},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxStartIndex.set=function(a){this._structArray.uint16[this._pos2+9]=a},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.textBoxEndIndex.set=function(a){this._structArray.uint16[this._pos2+10]=a},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxStartIndex.set=function(a){this._structArray.uint16[this._pos2+11]=a},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.verticalTextBoxEndIndex.set=function(a){this._structArray.uint16[this._pos2+12]=a},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxStartIndex.set=function(a){this._structArray.uint16[this._pos2+13]=a},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.iconBoxEndIndex.set=function(a){this._structArray.uint16[this._pos2+14]=a},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxStartIndex.set=function(a){this._structArray.uint16[this._pos2+15]=a},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.verticalIconBoxEndIndex.set=function(a){this._structArray.uint16[this._pos2+16]=a},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.featureIndex.set=function(a){this._structArray.uint16[this._pos2+17]=a},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numHorizontalGlyphVertices.set=function(a){this._structArray.uint16[this._pos2+18]=a},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numVerticalGlyphVertices.set=function(a){this._structArray.uint16[this._pos2+19]=a},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numIconVertices.set=function(a){this._structArray.uint16[this._pos2+20]=a},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.numVerticalIconVertices.set=function(a){this._structArray.uint16[this._pos2+21]=a},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+11]},i.crossTileID.set=function(a){this._structArray.uint32[this._pos4+11]=a},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+12]},i.textBoxScale.set=function(a){this._structArray.float32[this._pos4+12]=a},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.set=function(a){this._structArray.float32[this._pos4+13]=a},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.set=function(a){this._structArray.float32[this._pos4+14]=a},Object.defineProperties(e.prototype,i),e}(p);ui.prototype.size=60;var lr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return new ui(this,i)},e}(Ct);oe("SymbolInstanceArray",lr);var xi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={offsetX:{configurable:!0}};return i.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},i.offsetX.set=function(a){this._structArray.float32[this._pos4+0]=a},Object.defineProperties(e.prototype,i),e}(p);xi.prototype.size=4;var hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(i){return this.float32[1*i+0]},e.prototype.get=function(i){return new xi(this,i)},e}(Ut);oe("GlyphOffsetArray",hr);var Ji=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return i.x.get=function(){return this._structArray.int16[this._pos2+0]},i.x.set=function(a){this._structArray.int16[this._pos2+0]=a},i.y.get=function(){return this._structArray.int16[this._pos2+1]},i.y.set=function(a){this._structArray.int16[this._pos2+1]=a},i.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},i.tileUnitDistanceFromAnchor.set=function(a){this._structArray.int16[this._pos2+2]=a},Object.defineProperties(e.prototype,i),e}(p);Ji.prototype.size=6;var $i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(i){return this.int16[3*i+0]},e.prototype.gety=function(i){return this.int16[3*i+1]},e.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},e.prototype.get=function(i){return new Ji(this,i)},e}(te);oe("SymbolLineVertexArray",$i);var br=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.featureIndex.set=function(a){this._structArray.uint32[this._pos4+0]=a},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.sourceLayerIndex.set=function(a){this._structArray.uint16[this._pos2+2]=a},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},i.bucketIndex.set=function(a){this._structArray.uint16[this._pos2+3]=a},Object.defineProperties(e.prototype,i),e}(p);br.prototype.size=8;var rn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return new br(this,i)},e}(le);oe("FeatureIndexArray",rn);var Yr=y([{name:"a_pos",components:2,type:"Int16"}],4).members,Er=function(t){void 0===t&&(t=[]),this.segments=t};function ra(t,e){return 256*(t=Yt(Math.floor(t),0,255))+Yt(Math.floor(e),0,255)}Er.prototype.prepareSegment=function(t,e,i,a){var u=this.segments[this.segments.length-1];return t>Er.MAX_VERTEX_ARRAY_LENGTH&&ae("Max vertices per segment is "+Er.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!u||u.vertexLength+t>Er.MAX_VERTEX_ARRAY_LENGTH||u.sortKey!==a)&&(u={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==a&&(u.sortKey=a),this.segments.push(u)),u},Er.prototype.get=function(){return this.segments},Er.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var i=e[t];for(var a in i.vaos)i.vaos[a].destroy()}},Er.simpleSegment=function(t,e,i,a){return new Er([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:a,vaos:{},sortKey:0}])},Er.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,oe("SegmentVector",Er);var Bo=P(function(t){t.exports=function(e,i){var a,u,c,h,m,_,T,C;for(u=e.length-(a=3&e.length),c=i,m=3432918353,_=461845907,C=0;C<u;)T=255&e.charCodeAt(C)|(255&e.charCodeAt(++C))<<8|(255&e.charCodeAt(++C))<<16|(255&e.charCodeAt(++C))<<24,++C,c=27492+(65535&(h=5*(65535&(c=(c^=T=(65535&(T=(T=(65535&T)*m+(((T>>>16)*m&65535)<<16)&4294967295)<<15|T>>>17))*_+(((T>>>16)*_&65535)<<16)&4294967295)<<13|c>>>19))+((5*(c>>>16)&65535)<<16)&4294967295))+((58964+(h>>>16)&65535)<<16);switch(T=0,a){case 3:T^=(255&e.charCodeAt(C+2))<<16;case 2:T^=(255&e.charCodeAt(C+1))<<8;case 1:c^=T=(65535&(T=(T=(65535&(T^=255&e.charCodeAt(C)))*m+(((T>>>16)*m&65535)<<16)&4294967295)<<15|T>>>17))*_+(((T>>>16)*_&65535)<<16)&4294967295}return c^=e.length,c=2246822507*(65535&(c^=c>>>16))+((2246822507*(c>>>16)&65535)<<16)&4294967295,c=3266489909*(65535&(c^=c>>>13))+((3266489909*(c>>>16)&65535)<<16)&4294967295,(c^=c>>>16)>>>0}}),Wa=P(function(t){t.exports=function(e,i){for(var a,u=e.length,c=i^u,h=0;u>=4;)a=1540483477*(65535&(a=255&e.charCodeAt(h)|(255&e.charCodeAt(++h))<<8|(255&e.charCodeAt(++h))<<16|(255&e.charCodeAt(++h))<<24))+((1540483477*(a>>>16)&65535)<<16),c=1540483477*(65535&c)+((1540483477*(c>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),u-=4,++h;switch(u){case 3:c^=(255&e.charCodeAt(h+2))<<16;case 2:c^=(255&e.charCodeAt(h+1))<<8;case 1:c=1540483477*(65535&(c^=255&e.charCodeAt(h)))+((1540483477*(c>>>16)&65535)<<16)}return c=1540483477*(65535&(c^=c>>>13))+((1540483477*(c>>>16)&65535)<<16),(c^=c>>>15)>>>0}}),Fo=Bo,Ga=Wa;Fo.murmur3=Bo,Fo.murmur2=Ga;var xo=function(){this.ids=[],this.positions=[],this.indexed=!1};xo.prototype.add=function(t,e,i,a){this.ids.push(us(t)),this.positions.push(e,i,a)},xo.prototype.getPositions=function(t){for(var e=us(t),i=0,a=this.ids.length-1;i<a;){var u=i+a>>1;this.ids[u]>=e?a=u:i=u+1}for(var c=[];this.ids[i]===e;)c.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return c},xo.serialize=function(t,e){var i=new Float64Array(t.ids),a=new Uint32Array(t.positions);return function u(c,h,m,_){if(!(m>=_)){for(var T=c[m+_>>1],C=m-1,M=_+1;;){do{C++}while(c[C]<T);do{M--}while(c[M]>T);if(C>=M)break;za(c,C,M),za(h,3*C,3*M),za(h,3*C+1,3*M+1),za(h,3*C+2,3*M+2)}u(c,h,m,M),u(c,h,M+1,_)}}(i,a,0,i.length-1),e&&e.push(i.buffer,a.buffer),{ids:i,positions:a}},xo.deserialize=function(t){var e=new xo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var xs=Math.pow(2,53)-1;function us(t){var e=+t;return!isNaN(e)&&e<=xs?e:Fo(String(t))}function za(t,e,i){var a=t[e];t[e]=t[i],t[i]=a}oe("FeaturePositionMap",xo);var bo=function(t,e){this.gl=t.gl,this.location=e},bs=function(t){function e(i,a){t.call(this,i,a),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},e}(bo),Pa=function(t){function e(i,a){t.call(this,i,a),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},e}(bo),cs=function(t){function e(i,a){t.call(this,i,a),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},e}(bo),ws=function(t){function e(i,a){t.call(this,i,a),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},e}(bo),Xa=function(t){function e(i,a){t.call(this,i,a),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},e}(bo),Zi=function(t){function e(i,a){t.call(this,i,a),this.current=Ue.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},e}(bo),An=new Float32Array(16),$n=function(t){function e(i,a){t.call(this,i,a),this.current=An}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var a=1;a<16;a++)if(i[a]!==this.current[a]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},e}(bo);function Uo(t){return[ra(255*t.r,255*t.g),ra(255*t.b,255*t.a)]}var ao=function(t,e,i){this.value=t,this.names=e,this.uniformNames=this.names.map(function(a){return"u_"+a}),this.type=i,this.maxValue=-1/0};ao.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},ao.prototype.setConstantPatternPositions=function(){},ao.prototype.populatePaintArray=function(){},ao.prototype.updatePaintArray=function(){},ao.prototype.upload=function(){},ao.prototype.destroy=function(){},ao.prototype.setUniforms=function(t,e,i,a){e.set(a.constantOr(this.value))},ao.prototype.getBinding=function(t,e){return"color"===this.type?new Zi(t,e):new Pa(t,e)},ao.serialize=function(t){var i=t.names,a=t.type;return{value:Vi(t.value),names:i,type:a}},ao.deserialize=function(t){var i=t.names,a=t.type;return new ao(Gr(t.value),i,a)};var No=function(t,e,i){this.value=t,this.names=e,this.uniformNames=this.names.map(function(a){return"u_"+a}),this.type=i,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};No.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},No.prototype.populatePaintArray=function(){},No.prototype.updatePaintArray=function(){},No.prototype.upload=function(){},No.prototype.destroy=function(){},No.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},No.prototype.setUniforms=function(t,e,i,a,u){var c=this.patternPositions;"u_pattern_to"===u&&c.patternTo&&e.set(c.patternTo),"u_pattern_from"===u&&c.patternFrom&&e.set(c.patternFrom)},No.prototype.getBinding=function(t,e){return new Xa(t,e)};var wo=function(t,e,i,a){this.expression=t,this.names=e,this.type=i,this.uniformNames=this.names.map(function(u){return"a_"+u}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(u){return{name:"a_"+u,type:"Float32",components:"color"===i?2:1,offset:0}}),this.paintVertexArray=new a};wo.prototype.defines=function(){return[]},wo.prototype.setConstantPatternPositions=function(){},wo.prototype.populatePaintArray=function(t,e,i,a){var u=this.paintVertexArray,c=u.length;u.reserve(t);var h=this.expression.evaluate(new Pr(0),e,{},[],a);if("color"===this.type)for(var m=Uo(h),_=c;_<t;_++)u.emplaceBack(m[0],m[1]);else{for(var T=c;T<t;T++)u.emplaceBack(h);this.maxValue=Math.max(this.maxValue,h)}},wo.prototype.updatePaintArray=function(t,e,i,a){var u=this.paintVertexArray,c=this.expression.evaluate({zoom:0},i,a);if("color"===this.type)for(var h=Uo(c),m=t;m<e;m++)u.emplace(m,h[0],h[1]);else{for(var _=t;_<e;_++)u.emplace(_,c);this.maxValue=Math.max(this.maxValue,c)}},wo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},wo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},wo.prototype.setUniforms=function(t,e){e.set(0)},wo.prototype.getBinding=function(t,e){return new Pa(t,e)};var Kn=function(t,e,i,a,u,c){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(m){return"u_"+m+"_t"}),this.type=i,this.useIntegerZoom=a,this.zoom=u,this.maxValue=-1/0;var h=c;this.paintVertexAttributes=e.map(function(m){return{name:"a_"+m,type:"Float32",components:"color"===i?4:2,offset:0}}),this.paintVertexArray=new h};Kn.prototype.defines=function(){return[]},Kn.prototype.setConstantPatternPositions=function(){},Kn.prototype.populatePaintArray=function(t,e,i,a){var u=this.paintVertexArray,c=u.length;u.reserve(t);var h=this.expression.evaluate(new Pr(this.zoom),e,{},[],a),m=this.expression.evaluate(new Pr(this.zoom+1),e,{},[],a);if("color"===this.type)for(var _=Uo(h),T=Uo(m),C=c;C<t;C++)u.emplaceBack(_[0],_[1],T[0],T[1]);else{for(var M=c;M<t;M++)u.emplaceBack(h,m);this.maxValue=Math.max(this.maxValue,h,m)}},Kn.prototype.updatePaintArray=function(t,e,i,a){var u=this.paintVertexArray,c=this.expression.evaluate({zoom:this.zoom},i,a),h=this.expression.evaluate({zoom:this.zoom+1},i,a);if("color"===this.type)for(var m=Uo(c),_=Uo(h),T=t;T<e;T++)u.emplace(T,m[0],m[1],_[0],_[1]);else{for(var C=t;C<e;C++)u.emplace(C,c,h);this.maxValue=Math.max(this.maxValue,c,h)}},Kn.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Kn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Kn.prototype.interpolationFactor=function(t){return this.useIntegerZoom&&(t=Math.floor(t)),Yt(this.expression.interpolationFactor(t,this.zoom,this.zoom+1),0,1)},Kn.prototype.setUniforms=function(t,e,i){e.set(this.interpolationFactor(i.zoom))},Kn.prototype.getBinding=function(t,e){return new Pa(t,e)};var jo=function(t,e,i,a,u,c,h){this.expression=t,this.names=e,this.type=i,this.uniformNames=this.names.map(function(m){return"u_"+m+"_t"}),this.useIntegerZoom=a,this.zoom=u,this.maxValue=-1/0,this.layerId=h,this.paintVertexAttributes=e.map(function(m){return{name:"a_"+m,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new c,this.zoomOutPaintVertexArray=new c};jo.prototype.defines=function(){return[]},jo.prototype.setConstantPatternPositions=function(){},jo.prototype.populatePaintArray=function(t,e,i){var a=this.zoomInPaintVertexArray,u=this.zoomOutPaintVertexArray,c=this.layerId,h=a.length;if(a.reserve(t),u.reserve(t),i&&e.patterns&&e.patterns[c]){var m=e.patterns[c],M=i[m.min],R=i[m.mid],O=i[m.max];if(!M||!R||!O)return;for(var B=h;B<t;B++)a.emplaceBack(R.tl[0],R.tl[1],R.br[0],R.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1]),u.emplaceBack(R.tl[0],R.tl[1],R.br[0],R.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1])}},jo.prototype.updatePaintArray=function(t,e,i,a,u){var c=this.zoomInPaintVertexArray,h=this.zoomOutPaintVertexArray,m=this.layerId;if(u&&i.patterns&&i.patterns[m]){var _=i.patterns[m],R=u[_.min],O=u[_.mid],B=u[_.max];if(!R||!O||!B)return;for(var Y=t;Y<e;Y++)c.emplace(Y,O.tl[0],O.tl[1],O.br[0],O.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1]),h.emplace(Y,O.tl[0],O.tl[1],O.br[0],O.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1])}},jo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},jo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},jo.prototype.setUniforms=function(t,e){e.set(0)},jo.prototype.getBinding=function(t,e){return new Pa(t,e)};var zn=function(){this.binders={},this.cacheKey="",this._buffers=[]};zn.createDynamic=function(t,e,i){var a=new zn,u=[];for(var c in t.paint._values)if(i(c)){var h=t.paint.get(c);if(h instanceof io&&Qn(h.property.specification)){var m=Cu(c,t.type),_=h.property.specification.type,T=h.property.useIntegerZoom;if("cross-faded"===h.property.specification["property-type"]||"cross-faded-data-driven"===h.property.specification["property-type"])if("constant"===h.value.kind)a.binders[c]=new No(h.value.value,m,_),u.push("/u_"+c);else{var C=Ss(c,_,"source");a.binders[c]=new jo(h.value,m,_,T,e,C,t.id),u.push("/a_"+c)}else if("constant"===h.value.kind)a.binders[c]=new ao(h.value.value,m,_),u.push("/u_"+c);else if("source"===h.value.kind){var M=Ss(c,_,"source");a.binders[c]=new wo(h.value,m,_,M),u.push("/a_"+c)}else{var R=Ss(c,_,"composite");a.binders[c]=new Kn(h.value,m,_,T,e,R),u.push("/z_"+c)}}}return a.cacheKey=u.sort().join(""),a},zn.prototype.populatePaintArrays=function(t,e,i,a,u){for(var c in this.binders)this.binders[c].populatePaintArray(t,e,a,u)},zn.prototype.setConstantPatternPositions=function(t,e){for(var i in this.binders)this.binders[i].setConstantPatternPositions(t,e)},zn.prototype.updatePaintArrays=function(t,e,i,a,u){var c=!1;for(var h in t)for(var m=0,_=e.getPositions(h);m<_.length;m+=1){var T=_[m],C=i.feature(T.index);for(var M in this.binders){var R=this.binders[M];if(!(R instanceof ao||R instanceof No)&&!0===R.expression.isStateDependent){var O=a.paint.get(M);R.expression=O.value,R.updatePaintArray(T.start,T.end,C,t[h],u),c=!0}}}return c},zn.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},zn.prototype.getPaintVertexBuffers=function(){return this._buffers},zn.prototype.getUniforms=function(t,e){var i=[];for(var a in this.binders)for(var u=this.binders[a],c=0,h=u.uniformNames;c<h.length;c+=1){var m=h[c];if(e[m]){var _=u.getBinding(t,e[m]);i.push({name:m,property:a,binding:_})}}return i},zn.prototype.setUniforms=function(t,e,i,a){for(var u=0,c=e;u<c.length;u+=1){var h=c[u],m=h.name,_=h.property;this.binders[_].setUniforms(t,h.binding,a,i.get(_),m)}},zn.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var i in this.binders){var a=this.binders[i];if(a instanceof jo){var u=2===t.fromScale?a.zoomInPaintVertexBuffer:a.zoomOutPaintVertexBuffer;u&&e.push(u)}else(a instanceof wo||a instanceof Kn)&&a.paintVertexBuffer&&e.push(a.paintVertexBuffer)}this._buffers=e},zn.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var i=[];for(var a in this.binders){var u=this.binders[a];(u instanceof wo||u instanceof Kn)&&u.paintVertexBuffer&&i.push(u.paintVertexBuffer)}this._buffers=i},zn.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var So=function(t,e,i,a){void 0===a&&(a=function(){return!0}),this.programConfigurations={};for(var u=0,c=e;u<c.length;u+=1){var h=c[u];this.programConfigurations[h.id]=zn.createDynamic(h,i,a),this.programConfigurations[h.id].layoutAttributes=t}this.needsUpload=!1,this._featureMap=new xo,this._bufferOffset=0};function Cu(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Ss(t,e,i){var u={"line-pattern":{source:X,composite:X},"fill-pattern":{source:X,composite:X},"fill-extrusion-pattern":{source:X,composite:X}}[t];return u&&u[i]||{color:{source:Se,composite:fi},number:{source:Ut,composite:Se}}[e][i]}So.prototype.populatePaintArrays=function(t,e,i,a,u){for(var c in this.programConfigurations)this.programConfigurations[c].populatePaintArrays(t,e,i,a,u);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},So.prototype.updatePaintArrays=function(t,e,i,a){for(var u=0,c=i;u<c.length;u+=1){var h=c[u];this.needsUpload=this.programConfigurations[h.id].updatePaintArrays(t,this._featureMap,e,h,a)||this.needsUpload}},So.prototype.get=function(t){return this.programConfigurations[t]},So.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},So.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},oe("ConstantBinder",ao),oe("CrossFadedConstantBinder",No),oe("SourceExpressionBinder",wo),oe("CrossFadedCompositeBinder",jo),oe("CompositeExpressionBinder",Kn),oe("ProgramConfiguration",zn,{omit:["_buffers"]}),oe("ProgramConfigurationSet",So);var mn=8192,ps={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function js(t){for(var e=mn/t.extent,i=t.loadGeometry(),a=0;a<i.length;a++)for(var u=i[a],c=0;c<u.length;c++){var h=u[c];h.x=Math.round(h.x*e),h.y=Math.round(h.y*e),(h.x<ps.min||h.x>ps.max||h.y<ps.min||h.y>ps.max)&&(ae("Geometry exceeds allowed extent, reduce your vector tile buffer size"),h.x=Yt(h.x,ps.min,ps.max),h.y=Yt(h.y,ps.min,ps.max))}return i}function Wl(t,e,i,a,u){t.emplaceBack(2*e+(a+1)/2,2*i+(u+1)/2)}var Ma=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new S,this.indexArray=new De,this.segments=new Er,this.programConfigurations=new So(Yr,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function pc(t,e){for(var i=0;i<t.length;i++)if(Vs(e,t[i]))return!0;for(var a=0;a<e.length;a++)if(Vs(t,e[a]))return!0;return!!ku(t,e)}function Fp(t,e,i){return!!Vs(t,e)||!!Au(e,t,i)}function hc(t,e){if(1===t.length)return fc(e,t[0]);for(var i=0;i<e.length;i++)for(var a=e[i],u=0;u<a.length;u++)if(Vs(t,a[u]))return!0;for(var c=0;c<t.length;c++)if(fc(e,t[c]))return!0;for(var h=0;h<e.length;h++)if(ku(t,e[h]))return!0;return!1}function Up(t,e,i){if(t.length>1){if(ku(t,e))return!0;for(var a=0;a<e.length;a++)if(Au(e[a],t,i))return!0}for(var u=0;u<t.length;u++)if(Au(t[u],e,i))return!0;return!1}function ku(t,e){if(0===t.length||0===e.length)return!1;for(var i=0;i<t.length-1;i++)for(var a=t[i],u=t[i+1],c=0;c<e.length-1;c++)if(Np(a,u,e[c],e[c+1]))return!0;return!1}function Np(t,e,i,a){return zt(t,i,a)!==zt(e,i,a)&&zt(t,e,i)!==zt(t,e,a)}function Au(t,e,i){var a=i*i;if(1===e.length)return t.distSqr(e[0])<a;for(var u=1;u<e.length;u++)if(dc(t,e[u-1],e[u])<a)return!0;return!1}function dc(t,e,i){var a=e.distSqr(i);if(0===a)return t.distSqr(e);var u=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/a;return t.distSqr(u<0?e:u>1?i:i.sub(e)._mult(u)._add(e))}function fc(t,e){for(var i,a,u,c=!1,h=0;h<t.length;h++)for(var m=0,_=(i=t[h]).length-1;m<i.length;_=m++)(a=i[m]).y>e.y!=(u=i[_]).y>e.y&&e.x<(u.x-a.x)*(e.y-a.y)/(u.y-a.y)+a.x&&(c=!c);return c}function Vs(t,e){for(var i=!1,a=0,u=t.length-1;a<t.length;u=a++){var c=t[a],h=t[u];c.y>e.y!=h.y>e.y&&e.x<(h.x-c.x)*(e.y-c.y)/(h.y-c.y)+c.x&&(i=!i)}return i}function jp(t,e,i){var a=i[0],u=i[2];if(t.x<a.x&&e.x<a.x||t.x>u.x&&e.x>u.x||t.y<a.y&&e.y<a.y||t.y>u.y&&e.y>u.y)return!1;var c=zt(t,e,i[0]);return c!==zt(t,e,i[1])||c!==zt(t,e,i[2])||c!==zt(t,e,i[3])}function ml(t,e,i){var a=e.paint.get(t).value;return"constant"===a.kind?a.value:i.programConfigurations.get(e.id).binders[t].maxValue}function Gl(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Xl(t,e,i,a,u){if(!e[0]&&!e[1])return t;var c=et.convert(e)._mult(u);"viewport"===i&&c._rotate(-a);for(var h=[],m=0;m<t.length;m++)h.push(t[m].sub(c));return h}Ma.prototype.populate=function(t,e){var i=this.layers[0],a=[],u=null;"circle"===i.type&&(u=i.layout.get("circle-sort-key"));for(var c=0,h=t;c<h.length;c+=1){var m=h[c],_=m.feature,T=m.id,C=m.index,M=m.sourceLayerIndex;if(this.layers[0]._featureFilter(new Pr(this.zoom),_)){var R=js(_),O=u?u.evaluate(_,{}):void 0;a.push({id:T,properties:_.properties,type:_.type,sourceLayerIndex:M,index:C,geometry:R,patterns:{},sortKey:O})}}u&&a.sort(function(Gt,be){return Gt.sortKey-be.sortKey});for(var Y=0,it=a;Y<it.length;Y+=1){var ot=it[Y],wt=ot.geometry,It=ot.index,qt=ot.sourceLayerIndex,Jt=t[It].feature;this.addFeature(ot,wt,It),e.featureIndex.insert(Jt,wt,It,qt,this.index)}},Ma.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Ma.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ma.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ma.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Yr),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ma.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ma.prototype.addFeature=function(t,e,i){for(var a=0,u=e;a<u.length;a+=1)for(var c=0,h=u[a];c<h.length;c+=1){var m=h[c],_=m.x,T=m.y;if(!(_<0||_>=mn||T<0||T>=mn)){var C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),M=C.vertexLength;Wl(this.layoutVertexArray,_,T,-1,-1),Wl(this.layoutVertexArray,_,T,1,-1),Wl(this.layoutVertexArray,_,T,1,1),Wl(this.layoutVertexArray,_,T,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),C.vertexLength+=4,C.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{})},oe("CircleBucket",Ma,{omit:["layers"]});var yl,e,Vp=new o({"circle-sort-key":new hi(x.layout_circle["circle-sort-key"])}),qp={paint:new o({"circle-radius":new hi(x.paint_circle["circle-radius"]),"circle-color":new hi(x.paint_circle["circle-color"]),"circle-blur":new hi(x.paint_circle["circle-blur"]),"circle-opacity":new hi(x.paint_circle["circle-opacity"]),"circle-translate":new Ve(x.paint_circle["circle-translate"]),"circle-translate-anchor":new Ve(x.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ve(x.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ve(x.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new hi(x.paint_circle["circle-stroke-width"]),"circle-stroke-color":new hi(x.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new hi(x.paint_circle["circle-stroke-opacity"])}),layout:Vp},ya="undefined"!=typeof Float32Array?Float32Array:Array;function $l(t,e,i){var a=e[0],u=e[1],c=e[2],h=e[3];return t[0]=i[0]*a+i[4]*u+i[8]*c+i[12]*h,t[1]=i[1]*a+i[5]*u+i[9]*c+i[13]*h,t[2]=i[2]*a+i[6]*u+i[10]*c+i[14]*h,t[3]=i[3]*a+i[7]*u+i[11]*c+i[15]*h,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,i=arguments.length;i--;)e+=t[i]*t[i];return Math.sqrt(e)}),yl=new ya(3),ya!=Float32Array&&(yl[0]=0,yl[1]=0,yl[2]=0),e=new ya(4),ya!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0);var Zp=function(t){function e(i){t.call(this,i,qp)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(i){return new Ma(i)},e.prototype.queryRadius=function(i){var a=i;return ml("circle-radius",this,a)+ml("circle-stroke-width",this,a)+Gl(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(i,a,u,c,h,m,_,T){for(var C=Xl(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,_),M=this.paint.get("circle-radius").evaluate(a,u)+this.paint.get("circle-stroke-width").evaluate(a,u),R="map"===this.paint.get("circle-pitch-alignment"),O=R?C:function(Gt,be){return Gt.map(function(He){return mc(He,be)})}(C,T),B=R?M*_:M,Y=0,it=c;Y<it.length;Y+=1)for(var ot=0,Tt=it[Y];ot<Tt.length;ot+=1){var wt=Tt[ot],It=R?wt:mc(wt,T),qt=B,Jt=$l([],[wt.x,wt.y,0,1],T);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?qt*=Jt[3]/m.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(qt*=m.cameraToCenterDistance/Jt[3]),Fp(O,It,qt))return!0}return!1},e}(n);function mc(t,e){var i=$l([],[t.x,t.y,0,1],e);return new et(i[0]/i[3],i[1]/i[3])}var yc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ma);function zu(t,e,i,a){var u=e.width,c=e.height;if(a){if(a instanceof Uint8ClampedArray)a=new Uint8Array(a.buffer);else if(a.length!==u*c*i)throw new RangeError("mismatched image size")}else a=new Uint8Array(u*c*i);return t.width=u,t.height=c,t.data=a,t}function gc(t,e,i){var a=e.width,u=e.height;if(a!==t.width||u!==t.height){var c=zu({},{width:a,height:u},i);Pu(t,c,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,a),height:Math.min(t.height,u)},i),t.width=a,t.height=u,t.data=c.data}}function Pu(t,e,i,a,u,c){if(0===u.width||0===u.height)return e;if(u.width>t.width||u.height>t.height||i.x>t.width-u.width||i.y>t.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>e.width||u.height>e.height||a.x>e.width-u.width||a.y>e.height-u.height)throw new RangeError("out of range destination coordinates for image copy");for(var h=t.data,m=e.data,_=0;_<u.height;_++)for(var T=((i.y+_)*t.width+i.x)*c,C=((a.y+_)*e.width+a.x)*c,M=0;M<u.width*c;M++)m[C+M]=h[T+M];return e}oe("HeatmapBucket",yc,{omit:["layers"]});var Ts=function(t,e){zu(this,t,1,e)};Ts.prototype.resize=function(t){gc(this,t,1)},Ts.prototype.clone=function(){return new Ts({width:this.width,height:this.height},new Uint8Array(this.data))},Ts.copy=function(t,e,i,a,u){Pu(t,e,i,a,u,1)};var so=function(t,e){zu(this,t,4,e)};so.prototype.resize=function(t){gc(this,t,4)},so.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},so.prototype.clone=function(){return new so({width:this.width,height:this.height},new Uint8Array(this.data))},so.copy=function(t,e,i,a,u){Pu(t,e,i,a,u,4)},oe("AlphaImage",Ts),oe("RGBAImage",so);var Wp={paint:new o({"heatmap-radius":new hi(x.paint_heatmap["heatmap-radius"]),"heatmap-weight":new hi(x.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ve(x.paint_heatmap["heatmap-intensity"]),"heatmap-color":new r(x.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ve(x.paint_heatmap["heatmap-opacity"])})};function vc(t,e){for(var i=new Uint8Array(1024),a={},u=0,c=0;u<256;u++,c+=4){a[e]=u/255;var h=t.evaluate(a);i[c+0]=Math.floor(255*h.r/h.a),i[c+1]=Math.floor(255*h.g/h.a),i[c+2]=Math.floor(255*h.b/h.a),i[c+3]=Math.floor(255*h.a)}return new so({width:256,height:1},i)}var Gp=function(t){function e(i){t.call(this,i,Wp),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(i){return new yc(i)},e.prototype._handleSpecialPaintPropertyUpdate=function(i){"heatmap-color"===i&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=vc(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(n),Xp={paint:new o({"hillshade-illumination-direction":new Ve(x.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ve(x.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ve(x.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ve(x.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ve(x.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ve(x.paint_hillshade["hillshade-accent-color"])})},$p=function(t){function e(i){t.call(this,i,Xp)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(n),_c=y([{name:"a_pos",components:2,type:"Int16"}],4).members,Mu=Kl,Kp=Kl;function Kl(t,e,i){i=i||2;var a,u,c,h,m,_,T,C=e&&e.length,M=C?e[0]*i:t.length,R=xc(t,0,M,i,!0),O=[];if(!R||R.next===R.prev)return O;if(C&&(R=function(Y,it,ot,Tt){var wt,It,Gt,be=[];for(wt=0,It=it.length;wt<It;wt++)(Gt=xc(Y,it[wt]*Tt,wt<It-1?it[wt+1]*Tt:Y.length,Tt,!1))===Gt.next&&(Gt.steiner=!0),be.push(nh(Gt));for(be.sort(eh),wt=0;wt<be.length;wt++)ih(be[wt],ot),ot=hs(ot,ot.next);return ot}(t,e,R,i)),t.length>80*i){a=c=t[0],u=h=t[1];for(var B=i;B<M;B+=i)(m=t[B])<a&&(a=m),(_=t[B+1])<u&&(u=_),m>c&&(c=m),_>h&&(h=_);T=0!==(T=Math.max(c-a,h-u))?1/T:0}return gl(R,O,i,a,u,T),O}function xc(t,e,i,a,u){var c,h;if(u===Ou(t,e,i,a)>0)for(c=e;c<i;c+=a)h=Sc(c,t[c],t[c+1],h);else for(c=i-a;c>=e;c-=a)h=Sc(c,t[c],t[c+1],h);return h&&Yl(h,h.next)&&(_l(h),h=h.next),h}function hs(t,e){if(!t)return t;e||(e=t);var i,a=t;do{if(i=!1,a.steiner||!Yl(a,a.next)&&0!==cn(a.prev,a,a.next))a=a.next;else{if(_l(a),(a=e=a.prev)===a.next)break;i=!0}}while(i||a!==e);return e}function gl(t,e,i,a,u,c,h){if(t){!h&&c&&function(C,M,R,O){var B=C;do{null===B.z&&(B.z=Du(B.x,B.y,M,R,O)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next}while(B!==C);B.prevZ.nextZ=null,B.prevZ=null,function(Y){var it,ot,Tt,wt,It,qt,Jt,Gt,be=1;do{for(ot=Y,Y=null,It=null,qt=0;ot;){for(qt++,Tt=ot,Jt=0,it=0;it<be&&(Jt++,Tt=Tt.nextZ);it++);for(Gt=be;Jt>0||Gt>0&&Tt;)0!==Jt&&(0===Gt||!Tt||ot.z<=Tt.z)?(wt=ot,ot=ot.nextZ,Jt--):(wt=Tt,Tt=Tt.nextZ,Gt--),It?It.nextZ=wt:Y=wt,wt.prevZ=It,It=wt;ot=Tt}It.nextZ=null,be*=2}while(qt>1)}(B)}(t,a,u,c);for(var m,_,T=t;t.prev!==t.next;)if(m=t.prev,_=t.next,c?Jp(t,a,u,c):Yp(t))e.push(m.i/i),e.push(t.i/i),e.push(_.i/i),_l(t),t=_.next,T=_.next;else if((t=_)===T){h?1===h?gl(t=Qp(hs(t),e,i),e,i,a,u,c,2):2===h&&th(t,e,i,a,u,c):gl(hs(t),e,i,a,u,c,1);break}}}function Yp(t){var e=t.prev,i=t,a=t.next;if(cn(e,i,a)>=0)return!1;for(var u=t.next.next;u!==t.prev;){if(qs(e.x,e.y,i.x,i.y,a.x,a.y,u.x,u.y)&&cn(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function Jp(t,e,i,a){var u=t.prev,c=t,h=t.next;if(cn(u,c,h)>=0)return!1;for(var T=u.x>c.x?u.x>h.x?u.x:h.x:c.x>h.x?c.x:h.x,C=u.y>c.y?u.y>h.y?u.y:h.y:c.y>h.y?c.y:h.y,M=Du(u.x<c.x?u.x<h.x?u.x:h.x:c.x<h.x?c.x:h.x,u.y<c.y?u.y<h.y?u.y:h.y:c.y<h.y?c.y:h.y,e,i,a),R=Du(T,C,e,i,a),O=t.prevZ,B=t.nextZ;O&&O.z>=M&&B&&B.z<=R;){if(O!==t.prev&&O!==t.next&&qs(u.x,u.y,c.x,c.y,h.x,h.y,O.x,O.y)&&cn(O.prev,O,O.next)>=0||(O=O.prevZ,B!==t.prev&&B!==t.next&&qs(u.x,u.y,c.x,c.y,h.x,h.y,B.x,B.y)&&cn(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;O&&O.z>=M;){if(O!==t.prev&&O!==t.next&&qs(u.x,u.y,c.x,c.y,h.x,h.y,O.x,O.y)&&cn(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;B&&B.z<=R;){if(B!==t.prev&&B!==t.next&&qs(u.x,u.y,c.x,c.y,h.x,h.y,B.x,B.y)&&cn(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function Qp(t,e,i){var a=t;do{var u=a.prev,c=a.next.next;!Yl(u,c)&&bc(u,a,a.next,c)&&vl(u,c)&&vl(c,u)&&(e.push(u.i/i),e.push(a.i/i),e.push(c.i/i),_l(a),_l(a.next),a=t=c),a=a.next}while(a!==t);return hs(a)}function th(t,e,i,a,u,c){var h=t;do{for(var m=h.next.next;m!==h.prev;){if(h.i!==m.i&&oh(h,m)){var _=wc(h,m);return h=hs(h,h.next),_=hs(_,_.next),gl(h,e,i,a,u,c),void gl(_,e,i,a,u,c)}m=m.next}h=h.next}while(h!==t)}function eh(t,e){return t.x-e.x}function ih(t,e){if(e=function(a,u){var c,h=u,m=a.x,_=a.y,T=-1/0;do{if(_<=h.y&&_>=h.next.y&&h.next.y!==h.y){var C=h.x+(_-h.y)*(h.next.x-h.x)/(h.next.y-h.y);if(C<=m&&C>T){if(T=C,C===m){if(_===h.y)return h;if(_===h.next.y)return h.next}c=h.x<h.next.x?h:h.next}}h=h.next}while(h!==u);if(!c)return null;if(m===T)return c;var M,R=c,O=c.x,B=c.y,Y=1/0;h=c;do{m>=h.x&&h.x>=O&&m!==h.x&&qs(_<B?m:T,_,O,B,_<B?T:m,_,h.x,h.y)&&(M=Math.abs(_-h.y)/(m-h.x),vl(h,a)&&(M<Y||M===Y&&(h.x>c.x||h.x===c.x&&rh(c,h)))&&(c=h,Y=M)),h=h.next}while(h!==R);return c}(t,e)){var i=wc(e,t);hs(e,e.next),hs(i,i.next)}}function rh(t,e){return cn(t.prev,t,e.prev)<0&&cn(e.next,t,t.next)<0}function Du(t,e,i,a,u){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*u)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-a)*u)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function nh(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function qs(t,e,i,a,u,c,h,m){return(u-h)*(e-m)-(t-h)*(c-m)>=0&&(t-h)*(a-m)-(i-h)*(e-m)>=0&&(i-h)*(c-m)-(u-h)*(a-m)>=0}function oh(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(i,a){var u=i;do{if(u.i!==i.i&&u.next.i!==i.i&&u.i!==a.i&&u.next.i!==a.i&&bc(u,u.next,i,a))return!0;u=u.next}while(u!==i);return!1}(t,e)&&(vl(t,e)&&vl(e,t)&&function(i,a){var u=i,c=!1,h=(i.x+a.x)/2,m=(i.y+a.y)/2;do{u.y>m!=u.next.y>m&&u.next.y!==u.y&&h<(u.next.x-u.x)*(m-u.y)/(u.next.y-u.y)+u.x&&(c=!c),u=u.next}while(u!==i);return c}(t,e)&&(cn(t.prev,t,e.prev)||cn(t,e.prev,e))||Yl(t,e)&&cn(t.prev,t,t.next)>0&&cn(e.prev,e,e.next)>0)}function cn(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Yl(t,e){return t.x===e.x&&t.y===e.y}function bc(t,e,i,a){var u=Ql(cn(t,e,i)),c=Ql(cn(t,e,a)),h=Ql(cn(i,a,t)),m=Ql(cn(i,a,e));return u!==c&&h!==m||!(0!==u||!Jl(t,i,e))||!(0!==c||!Jl(t,a,e))||!(0!==h||!Jl(i,t,a))||!(0!==m||!Jl(i,e,a))}function Jl(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Ql(t){return t>0?1:t<0?-1:0}function vl(t,e){return cn(t.prev,t,t.next)<0?cn(t,e,t.next)>=0&&cn(t,t.prev,e)>=0:cn(t,e,t.prev)<0||cn(t,t.next,e)<0}function wc(t,e){var i=new Lu(t.i,t.x,t.y),a=new Lu(e.i,e.x,e.y),u=t.next,c=e.prev;return t.next=e,e.prev=t,i.next=u,u.prev=i,a.next=i,i.prev=a,c.next=a,a.prev=c,a}function Sc(t,e,i,a){var u=new Lu(t,e,i);return a?(u.next=a.next,u.prev=a,a.next.prev=u,a.next=u):(u.prev=u,u.next=u),u}function _l(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Lu(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ou(t,e,i,a){for(var u=0,c=e,h=i-a;c<i;c+=a)u+=(t[h]-t[c])*(t[c+1]+t[h+1]),h=c;return u}function ah(t,e,i,a,u){!function c(h,m,_,T,C){for(;T>_;){if(T-_>600){var M=T-_+1,R=m-_+1,O=Math.log(M),B=.5*Math.exp(2*O/3),Y=.5*Math.sqrt(O*B*(M-B)/M)*(R-M/2<0?-1:1);c(h,m,Math.max(_,Math.floor(m-R*B/M+Y)),Math.min(T,Math.floor(m+(M-R)*B/M+Y)),C)}var Tt=h[m],wt=_,It=T;for(xl(h,_,m),C(h[T],Tt)>0&&xl(h,_,T);wt<It;){for(xl(h,wt,It),wt++,It--;C(h[wt],Tt)<0;)wt++;for(;C(h[It],Tt)>0;)It--}0===C(h[_],Tt)?xl(h,_,It):xl(h,++It,T),It<=m&&(_=It+1),m<=It&&(T=It-1)}}(t,e,i||0,a||t.length-1,u||sh)}function xl(t,e,i){var a=t[e];t[e]=t[i],t[i]=a}function sh(t,e){return t<e?-1:t>e?1:0}function Ru(t,e){var i=t.length;if(i<=1)return[t];for(var a,u,c=[],h=0;h<i;h++){var m=Ht(t[h]);0!==m&&(t[h].area=Math.abs(m),void 0===u&&(u=m<0),u===m<0?(a&&c.push(a),a=[t[h]]):a.push(t[h]))}if(a&&c.push(a),e>1)for(var _=0;_<c.length;_++)c[_].length<=e||(ah(c[_],e,1,c[_].length-1,lh),c[_]=c[_].slice(0,e));return c}function lh(t,e){return e.area-t.area}function Bu(t,e,i){for(var a=i.patternDependencies,u=!1,c=0,h=e;c<h.length;c+=1){var m=h[c].paint.get(t+"-pattern");m.isConstant()||(u=!0);var _=m.constantOr(null);_&&(u=!0,a[_.to]=!0,a[_.from]=!0)}return u}function Fu(t,e,i,a,u){for(var c=u.patternDependencies,h=0,m=e;h<m.length;h+=1){var _=m[h],T=_.paint.get(t+"-pattern").value;if("constant"!==T.kind){var C=T.evaluate({zoom:a-1},i,{},u.availableImages),M=T.evaluate({zoom:a},i,{},u.availableImages),R=T.evaluate({zoom:a+1},i,{},u.availableImages);M=M&&M.name?M.name:M,R=R&&R.name?R.name:R,c[C=C&&C.name?C.name:C]=!0,c[M]=!0,c[R]=!0,i.patterns[_.id]={min:C,mid:M,max:R}}}return i}Kl.deviation=function(t,e,i,a){var u=e&&e.length,h=Math.abs(Ou(t,0,u?e[0]*i:t.length,i));if(u)for(var m=0,_=e.length;m<_;m++)h-=Math.abs(Ou(t,e[m]*i,m<_-1?e[m+1]*i:t.length,i));var M=0;for(m=0;m<a.length;m+=3){var R=a[m]*i,O=a[m+1]*i,B=a[m+2]*i;M+=Math.abs((t[R]-t[B])*(t[O+1]-t[R+1])-(t[R]-t[O])*(t[B+1]-t[R+1]))}return 0===h&&0===M?0:Math.abs((M-h)/h)},Kl.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},a=0,u=0;u<t.length;u++){for(var c=0;c<t[u].length;c++)for(var h=0;h<e;h++)i.vertices.push(t[u][c][h]);u>0&&i.holes.push(a+=t[u-1].length)}return i},Mu.default=Kp;var ga=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new S,this.indexArray=new De,this.indexArray2=new Ce,this.programConfigurations=new So(_c,t.layers,t.zoom),this.segments=new Er,this.segments2=new Er,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};ga.prototype.populate=function(t,e){this.hasPattern=Bu("fill",this.layers,e);for(var i=this.layers[0].layout.get("fill-sort-key"),a=[],u=0,c=t;u<c.length;u+=1){var h=c[u],m=h.feature,_=h.id,T=h.index,C=h.sourceLayerIndex;if(this.layers[0]._featureFilter(new Pr(this.zoom),m)){var M=js(m),R=i?i.evaluate(m,{},e.availableImages):void 0;a.push({id:_,properties:m.properties,type:m.type,sourceLayerIndex:C,index:T,geometry:M,patterns:{},sortKey:R})}}i&&a.sort(function(Gt,be){return Gt.sortKey-be.sortKey});for(var B=0,Y=a;B<Y.length;B+=1){var it=Y[B],Tt=it.geometry,wt=it.index,It=it.sourceLayerIndex;if(this.hasPattern){var qt=Fu("fill",this.layers,it,this.zoom,e);this.patternFeatures.push(qt)}else this.addFeature(it,Tt,wt,{});e.featureIndex.insert(t[wt].feature,Tt,wt,It,this.index)}},ga.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},ga.prototype.addFeatures=function(t,e){for(var i=0,a=this.patternFeatures;i<a.length;i+=1){var u=a[i];this.addFeature(u,u.geometry,u.index,e)}},ga.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ga.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ga.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_c),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},ga.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ga.prototype.addFeature=function(t,e,i,a){for(var u=0,c=Ru(e,500);u<c.length;u+=1){for(var h=c[u],m=0,_=0,T=h;_<T.length;_+=1)m+=T[_].length;for(var C=this.segments.prepareSegment(m,this.layoutVertexArray,this.indexArray),M=C.vertexLength,R=[],O=[],B=0,Y=h;B<Y.length;B+=1){var it=Y[B];if(0!==it.length){it!==h[0]&&O.push(R.length/2);var ot=this.segments2.prepareSegment(it.length,this.layoutVertexArray,this.indexArray2),Tt=ot.vertexLength;this.layoutVertexArray.emplaceBack(it[0].x,it[0].y),this.indexArray2.emplaceBack(Tt+it.length-1,Tt),R.push(it[0].x),R.push(it[0].y);for(var wt=1;wt<it.length;wt++)this.layoutVertexArray.emplaceBack(it[wt].x,it[wt].y),this.indexArray2.emplaceBack(Tt+wt-1,Tt+wt),R.push(it[wt].x),R.push(it[wt].y);ot.vertexLength+=it.length,ot.primitiveLength+=it.length}}for(var It=Mu(R,O),qt=0;qt<It.length;qt+=3)this.indexArray.emplaceBack(M+It[qt],M+It[qt+1],M+It[qt+2]);C.vertexLength+=m,C.primitiveLength+=It.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,a)},oe("FillBucket",ga,{omit:["layers","patternFeatures"]});var uh=new o({"fill-sort-key":new hi(x.layout_fill["fill-sort-key"])}),ch={paint:new o({"fill-antialias":new Ve(x.paint_fill["fill-antialias"]),"fill-opacity":new hi(x.paint_fill["fill-opacity"]),"fill-color":new hi(x.paint_fill["fill-color"]),"fill-outline-color":new hi(x.paint_fill["fill-outline-color"]),"fill-translate":new Ve(x.paint_fill["fill-translate"]),"fill-translate-anchor":new Ve(x.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ns(x.paint_fill["fill-pattern"])}),layout:uh},ph=function(t){function e(i){t.call(this,i,ch)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(i,a){t.prototype.recalculate.call(this,i,a);var u=this.paint._values["fill-outline-color"];"constant"===u.value.kind&&void 0===u.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(i){return new ga(i)},e.prototype.queryRadius=function(){return Gl(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(i,a,u,c,h,m,_){return hc(Xl(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,_),c)},e.prototype.isTileClipped=function(){return!0},e}(n),Tc=y([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Ec=Hs;function Hs(t,e,i,a,u){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=a,this._values=u,t.readFields(hh,this,e)}function hh(t,e,i){1==t?e.id=i.readVarint():2==t?function(a,u){for(var c=a.readVarint()+a.pos;a.pos<c;){var h=u._keys[a.readVarint()],m=u._values[a.readVarint()];u.properties[h]=m}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function dh(t){for(var e,i,a=0,u=0,c=t.length,h=c-1;u<c;h=u++)a+=((i=t[h]).x-(e=t[u]).x)*(e.y+i.y);return a}Hs.types=["Unknown","Point","LineString","Polygon"],Hs.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,a=1,u=0,c=0,h=0,m=[];t.pos<i;){if(u<=0){var _=t.readVarint();a=7&_,u=_>>3}if(u--,1===a||2===a)c+=t.readSVarint(),h+=t.readSVarint(),1===a&&(e&&m.push(e),e=[]),e.push(new et(c,h));else{if(7!==a)throw new Error("unknown command "+a);e&&e.push(e[0].clone())}}return e&&m.push(e),m},Hs.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,a=0,u=0,c=0,h=1/0,m=-1/0,_=1/0,T=-1/0;t.pos<e;){if(a<=0){var C=t.readVarint();i=7&C,a=C>>3}if(a--,1===i||2===i)(u+=t.readSVarint())<h&&(h=u),u>m&&(m=u),(c+=t.readSVarint())<_&&(_=c),c>T&&(T=c);else if(7!==i)throw new Error("unknown command "+i)}return[h,_,m,T]},Hs.prototype.toGeoJSON=function(t,e,i){var a,u,c=this.extent*Math.pow(2,i),h=this.extent*t,m=this.extent*e,_=this.loadGeometry(),T=Hs.types[this.type];function C(O){for(var B=0;B<O.length;B++){var Y=O[B];O[B]=[360*(Y.x+h)/c-180,360/Math.PI*Math.atan(Math.exp((180-360*(Y.y+m)/c)*Math.PI/180))-90]}}switch(this.type){case 1:var M=[];for(a=0;a<_.length;a++)M[a]=_[a][0];C(_=M);break;case 2:for(a=0;a<_.length;a++)C(_[a]);break;case 3:for(_=function(O){var B=O.length;if(B<=1)return[O];for(var Y,it,ot=[],Tt=0;Tt<B;Tt++){var wt=dh(O[Tt]);0!==wt&&(void 0===it&&(it=wt<0),it===wt<0?(Y&&ot.push(Y),Y=[O[Tt]]):Y.push(O[Tt]))}return Y&&ot.push(Y),ot}(_),a=0;a<_.length;a++)for(u=0;u<_[a].length;u++)C(_[a][u])}1===_.length?_=_[0]:T="Multi"+T;var R={type:"Feature",geometry:{type:T,coordinates:_},properties:this.properties};return"id"in this&&(R.id=this.id),R};var Cc=Ic;function Ic(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(fh,this,e),this.length=this._features.length}function fh(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(a){for(var u=null,c=a.readVarint()+a.pos;a.pos<c;){var h=a.readVarint()>>3;u=1===h?a.readString():2===h?a.readFloat():3===h?a.readDouble():4===h?a.readVarint64():5===h?a.readVarint():6===h?a.readSVarint():7===h?a.readBoolean():null}return u}(i))}function mh(t,e,i){if(3===t){var a=new Cc(i,i.readVarint()+i.pos);a.length&&(e[a.name]=a)}}Ic.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Ec(this._pbf,e,this.extent,this._keys,this._values)};var Zs={VectorTile:function(t,e){this.layers=t.readFields(mh,{},e)},VectorTileFeature:Ec,VectorTileLayer:Cc},yh=Zs.VectorTileFeature.types,Uu=Math.pow(2,13);function bl(t,e,i,a,u,c,h,m){t.emplaceBack(e,i,2*Math.floor(a*Uu)+h,u*Uu*2,c*Uu*2,Math.round(m))}var va=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new L,this.indexArray=new De,this.programConfigurations=new So(Tc,t.layers,t.zoom),this.segments=new Er,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function gh(t,e){return t.x===e.x&&(t.x<0||t.x>mn)||t.y===e.y&&(t.y<0||t.y>mn)}function vh(t){return t.every(function(e){return e.x<0})||t.every(function(e){return e.x>mn})||t.every(function(e){return e.y<0})||t.every(function(e){return e.y>mn})}va.prototype.populate=function(t,e){this.features=[],this.hasPattern=Bu("fill-extrusion",this.layers,e);for(var i=0,a=t;i<a.length;i+=1){var u=a[i],c=u.feature,h=u.id,m=u.index,_=u.sourceLayerIndex;if(this.layers[0]._featureFilter(new Pr(this.zoom),c)){var T=js(c),C={id:h,sourceLayerIndex:_,index:m,geometry:T,properties:c.properties,type:c.type,patterns:{}};void 0!==c.id&&(C.id=c.id),this.hasPattern?this.features.push(Fu("fill-extrusion",this.layers,C,this.zoom,e)):this.addFeature(C,T,m,{}),e.featureIndex.insert(c,T,m,_,this.index,!0)}}},va.prototype.addFeatures=function(t,e){for(var i=0,a=this.features;i<a.length;i+=1){var u=a[i];this.addFeature(u,u.geometry,u.index,e)}},va.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},va.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},va.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},va.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Tc),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},va.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},va.prototype.addFeature=function(t,e,i,a){for(var u=0,c=Ru(e,500);u<c.length;u+=1){for(var h=c[u],m=0,_=0,T=h;_<T.length;_+=1)m+=T[_].length;for(var C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),M=0,R=h;M<R.length;M+=1){var O=R[M];if(0!==O.length&&!vh(O))for(var B=0,Y=0;Y<O.length;Y++){var it=O[Y];if(Y>=1){var ot=O[Y-1];if(!gh(it,ot)){C.vertexLength+4>Er.MAX_VERTEX_ARRAY_LENGTH&&(C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Tt=it.sub(ot)._perp()._unit(),wt=ot.dist(it);B+wt>32768&&(B=0),bl(this.layoutVertexArray,it.x,it.y,Tt.x,Tt.y,0,0,B),bl(this.layoutVertexArray,it.x,it.y,Tt.x,Tt.y,0,1,B),bl(this.layoutVertexArray,ot.x,ot.y,Tt.x,Tt.y,0,0,B+=wt),bl(this.layoutVertexArray,ot.x,ot.y,Tt.x,Tt.y,0,1,B);var It=C.vertexLength;this.indexArray.emplaceBack(It,It+2,It+1),this.indexArray.emplaceBack(It+1,It+2,It+3),C.vertexLength+=4,C.primitiveLength+=2}}}}if(C.vertexLength+m>Er.MAX_VERTEX_ARRAY_LENGTH&&(C=this.segments.prepareSegment(m,this.layoutVertexArray,this.indexArray)),"Polygon"===yh[t.type]){for(var qt=[],Jt=[],Gt=C.vertexLength,be=0,He=h;be<He.length;be+=1){var Oe=He[be];if(0!==Oe.length){Oe!==h[0]&&Jt.push(qt.length/2);for(var Ke=0;Ke<Oe.length;Ke++){var Re=Oe[Ke];bl(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),qt.push(Re.x),qt.push(Re.y)}}}for(var Ee=Mu(qt,Jt),pe=0;pe<Ee.length;pe+=3)this.indexArray.emplaceBack(Gt+Ee[pe],Gt+Ee[pe+2],Gt+Ee[pe+1]);C.primitiveLength+=Ee.length/3,C.vertexLength+=m}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,a)},oe("FillExtrusionBucket",va,{omit:["layers","features"]});var _h={paint:new o({"fill-extrusion-opacity":new Ve(x["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new hi(x["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ve(x["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ve(x["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ns(x["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new hi(x["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new hi(x["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ve(x["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},xh=function(t){function e(i){t.call(this,i,_h)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(i){return new va(i)},e.prototype.queryRadius=function(){return Gl(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(i,a,u,c,h,m,_,T){var C=Xl(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,_),M=this.paint.get("fill-extrusion-height").evaluate(a,u),R=this.paint.get("fill-extrusion-base").evaluate(a,u),O=function(Y,it,ot,Tt){for(var wt=[],It=0,qt=Y;It<qt.length;It+=1){var Jt=qt[It],Gt=[Jt.x,Jt.y,0,1];$l(Gt,Gt,it),wt.push(new et(Gt[0]/Gt[3],Gt[1]/Gt[3]))}return wt}(C,T),B=function(Y,it,ot,Tt){for(var wt=[],It=[],qt=Tt[8]*it,Jt=Tt[9]*it,Gt=Tt[10]*it,be=Tt[11]*it,He=Tt[8]*ot,Oe=Tt[9]*ot,Ke=Tt[10]*ot,Re=Tt[11]*ot,Ee=0,pe=Y;Ee<pe.length;Ee+=1){for(var gr=[],Qi=[],mi=0,Ai=pe[Ee];mi<Ai.length;mi+=1){var Oi=Ai[mi],bi=Oi.x,Pi=Oi.y,rr=Tt[0]*bi+Tt[4]*Pi+Tt[12],Fr=Tt[1]*bi+Tt[5]*Pi+Tt[13],Vr=Tt[2]*bi+Tt[6]*Pi+Tt[14],Un=Tt[3]*bi+Tt[7]*Pi+Tt[15],Nn=Vr+Gt,nn=Un+be,wn=rr+He,Pn=Fr+Oe,jn=Vr+Ke,yn=Un+Re,Ur=new et((rr+qt)/nn,(Fr+Jt)/nn);Ur.z=Nn/nn,gr.push(Ur);var Jr=new et(wn/yn,Pn/yn);Jr.z=jn/yn,Qi.push(Jr)}wt.push(gr),It.push(Qi)}return[wt,It]}(c,R,M,T);return function(Y,it,ot){var Tt=1/0;hc(ot,it)&&(Tt=kc(ot,it[0]));for(var wt=0;wt<it.length;wt++)for(var It=it[wt],qt=Y[wt],Jt=0;Jt<It.length-1;Jt++){var Gt=It[Jt],Ke=[Gt,It[Jt+1],qt[Jt+1],qt[Jt],Gt];pc(ot,Ke)&&(Tt=Math.min(Tt,kc(ot,Ke)))}return Tt!==1/0&&Tt}(B[0],B[1],O)},e}(n);function wl(t,e){return t.x*e.x+t.y*e.y}function kc(t,e){if(1===t.length){for(var i,a,u=0,c=e[u++];!i||c.equals(i);)if(!(i=e[u++]))return 1/0;for(;!a||c.equals(a)||i.equals(a);)if(!(a=e[u++]))return 1/0;var h=t[0],m=i.sub(c),_=a.sub(c),T=h.sub(c),C=wl(m,m),M=wl(m,_),R=wl(_,_),O=wl(T,m),B=wl(T,_),Y=C*R-M*M,it=(R*O-M*B)/Y,ot=(C*B-M*O)/Y;return c.z*(1-it-ot)+i.z*it+a.z*ot}for(var wt=1/0,It=0,qt=e;It<qt.length;It+=1)wt=Math.min(wt,qt[It].z);return wt}var Ac=y([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,bh=Zs.VectorTileFeature.types,wh=Math.cos(Math.PI/180*37.5),zc=Math.pow(2,14)/.5,ho=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new U,this.indexArray=new De,this.programConfigurations=new So(Ac,t.layers,t.zoom),this.segments=new Er,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};ho.prototype.populate=function(t,e){this.hasPattern=Bu("line",this.layers,e);for(var i=this.layers[0].layout.get("line-sort-key"),a=[],u=0,c=t;u<c.length;u+=1){var h=c[u],m=h.feature,_=h.id,T=h.index,C=h.sourceLayerIndex;if(this.layers[0]._featureFilter(new Pr(this.zoom),m)){var M=js(m),R=i?i.evaluate(m,{}):void 0;a.push({id:_,properties:m.properties,type:m.type,sourceLayerIndex:C,index:T,geometry:M,patterns:{},sortKey:R})}}i&&a.sort(function(Gt,be){return Gt.sortKey-be.sortKey});for(var B=0,Y=a;B<Y.length;B+=1){var it=Y[B],Tt=it.geometry,wt=it.index,It=it.sourceLayerIndex;if(this.hasPattern){var qt=Fu("line",this.layers,it,this.zoom,e);this.patternFeatures.push(qt)}else this.addFeature(it,Tt,wt,{});e.featureIndex.insert(t[wt].feature,Tt,wt,It,this.index)}},ho.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},ho.prototype.addFeatures=function(t,e){for(var i=0,a=this.patternFeatures;i<a.length;i+=1){var u=a[i];this.addFeature(u,u.geometry,u.index,e)}},ho.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ho.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ho.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ac),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ho.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ho.prototype.addFeature=function(t,e,i,a){for(var u=this.layers[0].layout,c=u.get("line-join").evaluate(t,{}),h=u.get("line-cap"),m=u.get("line-miter-limit"),_=u.get("line-round-limit"),T=0,C=e;T<C.length;T+=1)this.addLine(C[T],t,c,h,m,_,i,a)},ho.prototype.addLine=function(t,e,i,a,u,c,h,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var _=0;_<t.length-1;_++)this.totalDistance+=t[_].dist(t[_+1])}for(var T="Polygon"===bh[e.type],C=t.length;C>=2&&t[C-1].equals(t[C-2]);)C--;for(var M=0;M<C-1&&t[M].equals(t[M+1]);)M++;if(!(C<(T?3:2))){"bevel"===i&&(u=1.05);var R,O=this.overscaling<=16?15*mn/(512*this.overscaling):0,B=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),Y=void 0,it=void 0,ot=void 0,Tt=void 0;this.e1=this.e2=-1,T&&(Tt=t[M].sub(R=t[C-2])._unit()._perp());for(var wt=M;wt<C;wt++)if(!(it=T&&wt===C-1?t[M+1]:t[wt+1])||!t[wt].equals(it)){Tt&&(ot=Tt),R&&(Y=R),R=t[wt],Tt=it?it.sub(R)._unit()._perp():ot;var It=(ot=ot||Tt).add(Tt);0===It.x&&0===It.y||It._unit();var qt=ot.x*Tt.x+ot.y*Tt.y,Jt=It.x*Tt.x+It.y*Tt.y,Gt=0!==Jt?1/Jt:1/0,be=2*Math.sqrt(2-2*Jt),He=Jt<wh&&Y&&it,Oe=ot.x*Tt.y-ot.y*Tt.x>0;if(He&&wt>M){var Ke=R.dist(Y);if(Ke>2*O){var Re=R.sub(R.sub(Y)._mult(O/Ke)._round());this.updateDistance(Y,Re),this.addCurrentVertex(Re,ot,0,0,B),Y=Re}}var Ee=Y&&it,pe=Ee?i:T?"butt":a;if(Ee&&"round"===pe&&(Gt<c?pe="miter":Gt<=2&&(pe="fakeround")),"miter"===pe&&Gt>u&&(pe="bevel"),"bevel"===pe&&(Gt>2&&(pe="flipbevel"),Gt<u&&(pe="miter")),Y&&this.updateDistance(Y,R),"miter"===pe)It._mult(Gt),this.addCurrentVertex(R,It,0,0,B);else if("flipbevel"===pe){if(Gt>100)It=Tt.mult(-1);else{var ki=Gt*ot.add(Tt).mag()/ot.sub(Tt).mag();It._perp()._mult(ki*(Oe?-1:1))}this.addCurrentVertex(R,It,0,0,B),this.addCurrentVertex(R,It.mult(-1),0,0,B)}else if("bevel"===pe||"fakeround"===pe){var gr=-Math.sqrt(Gt*Gt-1),Qi=Oe?gr:0,mi=Oe?0:gr;if(Y&&this.addCurrentVertex(R,ot,Qi,mi,B),"fakeround"===pe)for(var Ai=Math.round(180*be/Math.PI/20),Oi=1;Oi<Ai;Oi++){var bi=Oi/Ai;if(.5!==bi){var Pi=bi-.5;bi+=bi*Pi*(bi-1)*((1.0904+qt*(qt*(3.55645-1.43519*qt)-3.2452))*Pi*Pi+(.848013+qt*(.215638*qt-1.06021)))}var rr=Tt.sub(ot)._mult(bi)._add(ot)._unit()._mult(Oe?-1:1);this.addHalfVertex(R,rr.x,rr.y,!1,Oe,0,B)}it&&this.addCurrentVertex(R,Tt,-Qi,-mi,B)}else if("butt"===pe)this.addCurrentVertex(R,It,0,0,B);else if("square"===pe){var Fr=Y?1:-1;this.addCurrentVertex(R,It,Fr,Fr,B)}else"round"===pe&&(Y&&(this.addCurrentVertex(R,ot,0,0,B),this.addCurrentVertex(R,ot,1,1,B,!0)),it&&(this.addCurrentVertex(R,Tt,-1,-1,B,!0),this.addCurrentVertex(R,Tt,0,0,B)));if(He&&wt<C-1){var Vr=R.dist(it);if(Vr>2*O){var Un=R.add(it.sub(R)._mult(O/Vr)._round());this.updateDistance(R,Un),this.addCurrentVertex(Un,Tt,0,0,B),R=Un}}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,m)}},ho.prototype.addCurrentVertex=function(t,e,i,a,u,c){void 0===c&&(c=!1);var _=e.y*a-e.x,T=-e.y-e.x*a;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,c,!1,i,u),this.addHalfVertex(t,_,T,c,!0,-a,u),this.distance>zc/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,a,u,c))},ho.prototype.addHalfVertex=function(t,e,i,a,u,c,h){var T=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((t.x<<1)+(a?1:0),(t.y<<1)+(u?1:0),Math.round(63*e)+128,Math.round(63*i)+128,1+(0===c?0:c<0?-1:1)|(63&T)<<2,T>>6);var C=h.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),h.primitiveLength++),u?this.e2=C:this.e1=C},ho.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(zc-1):this.distance},oe("LineBucket",ho,{omit:["layers","patternFeatures"]});var Sh=new o({"line-cap":new Ve(x.layout_line["line-cap"]),"line-join":new hi(x.layout_line["line-join"]),"line-miter-limit":new Ve(x.layout_line["line-miter-limit"]),"line-round-limit":new Ve(x.layout_line["line-round-limit"]),"line-sort-key":new hi(x.layout_line["line-sort-key"])}),Pc={paint:new o({"line-opacity":new hi(x.paint_line["line-opacity"]),"line-color":new hi(x.paint_line["line-color"]),"line-translate":new Ve(x.paint_line["line-translate"]),"line-translate-anchor":new Ve(x.paint_line["line-translate-anchor"]),"line-width":new hi(x.paint_line["line-width"]),"line-gap-width":new hi(x.paint_line["line-gap-width"]),"line-offset":new hi(x.paint_line["line-offset"]),"line-blur":new hi(x.paint_line["line-blur"]),"line-dasharray":new Za(x.paint_line["line-dasharray"]),"line-pattern":new Ns(x.paint_line["line-pattern"]),"line-gradient":new r(x.paint_line["line-gradient"])}),layout:Sh},Mc=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(i,a){return a=new Pr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),t.prototype.possiblyEvaluate.call(this,i,a)},e.prototype.evaluate=function(i,a,u,c){return a=vt({},a,{zoom:Math.floor(a.zoom)}),t.prototype.evaluate.call(this,i,a,u,c)},e}(hi))(Pc.paint.properties["line-width"].specification);Mc.useIntegerZoom=!0;var Th=function(t){function e(i){t.call(this,i,Pc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(i){"line-gradient"===i&&this._updateGradient()},e.prototype._updateGradient=function(){this.gradient=vc(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(i,a){t.prototype.recalculate.call(this,i,a),this.paint._values["line-floorwidth"]=Mc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},e.prototype.createBucket=function(i){return new ho(i)},e.prototype.queryRadius=function(i){var a=i,u=Dc(ml("line-width",this,a),ml("line-gap-width",this,a)),c=ml("line-offset",this,a);return u/2+Math.abs(c)+Gl(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(i,a,u,c,h,m,_){var T=Xl(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,_),C=_/2*Dc(this.paint.get("line-width").evaluate(a,u),this.paint.get("line-gap-width").evaluate(a,u)),M=this.paint.get("line-offset").evaluate(a,u);return M&&(c=function(R,O){for(var B=[],Y=new et(0,0),it=0;it<R.length;it++){for(var ot=R[it],Tt=[],wt=0;wt<ot.length;wt++){var qt=ot[wt],Jt=ot[wt+1],Gt=0===wt?Y:qt.sub(ot[wt-1])._unit()._perp(),be=wt===ot.length-1?Y:Jt.sub(qt)._unit()._perp(),He=Gt._add(be)._unit();He._mult(1/(He.x*be.x+He.y*be.y)),Tt.push(He._mult(O)._add(qt))}B.push(Tt)}return B}(c,M*_)),function(R,O,B){for(var Y=0;Y<O.length;Y++){var it=O[Y];if(R.length>=3)for(var ot=0;ot<it.length;ot++)if(Vs(R,it[ot]))return!0;if(Up(R,it,B))return!0}return!1}(T,c,C)},e.prototype.isTileClipped=function(){return!0},e}(n);function Dc(t,e){return e>0?e+2*t:t}var Nu=y([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Eh=y([{name:"a_projected_pos",components:3,type:"Float32"}],4),Ch=(y([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),y([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Lc=(y([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),y([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Oc=y([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Ih(t,e,i){return t.sections.forEach(function(a){var u,h,m;a.text=(u=a.text,h=i,"uppercase"===(m=e.layout.get("text-transform").evaluate(h,{}))?u=u.toLocaleUpperCase():"lowercase"===m&&(u=u.toLocaleLowerCase()),kn.applyArabicShaping&&(u=kn.applyArabicShaping(u)),u)}),t}y([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),y([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"}]),y([{type:"Float32",name:"offsetX"}]),y([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Sl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Rc=function(t,e,i,a,u){var c,h,m=8*u-a-1,_=(1<<m)-1,T=_>>1,C=-7,M=i?u-1:0,R=i?-1:1,O=t[e+M];for(M+=R,c=O&(1<<-C)-1,O>>=-C,C+=m;C>0;c=256*c+t[e+M],M+=R,C-=8);for(h=c&(1<<-C)-1,c>>=-C,C+=a;C>0;h=256*h+t[e+M],M+=R,C-=8);if(0===c)c=1-T;else{if(c===_)return h?NaN:1/0*(O?-1:1);h+=Math.pow(2,a),c-=T}return(O?-1:1)*h*Math.pow(2,c-a)},Bc=function(t,e,i,a,u,c){var h,m,_,T=8*c-u-1,C=(1<<T)-1,M=C>>1,R=23===u?Math.pow(2,-24)-Math.pow(2,-77):0,O=a?0:c-1,B=a?1:-1,Y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(m=isNaN(e)?1:0,h=C):(h=Math.floor(Math.log(e)/Math.LN2),e*(_=Math.pow(2,-h))<1&&(h--,_*=2),(e+=h+M>=1?R/_:R*Math.pow(2,1-M))*_>=2&&(h++,_/=2),h+M>=C?(m=0,h=C):h+M>=1?(m=(e*_-1)*Math.pow(2,u),h+=M):(m=e*Math.pow(2,M-1)*Math.pow(2,u),h=0));u>=8;t[i+O]=255&m,O+=B,m/=256,u-=8);for(h=h<<u|m,T+=u;T>0;t[i+O]=255&h,O+=B,h/=256,T-=8);t[i+O-B]|=128*Y},tu=Mr;function Mr(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Mr.Varint=0,Mr.Fixed64=1,Mr.Bytes=2,Mr.Fixed32=5;var Fc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function $a(t){return t.type===Mr.Bytes?t.readVarint()+t.pos:t.pos+1}function Uc(t,e,i){var a=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(a);for(var u=i.pos-1;u>=t;u--)i.buf[u+a]=i.buf[u]}function kh(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function Ah(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function zh(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function Ph(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Mh(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function Dh(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function Lh(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function Oh(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function Rh(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function eu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Gs(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function Nc(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Bh(t,e,i){1===t&&i.readMessage(Fh,e)}function Fh(t,e,i){if(3===t){var a=i.readMessage(Uh,{}),h=a.width,m=a.height,_=a.left,T=a.top,C=a.advance;e.push({id:a.id,bitmap:new Ts({width:h+6,height:m+6},a.bitmap),metrics:{width:h,height:m,left:_,top:T,advance:C}})}}function Uh(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function Vc(t){for(var e=0,i=0,a=0,u=t;a<u.length;a+=1){var c=u[a];e+=c.w*c.h,i=Math.max(i,c.w)}t.sort(function(Y,it){return it.h-Y.h});for(var h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],m=0,_=0,T=0,C=t;T<C.length;T+=1)for(var M=C[T],R=h.length-1;R>=0;R--){var O=h[R];if(!(M.w>O.w||M.h>O.h)){if(M.x=O.x,M.y=O.y,_=Math.max(_,M.y+M.h),m=Math.max(m,M.x+M.w),M.w===O.w&&M.h===O.h){var B=h.pop();R<h.length&&(h[R]=B)}else M.h===O.h?(O.x+=M.w,O.w-=M.w):M.w===O.w?(O.y+=M.h,O.h-=M.h):(h.push({x:O.x+M.w,y:O.y,w:O.w-M.w,h:M.h}),O.y+=M.h,O.h-=M.h);break}}return{w:m,h:_,fill:e/(m*_)||0}}Mr.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),u=a>>3,c=this.pos;this.type=7&a,t(u,e,this),this.pos===c&&this.skip(a)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=eu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Nc(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=eu(this.buf,this.pos)+4294967296*eu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=eu(this.buf,this.pos)+4294967296*Nc(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Rc(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Rc(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,a=this.buf;return e=127&(i=a[this.pos++]),i<128?e:(e|=(127&(i=a[this.pos++]))<<7,i<128?e:(e|=(127&(i=a[this.pos++]))<<14,i<128?e:(e|=(127&(i=a[this.pos++]))<<21,i<128?e:function(u,c,h){var m,_,T=h.buf;if(m=(112&(_=T[h.pos++]))>>4,_<128||(m|=(127&(_=T[h.pos++]))<<3,_<128)||(m|=(127&(_=T[h.pos++]))<<10,_<128)||(m|=(127&(_=T[h.pos++]))<<17,_<128)||(m|=(127&(_=T[h.pos++]))<<24,_<128)||(m|=(1&(_=T[h.pos++]))<<31,_<128))return function Ws(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}(u,m,c);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=a[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Fc?Fc.decode(this.buf.subarray(e,t)):function(i,a,u){for(var c="",h=a;h<u;){var m,_,T,C=i[h],M=null,R=C>239?4:C>223?3:C>191?2:1;if(h+R>u)break;1===R?C<128&&(M=C):2===R?128==(192&(m=i[h+1]))&&(M=(31&C)<<6|63&m)<=127&&(M=null):3===R?(_=i[h+2],128==(192&(m=i[h+1]))&&128==(192&_)&&((M=(15&C)<<12|(63&m)<<6|63&_)<=2047||M>=55296&&M<=57343)&&(M=null)):4===R&&(_=i[h+2],T=i[h+3],128==(192&(m=i[h+1]))&&128==(192&_)&&128==(192&T)&&((M=(15&C)<<18|(63&m)<<12|(63&_)<<6|63&T)<=65535||M>=1114112)&&(M=null)),null===M?(M=65533,R=1):M>65535&&(M-=65536,c+=String.fromCharCode(M>>>10&1023|55296),M=56320|1023&M),c+=String.fromCharCode(M),h+=R}return c}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Mr.Bytes)return t.push(this.readVarint(e));var i=$a(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Mr.Bytes)return t.push(this.readSVarint());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Mr.Bytes)return t.push(this.readBoolean());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Mr.Bytes)return t.push(this.readFloat());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Mr.Bytes)return t.push(this.readDouble());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Mr.Bytes)return t.push(this.readFixed32());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Mr.Bytes)return t.push(this.readSFixed32());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Mr.Bytes)return t.push(this.readFixed64());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Mr.Bytes)return t.push(this.readSFixed64());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Mr.Varint)for(;this.buf[this.pos++]>127;);else if(e===Mr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Mr.Fixed32)this.pos+=4;else{if(e!==Mr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Gs(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Gs(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Gs(this.buf,-1&t,this.pos),Gs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Gs(this.buf,-1&t,this.pos),Gs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(e,i){var a,u,c,m;if(e>=0?(a=e%4294967296|0,u=e/4294967296|0):(u=~(-e/4294967296),4294967295^(a=~(-e%4294967296))?a=a+1|0:(a=0,u=u+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),c=a,(m=i).buf[m.pos++]=127&c|128,c>>>=7,m.buf[m.pos++]=127&c|128,c>>>=7,m.buf[m.pos++]=127&c|128,c>>>=7,m.buf[m.pos++]=127&c|128,m.buf[m.pos]=127&(c>>>=7),function(c,h){var m=(7&c)<<4;h.buf[h.pos++]|=m|((c>>>=3)?128:0),c&&(h.buf[h.pos++]=127&c|((c>>>=7)?128:0),c&&(h.buf[h.pos++]=127&c|((c>>>=7)?128:0),c&&(h.buf[h.pos++]=127&c|((c>>>=7)?128:0),c&&(h.buf[h.pos++]=127&c|((c>>>=7)?128:0),c&&(h.buf[h.pos++]=127&c)))))}(u,i)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(a,u,c){for(var h,m,_=0;_<u.length;_++){if((h=u.charCodeAt(_))>55295&&h<57344){if(!m){h>56319||_+1===u.length?(a[c++]=239,a[c++]=191,a[c++]=189):m=h;continue}if(h<56320){a[c++]=239,a[c++]=191,a[c++]=189,m=h;continue}h=m-55296<<10|h-56320|65536,m=null}else m&&(a[c++]=239,a[c++]=191,a[c++]=189,m=null);h<128?a[c++]=h:(h<2048?a[c++]=h>>6|192:(h<65536?a[c++]=h>>12|224:(a[c++]=h>>18|240,a[c++]=h>>12&63|128),a[c++]=h>>6&63|128),a[c++]=63&h|128)}return c}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&Uc(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Bc(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Bc(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var a=this.pos-i;a>=128&&Uc(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(t,e,i){this.writeTag(t,Mr.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,kh,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Ah,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Mh,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,zh,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Ph,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Dh,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Lh,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Oh,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Rh,e)},writeBytesField:function(t,e){this.writeTag(t,Mr.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Mr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Mr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Mr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Mr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Mr.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Mr.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Mr.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Mr.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Mr.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var iu=function(t,e){var i=e.pixelRatio,a=e.version,u=e.stretchX,c=e.stretchY,h=e.content;this.paddedRect=t,this.pixelRatio=i,this.stretchX=u,this.stretchY=c,this.content=h,this.version=a},Tl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Tl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Tl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Tl.tlbr.get=function(){return this.tl.concat(this.br)},Tl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(iu.prototype,Tl);var El=function(t,e){var i={},a={};this.haveRenderCallbacks=[];var u=[];this.addImages(t,i,u),this.addImages(e,a,u);var c=Vc(u),_=new so({width:c.w||1,height:c.h||1});for(var T in t){var C=t[T],M=i[T].paddedRect;so.copy(C.data,_,{x:0,y:0},{x:M.x+1,y:M.y+1},C.data)}for(var R in e){var O=e[R],B=a[R].paddedRect,Y=B.x+1,it=B.y+1,ot=O.data.width,Tt=O.data.height;so.copy(O.data,_,{x:0,y:0},{x:Y,y:it},O.data),so.copy(O.data,_,{x:0,y:Tt-1},{x:Y,y:it-1},{width:ot,height:1}),so.copy(O.data,_,{x:0,y:0},{x:Y,y:it+Tt},{width:ot,height:1}),so.copy(O.data,_,{x:ot-1,y:0},{x:Y-1,y:it},{width:1,height:Tt}),so.copy(O.data,_,{x:0,y:0},{x:Y+ot,y:it},{width:1,height:Tt})}this.image=_,this.iconPositions=i,this.patternPositions=a};El.prototype.addImages=function(t,e,i){for(var a in t){var u=t[a],c={x:0,y:0,w:u.data.width+2,h:u.data.height+2};i.push(c),e[a]=new iu(c,u),u.hasRenderCallback&&this.haveRenderCallbacks.push(a)}},El.prototype.patchUpdatedImages=function(t,e){for(var i in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)},El.prototype.patchUpdatedImage=function(t,e,i){if(t&&e&&t.version!==e.version){t.version=e.version;var a=t.tl;i.update(e.data,void 0,{x:a[0],y:a[1]})}},oe("ImagePosition",iu),oe("ImageAtlas",El);var To={horizontal:1,vertical:2,horizontalOnly:3},Xs=function(){this.scale=1,this.fontStack="",this.imageName=null};Xs.forText=function(t,e){var i=new Xs;return i.scale=t||1,i.fontStack=e,i},Xs.forImage=function(t){var e=new Xs;return e.imageName=t,e};var Yn=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ru(t,e,i,a,u,c,h,m,_,T,C,M,R,O,B,Y){var it,ot=Yn.fromFeature(t,u);M===To.vertical&&ot.verticalizePunctuation();var Tt=kn.processBidirectionalText,wt=kn.processStyledBidirectionalText;if(Tt&&1===ot.sections.length){it=[];for(var It=0,qt=Tt(ot.toString(),Vu(ot,T,c,e,a,O,B));It<qt.length;It+=1){var Jt=qt[It],Gt=new Yn;Gt.text=Jt,Gt.sections=ot.sections;for(var be=0;be<Jt.length;be++)Gt.sectionIndex.push(0);it.push(Gt)}}else if(wt){it=[];for(var He=0,Oe=wt(ot.text,ot.sectionIndex,Vu(ot,T,c,e,a,O,B));He<Oe.length;He+=1){var Ke=Oe[He],Re=new Yn;Re.text=Ke[0],Re.sectionIndex=Ke[1],Re.sections=ot.sections,it.push(Re)}}else it=function(ki,gr){for(var Qi=[],mi=ki.text,Ai=0,Oi=0,bi=gr;Oi<bi.length;Oi+=1){var Pi=bi[Oi];Qi.push(ki.substring(Ai,Pi)),Ai=Pi}return Ai<mi.length&&Qi.push(ki.substring(Ai,mi.length)),Qi}(ot,Vu(ot,T,c,e,a,O,B));var Ee=[],pe={positionedLines:Ee,text:ot.toString(),top:C[1],bottom:C[1],left:C[0],right:C[0],writingMode:M,iconsInText:!1,verticalizable:!1};return function(ki,gr,Qi,mi,Ai,Oi,bi,Pi,rr,Fr,Vr,Un){for(var Nn=0,nn=-17,wn=0,Pn=0,jn="right"===Pi?1:"left"===Pi?0:.5,yn=0,Ur=0,Jr=Ai;Ur<Jr.length;Ur+=1){var Bi=Jr[Ur];Bi.trim();var dr=Bi.getMaxScale(),Dr=24*(dr-1),Lr={positionedGlyphs:[],lineOffset:0};ki.positionedLines[yn]=Lr;var gn=Lr.positionedGlyphs,wr=0;if(Bi.length()){for(var Mn=0;Mn<Bi.length();Mn++){var qr=Bi.getSection(Mn),xa=Bi.getSectionIndex(Mn),Vn=Bi.getCharCode(Mn),Jn=0,Vo=null,Sn=null,oa=null,Da=24,ba=!(rr===To.horizontal||!Vr&&!Bn(Vn)||Vr&&(nu[Vn]||(ms=Vn,ce.Arabic(ms)||ce["Arabic Supplement"](ms)||ce["Arabic Extended-A"](ms)||ce["Arabic Presentation Forms-A"](ms)||ce["Arabic Presentation Forms-B"](ms))));if(qr.imageName){var Pl=mi[qr.imageName];if(!Pl)continue;oa=qr.imageName,ki.iconsInText=ki.iconsInText||!0,Sn=Pl.paddedRect;var La=Pl.displaySize;qr.scale=24*qr.scale/Un,Jn=Dr+(24-La[1]*qr.scale),Da=(Vo={width:La[0],height:La[1],left:1,top:-3,advance:ba?La[1]:La[0]}).advance;var rl=ba?La[0]*qr.scale-24*dr:La[1]*qr.scale-24*dr;rl>0&&rl>wr&&(wr=rl)}else{var du=Qi[qr.fontStack],nl=du&&du[Vn];if(nl&&nl.rect)Sn=nl.rect,Vo=nl.metrics;else{var Ml=gr[qr.fontStack],fu=Ml&&Ml[Vn];if(!fu)continue;Vo=fu.metrics}Jn=24*(dr-qr.scale)}ba?(ki.verticalizable=!0,gn.push({glyph:Vn,imageName:oa,x:Nn,y:nn+Jn,vertical:ba,scale:qr.scale,fontStack:qr.fontStack,sectionIndex:xa,metrics:Vo,rect:Sn}),Nn+=Da*qr.scale+Fr):(gn.push({glyph:Vn,imageName:oa,x:Nn,y:nn+Jn,vertical:ba,scale:qr.scale,fontStack:qr.fontStack,sectionIndex:xa,metrics:Vo,rect:Sn}),Nn+=Vo.advance*qr.scale+Fr)}0!==gn.length&&(wn=Math.max(Nn-Fr,wn),jh(gn,0,gn.length-1,jn,wr)),Nn=0;var Dl=Oi*dr+wr;Lr.lineOffset=Math.max(wr,Dr),nn+=Dl,Pn=Math.max(Dl,Pn),++yn}else nn+=Oi,++yn}var ms,As=nn- -17,ys=qu(bi),ol=ys.horizontalAlign,Ll=ys.verticalAlign;(function(mu,Qu,Ol,Rl,yu,gu,al,vu,Bl){var sl,_u=(Qu-Ol)*yu;sl=gu!==al?-vu*Rl- -17:(-Rl*Bl+.5)*al;for(var ll=0,Fl=mu;ll<Fl.length;ll+=1)for(var zs=0,Ul=Fl[ll].positionedGlyphs;zs<Ul.length;zs+=1){var ul=Ul[zs];ul.x+=_u,ul.y+=sl}})(ki.positionedLines,jn,ol,Ll,wn,Pn,Oi,As,Ai.length),ki.top+=-Ll*As,ki.bottom=ki.top+As,ki.left+=-ol*wn,ki.right=ki.left+wn}(pe,e,i,a,it,h,m,_,M,T,R,Y),!function(ki){for(var gr=0,Qi=ki;gr<Qi.length;gr+=1)if(0!==Qi[gr].positionedGlyphs.length)return!1;return!0}(Ee)&&pe}Yn.fromFeature=function(t,e){for(var i=new Yn,a=0;a<t.sections.length;a++){var u=t.sections[a];u.image?i.addImageSection(u):i.addTextSection(u,e)}return i},Yn.prototype.length=function(){return this.text.length},Yn.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Yn.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},Yn.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Yn.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",i=0;i<t.length;i++){var a=t.charCodeAt(i+1)||null,u=t.charCodeAt(i-1)||null;a&&fn(a)&&!Sl[t[i+1]]||u&&fn(u)&&!Sl[t[i-1]]||!Sl[t[i]]?e+=t[i]:e+=Sl[t[i]]}return e}(this.text)},Yn.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&nu[this.text.charCodeAt(e)];e++)t++;for(var i=this.text.length,a=this.text.length-1;a>=0&&a>=t&&nu[this.text.charCodeAt(a)];a--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)},Yn.prototype.substring=function(t,e){var i=new Yn;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i},Yn.prototype.toString=function(){return this.text},Yn.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,i){return Math.max(e,t.sections[i].scale)},0)},Yn.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(Xs.forText(t.scale,t.fontStack||e));for(var i=this.sections.length-1,a=0;a<t.text.length;++a)this.sectionIndex.push(i)},Yn.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(Xs.forImage(e)),this.sectionIndex.push(this.sections.length-1)):ae("Reached maximum number of images 6401")}else ae("Can't add FormattedSection with an empty image.")},Yn.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var nu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},mo={};function qc(t,e,i,a,u,c){if(e.imageName){var h=a[e.imageName];return h?h.displaySize[0]*e.scale*24/c+u:0}var m=i[e.fontStack],_=m&&m[t];return _?_.metrics.advance*e.scale+u:0}function Hc(t,e,i,a){var u=Math.pow(t-e,2);return a?t<e?u/2:2*u:u+Math.abs(i)*i}function Nh(t,e,i){var a=0;return 10===t&&(a-=1e4),i&&(a+=150),40!==t&&65288!==t||(a+=50),41!==e&&65289!==e||(a+=50),a}function Zc(t,e,i,a,u,c){for(var h=null,m=Hc(e,i,u,c),_=0,T=a;_<T.length;_+=1){var C=T[_],M=Hc(e-C.x,i,u,c)+C.badness;M<=m&&(h=C,m=M)}return{index:t,x:e,priorBreak:h,badness:m}}function Vu(t,e,i,a,u,c,h){if("point"!==c)return[];if(!t)return[];for(var m,_=[],T=function(it,ot,Tt,wt,It,qt){for(var Jt=0,Gt=0;Gt<it.length();Gt++){var be=it.getSection(Gt);Jt+=qc(it.getCharCode(Gt),be,wt,It,ot,qt)}return Jt/Math.max(1,Math.ceil(Jt/Tt))}(t,e,i,a,u,h),C=t.text.indexOf("\u200b")>=0,M=0,R=0;R<t.length();R++){var O=t.getSection(R),B=t.getCharCode(R);if(nu[B]||(M+=qc(B,O,a,u,e,h)),R<t.length()-1){var Y=!((m=B)<11904||!(ce["Bopomofo Extended"](m)||ce.Bopomofo(m)||ce["CJK Compatibility Forms"](m)||ce["CJK Compatibility Ideographs"](m)||ce["CJK Compatibility"](m)||ce["CJK Radicals Supplement"](m)||ce["CJK Strokes"](m)||ce["CJK Symbols and Punctuation"](m)||ce["CJK Unified Ideographs Extension A"](m)||ce["CJK Unified Ideographs"](m)||ce["Enclosed CJK Letters and Months"](m)||ce["Halfwidth and Fullwidth Forms"](m)||ce.Hiragana(m)||ce["Ideographic Description Characters"](m)||ce["Kangxi Radicals"](m)||ce["Katakana Phonetic Extensions"](m)||ce.Katakana(m)||ce["Vertical Forms"](m)||ce["Yi Radicals"](m)||ce["Yi Syllables"](m)));(mo[B]||Y||O.imageName)&&_.push(Zc(R+1,M,T,_,Nh(B,t.getCharCode(R+1),Y&&C),!1))}}return function it(ot){return ot?it(ot.priorBreak).concat(ot.index):[]}(Zc(t.length(),M,T,_,0,!0))}function qu(t){var e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function jh(t,e,i,a,u){if(a||u)for(var c=t[i],m=(t[i].x+c.metrics.advance*c.scale)*a,_=e;_<=i;_++)t[_].x-=m,t[_].y+=u}function Wc(t,e,i,a,u,c){var h,m=t.image;if(m.content){var _=m.content,T=m.pixelRatio||1;h=[_[0]/T,_[1]/T,m.displaySize[0]-_[2]/T,m.displaySize[1]-_[3]/T]}var C,M,R,O,B=e.left*c,Y=e.right*c;"width"===i||"both"===i?(O=u[0]+B-a[3],M=u[0]+Y+a[1]):M=(O=u[0]+(B+Y-m.displaySize[0])/2)+m.displaySize[0];var it=e.top*c,ot=e.bottom*c;return"height"===i||"both"===i?(C=u[1]+it-a[0],R=u[1]+ot+a[2]):R=(C=u[1]+(it+ot-m.displaySize[1])/2)+m.displaySize[1],{image:m,top:C,right:M,bottom:R,left:O,collisionPadding:h}}mo[10]=!0,mo[32]=!0,mo[38]=!0,mo[40]=!0,mo[41]=!0,mo[43]=!0,mo[45]=!0,mo[47]=!0,mo[173]=!0,mo[183]=!0,mo[8203]=!0,mo[8208]=!0,mo[8211]=!0,mo[8231]=!0;var $s=function(t){function e(i,a,u,c){t.call(this,i,a),this.angle=u,void 0!==c&&(this.segment=c)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(et);oe("Anchor",$s);var _a=128;function Hu(t,e){var i=e.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new Pr(t+1))};if("source"===i.kind)return{kind:"source"};for(var a=i.zoomStops,u=i.interpolationType,c=0;c<a.length&&a[c]<=t;)c++;for(var h=c=Math.max(0,c-1);h<a.length&&a[h]<t+1;)h++;h=Math.min(a.length-1,h);var m=a[c],_=a[h];return"composite"===i.kind?{kind:"composite",minZoom:m,maxZoom:_,interpolationType:u}:{kind:"camera",minZoom:m,maxZoom:_,minSize:i.evaluate(new Pr(m)),maxSize:i.evaluate(new Pr(_)),interpolationType:u}}function Gc(t,e,i){var a=e.uSize,c=i.lowerSize;return"source"===t.kind?c/_a:"composite"===t.kind?$r(c/_a,i.upperSize/_a,e.uSizeT):a}function Xc(t,e){var i=0,a=0;if("constant"===t.kind)a=t.layoutSize;else if("source"!==t.kind){var u=t.interpolationType,m=u?Yt(z.interpolationFactor(u,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?a=$r(t.minSize,t.maxSize,m):i=m}return{uSizeT:i,uSize:a}}var Vh=Object.freeze({__proto__:null,getSizeData:Hu,evaluateSizeForFeature:Gc,evaluateSizeForZoom:Xc,SIZE_PACK_FACTOR:_a});function $c(t,e,i,a,u){if(void 0===e.segment)return!0;for(var c=e,h=e.segment+1,m=0;m>-i/2;){if(--h<0)return!1;m-=t[h].dist(c),c=t[h]}m+=t[h].dist(t[h+1]),h++;for(var _=[],T=0;m<i/2;){var M=t[h],R=t[h+1];if(!R)return!1;var O=t[h-1].angleTo(M)-M.angleTo(R);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),_.push({distance:m,angleDelta:O}),T+=O;m-_[0].distance>a;)T-=_.shift().angleDelta;if(T>u)return!1;h++,m+=M.dist(R)}return!0}function Kc(t){for(var e=0,i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function Yc(t,e,i){return t?.6*e*i:0}function Jc(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function qh(t,e,i,a,u,c){for(var h=Yc(i,u,c),m=Jc(i,a)*c,_=0,T=Kc(t)/2,C=0;C<t.length-1;C++){var M=t[C],R=t[C+1],O=M.dist(R);if(_+O>T){var B=(T-_)/O,Y=$r(M.x,R.x,B),it=$r(M.y,R.y,B),ot=new $s(Y,it,R.angleTo(M),C);return ot._round(),!h||$c(t,ot,m,h,e)?ot:void 0}_+=O}}function Hh(t,e,i,a,u,c,h,m,_){var T=Yc(a,c,h),C=Jc(a,u),M=C*h,R=0===t[0].x||t[0].x===_||0===t[0].y||t[0].y===_;return e-M<e/4&&(e=M+e/4),function O(B,Y,it,ot,Tt,wt,It,qt,Jt){for(var Gt=wt/2,be=Kc(B),He=0,Oe=Y-it,Ke=[],Re=0;Re<B.length-1;Re++){for(var Ee=B[Re],pe=B[Re+1],ki=Ee.dist(pe),gr=pe.angleTo(Ee);Oe+it<He+ki;){var Qi=((Oe+=it)-He)/ki,mi=$r(Ee.x,pe.x,Qi),Ai=$r(Ee.y,pe.y,Qi);if(mi>=0&&mi<Jt&&Ai>=0&&Ai<Jt&&Oe-Gt>=0&&Oe+Gt<=be){var Oi=new $s(mi,Ai,gr,Re);Oi._round(),ot&&!$c(B,Oi,wt,ot,Tt)||Ke.push(Oi)}}He+=ki}return qt||Ke.length||It||(Ke=O(B,He/2,it,ot,Tt,wt,It,!0,Jt)),Ke}(t,R?e/2*m%e:(C/2+2*c)*h*m%e,e,T,i,M,R,!1,_)}function Qc(t,e,i,a){var u=[],c=t.image,h=c.pixelRatio,m=c.paddedRect.w-2,_=c.paddedRect.h-2,T=t.right-t.left,C=t.bottom-t.top,M=c.stretchX||[[0,m]],R=c.stretchY||[[0,_]],O=function(Oi,bi){return Oi+bi[1]-bi[0]},B=M.reduce(O,0),Y=R.reduce(O,0),it=m-B,ot=_-Y,Tt=0,wt=B,It=0,qt=Y,Jt=0,Gt=it,be=0,He=ot;if(c.content&&a){var Oe=c.content;Tt=ou(M,0,Oe[0]),It=ou(R,0,Oe[1]),wt=ou(M,Oe[0],Oe[2]),qt=ou(R,Oe[1],Oe[3]),Jt=Oe[0]-Tt,be=Oe[1]-It,Gt=Oe[2]-Oe[0]-wt,He=Oe[3]-Oe[1]-qt}var Ke=function(Oi,bi,Pi,rr){var Fr=au(Oi.stretch-Tt,wt,T,t.left),Vr=su(Oi.fixed-Jt,Gt,Oi.stretch,B),Un=au(bi.stretch-It,qt,C,t.top),Nn=su(bi.fixed-be,He,bi.stretch,Y),nn=au(Pi.stretch-Tt,wt,T,t.left),wn=su(Pi.fixed-Jt,Gt,Pi.stretch,B),Pn=au(rr.stretch-It,qt,C,t.top),jn=su(rr.fixed-be,He,rr.stretch,Y),yn=new et(Fr,Un),Ur=new et(nn,Un),Jr=new et(nn,Pn),Bi=new et(Fr,Pn),dr=new et(Vr/h,Nn/h),Dr=new et(wn/h,jn/h),Lr=e*Math.PI/180;if(Lr){var gn=Math.sin(Lr),wr=Math.cos(Lr),Mn=[wr,-gn,gn,wr];yn._matMult(Mn),Ur._matMult(Mn),Bi._matMult(Mn),Jr._matMult(Mn)}var qr=Oi.stretch+Oi.fixed,Vn=bi.stretch+bi.fixed;return{tl:yn,tr:Ur,bl:Bi,br:Jr,tex:{x:c.paddedRect.x+1+qr,y:c.paddedRect.y+1+Vn,w:Pi.stretch+Pi.fixed-qr,h:rr.stretch+rr.fixed-Vn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:dr,pixelOffsetBR:Dr,minFontScaleX:Gt/h/T,minFontScaleY:He/h/C,isSDF:i}};if(a&&(c.stretchX||c.stretchY))for(var Re=tp(M,it,B),Ee=tp(R,ot,Y),pe=0;pe<Re.length-1;pe++)for(var ki=Re[pe],gr=Re[pe+1],Qi=0;Qi<Ee.length-1;Qi++)u.push(Ke(ki,Ee[Qi],gr,Ee[Qi+1]));else u.push(Ke({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:m+1},{fixed:0,stretch:_+1}));return u}function ou(t,e,i){for(var a=0,u=0,c=t;u<c.length;u+=1){var h=c[u];a+=Math.max(e,Math.min(i,h[1]))-Math.max(e,Math.min(i,h[0]))}return a}function tp(t,e,i){for(var a=[{fixed:-1,stretch:0}],u=0,c=t;u<c.length;u+=1){var h=c[u],m=h[0],_=h[1],T=a[a.length-1];a.push({fixed:m-T.stretch,stretch:T.stretch}),a.push({fixed:m-T.stretch,stretch:T.stretch+(_-m)})}return a.push({fixed:e+1,stretch:i}),a}function au(t,e,i,a){return t/e*i+a}function su(t,e,i,a){return t-e*i/a}var Il=function(t,e,i,a,u,c,h,m,_,T,C,M){var R=h.top*m-_,O=h.bottom*m+_,B=h.left*m-_,Y=h.right*m+_,it=h.collisionPadding;if(it&&(B-=it[0]*m,R-=it[1]*m,Y+=it[2]*m,O+=it[3]*m),this.boxStartIndex=t.length,T){var ot=O-R,Tt=Y-B;ot>0&&(ot=Math.max(10*m,ot),this._addLineCollisionCircles(t,e,i,i.segment,Tt,ot,a,u,c,C))}else{if(M){var wt=new et(B,R),It=new et(Y,R),qt=new et(B,O),Jt=new et(Y,O),Gt=M*Math.PI/180;wt._rotate(Gt),It._rotate(Gt),qt._rotate(Gt),Jt._rotate(Gt),B=Math.min(wt.x,It.x,qt.x,Jt.x),Y=Math.max(wt.x,It.x,qt.x,Jt.x),R=Math.min(wt.y,It.y,qt.y,Jt.y),O=Math.max(wt.y,It.y,qt.y,Jt.y)}t.emplaceBack(i.x,i.y,B,R,Y,O,a,u,c,0,0)}this.boxEndIndex=t.length};Il.prototype._addLineCollisionCircles=function(t,e,i,a,u,c,h,m,_,T){var C=c/2,M=Math.floor(u/C)||1,R=1+.4*Math.log(T)/Math.LN2,O=Math.floor(M*R/2),B=-c/2,Y=i,it=a+1,ot=B,Tt=-u/2,wt=Tt-u/4;do{if(--it<0){if(ot>Tt)return;it=0;break}ot-=e[it].dist(Y),Y=e[it]}while(ot>wt);for(var It=e[it].dist(e[it+1]),qt=-O;qt<M+O;qt++){var Jt=qt*C,Gt=Tt+Jt;if(Jt<0&&(Gt+=Jt),Jt>u&&(Gt+=Jt-u),!(Gt<ot)){for(;ot+It<Gt;){if(ot+=It,1+ ++it>=e.length)return;It=e[it].dist(e[it+1])}var be=Gt-ot,He=e[it],Oe=e[it+1].sub(He)._unit()._mult(be)._add(He)._round(),Ke=Math.abs(Gt-B)<C?0:.8*(Gt-B);t.emplaceBack(Oe.x,Oe.y,-c/2,-c/2,c/2,c/2,h,m,_,c/2,Ke)}}};var Ys=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Zh),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Zh(t,e){return t<e?-1:t>e?1:0}function Wh(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);for(var a=1/0,u=1/0,c=-1/0,h=-1/0,m=t[0],_=0;_<m.length;_++){var T=m[_];(!_||T.x<a)&&(a=T.x),(!_||T.y<u)&&(u=T.y),(!_||T.x>c)&&(c=T.x),(!_||T.y>h)&&(h=T.y)}var R=Math.min(c-a,h-u),O=R/2,B=new Ys([],Gh);if(0===R)return new et(a,u);for(var Y=a;Y<c;Y+=R)for(var it=u;it<h;it+=R)B.push(new Js(Y+O,it+O,O,t));for(var ot=function(It){for(var qt=0,Jt=0,Gt=0,be=It[0],He=0,Oe=be.length,Ke=Oe-1;He<Oe;Ke=He++){var Re=be[He],Ee=be[Ke],pe=Re.x*Ee.y-Ee.x*Re.y;Jt+=(Re.x+Ee.x)*pe,Gt+=(Re.y+Ee.y)*pe,qt+=3*pe}return new Js(Jt/qt,Gt/qt,0,It)}(t),Tt=B.length;B.length;){var wt=B.pop();(wt.d>ot.d||!ot.d)&&(ot=wt,i&&console.log("found best %d after %d probes",Math.round(1e4*wt.d)/1e4,Tt)),wt.max-ot.d<=e||(B.push(new Js(wt.p.x-(O=wt.h/2),wt.p.y-O,O,t)),B.push(new Js(wt.p.x+O,wt.p.y-O,O,t)),B.push(new Js(wt.p.x-O,wt.p.y+O,O,t)),B.push(new Js(wt.p.x+O,wt.p.y+O,O,t)),Tt+=4)}return i&&(console.log("num probes: "+Tt),console.log("best distance: "+ot.d)),ot.p}function Gh(t,e){return e.max-t.max}function Js(t,e,i,a){this.p=new et(t,e),this.h=i,this.d=function(u,c){for(var h=!1,m=1/0,_=0;_<c.length;_++)for(var T=c[_],C=0,M=T.length,R=M-1;C<M;R=C++){var O=T[C],B=T[R];O.y>u.y!=B.y>u.y&&u.x<(B.x-O.x)*(u.y-O.y)/(B.y-O.y)+O.x&&(h=!h),m=Math.min(m,dc(u,O,B))}return(h?1:-1)*Math.sqrt(m)}(this.p,a),this.max=this.d+this.h*Math.SQRT2}Ys.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Ys.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Ys.prototype.peek=function(){return this.data[0]},Ys.prototype._up=function(t){for(var e=this.data,i=this.compare,a=e[t];t>0;){var u=t-1>>1,c=e[u];if(i(a,c)>=0)break;e[t]=c,t=u}e[t]=a},Ys.prototype._down=function(t){for(var e=this.data,i=this.compare,a=this.length>>1,u=e[t];t<a;){var c=1+(t<<1),h=e[c],m=c+1;if(m<this.length&&i(e[m],h)<0&&(c=m,h=e[m]),i(h,u)>=0)break;e[t]=h,t=c}e[t]=u};var Zu=Number.POSITIVE_INFINITY;function ep(t,e){return e[1]!==Zu?function(i,a,u){var c=0,h=0;switch(a=Math.abs(a),u=Math.abs(u),i){case"top-right":case"top-left":case"top":h=u-7;break;case"bottom-right":case"bottom-left":case"bottom":h=7-u}switch(i){case"top-right":case"bottom-right":case"right":c=-a;break;case"top-left":case"bottom-left":case"left":c=a}return[c,h]}(t,e[0],e[1]):function(i,a){var u=0,c=0;a<0&&(a=0);var h=a/Math.sqrt(2);switch(i){case"top-right":case"top-left":c=h-7;break;case"bottom-right":case"bottom-left":c=7-h;break;case"bottom":c=7-a;break;case"top":c=a-7}switch(i){case"top-right":case"bottom-right":u=-h;break;case"top-left":case"bottom-left":u=h;break;case"left":u=a;break;case"right":u=-a}return[u,c]}(t,e[0])}function Wu(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var ds=32640;function ip(t,e,i,a,u,c,h,m,_,T,C,M,R,O){var B=function(wt,It,qt,Jt,Gt,be,He,Oe){for(var Ke=Jt.layout.get("text-rotate").evaluate(be,{})*Math.PI/180,Re=[],Ee=0,pe=It.positionedLines;Ee<pe.length;Ee+=1)for(var ki=pe[Ee],gr=0,Qi=ki.positionedGlyphs;gr<Qi.length;gr+=1){var mi=Qi[gr];if(mi.rect){var Ai=mi.rect||{},Oi=4,bi=!0,Pi=1,rr=0,Fr=(Gt||Oe)&&mi.vertical,Vr=mi.metrics.advance*mi.scale/2;if(Oe&&It.verticalizable&&(rr=ki.lineOffset/2-(mi.imageName?-(24-mi.metrics.width*mi.scale)/2:24*(mi.scale-1))),mi.imageName){var nn=He[mi.imageName];bi=nn.sdf,Oi=1/(Pi=nn.pixelRatio)}var wn=Gt?[mi.x+Vr,mi.y]:[0,0],Pn=Gt?[0,0]:[mi.x+Vr+qt[0],mi.y+qt[1]-rr],jn=[0,0];Fr&&(jn=Pn,Pn=[0,0]);var yn=(mi.metrics.left-Oi)*mi.scale-Vr+Pn[0],Ur=(-mi.metrics.top-Oi)*mi.scale+Pn[1],Jr=yn+Ai.w*mi.scale/Pi,Bi=Ur+Ai.h*mi.scale/Pi,dr=new et(yn,Ur),Dr=new et(Jr,Ur),Lr=new et(yn,Bi),gn=new et(Jr,Bi);if(Fr){var wr=new et(-Vr,Vr- -17),Mn=-Math.PI/2,qr=12-Vr,Vn=new et(22-qr,-(mi.imageName?qr:0)),Jn=new(Function.prototype.bind.apply(et,[null].concat(jn)));dr._rotateAround(Mn,wr)._add(Vn)._add(Jn),Dr._rotateAround(Mn,wr)._add(Vn)._add(Jn),Lr._rotateAround(Mn,wr)._add(Vn)._add(Jn),gn._rotateAround(Mn,wr)._add(Vn)._add(Jn)}if(Ke){var Vo=Math.sin(Ke),Sn=Math.cos(Ke),oa=[Sn,-Vo,Vo,Sn];dr._matMult(oa),Dr._matMult(oa),Lr._matMult(oa),gn._matMult(oa)}var Da=new et(0,0),ba=new et(0,0);Re.push({tl:dr,tr:Dr,bl:Lr,br:gn,tex:Ai,writingMode:It.writingMode,glyphOffset:wn,sectionIndex:mi.sectionIndex,isSDF:bi,pixelOffsetTL:Da,pixelOffsetBR:ba,minFontScaleX:0,minFontScaleY:0})}}return Re}(0,i,m,u,c,h,a,t.allowVerticalPlacement),Y=t.textSizeData,it=null;"source"===Y.kind?(it=[_a*u.layout.get("text-size").evaluate(h,{})])[0]>ds&&ae(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Y.kind&&((it=[_a*O.compositeTextSizes[0].evaluate(h,{}),_a*O.compositeTextSizes[1].evaluate(h,{})])[0]>ds||it[1]>ds)&&ae(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,B,it,m,c,h,T,e,_.lineStartIndex,_.lineLength,R);for(var ot=0,Tt=C;ot<Tt.length;ot+=1)M[Tt[ot]]=t.text.placedSymbolArray.length-1;return 4*B.length}function rp(t){for(var e in t)return t[e];return null}function Xh(t,e,i,a){var u=t.compareText;if(e in u){for(var c=u[e],h=c.length-1;h>=0;h--)if(a.dist(c[h])<i)return!0}else u[e]=[];return u[e].push(a),!1}var $h=Zs.VectorTileFeature.types,Kh=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lu(t,e,i,a,u,c,h,m,_,T,C,M,R){var O=m?Math.min(ds,Math.round(m[0])):0,B=m?Math.min(ds,Math.round(m[1])):0;t.emplaceBack(e,i,Math.round(32*a),Math.round(32*u),c,h,(O<<1)+(_?1:0),B,16*T,16*C,256*M,256*R)}function Gu(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function Yh(t){for(var e=0,i=t.sections;e<i.length;e+=1)if(Mo(i[e].text))return!0;return!1}var Al=function(t){this.layoutVertexArray=new W,this.indexArray=new De,this.programConfigurations=t,this.segments=new Er,this.dynamicLayoutVertexArray=new G,this.opacityVertexArray=new H,this.placedSymbolArray=new vi};Al.prototype.upload=function(t,e,i,a){i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Nu.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Eh.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Kh,!0),this.opacityVertexBuffer.itemSize=1),(i||a)&&this.programConfigurations.upload(t)},Al.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},oe("SymbolBuffers",Al);var Es=function(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new Er,this.collisionVertexArray=new _t};Es.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Ch.members,!0)},Es.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},oe("CollisionBuffers",Es);var yr=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(h){return h.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasPaintOverrides=!1,this.hasRTLText=!1,this.sortKeyRanges=[];var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Hu(this.zoom,e["text-size"]),this.iconSizeData=Hu(this.zoom,e["icon-size"]);var i=this.layers[0].layout,a=i.get("symbol-sort-key"),u=i.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==u&&void 0!==a.constantOr(1),this.sortFeaturesByY=("viewport-y"===u||"auto"===u&&!this.sortFeaturesByKey)&&(i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement")),"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(function(h){return To[h]})),this.stateDependentLayerIds=this.layers.filter(function(h){return h.isStateDependent()}).map(function(h){return h.id}),this.sourceID=t.sourceID};yr.prototype.createArrays=function(){this.hasPaintOverrides=np.hasPaintOverrides(this.layers[0].layout),this.text=new Al(new So(Nu.members,this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Al(new So(Nu.members,this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.textCollisionBox=new Es(ut,Lc.members,Ce),this.iconCollisionBox=new Es(ut,Lc.members,Ce),this.textCollisionCircle=new Es(ut,Oc.members,De),this.iconCollisionCircle=new Es(ut,Oc.members,De),this.glyphOffsetArray=new hr,this.lineVertexArray=new $i,this.symbolInstances=new lr},yr.prototype.calculateGlyphDependencies=function(t,e,i,a,u){for(var c=0;c<t.length;c++)if(e[t.charCodeAt(c)]=!0,(i||a)&&u){var h=Sl[t.charAt(c)];h&&(e[h.charCodeAt(0)]=!0)}},yr.prototype.populate=function(t,e){var i=this.layers[0],a=i.layout,u=a.get("text-font"),c=a.get("text-field"),h=a.get("icon-image"),m=("constant"!==c.value.kind||c.value.value instanceof mr&&!c.value.value.isEmpty()||c.value.value.toString().length>0)&&("constant"!==u.value.kind||u.value.value.length>0),_=("constant"!==h.value.kind||!!h.value.value)&&Object.keys(h.parameters).length>0,T=a.get("symbol-sort-key");if(this.features=[],m||_){for(var C=e.iconDependencies,M=e.glyphDependencies,R=e.availableImages,O=new Pr(this.zoom),B=0,Y=t;B<Y.length;B+=1){var it=Y[B],ot=it.feature,Tt=it.id,wt=it.index,It=it.sourceLayerIndex;if(i._featureFilter(O,ot)){var qt=void 0;if(m){var Jt=i.getValueAndResolveTokens("text-field",ot,R),Gt=mr.factory(Jt);Yh(Gt)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===_s()||this.hasRTLText&&kn.isParsed())&&(qt=Ih(Gt,i,ot))}var be=void 0;if(_){var He=i.getValueAndResolveTokens("icon-image",ot,R);be=He instanceof Rr?He:Rr.fromString(He)}if(qt||be){var Oe=this.sortFeaturesByKey?T.evaluate(ot,{}):void 0,Ke={id:Tt,text:qt,icon:be,index:wt,sourceLayerIndex:It,geometry:js(ot),properties:ot.properties,type:$h[ot.type],sortKey:Oe};if(this.features.push(Ke),be&&(C[be.name]=!0),qt){var Re=u.evaluate(ot,{}).join(","),Ee="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(To.vertical)>=0;for(var pe=0,ki=qt.sections;pe<ki.length;pe+=1){var gr=ki[pe];if(gr.image)C[gr.image.name]=!0;else{var Qi=co(qt.toString()),mi=gr.fontStack||Re,Ai=M[mi]=M[mi]||{};this.calculateGlyphDependencies(gr.text,Ai,Ee,this.allowVerticalPlacement,Qi)}}}}}}"line"===a.get("symbol-placement")&&(this.features=function(Oi){var bi={},Pi={},rr=[],Fr=0;function Vr(Dr){rr.push(Oi[Dr]),Fr++}function Un(Dr,Lr,gn){var wr=Pi[Dr];return delete Pi[Dr],Pi[Lr]=wr,rr[wr].geometry[0].pop(),rr[wr].geometry[0]=rr[wr].geometry[0].concat(gn[0]),wr}function Nn(Dr,Lr,gn){var wr=bi[Lr];return delete bi[Lr],bi[Dr]=wr,rr[wr].geometry[0].shift(),rr[wr].geometry[0]=gn[0].concat(rr[wr].geometry[0]),wr}function nn(Dr,Lr,gn){var wr=gn?Lr[0][Lr[0].length-1]:Lr[0][0];return Dr+":"+wr.x+":"+wr.y}for(var wn=0;wn<Oi.length;wn++){var Pn=Oi[wn],jn=Pn.geometry,yn=Pn.text?Pn.text.toString():null;if(yn){var Ur=nn(yn,jn),Jr=nn(yn,jn,!0);if(Ur in Pi&&Jr in bi&&Pi[Ur]!==bi[Jr]){var Bi=Nn(Ur,Jr,jn),dr=Un(Ur,Jr,rr[Bi].geometry);delete bi[Ur],delete Pi[Jr],Pi[nn(yn,rr[dr].geometry,!0)]=dr,rr[Bi].geometry=null}else Ur in Pi?Un(Ur,Jr,jn):Jr in bi?Nn(Ur,Jr,jn):(Vr(wn),bi[Ur]=Fr-1,Pi[Jr]=Fr-1)}else Vr(wn)}return rr.filter(function(Dr){return Dr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Oi,bi){return Oi.sortKey-bi.sortKey})}},yr.prototype.update=function(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))},yr.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},yr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},yr.prototype.upload=function(t){this.uploaded||(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t),this.textCollisionCircle.upload(t),this.iconCollisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},yr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.textCollisionBox.destroy(),this.iconCollisionBox.destroy(),this.textCollisionCircle.destroy(),this.iconCollisionCircle.destroy()},yr.prototype.addToLineVertexArray=function(t,e){var i=this.lineVertexArray.length;if(void 0!==t.segment){for(var a=t.dist(e[t.segment+1]),u=t.dist(e[t.segment]),c={},h=t.segment+1;h<e.length;h++)c[h]={x:e[h].x,y:e[h].y,tileUnitDistanceFromAnchor:a},h<e.length-1&&(a+=e[h+1].dist(e[h]));for(var m=t.segment||0;m>=0;m--)c[m]={x:e[m].x,y:e[m].y,tileUnitDistanceFromAnchor:u},m>0&&(u+=e[m-1].dist(e[m]));for(var _=0;_<e.length;_++){var T=c[_];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},yr.prototype.addSymbols=function(t,e,i,a,u,c,h,m,_,T,C){var M=this,R=t.indexArray,O=t.layoutVertexArray,B=t.dynamicLayoutVertexArray,Y=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,c.sortKey),it=this.glyphOffsetArray.length,ot=Y.vertexLength,Tt=this.allowVerticalPlacement&&h===To.vertical?Math.PI/2:0,wt=function(pe){var ki=pe.tl,gr=pe.tr,Qi=pe.bl,mi=pe.br,Ai=pe.tex,Oi=pe.pixelOffsetTL,bi=pe.pixelOffsetBR,Pi=pe.minFontScaleX,rr=pe.minFontScaleY,Fr=Y.vertexLength,Vr=pe.glyphOffset[1];lu(O,m.x,m.y,ki.x,Vr+ki.y,Ai.x,Ai.y,i,pe.isSDF,Oi.x,Oi.y,Pi,rr),lu(O,m.x,m.y,gr.x,Vr+gr.y,Ai.x+Ai.w,Ai.y,i,pe.isSDF,bi.x,Oi.y,Pi,rr),lu(O,m.x,m.y,Qi.x,Vr+Qi.y,Ai.x,Ai.y+Ai.h,i,pe.isSDF,Oi.x,bi.y,Pi,rr),lu(O,m.x,m.y,mi.x,Vr+mi.y,Ai.x+Ai.w,Ai.y+Ai.h,i,pe.isSDF,bi.x,bi.y,Pi,rr),Gu(B,m,Tt),R.emplaceBack(Fr,Fr+1,Fr+2),R.emplaceBack(Fr+1,Fr+2,Fr+3),Y.vertexLength+=4,Y.primitiveLength+=2,M.glyphOffsetArray.emplaceBack(pe.glyphOffset[0])};if(c.text&&c.text.sections){var It=c.text.sections;if(this.hasPaintOverrides){for(var qt,Jt=function(pe,ki){void 0===qt||qt===pe&&!ki||t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,c,c.index,{},It[qt]),qt=pe},Gt=0,be=e;Gt<be.length;Gt+=1){var He=be[Gt];Jt(He.sectionIndex,!1),wt(He)}Jt(qt,!0)}else{for(var Oe=0,Ke=e;Oe<Ke.length;Oe+=1)wt(Ke[Oe]);t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,c,c.index,{},It[0])}}else{for(var Re=0,Ee=e;Re<Ee.length;Re+=1)wt(Ee[Re]);t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,c,c.index,{})}t.placedSymbolArray.emplaceBack(m.x,m.y,it,this.glyphOffsetArray.length-it,ot,_,T,m.segment,i?i[0]:0,i?i[1]:0,a[0],a[1],h,0,!1,0,C)},yr.prototype._addCollisionDebugVertex=function(t,e,i,a,u,c){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,a,u,Math.round(c.x),Math.round(c.y))},yr.prototype.addCollisionDebugVertices=function(t,e,i,a,u,c,h,m){var _=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),T=_.vertexLength,C=u.layoutVertexArray,M=u.collisionVertexArray,R=h.anchorX,O=h.anchorY;if(this._addCollisionDebugVertex(C,M,c,R,O,new et(t,e)),this._addCollisionDebugVertex(C,M,c,R,O,new et(i,e)),this._addCollisionDebugVertex(C,M,c,R,O,new et(i,a)),this._addCollisionDebugVertex(C,M,c,R,O,new et(t,a)),_.vertexLength+=4,m){var B=u.indexArray;B.emplaceBack(T,T+1,T+2),B.emplaceBack(T,T+2,T+3),_.primitiveLength+=2}else{var Y=u.indexArray;Y.emplaceBack(T,T+1),Y.emplaceBack(T+1,T+2),Y.emplaceBack(T+2,T+3),Y.emplaceBack(T+3,T),_.primitiveLength+=4}},yr.prototype.addDebugCollisionBoxes=function(t,e,i,a){for(var u=t;u<e;u++){var c=this.collisionBoxArray.get(u),C=c.radius>0;this.addCollisionDebugVertices(c.x1,c.y1,c.x2,c.y2,C?a?this.textCollisionCircle:this.iconCollisionCircle:a?this.textCollisionBox:this.iconCollisionBox,c.anchorPoint,i,C)}},yr.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},yr.prototype._deserializeCollisionBoxesForSymbol=function(t,e,i,a,u,c,h,m,_){for(var T={},C=e;C<i;C++){var M=t.get(C);if(0===M.radius){T.textBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},T.textFeatureIndex=M.featureIndex;break}T.textCircles||(T.textCircles=[],T.textFeatureIndex=M.featureIndex),T.textCircles.push(M.anchorPointX,M.anchorPointY,M.radius,M.signedDistanceFromAnchor,1)}for(var R=a;R<u;R++){var O=t.get(R);if(0===O.radius){T.verticalTextBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},T.verticalTextFeatureIndex=O.featureIndex;break}}for(var B=c;B<h;B++){var Y=t.get(B);if(0===Y.radius){T.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},T.iconFeatureIndex=Y.featureIndex;break}}for(var it=m;it<_;it++){var ot=t.get(it);if(0===ot.radius){T.verticalIconBox={x1:ot.x1,y1:ot.y1,x2:ot.x2,y2:ot.y2,anchorPointX:ot.anchorPointX,anchorPointY:ot.anchorPointY},T.verticalIconFeatureIndex=ot.featureIndex;break}}return T},yr.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},yr.prototype.hasTextData=function(){return this.text.segments.get().length>0},yr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},yr.prototype.hasTextCollisionBoxData=function(){return this.textCollisionBox.segments.get().length>0},yr.prototype.hasIconCollisionBoxData=function(){return this.iconCollisionBox.segments.get().length>0},yr.prototype.hasTextCollisionCircleData=function(){return this.textCollisionCircle.segments.get().length>0},yr.prototype.hasIconCollisionCircleData=function(){return this.iconCollisionCircle.segments.get().length>0},yr.prototype.addIndicesForPlacedSymbol=function(t,e){for(var i=t.placedSymbolArray.get(e),a=i.vertexStartIndex+4*i.numGlyphs,u=i.vertexStartIndex;u<a;u+=4)t.indexArray.emplaceBack(u,u+1,u+2),t.indexArray.emplaceBack(u+1,u+2,u+3)},yr.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),i=Math.cos(t),a=[],u=[],c=[],h=0;h<this.symbolInstances.length;++h){c.push(h);var m=this.symbolInstances.get(h);a.push(0|Math.round(e*m.anchorX+i*m.anchorY)),u.push(m.featureIndex)}return c.sort(function(_,T){return a[_]-a[T]||u[T]-u[_]}),c},yr.prototype.addToSortKeyRanges=function(t,e){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},yr.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,a=this.symbolInstanceIndexes;i<a.length;i+=1){var c=this.symbolInstances.get(a[i]);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach(function(h,m,_){h>=0&&_.indexOf(h)===m&&e.addIndicesForPlacedSymbol(e.text,h)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},oe("SymbolBucket",yr,{omit:["layers","collisionBoxArray","features","compareText"]}),yr.MAX_GLYPHS=65535,yr.addDynamicAttributes=Gu;var Jh=new o({"symbol-placement":new Ve(x.layout_symbol["symbol-placement"]),"symbol-spacing":new Ve(x.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ve(x.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new hi(x.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ve(x.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ve(x.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ve(x.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ve(x.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ve(x.layout_symbol["icon-rotation-alignment"]),"icon-size":new hi(x.layout_symbol["icon-size"]),"icon-text-fit":new Ve(x.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ve(x.layout_symbol["icon-text-fit-padding"]),"icon-image":new hi(x.layout_symbol["icon-image"]),"icon-rotate":new hi(x.layout_symbol["icon-rotate"]),"icon-padding":new Ve(x.layout_symbol["icon-padding"]),"icon-keep-upright":new Ve(x.layout_symbol["icon-keep-upright"]),"icon-offset":new hi(x.layout_symbol["icon-offset"]),"icon-anchor":new hi(x.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ve(x.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ve(x.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ve(x.layout_symbol["text-rotation-alignment"]),"text-field":new hi(x.layout_symbol["text-field"]),"text-font":new hi(x.layout_symbol["text-font"]),"text-size":new hi(x.layout_symbol["text-size"]),"text-max-width":new hi(x.layout_symbol["text-max-width"]),"text-line-height":new Ve(x.layout_symbol["text-line-height"]),"text-letter-spacing":new hi(x.layout_symbol["text-letter-spacing"]),"text-justify":new hi(x.layout_symbol["text-justify"]),"text-radial-offset":new hi(x.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ve(x.layout_symbol["text-variable-anchor"]),"text-anchor":new hi(x.layout_symbol["text-anchor"]),"text-max-angle":new Ve(x.layout_symbol["text-max-angle"]),"text-writing-mode":new Ve(x.layout_symbol["text-writing-mode"]),"text-rotate":new hi(x.layout_symbol["text-rotate"]),"text-padding":new Ve(x.layout_symbol["text-padding"]),"text-keep-upright":new Ve(x.layout_symbol["text-keep-upright"]),"text-transform":new hi(x.layout_symbol["text-transform"]),"text-offset":new hi(x.layout_symbol["text-offset"]),"text-allow-overlap":new Ve(x.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ve(x.layout_symbol["text-ignore-placement"]),"text-optional":new Ve(x.layout_symbol["text-optional"])}),uu={paint:new o({"icon-opacity":new hi(x.paint_symbol["icon-opacity"]),"icon-color":new hi(x.paint_symbol["icon-color"]),"icon-halo-color":new hi(x.paint_symbol["icon-halo-color"]),"icon-halo-width":new hi(x.paint_symbol["icon-halo-width"]),"icon-halo-blur":new hi(x.paint_symbol["icon-halo-blur"]),"icon-translate":new Ve(x.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ve(x.paint_symbol["icon-translate-anchor"]),"text-opacity":new hi(x.paint_symbol["text-opacity"]),"text-color":new hi(x.paint_symbol["text-color"],{runtimeType:Nt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new hi(x.paint_symbol["text-halo-color"]),"text-halo-width":new hi(x.paint_symbol["text-halo-width"]),"text-halo-blur":new hi(x.paint_symbol["text-halo-blur"]),"text-translate":new Ve(x.paint_symbol["text-translate"]),"text-translate-anchor":new Ve(x.paint_symbol["text-translate-anchor"])}),layout:Jh},tl=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:nt,this.defaultValue=t};tl.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},tl.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},tl.prototype.possibleOutputs=function(){return[void 0]},tl.prototype.serialize=function(){return null},oe("FormatSectionOverride",tl,{omit:["defaultValue"]});var np=function(t){function e(i){t.call(this,i,uu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(i,a){if(t.prototype.recalculate.call(this,i,a),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var u=this.layout.get("text-writing-mode");if(u){for(var c=[],h=0,m=u;h<m.length;h+=1){var _=m[h];c.indexOf(_)<0&&c.push(_)}this.layout._values["text-writing-mode"]=c}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(i,a,u){var m,c=this.layout.get(i).evaluate(a,{},u),h=this._unevaluatedLayout._values[i];return h.isDataDriven()||to(h.value)||!c?c:(m=a.properties,c.replace(/{([^{}]+)}/g,function(T,C){return C in m?String(m[C]):""}))},e.prototype.createBucket=function(i){return new yr(i)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var i=0,a=uu.paint.overridableProperties;i<a.length;i+=1){var u=a[i];if(e.hasPaintOverride(this.layout,u)){var _,c=this.paint.get(u),h=new tl(c),m=new en(h,c.property.specification);_="constant"===c.value.kind||"source"===c.value.kind?new Hn("source",m):new Xn("composite",m,c.value.zoomStops,c.value._interpolationType),this.paint._values[u]=new io(c.property,_,c.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(i,a,u){return!(!this.layout||a.isDataDriven()||u.isDataDriven())&&e.hasPaintOverride(this.layout,i)},e.hasPaintOverride=function(i,a){var u=i.get("text-field"),c=uu.paint.properties[a],h=!1,m=function(C){for(var M=0,R=C;M<R.length;M+=1)if(c.overrides&&c.overrides.hasOverride(R[M]))return void(h=!0)};if("constant"===u.value.kind&&u.value.value instanceof mr)m(u.value.value.sections);else if("source"===u.value.kind){var _=function(C){h||(C instanceof Hi&&Xi(C.value)===Be?m(C.value.sections):C instanceof qn?m(C.sections):C.eachChild(_))},T=u.value;T._styleExpression&&_(T._styleExpression.expression)}return h},e.hasPaintOverrides=function(i){for(var a=0,u=uu.paint.overridableProperties;a<u.length;a+=1)if(e.hasPaintOverride(i,u[a]))return!0;return!1},e}(n),Qh={paint:new o({"background-color":new Ve(x.paint_background["background-color"]),"background-pattern":new Za(x.paint_background["background-pattern"]),"background-opacity":new Ve(x.paint_background["background-opacity"])})},td=function(t){function e(i){t.call(this,i,Qh)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(n),ed={paint:new o({"raster-opacity":new Ve(x.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ve(x.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ve(x.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ve(x.paint_raster["raster-brightness-max"]),"raster-saturation":new Ve(x.paint_raster["raster-saturation"]),"raster-contrast":new Ve(x.paint_raster["raster-contrast"]),"raster-resampling":new Ve(x.paint_raster["raster-resampling"]),"raster-fade-duration":new Ve(x.paint_raster["raster-fade-duration"])})},id=function(t){function e(i){t.call(this,i,ed)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(n),rd=function(t){function e(i){t.call(this,i,{}),this.implementation=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},e.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},e}(n),nd={circle:Zp,heatmap:Gp,hillshade:$p,fill:ph,"fill-extrusion":xh,line:Th,symbol:np,background:td,raster:id},op=self.HTMLImageElement,ap=self.HTMLCanvasElement,sp=self.HTMLVideoElement,lp=self.ImageData,cu=self.ImageBitmap,Cs=function(t,e,i,a){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,a)};Cs.prototype.update=function(t,e,i){var a=t.width,u=t.height,c=!(this.size&&this.size[0]===a&&this.size[1]===u||i),h=this.context,m=h.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),m.bindTexture(m.TEXTURE_2D,this.texture),h.pixelStoreUnpackFlipY.set(!1),h.pixelStoreUnpack.set(1),h.pixelStoreUnpackPremultiplyAlpha.set(this.format===m.RGBA&&(!e||!1!==e.premultiply)),c)this.size=[a,u],t instanceof op||t instanceof ap||t instanceof sp||t instanceof lp||cu&&t instanceof cu?m.texImage2D(m.TEXTURE_2D,0,this.format,this.format,m.UNSIGNED_BYTE,t):m.texImage2D(m.TEXTURE_2D,0,this.format,a,u,0,this.format,m.UNSIGNED_BYTE,t.data);else{var _=i||{x:0,y:0},T=_.x,C=_.y;t instanceof op||t instanceof ap||t instanceof sp||t instanceof lp||cu&&t instanceof cu?m.texSubImage2D(m.TEXTURE_2D,0,T,C,m.RGBA,m.UNSIGNED_BYTE,t):m.texSubImage2D(m.TEXTURE_2D,0,T,C,a,u,m.RGBA,m.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&m.generateMipmap(m.TEXTURE_2D)},Cs.prototype.bind=function(t,e,i){var a=this.context.gl;a.bindTexture(a.TEXTURE_2D,this.texture),i!==a.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=a.LINEAR),t!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,e),this.wrap=e)},Cs.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Cs.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Xu=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Xu.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1,t._callback()},0))},Xu.prototype.remove=function(){delete this._channel,this._callback=function(){}};var el=function(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ye(["receive","process"],this),this.invoker=new Xu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ht()?t:self};function up(t,e,i){var a=2*Math.PI*6378137/256/Math.pow(2,i);return[t*a-2*Math.PI*6378137/2,e*a-2*Math.PI*6378137/2]}el.prototype.send=function(t,e,i,a,u){var c=this;void 0===u&&(u=!1);var h=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[h]=i);var m=J(this.globalScope)?void 0:[];return this.target.postMessage({id:h,type:t,hasCallback:!!i,targetMapId:a,mustQueue:u,sourceMapId:this.mapId,data:Vi(e,m)},m),{cancel:function(){i&&delete c.callbacks[h],c.target.postMessage({id:h,type:"<cancel>",targetMapId:a,sourceMapId:c.mapId})}}},el.prototype.receive=function(t){var e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];var a=this.cancelCallbacks[i];delete this.cancelCallbacks[i],a&&a()}else ht()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)},el.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},el.prototype.processTask=function(t,e){var i=this;if("<response>"===e.type){var a=this.callbacks[t];delete this.callbacks[t],a&&(e.error?a(Gr(e.error)):a(null,Gr(e.data)))}else{var u=!1,c=J(this.globalScope)?void 0:[],h=e.hasCallback?function(C,M){u=!0,delete i.cancelCallbacks[t],i.target.postMessage({id:t,type:"<response>",sourceMapId:i.mapId,error:C?Vi(C):null,data:Vi(M,c)},c)}:function(C){u=!0},m=null,_=Gr(e.data);if(this.parent[e.type])m=this.parent[e.type](e.sourceMapId,_,h);else if(this.parent.getWorkerSource){var T=e.type.split(".");m=this.parent.getWorkerSource(e.sourceMapId,T[0],_.source)[T[1]](_,h)}else h(new Error("Could not find function "+e.type));!u&&m&&m.cancel&&(this.cancelCallbacks[t]=m.cancel)}},el.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var pn=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};pn.prototype.setNorthEast=function(t){return this._ne=t instanceof jr?new jr(t.lng,t.lat):jr.convert(t),this},pn.prototype.setSouthWest=function(t){return this._sw=t instanceof jr?new jr(t.lng,t.lat):jr.convert(t),this},pn.prototype.extend=function(t){var e,i,a=this._sw,u=this._ne;if(t instanceof jr)e=t,i=t;else{if(!(t instanceof pn))return Array.isArray(t)?t.every(Array.isArray)?this.extend(pn.convert(t)):this.extend(jr.convert(t)):this;if(i=t._ne,!(e=t._sw)||!i)return this}return a||u?(a.lng=Math.min(e.lng,a.lng),a.lat=Math.min(e.lat,a.lat),u.lng=Math.max(i.lng,u.lng),u.lat=Math.max(i.lat,u.lat)):(this._sw=new jr(e.lng,e.lat),this._ne=new jr(i.lng,i.lat)),this},pn.prototype.getCenter=function(){return new jr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},pn.prototype.getSouthWest=function(){return this._sw},pn.prototype.getNorthEast=function(){return this._ne},pn.prototype.getNorthWest=function(){return new jr(this.getWest(),this.getNorth())},pn.prototype.getSouthEast=function(){return new jr(this.getEast(),this.getSouth())},pn.prototype.getWest=function(){return this._sw.lng},pn.prototype.getSouth=function(){return this._sw.lat},pn.prototype.getEast=function(){return this._ne.lng},pn.prototype.getNorth=function(){return this._ne.lat},pn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},pn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},pn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},pn.prototype.contains=function(t){var e=jr.convert(t),i=e.lng,a=e.lat,c=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(c=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&c},pn.convert=function(t){return!t||t instanceof pn?t:new pn(t)};var jr=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};jr.prototype.wrap=function(){return new jr($t(this.lng,-180,180),this.lat)},jr.prototype.toArray=function(){return[this.lng,this.lat]},jr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},jr.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new pn(new jr(this.lng-i,this.lat-e),new jr(this.lng+i,this.lat+e))},jr.convert=function(t){if(t instanceof jr)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new jr(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new jr(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var cp=2*Math.PI*6378137;function pp(t){return cp*Math.cos(t*Math.PI/180)}function hp(t){return(180+t)/360}function dp(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function fp(t,e){return t/pp(e)}function $u(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Is=function(t,e,i){void 0===i&&(i=0),this.x=+t,this.y=+e,this.z=+i};Is.fromLngLat=function(t,e){void 0===e&&(e=0);var i=jr.convert(t);return new Is(hp(i.lng),dp(i.lat),fp(e,i.lat))},Is.prototype.toLngLat=function(){return new jr(360*this.x-180,$u(this.y))},Is.prototype.toAltitude=function(){return this.z*pp($u(this.y))},Is.prototype.meterInMercatorCoordinateUnits=function(){return 1/cp*(t=$u(this.y),1/Math.cos(t*Math.PI/180));var t};var ks=function(t,e,i){this.z=t,this.x=e,this.y=i,this.key=zl(0,t,t,e,i)};ks.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},ks.prototype.url=function(t,e){var i,a,u,c,h,m=(a=this.y,u=this.z,c=up(256*(i=this.x),256*(a=Math.pow(2,u)-a-1),u),h=up(256*(i+1),256*(a+1),u),c[0]+","+c[1]+","+h[0]+","+h[1]),_=function(T,C,M){for(var R,O="",B=T;B>0;B--)O+=(C&(R=1<<B-1)?1:0)+(M&R?2:0);return O}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_).replace("{bbox-epsg-3857}",m)},ks.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new et((t.x*e-this.x)*mn,(t.y*e-this.y)*mn)},ks.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var mp=function(t,e){this.wrap=t,this.canonical=e,this.key=zl(t,e.z,e.z,e.x,e.y)},hn=function(t,e,i,a,u){this.overscaledZ=t,this.wrap=e,this.canonical=new ks(i,+a,+u),this.key=zl(e,t,i,a,u)};function zl(t,e,i,a,u){(t*=2)<0&&(t=-1*t-1);var c=1<<i;return(c*c*t+c*u+a).toString(36)+i.toString(36)+e.toString(36)}hn.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},hn.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new hn(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new hn(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},hn.prototype.calculateScaledKey=function(t,e){var i=this.canonical.z-t;return t>this.canonical.z?zl(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):zl(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)},hn.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},hn.prototype.children=function(t){if(this.overscaledZ>=t)return[new hn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,i=2*this.canonical.x,a=2*this.canonical.y;return[new hn(e,this.wrap,e,i,a),new hn(e,this.wrap,e,i+1,a),new hn(e,this.wrap,e,i,a+1),new hn(e,this.wrap,e,i+1,a+1)]},hn.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},hn.prototype.wrapped=function(){return new hn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},hn.prototype.unwrapTo=function(t){return new hn(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},hn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},hn.prototype.toUnwrapped=function(){return new mp(this.wrap,this.canonical)},hn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},hn.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Is(t.x-this.wrap,t.y))},oe("CanonicalTileID",ks),oe("OverscaledTileID",hn,{omit:["posMatrix"]});var Ka=function(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return ae('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var a=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(var u=0;u<a;u++)this.data[this._idx(-1,u)]=this.data[this._idx(0,u)],this.data[this._idx(a,u)]=this.data[this._idx(a-1,u)],this.data[this._idx(u,-1)]=this.data[this._idx(u,0)],this.data[this._idx(u,a)]=this.data[this._idx(u,a-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)],this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)],this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)]};Ka.prototype.get=function(t,e){var i=new Uint8Array(this.data.buffer),a=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[a],i[a+1],i[a+2])},Ka.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ka.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Ka.prototype._unpackMapbox=function(t,e,i){return(256*t*256+256*e+i)/10-1e4},Ka.prototype._unpackTerrarium=function(t,e,i){return 256*t+e+i/256-32768},Ka.prototype.getPixels=function(){return new so({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ka.prototype.backfillBorder=function(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var a=e*this.dim,u=e*this.dim+this.dim,c=i*this.dim,h=i*this.dim+this.dim;switch(e){case-1:a=u-1;break;case 1:u=a+1}switch(i){case-1:c=h-1;break;case 1:h=c+1}for(var m=-e*this.dim,_=-i*this.dim,T=c;T<h;T++)for(var C=a;C<u;C++)this.data[this._idx(C,T)]=t.data[this._idx(C+m,T+_)]},oe("DEMData",Ka);var pu=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}};pu.prototype.encode=function(t){return this._stringToNumber[t]},pu.prototype.decode=function(t){return this._numberToString[t]};var hu=function(t,e,i,a,u){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=a,this.properties=t.properties,this.id=u},Ku={geometry:{configurable:!0}};Ku.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Ku.geometry.set=function(t){this._geometry=t},hu.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(hu.prototype,Ku);var il=function(){this.state={},this.stateChanges={},this.deletedStates={}};il.prototype.updateState=function(t,e,i){var a=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][a]=this.stateChanges[t][a]||{},vt(this.stateChanges[t][a],i),null===this.deletedStates[t])for(var u in this.deletedStates[t]={},this.state[t])u!==a&&(this.deletedStates[t][u]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][a])for(var c in this.deletedStates[t][a]={},this.state[t][a])i[c]||(this.deletedStates[t][a][c]=null);else for(var h in i)this.deletedStates[t]&&this.deletedStates[t][a]&&null===this.deletedStates[t][a][h]&&delete this.deletedStates[t][a][h]},il.prototype.removeFeatureState=function(t,e,i){if(null!==this.deletedStates[t]){var a=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][a]&&(this.deletedStates[t][a]=this.deletedStates[t][a]||{},this.deletedStates[t][a][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][a])for(i in this.deletedStates[t][a]={},this.stateChanges[t][a])this.deletedStates[t][a][i]=null;else this.deletedStates[t][a]=null;else this.deletedStates[t]=null}},il.prototype.getState=function(t,e){var i=String(e),c=vt({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var h=this.deletedStates[t][e];if(null===h)return{};for(var m in h)delete c[m]}return c},il.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},il.prototype.coalesceChanges=function(t,e){var i={};for(var a in this.stateChanges){this.state[a]=this.state[a]||{};var u={};for(var c in this.stateChanges[a])this.state[a][c]||(this.state[a][c]={}),vt(this.state[a][c],this.stateChanges[a][c]),u[c]=this.state[a][c];i[a]=u}for(var h in this.deletedStates){this.state[h]=this.state[h]||{};var m={};if(null===this.deletedStates[h])for(var _ in this.state[h])m[_]={},this.state[h][_]={};else for(var T in this.deletedStates[h]){if(null===this.deletedStates[h][T])this.state[h][T]={};else for(var C=0,M=Object.keys(this.deletedStates[h][T]);C<M.length;C+=1)delete this.state[h][T][M[C]];m[T]=this.state[h][T]}i[h]=i[h]||{},vt(i[h],m)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var O in t)t[O].setFeatureState(i,e)};var Ya=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Qt(mn,16,0),this.grid3D=new Qt(mn,16,0),this.featureIndexArray=new rn,this.promoteId=e};function yp(t){for(var e=1/0,i=1/0,a=-1/0,u=-1/0,c=0,h=t;c<h.length;c+=1){var m=h[c];e=Math.min(e,m.x),i=Math.min(i,m.y),a=Math.max(a,m.x),u=Math.max(u,m.y)}return{minX:e,minY:i,maxX:a,maxY:u}}function od(t,e){return e-t}Ya.prototype.insert=function(t,e,i,a,u,c){var h=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,a,u);for(var m=c?this.grid3D:this.grid,_=0;_<e.length;_++){for(var T=e[_],C=[1/0,1/0,-1/0,-1/0],M=0;M<T.length;M++){var R=T[M];C[0]=Math.min(C[0],R.x),C[1]=Math.min(C[1],R.y),C[2]=Math.max(C[2],R.x),C[3]=Math.max(C[3],R.y)}C[0]<mn&&C[1]<mn&&C[2]>=0&&C[3]>=0&&m.insert(h,C[0],C[1],C[2],C[3])}},Ya.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Zs.VectorTile(new tu(this.rawTileData)).layers,this.sourceLayerCoder=new pu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ya.prototype.query=function(t,e,i){var a=this;this.loadVTLayers();for(var u=t.params||{},c=mn/t.tileSize/t.scale,h=rs(u.filter),m=t.queryGeometry,_=t.queryPadding*c,T=yp(m),C=this.grid.query(T.minX-_,T.minY-_,T.maxX+_,T.maxY+_),M=yp(t.cameraQueryGeometry),O=0,B=this.grid3D.query(M.minX-_,M.minY-_,M.maxX+_,M.maxY+_,function(It,qt,Jt,Gt){return function(be,He,Oe,Ke,Re){for(var Ee=0,pe=be;Ee<pe.length;Ee+=1){var ki=pe[Ee];if(He<=ki.x&&Oe<=ki.y&&Ke>=ki.x&&Re>=ki.y)return!0}var gr=[new et(He,Oe),new et(He,Re),new et(Ke,Re),new et(Ke,Oe)];if(be.length>2)for(var Qi=0,mi=gr;Qi<mi.length;Qi+=1)if(Vs(be,mi[Qi]))return!0;for(var Ai=0;Ai<be.length-1;Ai++)if(jp(be[Ai],be[Ai+1],gr))return!0;return!1}(t.cameraQueryGeometry,It-_,qt-_,Jt+_,Gt+_)});O<B.length;O+=1)C.push(B[O]);C.sort(od);for(var it,ot={},Tt=function(It){var qt=C[It];if(qt!==it){it=qt;var Jt=a.featureIndexArray.get(qt),Gt=null;a.loadMatchingFeature(ot,Jt.bucketIndex,Jt.sourceLayerIndex,Jt.featureIndex,h,u.layers,e,function(be,He,Oe){Gt||(Gt=js(be));var Ke={};return void 0!==Oe&&(Ke=i.getState(He.sourceLayer||"_geojsonTileLayer",Oe)),He.queryIntersectsFeature(m,be,Ke,Gt,a.z,t.transform,c,t.pixelPosMatrix)})}},wt=0;wt<C.length;wt++)Tt(wt);return ot},Ya.prototype.loadMatchingFeature=function(t,e,i,a,u,c,h,m){var _=this.bucketLayerIDs[e];if(!c||function(Tt,wt){for(var It=0;It<Tt.length;It++)if(wt.indexOf(Tt[It])>=0)return!0;return!1}(c,_)){var T=this.sourceLayerCoder.decode(i),C=this.vtLayers[T].feature(a);if(u(new Pr(this.tileID.overscaledZ),C))for(var M=this.getId(C,T),R=0;R<_.length;R++){var O=_[R];if(!(c&&c.indexOf(O)<0)){var B=h[O];if(B){var Y=!m||m(C,B,M);if(Y){var it=new hu(C,this.z,this.x,this.y,M);it.layer=B.serialize();var ot=t[O];void 0===ot&&(ot=t[O]=[]),ot.push({featureIndex:a,feature:it,intersectionZ:Y})}}}}}},Ya.prototype.lookupSymbolFeatures=function(t,e,i,a,u,c){var h={};this.loadVTLayers();for(var m=rs(a),_=0,T=t;_<T.length;_+=1)this.loadMatchingFeature(h,e,i,T[_],m,u,c);return h},Ya.prototype.hasLayer=function(t){for(var e=0,i=this.bucketLayerIDs;e<i.length;e+=1)for(var a=0,u=i[e];a<u.length;a+=1)if(t===u[a])return!0;return!1},Ya.prototype.getId=function(t,e){var i=t.id;return this.promoteId&&"boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i)),i},oe("FeatureIndex",Ya,{omit:["rawTileData","sourceLayerCoder"]});var bn=function(t,e){this.tileID=t,this.uid=Vt(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};bn.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<Gi.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},bn.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},bn.prototype.loadVectorData=function(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var a in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(T,C){var M={};if(!C)return M;for(var R=function(){var Y=B[O],it=Y.layerIds.map(function(It){return C.getLayer(It)}).filter(Boolean);if(0!==it.length){Y.layers=it,Y.stateDependentLayerIds&&(Y.stateDependentLayers=Y.stateDependentLayerIds.map(function(It){return it.filter(function(qt){return qt.id===It})[0]}));for(var ot=0,Tt=it;ot<Tt.length;ot+=1)M[Tt[ot].id]=Y}},O=0,B=T;O<B.length;O+=1)R();return M}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var u=this.buckets[a];if(u instanceof yr){if(this.hasSymbolBuckets=!0,!i)break;u.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var c in this.buckets){var h=this.buckets[c];if(h instanceof yr&&h.hasRTLText){this.hasRTLText=!0,kn.isLoading()||kn.isLoaded()||"deferred"!==_s()||dl();break}}for(var m in this.queryPadding=0,this.buckets){var _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(m).queryRadius(_))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new si},bn.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},bn.prototype.getBucket=function(t){return this.buckets[t.id]},bn.prototype.upload=function(t){for(var e in this.buckets){var i=this.buckets[e];i.uploadPending()&&i.upload(t)}var a=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Cs(t,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Cs(t,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)},bn.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},bn.prototype.queryRenderedFeatures=function(t,e,i,a,u,c,h,m,_){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:a,scale:u,tileSize:this.tileSize,pixelPosMatrix:_,transform:h,params:c,queryPadding:this.queryPadding*m},t,e):{}},bn.prototype.querySourceFeatures=function(t,e){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var a=i.loadVTLayers(),u=e?e.sourceLayer:"",c=a._geojsonTileLayer||a[u];if(c)for(var h=rs(e&&e.filter),m=this.tileID.canonical,_=m.z,T=m.x,C=m.y,M={z:_,x:T,y:C},R=0;R<c.length;R++){var O=c.feature(R);if(h(new Pr(this.tileID.overscaledZ),O)){var B=i.getId(O,u),Y=new hu(O,_,T,C,B);Y.tile=M,t.push(Y)}}}},bn.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},bn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},bn.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var i=mt(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var a=Date.now(),u=!1;if(this.expirationTime>a)u=!1;else if(e)if(this.expirationTime<e)u=!0;else{var c=this.expirationTime-e;c?this.expirationTime=a+Math.max(c,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},bn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},bn.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var i=this.latestFeatureIndex.loadVTLayers();for(var a in this.buckets){var u=this.buckets[a],c=u.layers[0].sourceLayer||"_geojsonTileLayer",h=i[c],m=t[c];h&&m&&0!==Object.keys(m).length&&(u.update(m,h,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(a).queryRadius(u))))}}},bn.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},bn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Gi.now()},bn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},bn.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=Gi.now()+t},bn.prototype.setDependencies=function(t,e){for(var i={},a=0,u=e;a<u.length;a+=1)i[u[a]]=!0;this.dependencies[t]=i},bn.prototype.hasDependency=function(t,e){for(var i=0,a=t;i<a.length;i+=1){var c=this.dependencies[a[i]];if(c)for(var h=0,m=e;h<m.length;h+=1)if(c[m[h]])return!0}return!1};var fs=self.performance,gp=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},fs.mark(this._marks.start)};gp.prototype.finish=function(){fs.mark(this._marks.end);var t=fs.getEntriesByName(this._marks.measure);return 0===t.length&&(fs.measure(this._marks.measure,this._marks.start,this._marks.end),t=fs.getEntriesByName(this._marks.measure),fs.clearMarks(this._marks.start),fs.clearMarks(this._marks.end),fs.clearMeasures(this._marks.measure)),t},l.Actor=el,l.AlphaImage=Ts,l.CanonicalTileID=ks,l.CollisionBoxArray=si,l.Color=Ue,l.DEMData=Ka,l.DataConstantProperty=Ve,l.DictionaryCoder=pu,l.EXTENT=mn,l.ErrorEvent=Zr,l.EvaluationParameters=Pr,l.Event=ji,l.Evented=ir,l.FeatureIndex=Ya,l.FillBucket=ga,l.FillExtrusionBucket=va,l.ImageAtlas=El,l.ImagePosition=iu,l.LineBucket=ho,l.LngLat=jr,l.LngLatBounds=pn,l.MercatorCoordinate=Is,l.ONE_EM=24,l.OverscaledTileID=hn,l.Point=et,l.Point$1=et,l.ProgramConfiguration=zn,l.Properties=o,l.Protobuf=tu,l.RGBAImage=so,l.RequestManager=Dt,l.RequestPerformance=gp,l.ResourceType=ri,l.SegmentVector=Er,l.SourceFeatureState=il,l.StructArrayLayout1ui2=$e,l.StructArrayLayout2i4=S,l.StructArrayLayout2ui4=Ce,l.StructArrayLayout3ui6=De,l.StructArrayLayout4i8=k,l.SymbolBucket=yr,l.Texture=Cs,l.Tile=bn,l.Transitionable=po,l.Uniform1f=Pa,l.Uniform1i=bs,l.Uniform2f=cs,l.Uniform3f=ws,l.Uniform4f=Xa,l.UniformColor=Zi,l.UniformMatrix4f=$n,l.UnwrappedTileID=mp,l.ValidationError=E,l.WritingMode=To,l.ZoomHistory=Nr,l.addDynamicAttributes=Gu,l.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);var a=t.length,u=new Array(t.length),c=null;t.forEach(function(h,m){e(h,function(_,T){_&&(c=_),u[m]=T,0==--a&&i(c,u)})})},l.bezier=Zt,l.bindAll=Ye,l.browser=Gi,l.cacheEntryPossiblyAdded=function(t){++ue>Qr&&(t.getActor().send("enforceCacheSizeLimit",tr),ue=0)},l.clamp=Yt,l.clearTileCache=function(t){var e=self.caches.delete(ar);t&&e.catch(t).then(function(){return t()})},l.clone=function(t){var e=new ya(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},l.clone$1=Ti,l.config=_i,l.create=function(){var t=new ya(16);return ya!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},l.create$1=function(){var t=new ya(9);return ya!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},l.create$2=function(){var t=new ya(4);return ya!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},l.createCommonjsModule=P,l.createExpression=vo,l.createLayout=y,l.createStyleLayer=function(t){return"custom"===t.type?new rd(t):new nd[t.type](t)},l.deepEqual=function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(var a=0;a<e.length;a++)if(!t(e[a],i[a]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==i){if("object"!=typeof i||Object.keys(e).length!==Object.keys(i).length)return!1;for(var u in e)if(!t(e[u],i[u]))return!1;return!0}return e===i},l.ease=Mt,l.emitValidationErrors=kt,l.endsWith=Ui,l.enforceCacheSizeLimit=function(t){Xr(),re&&re.then(function(e){e.keys().then(function(i){for(var a=0;a<i.length-t;a++)e.delete(i[a])})})},l.evaluateSizeForFeature=Gc,l.evaluateSizeForZoom=Xc,l.evaluateVariableOffset=ep,l.evented=Fs,l.extend=vt,l.featureFilter=rs,l.filterObject=Wi,l.fromRotation=function(t,e){var i=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=i,t[2]=0,t[3]=-i,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},l.getAnchorAlignment=qu,l.getAnchorJustification=Wu,l.getArrayBuffer=Ii,l.getImage=Mi,l.getJSON=function(t,e){return Ni(vt(t,{type:"json"}),e)},l.getRTLTextPluginStatus=_s,l.getReferrer=zi,l.getVideo=function(t,e){var i,a,u=self.document.createElement("video");u.muted=!0,u.onloadstart=function(){e(null,u)};for(var c=0;c<t.length;c++){var h=self.document.createElement("source");i=t[c],a=void 0,(a=self.document.createElement("a")).href=i,(a.protocol!==self.document.location.protocol||a.host!==self.document.location.host)&&(u.crossOrigin="Anonymous"),h.src=t[c],u.appendChild(h)}return{cancel:function(){}}},l.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.invert=function(t,e){var i=e[0],a=e[1],u=e[2],c=e[3],h=e[4],m=e[5],_=e[6],T=e[7],C=e[8],M=e[9],R=e[10],O=e[11],B=e[12],Y=e[13],it=e[14],ot=e[15],Tt=i*m-a*h,wt=i*_-u*h,It=i*T-c*h,qt=a*_-u*m,Jt=a*T-c*m,Gt=u*T-c*_,be=C*Y-M*B,He=C*it-R*B,Oe=C*ot-O*B,Ke=M*it-R*Y,Re=M*ot-O*Y,Ee=R*ot-O*it,pe=Tt*Ee-wt*Re+It*Ke+qt*Oe-Jt*He+Gt*be;return pe?(t[0]=(m*Ee-_*Re+T*Ke)*(pe=1/pe),t[1]=(u*Re-a*Ee-c*Ke)*pe,t[2]=(Y*Gt-it*Jt+ot*qt)*pe,t[3]=(R*Jt-M*Gt-O*qt)*pe,t[4]=(_*Oe-h*Ee-T*He)*pe,t[5]=(i*Ee-u*Oe+c*He)*pe,t[6]=(it*It-B*Gt-ot*wt)*pe,t[7]=(C*Gt-R*It+O*wt)*pe,t[8]=(h*Re-m*Oe+T*be)*pe,t[9]=(a*Oe-i*Re-c*be)*pe,t[10]=(B*Jt-Y*It+ot*Tt)*pe,t[11]=(M*It-C*Jt-O*Tt)*pe,t[12]=(m*He-h*Ke-_*be)*pe,t[13]=(i*Ke-a*He+u*be)*pe,t[14]=(Y*wt-B*qt-it*Tt)*pe,t[15]=(C*qt-M*wt+R*Tt)*pe,t):null},l.isChar=ce,l.isMapboxURL=Ft,l.keysDifference=function(t,e){var i=[];for(var a in t)a in e||i.push(a);return i},l.makeRequest=Ni,l.mapObject=q,l.mercatorXfromLng=hp,l.mercatorYfromLat=dp,l.mercatorZfromAltitude=fp,l.multiply=function(t,e,i){var a=e[0],u=e[1],c=e[2],h=e[3],m=e[4],_=e[5],T=e[6],C=e[7],M=e[8],R=e[9],O=e[10],B=e[11],Y=e[12],it=e[13],ot=e[14],Tt=e[15],wt=i[0],It=i[1],qt=i[2],Jt=i[3];return t[0]=wt*a+It*m+qt*M+Jt*Y,t[1]=wt*u+It*_+qt*R+Jt*it,t[2]=wt*c+It*T+qt*O+Jt*ot,t[3]=wt*h+It*C+qt*B+Jt*Tt,t[4]=(wt=i[4])*a+(It=i[5])*m+(qt=i[6])*M+(Jt=i[7])*Y,t[5]=wt*u+It*_+qt*R+Jt*it,t[6]=wt*c+It*T+qt*O+Jt*ot,t[7]=wt*h+It*C+qt*B+Jt*Tt,t[8]=(wt=i[8])*a+(It=i[9])*m+(qt=i[10])*M+(Jt=i[11])*Y,t[9]=wt*u+It*_+qt*R+Jt*it,t[10]=wt*c+It*T+qt*O+Jt*ot,t[11]=wt*h+It*C+qt*B+Jt*Tt,t[12]=(wt=i[12])*a+(It=i[13])*m+(qt=i[14])*M+(Jt=i[15])*Y,t[13]=wt*u+It*_+qt*R+Jt*it,t[14]=wt*c+It*T+qt*O+Jt*ot,t[15]=wt*h+It*C+qt*B+Jt*Tt,t},l.mvt=Zs,l.number=$r,l.offscreenCanvasSupported=We,l.ortho=function(t,e,i,a,u,c,h){var m=1/(e-i),_=1/(a-u),T=1/(c-h);return t[0]=-2*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*_,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*T,t[11]=0,t[12]=(e+i)*m,t[13]=(u+a)*_,t[14]=(h+c)*T,t[15]=1,t},l.parseGlyphPBF=function(t){return new tu(t).readFields(Bh,[])},l.pbf=tu,l.performSymbolLayout=function(t,e,i,a,u,c){t.createArrays(),t.tilePixelRatio=mn/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var m=t.layers[0].layout,_=t.layers[0]._unevaluatedLayout._values,T={};if("composite"===t.textSizeData.kind){var C=t.textSizeData,R=C.maxZoom;T.compositeTextSizes=[_["text-size"].possiblyEvaluate(new Pr(C.minZoom)),_["text-size"].possiblyEvaluate(new Pr(R))]}if("composite"===t.iconSizeData.kind){var O=t.iconSizeData,Y=O.maxZoom;T.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new Pr(O.minZoom)),_["icon-size"].possiblyEvaluate(new Pr(Y))]}T.layoutTextSize=_["text-size"].possiblyEvaluate(new Pr(t.zoom+1)),T.layoutIconSize=_["icon-size"].possiblyEvaluate(new Pr(t.zoom+1)),T.textMaxSize=_["text-size"].possiblyEvaluate(new Pr(18));for(var it=24*m.get("text-line-height"),ot="map"===m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement"),Tt=m.get("text-keep-upright"),wt=m.get("text-size"),It=function(){var Gt=Jt[qt],be=m.get("text-font").evaluate(Gt,{}).join(","),He=wt.evaluate(Gt,{}),Oe=T.layoutTextSize.evaluate(Gt,{}),Ke=T.layoutIconSize.evaluate(Gt,{}),Re={horizontal:{},vertical:void 0},Ee=Gt.text,pe=[0,0];if(Ee){var ki=Ee.toString(),gr=24*m.get("text-letter-spacing").evaluate(Gt,{}),Qi=function(Bi){for(var dr=0,Dr=Bi;dr<Dr.length;dr+=1)if(!Cn(Dr[dr].charCodeAt(0)))return!1;return!0}(ki)?gr:0,mi=m.get("text-anchor").evaluate(Gt,{}),Ai=m.get("text-variable-anchor");if(!Ai){var Oi=m.get("text-radial-offset").evaluate(Gt,{});pe=Oi?ep(mi,[24*Oi,Zu]):m.get("text-offset").evaluate(Gt,{}).map(function(Bi){return 24*Bi})}var bi=ot?"center":m.get("text-justify").evaluate(Gt,{}),Pi=m.get("symbol-placement"),rr="point"===Pi?24*m.get("text-max-width").evaluate(Gt,{}):0,Fr=function(){t.allowVerticalPlacement&&co(ki)&&(Re.vertical=ru(Ee,e,i,u,be,rr,it,mi,"left",Qi,pe,To.vertical,!0,Pi,Oe,He))};if(!ot&&Ai){for(var Vr="auto"===bi?Ai.map(function(Bi){return Wu(Bi)}):[bi],Un=!1,Nn=0;Nn<Vr.length;Nn++){var nn=Vr[Nn];if(!Re.horizontal[nn])if(Un)Re.horizontal[nn]=Re.horizontal[0];else{var wn=ru(Ee,e,i,u,be,rr,it,"center",nn,Qi,pe,To.horizontal,!1,Pi,Oe,He);wn&&(Re.horizontal[nn]=wn,Un=1===wn.positionedLines.length)}}Fr()}else{"auto"===bi&&(bi=Wu(mi));var Pn=ru(Ee,e,i,u,be,rr,it,mi,bi,Qi,pe,To.horizontal,!1,Pi,Oe,He);Pn&&(Re.horizontal[bi]=Pn),Fr(),co(ki)&&ot&&Tt&&(Re.vertical=ru(Ee,e,i,u,be,rr,it,mi,bi,Qi,pe,To.vertical,!1,Pi,Oe,He))}}var Bi,dr,Lr,xa,Jn,jn=void 0,yn=!1;if(Gt.icon&&Gt.icon.name){var Ur=a[Gt.icon.name];Ur&&(Bi=u[Gt.icon.name],dr=m.get("icon-offset").evaluate(Gt,{}),Lr=qu(m.get("icon-anchor").evaluate(Gt,{})),jn={image:Bi,top:Jn=dr[1]-Bi.displaySize[1]*Lr.verticalAlign,bottom:Jn+Bi.displaySize[1],left:xa=dr[0]-Bi.displaySize[0]*Lr.horizontalAlign,right:xa+Bi.displaySize[0]},yn=Ur.sdf,void 0===t.sdfIcons?t.sdfIcons=Ur.sdf:t.sdfIcons!==Ur.sdf&&ae("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ur.pixelRatio!==t.pixelRatio||0!==m.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var Jr=rp(Re.horizontal)||Re.vertical;t.iconsInText=!!Jr&&Jr.iconsInText,(Jr||jn)&&function(Bi,dr,Dr,Lr,gn,wr,Mn,qr,xa,Vn){var Jn=wr.textMaxSize.evaluate(dr,{});void 0===Jn&&(Jn=Mn);var Vo,Sn=Bi.layers[0].layout,oa=Sn.get("icon-offset").evaluate(dr,{}),Da=rp(Dr.horizontal),ba=Mn/24,Pl=Bi.tilePixelRatio*ba,La=Bi.tilePixelRatio*Jn/24,Yu=Bi.tilePixelRatio*qr,rl=Bi.tilePixelRatio*Sn.get("symbol-spacing"),du=Sn.get("text-padding")*Bi.tilePixelRatio,nl=Sn.get("icon-padding")*Bi.tilePixelRatio,Ml=Sn.get("text-max-angle")/180*Math.PI,fu="map"===Sn.get("text-rotation-alignment")&&"point"!==Sn.get("symbol-placement"),Ju="map"===Sn.get("icon-rotation-alignment")&&"point"!==Sn.get("symbol-placement"),Dl=Sn.get("symbol-placement"),ms=rl/2,As=Sn.get("icon-text-fit");Lr&&"none"!==As&&(Bi.allowVerticalPlacement&&Dr.vertical&&(Vo=Wc(Lr,Dr.vertical,As,Sn.get("icon-text-fit-padding"),oa,ba)),Da&&(Lr=Wc(Lr,Da,As,Sn.get("icon-text-fit-padding"),oa,ba)));var ys=function(bu,Eo){Eo.x<0||Eo.x>=mn||Eo.y<0||Eo.y>=mn||function(nr,Dn,Co,wa,Ps,cl,Sa,yo,Si,fr,wu,Su,rc,xp,Nl,bp,wp,Sp,Tp,Ep,Io,Tu,Cp){var nc,pl,jl,Vl,ql,hl=nr.addToLineVertexArray(Dn,Co),Ip=0,kp=0,Ap=0,zp=0,oc=-1,ac=-1,Ja={},Pp=Fo(""),sc=0,lc=0;if(void 0===yo._unevaluatedLayout.getValue("text-radial-offset")?(sc=(nc=yo.layout.get("text-offset").evaluate(Io,{}).map(function(gd){return 24*gd}))[0],lc=nc[1]):(sc=24*yo.layout.get("text-radial-offset").evaluate(Io,{}),lc=Zu),nr.allowVerticalPlacement&&wa.vertical){var Mp=yo.layout.get("text-rotate").evaluate(Io,{})+90;Vl=new Il(Si,Co,Dn,fr,wu,Su,wa.vertical,rc,xp,Nl,nr.overscaling,Mp),Sa&&(ql=new Il(Si,Co,Dn,fr,wu,Su,Sa,wp,Sp,Nl,nr.overscaling,Mp))}if(Ps){var uc=yo.layout.get("icon-rotate").evaluate(Io,{}),Dp="none"!==yo.layout.get("icon-text-fit"),Lp=Qc(Ps,uc,Cp,Dp),cc=Sa?Qc(Sa,uc,Cp,Dp):void 0;jl=new Il(Si,Co,Dn,fr,wu,Su,Ps,wp,Sp,!1,nr.overscaling,uc),Ip=4*Lp.length;var Op=nr.iconSizeData,Hl=null;"source"===Op.kind?(Hl=[_a*yo.layout.get("icon-size").evaluate(Io,{})])[0]>ds&&ae(nr.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Op.kind&&((Hl=[_a*Tu.compositeIconSizes[0].evaluate(Io,{}),_a*Tu.compositeIconSizes[1].evaluate(Io,{})])[0]>ds||Hl[1]>ds)&&ae(nr.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),nr.addSymbols(nr.icon,Lp,Hl,Ep,Tp,Io,!1,Dn,hl.lineStartIndex,hl.lineLength,-1),oc=nr.icon.placedSymbolArray.length-1,cc&&(kp=4*cc.length,nr.addSymbols(nr.icon,cc,Hl,Ep,Tp,Io,To.vertical,Dn,hl.lineStartIndex,hl.lineLength,-1),ac=nr.icon.placedSymbolArray.length-1)}for(var Rp in wa.horizontal){var Eu=wa.horizontal[Rp];if(!pl){Pp=Fo(Eu.text);var ld=yo.layout.get("text-rotate").evaluate(Io,{});pl=new Il(Si,Co,Dn,fr,wu,Su,Eu,rc,xp,Nl,nr.overscaling,ld)}var Bp=1===Eu.positionedLines.length;if(Ap+=ip(nr,Dn,Eu,cl,yo,Nl,Io,bp,hl,wa.vertical?To.horizontal:To.horizontalOnly,Bp?Object.keys(wa.horizontal):[Rp],Ja,oc,Tu),Bp)break}wa.vertical&&(zp+=ip(nr,Dn,wa.vertical,cl,yo,Nl,Io,bp,hl,To.vertical,["vertical"],Ja,ac,Tu));var ud=pl?pl.boxStartIndex:nr.collisionBoxArray.length,cd=pl?pl.boxEndIndex:nr.collisionBoxArray.length,pd=Vl?Vl.boxStartIndex:nr.collisionBoxArray.length,hd=Vl?Vl.boxEndIndex:nr.collisionBoxArray.length,dd=jl?jl.boxStartIndex:nr.collisionBoxArray.length,fd=jl?jl.boxEndIndex:nr.collisionBoxArray.length,md=ql?ql.boxStartIndex:nr.collisionBoxArray.length,yd=ql?ql.boxEndIndex:nr.collisionBoxArray.length;nr.glyphOffsetArray.length>=yr.MAX_GLYPHS&&ae("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Io.sortKey&&nr.addToSortKeyRanges(nr.symbolInstances.length,Io.sortKey),nr.symbolInstances.emplaceBack(Dn.x,Dn.y,Ja.right>=0?Ja.right:-1,Ja.center>=0?Ja.center:-1,Ja.left>=0?Ja.left:-1,Ja.vertical||-1,oc,ac,Pp,ud,cd,pd,hd,dd,fd,md,yd,fr,Ap,zp,Ip,kp,0,rc,sc,lc)}(Bi,Eo,bu,Dr,Lr,gn,Vo,Bi.layers[0],Bi.collisionBoxArray,dr.index,dr.sourceLayerIndex,Bi.index,Pl,du,fu,xa,Yu,nl,Ju,oa,dr,wr,Vn)};if("line"===Dl)for(var ol=0,Ll=function(bu,Eo,nr,Dn,Co){for(var wa=[],Ps=0;Ps<bu.length;Ps++)for(var cl=bu[Ps],Sa=void 0,yo=0;yo<cl.length-1;yo++){var Si=cl[yo],fr=cl[yo+1];Si.x<0&&fr.x<0||(Si.x<0?Si=new et(0,Si.y+(0-Si.x)/(fr.x-Si.x)*(fr.y-Si.y))._round():fr.x<0&&(fr=new et(0,Si.y+(0-Si.x)/(fr.x-Si.x)*(fr.y-Si.y))._round()),Si.y<0&&fr.y<0||(Si.y<0?Si=new et(Si.x+(0-Si.y)/(fr.y-Si.y)*(fr.x-Si.x),0)._round():fr.y<0&&(fr=new et(Si.x+(0-Si.y)/(fr.y-Si.y)*(fr.x-Si.x),0)._round()),Si.x>=Dn&&fr.x>=Dn||(Si.x>=Dn?Si=new et(Dn,Si.y+(Dn-Si.x)/(fr.x-Si.x)*(fr.y-Si.y))._round():fr.x>=Dn&&(fr=new et(Dn,Si.y+(Dn-Si.x)/(fr.x-Si.x)*(fr.y-Si.y))._round()),Si.y>=Co&&fr.y>=Co||(Si.y>=Co?Si=new et(Si.x+(Co-Si.y)/(fr.y-Si.y)*(fr.x-Si.x),Co)._round():fr.y>=Co&&(fr=new et(Si.x+(Co-Si.y)/(fr.y-Si.y)*(fr.x-Si.x),Co)._round()),Sa&&Si.equals(Sa[Sa.length-1])||wa.push(Sa=[Si]),Sa.push(fr)))))}return wa}(dr.geometry,0,0,mn,mn);ol<Ll.length;ol+=1)for(var mu=Ll[ol],Ol=0,Rl=Hh(mu,rl,Ml,Dr.vertical||Da,Lr,24,La,Bi.overscaling,mn);Ol<Rl.length;Ol+=1){var yu=Rl[Ol];Da&&Xh(Bi,Da.text,ms,yu)||ys(mu,yu)}else if("line-center"===Dl)for(var al=0,vu=dr.geometry;al<vu.length;al+=1){var Bl=vu[al];if(Bl.length>1){var _u=qh(Bl,Ml,Dr.vertical||Da,Lr,24,La);_u&&ys(Bl,_u)}}else if("Polygon"===dr.type)for(var sl=0,ll=Ru(dr.geometry,0);sl<ll.length;sl+=1){var Fl=ll[sl],xu=Wh(Fl,16);ys(Fl[0],new $s(xu.x,xu.y,0))}else if("LineString"===dr.type)for(var zs=0,Ul=dr.geometry;zs<Ul.length;zs+=1){var ul=Ul[zs];ys(ul,new $s(ul[0].x,ul[0].y,0))}else if("Point"===dr.type)for(var tc=0,vp=dr.geometry;tc<vp.length;tc+=1)for(var ec=0,_p=vp[tc];ec<_p.length;ec+=1){var ic=_p[ec];ys([ic],new $s(ic.x,ic.y,0))}}(t,Gt,Re,jn,a,T,Oe,Ke,pe,yn)},qt=0,Jt=t.features;qt<Jt.length;qt+=1)It();c&&t.generateCollisionDebugBuffers()},l.perspective=function(t,e,i,a,u){var c,h=1/Math.tan(e/2);return t[0]=h/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=u&&u!==1/0?(t[10]=(u+a)*(c=1/(a-u)),t[14]=2*u*a*c):(t[10]=-1,t[14]=-2*a),t},l.pick=function(t,e){for(var i={},a=0;a<e.length;a++){var u=e[a];u in t&&(i[u]=t[u])}return i},l.plugin=kn,l.polygonIntersectsPolygon=pc,l.postMapLoadEvent=Ci,l.postTurnstileEvent=Pe,l.potpack=Vc,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=oe,l.registerForPluginStateChange=function(t){return t({pluginStatus:oo,pluginURL:ea}),Fs.on("pluginStateChange",t),t},l.rotate=function(t,e,i){var a=e[0],u=e[1],c=e[2],h=e[3],m=Math.sin(i),_=Math.cos(i);return t[0]=a*_+c*m,t[1]=u*_+h*m,t[2]=a*-m+c*_,t[3]=u*-m+h*_,t},l.rotateX=function(t,e,i){var a=Math.sin(i),u=Math.cos(i),c=e[4],h=e[5],m=e[6],_=e[7],T=e[8],C=e[9],M=e[10],R=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=c*u+T*a,t[5]=h*u+C*a,t[6]=m*u+M*a,t[7]=_*u+R*a,t[8]=T*u-c*a,t[9]=C*u-h*a,t[10]=M*u-m*a,t[11]=R*u-_*a,t},l.rotateZ=function(t,e,i){var a=Math.sin(i),u=Math.cos(i),c=e[0],h=e[1],m=e[2],_=e[3],T=e[4],C=e[5],M=e[6],R=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=c*u+T*a,t[1]=h*u+C*a,t[2]=m*u+M*a,t[3]=_*u+R*a,t[4]=T*u-c*a,t[5]=C*u-h*a,t[6]=M*u-m*a,t[7]=R*u-_*a,t},l.scale=function(t,e,i){var a=i[0],u=i[1],c=i[2];return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*u,t[5]=e[5]*u,t[6]=e[6]*u,t[7]=e[7]*u,t[8]=e[8]*c,t[9]=e[9]*c,t[10]=e[10]*c,t[11]=e[11]*c,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},l.setCacheLimits=function(t,e){tr=t,Qr=e},l.setRTLTextPlugin=function(t,e,i){if(void 0===i&&(i=!1),oo===no||oo===_o||oo===ua)throw new Error("setRTLTextPlugin cannot be called multiple times.");ea=Gi.resolveURL(t),oo=no,Ds=e,ma(),i||dl()},l.sphericalToCartesian=function(t){var e=t[0],i=t[1],a=t[2];return i+=90,i*=Math.PI/180,a*=Math.PI/180,{x:e*Math.cos(i)*Math.sin(a),y:e*Math.sin(i)*Math.sin(a),z:e*Math.cos(a)}},l.styleSpec=x,l.symbolSize=Vh,l.transformMat3=function(t,e,i){var a=e[0],u=e[1],c=e[2];return t[0]=a*i[0]+u*i[3]+c*i[6],t[1]=a*i[1]+u*i[4]+c*i[7],t[2]=a*i[2]+u*i[5]+c*i[8],t},l.transformMat4=$l,l.translate=function(t,e,i){var a,u,c,h,m,_,T,C,M,R,O,B,Y=i[0],it=i[1],ot=i[2];return e===t?(t[12]=e[0]*Y+e[4]*it+e[8]*ot+e[12],t[13]=e[1]*Y+e[5]*it+e[9]*ot+e[13],t[14]=e[2]*Y+e[6]*it+e[10]*ot+e[14],t[15]=e[3]*Y+e[7]*it+e[11]*ot+e[15]):(u=e[1],c=e[2],h=e[3],m=e[4],_=e[5],T=e[6],C=e[7],M=e[8],R=e[9],O=e[10],B=e[11],t[0]=a=e[0],t[1]=u,t[2]=c,t[3]=h,t[4]=m,t[5]=_,t[6]=T,t[7]=C,t[8]=M,t[9]=R,t[10]=O,t[11]=B,t[12]=a*Y+m*it+M*ot+e[12],t[13]=u*Y+_*it+R*ot+e[13],t[14]=c*Y+T*it+O*ot+e[14],t[15]=h*Y+C*it+B*ot+e[15]),t},l.triggerPluginCompletionEvent=Zl,l.uniqueId=Vt,l.validateCustomStyleLayer=function(t){var e=[],i=t.id;return void 0===i&&e.push({message:"layers."+i+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+i+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),e},l.validateLight=ur,l.validateStyle=la,l.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},l.vectorTile=Zs,l.version="1.7.0",l.warnOnce=ae,l.webpSupported=Hr,l.window=self,l.wrap=$t}),A(0,function(l){function P(x){var E=typeof x;if("number"===E||"boolean"===E||"string"===E||null==x)return JSON.stringify(x);if(Array.isArray(x)){for(var D="[",j=0,K=x;j<K.length;j+=1)D+=P(K[j])+",";return D+"]"}for(var ct=Object.keys(x).sort(),yt="{",at=0;at<ct.length;at++)yt+=JSON.stringify(ct[at])+":"+P(x[ct[at]])+",";return yt+"}"}function I(x){for(var E="",D=0,j=l.refProperties;D<j.length;D+=1)E+="/"+P(x[j[D]]);return E}var N=function(x){this.keyCache={},x&&this.replace(x)};N.prototype.replace=function(x){this._layerConfigs={},this._layers={},this.update(x,[])},N.prototype.update=function(x,E){for(var D=this,j=0,K=x;j<K.length;j+=1){var ct=K[j];this._layerConfigs[ct.id]=ct;var yt=this._layers[ct.id]=l.createStyleLayer(ct);yt._featureFilter=l.featureFilter(yt.filter),this.keyCache[ct.id]&&delete this.keyCache[ct.id]}for(var at=0,nt=E;at<nt.length;at+=1){var tt=nt[at];delete this.keyCache[tt],delete this._layerConfigs[tt],delete this._layers[tt]}this.familiesBySource={};for(var Ot=0,jt=function(ai,Qe){for(var di={},Ei=0;Ei<ai.length;Ei++){var Cr=Qe&&Qe[ai[Ei].id]||I(ai[Ei]);Qe&&(Qe[ai[Ei].id]=Cr);var Ue=di[Cr];Ue||(Ue=di[Cr]=[]),Ue.push(ai[Ei])}var Sr=[];for(var tn in di)Sr.push(di[tn]);return Sr}(l.values(this._layerConfigs),this.keyCache);Ot<jt.length;Ot+=1){var Nt=jt[Ot].map(function(ai){return D._layers[ai.id]}),fe=Nt[0];if("none"!==fe.visibility){var he=fe.source||"",qe=this.familiesBySource[he];qe||(qe=this.familiesBySource[he]={});var Be=fe.sourceLayer||"_geojsonTileLayer",ze=qe[Be];ze||(ze=qe[Be]=[]),ze.push(Nt)}}};var et=function(x){var E={},D=[];for(var j in x){var K=x[j],ct=E[j]={};for(var yt in K){var at=K[+yt];if(at&&0!==at.bitmap.width&&0!==at.bitmap.height){var nt={x:0,y:0,w:at.bitmap.width+2,h:at.bitmap.height+2};D.push(nt),ct[yt]={rect:nt,metrics:at.metrics}}}}var tt=l.potpack(D),Nt=new l.AlphaImage({width:tt.w||1,height:tt.h||1});for(var fe in x){var he=x[fe];for(var qe in he){var Be=he[+qe];if(Be&&0!==Be.bitmap.width&&0!==Be.bitmap.height){var ze=E[fe][qe].rect;l.AlphaImage.copy(Be.bitmap,Nt,{x:0,y:0},{x:ze.x+1,y:ze.y+1},Be.bitmap)}}}this.image=Nt,this.positions=E};l.register("GlyphAtlas",et);var Lt=function(x){this.tileID=new l.OverscaledTileID(x.tileID.overscaledZ,x.tileID.wrap,x.tileID.canonical.z,x.tileID.canonical.x,x.tileID.canonical.y),this.uid=x.uid,this.zoom=x.zoom,this.pixelRatio=x.pixelRatio,this.tileSize=x.tileSize,this.source=x.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=x.showCollisionBoxes,this.collectResourceTiming=!!x.collectResourceTiming,this.returnDependencies=!!x.returnDependencies,this.promoteId=x.promoteId};function Zt(x,E,D){for(var j=new l.EvaluationParameters(E),K=0,ct=x;K<ct.length;K+=1)ct[K].recalculate(j,D)}function Mt(x,E){var D=l.getArrayBuffer(x.request,function(j,K,ct,yt){j?E(j):K&&E(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(K)),rawData:K,cacheControl:ct,expires:yt})});return function(){D.cancel(),E()}}Lt.prototype.parse=function(x,E,D,j,K){var ct=this;this.status="parsing",this.data=x,this.collisionBoxArray=new l.CollisionBoxArray;var yt=new l.DictionaryCoder(Object.keys(x.layers).sort()),at=new l.FeatureIndex(this.tileID,this.promoteId);at.bucketLayerIDs=[];var nt,tt,Ot,jt,Nt={},fe={featureIndex:at,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:D},he=E.familiesBySource[this.source];for(var qe in he){var Be=x.layers[qe];if(Be){1===Be.version&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+qe+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var ze=yt.encode(qe),ai=[],Qe=0;Qe<Be.length;Qe++){var di=Be.feature(Qe),Ei=at.getId(di,qe);ai.push({feature:di,id:Ei,index:Qe,sourceLayerIndex:ze})}for(var Cr=0,Ue=he[qe];Cr<Ue.length;Cr+=1){var Sr=Ue[Cr],tn=Sr[0];tn.minzoom&&this.zoom<Math.floor(tn.minzoom)||tn.maxzoom&&this.zoom>=tn.maxzoom||"none"!==tn.visibility&&(Zt(Sr,this.zoom,D),(Nt[tn.id]=tn.createBucket({index:at.bucketLayerIDs.length,layers:Sr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ze,sourceID:this.source})).populate(ai,fe),at.bucketLayerIDs.push(Sr.map(function(vr){return vr.id})))}}}var mr=l.mapObject(fe.glyphDependencies,function(vr){return Object.keys(vr).map(Number)});Object.keys(mr).length?j.send("getGlyphs",{uid:this.uid,stacks:mr},function(vr,Hi){nt||(nt=vr,tt=Hi,Xi.call(ct))}):tt={};var Rr=Object.keys(fe.iconDependencies);Rr.length?j.send("getImages",{icons:Rr,source:this.source,tileID:this.tileID,type:"icons"},function(vr,Hi){nt||(nt=vr,Ot=Hi,Xi.call(ct))}):Ot={};var In=Object.keys(fe.patternDependencies);function Xi(){if(nt)return K(nt);if(tt&&Ot&&jt){var vr=new et(tt),Hi=new l.ImageAtlas(Ot,jt);for(var on in Nt){var Ar=Nt[on];Ar instanceof l.SymbolBucket?(Zt(Ar.layers,this.zoom,D),l.performSymbolLayout(Ar,tt,vr.positions,Ot,Hi.iconPositions,this.showCollisionBoxes)):Ar.hasPattern&&(Ar instanceof l.LineBucket||Ar instanceof l.FillBucket||Ar instanceof l.FillExtrusionBucket)&&(Zt(Ar.layers,this.zoom,D),Ar.addFeatures(fe,Hi.patternPositions))}this.status="done",K(null,{buckets:l.values(Nt).filter(function(an){return!an.isEmpty()}),featureIndex:at,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:vr.image,imageAtlas:Hi,glyphMap:this.returnDependencies?tt:null,iconMap:this.returnDependencies?Ot:null,glyphPositions:this.returnDependencies?vr.positions:null})}}In.length?j.send("getImages",{icons:In,source:this.source,tileID:this.tileID,type:"patterns"},function(vr,Hi){nt||(nt=vr,jt=Hi,Xi.call(ct))}):jt={},Xi.call(this)};var Yt=function(x,E,D,j){this.actor=x,this.layerIndex=E,this.availableImages=D,this.loadVectorData=j||Mt,this.loading={},this.loaded={}};Yt.prototype.loadTile=function(x,E){var D=this,j=x.uid;this.loading||(this.loading={});var K=!!(x&&x.request&&x.request.collectResourceTiming)&&new l.RequestPerformance(x.request),ct=this.loading[j]=new Lt(x);ct.abort=this.loadVectorData(x,function(yt,at){if(delete D.loading[j],yt||!at)return ct.status="done",D.loaded[j]=ct,E(yt);var nt=at.rawData,tt={};at.expires&&(tt.expires=at.expires),at.cacheControl&&(tt.cacheControl=at.cacheControl);var Ot={};if(K){var jt=K.finish();jt&&(Ot.resourceTiming=JSON.parse(JSON.stringify(jt)))}ct.vectorTile=at.vectorTile,ct.parse(at.vectorTile,D.layerIndex,D.availableImages,D.actor,function(Nt,fe){if(Nt||!fe)return E(Nt);E(null,l.extend({rawTileData:nt.slice(0)},fe,tt,Ot))}),D.loaded=D.loaded||{},D.loaded[j]=ct})},Yt.prototype.reloadTile=function(x,E){var D=this,j=this.loaded,K=x.uid,ct=this;if(j&&j[K]){var yt=j[K];yt.showCollisionBoxes=x.showCollisionBoxes;var at=function(nt,tt){var Ot=yt.reloadCallback;Ot&&(delete yt.reloadCallback,yt.parse(yt.vectorTile,ct.layerIndex,D.availableImages,ct.actor,Ot)),E(nt,tt)};"parsing"===yt.status?yt.reloadCallback=at:"done"===yt.status&&(yt.vectorTile?yt.parse(yt.vectorTile,this.layerIndex,this.availableImages,this.actor,at):at())}},Yt.prototype.abortTile=function(x,E){var D=this.loading,j=x.uid;D&&D[j]&&D[j].abort&&(D[j].abort(),delete D[j]),E()},Yt.prototype.removeTile=function(x,E){var D=this.loaded,j=x.uid;D&&D[j]&&delete D[j],E()};var $t=l.window.ImageBitmap,vt=function(){this.loaded={}};vt.prototype.loadTile=function(x,E){var D=x.uid,j=x.encoding,K=x.rawImageData,ct=$t&&K instanceof $t?this.getImageData(K):K,yt=new l.DEMData(D,ct,j);this.loaded=this.loaded||{},this.loaded[D]=yt,E(null,yt)},vt.prototype.getImageData=function(x){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(x.width,x.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=x.width,this.offscreenCanvas.height=x.height,this.offscreenCanvasContext.drawImage(x,0,0,x.width,x.height);var E=this.offscreenCanvasContext.getImageData(-1,-1,x.width+2,x.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:E.width,height:E.height},E.data)},vt.prototype.removeTile=function(x){var E=this.loaded,D=x.uid;E&&E[D]&&delete E[D]};function Vt(x){var E=0;if(x&&x.length>0){E+=Math.abs(xe(x[0]));for(var D=1;D<x.length;D++)E-=Math.abs(xe(x[D]))}return E}function xe(x){var E,D,j,K,ct,yt,at=0,nt=x.length;if(nt>2){for(yt=0;yt<nt;yt++)yt===nt-2?(j=nt-2,K=nt-1,ct=0):yt===nt-1?(j=nt-1,K=0,ct=1):(j=yt,K=yt+1,ct=yt+2),E=x[j],D=x[K],at+=(Ze(x[ct][0])-Ze(E[0]))*Math.sin(Ze(D[1]));at=6378137*at*6378137/2}return at}function Ze(x){return x*Math.PI/180}var Ye={geometry:function x(E){var D,j=0;switch(E.type){case"Polygon":return Vt(E.coordinates);case"MultiPolygon":for(D=0;D<E.coordinates.length;D++)j+=Vt(E.coordinates[D]);return j;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(D=0;D<E.geometries.length;D++)j+=x(E.geometries[D]);return j}},ring:xe},Ui=function x(E,D){switch(E&&E.type||null){case"FeatureCollection":return E.features=E.features.map(q(x,D)),E;case"GeometryCollection":return E.geometries=E.geometries.map(q(x,D)),E;case"Feature":return E.geometry=x(E.geometry,D),E;case"Polygon":case"MultiPolygon":return K=D,"Polygon"===(j=E).type?j.coordinates=Wi(j.coordinates,K):"MultiPolygon"===j.type&&(j.coordinates=j.coordinates.map(q(Wi,K))),j;default:return E}var j,K};function q(x,E){return function(D){return x(D,E)}}function Wi(x,E){x[0]=Ti(x[0],E=!!E);for(var D=1;D<x.length;D++)x[D]=Ti(x[D],!E);return x}function Ti(x,E){return Ye.ring(x)>=0===E?x:x.reverse()}var ti=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,ae=function(x){this._feature=x,this.extent=l.EXTENT,this.type=x.type,this.properties=x.tags,"id"in x&&!isNaN(x.id)&&(this.id=parseInt(x.id,10))};ae.prototype.loadGeometry=function(){if(1===this._feature.type){for(var x=[],E=0,D=this._feature.geometry;E<D.length;E+=1){var j=D[E];x.push([new l.Point$1(j[0],j[1])])}return x}for(var K=[],ct=0,yt=this._feature.geometry;ct<yt.length;ct+=1){for(var at=[],nt=0,tt=yt[ct];nt<tt.length;nt+=1){var Ot=tt[nt];at.push(new l.Point$1(Ot[0],Ot[1]))}K.push(at)}return K},ae.prototype.toGeoJSON=function(x,E,D){return ti.call(this,x,E,D)};var zt=function(x){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=x.length,this._features=x};zt.prototype.feature=function(x){return new ae(this._features[x])};var Ht=l.vectorTile.VectorTileFeature,ht=mt;function mt(x,E){this.options=E||{},this.features=x,this.length=x.length}function rt(x,E){this.id="number"==typeof x.id?x.id:void 0,this.type=x.type,this.rawGeometry=1===x.type?[x.geometry]:x.geometry,this.properties=x.tags,this.extent=E||4096}mt.prototype.feature=function(x){return new rt(this.features[x],this.options.extent)},rt.prototype.loadGeometry=function(){var x=this.rawGeometry;this.geometry=[];for(var E=0;E<x.length;E++){for(var D=x[E],j=[],K=0;K<D.length;K++)j.push(new l.Point$1(D[K][0],D[K][1]));this.geometry.push(j)}return this.geometry},rt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var x=this.geometry,E=1/0,D=-1/0,j=1/0,K=-1/0,ct=0;ct<x.length;ct++)for(var yt=x[ct],at=0;at<yt.length;at++){var nt=yt[at];E=Math.min(E,nt.x),D=Math.max(D,nt.x),j=Math.min(j,nt.y),K=Math.max(K,nt.y)}return[E,j,D,K]},rt.prototype.toGeoJSON=Ht.prototype.toGeoJSON;var J=se,Et=ht;function se(x){var E=new l.pbf;return function(D,j){for(var K in D.layers)j.writeMessage(3,Ie,D.layers[K])}(x,E),E.finish()}function Ie(x,E){var D;E.writeVarintField(15,x.version||1),E.writeStringField(1,x.name||""),E.writeVarintField(5,x.extent||4096);var j={keys:[],values:[],keycache:{},valuecache:{}};for(D=0;D<x.length;D++)j.feature=x.feature(D),E.writeMessage(2,ei,j);var K=j.keys;for(D=0;D<K.length;D++)E.writeStringField(3,K[D]);var ct=j.values;for(D=0;D<ct.length;D++)E.writeMessage(4,Hr,ct[D])}function ei(x,E){var D=x.feature;void 0!==D.id&&E.writeVarintField(1,D.id),E.writeMessage(2,_e,x),E.writeVarintField(3,D.type),E.writeMessage(4,_i,D)}function _e(x,E){var D=x.feature,j=x.keys,K=x.values,ct=x.keycache,yt=x.valuecache;for(var at in D.properties){var nt=ct[at];void 0===nt&&(j.push(at),ct[at]=nt=j.length-1),E.writeVarint(nt);var tt=D.properties[at],Ot=typeof tt;"string"!==Ot&&"boolean"!==Ot&&"number"!==Ot&&(tt=JSON.stringify(tt));var jt=Ot+":"+tt,Nt=yt[jt];void 0===Nt&&(K.push(tt),yt[jt]=Nt=K.length-1),E.writeVarint(Nt)}}function Ri(x,E){return(E<<3)+(7&x)}function Gi(x){return x<<1^x>>31}function _i(x,E){for(var D=x.loadGeometry(),j=x.type,K=0,ct=0,yt=D.length,at=0;at<yt;at++){var nt=D[at],tt=1;1===j&&(tt=nt.length),E.writeVarint(Ri(1,tt));for(var Ot=3===j?nt.length-1:nt.length,jt=0;jt<Ot;jt++){1===jt&&1!==j&&E.writeVarint(Ri(2,Ot-1));var Nt=nt[jt].x-K,fe=nt[jt].y-ct;E.writeVarint(Gi(Nt)),E.writeVarint(Gi(fe)),K+=Nt,ct+=fe}3===j&&E.writeVarint(Ri(7,1))}}function Hr(x,E){var D=typeof x;"string"===D?E.writeStringField(1,x):"boolean"===D?E.writeBooleanField(7,x):"number"===D&&(x%1!=0?E.writeDoubleField(3,x):x<0?E.writeSVarintField(6,x):E.writeVarintField(5,x))}function Tr(x,E,D,j,K,ct){if(!(K-j<=D)){var yt=j+K>>1;(function at(nt,tt,Ot,jt,Nt,fe){for(;Nt>jt;){if(Nt-jt>600){var he=Nt-jt+1,qe=Ot-jt+1,Be=Math.log(he),ze=.5*Math.exp(2*Be/3),ai=.5*Math.sqrt(Be*ze*(he-ze)/he)*(qe-he/2<0?-1:1);at(nt,tt,Ot,Math.max(jt,Math.floor(Ot-qe*ze/he+ai)),Math.min(Nt,Math.floor(Ot+(he-qe)*ze/he+ai)),fe)}var Ei=tt[2*Ot+fe],Cr=jt,Ue=Nt;for(sr(nt,tt,jt,Ot),tt[2*Nt+fe]>Ei&&sr(nt,tt,jt,Nt);Cr<Ue;){for(sr(nt,tt,Cr,Ue),Cr++,Ue--;tt[2*Cr+fe]<Ei;)Cr++;for(;tt[2*Ue+fe]>Ei;)Ue--}tt[2*jt+fe]===Ei?sr(nt,tt,jt,Ue):sr(nt,tt,++Ue,Nt),Ue<=Ot&&(jt=Ue+1),Ot<=Ue&&(Nt=Ue-1)}})(x,E,yt,j,K,ct%2),Tr(x,E,D,j,yt-1,ct+1),Tr(x,E,D,yt+1,K,ct+1)}}function sr(x,E,D,j){Tn(x,D,j),Tn(E,2*D,2*j),Tn(E,2*D+1,2*j+1)}function Tn(x,E,D){var j=x[E];x[E]=x[D],x[D]=j}function Ln(x,E,D,j){var K=x-D,ct=E-j;return K*K+ct*ct}J.fromVectorTileJs=se,J.fromGeojsonVt=function(x,E){E=E||{};var D={};for(var j in x)D[j]=new ht(x[j].features,E),D[j].name=j,D[j].version=E.version,D[j].extent=E.extent;return se({layers:D})},J.GeoJSONWrapper=Et;var Dt=function(x){return x[0]},Ft=function(x){return x[1]},Fe=function(x,E,D,j,K){void 0===E&&(E=Dt),void 0===D&&(D=Ft),void 0===j&&(j=64),void 0===K&&(K=Float64Array),this.nodeSize=j,this.points=x;for(var ct=x.length<65536?Uint16Array:Uint32Array,yt=this.ids=new ct(x.length),at=this.coords=new K(2*x.length),nt=0;nt<x.length;nt++)yt[nt]=nt,at[2*nt]=E(x[nt]),at[2*nt+1]=D(x[nt]);Tr(yt,at,j,0,yt.length-1,0)};Fe.prototype.range=function(x,E,D,j){return function(K,ct,yt,at,nt,tt,Ot){for(var jt,Nt,fe=[0,K.length-1,0],he=[];fe.length;){var qe=fe.pop(),Be=fe.pop(),ze=fe.pop();if(Be-ze<=Ot)for(var ai=ze;ai<=Be;ai++)Nt=ct[2*ai+1],(jt=ct[2*ai])>=yt&&jt<=nt&&Nt>=at&&Nt<=tt&&he.push(K[ai]);else{var Qe=Math.floor((ze+Be)/2);Nt=ct[2*Qe+1],(jt=ct[2*Qe])>=yt&&jt<=nt&&Nt>=at&&Nt<=tt&&he.push(K[Qe]);var di=(qe+1)%2;(0===qe?yt<=jt:at<=Nt)&&(fe.push(ze),fe.push(Qe-1),fe.push(di)),(0===qe?nt>=jt:tt>=Nt)&&(fe.push(Qe+1),fe.push(Be),fe.push(di))}}return he}(this.ids,this.coords,x,E,D,j,this.nodeSize)},Fe.prototype.within=function(x,E,D){return function(j,K,ct,yt,at,nt){for(var tt=[0,j.length-1,0],Ot=[],jt=at*at;tt.length;){var Nt=tt.pop(),fe=tt.pop(),he=tt.pop();if(fe-he<=nt)for(var qe=he;qe<=fe;qe++)Ln(K[2*qe],K[2*qe+1],ct,yt)<=jt&&Ot.push(j[qe]);else{var Be=Math.floor((he+fe)/2),ze=K[2*Be],ai=K[2*Be+1];Ln(ze,ai,ct,yt)<=jt&&Ot.push(j[Be]);var Qe=(Nt+1)%2;(0===Nt?ct-at<=ze:yt-at<=ai)&&(tt.push(he),tt.push(Be-1),tt.push(Qe)),(0===Nt?ct+at>=ze:yt+at>=ai)&&(tt.push(Be+1),tt.push(fe),tt.push(Qe))}}return Ot}(this.ids,this.coords,x,E,D,this.nodeSize)};var Le={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(x){return x}},st=function(x){this.options=Kt(Object.create(Le),x),this.trees=new Array(this.options.maxZoom+1)};function Rt(x,E,D,j,K){return{x,y:E,zoom:1/0,id:D,parentId:-1,numPoints:j,properties:K}}function me(x,E){var D=x.geometry.coordinates,K=D[1];return{x:re(D[0]),y:Bt(K),zoom:1/0,index:E,parentId:-1}}function Me(x){return{type:"Feature",id:x.id,properties:ii(x),geometry:{type:"Point",coordinates:[(j=x.x,360*(j-.5)),(E=x.y,D=(180-360*E)*Math.PI/180,360*Math.atan(Math.exp(D))/Math.PI-90)]}};var E,D,j}function ii(x){var E=x.numPoints,D=E>=1e4?Math.round(E/1e3)+"k":E>=1e3?Math.round(E/100)/10+"k":E;return Kt(Kt({},x.properties),{cluster:!0,cluster_id:x.id,point_count:E,point_count_abbreviated:D})}function re(x){return x/360+.5}function Bt(x){var E=Math.sin(x*Math.PI/180),D=.5-.25*Math.log((1+E)/(1-E))/Math.PI;return D<0?0:D>1?1:D}function Kt(x,E){for(var D in E)x[D]=E[D];return x}function ne(x){return x.x}function Pe(x){return x.y}function oi(x,E,D,j,K,ct){var yt=K-D,at=ct-j;if(0!==yt||0!==at){var nt=((x-D)*yt+(E-j)*at)/(yt*yt+at*at);nt>1?(D=K,j=ct):nt>0&&(D+=yt*nt,j+=at*nt)}return(yt=x-D)*yt+(at=E-j)*at}function Ci(x,E,D,j){var K={id:void 0===x?null:x,type:E,geometry:D,tags:j,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ct){var yt=ct.geometry,at=ct.type;if("Point"===at||"MultiPoint"===at||"LineString"===at)ar(ct,yt);else if("Polygon"===at||"MultiLineString"===at)for(var nt=0;nt<yt.length;nt++)ar(ct,yt[nt]);else if("MultiPolygon"===at)for(nt=0;nt<yt.length;nt++)for(var tt=0;tt<yt[nt].length;tt++)ar(ct,yt[nt][tt])}(K),K}function ar(x,E){for(var D=0;D<E.length;D+=3)x.minX=Math.min(x.minX,E[D]),x.minY=Math.min(x.minY,E[D+1]),x.maxX=Math.max(x.maxX,E[D]),x.maxY=Math.max(x.maxY,E[D+1])}function tr(x,E,D,j){if(E.geometry){var K=E.geometry.coordinates,ct=E.geometry.type,yt=Math.pow(D.tolerance/((1<<D.maxZoom)*D.extent),2),at=[],nt=E.id;if(D.promoteId?nt=E.properties[D.promoteId]:D.generateId&&(nt=j||0),"Point"===ct)Qr(K,at);else if("MultiPoint"===ct)for(var tt=0;tt<K.length;tt++)Qr(K[tt],at);else if("LineString"===ct)vn(K,at,yt,!1);else if("MultiLineString"===ct){if(D.lineMetrics){for(tt=0;tt<K.length;tt++)vn(K[tt],at=[],yt,!1),x.push(Ci(nt,"LineString",at,E.properties));return}Xr(K,at,yt,!1)}else if("Polygon"===ct)Xr(K,at,yt,!0);else{if("MultiPolygon"!==ct){if("GeometryCollection"===ct){for(tt=0;tt<E.geometry.geometries.length;tt++)tr(x,{id:nt,geometry:E.geometry.geometries[tt],properties:E.properties},D,j);return}throw new Error("Input data is not a valid GeoJSON object.")}for(tt=0;tt<K.length;tt++){var Ot=[];Xr(K[tt],Ot,yt,!0),at.push(Ot)}}x.push(Ci(nt,ct,at,E.properties))}}function Qr(x,E){E.push(dn(x[0])),E.push(xt(x[1])),E.push(0)}function vn(x,E,D,j){for(var K,ct,yt=0,at=0;at<x.length;at++){var nt=dn(x[at][0]),tt=xt(x[at][1]);E.push(nt),E.push(tt),E.push(0),at>0&&(yt+=j?(K*tt-nt*ct)/2:Math.sqrt(Math.pow(nt-K,2)+Math.pow(tt-ct,2))),K=nt,ct=tt}var Ot=E.length-3;E[2]=1,function jt(Nt,fe,he,qe){for(var Be,ze=qe,ai=he-fe>>1,Qe=he-fe,di=Nt[fe],Ei=Nt[fe+1],Cr=Nt[he],Ue=Nt[he+1],Sr=fe+3;Sr<he;Sr+=3){var tn=oi(Nt[Sr],Nt[Sr+1],di,Ei,Cr,Ue);if(tn>ze)Be=Sr,ze=tn;else if(tn===ze){var mr=Math.abs(Sr-ai);mr<Qe&&(Be=Sr,Qe=mr)}}ze>qe&&(Be-fe>3&&jt(Nt,fe,Be,qe),Nt[Be+2]=ze,he-Be>3&&jt(Nt,Be,he,qe))}(E,0,Ot,D),E[Ot+2]=1,E.size=Math.abs(yt),E.start=0,E.end=E.size}function Xr(x,E,D,j){for(var K=0;K<x.length;K++){var ct=[];vn(x[K],ct,D,j),E.push(ct)}}function dn(x){return x/360+.5}function xt(x){var E=Math.sin(x*Math.PI/180),D=.5-.25*Math.log((1+E)/(1-E))/Math.PI;return D<0?0:D>1?1:D}function pt(x,E,D,j,K,ct,yt,at){if(j/=E,ct>=(D/=E)&&yt<j)return x;if(yt<D||ct>=j)return null;for(var nt=[],tt=0;tt<x.length;tt++){var Ot=x[tt],jt=Ot.geometry,Nt=Ot.type,fe=0===K?Ot.minX:Ot.minY,he=0===K?Ot.maxX:Ot.maxY;if(fe>=D&&he<j)nt.push(Ot);else if(!(he<D||fe>=j)){var qe=[];if("Point"===Nt||"MultiPoint"===Nt)Wt(jt,qe,D,j,K);else if("LineString"===Nt)ue(jt,qe,D,j,K,!1,at.lineMetrics);else if("MultiLineString"===Nt)ri(jt,qe,D,j,K,!1);else if("Polygon"===Nt)ri(jt,qe,D,j,K,!0);else if("MultiPolygon"===Nt)for(var Be=0;Be<jt.length;Be++){var ze=[];ri(jt[Be],ze,D,j,K,!0),ze.length&&qe.push(ze)}if(qe.length){if(at.lineMetrics&&"LineString"===Nt){for(Be=0;Be<qe.length;Be++)nt.push(Ci(Ot.id,Nt,qe[Be],Ot.tags));continue}"LineString"!==Nt&&"MultiLineString"!==Nt||(1===qe.length?(Nt="LineString",qe=qe[0]):Nt="MultiLineString"),"Point"!==Nt&&"MultiPoint"!==Nt||(Nt=3===qe.length?"Point":"MultiPoint"),nt.push(Ci(Ot.id,Nt,qe,Ot.tags))}}}return nt.length?nt:null}function Wt(x,E,D,j,K){for(var ct=0;ct<x.length;ct+=3){var yt=x[ct+K];yt>=D&&yt<=j&&(E.push(x[ct]),E.push(x[ct+1]),E.push(x[ct+2]))}}function ue(x,E,D,j,K,ct,yt){for(var at,nt,tt=We(x),Ot=0===K?zi:Fi,jt=x.start,Nt=0;Nt<x.length-3;Nt+=3){var fe=x[Nt],he=x[Nt+1],qe=x[Nt+2],Be=x[Nt+3],ze=x[Nt+4],ai=0===K?fe:he,Qe=0===K?Be:ze,di=!1;yt&&(at=Math.sqrt(Math.pow(fe-Be,2)+Math.pow(he-ze,2))),ai<D?Qe>D&&(nt=Ot(tt,fe,he,Be,ze,D),yt&&(tt.start=jt+at*nt)):ai>j?Qe<j&&(nt=Ot(tt,fe,he,Be,ze,j),yt&&(tt.start=jt+at*nt)):Ne(tt,fe,he,qe),Qe<D&&ai>=D&&(nt=Ot(tt,fe,he,Be,ze,D),di=!0),Qe>j&&ai<=j&&(nt=Ot(tt,fe,he,Be,ze,j),di=!0),!ct&&di&&(yt&&(tt.end=jt+at*nt),E.push(tt),tt=We(x)),yt&&(jt+=at)}var Ei=x.length-3;fe=x[Ei],he=x[Ei+1],qe=x[Ei+2],(ai=0===K?fe:he)>=D&&ai<=j&&Ne(tt,fe,he,qe),Ei=tt.length-3,ct&&Ei>=3&&(tt[Ei]!==tt[0]||tt[Ei+1]!==tt[1])&&Ne(tt,tt[0],tt[1],tt[2]),tt.length&&E.push(tt)}function We(x){var E=[];return E.size=x.size,E.start=x.start,E.end=x.end,E}function ri(x,E,D,j,K,ct){for(var yt=0;yt<x.length;yt++)ue(x[yt],E,D,j,K,ct,!1)}function Ne(x,E,D,j){x.push(E),x.push(D),x.push(j)}function zi(x,E,D,j,K,ct){var yt=(ct-E)/(j-E);return x.push(ct),x.push(D+(K-D)*yt),x.push(1),yt}function Fi(x,E,D,j,K,ct){var yt=(ct-D)/(K-D);return x.push(E+(j-E)*yt),x.push(ct),x.push(1),yt}function Ni(x,E){for(var D=[],j=0;j<x.length;j++){var K,ct=x[j],yt=ct.type;if("Point"===yt||"MultiPoint"===yt||"LineString"===yt)K=Ii(ct.geometry,E);else if("MultiLineString"===yt||"Polygon"===yt){K=[];for(var at=0;at<ct.geometry.length;at++)K.push(Ii(ct.geometry[at],E))}else if("MultiPolygon"===yt)for(K=[],at=0;at<ct.geometry.length;at++){for(var nt=[],tt=0;tt<ct.geometry[at].length;tt++)nt.push(Ii(ct.geometry[at][tt],E));K.push(nt)}D.push(Ci(ct.id,yt,K,ct.tags))}return D}function Ii(x,E){var D=[];D.size=x.size,void 0!==x.start&&(D.start=x.start,D.end=x.end);for(var j=0;j<x.length;j+=3)D.push(x[j]+E,x[j+1],x[j+2]);return D}function wi(x,E){if(x.transformed)return x;var D,j,K,ct=1<<x.z,yt=x.x,at=x.y;for(D=0;D<x.features.length;D++){var nt=x.features[D],tt=nt.geometry,Ot=nt.type;if(nt.geometry=[],1===Ot)for(j=0;j<tt.length;j+=2)nt.geometry.push(Li(tt[j],tt[j+1],E,ct,yt,at));else for(j=0;j<tt.length;j++){var jt=[];for(K=0;K<tt[j].length;K+=2)jt.push(Li(tt[j][K],tt[j][K+1],E,ct,yt,at));nt.geometry.push(jt)}}return x.transformed=!0,x}function Li(x,E,D,j,K,ct){return[Math.round(D*(x*j-K)),Math.round(D*(E*j-ct))]}function cr(x,E,D,j,K){for(var ct=E===K.maxZoom?0:K.tolerance/((1<<E)*K.extent),yt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:D,y:j,z:E,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},at=0;at<x.length;at++){yt.numFeatures++,Or(yt,x[at],ct,K);var nt=x[at].minX,tt=x[at].minY,Ot=x[at].maxX,jt=x[at].maxY;nt<yt.minX&&(yt.minX=nt),tt<yt.minY&&(yt.minY=tt),Ot>yt.maxX&&(yt.maxX=Ot),jt>yt.maxY&&(yt.maxY=jt)}return yt}function Or(x,E,D,j){var K=E.geometry,ct=E.type,yt=[];if("Point"===ct||"MultiPoint"===ct)for(var at=0;at<K.length;at+=3)yt.push(K[at]),yt.push(K[at+1]),x.numPoints++,x.numSimplified++;else if("LineString"===ct)Mi(yt,K,x,D,!1,!1);else if("MultiLineString"===ct||"Polygon"===ct)for(at=0;at<K.length;at++)Mi(yt,K[at],x,D,"Polygon"===ct,0===at);else if("MultiPolygon"===ct)for(var nt=0;nt<K.length;nt++){var tt=K[nt];for(at=0;at<tt.length;at++)Mi(yt,tt[at],x,D,!0,0===at)}if(yt.length){var Ot=E.tags||null;if("LineString"===ct&&j.lineMetrics){for(var jt in Ot={},E.tags)Ot[jt]=E.tags[jt];Ot.mapbox_clip_start=K.start/K.size,Ot.mapbox_clip_end=K.end/K.size}var Nt={geometry:yt,type:"Polygon"===ct||"MultiPolygon"===ct?3:"LineString"===ct||"MultiLineString"===ct?2:1,tags:Ot};null!==E.id&&(Nt.id=E.id),x.features.push(Nt)}}function Mi(x,E,D,j,K,ct){var yt=j*j;if(j>0&&E.size<(K?yt:j))D.numPoints+=E.length/3;else{for(var at=[],nt=0;nt<E.length;nt+=3)(0===j||E[nt+2]>yt)&&(D.numSimplified++,at.push(E[nt]),at.push(E[nt+1])),D.numPoints++;K&&function(tt,Ot){for(var jt=0,Nt=0,fe=tt.length,he=fe-2;Nt<fe;he=Nt,Nt+=2)jt+=(tt[Nt]-tt[he])*(tt[Nt+1]+tt[he+1]);if(jt>0===Ot)for(Nt=0,fe=tt.length;Nt<fe/2;Nt+=2){var qe=tt[Nt],Be=tt[Nt+1];tt[Nt]=tt[fe-2-Nt],tt[Nt+1]=tt[fe-1-Nt],tt[fe-2-Nt]=qe,tt[fe-1-Nt]=Be}}(at,ct),x.push(at)}}function qi(x,E){var D=(E=this.options=function(K,ct){for(var yt in ct)K[yt]=ct[yt];return K}(Object.create(this.options),E)).debug;if(D&&console.time("preprocess data"),E.maxZoom<0||E.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(E.promoteId&&E.generateId)throw new Error("promoteId and generateId cannot be used together.");var K,ct,yt,at,nt,tt,j=function(K,ct){var yt=[];if("FeatureCollection"===K.type)for(var at=0;at<K.features.length;at++)tr(yt,K.features[at],ct,at);else tr(yt,"Feature"===K.type?K:{geometry:K},ct);return yt}(x,E);this.tiles={},this.tileCoords=[],D&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",E.indexMaxZoom,E.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(K=j,ct=E,yt=ct.buffer/ct.extent,at=K,nt=pt(K,1,-1-yt,yt,0,-1,2,ct),tt=pt(K,1,1-yt,2+yt,0,-1,2,ct),(nt||tt)&&(at=pt(K,1,-yt,1+yt,0,-1,2,ct)||[],nt&&(at=Ni(nt,1).concat(at)),tt&&(at=at.concat(Ni(tt,-1)))),j=at).length&&this.splitTile(j,0,0,0),D&&(j.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function _r(x,E,D){return 32*((1<<x)*D+E)+x}function ji(x,E){var D=x.tileID.canonical;if(!this._geoJSONIndex)return E(null,null);var j=this._geoJSONIndex.getTile(D.z,D.x,D.y);if(!j)return E(null,null);var K=new zt(j.features),ct=J(K);0===ct.byteOffset&&ct.byteLength===ct.buffer.byteLength||(ct=new Uint8Array(ct)),E(null,{vectorTile:K,rawData:ct.buffer})}st.prototype.load=function(x){var E=this.options,D=E.log,j=E.minZoom,K=E.maxZoom,ct=E.nodeSize;D&&console.time("total time");var yt="prepare "+x.length+" points";D&&console.time(yt),this.points=x;for(var at=[],nt=0;nt<x.length;nt++)x[nt].geometry&&at.push(me(x[nt],nt));this.trees[K+1]=new Fe(at,ne,Pe,ct,Float32Array),D&&console.timeEnd(yt);for(var tt=K;tt>=j;tt--){var Ot=+Date.now();at=this._cluster(at,tt),this.trees[tt]=new Fe(at,ne,Pe,ct,Float32Array),D&&console.log("z%d: %d clusters in %dms",tt,at.length,+Date.now()-Ot)}return D&&console.timeEnd("total time"),this},st.prototype.getClusters=function(x,E){var D=((x[0]+180)%360+360)%360-180,j=Math.max(-90,Math.min(90,x[1])),K=180===x[2]?180:((x[2]+180)%360+360)%360-180,ct=Math.max(-90,Math.min(90,x[3]));if(x[2]-x[0]>=360)D=-180,K=180;else if(D>K){var yt=this.getClusters([D,j,180,ct],E),at=this.getClusters([-180,j,K,ct],E);return yt.concat(at)}for(var nt=this.trees[this._limitZoom(E)],tt=[],Ot=0,jt=nt.range(re(D),Bt(ct),re(K),Bt(j));Ot<jt.length;Ot+=1){var fe=nt.points[jt[Ot]];tt.push(fe.numPoints?Me(fe):this.points[fe.index])}return tt},st.prototype.getChildren=function(x){var E=this._getOriginId(x),D=this._getOriginZoom(x),j="No cluster with the specified id.",K=this.trees[D];if(!K)throw new Error(j);var ct=K.points[E];if(!ct)throw new Error(j);for(var yt=this.options.radius/(this.options.extent*Math.pow(2,D-1)),at=[],nt=0,tt=K.within(ct.x,ct.y,yt);nt<tt.length;nt+=1){var jt=K.points[tt[nt]];jt.parentId===x&&at.push(jt.numPoints?Me(jt):this.points[jt.index])}if(0===at.length)throw new Error(j);return at},st.prototype.getLeaves=function(x,E,D){var j=[];return this._appendLeaves(j,x,E=E||10,D=D||0,0),j},st.prototype.getTile=function(x,E,D){var j=this.trees[this._limitZoom(x)],K=Math.pow(2,x),ct=this.options,at=ct.radius/ct.extent,nt=(D-at)/K,tt=(D+1+at)/K,Ot={features:[]};return this._addTileFeatures(j.range((E-at)/K,nt,(E+1+at)/K,tt),j.points,E,D,K,Ot),0===E&&this._addTileFeatures(j.range(1-at/K,nt,1,tt),j.points,K,D,K,Ot),E===K-1&&this._addTileFeatures(j.range(0,nt,at/K,tt),j.points,-1,D,K,Ot),Ot.features.length?Ot:null},st.prototype.getClusterExpansionZoom=function(x){for(var E=this._getOriginZoom(x)-1;E<=this.options.maxZoom;){var D=this.getChildren(x);if(E++,1!==D.length)break;x=D[0].properties.cluster_id}return E},st.prototype._appendLeaves=function(x,E,D,j,K){for(var ct=0,yt=this.getChildren(E);ct<yt.length;ct+=1){var at=yt[ct],nt=at.properties;if(nt&&nt.cluster?K+nt.point_count<=j?K+=nt.point_count:K=this._appendLeaves(x,nt.cluster_id,D,j,K):K<j?K++:x.push(at),x.length===D)break}return K},st.prototype._addTileFeatures=function(x,E,D,j,K,ct){for(var yt=0,at=x;yt<at.length;yt+=1){var nt=E[at[yt]],tt=nt.numPoints,Ot={type:1,geometry:[[Math.round(this.options.extent*(nt.x*K-D)),Math.round(this.options.extent*(nt.y*K-j))]],tags:tt?ii(nt):this.points[nt.index].properties},jt=void 0;tt?jt=nt.id:this.options.generateId?jt=nt.index:this.points[nt.index].id&&(jt=this.points[nt.index].id),void 0!==jt&&(Ot.id=jt),ct.features.push(Ot)}},st.prototype._limitZoom=function(x){return Math.max(this.options.minZoom,Math.min(x,this.options.maxZoom+1))},st.prototype._cluster=function(x,E){for(var D=[],j=this.options,yt=j.reduce,at=j.radius/(j.extent*Math.pow(2,E)),nt=0;nt<x.length;nt++){var tt=x[nt];if(!(tt.zoom<=E)){tt.zoom=E;for(var Ot=this.trees[E+1],jt=Ot.within(tt.x,tt.y,at),Nt=tt.numPoints||1,fe=tt.x*Nt,he=tt.y*Nt,qe=yt&&Nt>1?this._map(tt,!0):null,Be=(nt<<5)+(E+1)+this.points.length,ze=0,ai=jt;ze<ai.length;ze+=1){var di=Ot.points[ai[ze]];if(!(di.zoom<=E)){di.zoom=E;var Ei=di.numPoints||1;fe+=di.x*Ei,he+=di.y*Ei,Nt+=Ei,di.parentId=Be,yt&&(qe||(qe=this._map(tt,!0)),yt(qe,this._map(di)))}}1===Nt?D.push(tt):(tt.parentId=Be,D.push(Rt(fe/Nt,he/Nt,Be,Nt,qe)))}}return D},st.prototype._getOriginId=function(x){return x-this.points.length>>5},st.prototype._getOriginZoom=function(x){return(x-this.points.length)%32},st.prototype._map=function(x,E){if(x.numPoints)return E?Kt({},x.properties):x.properties;var D=this.points[x.index].properties,j=this.options.map(D);return E&&j===D?Kt({},j):j},qi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},qi.prototype.splitTile=function(x,E,D,j,K,ct,yt){for(var at=[x,E,D,j],nt=this.options,tt=nt.debug;at.length;){j=at.pop(),D=at.pop(),E=at.pop(),x=at.pop();var Ot=1<<E,jt=_r(E,D,j),Nt=this.tiles[jt];if(!Nt&&(tt>1&&console.time("creation"),Nt=this.tiles[jt]=cr(x,E,D,j,nt),this.tileCoords.push({z:E,x:D,y:j}),tt)){tt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",E,D,j,Nt.numFeatures,Nt.numPoints,Nt.numSimplified),console.timeEnd("creation"));var fe="z"+E;this.stats[fe]=(this.stats[fe]||0)+1,this.total++}if(Nt.source=x,K){if(E===nt.maxZoom||E===K)continue;var he=1<<K-E;if(D!==Math.floor(ct/he)||j!==Math.floor(yt/he))continue}else if(E===nt.indexMaxZoom||Nt.numPoints<=nt.indexMaxPoints)continue;if(Nt.source=null,0!==x.length){tt>1&&console.time("clipping");var qe,Be,ze,ai,Qe,di,Ei=.5*nt.buffer/nt.extent,Cr=.5-Ei,Ue=.5+Ei,Sr=1+Ei;qe=Be=ze=ai=null,Qe=pt(x,Ot,D-Ei,D+Ue,0,Nt.minX,Nt.maxX,nt),di=pt(x,Ot,D+Cr,D+Sr,0,Nt.minX,Nt.maxX,nt),x=null,Qe&&(qe=pt(Qe,Ot,j-Ei,j+Ue,1,Nt.minY,Nt.maxY,nt),Be=pt(Qe,Ot,j+Cr,j+Sr,1,Nt.minY,Nt.maxY,nt),Qe=null),di&&(ze=pt(di,Ot,j-Ei,j+Ue,1,Nt.minY,Nt.maxY,nt),ai=pt(di,Ot,j+Cr,j+Sr,1,Nt.minY,Nt.maxY,nt),di=null),tt>1&&console.timeEnd("clipping"),at.push(qe||[],E+1,2*D,2*j),at.push(Be||[],E+1,2*D,2*j+1),at.push(ze||[],E+1,2*D+1,2*j),at.push(ai||[],E+1,2*D+1,2*j+1)}}},qi.prototype.getTile=function(x,E,D){var j=this.options,K=j.extent,ct=j.debug;if(x<0||x>24)return null;var yt=1<<x,at=_r(x,E=(E%yt+yt)%yt,D);if(this.tiles[at])return wi(this.tiles[at],K);ct>1&&console.log("drilling down to z%d-%d-%d",x,E,D);for(var nt,tt=x,Ot=E,jt=D;!nt&&tt>0;)tt--,Ot=Math.floor(Ot/2),jt=Math.floor(jt/2),nt=this.tiles[_r(tt,Ot,jt)];return nt&&nt.source?(ct>1&&console.log("found parent tile z%d-%d-%d",tt,Ot,jt),ct>1&&console.time("drilling down"),this.splitTile(nt.source,tt,Ot,jt,x,E,D),ct>1&&console.timeEnd("drilling down"),this.tiles[at]?wi(this.tiles[at],K):null):null};var Zr=function(x){function E(D,j,K,ct){x.call(this,D,j,K,ji),ct&&(this.loadGeoJSON=ct)}return x&&(E.__proto__=x),(E.prototype=Object.create(x&&x.prototype)).constructor=E,E.prototype.loadData=function(D,j){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=j,this._pendingLoadDataParams=D,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},E.prototype._loadData=function(){var D=this;if(this._pendingCallback&&this._pendingLoadDataParams){var j=this._pendingCallback,K=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ct=!!(K&&K.request&&K.request.collectResourceTiming)&&new l.RequestPerformance(K.request);this.loadGeoJSON(K,function(yt,at){if(yt||!at)return j(yt);if("object"!=typeof at)return j(new Error("Input data given to '"+K.source+"' is not a valid GeoJSON object."));Ui(at,!0);try{D._geoJSONIndex=K.cluster?new st(function(Ot){var jt=Ot.superclusterOptions,Nt=Ot.clusterProperties;if(!Nt||!jt)return jt;for(var fe={},he={},qe={accumulated:null,zoom:0},Be={properties:null},ze=Object.keys(Nt),ai=0,Qe=ze;ai<Qe.length;ai+=1){var di=Qe[ai],Ei=Nt[di],Cr=Ei[0],Sr=l.createExpression(Ei[1]),tn=l.createExpression("string"==typeof Cr?[Cr,["accumulated"],["get",di]]:Cr);fe[di]=Sr.value,he[di]=tn.value}return jt.map=function(mr){Be.properties=mr;for(var Rr={},In=0,Xi=ze;In<Xi.length;In+=1){var vr=Xi[In];Rr[vr]=fe[vr].evaluate(qe,Be)}return Rr},jt.reduce=function(mr,Rr){Be.properties=Rr;for(var In=0,Xi=ze;In<Xi.length;In+=1){var vr=Xi[In];qe.accumulated=mr[vr],mr[vr]=he[vr].evaluate(qe,Be)}},jt}(K)).load(at.features):new qi(Ot=at,K.geojsonVtOptions)}catch(Ot){return j(Ot)}var Ot;D.loaded={};var nt={};if(ct){var tt=ct.finish();tt&&(nt.resourceTiming={},nt.resourceTiming[K.source]=JSON.parse(JSON.stringify(tt)))}j(null,nt)})}},E.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},E.prototype.reloadTile=function(D,j){var K=this.loaded;return K&&K[D.uid]?x.prototype.reloadTile.call(this,D,j):this.loadTile(D,j)},E.prototype.loadGeoJSON=function(D,j){if(D.request)l.getJSON(D.request,j);else{if("string"!=typeof D.data)return j(new Error("Input data given to '"+D.source+"' is not a valid GeoJSON object."));try{return j(null,JSON.parse(D.data))}catch(K){return j(new Error("Input data given to '"+D.source+"' is not a valid GeoJSON object."))}}},E.prototype.removeSource=function(D,j){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),j()},E.prototype.getClusterExpansionZoom=function(D,j){j(null,this._geoJSONIndex.getClusterExpansionZoom(D.clusterId))},E.prototype.getClusterChildren=function(D,j){j(null,this._geoJSONIndex.getChildren(D.clusterId))},E.prototype.getClusterLeaves=function(D,j){j(null,this._geoJSONIndex.getLeaves(D.clusterId,D.limit,D.offset))},E}(Yt),ir=function(x){var E=this;this.self=x,this.actor=new l.Actor(x,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Yt,geojson:Zr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(D,j){if(E.workerSourceTypes[D])throw new Error('Worker source with name "'+D+'" already registered.');E.workerSourceTypes[D]=j},this.self.registerRTLTextPlugin=function(D){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=D.applyArabicShaping,l.plugin.processBidirectionalText=D.processBidirectionalText,l.plugin.processStyledBidirectionalText=D.processStyledBidirectionalText}};return ir.prototype.setReferrer=function(x,E){this.referrer=E},ir.prototype.setImages=function(x,E,D){this.availableImages[x]=E,D()},ir.prototype.setLayers=function(x,E,D){this.getLayerIndex(x).replace(E),D()},ir.prototype.updateLayers=function(x,E,D){this.getLayerIndex(x).update(E.layers,E.removedIds),D()},ir.prototype.loadTile=function(x,E,D){this.getWorkerSource(x,E.type,E.source).loadTile(E,D)},ir.prototype.loadDEMTile=function(x,E,D){this.getDEMWorkerSource(x,E.source).loadTile(E,D)},ir.prototype.reloadTile=function(x,E,D){this.getWorkerSource(x,E.type,E.source).reloadTile(E,D)},ir.prototype.abortTile=function(x,E,D){this.getWorkerSource(x,E.type,E.source).abortTile(E,D)},ir.prototype.removeTile=function(x,E,D){this.getWorkerSource(x,E.type,E.source).removeTile(E,D)},ir.prototype.removeDEMTile=function(x,E){this.getDEMWorkerSource(x,E.source).removeTile(E)},ir.prototype.removeSource=function(x,E,D){if(this.workerSources[x]&&this.workerSources[x][E.type]&&this.workerSources[x][E.type][E.source]){var j=this.workerSources[x][E.type][E.source];delete this.workerSources[x][E.type][E.source],void 0!==j.removeSource?j.removeSource(E,D):D()}},ir.prototype.loadWorkerSource=function(x,E,D){try{this.self.importScripts(E.url),D()}catch(j){D(j.toString())}},ir.prototype.syncRTLPluginState=function(x,E,D){try{l.plugin.setState(E);var j=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&null!=j){this.self.importScripts(j);var K=l.plugin.isParsed();D(K?void 0:new Error("RTL Text Plugin failed to import scripts from "+j),K)}}catch(ct){D(ct.toString())}},ir.prototype.getAvailableImages=function(x){var E=this.availableImages[x];return E||(E=[]),E},ir.prototype.getLayerIndex=function(x){var E=this.layerIndexes[x];return E||(E=this.layerIndexes[x]=new N),E},ir.prototype.getWorkerSource=function(x,E,D){var j=this;return this.workerSources[x]||(this.workerSources[x]={}),this.workerSources[x][E]||(this.workerSources[x][E]={}),this.workerSources[x][E][D]||(this.workerSources[x][E][D]=new this.workerSourceTypes[E]({send:function(ct,yt,at){j.actor.send(ct,yt,at,x)}},this.getLayerIndex(x),this.getAvailableImages(x))),this.workerSources[x][E][D]},ir.prototype.getDEMWorkerSource=function(x,E){return this.demWorkerSources[x]||(this.demWorkerSources[x]={}),this.demWorkerSources[x][E]||(this.demWorkerSources[x][E]=new vt),this.demWorkerSources[x][E]},ir.prototype.enforceCacheSizeLimit=function(x,E){l.enforceCacheSizeLimit(E)},"undefined"!=typeof WorkerGlobalScope&&void 0!==l.window&&l.window instanceof WorkerGlobalScope&&(l.window.worker=new ir(l.window)),ir}),A(0,function(l){var P=l.createCommonjsModule(function(r){function o(s){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,f,y=new Blob([""],{type:"text/javascript"}),g=URL.createObjectURL(y);try{f=new Worker(g),p=!0}catch(S){p=!1}return f&&f.terminate(),URL.revokeObjectURL(g),p}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&(p=s&&s.failIfMajorPerformanceCaveat,void 0===n[p]&&(n[p]=(f=p,y=document.createElement("canvas"),(g=Object.create(o.webGLContextAttributes)).failIfMajorPerformanceCaveat=f,y.probablySupportsContext?y.probablySupportsContext("webgl",g)||y.probablySupportsContext("experimental-webgl",g):y.supportsContext?y.supportsContext("webgl",g)||y.supportsContext("experimental-webgl",g):y.getContext("webgl",g)||y.getContext("experimental-webgl",g))),n[p]));var p,f,y,g}r.exports?r.exports=o:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=o);var n={};o.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),I={create:function(r,o,n){var s=l.window.document.createElement(r);return void 0!==o&&(s.className=o),n&&n.appendChild(s),s},createNS:function(r,o){return l.window.document.createElementNS(r,o)}},N=l.window.document.documentElement.style;function et(r){if(!N)return r[0];for(var o=0;o<r.length;o++)if(r[o]in N)return r[o];return r[0]}var Lt,Zt=et(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);I.disableDrag=function(){N&&Zt&&(Lt=N[Zt],N[Zt]="none")},I.enableDrag=function(){N&&Zt&&(N[Zt]=Lt)};var Mt=et(["transform","WebkitTransform"]);I.setTransform=function(r,o){r.style[Mt]=o};var Yt=!1;try{var $t=Object.defineProperty({},"passive",{get:function(){Yt=!0}});l.window.addEventListener("test",$t,$t),l.window.removeEventListener("test",$t,$t)}catch(r){Yt=!1}I.addEventListener=function(r,o,n,s){void 0===s&&(s={}),r.addEventListener(o,n,"passive"in s&&Yt?s:s.capture)},I.removeEventListener=function(r,o,n,s){void 0===s&&(s={}),r.removeEventListener(o,n,"passive"in s&&Yt?s:s.capture)};var vt=function(r){r.preventDefault(),r.stopPropagation(),l.window.removeEventListener("click",vt,!0)};function lt(r){var o=r.userImage;return!!(o&&o.render&&o.render())&&(r.data.replace(new Uint8Array(o.data.buffer)),!0)}I.suppressClick=function(){l.window.addEventListener("click",vt,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",vt,!0)},0)},I.mousePos=function(r,o){var n=r.getBoundingClientRect(),s=l.window.TouchEvent&&o instanceof l.window.TouchEvent?o.touches[0]:o;return new l.Point(s.clientX-n.left-r.clientLeft,s.clientY-n.top-r.clientTop)},I.touchPos=function(r,o){for(var n=r.getBoundingClientRect(),s=[],p="touchend"===o.type?o.changedTouches:o.touches,f=0;f<p.length;f++)s.push(new l.Point(p[f].clientX-n.left-r.clientLeft,p[f].clientY-n.top-r.clientTop));return s},I.mouseButton=function(r){return void 0!==l.window.InstallTrigger&&2===r.button&&r.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:r.button},I.remove=function(r){r.parentNode&&r.parentNode.removeChild(r)};var Vt=function(r){function o(){r.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.isLoaded=function(){return this.loaded},o.prototype.setLoaded=function(n){if(this.loaded!==n&&(this.loaded=n,n)){for(var s=0,p=this.requestors;s<p.length;s+=1){var f=p[s];this._notify(f.ids,f.callback)}this.requestors=[]}},o.prototype.getImage=function(n){return this.images[n]},o.prototype.addImage=function(n,s){this._validate(n,s)&&(this.images[n]=s)},o.prototype._validate=function(n,s){var p=!0;return this._validateStretch(s.stretchX,s.data&&s.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+n+'" has invalid "stretchX" value'))),p=!1),this._validateStretch(s.stretchY,s.data&&s.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+n+'" has invalid "stretchY" value'))),p=!1),this._validateContent(s.content,s)||(this.fire(new l.ErrorEvent(new Error('Image "'+n+'" has invalid "content" value'))),p=!1),p},o.prototype._validateStretch=function(n,s){if(!n)return!0;for(var p=0,f=0,y=n;f<y.length;f+=1){var g=y[f];if(g[0]<p||g[1]<g[0]||s<g[1])return!1;p=g[1]}return!0},o.prototype._validateContent=function(n,s){return!(n&&(4!==n.length||n[0]<0||s.data.width<n[0]||n[1]<0||s.data.height<n[1]||n[2]<0||s.data.width<n[2]||n[3]<0||s.data.height<n[3]||n[2]<n[0]||n[3]<n[1]))},o.prototype.updateImage=function(n,s){s.version=this.images[n].version+1,this.images[n]=s,this.updatedImages[n]=!0},o.prototype.removeImage=function(n){var s=this.images[n];delete this.images[n],delete this.patterns[n],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()},o.prototype.listImages=function(){return Object.keys(this.images)},o.prototype.getImages=function(n,s){var p=!0;if(!this.isLoaded())for(var f=0,y=n;f<y.length;f+=1)this.images[y[f]]||(p=!1);this.isLoaded()||p?this._notify(n,s):this.requestors.push({ids:n,callback:s})},o.prototype._notify=function(n,s){for(var p={},f=0,y=n;f<y.length;f+=1){var g=y[f];this.images[g]||this.fire(new l.Event("styleimagemissing",{id:g}));var S=this.images[g];S?p[g]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:Boolean(S.userImage&&S.userImage.render)}:l.warnOnce('Image "'+g+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}s(null,p)},o.prototype.getPixelSize=function(){var n=this.atlasImage;return{width:n.width,height:n.height}},o.prototype.getPattern=function(n){var s=this.patterns[n],p=this.getImage(n);if(!p)return null;if(s&&s.position.version===p.version)return s.position;if(s)s.position.version=p.version;else{var f={w:p.data.width+2,h:p.data.height+2,x:0,y:0},y=new l.ImagePosition(f,p);this.patterns[n]={bin:f,position:y}}return this._updatePatternAtlas(),this.patterns[n].position},o.prototype.bind=function(n){var s=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(n,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)},o.prototype._updatePatternAtlas=function(){var n=[];for(var s in this.patterns)n.push(this.patterns[s].bin);var p=l.potpack(n),f=p.w,y=p.h,g=this.atlasImage;for(var S in g.resize({width:f||1,height:y||1}),this.patterns){var k=this.patterns[S].bin,L=k.x+1,U=k.y+1,X=this.images[S].data,W=X.width,G=X.height;l.RGBAImage.copy(X,g,{x:0,y:0},{x:L,y:U},{width:W,height:G}),l.RGBAImage.copy(X,g,{x:0,y:G-1},{x:L,y:U-1},{width:W,height:1}),l.RGBAImage.copy(X,g,{x:0,y:0},{x:L,y:U+G},{width:W,height:1}),l.RGBAImage.copy(X,g,{x:W-1,y:0},{x:L-1,y:U},{width:1,height:G}),l.RGBAImage.copy(X,g,{x:0,y:0},{x:L+W,y:U},{width:1,height:G})}this.dirty=!0},o.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},o.prototype.dispatchRenderCallbacks=function(n){for(var s=0,p=n;s<p.length;s+=1){var f=p[s];if(!this.callbackDispatchedThisFrame[f]){this.callbackDispatchedThisFrame[f]=!0;var y=this.images[f];lt(y)&&this.updateImage(f,y)}}},o}(l.Evented),xe=Ui,Ze=Ui,Ye=1e20;function Ui(r,o,n,s,p,f){this.fontSize=r||24,this.buffer=void 0===o?3:o,this.cutoff=s||.25,this.fontFamily=p||"sans-serif",this.fontWeight=f||"normal",this.radius=n||8;var y=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=y,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(y*y),this.gridInner=new Float64Array(y*y),this.f=new Float64Array(y),this.d=new Float64Array(y),this.z=new Float64Array(y+1),this.v=new Int16Array(y),this.middle=Math.round(y/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function q(r,o,n,s,p,f,y){for(var g=0;g<o;g++){for(var S=0;S<n;S++)s[S]=r[S*o+g];for(Wi(s,p,f,y,n),S=0;S<n;S++)r[S*o+g]=p[S]}for(S=0;S<n;S++){for(g=0;g<o;g++)s[g]=r[S*o+g];for(Wi(s,p,f,y,o),g=0;g<o;g++)r[S*o+g]=Math.sqrt(p[g])}}function Wi(r,o,n,s,p){n[0]=0,s[0]=-Ye,s[1]=+Ye;for(var f=1,y=0;f<p;f++){for(var g=(r[f]+f*f-(r[n[y]]+n[y]*n[y]))/(2*f-2*n[y]);g<=s[y];)y--,g=(r[f]+f*f-(r[n[y]]+n[y]*n[y]))/(2*f-2*n[y]);n[++y]=f,s[y]=g,s[y+1]=+Ye}for(f=0,y=0;f<p;f++){for(;s[y+1]<f;)y++;o[f]=(f-n[y])*(f-n[y])+r[n[y]]}}Ui.prototype.draw=function(r){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(r,this.buffer,this.middle);for(var o=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),s=0;s<this.size*this.size;s++){var p=o.data[4*s+3]/255;this.gridOuter[s]=1===p?0:0===p?Ye:Math.pow(Math.max(0,.5-p),2),this.gridInner[s]=1===p?Ye:0===p?0:Math.pow(Math.max(0,p-.5),2)}for(q(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),q(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),s=0;s<this.size*this.size;s++)n[s]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[s]-this.gridInner[s])/this.radius+this.cutoff))));return n},xe.default=Ze;var Ti=function(r,o){this.requestManager=r,this.localIdeographFontFamily=o,this.entries={}};Ti.prototype.setURL=function(r){this.url=r},Ti.prototype.getGlyphs=function(r,o){var n=this,s=[];for(var p in r)for(var f=0,y=r[p];f<y.length;f+=1)s.push({stack:p,id:y[f]});l.asyncAll(s,function(S,k){var L=S.stack,U=S.id,X=n.entries[L];X||(X=n.entries[L]={glyphs:{},requests:{}});var W=X.glyphs[U];if(void 0===W){if(W=n._tinySDF(X,L,U))return X.glyphs[U]=W,void k(null,{stack:L,id:U,glyph:W});var G=Math.floor(U/256);if(256*G>65535)k(new Error("glyphs > 65535 not supported"));else{var H=X.requests[G];H||(H=X.requests[G]=[],Ti.loadGlyphRange(L,G,n.url,n.requestManager,function(ft,ut){if(ut)for(var _t in ut)n._doesCharSupportLocalGlyph(+_t)||(X.glyphs[+_t]=ut[+_t]);for(var St=0,Ct=H;St<Ct.length;St+=1)(0,Ct[St])(ft,ut);delete X.requests[G]})),H.push(function(ft,ut){ft?k(ft):ut&&k(null,{stack:L,id:U,glyph:ut[U]||null})})}}else k(null,{stack:L,id:U,glyph:W})},function(S,k){if(S)o(S);else if(k){for(var L={},U=0,X=k;U<X.length;U+=1){var W=X[U],G=W.stack,H=W.id,ft=W.glyph;(L[G]||(L[G]={}))[H]=ft&&{id:ft.id,bitmap:ft.bitmap.clone(),metrics:ft.metrics}}o(null,L)}})},Ti.prototype._doesCharSupportLocalGlyph=function(r){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](r)||l.isChar["Hangul Syllables"](r)||l.isChar.Hiragana(r)||l.isChar.Katakana(r))},Ti.prototype._tinySDF=function(r,o,n){var s=this.localIdeographFontFamily;if(s&&this._doesCharSupportLocalGlyph(n)){var p=r.tinySDF;if(!p){var f="400";/bold/i.test(o)?f="900":/medium/i.test(o)?f="500":/light/i.test(o)&&(f="200"),p=r.tinySDF=new Ti.TinySDF(24,3,8,.25,s,f)}return{id:n,bitmap:new l.AlphaImage({width:30,height:30},p.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Ti.loadGlyphRange=function(r,o,n,s,p){var f=256*o,y=f+255,g=s.transformRequest(s.normalizeGlyphsURL(n).replace("{fontstack}",r).replace("{range}",f+"-"+y),l.ResourceType.Glyphs);l.getArrayBuffer(g,function(S,k){if(S)p(S);else if(k){for(var L={},U=0,X=l.parseGlyphPBF(k);U<X.length;U+=1){var W=X[U];L[W.id]=W}p(null,L)}})},Ti.TinySDF=xe;var ti=function(){this.specification=l.styleSpec.light.position};ti.prototype.possiblyEvaluate=function(r,o){return l.sphericalToCartesian(r.expression.evaluate(o))},ti.prototype.interpolate=function(r,o,n){return{x:l.number(r.x,o.x,n),y:l.number(r.y,o.y,n),z:l.number(r.z,o.z,n)}};var ae=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new ti,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),zt=function(r){function o(n){r.call(this),this._transitionable=new l.Transitionable(ae),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getLight=function(){return this._transitionable.serialize()},o.prototype.setLight=function(n,s){if(void 0===s&&(s={}),!this._validate(l.validateLight,n,s))for(var p in n){var f=n[p];l.endsWith(p,"-transition")?this._transitionable.setTransition(p.slice(0,-11),f):this._transitionable.setValue(p,f)}},o.prototype.updateTransitions=function(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)},o.prototype.hasTransition=function(){return this._transitioning.hasTransition()},o.prototype.recalculate=function(n){this.properties=this._transitioning.possiblyEvaluate(n)},o.prototype._validate=function(n,s,p){return(!p||!1!==p.validate)&&l.emitValidationErrors(this,n.call(l.validateStyle,l.extend({value:s,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},o}(l.Evented),Ht=function(r,o){this.width=r,this.height=o,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};Ht.prototype.getDash=function(r,o){var n=r.join(",")+String(o);return this.positions[n]||(this.positions[n]=this.addDash(r,o)),this.positions[n]},Ht.prototype.addDash=function(r,o){var n=o?7:0,s=2*n+1;if(this.nextRow+s>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var p=0,f=0;f<r.length;f++)p+=r[f];for(var y=this.width/p,g=y/2,S=r.length%2==1,k=-n;k<=n;k++)for(var U=this.width*(this.nextRow+n+k),X=S?-r[r.length-1]:0,W=r[0],G=1,H=0;H<this.width;H++){for(;W<H/y;)X=W,W+=r[G],S&&G===r.length-1&&(W+=r[0]),G++;var ft=Math.abs(H-X*y),ut=Math.abs(H-W*y),_t=Math.min(ft,ut),St=G%2==1,Ct=void 0;if(o){var Ut=n?k/n*(g+1):0;if(St){var te=g-Math.abs(Ut);Ct=Math.sqrt(_t*_t+te*te)}else Ct=g-Math.sqrt(_t*_t+Ut*Ut)}else Ct=(St?1:-1)*_t;this.data[3+4*(U+H)]=Math.max(0,Math.min(255,Ct+128))}var le={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:p};return this.nextRow+=s,this.dirty=!0,le},Ht.prototype.bind=function(r){var o=r.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.RGBA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,this.width,this.height,0,o.RGBA,o.UNSIGNED_BYTE,this.data))};var ht=function r(o,n){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var s=this.workerPool.acquire(this.id),p=0;p<s.length;p++){var y=new r.Actor(s[p],n,this.id);y.name="Worker "+p,this.actors.push(y)}};function mt(r,o,n){var s=function(p,f){if(p)return n(p);if(f){var y=l.pick(l.extend(f,r),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);f.vector_layers&&(y.vectorLayers=f.vector_layers,y.vectorLayerIds=y.vectorLayers.map(function(g){return g.id})),r.url&&(y.tiles=o.canonicalizeTileset(y,r.url)),n(null,y)}};return r.url?l.getJSON(o.transformRequest(o.normalizeSourceURL(r.url),l.ResourceType.Source),s):l.browser.frame(function(){return s(null,r)})}ht.prototype.broadcast=function(r,o,n){l.asyncAll(this.actors,function(s,p){s.send(r,o,p)},n=n||function(){})},ht.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},ht.prototype.remove=function(){this.actors.forEach(function(r){r.remove()}),this.actors=[],this.workerPool.release(this.id)},ht.Actor=l.Actor;var rt=function(r,o,n){this.bounds=l.LngLatBounds.convert(this.validateBounds(r)),this.minzoom=o||0,this.maxzoom=n||24};rt.prototype.validateBounds=function(r){return Array.isArray(r)&&4===r.length?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]},rt.prototype.contains=function(r){var o=Math.pow(2,r.z),n=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*o),s=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*o),p=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*o),f=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*o);return r.x>=n&&r.x<p&&r.y>=s&&r.y<f};var J=function(r){function o(n,s,p,f){if(r.call(this),this.id=n,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(s,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.load=function(){var n=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=mt(this._options,this.map._requestManager,function(s,p){n._tileJSONRequest=null,n._loaded=!0,s?n.fire(new l.ErrorEvent(s)):p&&(l.extend(n,p),p.bounds&&(n.tileBounds=new rt(p.bounds,n.minzoom,n.maxzoom)),l.postTurnstileEvent(p.tiles,n.map._requestManager._customAccessToken),l.postMapLoadEvent(p.tiles,n.map._getMapId(),n.map._requestManager._skuToken,n.map._requestManager._customAccessToken),n.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},o.prototype.loaded=function(){return this._loaded},o.prototype.hasTile=function(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)},o.prototype.onAdd=function(n){this.map=n,this.load()},o.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},o.prototype.serialize=function(){return l.extend({},this._options)},o.prototype.loadTile=function(n,s){var p=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.url,null),f={request:this.map._requestManager.transformRequest(p,l.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function y(g,S){return delete n.request,n.aborted?s(null):g&&404!==g.status?s(g):(S&&S.resourceTiming&&(n.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&n.setExpiryData(S),n.loadVectorData(S,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),s(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}f.request.collectResourceTiming=this._collectResourceTiming,n.actor&&"expired"!==n.state?"loading"===n.state?n.reloadCallback=s:n.request=n.actor.send("reloadTile",f,y.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",f,y.bind(this)))},o.prototype.abortTile=function(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0)},o.prototype.unloadTile=function(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0)},o.prototype.hasTransition=function(){return!1},o}(l.Evented),d=function(r){function o(n,s,p,f){r.call(this),this.id=n,this.dispatcher=p,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},s),l.extend(this,l.pick(s,["url","scheme","tileSize"]))}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.load=function(){var n=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=mt(this._options,this.map._requestManager,function(s,p){n._tileJSONRequest=null,n._loaded=!0,s?n.fire(new l.ErrorEvent(s)):p&&(l.extend(n,p),p.bounds&&(n.tileBounds=new rt(p.bounds,n.minzoom,n.maxzoom)),l.postTurnstileEvent(p.tiles),l.postMapLoadEvent(p.tiles,n.map._getMapId(),n.map._requestManager._skuToken),n.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},o.prototype.loaded=function(){return this._loaded},o.prototype.onAdd=function(n){this.map=n,this.load()},o.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},o.prototype.serialize=function(){return l.extend({},this._options)},o.prototype.hasTile=function(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)},o.prototype.loadTile=function(n,s){var p=this,f=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);n.request=l.getImage(this.map._requestManager.transformRequest(f,l.ResourceType.Tile),function(y,g){if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(y)n.state="errored",s(y);else if(g){p.map._refreshExpiredTiles&&n.setExpiryData(g),delete g.cacheControl,delete g.expires;var S=p.map.painter.context,k=S.gl;n.texture=p.map.painter.getTileTexture(g.width),n.texture?n.texture.update(g,{useMipmap:!0}):(n.texture=new l.Texture(S,g,k.RGBA,{useMipmap:!0}),n.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),S.extTextureFilterAnisotropic&&k.texParameterf(k.TEXTURE_2D,S.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,S.extTextureFilterAnisotropicMax)),n.state="loaded",l.cacheEntryPossiblyAdded(p.dispatcher),s(null)}})},o.prototype.abortTile=function(n,s){n.request&&(n.request.cancel(),delete n.request),s()},o.prototype.unloadTile=function(n,s){n.texture&&this.map.painter.saveTileTexture(n.texture),s()},o.prototype.hasTransition=function(){return!1},o}(l.Evented),Pt=function(r){function o(n,s,p,f){r.call(this,n,s,p,f),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},o.prototype.loadTile=function(n,s){var p=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);function f(y,g){y&&(n.state="errored",s(y)),g&&(n.dem=g,n.needsHillshadePrepare=!0,n.state="loaded",s(null))}n.request=l.getImage(this.map._requestManager.transformRequest(p,l.ResourceType.Tile),function(y,g){if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(y)n.state="errored",s(y);else if(g){this.map._refreshExpiredTiles&&n.setExpiryData(g),delete g.cacheControl,delete g.expires;var S=l.window.ImageBitmap&&g instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?g:l.browser.getImageData(g,1),k={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:S,encoding:this.encoding};n.actor&&"expired"!==n.state||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",k,f.bind(this)))}}.bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)},o.prototype._getNeighboringTiles=function(n){var s=n.canonical,p=Math.pow(2,s.z),f=(s.x-1+p)%p,y=0===s.x?n.wrap-1:n.wrap,g=(s.x+1+p)%p,S=s.x+1===p?n.wrap+1:n.wrap,k={};return k[new l.OverscaledTileID(n.overscaledZ,y,s.z,f,s.y).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,S,s.z,g,s.y).key]={backfilled:!1},s.y>0&&(k[new l.OverscaledTileID(n.overscaledZ,y,s.z,f,s.y-1).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,S,s.z,g,s.y-1).key]={backfilled:!1}),s.y+1<p&&(k[new l.OverscaledTileID(n.overscaledZ,y,s.z,f,s.y+1).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,S,s.z,g,s.y+1).key]={backfilled:!1}),k},o.prototype.unloadTile=function(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id})},o}(d),Et=function(r){function o(n,s,p,f){r.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=p.getActor(),this.setEventedParent(f),this._data=s.data,this._options=l.extend({},s),this._collectResourceTiming=s.collectResourceTiming,this._resourceTiming=[],void 0!==s.maxzoom&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;var y=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(void 0!==s.buffer?s.buffer:128)*y,tolerance:(void 0!==s.tolerance?s.tolerance:.375)*y,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:void 0!==s.clusterMaxZoom?Math.min(s.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:l.EXTENT,radius:(s.clusterRadius||50)*y,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties},s.workerOptions)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.load=function(){var n=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(s){if(s)n.fire(new l.ErrorEvent(s));else{var p={dataType:"source",sourceDataType:"metadata"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(p.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new l.Event("data",p))}})},o.prototype.onAdd=function(n){this.map=n,this.load()},o.prototype.setData=function(n){var s=this;return this._data=n,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(p){if(p)s.fire(new l.ErrorEvent(p));else{var f={dataType:"source",sourceDataType:"content"};s._collectResourceTiming&&s._resourceTiming&&s._resourceTiming.length>0&&(f.resourceTiming=s._resourceTiming,s._resourceTiming=[]),s.fire(new l.Event("data",f))}}),this},o.prototype.getClusterExpansionZoom=function(n,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},s),this},o.prototype.getClusterChildren=function(n,s){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},s),this},o.prototype.getClusterLeaves=function(n,s,p,f){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:s,offset:p},f),this},o.prototype._updateWorkerData=function(n){var s=this;this._loaded=!1;var p=l.extend({},this.workerOptions),f=this._data;"string"==typeof f?(p.request=this.map._requestManager.transformRequest(l.browser.resolveURL(f),l.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(f),this.actor.send(this.type+".loadData",p,function(y,g){s._removed||g&&g.abandoned||(s._loaded=!0,g&&g.resourceTiming&&g.resourceTiming[s.id]&&(s._resourceTiming=g.resourceTiming[s.id].slice(0)),s.actor.send(s.type+".coalesce",{source:p.source},null),n(y))})},o.prototype.loaded=function(){return this._loaded},o.prototype.loadTile=function(n,s){var p=this,f=n.actor?"reloadTile":"loadTile";n.actor=this.actor,n.request=this.actor.send(f,{type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(g,S){return delete n.request,n.unloadVectorData(),n.aborted?s(null):g?s(g):(n.loadVectorData(S,p.map.painter,"reloadTile"===f),s(null))})},o.prototype.abortTile=function(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0},o.prototype.unloadTile=function(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})},o.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},o.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},o.prototype.hasTransition=function(){return!1},o}(l.Evented),se=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ie=function(r){function o(n,s,p,f){r.call(this),this.id=n,this.dispatcher=p,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=s}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.load=function(n,s){var p=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(f,y){p._loaded=!0,f?p.fire(new l.ErrorEvent(f)):y&&(p.image=y,n&&(p.coordinates=n),s&&s(),p._finishLoading())})},o.prototype.loaded=function(){return this._loaded},o.prototype.updateImage=function(n){var s=this;return this.image&&n.url?(this.options.url=n.url,this.load(n.coordinates,function(){s.texture=null}),this):this},o.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},o.prototype.onAdd=function(n){this.map=n,this.load()},o.prototype.setCoordinates=function(n){var s=this;this.coordinates=n;var p=n.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(y){for(var g=1/0,S=1/0,k=-1/0,L=-1/0,U=0,X=y;U<X.length;U+=1){var W=X[U];g=Math.min(g,W.x),S=Math.min(S,W.y),k=Math.max(k,W.x),L=Math.max(L,W.y)}var ft=Math.max(k-g,L-S),ut=Math.max(0,Math.floor(-Math.log(ft)/Math.LN2)),_t=Math.pow(2,ut);return new l.CanonicalTileID(ut,Math.floor((g+k)/2*_t),Math.floor((S+L)/2*_t))}(p),this.minzoom=this.maxzoom=this.tileID.z;var f=p.map(function(y){return s.tileID.getTilePoint(y)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(f[2].x,f[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},o.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var n=this.map.painter.context,s=n.gl;for(var p in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,se.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE)),this.tiles){var f=this.tiles[p];"loaded"!==f.state&&(f.state="loaded",f.texture=this.texture)}}},o.prototype.loadTile=function(n,s){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},s(null)):(n.state="errored",s(null))},o.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},o.prototype.hasTransition=function(){return!1},o}(l.Evented),ei=function(r){function o(n,s,p,f){r.call(this,n,s,p,f),this.roundZoom=!0,this.type="video",this.options=s}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.load=function(){var n=this;this._loaded=!1;var s=this.options;this.urls=[];for(var p=0,f=s.urls;p<f.length;p+=1)this.urls.push(this.map._requestManager.transformRequest(f[p],l.ResourceType.Source).url);l.getVideo(this.urls,function(g,S){n._loaded=!0,g?n.fire(new l.ErrorEvent(g)):S&&(n.video=S,n.video.loop=!0,n.video.addEventListener("playing",function(){n.map.triggerRepaint()}),n.map&&n.video.play(),n._finishLoading())})},o.prototype.pause=function(){this.video&&this.video.pause()},o.prototype.play=function(){this.video&&this.video.play()},o.prototype.seek=function(n){if(this.video){var s=this.video.seekable;n<s.start(0)||n>s.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+s.start(0)+" and "+s.end(0)+"-second mark."))):this.video.currentTime=n}},o.prototype.getVideo=function(){return this.video},o.prototype.onAdd=function(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},o.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var n=this.map.painter.context,s=n.gl;for(var p in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,se.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(n,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE)),this.tiles){var f=this.tiles[p];"loaded"!==f.state&&(f.state="loaded",f.texture=this.texture)}}},o.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},o.prototype.hasTransition=function(){return this.video&&!this.video.paused},o}(Ie),_e=function(r){function o(n,s,p,f){r.call(this,n,s,p,f),s.coordinates?Array.isArray(s.coordinates)&&4===s.coordinates.length&&!s.coordinates.some(function(y){return!Array.isArray(y)||2!==y.length||y.some(function(g){return"number"!=typeof g})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+n,null,'missing required property "coordinates"'))),s.animate&&"boolean"!=typeof s.animate&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),s.canvas?"string"==typeof s.canvas||s.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=s,this.animate=void 0===s.animate||s.animate}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},o.prototype.getCanvas=function(){return this.canvas},o.prototype.onAdd=function(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()},o.prototype.onRemove=function(){this.pause()},o.prototype.prepare=function(){var n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var s=this.map.painter.context,p=s.gl;for(var f in this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,se.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(s,this.canvas,p.RGBA,{premultiply:!0}),this.tiles){var y=this.tiles[f];"loaded"!==y.state&&(y.state="loaded",y.texture=this.texture)}}},o.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},o.prototype.hasTransition=function(){return this._playing},o.prototype._hasInvalidDimensions=function(){for(var n=0,s=[this.canvas.width,this.canvas.height];n<s.length;n+=1){var p=s[n];if(isNaN(p)||p<=0)return!0}return!1},o}(Ie),Ri={vector:J,raster:d,"raster-dem":Pt,geojson:Et,video:ei,image:Ie,canvas:_e};function _i(r,o){var n=l.identity([]);return l.translate(n,n,[1,1,0]),l.scale(n,n,[.5*r.width,.5*r.height,1]),l.multiply(n,n,r.calculatePosMatrix(o.toUnwrapped()))}function Hr(r,o,n,s,p){var f=function(G,H,ft){if(G)for(var ut=0,_t=G;ut<_t.length;ut+=1){var St=H[_t[ut]];if(St&&St.source===ft&&"fill-extrusion"===St.type)return!0}else for(var Ct in H){var Ut=H[Ct];if(Ut.source===ft&&"fill-extrusion"===Ut.type)return!0}return!1}(s&&s.layers,o,r.id),y=p.maxPitchScaleFactor(),g=r.tilesIn(n,y,f);g.sort(Tr);for(var S=[],k=0,L=g;k<L.length;k+=1){var U=L[k];S.push({wrappedTileID:U.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(o,r._state,U.queryGeometry,U.cameraQueryGeometry,U.scale,s,p,y,_i(r.transform,U.tileID))})}var X=function(G){for(var H={},ft={},ut=0,_t=G;ut<_t.length;ut+=1){var St=_t[ut],Ct=St.queryResults,Ut=St.wrappedTileID,te=ft[Ut]=ft[Ut]||{};for(var le in Ct)for(var De=Ct[le],Ce=te[le]=te[le]||{},$e=H[le]=H[le]||[],Se=0,fi=De;Se<fi.length;Se+=1){var ni=fi[Se];Ce[ni.featureIndex]||(Ce[ni.featureIndex]=!0,$e.push(ni))}}return H}(S);for(var W in X)X[W].forEach(function(G){var H=G.feature,ft=r.getFeatureState(H.layer["source-layer"],H.id);H.source=H.layer.source,H.layer["source-layer"]&&(H.sourceLayer=H.layer["source-layer"]),H.state=ft});return X}function Tr(r,o){var n=r.tileID,s=o.tileID;return n.overscaledZ-s.overscaledZ||n.canonical.y-s.canonical.y||n.wrap-s.wrap||n.canonical.x-s.canonical.x}var sr=function(r,o){this.max=r,this.onRemove=o,this.reset()};sr.prototype.reset=function(){for(var r in this.data)for(var o=0,n=this.data[r];o<n.length;o+=1){var s=n[o];s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value)}return this.data={},this.order=[],this},sr.prototype.add=function(r,o,n){var s=this,p=r.wrapped().key;void 0===this.data[p]&&(this.data[p]=[]);var f={value:o,timeout:void 0};if(void 0!==n&&(f.timeout=setTimeout(function(){s.remove(r,f)},n)),this.data[p].push(f),this.order.push(p),this.order.length>this.max){var y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this},sr.prototype.has=function(r){return r.wrapped().key in this.data},sr.prototype.getAndRemove=function(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null},sr.prototype._getAndRemoveByKey=function(r){var o=this.data[r].shift();return o.timeout&&clearTimeout(o.timeout),0===this.data[r].length&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),o.value},sr.prototype.getByKey=function(r){var o=this.data[r];return o?o[0].value:null},sr.prototype.get=function(r){return this.has(r)?this.data[r.wrapped().key][0].value:null},sr.prototype.remove=function(r,o){if(!this.has(r))return this;var n=r.wrapped().key,s=void 0===o?0:this.data[n].indexOf(o),p=this.data[n][s];return this.data[n].splice(s,1),p.timeout&&clearTimeout(p.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(p.value),this.order.splice(this.order.indexOf(n),1),this},sr.prototype.setMaxSize=function(r){for(this.max=r;this.order.length>this.max;){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},sr.prototype.filter=function(r){var o=[];for(var n in this.data)for(var s=0,p=this.data[n];s<p.length;s+=1){var f=p[s];r(f.value)||o.push(f)}for(var y=0,g=o;y<g.length;y+=1){var S=g[y];this.remove(S.value.tileID,S)}};var Tn=function(r,o,n){this.context=r;var s=r.gl;this.buffer=s.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),s.bufferData(s.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?s.DYNAMIC_DRAW:s.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer};Tn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Tn.prototype.updateData=function(r){var o=this.context.gl;this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)},Tn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ln={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Dt=function(r,o,n,s){this.length=o.length,this.attributes=n,this.itemSize=o.bytesPerElement,this.dynamicDraw=s,this.context=r;var p=r.gl;this.buffer=p.createBuffer(),r.bindVertexBuffer.set(this.buffer),p.bufferData(p.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer};Dt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Dt.prototype.updateData=function(r){var o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,r.arrayBuffer)},Dt.prototype.enableAttributes=function(r,o){for(var n=0;n<this.attributes.length;n++){var p=o.attributes[this.attributes[n].name];void 0!==p&&r.enableVertexAttribArray(p)}},Dt.prototype.setVertexAttribPointers=function(r,o,n){for(var s=0;s<this.attributes.length;s++){var p=this.attributes[s],f=o.attributes[p.name];void 0!==f&&r.vertexAttribPointer(f,p.components,r[Ln[p.type]],!1,this.itemSize,p.offset+this.itemSize*(n||0))}},Dt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ft=function(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ft.prototype.get=function(){return this.current},Ft.prototype.set=function(r){},Ft.prototype.getDefault=function(){return this.default},Ft.prototype.setDefault=function(){this.set(this.default)};var Fe=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return l.Color.transparent},o.prototype.set=function(n){var s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)},o}(Ft),Le=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return 1},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)},o}(Ft),st=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return 0},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)},o}(Ft),Rt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return[!0,!0,!0,!0]},o.prototype.set=function(n){var s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)},o}(Ft),me=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!0},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)},o}(Ft),Me=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return 255},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)},o}(Ft),ii=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},o.prototype.set=function(n){var s=this.current;(n.func!==s.func||n.ref!==s.ref||n.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)},o}(Ft),re=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){var n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]},o.prototype.set=function(n){var s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)},o}(Ft),Bt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!1},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;n?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=n,this.dirty=!1}},o}(Ft),Kt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return[0,1]},o.prototype.set=function(n){var s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)},o}(Ft),ne=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!1},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;n?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=n,this.dirty=!1}},o}(Ft),Pe=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return this.gl.LESS},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)},o}(Ft),oi=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!1},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;n?s.enable(s.BLEND):s.disable(s.BLEND),this.current=n,this.dirty=!1}},o}(Ft),Ci=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){var n=this.gl;return[n.ONE,n.ZERO]},o.prototype.set=function(n){var s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)},o}(Ft),ar=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return l.Color.transparent},o.prototype.set=function(n){var s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)},o}(Ft),tr=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return this.gl.FUNC_ADD},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)},o}(Ft),Qr=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!1},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;n?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=n,this.dirty=!1}},o}(Ft),vn=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return this.gl.BACK},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)},o}(Ft),Xr=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return this.gl.CCW},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)},o}(Ft),dn=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)},o}(Ft),xt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return this.gl.TEXTURE0},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)},o}(Ft),pt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){var n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]},o.prototype.set=function(n){var s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)},o}(Ft),Wt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,n),this.current=n,this.dirty=!1}},o}(Ft),ue=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,n),this.current=n,this.dirty=!1}},o}(Ft),We=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.bindTexture(s.TEXTURE_2D,n),this.current=n,this.dirty=!1}},o}(Ft),ri=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}},o}(Ft),Ne=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){var s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1},o}(Ft),zi=function(r){function o(n){r.call(this,n),this.vao=n.extVertexArrayObject}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){this.vao&&(n!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(n),this.current=n,this.dirty=!1)},o}(Ft),Fi=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return 4},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}},o}(Ft),Ni=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!1},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}},o}(Ft),Ii=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!1},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}},o}(Ft),wi=function(r){function o(n,s){r.call(this,n),this.context=n,this.parent=s}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o}(Ft),Li=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.setDirty=function(){this.dirty=!0},o.prototype.set=function(n){if(n!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}},o}(wi),cr=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(n){if(n!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}},o}(wi),Or=function(r,o,n){this.context=r,this.width=o,this.height=n;var p=this.framebuffer=r.gl.createFramebuffer();this.colorAttachment=new Li(r,p),this.depthAttachment=new cr(r,p)};Or.prototype.destroy=function(){var r=this.context.gl,o=this.colorAttachment.get();o&&r.deleteTexture(o);var n=this.depthAttachment.get();n&&r.deleteRenderbuffer(n),r.deleteFramebuffer(this.framebuffer)};var Mi=function(r,o,n){this.func=r,this.mask=o,this.range=n};Mi.ReadOnly=!1,Mi.ReadWrite=!0,Mi.disabled=new Mi(519,Mi.ReadOnly,[0,1]);var qi=function(r,o,n,s,p,f){this.test=r,this.ref=o,this.mask=n,this.fail=s,this.depthFail=p,this.pass=f};qi.disabled=new qi({func:519,mask:0},0,0,7680,7680,7680);var _r=function(r,o,n){this.blendFunction=r,this.blendColor=o,this.mask=n};_r.disabled=new _r(_r.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),_r.unblended=new _r(_r.Replace,l.Color.transparent,[!0,!0,!0,!0]),_r.alphaBlended=new _r([1,771],l.Color.transparent,[!0,!0,!0,!0]);var ji=function(r,o,n){this.enable=r,this.mode=o,this.frontFace=n};ji.disabled=new ji(!1,1029,2305),ji.backCCW=new ji(!0,1029,2305);var Zr=function(r){this.gl=r,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Fe(this),this.clearDepth=new Le(this),this.clearStencil=new st(this),this.colorMask=new Rt(this),this.depthMask=new me(this),this.stencilMask=new Me(this),this.stencilFunc=new ii(this),this.stencilOp=new re(this),this.stencilTest=new Bt(this),this.depthRange=new Kt(this),this.depthTest=new ne(this),this.depthFunc=new Pe(this),this.blend=new oi(this),this.blendFunc=new Ci(this),this.blendColor=new ar(this),this.blendEquation=new tr(this),this.cullFace=new Qr(this),this.cullFaceSide=new vn(this),this.frontFace=new Xr(this),this.program=new dn(this),this.activeTexture=new xt(this),this.viewport=new pt(this),this.bindFramebuffer=new Wt(this),this.bindRenderbuffer=new ue(this),this.bindTexture=new We(this),this.bindVertexBuffer=new ri(this),this.bindElementBuffer=new Ne(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new zi(this),this.pixelStoreUnpack=new Fi(this),this.pixelStoreUnpackPremultiplyAlpha=new Ni(this),this.pixelStoreUnpackFlipY=new Ii(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=r.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&r.getExtension("OES_texture_half_float_linear"),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query")};Zr.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Zr.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Zr.prototype.createIndexBuffer=function(r,o){return new Tn(this,r,o)},Zr.prototype.createVertexBuffer=function(r,o,n){return new Dt(this,r,o,n)},Zr.prototype.createRenderbuffer=function(r,o,n){var s=this.gl,p=s.createRenderbuffer();return this.bindRenderbuffer.set(p),s.renderbufferStorage(s.RENDERBUFFER,r,o,n),this.bindRenderbuffer.set(null),p},Zr.prototype.createFramebuffer=function(r,o){return new Or(this,r,o)},Zr.prototype.clear=function(r){var o=r.color,n=r.depth,s=this.gl,p=0;o&&(p|=s.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(p|=s.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),s.clear(p)},Zr.prototype.setCullFace=function(r){!1===r.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))},Zr.prototype.setDepthMode=function(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)},Zr.prototype.setStencilMode=function(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)},Zr.prototype.setColorMode=function(r){l.deepEqual(r.blendFunction,_r.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)},Zr.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ir=function(r){function o(n,s,p){var f=this;r.call(this),this.id=n,this.dispatcher=p,this.on("data",function(y){"source"===y.dataType&&"metadata"===y.sourceDataType&&(f._sourceLoaded=!0),f._sourceLoaded&&!f._paused&&"source"===y.dataType&&"content"===y.sourceDataType&&(f.reload(),f.transform&&f.update(f.transform))}),this.on("error",function(){f._sourceErrored=!0}),this._source=function(r,o,n,s){var p=new Ri[o.type](r,o,n,s);if(p.id!==r)throw new Error("Expected Source id to be "+r+" instead of "+p.id);return l.bindAll(["load","abort","unload","serialize","prepare"],p),p}(n,s,p,this),this._tiles={},this._cache=new sr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.onAdd=function(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(n)},o.prototype.onRemove=function(n){this._source&&this._source.onRemove&&this._source.onRemove(n)},o.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var n in this._tiles){var s=this._tiles[n];if("loaded"!==s.state&&"errored"!==s.state)return!1}return!0},o.prototype.getSource=function(){return this._source},o.prototype.pause=function(){this._paused=!0},o.prototype.resume=function(){if(this._paused){var n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}},o.prototype._loadTile=function(n,s){return this._source.loadTile(n,s)},o.prototype._unloadTile=function(n){if(this._source.unloadTile)return this._source.unloadTile(n,function(){})},o.prototype._abortTile=function(n){if(this._source.abortTile)return this._source.abortTile(n,function(){})},o.prototype.serialize=function(){return this._source.serialize()},o.prototype.prepare=function(n){for(var s in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var p=this._tiles[s];p.upload(n),p.prepare(this.map.style.imageManager)}},o.prototype.getIds=function(){return l.values(this._tiles).map(function(n){return n.tileID}).sort(x).map(function(n){return n.key})},o.prototype.getRenderableIds=function(n){var s=this,p=[];for(var f in this._tiles)this._isIdRenderable(f,n)&&p.push(this._tiles[f]);return n?p.sort(function(y,g){var S=y.tileID,k=g.tileID,L=new l.Point(S.canonical.x,S.canonical.y)._rotate(s.transform.angle),U=new l.Point(k.canonical.x,k.canonical.y)._rotate(s.transform.angle);return S.overscaledZ-k.overscaledZ||U.y-L.y||U.x-L.x}).map(function(y){return y.tileID.key}):p.map(function(y){return y.tileID}).sort(x).map(function(y){return y.key})},o.prototype.hasRenderableParent=function(n){var s=this.findLoadedParent(n,0);return!!s&&this._isIdRenderable(s.tileID.key)},o.prototype._isIdRenderable=function(n,s){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(s||!this._tiles[n].holdingForFade())},o.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var n in this._cache.reset(),this._tiles)"errored"!==this._tiles[n].state&&this._reloadTile(n,"reloading")},o.prototype._reloadTile=function(n,s){var p=this._tiles[n];p&&("loading"!==p.state&&(p.state=s),this._loadTile(p,this._tileLoaded.bind(this,p,n,s)))},o.prototype._tileLoaded=function(n,s,p,f){if(f)return n.state="errored",void(404!==f.status?this._source.fire(new l.ErrorEvent(f,{tile:n})):this.update(this.transform));n.timeAdded=l.browser.now(),"expired"===p&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(s,n),"raster-dem"===this.getSource().type&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:n,coord:n.tileID}))},o.prototype._backfillDEM=function(n){for(var s=this.getRenderableIds(),p=0;p<s.length;p++){var f=s[p];if(n.neighboringTiles&&n.neighboringTiles[f]){var y=this.getTileByID(f);g(n,y),g(y,n)}}function g(S,k){S.needsHillshadePrepare=!0;var L=k.tileID.canonical.x-S.tileID.canonical.x,U=k.tileID.canonical.y-S.tileID.canonical.y,X=Math.pow(2,S.tileID.canonical.z),W=k.tileID.key;0===L&&0===U||Math.abs(U)>1||(Math.abs(L)>1&&(1===Math.abs(L+X)?L+=X:1===Math.abs(L-X)&&(L-=X)),k.dem&&S.dem&&(S.dem.backfillBorder(k.dem,L,U),S.neighboringTiles&&S.neighboringTiles[W]&&(S.neighboringTiles[W].backfilled=!0)))}},o.prototype.getTile=function(n){return this.getTileByID(n.key)},o.prototype.getTileByID=function(n){return this._tiles[n]},o.prototype._retainLoadedChildren=function(n,s,p,f){for(var y in this._tiles){var g=this._tiles[y];if(!(f[y]||!g.hasData()||g.tileID.overscaledZ<=s||g.tileID.overscaledZ>p)){for(var S=g.tileID;g&&g.tileID.overscaledZ>s+1;){var k=g.tileID.scaledTo(g.tileID.overscaledZ-1);(g=this._tiles[k.key])&&g.hasData()&&(S=k)}for(var L=S;L.overscaledZ>s;)if(n[(L=L.scaledTo(L.overscaledZ-1)).key]){f[S.key]=S;break}}}},o.prototype.findLoadedParent=function(n,s){if(n.key in this._loadedParentTiles){var p=this._loadedParentTiles[n.key];return p&&p.tileID.overscaledZ>=s?p:null}for(var f=n.overscaledZ-1;f>=s;f--){var y=n.scaledTo(f),g=this._getLoadedTile(y);if(g)return g}},o.prototype._getLoadedTile=function(n){var s=this._tiles[n.key];return s&&s.hasData()?s:this._cache.getByKey(n.wrapped().key)},o.prototype.updateCacheSize=function(n){var s=(Math.ceil(n.width/this._source.tileSize)+1)*(Math.ceil(n.height/this._source.tileSize)+1),p=Math.floor(5*s),f="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(f)},o.prototype.handleWrapJump=function(n){var p=Math.round((n-(void 0===this._prevLng?n:this._prevLng))/360);if(this._prevLng=n,p){var f={};for(var y in this._tiles){var g=this._tiles[y];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+p),f[g.tileID.key]=g}for(var S in this._tiles=f,this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(var k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}},o.prototype.update=function(n){var s=this;if(this.transform=n,this._sourceLoaded&&!this._paused){var p;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?p=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(le){return new l.OverscaledTileID(le.canonical.z,le.wrap,le.canonical.z,le.canonical.x,le.canonical.y)}):(p=n.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(p=p.filter(function(le){return s._source.hasTile(le)}))):p=[];var f=n.coveringZoomLevel(this._source),y=Math.max(f-o.maxOverzooming,this._source.minzoom),g=Math.max(f+o.maxUnderzooming,this._source.minzoom),S=this._updateRetainedTiles(p,f);if(E(this._source.type)){for(var k={},L={},U=0,X=Object.keys(S);U<X.length;U+=1){var W=X[U],G=S[W],H=this._tiles[W];if(H&&!(H.fadeEndTime&&H.fadeEndTime<=l.browser.now())){var ft=this.findLoadedParent(G,y);ft&&(this._addTile(ft.tileID),k[ft.tileID.key]=ft.tileID),L[W]=G}}for(var ut in this._retainLoadedChildren(L,f,g,S),k)S[ut]||(this._coveredTiles[ut]=!0,S[ut]=k[ut])}for(var _t in S)this._tiles[_t].clearFadeHold();for(var St=0,Ct=l.keysDifference(this._tiles,S);St<Ct.length;St+=1){var Ut=Ct[St],te=this._tiles[Ut];te.hasSymbolBuckets&&!te.holdingForFade()?te.setHoldDuration(this.map._fadeDuration):te.hasSymbolBuckets&&!te.symbolFadeFinished()||this._removeTile(Ut)}this._updateLoadedParentTileCache()}},o.prototype.releaseSymbolFadeTiles=function(){for(var n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)},o.prototype._updateRetainedTiles=function(n,s){for(var p={},f={},y=Math.max(s-o.maxOverzooming,this._source.minzoom),g=Math.max(s+o.maxUnderzooming,this._source.minzoom),S={},k=0,L=n;k<L.length;k+=1){var U=L[k],X=this._addTile(U);p[U.key]=U,X.hasData()||s<this._source.maxzoom&&(S[U.key]=U)}this._retainLoadedChildren(S,s,g,p);for(var W=0,G=n;W<G.length;W+=1){var H=G[W],ft=this._tiles[H.key];if(!ft.hasData()){if(s+1>this._source.maxzoom){var ut=H.children(this._source.maxzoom)[0],_t=this.getTile(ut);if(_t&&_t.hasData()){p[ut.key]=ut;continue}}else{var St=H.children(this._source.maxzoom);if(p[St[0].key]&&p[St[1].key]&&p[St[2].key]&&p[St[3].key])continue}for(var Ct=ft.wasRequested(),Ut=H.overscaledZ-1;Ut>=y;--Ut){var te=H.scaledTo(Ut);if(f[te.key]||(f[te.key]=!0,!(ft=this.getTile(te))&&Ct&&(ft=this._addTile(te)),ft&&(p[te.key]=te,Ct=ft.wasRequested(),ft.hasData())))break}}}return p},o.prototype._updateLoadedParentTileCache=function(){for(var n in this._loadedParentTiles={},this._tiles){for(var s=[],p=void 0,f=this._tiles[n].tileID;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){p=this._loadedParentTiles[f.key];break}s.push(f.key);var y=f.scaledTo(f.overscaledZ-1);if(p=this._getLoadedTile(y))break;f=y}for(var g=0,S=s;g<S.length;g+=1)this._loadedParentTiles[S[g]]=p}},o.prototype._addTile=function(n){var s=this._tiles[n.key];if(s)return s;(s=this._cache.getAndRemove(n))&&(this._setTileReloadTimer(n.key,s),s.tileID=n,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,s)));var p=Boolean(s);return p||(s=new l.Tile(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(s,this._tileLoaded.bind(this,s,n.key,s.state))),s?(s.uses++,this._tiles[n.key]=s,p||this._source.fire(new l.Event("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null},o.prototype._setTileReloadTimer=function(n,s){var p=this;n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);var f=s.getExpiryTimeout();f&&(this._timers[n]=setTimeout(function(){p._reloadTile(n,"expired"),delete p._timers[n]},f))},o.prototype._removeTile=function(n){var s=this._tiles[n];s&&(s.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),s.uses>0||(s.hasData()&&"reloading"!==s.state?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))},o.prototype.clearTiles=function(){for(var n in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(n);this._cache.reset()},o.prototype.tilesIn=function(n,s,p){var f=this,y=[],g=this.transform;if(!g)return y;for(var S=p?g.getCameraQueryGeometry(n):n,k=n.map(function(Ut){return g.pointCoordinate(Ut)}),L=S.map(function(Ut){return g.pointCoordinate(Ut)}),U=this.getIds(),X=1/0,W=1/0,G=-1/0,H=-1/0,ft=0,ut=L;ft<ut.length;ft+=1){var _t=ut[ft];X=Math.min(X,_t.x),W=Math.min(W,_t.y),G=Math.max(G,_t.x),H=Math.max(H,_t.y)}for(var St=function(Ut){var te=f._tiles[U[Ut]];if(!te.holdingForFade()){var le=te.tileID,De=Math.pow(2,g.zoom-te.tileID.overscaledZ),Ce=s*te.queryPadding*l.EXTENT/te.tileSize/De,$e=[le.getTilePoint(new l.MercatorCoordinate(X,W)),le.getTilePoint(new l.MercatorCoordinate(G,H))];if($e[0].x-Ce<l.EXTENT&&$e[0].y-Ce<l.EXTENT&&$e[1].x+Ce>=0&&$e[1].y+Ce>=0){var Se=k.map(function(ni){return le.getTilePoint(ni)}),fi=L.map(function(ni){return le.getTilePoint(ni)});y.push({tile:te,tileID:le,queryGeometry:Se,cameraQueryGeometry:fi,scale:De})}}},Ct=0;Ct<U.length;Ct++)St(Ct);return y},o.prototype.getVisibleCoordinates=function(n){for(var s=this,p=this.getRenderableIds(n).map(function(S){return s._tiles[S].tileID}),f=0,y=p;f<y.length;f+=1){var g=y[f];g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped())}return p},o.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(E(this._source.type))for(var n in this._tiles){var s=this._tiles[n];if(void 0!==s.fadeEndTime&&s.fadeEndTime>=l.browser.now())return!0}return!1},o.prototype.setFeatureState=function(n,s,p){this._state.updateState(n=n||"_geojsonTileLayer",s,p)},o.prototype.removeFeatureState=function(n,s,p){this._state.removeFeatureState(n=n||"_geojsonTileLayer",s,p)},o.prototype.getFeatureState=function(n,s){return this._state.getState(n=n||"_geojsonTileLayer",s)},o.prototype.setDependencies=function(n,s,p){var f=this._tiles[n];f&&f.setDependencies(s,p)},o.prototype.reloadTilesForDependencies=function(n,s){for(var p in this._tiles)this._tiles[p].hasDependency(n,s)&&this._reloadTile(p,"reloading");this._cache.filter(function(f){return!f.hasDependency(n,s)})},o}(l.Evented);function x(r,o){var n=Math.abs(2*r.wrap)-+(r.wrap<0),s=Math.abs(2*o.wrap)-+(o.wrap<0);return r.overscaledZ-o.overscaledZ||s-n||o.canonical.y-r.canonical.y||o.canonical.x-r.canonical.x}function E(r){return"raster"===r||"image"===r||"video"===r}function D(){return new l.window.Worker(Za.workerUrl)}ir.maxOverzooming=10,ir.maxUnderzooming=3;var j=function(){this.active={}};j.prototype.acquire=function(r){if(!this.workers)for(this.workers=[];this.workers.length<j.workerCount;)this.workers.push(new D);return this.active[r]=!0,this.workers.slice()},j.prototype.release=function(r){delete this.active[r],0===Object.keys(this.active).length&&(this.workers.forEach(function(o){o.terminate()}),this.workers=null)};var K,ct=Math.floor(l.browser.hardwareConcurrency/2);function yt(r,o){var n={};for(var s in r)"ref"!==s&&(n[s]=r[s]);return l.refProperties.forEach(function(p){p in o&&(n[p]=o[p])}),n}function at(r){r=r.slice();for(var o=Object.create(null),n=0;n<r.length;n++)o[r[n].id]=r[n];for(var s=0;s<r.length;s++)"ref"in r[s]&&(r[s]=yt(r[s],o[r[s].ref]));return r}j.workerCount=Math.max(Math.min(ct,6),1);var nt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function tt(r,o,n){n.push({command:nt.addSource,args:[r,o[r]]})}function Ot(r,o,n){o.push({command:nt.removeSource,args:[r]}),n[r]=!0}function jt(r,o,n,s){Ot(r,n,s),tt(r,o,n)}function Nt(r,o,n){var s;for(s in r[n])if(r[n].hasOwnProperty(s)&&"data"!==s&&!l.deepEqual(r[n][s],o[n][s]))return!1;for(s in o[n])if(o[n].hasOwnProperty(s)&&"data"!==s&&!l.deepEqual(r[n][s],o[n][s]))return!1;return!0}function fe(r,o,n,s,p,f){var y;for(y in o=o||{},r=r||{})r.hasOwnProperty(y)&&(l.deepEqual(r[y],o[y])||n.push({command:f,args:[s,y,o[y],p]}));for(y in o)o.hasOwnProperty(y)&&!r.hasOwnProperty(y)&&(l.deepEqual(r[y],o[y])||n.push({command:f,args:[s,y,o[y],p]}))}function he(r){return r.id}function qe(r,o){return r[o.id]=o,r}var ze=function(r,o,n){var s=this.boxCells=[],p=this.circleCells=[];this.xCellCount=Math.ceil(r/n),this.yCellCount=Math.ceil(o/n);for(var f=0;f<this.xCellCount*this.yCellCount;f++)s.push([]),p.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=o,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0};function ai(r,o,n,s,p){var f=l.create();return o?(l.scale(f,f,[1/p,1/p,1]),n||l.rotateZ(f,f,s.angle)):l.multiply(f,s.labelPlaneMatrix,r),f}function Qe(r,o,n,s,p){if(o){var f=l.clone(r);return l.scale(f,f,[p,p,1]),n||l.rotateZ(f,f,-s.angle),f}return s.glCoordMatrix}function di(r,o){var n=[r.x,r.y,0,1];vr(n,n,o);var s=n[3];return{point:new l.Point(n[0]/s,n[1]/s),signedDistanceFromCamera:s}}function Ei(r,o){var n=r[0]/r[3],s=r[1]/r[3];return n>=-o[0]&&n<=o[0]&&s>=-o[1]&&s<=o[1]}function Cr(r,o,n,s,p,f,y,g){var S=s?r.textSizeData:r.iconSizeData,k=l.evaluateSizeForZoom(S,n.transform.zoom),L=[256/n.width*2+1,256/n.height*2+1],U=s?r.text.dynamicLayoutVertexArray:r.icon.dynamicLayoutVertexArray;U.clear();for(var X=r.lineVertexArray,W=s?r.text.placedSymbolArray:r.icon.placedSymbolArray,G=n.transform.width/n.transform.height,H=!1,ft=0;ft<W.length;ft++){var ut=W.get(ft);if(ut.hidden||ut.writingMode===l.WritingMode.vertical&&!H)Xi(ut.numGlyphs,U);else{H=!1;var _t=[ut.anchorX,ut.anchorY,0,1];if(l.transformMat4(_t,_t,o),Ei(_t,L)){var St=.5+_t[3]/n.transform.cameraToCenterDistance*.5,Ct=l.evaluateSizeForFeature(S,k,ut),Ut=y?Ct*St:Ct/St,te=new l.Point(ut.anchorX,ut.anchorY),le=di(te,p).point,De={},Ce=tn(ut,Ut,!1,g,o,p,f,r.glyphOffsetArray,X,U,le,te,De,G);H=Ce.useVertical,(Ce.notEnoughRoom||H||Ce.needsFlipping&&tn(ut,Ut,!0,g,o,p,f,r.glyphOffsetArray,X,U,le,te,De,G).notEnoughRoom)&&Xi(ut.numGlyphs,U)}else Xi(ut.numGlyphs,U)}}s?r.text.dynamicLayoutVertexBuffer.updateData(U):r.icon.dynamicLayoutVertexBuffer.updateData(U)}function Ue(r,o,n,s,p,f,y,g,S,k,L,U){var X=g.glyphStartIndex+g.numGlyphs,W=g.lineStartIndex,G=g.lineStartIndex+g.lineLength,H=o.getoffsetX(g.glyphStartIndex),ft=o.getoffsetX(X-1),ut=Rr(r*H,n,s,p,f,y,g.segment,W,G,S,k,L,U);if(!ut)return null;var _t=Rr(r*ft,n,s,p,f,y,g.segment,W,G,S,k,L,U);return _t?{first:ut,last:_t}:null}function Sr(r,o,n,s){return r===l.WritingMode.horizontal&&Math.abs(n.y-o.y)>Math.abs(n.x-o.x)*s?{useVertical:!0}:(r===l.WritingMode.vertical?o.y<n.y:o.x>n.x)?{needsFlipping:!0}:null}function tn(r,o,n,s,p,f,y,g,S,k,L,U,X,W){var G,H=o/24,ft=r.lineOffsetX*H,ut=r.lineOffsetY*H;if(r.numGlyphs>1){var _t=r.glyphStartIndex+r.numGlyphs,St=r.lineStartIndex,Ct=r.lineStartIndex+r.lineLength,Ut=Ue(H,g,ft,ut,n,L,U,r,S,f,X,!1);if(!Ut)return{notEnoughRoom:!0};var te=di(Ut.first.point,y).point,le=di(Ut.last.point,y).point;if(s&&!n){var De=Sr(r.writingMode,te,le,W);if(De)return De}G=[Ut.first];for(var Ce=r.glyphStartIndex+1;Ce<_t-1;Ce++)G.push(Rr(H*g.getoffsetX(Ce),ft,ut,n,L,U,r.segment,St,Ct,S,f,X,!1));G.push(Ut.last)}else{if(s&&!n){var $e=di(U,p).point,Se=r.lineStartIndex+r.segment+1,fi=new l.Point(S.getx(Se),S.gety(Se)),ni=di(fi,p),si=ni.signedDistanceFromCamera>0?ni.point:mr(U,fi,$e,1,p),li=Sr(r.writingMode,$e,si,W);if(li)return li}var vi=Rr(H*g.getoffsetX(r.glyphStartIndex),ft,ut,n,L,U,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,S,f,X,!1);if(!vi)return{notEnoughRoom:!0};G=[vi]}for(var ui=0,lr=G;ui<lr.length;ui+=1){var xi=lr[ui];l.addDynamicAttributes(k,xi.point,xi.angle)}return{}}function mr(r,o,n,s,p){var f=di(r.add(r.sub(o)._unit()),p).point,y=n.sub(f);return n.add(y._mult(s/y.mag()))}function Rr(r,o,n,s,p,f,y,g,S,k,L,U,X){var W=s?r-o:r+o,G=W>0?1:-1,H=0;s&&(G*=-1,H=Math.PI),G<0&&(H+=Math.PI);for(var ft=G>0?g+y:g+y+1,ut=ft,_t=p,St=p,Ct=0,Ut=0,te=Math.abs(W);Ct+Ut<=te;){if((ft+=G)<g||ft>=S)return null;if(St=_t,void 0===(_t=U[ft])){var le=new l.Point(k.getx(ft),k.gety(ft)),De=di(le,L);if(De.signedDistanceFromCamera>0)_t=U[ft]=De.point;else{var Ce=ft-G;_t=mr(0===Ct?f:new l.Point(k.getx(Ce),k.gety(Ce)),le,St,te-Ct+1,L)}}Ct+=Ut,Ut=St.dist(_t)}var $e=(te-Ct)/Ut,Se=_t.sub(St),fi=Se.mult($e)._add(St);return fi._add(Se._unit()._perp()._mult(n*G)),{point:fi,angle:H+Math.atan2(_t.y-St.y,_t.x-St.x),tileDistance:X?{prevTileDistance:ft-G===ut?0:k.gettileUnitDistanceFromAnchor(ft-G),lastSegmentViewportDistance:te-Ct}:null}}ze.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},ze.prototype.insert=function(r,o,n,s,p){this._forEachCell(o,n,s,p,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(o),this.bboxes.push(n),this.bboxes.push(s),this.bboxes.push(p)},ze.prototype.insertCircle=function(r,o,n,s){this._forEachCell(o-s,n-s,o+s,n+s,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(o),this.circles.push(n),this.circles.push(s)},ze.prototype._insertBoxCell=function(r,o,n,s,p,f){this.boxCells[p].push(f)},ze.prototype._insertCircleCell=function(r,o,n,s,p,f){this.circleCells[p].push(f)},ze.prototype._query=function(r,o,n,s,p,f){if(n<0||r>this.width||s<0||o>this.height)return!p&&[];var y=[];if(r<=0&&o<=0&&this.width<=n&&this.height<=s){if(p)return!0;for(var g=0;g<this.boxKeys.length;g++)y.push({key:this.boxKeys[g],x1:this.bboxes[4*g],y1:this.bboxes[4*g+1],x2:this.bboxes[4*g+2],y2:this.bboxes[4*g+3]});for(var S=0;S<this.circleKeys.length;S++){var k=this.circles[3*S],L=this.circles[3*S+1],U=this.circles[3*S+2];y.push({key:this.circleKeys[S],x1:k-U,y1:L-U,x2:k+U,y2:L+U})}return f?y.filter(f):y}return this._forEachCell(r,o,n,s,this._queryCell,y,{hitTest:p,seenUids:{box:{},circle:{}}},f),p?y.length>0:y},ze.prototype._queryCircle=function(r,o,n,s,p){var f=r-n,y=r+n,g=o-n,S=o+n;if(y<0||f>this.width||S<0||g>this.height)return!s&&[];var k=[];return this._forEachCell(f,g,y,S,this._queryCellCircle,k,{hitTest:s,circle:{x:r,y:o,radius:n},seenUids:{box:{},circle:{}}},p),s?k.length>0:k},ze.prototype.query=function(r,o,n,s,p){return this._query(r,o,n,s,!1,p)},ze.prototype.hitTest=function(r,o,n,s,p){return this._query(r,o,n,s,!0,p)},ze.prototype.hitTestCircle=function(r,o,n,s){return this._queryCircle(r,o,n,!0,s)},ze.prototype._queryCell=function(r,o,n,s,p,f,y,g){var S=y.seenUids,k=this.boxCells[p];if(null!==k)for(var L=this.bboxes,U=0,X=k;U<X.length;U+=1){var W=X[U];if(!S.box[W]){S.box[W]=!0;var G=4*W;if(r<=L[G+2]&&o<=L[G+3]&&n>=L[G+0]&&s>=L[G+1]&&(!g||g(this.boxKeys[W]))){if(y.hitTest)return f.push(!0),!0;f.push({key:this.boxKeys[W],x1:L[G],y1:L[G+1],x2:L[G+2],y2:L[G+3]})}}}var H=this.circleCells[p];if(null!==H)for(var ft=this.circles,ut=0,_t=H;ut<_t.length;ut+=1){var St=_t[ut];if(!S.circle[St]){S.circle[St]=!0;var Ct=3*St;if(this._circleAndRectCollide(ft[Ct],ft[Ct+1],ft[Ct+2],r,o,n,s)&&(!g||g(this.circleKeys[St]))){if(y.hitTest)return f.push(!0),!0;var Ut=ft[Ct],te=ft[Ct+1],le=ft[Ct+2];f.push({key:this.circleKeys[St],x1:Ut-le,y1:te-le,x2:Ut+le,y2:te+le})}}}},ze.prototype._queryCellCircle=function(r,o,n,s,p,f,y,g){var S=y.circle,k=y.seenUids,L=this.boxCells[p];if(null!==L)for(var U=this.bboxes,X=0,W=L;X<W.length;X+=1){var G=W[X];if(!k.box[G]){k.box[G]=!0;var H=4*G;if(this._circleAndRectCollide(S.x,S.y,S.radius,U[H+0],U[H+1],U[H+2],U[H+3])&&(!g||g(this.boxKeys[G])))return f.push(!0),!0}}var ft=this.circleCells[p];if(null!==ft)for(var ut=this.circles,_t=0,St=ft;_t<St.length;_t+=1){var Ct=St[_t];if(!k.circle[Ct]){k.circle[Ct]=!0;var Ut=3*Ct;if(this._circlesCollide(ut[Ut],ut[Ut+1],ut[Ut+2],S.x,S.y,S.radius)&&(!g||g(this.circleKeys[Ct])))return f.push(!0),!0}}},ze.prototype._forEachCell=function(r,o,n,s,p,f,y,g){for(var S=this._convertToXCellCoord(r),k=this._convertToYCellCoord(o),L=this._convertToXCellCoord(n),U=this._convertToYCellCoord(s),X=S;X<=L;X++)for(var W=k;W<=U;W++)if(p.call(this,r,o,n,s,this.xCellCount*W+X,f,y,g))return},ze.prototype._convertToXCellCoord=function(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))},ze.prototype._convertToYCellCoord=function(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))},ze.prototype._circlesCollide=function(r,o,n,s,p,f){var y=s-r,g=p-o,S=n+f;return S*S>y*y+g*g},ze.prototype._circleAndRectCollide=function(r,o,n,s,p,f,y){var g=(f-s)/2,S=Math.abs(r-(s+g));if(S>g+n)return!1;var k=(y-p)/2,L=Math.abs(o-(p+k));if(L>k+n)return!1;if(S<=g||L<=k)return!0;var U=S-g,X=L-k;return U*U+X*X<=n*n};var In=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xi(r,o){for(var n=0;n<r;n++){var s=o.length;o.resize(s+4),o.float32.set(In,3*s)}}function vr(r,o,n){var s=o[0],p=o[1];return r[0]=n[0]*s+n[4]*p+n[12],r[1]=n[1]*s+n[5]*p+n[13],r[3]=n[3]*s+n[7]*p+n[15],r}var Hi=function(r,o,n){void 0===o&&(o=new ze(r.width+200,r.height+200,25)),void 0===n&&(n=new ze(r.width+200,r.height+200,25)),this.transform=r,this.grid=o,this.ignoredGrid=n,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+100,this.screenBottomBoundary=r.height+100,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200};function on(r,o,n){r[o+4]=n?1:0}function Ar(r,o,n){return o*(l.EXTENT/(r.tileSize*Math.pow(2,n-r.tileID.overscaledZ)))}Hi.prototype.placeCollisionBox=function(r,o,n,s,p){var f=this.projectAndGetPerspectiveRatio(s,r.anchorPointX,r.anchorPointY),y=n*f.perspectiveRatio,g=r.x1*y+f.point.x,S=r.y1*y+f.point.y,k=r.x2*y+f.point.x,L=r.y2*y+f.point.y;return!this.isInsideGrid(g,S,k,L)||!o&&this.grid.hitTest(g,S,k,L,p)?{box:[],offscreen:!1}:{box:[g,S,k,L],offscreen:this.isOffscreen(g,S,k,L)}},Hi.prototype.approximateTileDistance=function(r,o,n,s,p){var y=r.lastSegmentViewportDistance*n;return r.prevTileDistance+y+((p?1:s/this.pitchfactor)-1)*y*Math.abs(Math.sin(o))},Hi.prototype.placeCollisionCircles=function(r,o,n,s,p,f,y,g,S,k,L,U,X){var W=[],G=this.projectAnchor(S,p.anchorX,p.anchorY),H=g/24,ft=p.lineOffsetX*g,ut=p.lineOffsetY*g,_t=new l.Point(p.anchorX,p.anchorY),St=Ue(H,y,ft,ut,!1,di(_t,k).point,_t,p,f,k,{},!0),Ct=!1,Ut=!1,te=!0,le=G.perspectiveRatio*s,De=1/(s*n),Ce=0,$e=0;St&&(Ce=this.approximateTileDistance(St.first.tileDistance,St.first.angle,De,G.cameraDistance,U),$e=this.approximateTileDistance(St.last.tileDistance,St.last.angle,De,G.cameraDistance,U));for(var Se=0;Se<r.length;Se+=5){var fi=r[Se],ni=r[Se+1],si=r[Se+2],li=r[Se+3];if(!St||li<-Ce||li>$e)on(r,Se,!1);else{var vi=this.projectPoint(S,fi,ni),ui=si*le;if(W.length>0){var lr=vi.x-W[W.length-4],xi=vi.y-W[W.length-3];if(ui*ui*2>lr*lr+xi*xi&&Se+8<r.length){var hr=r[Se+8];if(hr>-Ce&&hr<$e){on(r,Se,!1);continue}}}W.push(vi.x,vi.y,ui,Se/5),on(r,Se,!0);var $i=vi.x-ui,br=vi.y-ui,rn=vi.x+ui,Yr=vi.y+ui;if(te=te&&this.isOffscreen($i,br,rn,Yr),Ut=Ut||this.isInsideGrid($i,br,rn,Yr),!o&&this.grid.hitTestCircle(vi.x,vi.y,ui,X)){if(!L)return{circles:[],offscreen:!1};Ct=!0}}}return{circles:Ct||!Ut?[]:W,offscreen:te}},Hi.prototype.queryRenderedSymbols=function(r){if(0===r.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var o=[],n=1/0,s=1/0,p=-1/0,f=-1/0,y=0,g=r;y<g.length;y+=1){var S=g[y],k=new l.Point(S.x+100,S.y+100);n=Math.min(n,k.x),s=Math.min(s,k.y),p=Math.max(p,k.x),f=Math.max(f,k.y),o.push(k)}for(var L={},U={},X=0,W=this.grid.query(n,s,p,f).concat(this.ignoredGrid.query(n,s,p,f));X<W.length;X+=1){var G=W[X],H=G.key;if(void 0===L[H.bucketInstanceId]&&(L[H.bucketInstanceId]={}),!L[H.bucketInstanceId][H.featureIndex]){var ft=[new l.Point(G.x1,G.y1),new l.Point(G.x2,G.y1),new l.Point(G.x2,G.y2),new l.Point(G.x1,G.y2)];l.polygonIntersectsPolygon(o,ft)&&(L[H.bucketInstanceId][H.featureIndex]=!0,void 0===U[H.bucketInstanceId]&&(U[H.bucketInstanceId]=[]),U[H.bucketInstanceId].push(H.featureIndex))}}return U},Hi.prototype.insertCollisionBox=function(r,o,n,s,p){(o?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:s,collisionGroupID:p},r[0],r[1],r[2],r[3])},Hi.prototype.insertCollisionCircles=function(r,o,n,s,p){for(var f=o?this.ignoredGrid:this.grid,y={bucketInstanceId:n,featureIndex:s,collisionGroupID:p},g=0;g<r.length;g+=4)f.insertCircle(y,r[g],r[g+1],r[g+2])},Hi.prototype.projectAnchor=function(r,o,n){var s=[o,n,0,1];return vr(s,s,r),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/s[3]*.5,cameraDistance:s[3]}},Hi.prototype.projectPoint=function(r,o,n){var s=[o,n,0,1];return vr(s,s,r),new l.Point((s[0]/s[3]+1)/2*this.transform.width+100,(-s[1]/s[3]+1)/2*this.transform.height+100)},Hi.prototype.projectAndGetPerspectiveRatio=function(r,o,n){var s=[o,n,0,1];return vr(s,s,r),{point:new l.Point((s[0]/s[3]+1)/2*this.transform.width+100,(-s[1]/s[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/s[3]*.5}},Hi.prototype.isOffscreen=function(r,o,n,s){return n<100||r>=this.screenRightBoundary||s<100||o>this.screenBottomBoundary},Hi.prototype.isInsideGrid=function(r,o,n,s){return n>=0&&r<this.gridRightBoundary&&s>=0&&o<this.gridBottomBoundary};var an=function(r,o,n,s){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?o:-o))):s&&n?1:0,this.placed=n};an.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var qn=function(r,o,n,s,p){this.text=new an(r?r.text:null,o,n,p),this.icon=new an(r?r.icon:null,o,s,p)};qn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Zn=function(r,o,n){this.text=r,this.icon=o,this.skipFade=n},ns=function(r,o,n,s,p){this.bucketInstanceId=r,this.featureIndex=o,this.sourceLayerIndex=n,this.bucketIndex=s,this.tileID=p},Wn=function(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}};function Ls(r,o,n,s,p){var f=l.getAnchorAlignment(r),y=-(f.horizontalAlign-.5)*o,g=-(f.verticalAlign-.5)*n,S=l.evaluateVariableOffset(r,s);return new l.Point(y+S[0]*p,g+S[1]*p)}function qo(r,o,n,s,p,f){var y=r.x1,g=r.x2,S=r.y1,k=r.y2,L=r.anchorPointX,U=r.anchorPointY,X=new l.Point(o,n);return s&&X._rotate(p?f:-f),{x1:y+X.x,y1:S+X.y,x2:g+X.x,y2:k+X.y,anchorPointX:L,anchorPointY:U}}Wn.prototype.get=function(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){var o=++this.maxGroupID;this.collisionGroups[r]={ID:o,predicate:function(n){return n.collisionGroupID===o}}}return this.collisionGroups[r]};var pr=function(r,o,n,s){this.transform=r.clone(),this.collisionIndex=new Hi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=o,this.retainedQueryData={},this.collisionGroups=new Wn(n),this.prevPlacement=s,s&&(s.prevPlacement=void 0),this.placedOrientations={}};function xn(r,o,n,s,p){r.emplaceBack(o?1:0,n?1:0,s||0,p||0),r.emplaceBack(o?1:0,n?1:0,s||0,p||0),r.emplaceBack(o?1:0,n?1:0,s||0,p||0),r.emplaceBack(o?1:0,n?1:0,s||0,p||0)}pr.prototype.getBucketParts=function(r,o,n,s){var p=n.getBucket(o),f=n.latestFeatureIndex;if(p&&f&&o.id===p.layerIds[0]){var y=n.collisionBoxArray,g=p.layers[0].layout,S=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),k=n.tileSize/l.EXTENT,L=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),U=ai(L,"map"===g.get("text-pitch-alignment"),"map"===g.get("text-rotation-alignment"),this.transform,Ar(n,1,this.transform.zoom));this.retainedQueryData[p.bucketInstanceId]=new ns(p.bucketInstanceId,f,p.sourceLayerIndex,p.index,n.tileID);var X={bucket:p,layout:g,posMatrix:L,textLabelPlaneMatrix:U,scale:S,textPixelRatio:k,holdingForFade:n.holdingForFade(),collisionBoxArray:y,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(p.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(p.sourceID)};if(s)for(var W=0,G=p.sortKeyRanges;W<G.length;W+=1){var H=G[W];r.push({sortKey:H.sortKey,symbolInstanceStart:H.symbolInstanceStart,symbolInstanceEnd:H.symbolInstanceEnd,parameters:X})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:p.symbolInstances.length,parameters:X})}},pr.prototype.attemptAnchorPlacement=function(r,o,n,s,p,f,y,g,S,k,L,U,X,W,G){var H,ft=[U.textOffset0,U.textOffset1],ut=Ls(r,n,s,ft,p),_t=this.collisionIndex.placeCollisionBox(qo(o,ut.x,ut.y,f,y,this.transform.angle),L,g,S,k.predicate);if((!G||0!==this.collisionIndex.placeCollisionBox(qo(G,ut.x,ut.y,f,y,this.transform.angle),L,g,S,k.predicate).box.length)&&_t.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID].text&&(H=this.prevPlacement.variableOffsets[U.crossTileID].anchor),this.variableOffsets[U.crossTileID]={textOffset:ft,width:n,height:s,anchor:r,textBoxScale:p,prevAnchor:H},this.markUsedJustification(X,r,U,W),X.allowVerticalPlacement&&(this.markUsedOrientation(X,W,U),this.placedOrientations[U.crossTileID]=W),{shift:ut,placedGlyphBoxes:_t}},pr.prototype.placeLayerBucketPart=function(r,o,n){var s=this,p=r.parameters,f=p.bucket,y=p.layout,g=p.posMatrix,S=p.textLabelPlaneMatrix,k=p.scale,L=p.textPixelRatio,U=p.holdingForFade,X=p.collisionBoxArray,W=p.partiallyEvaluatedTextSize,G=p.collisionGroup,H=y.get("text-optional"),ft=y.get("icon-optional"),ut=y.get("text-allow-overlap"),_t=y.get("icon-allow-overlap"),St="map"===y.get("text-rotation-alignment"),Ct="map"===y.get("text-pitch-alignment"),Ut="none"!==y.get("icon-text-fit"),te="viewport-y"===y.get("symbol-z-order"),le=ut&&(_t||!f.hasIconData()||ft),De=_t&&(ut||!f.hasTextData()||H);!f.collisionArrays&&X&&f.deserializeCollisionBoxes(X);var Ce=function(si,li){if(!o[si.crossTileID])if(U)s.placements[si.crossTileID]=new Zn(!1,!1,!1);else{var vi,ui=!1,lr=!1,xi=!0,hr=null,Ji={box:null,offscreen:null},$i={box:null,offscreen:null},br=null,rn=null,Yr=0,Er=0,ra=0;li.textFeatureIndex&&(Yr=li.textFeatureIndex),li.verticalTextFeatureIndex&&(Er=li.verticalTextFeatureIndex);var Bo=li.textBox;if(Bo){var Wa=function(Zi){var An=l.WritingMode.horizontal;if(f.allowVerticalPlacement&&!Zi&&s.prevPlacement){var $n=s.prevPlacement.placedOrientations[si.crossTileID];$n&&(s.placedOrientations[si.crossTileID]=$n,s.markUsedOrientation(f,An=$n,si))}return An},Fo=function(Zi,An){if(f.allowVerticalPlacement&&si.numVerticalGlyphVertices>0&&li.verticalTextBox)for(var $n=0,Uo=f.writingModes;$n<Uo.length&&(Uo[$n]===l.WritingMode.vertical?(Ji=An(),$i=Ji):Ji=Zi(),!(Ji&&Ji.box&&Ji.box.length));$n+=1);else Ji=Zi()};if(y.get("text-variable-anchor")){var na=y.get("text-variable-anchor");if(s.prevPlacement&&s.prevPlacement.variableOffsets[si.crossTileID]){var Ga=s.prevPlacement.variableOffsets[si.crossTileID];na.indexOf(Ga.anchor)>0&&(na=na.filter(function(Zi){return Zi!==Ga.anchor})).unshift(Ga.anchor)}var xo=function(Zi,An,$n){for(var Uo=Zi.x2-Zi.x1,ao=Zi.y2-Zi.y1,No=si.textBoxScale,wo=Ut&&!_t?An:null,Kn={box:[],offscreen:!1},jo=ut?2*na.length:na.length,zn=0;zn<jo;++zn){var Ss=s.attemptAnchorPlacement(na[zn%na.length],Zi,Uo,ao,No,St,Ct,L,g,G,zn>=na.length,si,f,$n,wo);if(Ss&&(Kn=Ss.placedGlyphBoxes)&&Kn.box&&Kn.box.length){ui=!0,hr=Ss.shift;break}}return Kn};Fo(function(){return xo(Bo,li.iconBox,l.WritingMode.horizontal)},function(){var Zi=li.verticalTextBox;return f.allowVerticalPlacement&&!(Ji&&Ji.box&&Ji.box.length)&&si.numVerticalGlyphVertices>0&&Zi?xo(Zi,li.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Ji&&(ui=Ji.box,xi=Ji.offscreen);var xs=Wa(Ji&&Ji.box);if(!ui&&s.prevPlacement){var us=s.prevPlacement.variableOffsets[si.crossTileID];us&&(s.variableOffsets[si.crossTileID]=us,s.markUsedJustification(f,us.anchor,si,xs))}}else{var za=function(Zi,An){var $n=s.collisionIndex.placeCollisionBox(Zi,ut,L,g,G.predicate);return $n&&$n.box&&$n.box.length&&(s.markUsedOrientation(f,An,si),s.placedOrientations[si.crossTileID]=An),$n};Fo(function(){return za(Bo,l.WritingMode.horizontal)},function(){var Zi=li.verticalTextBox;return f.allowVerticalPlacement&&si.numVerticalGlyphVertices>0&&Zi?za(Zi,l.WritingMode.vertical):{box:null,offscreen:null}}),Wa(Ji&&Ji.box&&Ji.box.length)}}ui=(vi=Ji)&&vi.box&&vi.box.length>0,xi=vi&&vi.offscreen;var bo=li.textCircles;if(bo){var bs=f.text.placedSymbolArray.get(si.centerJustifiedTextSymbolIndex),Pa=l.evaluateSizeForFeature(f.textSizeData,W,bs);br=s.collisionIndex.placeCollisionCircles(bo,ut,k,L,bs,f.lineVertexArray,f.glyphOffsetArray,Pa,g,S,n,Ct,G.predicate),ui=ut||br.circles.length>0,xi=xi&&br.offscreen}if(li.iconFeatureIndex&&(ra=li.iconFeatureIndex),li.iconBox){var cs=function(Zi){var An=Ut&&hr?qo(Zi,hr.x,hr.y,St,Ct,s.transform.angle):Zi;return s.collisionIndex.placeCollisionBox(An,_t,L,g,G.predicate)};lr=$i&&$i.box&&$i.box.length&&li.verticalIconBox?(rn=cs(li.verticalIconBox)).box.length>0:(rn=cs(li.iconBox)).box.length>0,xi=xi&&rn.offscreen}var ws=H||0===si.numHorizontalGlyphVertices&&0===si.numVerticalGlyphVertices,Xa=ft||0===si.numIconVertices;ws||Xa?Xa?ws||(lr=lr&&ui):ui=lr&&ui:lr=ui=lr&&ui,ui&&vi&&vi.box&&s.collisionIndex.insertCollisionBox(vi.box,y.get("text-ignore-placement"),f.bucketInstanceId,$i&&$i.box&&Er?Er:Yr,G.ID),lr&&rn&&s.collisionIndex.insertCollisionBox(rn.box,y.get("icon-ignore-placement"),f.bucketInstanceId,ra,G.ID),ui&&br&&s.collisionIndex.insertCollisionCircles(br.circles,y.get("text-ignore-placement"),f.bucketInstanceId,Yr,G.ID),s.placements[si.crossTileID]=new Zn(ui||le,lr||De,xi||f.justReloaded),o[si.crossTileID]=!0}};if(te)for(var $e=f.getSortedSymbolIndexes(this.transform.angle),Se=$e.length-1;Se>=0;--Se){var fi=$e[Se];Ce(f.symbolInstances.get(fi),f.collisionArrays[fi])}else for(var ni=r.symbolInstanceStart;ni<r.symbolInstanceEnd;ni++)Ce(f.symbolInstances.get(ni),f.collisionArrays[ni]);f.justReloaded=!1},pr.prototype.markUsedJustification=function(r,o,n,s){var p;p=s===l.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(o)];for(var y=0,g=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];y<g.length;y+=1){var S=g[y];S>=0&&(r.text.placedSymbolArray.get(S).crossTileID=p>=0&&S!==p?0:n.crossTileID)}},pr.prototype.markUsedOrientation=function(r,o,n){for(var s=o===l.WritingMode.horizontal||o===l.WritingMode.horizontalOnly?o:0,p=o===l.WritingMode.vertical?o:0,f=0,y=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];f<y.length;f+=1)r.text.placedSymbolArray.get(y[f]).placedOrientation=s;n.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=p)},pr.prototype.commit=function(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;var o=this.prevPlacement,n=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;var s=o?o.symbolFadeChange(r):1,p=o?o.opacities:{},f=o?o.variableOffsets:{},y=o?o.placedOrientations:{};for(var g in this.placements){var S=this.placements[g],k=p[g];k?(this.opacities[g]=new qn(k,s,S.text,S.icon),n=n||S.text!==k.text.placed||S.icon!==k.icon.placed):(this.opacities[g]=new qn(null,s,S.text,S.icon,S.skipFade),n=n||S.text||S.icon)}for(var L in p){var U=p[L];if(!this.opacities[L]){var X=new qn(U,s,!1,!1);X.isHidden()||(this.opacities[L]=X,n=n||U.text.placed||U.icon.placed)}}for(var W in f)this.variableOffsets[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.variableOffsets[W]=f[W]);for(var G in y)this.placedOrientations[G]||!this.opacities[G]||this.opacities[G].isHidden()||(this.placedOrientations[G]=y[G]);n?this.lastPlacementChangeTime=r:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:r)},pr.prototype.updateLayerOpacities=function(r,o){for(var n={},s=0,p=o;s<p.length;s+=1){var f=p[s],y=f.getBucket(r);y&&f.latestFeatureIndex&&r.id===y.layerIds[0]&&this.updateBucketOpacities(y,n,f.collisionBoxArray)}},pr.prototype.updateBucketOpacities=function(r,o,n){var s=this;r.hasTextData()&&r.text.opacityVertexArray.clear(),r.hasIconData()&&r.icon.opacityVertexArray.clear(),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear(),r.hasIconCollisionCircleData()&&r.iconCollisionCircle.collisionVertexArray.clear(),r.hasTextCollisionCircleData()&&r.textCollisionCircle.collisionVertexArray.clear();var p=r.layers[0].layout,f=new qn(null,0,!1,!1,!0),y=p.get("text-allow-overlap"),g=p.get("icon-allow-overlap"),S=p.get("text-variable-anchor"),k="map"===p.get("text-rotation-alignment"),L="map"===p.get("text-pitch-alignment"),U="none"!==p.get("icon-text-fit"),X=new qn(null,0,y&&(g||!r.hasIconData()||p.get("icon-optional")),g&&(y||!r.hasTextData()||p.get("text-optional")),!0);!r.collisionArrays&&n&&(r.hasIconCollisionBoxData()||r.hasIconCollisionCircleData()||r.hasTextCollisionBoxData()||r.hasTextCollisionCircleData())&&r.deserializeCollisionBoxes(n);for(var W=function(ft,ut,_t){for(var St=0;St<ut/4;St++)ft.opacityVertexArray.emplaceBack(_t)},G=function(ft){var ut=r.symbolInstances.get(ft),_t=ut.numHorizontalGlyphVertices,St=ut.numVerticalGlyphVertices,Ct=ut.crossTileID,Ut=o[Ct],te=s.opacities[Ct];Ut?te=f:te||(s.opacities[Ct]=te=X),o[Ct]=!0;var De=ut.numIconVertices>0,Ce=s.placedOrientations[ut.crossTileID],$e=Ce===l.WritingMode.vertical,Se=Ce===l.WritingMode.horizontal||Ce===l.WritingMode.horizontalOnly;if(_t>0||St>0){var fi=$r(te.text);W(r.text,_t,$e?ca:fi),W(r.text,St,Se?ca:fi);var li=te.text.isHidden();[ut.rightJustifiedTextSymbolIndex,ut.centerJustifiedTextSymbolIndex,ut.leftJustifiedTextSymbolIndex].forEach(function(Fo){Fo>=0&&(r.text.placedSymbolArray.get(Fo).hidden=li||$e?1:0)}),ut.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ut.verticalPlacedTextSymbolIndex).hidden=li||Se?1:0);var vi=s.variableOffsets[ut.crossTileID];vi&&s.markUsedJustification(r,vi.anchor,ut,Ce);var ui=s.placedOrientations[ut.crossTileID];ui&&(s.markUsedJustification(r,"left",ut,ui),s.markUsedOrientation(r,ui,ut))}if(De){var lr=$r(te.icon),xi=!(U&&ut.verticalPlacedIconSymbolIndex&&$e);ut.placedIconSymbolIndex>=0&&(W(r.icon,ut.numIconVertices,xi?lr:ca),r.icon.placedSymbolArray.get(ut.placedIconSymbolIndex).hidden=te.icon.isHidden()),ut.verticalPlacedIconSymbolIndex>=0&&(W(r.icon,ut.numVerticalIconVertices,xi?ca:lr),r.icon.placedSymbolArray.get(ut.verticalPlacedIconSymbolIndex).hidden=te.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasIconCollisionCircleData()||r.hasTextCollisionBoxData()||r.hasTextCollisionCircleData()){var $i=r.collisionArrays[ft];if($i){var br=new l.Point(0,0);if($i.textBox||$i.verticalTextBox){var rn=!0;if(S){var Yr=s.variableOffsets[Ct];Yr?(br=Ls(Yr.anchor,Yr.width,Yr.height,Yr.textOffset,Yr.textBoxScale),k&&br._rotate(L?s.transform.angle:-s.transform.angle)):rn=!1}$i.textBox&&xn(r.textCollisionBox.collisionVertexArray,te.text.placed,!rn||$e,br.x,br.y),$i.verticalTextBox&&xn(r.textCollisionBox.collisionVertexArray,te.text.placed,!rn||Se,br.x,br.y)}var Er=Boolean(!Se&&$i.verticalIconBox);$i.iconBox&&xn(r.iconCollisionBox.collisionVertexArray,te.icon.placed,Er,U?br.x:0,U?br.y:0),$i.verticalIconBox&&xn(r.iconCollisionBox.collisionVertexArray,te.icon.placed,!Er,U?br.x:0,U?br.y:0);var ra=$i.textCircles;if(ra&&r.hasTextCollisionCircleData())for(var Bo=0;Bo<ra.length;Bo+=5)xn(r.textCollisionCircle.collisionVertexArray,te.text.placed,Ut||0===ra[Bo+4])}}},H=0;H<r.symbolInstances.length;H++)G(H);r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.hasIconCollisionCircleData()&&r.iconCollisionCircle.collisionVertexBuffer&&r.iconCollisionCircle.collisionVertexBuffer.updateData(r.iconCollisionCircle.collisionVertexArray),r.hasTextCollisionCircleData()&&r.textCollisionCircle.collisionVertexBuffer&&r.textCollisionCircle.collisionVertexBuffer.updateData(r.textCollisionCircle.collisionVertexArray)},pr.prototype.symbolFadeChange=function(r){return 0===this.fadeDuration?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},pr.prototype.zoomAdjustment=function(r){return Math.max(0,(this.transform.zoom-r)/1.5)},pr.prototype.hasTransitions=function(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration},pr.prototype.stillRecent=function(r,o){var n=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*n>r},pr.prototype.setStale=function(){this.stale=!0};var Ea=Math.pow(2,25),lo=Math.pow(2,24),os=Math.pow(2,17),Do=Math.pow(2,16),Yo=Math.pow(2,9),as=Math.pow(2,8),Lo=Math.pow(2,1);function $r(r){if(0===r.opacity&&!r.placed)return 0;if(1===r.opacity&&r.placed)return 4294967295;var o=r.placed?1:0,n=Math.floor(127*r.opacity);return n*Ea+o*lo+n*os+o*Do+n*Yo+o*as+n*Lo+o}var ca=0,Ba=function(r){this._sortAcrossTiles="viewport-y"!==r.layout.get("symbol-z-order")&&void 0!==r.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ba.prototype.continuePlacement=function(r,o,n,s,p){for(var f=this._bucketParts;this._currentTileIndex<r.length;)if(o.getBucketParts(f,s,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,p())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,f.sort(function(S,k){return S.sortKey-k.sortKey}));this._currentPartIndex<f.length;)if(o.placeLayerBucketPart(f[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,p())return!0;return!1};var Ca=function(r,o,n,s,p,f,y){this.placement=new pr(r,p,f,y),this._currentPlacementIndex=o.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=s,this._done=!1};Ca.prototype.isDone=function(){return this._done},Ca.prototype.continuePlacement=function(r,o,n){for(var s=this,p=l.browser.now(),f=function(){var S=l.browser.now()-p;return!s._forceFullPlacement&&S>2};this._currentPlacementIndex>=0;){var y=o[r[this._currentPlacementIndex]],g=this.placement.collisionIndex.transform.zoom;if("symbol"===y.type&&(!y.minzoom||y.minzoom<=g)&&(!y.maxzoom||y.maxzoom>g)){if(this._inProgressLayer||(this._inProgressLayer=new Ba(y)),this._inProgressLayer.continuePlacement(n[y.source],this.placement,this._showCollisionBoxes,y,f))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ca.prototype.commit=function(r){return this.placement.commit(r),this.placement};var Os=512/l.EXTENT/2,Ia=function(r,o,n){this.tileID=r,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var s=0;s<o.length;s++){var p=o.get(s),f=p.key;this.indexedSymbolInstances[f]||(this.indexedSymbolInstances[f]=[]),this.indexedSymbolInstances[f].push({crossTileID:p.crossTileID,coord:this.getScaledCoordinates(p,r)})}};Ia.prototype.getScaledCoordinates=function(r,o){var s=Os/Math.pow(2,o.canonical.z-this.tileID.canonical.z);return{x:Math.floor((o.canonical.x*l.EXTENT+r.anchorX)*s),y:Math.floor((o.canonical.y*l.EXTENT+r.anchorY)*s)}},Ia.prototype.findMatches=function(r,o,n){for(var s=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z),p=0;p<r.length;p++){var f=r.get(p);if(!f.crossTileID){var y=this.indexedSymbolInstances[f.key];if(y)for(var g=this.getScaledCoordinates(f,o),S=0,k=y;S<k.length;S+=1){var L=k[S];if(Math.abs(L.coord.x-g.x)<=s&&Math.abs(L.coord.y-g.y)<=s&&!n[L.crossTileID]){n[L.crossTileID]=!0,f.crossTileID=L.crossTileID;break}}}}};var ko=function(){this.maxCrossTileID=0};ko.prototype.generate=function(){return++this.maxCrossTileID};var pa=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};pa.prototype.handleWrapJump=function(r){var o=Math.round((r-this.lng)/360);if(0!==o)for(var n in this.indexes){var s=this.indexes[n],p={};for(var f in s){var y=s[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+o),p[y.tileID.key]=y}this.indexes[n]=p}this.lng=r},pa.prototype.addBucket=function(r,o,n){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(var s=0;s<o.symbolInstances.length;s++)o.symbolInstances.get(s).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});var p=this.usedCrossTileIDs[r.overscaledZ];for(var f in this.indexes){var y=this.indexes[f];if(Number(f)>r.overscaledZ)for(var g in y){var S=y[g];S.tileID.isChildOf(r)&&S.findMatches(o.symbolInstances,r,p)}else{var k=y[r.scaledTo(Number(f)).key];k&&k.findMatches(o.symbolInstances,r,p)}}for(var L=0;L<o.symbolInstances.length;L++){var U=o.symbolInstances.get(L);U.crossTileID||(U.crossTileID=n.generate(),p[U.crossTileID]=!0)}return void 0===this.indexes[r.overscaledZ]&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ia(r,o.symbolInstances,o.bucketInstanceId),!0},pa.prototype.removeBucketCrossTileIDs=function(r,o){for(var n in o.indexedSymbolInstances)for(var s=0,p=o.indexedSymbolInstances[n];s<p.length;s+=1)delete this.usedCrossTileIDs[r][p[s].crossTileID]},pa.prototype.removeStaleBuckets=function(r){var o=!1;for(var n in this.indexes){var s=this.indexes[n];for(var p in s)r[s[p].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,s[p]),delete s[p],o=!0)}return o};var Qa=function(){this.layerIndexes={},this.crossTileIDs=new ko,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Qa.prototype.addLayer=function(r,o,n){var s=this.layerIndexes[r.id];void 0===s&&(s=this.layerIndexes[r.id]=new pa);var p=!1,f={};s.handleWrapJump(n);for(var y=0,g=o;y<g.length;y+=1){var S=g[y],k=S.getBucket(r);k&&r.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),s.addBucket(S.tileID,k,this.crossTileIDs)&&(p=!0),f[k.bucketInstanceId]=!0)}return s.removeStaleBuckets(f)&&(p=!0),p},Qa.prototype.pruneUnusedLayers=function(r){var o={};for(var n in r.forEach(function(s){o[s]=!0}),this.layerIndexes)o[n]||delete this.layerIndexes[n]};var ha=function(r,o){return l.emitValidationErrors(r,o&&o.filter(function(n){return"source.canvas"!==n.identifier}))},Ms=l.pick(nt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),gs=l.pick(nt,["setCenter","setZoom","setBearing","setPitch"]),ss=function(){var r={},o=l.styleSpec.$version;for(var n in l.styleSpec.$root){var p,s=l.styleSpec.$root[n];if(s.required)null!=(p="version"===n?o:"array"===s.type?[]:{})&&(r[n]=p)}return r}(),uo=function(r){function o(n,s){var p=this;void 0===s&&(s={}),r.call(this),this.map=n,this.dispatcher=new ht((K||(K=new j),K),this),this.imageManager=new Vt,this.imageManager.setEventedParent(this),this.glyphManager=new Ti(n._requestManager,s.localIdeographFontFamily),this.lineAtlas=new Ht(256,512),this.crossTileSymbolIndex=new Qa,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var f=this;this._rtlTextPluginCallback=o.registerForPluginStateChange(function(y){f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},function(S,k){if(l.triggerPluginCompletionEvent(S),k&&k.every(function(U){return U}))for(var L in f.sourceCaches)f.sourceCaches[L].reload()})}),this.on("data",function(y){if("source"===y.dataType&&"metadata"===y.sourceDataType){var g=p.sourceCaches[y.sourceId];if(g){var S=g.getSource();if(S&&S.vectorLayerIds)for(var k in p._layers){var L=p._layers[k];L.source===S.id&&p._validateLayer(L)}}}})}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.loadURL=function(n,s){var p=this;void 0===s&&(s={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var f="boolean"==typeof s.validate?s.validate:!l.isMapboxURL(n);n=this.map._requestManager.normalizeStyleURL(n,s.accessToken);var y=this.map._requestManager.transformRequest(n,l.ResourceType.Style);this._request=l.getJSON(y,function(g,S){p._request=null,g?p.fire(new l.ErrorEvent(g)):S&&p._load(S,f)})},o.prototype.loadJSON=function(n,s){var p=this;void 0===s&&(s={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){p._request=null,p._load(n,!1!==s.validate)})},o.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(ss,!1)},o.prototype._load=function(n,s){var p=this;if(!s||!ha(this,l.validateStyle(n))){for(var f in this._loaded=!0,this.stylesheet=n,n.sources)this.addSource(f,n.sources[f],{validate:!1});n.sprite?this._spriteRequest=function(L,U,X){var W,G,H,ft=l.browser.devicePixelRatio>1?"@2x":"",ut=l.getJSON(U.transformRequest(U.normalizeSpriteURL(L,ft,".json"),l.ResourceType.SpriteJSON),function(Ct,Ut){ut=null,H||(H=Ct,W=Ut,St())}),_t=l.getImage(U.transformRequest(U.normalizeSpriteURL(L,ft,".png"),l.ResourceType.SpriteImage),function(Ct,Ut){_t=null,H||(H=Ct,G=Ut,St())});function St(){if(H)X(H);else if(W&&G){var Ct=l.browser.getImageData(G),Ut={};for(var te in W){var le=W[te],De=le.width,Ce=le.height,$e=le.x,Se=le.y,fi=le.sdf,ni=le.pixelRatio,si=le.stretchX,li=le.stretchY,vi=le.content,ui=new l.RGBAImage({width:De,height:Ce});l.RGBAImage.copy(Ct,ui,{x:$e,y:Se},{x:0,y:0},{width:De,height:Ce}),Ut[te]={data:ui,pixelRatio:ni,sdf:fi,stretchX:si,stretchY:li,content:vi}}X(null,Ut)}}return{cancel:function(){ut&&(ut.cancel(),ut=null),_t&&(_t.cancel(),_t=null)}}}(n.sprite,this.map._requestManager,function(L,U){if(p._spriteRequest=null,L)p.fire(new l.ErrorEvent(L));else if(U)for(var X in U)p.imageManager.addImage(X,U[X]);p.imageManager.setLoaded(!0),p.dispatcher.broadcast("setImages",p.imageManager.listImages()),p.fire(new l.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(n.glyphs);var y=at(this.stylesheet.layers);this._order=y.map(function(L){return L.id}),this._layers={};for(var g=0,S=y;g<S.length;g+=1){var k=S[g];(k=l.createStyleLayer(k)).setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=k}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new zt(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},o.prototype._validateLayer=function(n){var s=this.sourceCaches[n.source];if(s){var p=n.sourceLayer;if(p){var f=s.getSource();("geojson"===f.type||f.vectorLayerIds&&-1===f.vectorLayerIds.indexOf(p))&&this.fire(new l.ErrorEvent(new Error('Source layer "'+p+'" does not exist on source "'+f.id+'" as specified by style layer "'+n.id+'"')))}}},o.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()},o.prototype._serializeLayers=function(n){for(var s=[],p=0,f=n;p<f.length;p+=1){var g=this._layers[f[p]];"custom"!==g.type&&s.push(g.serialize())}return s},o.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(var s in this._layers)if(this._layers[s].hasTransition())return!0;return!1},o.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},o.prototype.update=function(n){if(this._loaded){var s=this._changed;if(this._changed){var p=Object.keys(this._updatedLayers),f=Object.keys(this._removedLayers);for(var y in(p.length||f.length)&&this._updateWorkerLayers(p,f),this._updatedSources){var g=this._updatedSources[y];"reload"===g?this._reloadSource(y):"clear"===g&&this._clearSource(y)}for(var S in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[S].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}for(var k in this.sourceCaches)this.sourceCaches[k].used=!1;for(var L=0,U=this._order;L<U.length;L+=1){var W=this._layers[U[L]];W.recalculate(n,this.imageManager.listImages()),!W.isHidden(n.zoom)&&W.source&&(this.sourceCaches[W.source].used=!0)}this.light.recalculate(n),this.z=n.zoom,s&&this.fire(new l.Event("data",{dataType:"style"}))}},o.prototype._updateTilesForChangedImages=function(){var n=Object.keys(this._changedImages);if(n.length){for(var s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}},o.prototype._updateWorkerLayers=function(n,s){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(n),removedIds:s})},o.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},o.prototype.setState=function(n){var s=this;if(this._checkLoaded(),ha(this,l.validateStyle(n)))return!1;(n=l.clone$1(n)).layers=at(n.layers);var p=function Be(r,o){if(!r)return[{command:nt.setStyle,args:[o]}];var n=[];try{if(!l.deepEqual(r.version,o.version))return[{command:nt.setStyle,args:[o]}];l.deepEqual(r.center,o.center)||n.push({command:nt.setCenter,args:[o.center]}),l.deepEqual(r.zoom,o.zoom)||n.push({command:nt.setZoom,args:[o.zoom]}),l.deepEqual(r.bearing,o.bearing)||n.push({command:nt.setBearing,args:[o.bearing]}),l.deepEqual(r.pitch,o.pitch)||n.push({command:nt.setPitch,args:[o.pitch]}),l.deepEqual(r.sprite,o.sprite)||n.push({command:nt.setSprite,args:[o.sprite]}),l.deepEqual(r.glyphs,o.glyphs)||n.push({command:nt.setGlyphs,args:[o.glyphs]}),l.deepEqual(r.transition,o.transition)||n.push({command:nt.setTransition,args:[o.transition]}),l.deepEqual(r.light,o.light)||n.push({command:nt.setLight,args:[o.light]});var s={},p=[];!function(y,g,S,k){var L;for(L in g=g||{},y=y||{})y.hasOwnProperty(L)&&(g.hasOwnProperty(L)||Ot(L,S,k));for(L in g)g.hasOwnProperty(L)&&(y.hasOwnProperty(L)?l.deepEqual(y[L],g[L])||("geojson"===y[L].type&&"geojson"===g[L].type&&Nt(y,g,L)?S.push({command:nt.setGeoJSONSourceData,args:[L,g[L].data]}):jt(L,g,S,k)):tt(L,g,S))}(r.sources,o.sources,p,s);var f=[];r.layers&&r.layers.forEach(function(y){s[y.source]?n.push({command:nt.removeLayer,args:[y.id]}):f.push(y)}),n=n.concat(p),function(y,g,S){g=g||[];var k,L,U,X,W,G,H,ft=(y=y||[]).map(he),ut=g.map(he),_t=y.reduce(qe,{}),St=g.reduce(qe,{}),Ct=ft.slice(),Ut=Object.create(null);for(k=0,L=0;k<ft.length;k++)St.hasOwnProperty(U=ft[k])?L++:(S.push({command:nt.removeLayer,args:[U]}),Ct.splice(Ct.indexOf(U,L),1));for(k=0,L=0;k<ut.length;k++)Ct[Ct.length-1-k]!==(U=ut[ut.length-1-k])&&(_t.hasOwnProperty(U)?(S.push({command:nt.removeLayer,args:[U]}),Ct.splice(Ct.lastIndexOf(U,Ct.length-L),1)):L++,S.push({command:nt.addLayer,args:[St[U],G=Ct[Ct.length-k]]}),Ct.splice(Ct.length-k,0,U),Ut[U]=!0);for(k=0;k<ut.length;k++)if(X=_t[U=ut[k]],W=St[U],!Ut[U]&&!l.deepEqual(X,W))if(l.deepEqual(X.source,W.source)&&l.deepEqual(X["source-layer"],W["source-layer"])&&l.deepEqual(X.type,W.type)){for(H in fe(X.layout,W.layout,S,U,null,nt.setLayoutProperty),fe(X.paint,W.paint,S,U,null,nt.setPaintProperty),l.deepEqual(X.filter,W.filter)||S.push({command:nt.setFilter,args:[U,W.filter]}),l.deepEqual(X.minzoom,W.minzoom)&&l.deepEqual(X.maxzoom,W.maxzoom)||S.push({command:nt.setLayerZoomRange,args:[U,W.minzoom,W.maxzoom]}),X)X.hasOwnProperty(H)&&"layout"!==H&&"paint"!==H&&"filter"!==H&&"metadata"!==H&&"minzoom"!==H&&"maxzoom"!==H&&(0===H.indexOf("paint.")?fe(X[H],W[H],S,U,H.slice(6),nt.setPaintProperty):l.deepEqual(X[H],W[H])||S.push({command:nt.setLayerProperty,args:[U,H,W[H]]}));for(H in W)W.hasOwnProperty(H)&&!X.hasOwnProperty(H)&&"layout"!==H&&"paint"!==H&&"filter"!==H&&"metadata"!==H&&"minzoom"!==H&&"maxzoom"!==H&&(0===H.indexOf("paint.")?fe(X[H],W[H],S,U,H.slice(6),nt.setPaintProperty):l.deepEqual(X[H],W[H])||S.push({command:nt.setLayerProperty,args:[U,H,W[H]]}))}else S.push({command:nt.removeLayer,args:[U]}),G=Ct[Ct.lastIndexOf(U)+1],S.push({command:nt.addLayer,args:[W,G]})}(f,o.layers,n)}catch(y){console.warn("Unable to compute style diff:",y),n=[{command:nt.setStyle,args:[o]}]}return n}(this.serialize(),n).filter(function(y){return!(y.command in gs)});if(0===p.length)return!1;var f=p.filter(function(y){return!(y.command in Ms)});if(f.length>0)throw new Error("Unimplemented: "+f.map(function(y){return y.command}).join(", ")+".");return p.forEach(function(y){"setTransition"!==y.command&&s[y.command].apply(s,y.args)}),this.stylesheet=n,!0},o.prototype.addImage=function(n,s){if(this.getImage(n))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(n,s),this._changedImages[n]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},o.prototype.updateImage=function(n,s){this.imageManager.updateImage(n,s)},o.prototype.getImage=function(n){return this.imageManager.getImage(n)},o.prototype.removeImage=function(n){if(!this.getImage(n))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(n),this._changedImages[n]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},o.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},o.prototype.addSource=function(n,s,p){var f=this;if(void 0===p&&(p={}),this._checkLoaded(),void 0!==this.sourceCaches[n])throw new Error("There is already a source with this ID");if(!s.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(s).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(l.validateStyle.source,"sources."+n,s,null,p))){this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);var y=this.sourceCaches[n]=new ir(n,s,this.dispatcher);y.style=this,y.setEventedParent(this,function(){return{isSourceLoaded:f.loaded(),source:y.serialize(),sourceId:n}}),y.onAdd(this.map),this._changed=!0}},o.prototype.removeSource=function(n){if(this._checkLoaded(),void 0===this.sourceCaches[n])throw new Error("There is no source with this ID");for(var s in this._layers)if(this._layers[s].source===n)return this.fire(new l.ErrorEvent(new Error('Source "'+n+'" cannot be removed while layer "'+s+'" is using it.')));var p=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],p.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),p.setEventedParent(null),p.clearTiles(),p.onRemove&&p.onRemove(this.map),this._changed=!0},o.prototype.setGeoJSONSourceData=function(n,s){this._checkLoaded(),this.sourceCaches[n].getSource().setData(s),this._changed=!0},o.prototype.getSource=function(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()},o.prototype.addLayer=function(n,s,p){void 0===p&&(p={}),this._checkLoaded();var f=n.id;if(this.getLayer(f))this.fire(new l.ErrorEvent(new Error('Layer with id "'+f+'" already exists on this map')));else{var y;if("custom"===n.type){if(ha(this,l.validateCustomStyleLayer(n)))return;y=l.createStyleLayer(n)}else{if("object"==typeof n.source&&(this.addSource(f,n.source),n=l.clone$1(n),n=l.extend(n,{source:f})),this._validate(l.validateStyle.layer,"layers."+f,n,{arrayIndex:-1},p))return;y=l.createStyleLayer(n),this._validateLayer(y),y.setEventedParent(this,{layer:{id:f}})}var g=s?this._order.indexOf(s):this._order.length;if(s&&-1===g)this.fire(new l.ErrorEvent(new Error('Layer with id "'+s+'" does not exist on this map.')));else{if(this._order.splice(g,0,f),this._layerOrderChanged=!0,this._layers[f]=y,this._removedLayers[f]&&y.source&&"custom"!==y.type){var S=this._removedLayers[f];delete this._removedLayers[f],S.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}},o.prototype.moveLayer=function(n,s){if(this._checkLoaded(),this._changed=!0,this._layers[n]){if(n!==s){var p=this._order.indexOf(n);this._order.splice(p,1);var f=s?this._order.indexOf(s):this._order.length;s&&-1===f?this.fire(new l.ErrorEvent(new Error('Layer with id "'+s+'" does not exist on this map.'))):(this._order.splice(f,0,n),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style and cannot be moved.")))},o.prototype.removeLayer=function(n){this._checkLoaded();var s=this._layers[n];if(s){s.setEventedParent(null);var p=this._order.indexOf(n);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=s,delete this._layers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],s.onRemove&&s.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style and cannot be removed.")))},o.prototype.getLayer=function(n){return this._layers[n]},o.prototype.setLayerZoomRange=function(n,s,p){this._checkLoaded();var f=this.getLayer(n);f?f.minzoom===s&&f.maxzoom===p||(null!=s&&(f.minzoom=s),null!=p&&(f.maxzoom=p),this._updateLayer(f)):this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style and cannot have zoom extent.")))},o.prototype.setFilter=function(n,s,p){void 0===p&&(p={}),this._checkLoaded();var f=this.getLayer(n);if(f){if(!l.deepEqual(f.filter,s))return null==s?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(l.validateStyle.filter,"layers."+f.id+".filter",s,null,p)||(f.filter=l.clone$1(s),this._updateLayer(f)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style and cannot be filtered.")))},o.prototype.getFilter=function(n){return l.clone$1(this.getLayer(n).filter)},o.prototype.setLayoutProperty=function(n,s,p,f){void 0===f&&(f={}),this._checkLoaded();var y=this.getLayer(n);y?l.deepEqual(y.getLayoutProperty(s),p)||(y.setLayoutProperty(s,p,f),this._updateLayer(y)):this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style and cannot be styled.")))},o.prototype.getLayoutProperty=function(n,s){var p=this.getLayer(n);if(p)return p.getLayoutProperty(s);this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style.")))},o.prototype.setPaintProperty=function(n,s,p,f){void 0===f&&(f={}),this._checkLoaded();var y=this.getLayer(n);y?l.deepEqual(y.getPaintProperty(s),p)||(y.setPaintProperty(s,p,f)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style and cannot be styled.")))},o.prototype.getPaintProperty=function(n,s){return this.getLayer(n).getPaintProperty(s)},o.prototype.setFeatureState=function(n,s){this._checkLoaded();var p=n.source,f=n.sourceLayer,y=this.sourceCaches[p];if(void 0!==y){var g=y.getSource().type;"geojson"===g&&f?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==g||f?(void 0===n.id&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),y.setFeatureState(f,n.id,s)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+p+"' does not exist in the map's style.")))},o.prototype.removeFeatureState=function(n,s){this._checkLoaded();var p=n.source,f=this.sourceCaches[p];if(void 0!==f){var y=f.getSource().type,g="vector"===y?n.sourceLayer:void 0;"vector"!==y||g?s&&"string"!=typeof n.id&&"number"!=typeof n.id?this.fire(new l.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):f.removeFeatureState(g,n.id,s):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+p+"' does not exist in the map's style.")))},o.prototype.getFeatureState=function(n){this._checkLoaded();var s=n.source,p=n.sourceLayer,f=this.sourceCaches[s];if(void 0!==f){if("vector"!==f.getSource().type||p)return void 0===n.id&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),f.getFeatureState(p,n.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+s+"' does not exist in the map's style.")))},o.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},o.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(n){return n.serialize()}),layers:this._serializeLayers(this._order)},function(n){return void 0!==n})},o.prototype._updateLayer=function(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&"raster"!==this.sourceCaches[n.source].getSource().type&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._changed=!0},o.prototype._flattenAndSortRenderedFeatures=function(n){for(var s=this,p=function($e){return"fill-extrusion"===s._layers[$e].type},f={},y=[],g=this._order.length-1;g>=0;g--){var S=this._order[g];if(p(S)){f[S]=g;for(var k=0,L=n;k<L.length;k+=1){var U=L[k][S];if(U)for(var X=0,W=U;X<W.length;X+=1)y.push(W[X])}}}y.sort(function($e,Se){return Se.intersectionZ-$e.intersectionZ});for(var H=[],ft=this._order.length-1;ft>=0;ft--){var ut=this._order[ft];if(p(ut))for(var _t=y.length-1;_t>=0;_t--){var St=y[_t].feature;if(f[St.layer.id]<ft)break;H.push(St),y.pop()}else for(var Ct=0,Ut=n;Ct<Ut.length;Ct+=1){var te=Ut[Ct][ut];if(te)for(var le=0,De=te;le<De.length;le+=1)H.push(De[le].feature)}}return H},o.prototype.queryRenderedFeatures=function(n,s,p){s&&s.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",s.filter,null,s);var f={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var y=0,g=s.layers;y<g.length;y+=1){var S=g[y],k=this._layers[S];if(!k)return this.fire(new l.ErrorEvent(new Error("The layer '"+S+"' does not exist in the map's style and cannot be queried for features."))),[];f[k.source]=!0}}var L=[];for(var U in this.sourceCaches)s.layers&&!f[U]||L.push(Hr(this.sourceCaches[U],this._layers,n,s,p));return this.placement&&L.push(function(X,W,G,H,ft,ut){for(var _t={},St=ft.queryRenderedSymbols(G),Ct=[],Ut=0,te=Object.keys(St).map(Number);Ut<te.length;Ut+=1)Ct.push(ut[te[Ut]]);Ct.sort(Tr);for(var De=function(){var ni=$e[Ce],si=ni.featureIndex.lookupSymbolFeatures(St[ni.bucketInstanceId],ni.bucketIndex,ni.sourceLayerIndex,H.filter,H.layers,X);for(var li in si){var vi=_t[li]=_t[li]||[],ui=si[li];ui.sort(function(Ji,$i){var br=ni.featureSortOrder;if(br){var rn=br.indexOf(Ji.featureIndex);return br.indexOf($i.featureIndex)-rn}return $i.featureIndex-Ji.featureIndex});for(var lr=0,xi=ui;lr<xi.length;lr+=1)vi.push(xi[lr])}},Ce=0,$e=Ct;Ce<$e.length;Ce+=1)De();var Se=function(ni){_t[ni].forEach(function(si){var li=si.feature,ui=W[X[ni].source].getFeatureState(li.layer["source-layer"],li.id);li.source=li.layer.source,li.layer["source-layer"]&&(li.sourceLayer=li.layer["source-layer"]),li.state=ui})};for(var fi in _t)Se(fi);return _t}(this._layers,this.sourceCaches,n,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(L)},o.prototype.querySourceFeatures=function(n,s){s&&s.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",s.filter,null,s);var p=this.sourceCaches[n];return p?function(f,y){for(var g=f.getRenderableIds().map(function(W){return f.getTileByID(W)}),S=[],k={},L=0;L<g.length;L++){var U=g[L],X=U.tileID.canonical.key;k[X]||(k[X]=!0,U.querySourceFeatures(S,y))}return S}(p,s):[]},o.prototype.addSourceType=function(n,s,p){return o.getSourceType(n)?p(new Error('A source type called "'+n+'" already exists.')):(o.setSourceType(n,s),s.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:s.workerSourceURL},p):p(null,null))},o.prototype.getLight=function(){return this.light.getLight()},o.prototype.setLight=function(n,s){void 0===s&&(s={}),this._checkLoaded();var p=this.light.getLight(),f=!1;for(var y in n)if(!l.deepEqual(n[y],p[y])){f=!0;break}if(f){var g={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,s),this.light.updateTransitions(g)}},o.prototype._validate=function(n,s,p,f,y){return void 0===y&&(y={}),(!y||!1!==y.validate)&&ha(this,n.call(l.validateStyle,l.extend({key:s,style:this.serialize(),value:p,styleSpec:l.styleSpec},f)))},o.prototype._remove=function(){for(var n in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[n].setEventedParent(null);for(var s in this.sourceCaches)this.sourceCaches[s].clearTiles(),this.sourceCaches[s].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},o.prototype._clearSource=function(n){this.sourceCaches[n].clearTiles()},o.prototype._reloadSource=function(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()},o.prototype._updateSources=function(n){for(var s in this.sourceCaches)this.sourceCaches[s].update(n)},o.prototype._generateCollisionBoxes=function(){for(var n in this.sourceCaches)this._reloadSource(n)},o.prototype._updatePlacement=function(n,s,p,f,y){void 0===y&&(y=!1);for(var g=!1,S=!1,k={},L=0,U=this._order;L<U.length;L+=1){var W=this._layers[U[L]];if("symbol"===W.type){if(!k[W.source]){var G=this.sourceCaches[W.source];k[W.source]=G.getRenderableIds(!0).map(function(Ct){return G.getTileByID(Ct)}).sort(function(Ct,Ut){return Ut.tileID.overscaledZ-Ct.tileID.overscaledZ||(Ct.tileID.isLessThan(Ut.tileID)?-1:1)})}var H=this.crossTileSymbolIndex.addLayer(W,k[W.source],n.center.lng);g=g||H}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||0===p)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),n.zoom))&&(this.pauseablePlacement=new Ca(n,this._order,y,s,p,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),S=!0),g&&this.pauseablePlacement.placement.setStale()),S||g)for(var ft=0,ut=this._order;ft<ut.length;ft+=1){var St=this._layers[ut[ft]];"symbol"===St.type&&this.placement.updateLayerOpacities(St,k[St.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},o.prototype._releaseSymbolFadeTiles=function(){for(var n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()},o.prototype.getImages=function(n,s,p){this.imageManager.getImages(s.icons,p),this._updateTilesForChangedImages();var f=this.sourceCaches[s.source];f&&f.setDependencies(s.tileID.key,s.type,s.icons)},o.prototype.getGlyphs=function(n,s,p){this.glyphManager.getGlyphs(s.stacks,p)},o.prototype.getResource=function(n,s,p){return l.makeRequest(s,p)},o}(l.Evented);uo.getSourceType=function(r){return Ri[r]},uo.setSourceType=function(r,o){Ri[r]=o},uo.registerForPluginStateChange=l.registerForPluginStateChange;var go=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),ka=gi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),aa=gi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rs=gi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Oa=gi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Fa=gi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),w=gi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),z=gi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),V=gi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Z=gi("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),dt=gi("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),bt=gi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),At=gi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Xt=gi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ie=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ge=gi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Xe=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),pi=gi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),je=gi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ge=gi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Ki=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),xr=gi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),Yi=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ro=gi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),En=gi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Gn=gi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),sn=gi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function gi(r,o){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,s={};return{fragmentSource:r=r.replace(n,function(p,f,y,g,S){return s[S]=!0,"define"===f?"\n#ifndef HAS_UNIFORM_u_"+S+"\nvarying "+y+" "+g+" "+S+";\n#else\nuniform "+y+" "+g+" u_"+S+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+S+"\n    "+y+" "+g+" "+S+" = u_"+S+";\n#endif\n"}),vertexSource:o=o.replace(n,function(p,f,y,g,S){var k="float"===g?"vec2":"vec4",L=S.match(/color/)?"color":k;return s[S]?"define"===f?"\n#ifndef HAS_UNIFORM_u_"+S+"\nuniform lowp float u_"+S+"_t;\nattribute "+y+" "+k+" a_"+S+";\nvarying "+y+" "+g+" "+S+";\n#else\nuniform "+y+" "+g+" u_"+S+";\n#endif\n":"vec4"===L?"\n#ifndef HAS_UNIFORM_u_"+S+"\n    "+S+" = a_"+S+";\n#else\n    "+y+" "+g+" "+S+" = u_"+S+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+S+"\n    "+S+" = unpack_mix_"+L+"(a_"+S+", u_"+S+"_t);\n#else\n    "+y+" "+g+" "+S+" = u_"+S+";\n#endif\n":"define"===f?"\n#ifndef HAS_UNIFORM_u_"+S+"\nuniform lowp float u_"+S+"_t;\nattribute "+y+" "+k+" a_"+S+";\n#else\nuniform "+y+" "+g+" u_"+S+";\n#endif\n":"vec4"===L?"\n#ifndef HAS_UNIFORM_u_"+S+"\n    "+y+" "+g+" "+S+" = a_"+S+";\n#else\n    "+y+" "+g+" "+S+" = u_"+S+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+S+"\n    "+y+" "+g+" "+S+" = unpack_mix_"+L+"(a_"+S+", u_"+S+"_t);\n#else\n    "+y+" "+g+" "+S+" = u_"+S+";\n#endif\n"})}}var Ho=Object.freeze({__proto__:null,prelude:ka,background:aa,backgroundPattern:Rs,circle:Oa,clippingMask:Fa,heatmap:w,heatmapTexture:z,collisionBox:V,collisionCircle:Z,debug:dt,fill:bt,fillOutline:At,fillOutlinePattern:Xt,fillPattern:ie,fillExtrusion:ge,fillExtrusionPattern:Xe,hillshadePrepare:pi,hillshade:je,line:Ge,lineGradient:Ki,linePattern:xr,lineSDF:Yi,raster:ro,symbolIcon:En,symbolSDF:Gn,symbolTextAndIcon:sn}),Wr=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Wr.prototype.bind=function(r,o,n,s,p,f,y,g){this.context=r;for(var S=this.boundPaintVertexBuffers.length!==s.length,k=0;!S&&k<s.length;k++)this.boundPaintVertexBuffers[k]!==s[k]&&(S=!0);r.extVertexArrayObject&&this.vao&&this.boundProgram===o&&this.boundLayoutVertexBuffer===n&&!S&&this.boundIndexBuffer===p&&this.boundVertexOffset===f&&this.boundDynamicVertexBuffer===y&&this.boundDynamicVertexBuffer2===g?(r.bindVertexArrayOES.set(this.vao),y&&y.bind(),p&&p.dynamicDraw&&p.bind(),g&&g.bind()):this.freshBind(o,n,s,p,f,y,g)},Wr.prototype.freshBind=function(r,o,n,s,p,f,y){var g,S=r.numAttributes,k=this.context,L=k.gl;if(k.extVertexArrayObject)this.vao&&this.destroy(),this.vao=k.extVertexArrayObject.createVertexArrayOES(),k.bindVertexArrayOES.set(this.vao),g=0,this.boundProgram=r,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=s,this.boundVertexOffset=p,this.boundDynamicVertexBuffer=f,this.boundDynamicVertexBuffer2=y;else{g=k.currentNumAttributes||0;for(var U=S;U<g;U++)L.disableVertexAttribArray(U)}o.enableAttributes(L,r);for(var X=0,W=n;X<W.length;X+=1)W[X].enableAttributes(L,r);f&&f.enableAttributes(L,r),y&&y.enableAttributes(L,r),o.bind(),o.setVertexAttribPointers(L,r,p);for(var G=0,H=n;G<H.length;G+=1){var ft=H[G];ft.bind(),ft.setVertexAttribPointers(L,r,p)}f&&(f.bind(),f.setVertexAttribPointers(L,r,p)),s&&s.bind(),y&&(y.bind(),y.setVertexAttribPointers(L,r,p)),k.currentNumAttributes=S},Wr.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ln=function(r,o,n,s,p){var f=r.gl;this.program=f.createProgram();var y=n.defines();p&&y.push("#define OVERDRAW_INSPECTOR;");var g=y.concat(ka.fragmentSource,o.fragmentSource).join("\n"),S=y.concat(ka.vertexSource,o.vertexSource).join("\n"),k=f.createShader(f.FRAGMENT_SHADER);if(f.isContextLost())this.failedToCreate=!0;else{f.shaderSource(k,g),f.compileShader(k),f.attachShader(this.program,k);var L=f.createShader(f.VERTEX_SHADER);if(f.isContextLost())this.failedToCreate=!0;else{f.shaderSource(L,S),f.compileShader(L),f.attachShader(this.program,L);for(var U=n.layoutAttributes||[],X=0;X<U.length;X++)f.bindAttribLocation(this.program,X,U[X].name);f.linkProgram(this.program),this.numAttributes=f.getProgramParameter(this.program,f.ACTIVE_ATTRIBUTES),this.attributes={};for(var W={},G=0;G<this.numAttributes;G++){var H=f.getActiveAttrib(this.program,G);H&&(this.attributes[H.name]=f.getAttribLocation(this.program,H.name))}for(var ft=f.getProgramParameter(this.program,f.ACTIVE_UNIFORMS),ut=0;ut<ft;ut++){var _t=f.getActiveUniform(this.program,ut);_t&&(W[_t.name]=f.getUniformLocation(this.program,_t.name))}this.fixedUniforms=s(r,W),this.binderUniforms=n.getUniforms(r,W)}}};function Aa(r,o,n){var s=1/Ar(n,1,o.transform.tileZoom),p=Math.pow(2,n.tileID.overscaledZ),f=n.tileSize*Math.pow(2,o.transform.tileZoom)/p,y=f*(n.tileID.canonical.x+n.tileID.wrap*p),g=f*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[l.browser.devicePixelRatio,s,r.fromScale,r.toScale],u_fade:r.t,u_pixel_coord_upper:[y>>16,g>>16],u_pixel_coord_lower:[65535&y,65535&g]}}ln.prototype.draw=function(r,o,n,s,p,f,y,g,S,k,L,U,X,W,G,H){var ft,ut=r.gl;if(!this.failedToCreate){for(var _t in r.program.set(this.program),r.setDepthMode(n),r.setStencilMode(s),r.setColorMode(p),r.setCullFace(f),this.fixedUniforms)this.fixedUniforms[_t].set(y[_t]);W&&W.setUniforms(r,this.binderUniforms,U,{zoom:X});for(var St=(ft={},ft[ut.LINES]=2,ft[ut.TRIANGLES]=3,ft[ut.LINE_STRIP]=1,ft)[o],Ct=0,Ut=L.get();Ct<Ut.length;Ct+=1){var te=Ut[Ct],le=te.vaos||(te.vaos={});(le[g]||(le[g]=new Wr)).bind(r,this,S,W?W.getPaintVertexBuffers():[],k,te.vertexOffset,G,H),ut.drawElements(o,te.primitiveLength*St,ut.UNSIGNED_SHORT,te.primitiveOffset*St*2)}}};var Oo=function(r,o,n,s){var p=o.style.light,f=p.properties.get("position"),y=[f.x,f.y,f.z],g=l.create$1();"viewport"===p.properties.get("anchor")&&l.fromRotation(g,-o.transform.angle),l.transformMat3(y,y,g);var S=p.properties.get("color");return{u_matrix:r,u_lightpos:y,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[S.r,S.g,S.b],u_vertical_gradient:+n,u_opacity:s}},Qn=function(r,o,n,s,p,f,y){return l.extend(Oo(r,o,n,s),Aa(f,o,y),{u_height_factor:-Math.pow(2,p.overscaledZ)/y.tileSize/8})},sa=function(r){return{u_matrix:r}},Zo=function(r,o,n,s){return l.extend(sa(r),Aa(n,o,s))},er=function(r,o){return{u_matrix:r,u_world:o}},Wo=function(r,o,n,s,p){return l.extend(Zo(r,o,n,s),{u_world:p})},Ta=function(r,o,n,s){var p,f,y=r.transform;if("map"===s.paint.get("circle-pitch-alignment")){var g=Ar(n,1,y.zoom);p=!0,f=[g,g]}else p=!1,f=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+("map"===s.paint.get("circle-pitch-scale")),u_matrix:r.translatePosMatrix(o.posMatrix,n,s.paint.get("circle-translate"),s.paint.get("circle-translate-anchor")),u_pitch_with_map:+p,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:f}},un=function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_camera_to_center_distance:new l.Uniform1f(r,o.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(r,o.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(r,o.u_extrude_scale),u_overscale_factor:new l.Uniform1f(r,o.u_overscale_factor)}},da=function(r,o,n){var s=Ar(n,1,o.zoom),p=Math.pow(2,o.zoom-n.tileID.overscaledZ),f=n.tileID.overscaleFactor();return{u_matrix:r,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:s,u_extrude_scale:[o.pixelsToGLUnits[0]/(s*p),o.pixelsToGLUnits[1]/(s*p)],u_overscale_factor:f}},Ao=function(r,o){return{u_matrix:r,u_color:o}},Jo=function(r){return{u_matrix:r}},Kr=function(r,o,n,s){return{u_matrix:r,u_extrude_scale:Ar(o,1,n),u_intensity:s}};function Hn(r,o){var n=Math.pow(2,o.canonical.z),s=o.canonical.y;return[new l.MercatorCoordinate(0,s/n).toLngLat().lat,new l.MercatorCoordinate(0,(s+1)/n).toLngLat().lat]}var Xn=function(r,o,n){var s=r.transform;return{u_matrix:Ua(r,o,n),u_ratio:1/Ar(o,1,s.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]]}},ts=function(r,o,n){return l.extend(Xn(r,o,n),{u_image:0})},Qo=function(r,o,n,s){var p=r.transform,f=es(o,p);return{u_matrix:Ua(r,o,n),u_texsize:o.imageAtlasTexture.size,u_ratio:1/Ar(o,1,p.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[l.browser.devicePixelRatio,f,s.fromScale,s.toScale],u_fade:s.t,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},eo=function(r,o,n,s,p){var y=r.lineAtlas,g=es(o,r.transform),S="round"===n.layout.get("line-cap"),k=y.getDash(s.from,S),L=y.getDash(s.to,S),U=k.width*p.fromScale,X=L.width*p.toScale;return l.extend(Xn(r,o,n),{u_patternscale_a:[g/U,-k.height/2],u_patternscale_b:[g/X,-L.height/2],u_sdfgamma:y.width/(256*Math.min(U,X)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:L.y,u_mix:p.t})};function es(r,o){return 1/Ar(r,1,o.tileZoom)}function Ua(r,o,n){return r.translatePosMatrix(o.tileID.posMatrix,o,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var vs=function(r,o,n,s,p){return{u_matrix:r,u_tl_parent:o,u_scale_parent:n,u_buffer_scale:1,u_fade_t:s.mix,u_opacity:s.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(y=p.paint.get("raster-saturation"),y>0?1-1/(1.001-y):-y),u_contrast_factor:(f=p.paint.get("raster-contrast"),f>0?1/(1-f):1+f),u_spin_weights:Go(p.paint.get("raster-hue-rotate"))};var f,y};function Go(r){r*=Math.PI/180;var o=Math.sin(r),n=Math.cos(r);return[(2*n+1)/3,(-Math.sqrt(3)*o-n+1)/3,(Math.sqrt(3)*o-n+1)/3]}var Na=function(r,o,n,s,p,f,y,g,S,k){var L=p.transform;return{u_is_size_zoom_constant:+("constant"===r||"source"===r),u_is_size_feature_constant:+("constant"===r||"camera"===r),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:L.cameraToCenterDistance,u_pitch:L.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:L.width/L.height,u_fade_change:p.options.fadeDuration?p.symbolFadeChange:1,u_matrix:f,u_label_plane_matrix:y,u_coord_matrix:g,u_is_text:+S,u_pitch_with_map:+s,u_texsize:k,u_texture:0}},is=function(r,o,n,s,p,f,y,g,S,k,L){var U=p.transform;return l.extend(Na(r,o,n,s,p,f,y,g,S,k),{u_gamma_scale:s?Math.cos(U._pitch)*U.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+L})},ja=function(r,o,n,s,p,f,y,g,S,k){return l.extend(is(r,o,n,s,p,f,y,g,!0,S,!0),{u_texsize_icon:k,u_texture_icon:1})},rs=function(r,o,n){return{u_matrix:r,u_opacity:o,u_color:n}},Bs=function(r,o,n,s,p,f){return l.extend((g=f,k=p,L=(S=n).imageManager.getPattern((y=s).from.toString()),U=S.imageManager.getPattern(y.to.toString()),W=(X=S.imageManager.getPixelSize()).width,G=X.height,H=Math.pow(2,k.tileID.overscaledZ),ut=(ft=k.tileSize*Math.pow(2,S.transform.tileZoom)/H)*(k.tileID.canonical.x+k.tileID.wrap*H),_t=ft*k.tileID.canonical.y,{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[W,G],u_mix:g.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:g.fromScale,u_scale_b:g.toScale,u_tile_units_to_pixels:1/Ar(k,1,S.transform.tileZoom),u_pixel_coord_upper:[ut>>16,_t>>16],u_pixel_coord_lower:[65535&ut,65535&_t]}),{u_matrix:r,u_opacity:o});var y,g,S,k,L,U,X,W,G,H,ft,ut,_t},Xo={fillExtrusion:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_lightpos:new l.Uniform3f(r,o.u_lightpos),u_lightintensity:new l.Uniform1f(r,o.u_lightintensity),u_lightcolor:new l.Uniform3f(r,o.u_lightcolor),u_vertical_gradient:new l.Uniform1f(r,o.u_vertical_gradient),u_opacity:new l.Uniform1f(r,o.u_opacity)}},fillExtrusionPattern:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_lightpos:new l.Uniform3f(r,o.u_lightpos),u_lightintensity:new l.Uniform1f(r,o.u_lightintensity),u_lightcolor:new l.Uniform3f(r,o.u_lightcolor),u_vertical_gradient:new l.Uniform1f(r,o.u_vertical_gradient),u_height_factor:new l.Uniform1f(r,o.u_height_factor),u_image:new l.Uniform1i(r,o.u_image),u_texsize:new l.Uniform2f(r,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(r,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(r,o.u_pixel_coord_lower),u_scale:new l.Uniform4f(r,o.u_scale),u_fade:new l.Uniform1f(r,o.u_fade),u_opacity:new l.Uniform1f(r,o.u_opacity)}},fill:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix)}},fillPattern:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_image:new l.Uniform1i(r,o.u_image),u_texsize:new l.Uniform2f(r,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(r,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(r,o.u_pixel_coord_lower),u_scale:new l.Uniform4f(r,o.u_scale),u_fade:new l.Uniform1f(r,o.u_fade)}},fillOutline:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_world:new l.Uniform2f(r,o.u_world)}},fillOutlinePattern:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_world:new l.Uniform2f(r,o.u_world),u_image:new l.Uniform1i(r,o.u_image),u_texsize:new l.Uniform2f(r,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(r,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(r,o.u_pixel_coord_lower),u_scale:new l.Uniform4f(r,o.u_scale),u_fade:new l.Uniform1f(r,o.u_fade)}},circle:function(r,o){return{u_camera_to_center_distance:new l.Uniform1f(r,o.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(r,o.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(r,o.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(r,o.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(r,o.u_matrix)}},collisionBox:un,collisionCircle:un,debug:function(r,o){return{u_color:new l.UniformColor(r,o.u_color),u_matrix:new l.UniformMatrix4f(r,o.u_matrix)}},clippingMask:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix)}},heatmap:function(r,o){return{u_extrude_scale:new l.Uniform1f(r,o.u_extrude_scale),u_intensity:new l.Uniform1f(r,o.u_intensity),u_matrix:new l.UniformMatrix4f(r,o.u_matrix)}},heatmapTexture:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_world:new l.Uniform2f(r,o.u_world),u_image:new l.Uniform1i(r,o.u_image),u_color_ramp:new l.Uniform1i(r,o.u_color_ramp),u_opacity:new l.Uniform1f(r,o.u_opacity)}},hillshade:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_image:new l.Uniform1i(r,o.u_image),u_latrange:new l.Uniform2f(r,o.u_latrange),u_light:new l.Uniform2f(r,o.u_light),u_shadow:new l.UniformColor(r,o.u_shadow),u_highlight:new l.UniformColor(r,o.u_highlight),u_accent:new l.UniformColor(r,o.u_accent)}},hillshadePrepare:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_image:new l.Uniform1i(r,o.u_image),u_dimension:new l.Uniform2f(r,o.u_dimension),u_zoom:new l.Uniform1f(r,o.u_zoom),u_maxzoom:new l.Uniform1f(r,o.u_maxzoom),u_unpack:new l.Uniform4f(r,o.u_unpack)}},line:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_ratio:new l.Uniform1f(r,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(r,o.u_units_to_pixels)}},lineGradient:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_ratio:new l.Uniform1f(r,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(r,o.u_units_to_pixels),u_image:new l.Uniform1i(r,o.u_image)}},linePattern:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_texsize:new l.Uniform2f(r,o.u_texsize),u_ratio:new l.Uniform1f(r,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_image:new l.Uniform1i(r,o.u_image),u_units_to_pixels:new l.Uniform2f(r,o.u_units_to_pixels),u_scale:new l.Uniform4f(r,o.u_scale),u_fade:new l.Uniform1f(r,o.u_fade)}},lineSDF:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_ratio:new l.Uniform1f(r,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(r,o.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(r,o.u_patternscale_a),u_patternscale_b:new l.Uniform2f(r,o.u_patternscale_b),u_sdfgamma:new l.Uniform1f(r,o.u_sdfgamma),u_image:new l.Uniform1i(r,o.u_image),u_tex_y_a:new l.Uniform1f(r,o.u_tex_y_a),u_tex_y_b:new l.Uniform1f(r,o.u_tex_y_b),u_mix:new l.Uniform1f(r,o.u_mix)}},raster:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_tl_parent:new l.Uniform2f(r,o.u_tl_parent),u_scale_parent:new l.Uniform1f(r,o.u_scale_parent),u_buffer_scale:new l.Uniform1f(r,o.u_buffer_scale),u_fade_t:new l.Uniform1f(r,o.u_fade_t),u_opacity:new l.Uniform1f(r,o.u_opacity),u_image0:new l.Uniform1i(r,o.u_image0),u_image1:new l.Uniform1i(r,o.u_image1),u_brightness_low:new l.Uniform1f(r,o.u_brightness_low),u_brightness_high:new l.Uniform1f(r,o.u_brightness_high),u_saturation_factor:new l.Uniform1f(r,o.u_saturation_factor),u_contrast_factor:new l.Uniform1f(r,o.u_contrast_factor),u_spin_weights:new l.Uniform3f(r,o.u_spin_weights)}},symbolIcon:function(r,o){return{u_is_size_zoom_constant:new l.Uniform1i(r,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(r,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(r,o.u_size_t),u_size:new l.Uniform1f(r,o.u_size),u_camera_to_center_distance:new l.Uniform1f(r,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(r,o.u_pitch),u_rotate_symbol:new l.Uniform1i(r,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(r,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(r,o.u_fade_change),u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(r,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(r,o.u_coord_matrix),u_is_text:new l.Uniform1f(r,o.u_is_text),u_pitch_with_map:new l.Uniform1i(r,o.u_pitch_with_map),u_texsize:new l.Uniform2f(r,o.u_texsize),u_texture:new l.Uniform1i(r,o.u_texture)}},symbolSDF:function(r,o){return{u_is_size_zoom_constant:new l.Uniform1i(r,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(r,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(r,o.u_size_t),u_size:new l.Uniform1f(r,o.u_size),u_camera_to_center_distance:new l.Uniform1f(r,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(r,o.u_pitch),u_rotate_symbol:new l.Uniform1i(r,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(r,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(r,o.u_fade_change),u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(r,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(r,o.u_coord_matrix),u_is_text:new l.Uniform1f(r,o.u_is_text),u_pitch_with_map:new l.Uniform1i(r,o.u_pitch_with_map),u_texsize:new l.Uniform2f(r,o.u_texsize),u_texture:new l.Uniform1i(r,o.u_texture),u_gamma_scale:new l.Uniform1f(r,o.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_is_halo:new l.Uniform1f(r,o.u_is_halo)}},symbolTextAndIcon:function(r,o){return{u_is_size_zoom_constant:new l.Uniform1i(r,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(r,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(r,o.u_size_t),u_size:new l.Uniform1f(r,o.u_size),u_camera_to_center_distance:new l.Uniform1f(r,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(r,o.u_pitch),u_rotate_symbol:new l.Uniform1i(r,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(r,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(r,o.u_fade_change),u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(r,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(r,o.u_coord_matrix),u_is_text:new l.Uniform1f(r,o.u_is_text),u_pitch_with_map:new l.Uniform1i(r,o.u_pitch_with_map),u_texsize:new l.Uniform2f(r,o.u_texsize),u_texsize_icon:new l.Uniform2f(r,o.u_texsize_icon),u_texture:new l.Uniform1i(r,o.u_texture),u_texture_icon:new l.Uniform1i(r,o.u_texture_icon),u_gamma_scale:new l.Uniform1f(r,o.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_is_halo:new l.Uniform1f(r,o.u_is_halo)}},background:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_opacity:new l.Uniform1f(r,o.u_opacity),u_color:new l.UniformColor(r,o.u_color)}},backgroundPattern:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_opacity:new l.Uniform1f(r,o.u_opacity),u_image:new l.Uniform1i(r,o.u_image),u_pattern_tl_a:new l.Uniform2f(r,o.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(r,o.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(r,o.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(r,o.u_pattern_br_b),u_texsize:new l.Uniform2f(r,o.u_texsize),u_mix:new l.Uniform1f(r,o.u_mix),u_pattern_size_a:new l.Uniform2f(r,o.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(r,o.u_pattern_size_b),u_scale_a:new l.Uniform1f(r,o.u_scale_a),u_scale_b:new l.Uniform1f(r,o.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(r,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(r,o.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(r,o.u_tile_units_to_pixels)}}};function ta(r,o,n,s,p,f,y,g){for(var S=r.context,k=S.gl,L=r.useProgram(p?"collisionCircle":"collisionBox"),U=0;U<s.length;U++){var X=s[U],W=o.getTile(X),G=W.getBucket(n);if(G){var H=p?g?G.textCollisionCircle:G.iconCollisionCircle:g?G.textCollisionBox:G.iconCollisionBox;if(H){var ft=X.posMatrix;0===f[0]&&0===f[1]||(ft=r.translatePosMatrix(X.posMatrix,W,f,y)),L.draw(S,p?k.TRIANGLES:k.LINES,Mi.disabled,qi.disabled,r.colorModeForRenderPass(),ji.disabled,da(ft,r.transform,W),n.id,H.layoutVertexBuffer,H.indexBuffer,H.segments,null,r.transform.zoom,null,null,H.collisionVertexBuffer)}}}}function Va(r,o,n,s,p,f,y){ta(r,o,n,s,!1,p,f,y),ta(r,o,n,s,!0,p,f,y)}var ke=l.identity(new Float32Array(16));function ye(r,o,n,s,p,f){var y=l.getAnchorAlignment(r),g=-(y.horizontalAlign-.5)*o,S=-(y.verticalAlign-.5)*n,k=l.evaluateVariableOffset(r,s);return new l.Point((g/p+k[0])*f,(S/p+k[1])*f)}function Q(r,o,n,s,p,f,y,g,S,k,L){var U=r.text.placedSymbolArray,X=r.text.dynamicLayoutVertexArray,W=r.icon.dynamicLayoutVertexArray,G={};X.clear();for(var H=0;H<U.length;H++){var ft=U.get(H),_t=ft.hidden||!ft.crossTileID||r.allowVerticalPlacement&&!ft.placedOrientation?null:s[ft.crossTileID];if(_t){var St=new l.Point(ft.anchorX,ft.anchorY),Ct=di(St,n?g:y),Ut=.5+f.cameraToCenterDistance/Ct.signedDistanceFromCamera*.5,te=p.evaluateSizeForFeature(r.textSizeData,k,ft)*Ut/l.ONE_EM;n&&(te*=r.tilePixelRatio/S);for(var Ce=ye(_t.anchor,_t.width,_t.height,_t.textOffset,_t.textBoxScale,te),$e=n?di(St.add(Ce),y).point:Ct.point.add(o?Ce.rotate(-f.angle):Ce),Se=r.allowVerticalPlacement&&ft.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,fi=0;fi<ft.numGlyphs;fi++)l.addDynamicAttributes(X,$e,Se);L&&ft.associatedIconIndex>=0&&(G[ft.associatedIconIndex]={shiftedAnchor:$e,angle:Se})}else Xi(ft.numGlyphs,X)}if(L){W.clear();for(var ni=r.icon.placedSymbolArray,si=0;si<ni.length;si++){var li=ni.get(si);if(li.hidden)Xi(li.numGlyphs,W);else{var vi=G[si];if(vi)for(var ui=0;ui<li.numGlyphs;ui++)l.addDynamicAttributes(W,vi.shiftedAnchor,vi.angle);else Xi(li.numGlyphs,W)}}r.icon.dynamicLayoutVertexBuffer.updateData(W)}r.text.dynamicLayoutVertexBuffer.updateData(X)}function gt(r,o,n){return n.iconsInText&&o?"symbolTextAndIcon":r?"symbolSDF":"symbolIcon"}function ee(r,o,n,s,p,f,y,g,S,k,L,U){for(var X,W,G=r.context,H=G.gl,ft=r.transform,ut="map"===g,_t="map"===S,St=ut&&"point"!==n.layout.get("symbol-placement"),Ct=ut&&!_t&&!St,Ut=void 0!==n.layout.get("symbol-sort-key").constantOr(1),te=r.depthModeForSublayer(0,Mi.ReadOnly),le=n.layout.get("text-variable-anchor"),De=[],Ce=0,$e=s;Ce<$e.length;Ce+=1){var Se=$e[Ce],fi=o.getTile(Se),ni=fi.getBucket(n);if(ni){var si=p?ni.text:ni.icon;if(si&&si.segments.get().length){var li=si.programConfigurations.get(n.id),vi=p||ni.sdfIcons,ui=p?ni.textSizeData:ni.iconSizeData,lr=_t||0!==ft.pitch;X||(X=r.useProgram(gt(vi,p,ni),li),W=l.evaluateSizeForZoom(ui,ft.zoom));var xi=void 0,hr=[0,0],Ji=void 0,$i=void 0,br=null,rn=void 0;if(p)Ji=fi.glyphAtlasTexture,$i=H.LINEAR,xi=fi.glyphAtlasTexture.size,ni.iconsInText&&(hr=fi.imageAtlasTexture.size,br=fi.imageAtlasTexture,rn=lr||r.options.rotating||r.options.zooming||"composite"===ui.kind||"camera"===ui.kind?H.LINEAR:H.NEAREST);else{var Er=1!==n.layout.get("icon-size").constantOr(0)||ni.iconsNeedLinear;Ji=fi.imageAtlasTexture,$i=vi||r.options.rotating||r.options.zooming||Er||lr?H.LINEAR:H.NEAREST,xi=fi.imageAtlasTexture.size}var ra=Ar(fi,1,r.transform.zoom),Bo=ai(Se.posMatrix,_t,ut,r.transform,ra),Wa=Qe(Se.posMatrix,_t,ut,r.transform,ra),Fo=le&&ni.hasTextData(),na="none"!==n.layout.get("icon-text-fit")&&Fo&&ni.hasIconData();St&&Cr(ni,Se.posMatrix,r,p,Bo,Wa,_t,k);var Ga=r.translatePosMatrix(Se.posMatrix,fi,f,y),xo=St||p&&le||na?ke:Bo,xs=r.translatePosMatrix(Wa,fi,f,y,!0),us=vi&&0!==n.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1),za={program:X,buffers:si,uniformValues:vi?ni.iconsInText?ja(ui.kind,W,Ct,_t,r,Ga,xo,xs,xi,hr):is(ui.kind,W,Ct,_t,r,Ga,xo,xs,p,xi,!0):Na(ui.kind,W,Ct,_t,r,Ga,xo,xs,p,xi),atlasTexture:Ji,atlasTextureIcon:br,atlasInterpolation:$i,atlasInterpolationIcon:rn,isSDF:vi,hasHalo:us};if(Ut)for(var bo=0,bs=si.segments.get();bo<bs.length;bo+=1){var Pa=bs[bo];De.push({segments:new l.SegmentVector([Pa]),sortKey:Pa.sortKey,state:za})}else De.push({segments:si.segments,sortKey:0,state:za})}}}Ut&&De.sort(function($n,Uo){return $n.sortKey-Uo.sortKey});for(var cs=0,ws=De;cs<ws.length;cs+=1){var Xa=ws[cs],Zi=Xa.state;if(G.activeTexture.set(H.TEXTURE0),Zi.atlasTexture.bind(Zi.atlasInterpolation,H.CLAMP_TO_EDGE),Zi.atlasTextureIcon&&(G.activeTexture.set(H.TEXTURE1),Zi.atlasTextureIcon&&Zi.atlasTextureIcon.bind(Zi.atlasInterpolationIcon,H.CLAMP_TO_EDGE)),Zi.isSDF){var An=Zi.uniformValues;Zi.hasHalo&&(An.u_is_halo=1,we(Zi.buffers,Xa.segments,n,r,Zi.program,te,L,U,An)),An.u_is_halo=0}we(Zi.buffers,Xa.segments,n,r,Zi.program,te,L,U,Zi.uniformValues)}}function we(r,o,n,s,p,f,y,g,S){var k=s.context;p.draw(k,k.gl.TRIANGLES,f,y,g,ji.disabled,S,n.id,r.layoutVertexBuffer,r.indexBuffer,o,n.paint,s.transform.zoom,r.programConfigurations.get(n.id),r.dynamicLayoutVertexBuffer,r.opacityVertexBuffer)}function Ae(r,o,n,s,p,f,y){var g,S,k,L,U,X=r.context.gl,W=n.paint.get("fill-pattern"),G=W&&W.constantOr(1),H=n.getCrossfadeParameters();y?(S=G&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",g=X.LINES):(S=G?"fillPattern":"fill",g=X.TRIANGLES);for(var ft=0,ut=s;ft<ut.length;ft+=1){var _t=ut[ft],St=o.getTile(_t);if(!G||St.patternsLoaded()){var Ct=St.getBucket(n);if(Ct){var Ut=Ct.programConfigurations.get(n.id),te=r.useProgram(S,Ut);G&&(r.context.activeTexture.set(X.TEXTURE0),St.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Ut.updatePatternPaintBuffers(H));var le=W.constantOr(null);if(le&&St.imageAtlas){var De=St.imageAtlas,Ce=De.patternPositions[le.to.toString()],$e=De.patternPositions[le.from.toString()];Ce&&$e&&Ut.setConstantPatternPositions(Ce,$e)}var Se=r.translatePosMatrix(_t.posMatrix,St,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(y){L=Ct.indexBuffer2,U=Ct.segments2;var fi=[X.drawingBufferWidth,X.drawingBufferHeight];k="fillOutlinePattern"===S&&G?Wo(Se,r,H,St,fi):er(Se,fi)}else L=Ct.indexBuffer,U=Ct.segments,k=G?Zo(Se,r,H,St):sa(Se);te.draw(r.context,g,p,r.stencilModeForClipping(_t),f,ji.disabled,k,n.id,Ct.layoutVertexBuffer,L,U,n.paint,r.transform.zoom,Ut)}}}}function Di(r,o,n,s,p,f,y){for(var g=r.context,S=g.gl,k=n.paint.get("fill-extrusion-pattern"),L=k.constantOr(1),U=n.getCrossfadeParameters(),X=n.paint.get("fill-extrusion-opacity"),W=0,G=s;W<G.length;W+=1){var H=G[W],ft=o.getTile(H),ut=ft.getBucket(n);if(ut){var _t=ut.programConfigurations.get(n.id),St=r.useProgram(L?"fillExtrusionPattern":"fillExtrusion",_t);L&&(r.context.activeTexture.set(S.TEXTURE0),ft.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),_t.updatePatternPaintBuffers(U));var Ct=k.constantOr(null);if(Ct&&ft.imageAtlas){var Ut=ft.imageAtlas,te=Ut.patternPositions[Ct.to.toString()],le=Ut.patternPositions[Ct.from.toString()];te&&le&&_t.setConstantPatternPositions(te,le)}var De=r.translatePosMatrix(H.posMatrix,ft,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),Ce=n.paint.get("fill-extrusion-vertical-gradient"),$e=L?Qn(De,r,Ce,X,H,U,ft):Oo(De,r,Ce,X);St.draw(g,g.gl.TRIANGLES,p,f,y,ji.backCCW,$e,n.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,n.paint,r.transform.zoom,_t)}}}function zr(r,o,n,s,p,f){var y=r.context,g=y.gl,S=o.fbo;if(S){var k=r.useProgram("hillshade");y.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,S.colorAttachment.get());var L=function(r,o,n){var s=n.paint.get("hillshade-shadow-color"),p=n.paint.get("hillshade-highlight-color"),f=n.paint.get("hillshade-accent-color"),y=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(y-=r.transform.angle);var g=!r.options.moving;return{u_matrix:r.transform.calculatePosMatrix(o.tileID.toUnwrapped(),g),u_image:0,u_latrange:Hn(0,o.tileID),u_light:[n.paint.get("hillshade-exaggeration"),y],u_shadow:s,u_highlight:p,u_accent:f}}(r,o,n);k.draw(y,g.TRIANGLES,s,p,f,ji.disabled,L,n.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments)}}function Rn(r,o,n,s,p,f,y){var g=r.context,S=g.gl,k=o.dem;if(k&&k.data){var L=k.dim,U=k.stride,X=k.getPixels();if(g.activeTexture.set(S.TEXTURE1),g.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||r.getTileTexture(U),o.demTexture){var W=o.demTexture;W.update(X,{premultiply:!1}),W.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else o.demTexture=new l.Texture(g,X,S.RGBA,{premultiply:!1}),o.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);g.activeTexture.set(S.TEXTURE0);var G=o.fbo;if(!G){var H=new l.Texture(g,{width:L,height:L,data:null},S.RGBA);H.bind(S.LINEAR,S.CLAMP_TO_EDGE),(G=o.fbo=g.createFramebuffer(L,L)).colorAttachment.set(H.texture)}g.bindFramebuffer.set(G.framebuffer),g.viewport.set([0,0,L,L]),r.useProgram("hillshadePrepare").draw(g,S.TRIANGLES,p,f,y,ji.disabled,function(r,o,n){var s=o.stride,p=l.create();return l.ortho(p,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(p,p,[0,-l.EXTENT,0]),{u_matrix:p,u_image:1,u_dimension:[s,s],u_zoom:r.overscaledZ,u_maxzoom:n,u_unpack:o.getUnpackVector()}}(o.tileID,k,s),n.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function On(r,o,n,s,p){var f=s.paint.get("raster-fade-duration");if(f>0){var y=l.browser.now(),g=(y-r.timeAdded)/f,S=o?(y-o.timeAdded)/f:-1,k=n.getSource(),L=p.coveringZoomLevel({tileSize:k.tileSize,roundZoom:k.roundZoom}),U=!o||Math.abs(o.tileID.overscaledZ-L)>Math.abs(r.tileID.overscaledZ-L),X=U&&r.refreshedUponExpiration?1:l.clamp(U?g:1-S,0,1);return r.refreshedUponExpiration&&g>=1&&(r.refreshedUponExpiration=!1),o?{opacity:1,mix:1-X}:{opacity:X,mix:0}}return{opacity:1,mix:0}}function $o(r,o,n){var s=r.context,p=s.gl,f=n.posMatrix,y=r.useProgram("debug"),g=Mi.disabled,S=qi.disabled,k=r.colorModeForRenderPass(),L="$debug";y.draw(s,p.LINE_STRIP,g,S,k,ji.disabled,Ao(f,l.Color.red),L,r.debugBuffer,r.tileBorderIndexBuffer,r.debugSegments);var U=o.getTileByID(n.key).latestRawTileData,W=Math.floor((U&&U.byteLength||0)/1024),G=o.getTile(n).tileSize,H=512/Math.min(G,512),ft=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(ft+=" => "+n.overscaledZ);for(var ut=function(si,li,vi,ui){ui=ui||1;var lr,xi,hr,Ji,$i,br,rn,Yr,Er=[];for(lr=0,xi=si.length;lr<xi;lr++)if($i=_n[si[lr]]){for(Yr=null,hr=0,Ji=$i[1].length;hr<Ji;hr+=2)-1===$i[1][hr]&&-1===$i[1][hr+1]?Yr=null:(br=li+$i[1][hr]*ui,rn=vi-$i[1][hr+1]*ui,Yr&&Er.push(Yr.x,Yr.y,br,rn),Yr={x:br,y:rn});li+=$i[0]*ui}return Er}(ft+" "+W+"kb",50,200*H,5*H),_t=new l.StructArrayLayout2i4,St=new l.StructArrayLayout2ui4,Ct=0;Ct<ut.length;Ct+=2)_t.emplaceBack(ut[Ct],ut[Ct+1]),St.emplaceBack(Ct,Ct+1);for(var Ut=s.createVertexBuffer(_t,go.members),te=s.createIndexBuffer(St),le=l.SegmentVector.simpleSegment(0,0,_t.length/2,_t.length/2),De=l.EXTENT/(Math.pow(2,r.transform.zoom-n.overscaledZ)*G*H),Ce=[],$e=-1;$e<=1;$e++)for(var Se=-1;Se<=1&&(0!==$e||0!==Se);Se++)Ce.push([$e,Se]);for(var fi=0;fi<Ce.length;fi++){var ni=Ce[fi];y.draw(s,p.LINES,g,S,k,ji.disabled,Ao(l.translate([],f,[De*ni[0],De*ni[1],0]),l.Color.white),L,Ut,te,le)}y.draw(s,p.LINES,g,S,k,ji.disabled,Ao(f,l.Color.black),L,Ut,te,le),Ut.destroy(),te.destroy(),le.destroy()}var _n={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Ko={symbol:function(r,o,n,s,p){if("translucent"===r.renderPass){var f=qi.disabled,y=r.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(g,S,k,L,U,X,W){for(var G=S.transform,H="map"===U,ft="map"===X,ut=0,_t=g;ut<_t.length;ut+=1){var St=_t[ut],Ct=L.getTile(St),Ut=Ct.getBucket(k);if(Ut&&Ut.text&&Ut.text.segments.get().length){var le=l.evaluateSizeForZoom(Ut.textSizeData,G.zoom),De=Ar(Ct,1,S.transform.zoom),Ce=ai(St.posMatrix,ft,H,S.transform,De),$e="none"!==k.layout.get("icon-text-fit")&&Ut.hasIconData();if(le){var Se=Math.pow(2,G.zoom-Ct.tileID.overscaledZ);Q(Ut,H,ft,W,l.symbolSize,G,Ce,St.posMatrix,Se,le,$e)}}}}(s,r,n,o,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),p),0!==n.paint.get("icon-opacity").constantOr(1)&&ee(r,o,n,s,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),f,y),0!==n.paint.get("text-opacity").constantOr(1)&&ee(r,o,n,s,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),f,y),o.map.showCollisionBoxes&&(Va(r,o,n,s,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),Va(r,o,n,s,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))}},circle:function(r,o,n,s){if("translucent"===r.renderPass){var p=n.paint.get("circle-opacity"),f=n.paint.get("circle-stroke-width"),y=n.paint.get("circle-stroke-opacity"),g=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0!==p.constantOr(1)||0!==f.constantOr(1)&&0!==y.constantOr(1)){for(var S=r.context,k=S.gl,L=r.depthModeForSublayer(0,Mi.ReadOnly),U=qi.disabled,X=r.colorModeForRenderPass(),W=[],G=0;G<s.length;G++){var H=s[G],ft=o.getTile(H),ut=ft.getBucket(n);if(ut){var _t=ut.programConfigurations.get(n.id),St={programConfiguration:_t,program:r.useProgram("circle",_t),layoutVertexBuffer:ut.layoutVertexBuffer,indexBuffer:ut.indexBuffer,uniformValues:Ta(r,H,ft,n)};if(g)for(var Ct=0,Ut=ut.segments.get();Ct<Ut.length;Ct+=1){var te=Ut[Ct];W.push({segments:new l.SegmentVector([te]),sortKey:te.sortKey,state:St})}else W.push({segments:ut.segments,sortKey:0,state:St})}}g&&W.sort(function(ui,lr){return ui.sortKey-lr.sortKey});for(var le=0,De=W;le<De.length;le+=1){var Ce=De[le],$e=Ce.state;$e.program.draw(S,k.TRIANGLES,L,U,X,ji.disabled,$e.uniformValues,n.id,$e.layoutVertexBuffer,$e.indexBuffer,Ce.segments,n.paint,r.transform.zoom,$e.programConfiguration)}}}},heatmap:function(r,o,n,s){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===r.renderPass){var p=r.context,f=p.gl,y=r.depthModeForSublayer(0,Mi.ReadOnly),g=qi.disabled,S=new _r([f.ONE,f.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(ft,ut,_t){var St=ft.gl;ft.activeTexture.set(St.TEXTURE1),ft.viewport.set([0,0,ut.width/4,ut.height/4]);var Ct=_t.heatmapFbo;if(Ct)St.bindTexture(St.TEXTURE_2D,Ct.colorAttachment.get()),ft.bindFramebuffer.set(Ct.framebuffer);else{var Ut=St.createTexture();St.bindTexture(St.TEXTURE_2D,Ut),St.texParameteri(St.TEXTURE_2D,St.TEXTURE_WRAP_S,St.CLAMP_TO_EDGE),St.texParameteri(St.TEXTURE_2D,St.TEXTURE_WRAP_T,St.CLAMP_TO_EDGE),St.texParameteri(St.TEXTURE_2D,St.TEXTURE_MIN_FILTER,St.LINEAR),St.texParameteri(St.TEXTURE_2D,St.TEXTURE_MAG_FILTER,St.LINEAR),Ct=_t.heatmapFbo=ft.createFramebuffer(ut.width/4,ut.height/4),function te(le,De,Ce,$e){var Se=le.gl;Se.texImage2D(Se.TEXTURE_2D,0,Se.RGBA,De.width/4,De.height/4,0,Se.RGBA,le.extTextureHalfFloat?le.extTextureHalfFloat.HALF_FLOAT_OES:Se.UNSIGNED_BYTE,null),$e.colorAttachment.set(Ce),le.extTextureHalfFloat&&Se.checkFramebufferStatus(Se.FRAMEBUFFER)!==Se.FRAMEBUFFER_COMPLETE&&(le.extTextureHalfFloat=null,$e.colorAttachment.setDirty(),te(le,De,Ce,$e))}(ft,ut,Ut,Ct)}})(p,r,n),p.clear({color:l.Color.transparent});for(var k=0;k<s.length;k++){var L=s[k];if(!o.hasRenderableParent(L)){var U=o.getTile(L),X=U.getBucket(n);if(X){var W=X.programConfigurations.get(n.id);r.useProgram("heatmap",W).draw(p,f.TRIANGLES,y,g,S,ji.disabled,Kr(L.posMatrix,U,r.transform.zoom,n.paint.get("heatmap-intensity")),n.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,n.paint,r.transform.zoom,W)}}}p.viewport.set([0,0,r.width,r.height])}else"translucent"===r.renderPass&&(r.context.setColorMode(r.colorModeForRenderPass()),function(ft,ut){var _t=ft.context,St=_t.gl,Ct=ut.heatmapFbo;if(Ct){_t.activeTexture.set(St.TEXTURE0),St.bindTexture(St.TEXTURE_2D,Ct.colorAttachment.get()),_t.activeTexture.set(St.TEXTURE1);var Ut=ut.colorRampTexture;Ut||(Ut=ut.colorRampTexture=new l.Texture(_t,ut.colorRamp,St.RGBA)),Ut.bind(St.LINEAR,St.CLAMP_TO_EDGE),ft.useProgram("heatmapTexture").draw(_t,St.TRIANGLES,Mi.disabled,qi.disabled,ft.colorModeForRenderPass(),ji.disabled,function(r,o,n,s){var p=l.create();l.ortho(p,0,r.width,r.height,0,0,1);var f=r.context.gl;return{u_matrix:p,u_world:[f.drawingBufferWidth,f.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:o.paint.get("heatmap-opacity")}}(ft,ut),ut.id,ft.viewportBuffer,ft.quadTriangleIndexBuffer,ft.viewportSegments,ut.paint,ft.transform.zoom)}}(r,n))},line:function(r,o,n,s){if("translucent"===r.renderPass){var p=n.paint.get("line-opacity"),f=n.paint.get("line-width");if(0!==p.constantOr(1)&&0!==f.constantOr(1)){var y=r.depthModeForSublayer(0,Mi.ReadOnly),g=r.colorModeForRenderPass(),S=n.paint.get("line-dasharray"),k=n.paint.get("line-pattern"),L=k.constantOr(1),U=n.paint.get("line-gradient"),X=n.getCrossfadeParameters(),W=S?"lineSDF":L?"linePattern":U?"lineGradient":"line",G=r.context,H=G.gl,ft=!0;if(U){G.activeTexture.set(H.TEXTURE0);var ut=n.gradientTexture;if(!n.gradient)return;ut||(ut=n.gradientTexture=new l.Texture(G,n.gradient,H.RGBA)),ut.bind(H.LINEAR,H.CLAMP_TO_EDGE)}for(var _t=0,St=s;_t<St.length;_t+=1){var Ct=St[_t],Ut=o.getTile(Ct);if(!L||Ut.patternsLoaded()){var te=Ut.getBucket(n);if(te){var le=te.programConfigurations.get(n.id),De=r.context.program.get(),Ce=r.useProgram(W,le),$e=ft||Ce.program!==De,Se=k.constantOr(null);if(Se&&Ut.imageAtlas){var fi=Ut.imageAtlas,ni=fi.patternPositions[Se.to.toString()],si=fi.patternPositions[Se.from.toString()];ni&&si&&le.setConstantPatternPositions(ni,si)}var li=S?eo(r,Ut,n,S,X):L?Qo(r,Ut,n,X):U?ts(r,Ut,n):Xn(r,Ut,n);S&&($e||r.lineAtlas.dirty)?(G.activeTexture.set(H.TEXTURE0),r.lineAtlas.bind(G)):L&&(G.activeTexture.set(H.TEXTURE0),Ut.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),le.updatePatternPaintBuffers(X)),Ce.draw(G,H.TRIANGLES,y,r.stencilModeForClipping(Ct),g,ji.disabled,li,n.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,n.paint,r.transform.zoom,le),ft=!1}}}}}},fill:function(r,o,n,s){var p=n.paint.get("fill-color"),f=n.paint.get("fill-opacity");if(0!==f.constantOr(1)){var y=r.colorModeForRenderPass(),g=n.paint.get("fill-pattern"),S=r.opaquePassEnabledForLayer()&&!g.constantOr(1)&&1===p.constantOr(l.Color.transparent).a&&1===f.constantOr(0)?"opaque":"translucent";if(r.renderPass===S){var k=r.depthModeForSublayer(1,"opaque"===r.renderPass?Mi.ReadWrite:Mi.ReadOnly);Ae(r,o,n,s,k,y,!1)}if("translucent"===r.renderPass&&n.paint.get("fill-antialias")){var L=r.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Mi.ReadOnly);Ae(r,o,n,s,L,y,!0)}}},"fill-extrusion":function(r,o,n,s){var p=n.paint.get("fill-extrusion-opacity");if(0!==p&&"translucent"===r.renderPass){var f=new Mi(r.context.gl.LEQUAL,Mi.ReadWrite,r.depthRangeFor3D);if(1!==p||n.paint.get("fill-extrusion-pattern").constantOr(1))Di(r,o,n,s,f,qi.disabled,_r.disabled),Di(r,o,n,s,f,r.stencilModeFor3D(),r.colorModeForRenderPass());else{var y=r.colorModeForRenderPass();Di(r,o,n,s,f,qi.disabled,y)}}},hillshade:function(r,o,n,s){if("offscreen"===r.renderPass||"translucent"===r.renderPass){for(var p=r.context,f=o.getSource().maxzoom,y=r.depthModeForSublayer(0,Mi.ReadOnly),g=r.colorModeForRenderPass(),S="translucent"===r.renderPass?r.stencilConfigForOverlap(s):[{},s],k=S[0],L=0,U=S[1];L<U.length;L+=1){var X=U[L],W=o.getTile(X);W.needsHillshadePrepare&&"offscreen"===r.renderPass?Rn(r,W,n,f,y,qi.disabled,g):"translucent"===r.renderPass&&zr(r,W,n,y,k[X.overscaledZ],g)}p.viewport.set([0,0,r.width,r.height])}},raster:function(r,o,n,s){if("translucent"===r.renderPass&&0!==n.paint.get("raster-opacity")&&s.length)for(var p=r.context,f=p.gl,y=o.getSource(),g=r.useProgram("raster"),S=r.colorModeForRenderPass(),k=y instanceof Ie?[{},s]:r.stencilConfigForOverlap(s),L=k[0],U=k[1],X=U[U.length-1].overscaledZ,W=!r.options.moving,G=0,H=U;G<H.length;G+=1){var ft=H[G],ut=r.depthModeForSublayer(ft.overscaledZ-X,1===n.paint.get("raster-opacity")?Mi.ReadWrite:Mi.ReadOnly,f.LESS),_t=o.getTile(ft),St=r.transform.calculatePosMatrix(ft.toUnwrapped(),W);_t.registerFadeDuration(n.paint.get("raster-fade-duration"));var Ct=o.findLoadedParent(ft,0),Ut=On(_t,Ct,o,n,r.transform),te=void 0,le=void 0,De="nearest"===n.paint.get("raster-resampling")?f.NEAREST:f.LINEAR;p.activeTexture.set(f.TEXTURE0),_t.texture.bind(De,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),p.activeTexture.set(f.TEXTURE1),Ct?(Ct.texture.bind(De,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),te=Math.pow(2,Ct.tileID.overscaledZ-_t.tileID.overscaledZ),le=[_t.tileID.canonical.x*te%1,_t.tileID.canonical.y*te%1]):_t.texture.bind(De,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST);var Ce=vs(St,le||[0,0],te||1,Ut,n);y instanceof Ie?g.draw(p,f.TRIANGLES,ut,qi.disabled,S,ji.disabled,Ce,n.id,y.boundsBuffer,r.quadTriangleIndexBuffer,y.boundsSegments):g.draw(p,f.TRIANGLES,ut,L[ft.overscaledZ],S,ji.disabled,Ce,n.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments)}},background:function(r,o,n){var s=n.paint.get("background-color"),p=n.paint.get("background-opacity");if(0!==p){var f=r.context,y=f.gl,g=r.transform,S=g.tileSize,k=n.paint.get("background-pattern");if(!r.isPatternMissing(k)){var L=!k&&1===s.a&&1===p&&r.opaquePassEnabledForLayer()?"opaque":"translucent";if(r.renderPass===L){var U=qi.disabled,X=r.depthModeForSublayer(0,"opaque"===L?Mi.ReadWrite:Mi.ReadOnly),W=r.colorModeForRenderPass(),G=r.useProgram(k?"backgroundPattern":"background"),H=g.coveringTiles({tileSize:S});k&&(f.activeTexture.set(y.TEXTURE0),r.imageManager.bind(r.context));for(var ft=n.getCrossfadeParameters(),ut=0,_t=H;ut<_t.length;ut+=1){var St=_t[ut],Ct=r.transform.calculatePosMatrix(St.toUnwrapped()),Ut=k?Bs(Ct,p,r,k,{tileID:St,tileSize:S},ft):rs(Ct,p,s);G.draw(f,y.TRIANGLES,X,U,W,ji.disabled,Ut,n.id,r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}}}},debug:function(r,o,n){for(var s=0;s<n.length;s++)$o(r,o,n[s])},custom:function(r,o,n){var s=r.context,p=n.implementation;if("offscreen"===r.renderPass){var f=p.prerender;f&&(r.setCustomLayerDefaults(),s.setColorMode(r.colorModeForRenderPass()),f.call(p,s.gl,r.transform.customLayerMatrix()),s.setDirty(),r.setBaseState())}else if("translucent"===r.renderPass){r.setCustomLayerDefaults(),s.setColorMode(r.colorModeForRenderPass()),s.setStencilMode(qi.disabled);var y="3d"===p.renderingMode?new Mi(r.context.gl.LEQUAL,Mi.ReadWrite,r.depthRangeFor3D):r.depthModeForSublayer(0,Mi.ReadOnly);s.setDepthMode(y),p.render(s.gl,r.transform.customLayerMatrix()),s.setDirty(),r.setBaseState(),s.bindFramebuffer.set(null)}}},or=function(r,o){this.context=new Zr(r),this.transform=o,this._tileTextures={},this.setup(),this.numSublayers=ir.maxUnderzooming+ir.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new l.ProgramConfiguration,this.crossTileSymbolIndex=new Qa,this.gpuTimers={}};function fa(r,o){if(r.y>o.y){var n=r;r=o,o=n}return{x0:r.x,y0:r.y,x1:o.x,y1:o.y,dx:o.x-r.x,dy:o.y-r.y}}function zo(r,o,n,s,p){var f=Math.max(n,Math.floor(o.y0)),y=Math.min(s,Math.ceil(o.y1));if(r.x0===o.x0&&r.y0===o.y0?r.x0+o.dy/r.dy*r.dx<o.x1:r.x1-o.dy/r.dy*r.dx<o.x0){var g=r;r=o,o=g}for(var S=r.dx/r.dy,k=o.dx/o.dy,L=r.dx>0,U=o.dx<0,X=f;X<y;X++){var W=S*Math.max(0,Math.min(r.dy,X+L-r.y0))+r.x0,G=k*Math.max(0,Math.min(o.dy,X+U-o.y0))+o.x0;p(Math.floor(G),Math.ceil(W),X)}}function la(r,o,n,s,p,f){var y,g=fa(r,o),S=fa(o,n),k=fa(n,r);g.dy>S.dy&&(y=g,g=S,S=y),g.dy>k.dy&&(y=g,g=k,k=y),S.dy>k.dy&&(y=S,S=k,k=y),g.dy&&zo(k,g,s,p,f),S.dy&&zo(k,S,s,p,f)}or.prototype.resize=function(r,o){var n=this.context.gl;if(this.width=r*l.browser.devicePixelRatio,this.height=o*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var s=0,p=this.style._order;s<p.length;s+=1)this.style._layers[p[s]].resize();this.depthRbo&&(n.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},or.prototype.setup=function(){var r=this.context,o=new l.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(l.EXTENT,0),o.emplaceBack(0,l.EXTENT),o.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(o,go.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var n=new l.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(l.EXTENT,0),n.emplaceBack(0,l.EXTENT),n.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=r.createVertexBuffer(n,go.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var s=new l.StructArrayLayout4i8;s.emplaceBack(0,0,0,0),s.emplaceBack(l.EXTENT,0,l.EXTENT,0),s.emplaceBack(0,l.EXTENT,0,l.EXTENT),s.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(s,se.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var p=new l.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(1,0),p.emplaceBack(0,1),p.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(p,go.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var f=new l.StructArrayLayout1ui2;f.emplaceBack(0),f.emplaceBack(1),f.emplaceBack(3),f.emplaceBack(2),f.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(f);var y=new l.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(y);var g=this.context.gl;this.stencilClearMode=new qi({func:g.ALWAYS,mask:0},0,255,g.ZERO,g.ZERO,g.ZERO)},or.prototype.clearStencil=function(){var r=this.context,o=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var n=l.create();l.ortho(n,0,this.width,this.height,0,0,1),l.scale(n,n,[o.drawingBufferWidth,o.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,o.TRIANGLES,Mi.disabled,this.stencilClearMode,_r.disabled,ji.disabled,Jo(n),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},or.prototype._renderTileClippingMasks=function(r,o){if(this.currentStencilSource!==r.source&&r.isTileClipped()&&o&&o.length){this.currentStencilSource=r.source;var n=this.context,s=n.gl;this.nextStencilID+o.length>256&&this.clearStencil(),n.setColorMode(_r.disabled),n.setDepthMode(Mi.disabled);var p=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var f=0,y=o;f<y.length;f+=1){var g=y[f],S=this._tileClippingMaskIDs[g.key]=this.nextStencilID++;p.draw(n,s.TRIANGLES,Mi.disabled,new qi({func:s.ALWAYS,mask:0},S,255,s.KEEP,s.KEEP,s.REPLACE),_r.disabled,ji.disabled,Jo(g.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},or.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var r=this.nextStencilID++,o=this.context.gl;return new qi({func:o.NOTEQUAL,mask:255},r,255,o.KEEP,o.KEEP,o.REPLACE)},or.prototype.stencilModeForClipping=function(r){var o=this.context.gl;return new qi({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,o.KEEP,o.KEEP,o.REPLACE)},or.prototype.stencilConfigForOverlap=function(r){var o,n=this.context.gl,s=r.sort(function(S,k){return k.overscaledZ-S.overscaledZ}),p=s[s.length-1].overscaledZ,f=s[0].overscaledZ-p+1;if(f>1){this.currentStencilSource=void 0,this.nextStencilID+f>256&&this.clearStencil();for(var y={},g=0;g<f;g++)y[g+p]=new qi({func:n.GEQUAL,mask:255},g+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=f,[y,s]}return[(o={},o[p]=qi.disabled,o),s]},or.prototype.colorModeForRenderPass=function(){var r=this.context.gl;return this._showOverdrawInspector?new _r([r.CONSTANT_COLOR,r.ONE],new l.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?_r.unblended:_r.alphaBlended},or.prototype.depthModeForSublayer=function(r,o,n){if(!this.opaquePassEnabledForLayer())return Mi.disabled;var s=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Mi(n||this.context.gl.LEQUAL,o,[s,s])},or.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},or.prototype.render=function(r,o){var n=this;this.style=r,this.options=o,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var s=this.style._order,p=this.style.sourceCaches;for(var f in p){var y=p[f];y.used&&y.prepare(this.context)}var g,S,k={},L={},U={};for(var X in p){var W=p[X];k[X]=W.getVisibleCoordinates(),L[X]=k[X].slice().reverse(),U[X]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var G=0;G<s.length;G++)if(this.style._layers[s[G]].is3D()){this.opaquePassCutoff=G;break}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var ft=0,ut=s;ft<ut.length;ft+=1){var St=this.style._layers[ut[ft]];if(St.hasOffscreenPass()&&!St.isHidden(this.transform.zoom)){var Ct=L[St.source];("custom"===St.type||Ct.length)&&this.renderLayer(this,p[St.source],St,Ct)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=s.length-1;this.currentLayer>=0;this.currentLayer--){var Ut=this.style._layers[s[this.currentLayer]],te=p[Ut.source],le=k[Ut.source];this._renderTileClippingMasks(Ut,le),this.renderLayer(this,te,Ut,le)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<s.length;this.currentLayer++){var De=this.style._layers[s[this.currentLayer]],Ce=p[De.source],$e=("symbol"===De.type?U:L)[De.source];this._renderTileClippingMasks(De,k[De.source]),this.renderLayer(this,Ce,De,$e)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(Se){Se.source&&!Se.isHidden(n.transform.zoom)&&(Se.source!==(S&&S.id)&&(S=n.style.sourceCaches[Se.source]),(!g||g.getSource().maxzoom<S.getSource().maxzoom)&&(g=S))}),g&&Ko.debug(this,g,g.getVisibleCoordinates())),this.context.setDefault()},or.prototype.setupOffscreenDepthRenderbuffer=function(){var r=this.context;this.depthRbo||(this.depthRbo=r.createRenderbuffer(r.gl.DEPTH_COMPONENT16,this.width,this.height))},or.prototype.renderLayer=function(r,o,n,s){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||s.length)&&(this.id=n.id,this.gpuTimingStart(n),Ko[n.type](r,o,n,s,this.style.placement.variableOffsets),this.gpuTimingEnd())},or.prototype.gpuTimingStart=function(r){if(this.options.gpuTiming){var o=this.context.extTimerQuery,n=this.gpuTimers[r.id];n||(n=this.gpuTimers[r.id]={calls:0,cpuTime:0,query:o.createQueryEXT()}),n.calls++,o.beginQueryEXT(o.TIME_ELAPSED_EXT,n.query)}},or.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var r=this.context.extTimerQuery;r.endQueryEXT(r.TIME_ELAPSED_EXT)}},or.prototype.collectGpuTimers=function(){var r=this.gpuTimers;return this.gpuTimers={},r},or.prototype.queryGpuTimers=function(r){var o={};for(var n in r){var s=r[n],p=this.context.extTimerQuery,f=p.getQueryObjectEXT(s.query,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(s.query),o[n]=f}return o},or.prototype.translatePosMatrix=function(r,o,n,s,p){if(!n[0]&&!n[1])return r;var f=p?"map"===s?this.transform.angle:0:"viewport"===s?-this.transform.angle:0;if(f){var y=Math.sin(f),g=Math.cos(f);n=[n[0]*g-n[1]*y,n[0]*y+n[1]*g]}var S=[p?n[0]:Ar(o,n[0],this.transform.zoom),p?n[1]:Ar(o,n[1],this.transform.zoom),0],k=new Float32Array(16);return l.translate(k,r,S),k},or.prototype.saveTileTexture=function(r){var o=this._tileTextures[r.size[0]];o?o.push(r):this._tileTextures[r.size[0]]=[r]},or.prototype.getTileTexture=function(r){var o=this._tileTextures[r];return o&&o.length>0?o.pop():null},or.prototype.isPatternMissing=function(r){if(!r)return!1;var o=this.imageManager.getPattern(r.from.toString()),n=this.imageManager.getPattern(r.to.toString());return!o||!n},or.prototype.useProgram=function(r,o){void 0===o&&(o=this.emptyProgramConfiguration),this.cache=this.cache||{};var n=""+r+(o.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new ln(this.context,Ho[r],o,Xo[r],this._showOverdrawInspector)),this.cache[n]},or.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},or.prototype.setBaseState=function(){var r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)};var ur=function(r,o,n,s,p){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===p||p,this._minZoom=r||0,this._maxZoom=o||22,this._minPitch=null==n?0:n,this._maxPitch=null==s?60:s,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ir={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ur.prototype.clone=function(){var r=new ur(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r._center=this._center,r.zoom=this.zoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._unmodified=this._unmodified,r._calcMatrices(),r},Ir.minZoom.get=function(){return this._minZoom},Ir.minZoom.set=function(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))},Ir.maxZoom.get=function(){return this._maxZoom},Ir.maxZoom.set=function(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))},Ir.minPitch.get=function(){return this._minPitch},Ir.minPitch.set=function(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))},Ir.maxPitch.get=function(){return this._maxPitch},Ir.maxPitch.set=function(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))},Ir.renderWorldCopies.get=function(){return this._renderWorldCopies},Ir.renderWorldCopies.set=function(r){void 0===r?r=!0:null===r&&(r=!1),this._renderWorldCopies=r},Ir.worldSize.get=function(){return this.tileSize*this.scale},Ir.centerPoint.get=function(){return this.size._div(2)},Ir.size.get=function(){return new l.Point(this.width,this.height)},Ir.bearing.get=function(){return-this.angle/Math.PI*180},Ir.bearing.set=function(r){var o=-l.wrap(r,-180,180)*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ir.pitch.get=function(){return this._pitch/Math.PI*180},Ir.pitch.set=function(r){var o=l.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())},Ir.fov.get=function(){return this._fov/Math.PI*180},Ir.fov.set=function(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())},Ir.zoom.get=function(){return this._zoom},Ir.zoom.set=function(r){var o=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom,this._constrain(),this._calcMatrices())},Ir.center.get=function(){return this._center},Ir.center.set=function(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())},ur.prototype.coveringZoomLevel=function(r){var o=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,o)},ur.prototype.getVisibleUnwrappedCoordinates=function(r){var o=[new l.UnwrappedTileID(0,r)];if(this._renderWorldCopies)for(var n=this.pointCoordinate(new l.Point(0,0)),s=this.pointCoordinate(new l.Point(this.width,0)),p=this.pointCoordinate(new l.Point(this.width,this.height)),f=this.pointCoordinate(new l.Point(0,this.height)),y=Math.floor(Math.min(n.x,s.x,p.x,f.x)),g=Math.floor(Math.max(n.x,s.x,p.x,f.x)),S=y-1;S<=g+1;S++)0!==S&&o.push(new l.UnwrappedTileID(S,r));return o},ur.prototype.coveringTiles=function(r){var o=this.coveringZoomLevel(r),n=o;if(void 0!==r.minzoom&&o<r.minzoom)return[];void 0!==r.maxzoom&&o>r.maxzoom&&(o=r.maxzoom);var s=l.MercatorCoordinate.fromLngLat(this.center),p=Math.pow(2,o),f=new l.Point(p*s.x-.5,p*s.y-.5);return function(y,g,S,k){void 0===k&&(k=!0);var L=1<<y,U={};function X(G,H,ft){var ut,_t,Ct;if(ft>=0&&ft<=L)for(ut=G;ut<H;ut++)0!==(_t=Math.floor(ut/L))&&!0!==k||(Ct=new l.OverscaledTileID(S,_t,y,(ut%L+L)%L,ft),U[Ct.key]=Ct)}var W=g.map(function(G){return new l.Point(G.x,G.y)._mult(L)});return la(W[0],W[1],W[2],0,L,X),la(W[2],W[3],W[0],0,L,X),Object.keys(U).map(function(G){return U[G]})}(o,[this.pointCoordinate(new l.Point(0,0)),this.pointCoordinate(new l.Point(this.width,0)),this.pointCoordinate(new l.Point(this.width,this.height)),this.pointCoordinate(new l.Point(0,this.height))],r.reparseOverscaled?n:o,this._renderWorldCopies).sort(function(y,g){return f.dist(y.canonical)-f.dist(g.canonical)})},ur.prototype.resize=function(r,o){this.width=r,this.height=o,this.pixelsToGLUnits=[2/r,-2/o],this._constrain(),this._calcMatrices()},Ir.unmodified.get=function(){return this._unmodified},ur.prototype.zoomScale=function(r){return Math.pow(2,r)},ur.prototype.scaleZoom=function(r){return Math.log(r)/Math.LN2},ur.prototype.project=function(r){var o=l.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(r.lng)*this.worldSize,l.mercatorYfromLat(o)*this.worldSize)},ur.prototype.unproject=function(r){return new l.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()},Ir.point.get=function(){return this.project(this.center)},ur.prototype.setLocationAtPoint=function(r,o){var n=this.pointCoordinate(o),s=this.pointCoordinate(this.centerPoint),p=this.locationCoordinate(r),f=new l.MercatorCoordinate(p.x-(n.x-s.x),p.y-(n.y-s.y));this.center=this.coordinateLocation(f),this._renderWorldCopies&&(this.center=this.center.wrap())},ur.prototype.locationPoint=function(r){return this.coordinatePoint(this.locationCoordinate(r))},ur.prototype.pointLocation=function(r){return this.coordinateLocation(this.pointCoordinate(r))},ur.prototype.locationCoordinate=function(r){return l.MercatorCoordinate.fromLngLat(r)},ur.prototype.coordinateLocation=function(r){return r.toLngLat()},ur.prototype.pointCoordinate=function(r){var o=[r.x,r.y,0,1],n=[r.x,r.y,1,1];l.transformMat4(o,o,this.pixelMatrixInverse),l.transformMat4(n,n,this.pixelMatrixInverse);var s=o[3],p=n[3],g=o[1]/s,S=n[1]/p,k=o[2]/s,L=n[2]/p,U=k===L?0:(0-k)/(L-k);return new l.MercatorCoordinate(l.number(o[0]/s,n[0]/p,U)/this.worldSize,l.number(g,S,U)/this.worldSize)},ur.prototype.coordinatePoint=function(r){var o=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.transformMat4(o,o,this.pixelMatrix),new l.Point(o[0]/o[3],o[1]/o[3])},ur.prototype.getBounds=function(){return(new l.LngLatBounds).extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},ur.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ur.prototype.setMaxBounds=function(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ur.prototype.calculatePosMatrix=function(r,o){void 0===o&&(o=!1);var n=r.key,s=o?this._alignedPosMatrixCache:this._posMatrixCache;if(s[n])return s[n];var p=r.canonical,f=this.worldSize/this.zoomScale(p.z),y=p.x+Math.pow(2,p.z)*r.wrap,g=l.identity(new Float64Array(16));return l.translate(g,g,[y*f,p.y*f,0]),l.scale(g,g,[f/l.EXTENT,f/l.EXTENT,1]),l.multiply(g,o?this.alignedProjMatrix:this.projMatrix,g),s[n]=new Float32Array(g),s[n]},ur.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ur.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var r,o,n,s,p=-90,f=90,y=-180,g=180,S=this.size,k=this._unmodified;if(this.latRange){var L=this.latRange;p=l.mercatorYfromLat(L[1])*this.worldSize,r=(f=l.mercatorYfromLat(L[0])*this.worldSize)-p<S.y?S.y/(f-p):0}if(this.lngRange){var U=this.lngRange;y=l.mercatorXfromLng(U[0])*this.worldSize,o=(g=l.mercatorXfromLng(U[1])*this.worldSize)-y<S.x?S.x/(g-y):0}var X=this.point,W=Math.max(o||0,r||0);if(W)return this.center=this.unproject(new l.Point(o?(g+y)/2:X.x,r?(f+p)/2:X.y)),this.zoom+=this.scaleZoom(W),this._unmodified=k,void(this._constraining=!1);if(this.latRange){var G=X.y,H=S.y/2;G-H<p&&(s=p+H),G+H>f&&(s=f-H)}if(this.lngRange){var ft=X.x,ut=S.x/2;ft-ut<y&&(n=y+ut),ft+ut>g&&(n=g-ut)}void 0===n&&void 0===s||(this.center=this.unproject(new l.Point(void 0!==n?n:X.x,void 0!==s?s:X.y))),this._unmodified=k,this._constraining=!1}},ur.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var r=this._fov/2,o=Math.PI/2+this._pitch,n=Math.sin(r)*this.cameraToCenterDistance/Math.sin(Math.PI-o-r),s=this.point,p=s.x,f=s.y,y=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),g=this.height/50,S=new Float64Array(16);l.perspective(S,this._fov,this.width/this.height,g,y),l.scale(S,S,[1,-1,1]),l.translate(S,S,[0,0,-this.cameraToCenterDistance]),l.rotateX(S,S,this._pitch),l.rotateZ(S,S,this.angle),l.translate(S,S,[-p,-f,0]),this.mercatorMatrix=l.scale([],S,[this.worldSize,this.worldSize,this.worldSize]),l.scale(S,S,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=S;var k=this.width%2/2,L=this.height%2/2,U=Math.cos(this.angle),X=Math.sin(this.angle),W=p-Math.round(p)+U*k+X*L,G=f-Math.round(f)+U*L+X*k,H=new Float64Array(S);if(l.translate(H,H,[W>.5?W-1:W,G>.5?G-1:G,0]),this.alignedProjMatrix=H,S=l.create(),l.scale(S,S,[this.width/2,-this.height/2,1]),l.translate(S,S,[1,-1,0]),this.labelPlaneMatrix=S,S=l.create(),l.scale(S,S,[1,-1,1]),l.translate(S,S,[-1,-1,0]),l.scale(S,S,[2/this.width,2/this.height,1]),this.glCoordMatrix=S,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(S=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=S,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ur.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var r=this.pointCoordinate(new l.Point(0,0)),o=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.transformMat4(o,o,this.pixelMatrix)[3]/this.cameraToCenterDistance},ur.prototype.getCameraPoint=function(){var o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,o))},ur.prototype.getCameraQueryGeometry=function(r){var o=this.getCameraPoint();if(1===r.length)return[r[0],o];for(var n=o.x,s=o.y,p=o.x,f=o.y,y=0,g=r;y<g.length;y+=1){var S=g[y];n=Math.min(n,S.x),s=Math.min(s,S.y),p=Math.max(p,S.x),f=Math.max(f,S.y)}return[new l.Point(n,s),new l.Point(p,s),new l.Point(p,f),new l.Point(n,f),new l.Point(n,s)]},Object.defineProperties(ur.prototype,Ir);var Ro=function(r){var o,s,p,f;this._hashName=r&&encodeURIComponent(r),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(o=this._updateHashUnthrottled.bind(this),s=!1,p=null,f=function(){p=null,s&&(o(),p=setTimeout(f,300),s=!1)},function(){return s=!0,p||f(),p})};Ro.prototype.addTo=function(r){return this._map=r,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ro.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ro.prototype.getHashString=function(r){var o=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,s=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),p=Math.pow(10,s),f=Math.round(o.lng*p)/p,y=Math.round(o.lat*p)/p,g=this._map.getBearing(),S=this._map.getPitch(),k="";if(k+=r?"/"+f+"/"+y+"/"+n:n+"/"+y+"/"+f,(g||S)&&(k+="/"+Math.round(10*g)/10),S&&(k+="/"+Math.round(S)),this._hashName){var L=this._hashName,U=!1,X=l.window.location.hash.slice(1).split("&").map(function(W){var G=W.split("=")[0];return G===L?(U=!0,G+"="+k):W}).filter(function(W){return W});return U||X.push(L+"="+k),"#"+X.join("&")}return"#"+k},Ro.prototype._getCurrentHash=function(){var r,o=this,n=l.window.location.hash.replace("#","");return this._hashName?(n.split("&").map(function(s){return s.split("=")}).forEach(function(s){s[0]===o._hashName&&(r=s)}),(r&&r[1]||"").split("/")):n.split("/")},Ro.prototype._onHashChange=function(){var r=this._getCurrentHash();if(r.length>=3&&!r.some(function(n){return isNaN(n)})){var o=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:o,pitch:+(r[4]||0)}),!0}return!1},Ro.prototype._updateHashUnthrottled=function(){var r=this.getHashString();try{l.window.history.replaceState(l.window.history.state,"",r)}catch(o){}};var kt=function(r){function o(s,p,f,y){void 0===y&&(y={});var g=I.mousePos(p.getCanvasContainer(),f),S=p.unproject(g);r.call(this,s,l.extend({point:g,lngLat:S,originalEvent:f},y)),this._defaultPrevented=!1,this.target=p}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var n={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,n),o}(l.Event),Qt=function(r){function o(s,p,f){var y=I.touchPos(p.getCanvasContainer(),f),g=y.map(function(L){return p.unproject(L)}),S=y.reduce(function(L,U,X,W){return L.add(U.div(W.length))},new l.Point(0,0)),k=p.unproject(S);r.call(this,s,{points:y,point:S,lngLats:g,lngLat:k,originalEvent:f}),this._defaultPrevented=!1}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var n={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,n),o}(l.Event),de=function(r){function o(s,p,f){r.call(this,s,{originalEvent:f}),this._defaultPrevented=!1}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var n={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,n),o}(l.Event),Te=function(r){this._map=r,this._el=r.getCanvasContainer(),this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,l.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Te.prototype.setZoomRate=function(r){this._defaultZoomRate=r},Te.prototype.setWheelZoomRate=function(r){this._wheelZoomRate=r},Te.prototype.isEnabled=function(){return!!this._enabled},Te.prototype.isActive=function(){return!!this._active},Te.prototype.isZooming=function(){return!!this._zooming},Te.prototype.enable=function(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=r&&"center"===r.around)},Te.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Te.prototype.onWheel=function(r){if(this.isEnabled()){var o=r.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY,n=l.browser.now(),s=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==o&&o%4.000244140625==0?this._type="wheel":0!==o&&Math.abs(o)<4?this._type="trackpad":s>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(s*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),r.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=r,this._delta-=o,this.isActive()||this._start(r)),r.preventDefault()}},Te.prototype._onTimeout=function(r){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(r)},Te.prototype._start=function(r){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new l.Event("movestart",{originalEvent:r})),this._map.fire(new l.Event("zoomstart",{originalEvent:r}))),this._finishTimeout&&clearTimeout(this._finishTimeout);var o=I.mousePos(this._el,r);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(o)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},Te.prototype._onScrollFrame=function(){var r=this;if(this._frameId=null,this.isActive()){var o=this._map.transform;if(0!==this._delta){var n="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,s=2/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==s&&(s=1/s);var p="number"==typeof this._targetZoom?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(p*s))),"wheel"===this._type&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var f="number"==typeof this._targetZoom?this._targetZoom:o.zoom,y=this._startZoom,g=this._easing,S=!1;if("wheel"===this._type&&y&&g){var k=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),L=g(k);o.zoom=l.number(y,f,L),k<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):S=!0}else o.zoom=f,S=!0;o.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new l.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new l.Event("zoom",{originalEvent:this._lastWheelEvent})),S&&(this._active=!1,this._finishTimeout=setTimeout(function(){r._zooming=!1,r._map.fire(new l.Event("zoomend",{originalEvent:r._lastWheelEvent})),r._map.fire(new l.Event("moveend",{originalEvent:r._lastWheelEvent})),delete r._targetZoom},200))}},Te.prototype._smoothOutEasing=function(r){var o=l.ease;if(this._prevEase){var n=this._prevEase,s=(l.browser.now()-n.start)/n.duration,p=n.easing(s+.01)-n.easing(s),f=.27/Math.sqrt(p*p+1e-4)*.01,y=Math.sqrt(.0729-f*f);o=l.bezier(f,y,.25,1)}return this._prevEase={start:l.browser.now(),duration:r,easing:o},o};var ve=function(r,o){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=o.clickTolerance||1,l.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};ve.prototype.isEnabled=function(){return!!this._enabled},ve.prototype.isActive=function(){return!!this._active},ve.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ve.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ve.prototype.onMouseDown=function(r){this.isEnabled()&&r.shiftKey&&0===r.button&&(l.window.document.addEventListener("mousemove",this._onMouseMove,!1),l.window.document.addEventListener("keydown",this._onKeyDown,!1),l.window.document.addEventListener("mouseup",this._onMouseUp,!1),I.disableDrag(),this._startPos=this._lastPos=I.mousePos(this._el,r),this._active=!0)},ve.prototype._onMouseMove=function(r){var o=I.mousePos(this._el,r);if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=o,this._box||(this._box=I.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));var s=Math.min(n.x,o.x),p=Math.max(n.x,o.x),f=Math.min(n.y,o.y),y=Math.max(n.y,o.y);I.setTransform(this._box,"translate("+s+"px,"+f+"px)"),this._box.style.width=p-s+"px",this._box.style.height=y-f+"px"}},ve.prototype._onMouseUp=function(r){if(0===r.button){var o=this._startPos,n=I.mousePos(this._el,r);this._finish(),I.suppressClick(),o.x===n.x&&o.y===n.y?this._fireEvent("boxzoomcancel",r):this._map.fitScreenCoordinates(o,n,this._map.getBearing(),{linear:!0}).fire(new l.Event("boxzoomend",{originalEvent:r}))}},ve.prototype._onKeyDown=function(r){27===r.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",r))},ve.prototype._finish=function(){this._active=!1,l.window.document.removeEventListener("mousemove",this._onMouseMove,!1),l.window.document.removeEventListener("keydown",this._onKeyDown,!1),l.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos},ve.prototype._fireEvent=function(r,o){return this._map.fire(new l.Event(r,{originalEvent:o}))};var yi=l.bezier(0,0,.25,1),Je=function(r,o){this._map=r,this._el=o.element||r.getCanvasContainer(),this._state="disabled",this._button=o.button||"right",this._bearingSnap=o.bearingSnap||0,this._pitchWithRotate=!1!==o.pitchWithRotate,this._clickTolerance=o.clickTolerance||1,l.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};Je.prototype.isEnabled=function(){return"disabled"!==this._state},Je.prototype.isActive=function(){return"active"===this._state},Je.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Je.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Je.prototype.onMouseDown=function(r){if("enabled"===this._state){var o="touchstart"===r.type;if(o)this._startTime=Date.now();else if("right"===this._button){if(this._eventButton=I.mouseButton(r),this._eventButton!==(r.ctrlKey?0:2))return}else{if(r.ctrlKey||0!==I.mouseButton(r))return;this._eventButton=0}I.disableDrag(),o?(l.window.document.addEventListener("touchmove",this._onMouseMove,{capture:!0}),l.window.document.addEventListener("touchend",this._onMouseUp)):(l.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),l.window.document.addEventListener("mouseup",this._onMouseUp)),l.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[l.browser.now(),this._map.getBearing()]],this._startPos=this._prevPos=this._lastPos=I.mousePos(this._el,r),this._center=this._map.transform.centerPoint,r.preventDefault()}},Je.prototype._onMouseMove=function(r){var o=I.mousePos(this._el,r);this._lastPos.equals(o)||"pending"===this._state&&o.dist(this._startPos)<this._clickTolerance||(this._lastMoveEvent=r,this._lastPos=o,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",r),this._fireEvent("movestart",r),this._pitchWithRotate&&this._fireEvent("pitchstart",r)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Je.prototype._onDragFrame=function(){this._frameId=null;var r=this._lastMoveEvent;if(r){var o=this._map.transform,n=this._prevPos,s=this._lastPos,y=o.bearing-.8*(n.x-s.x),g=o.pitch- -.5*(n.y-s.y),S=this._inertia,k=S[S.length-1];this._drainInertiaBuffer(),S.push([l.browser.now(),this._map._normalizeBearing(y,k[1])]);var L=o.bearing;if(o.bearing=y,this._pitchWithRotate){var U=o.pitch;o.pitch=g,o.pitch!==U&&this._fireEvent("pitch",r)}o.bearing!==L&&this._fireEvent("rotate",r),this._fireEvent("move",r),delete this._lastMoveEvent,this._prevPos=this._lastPos}},Je.prototype._onMouseUp=function(r){var o="touchend"===r.type;if(o&&this._startPos===this._lastPos&&Date.now()-this._startTime<300&&this._el.click(),o||I.mouseButton(r)===this._eventButton)switch(this._state){case"active":this._state="enabled",I.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(r);break;case"pending":this._state="enabled",this._unbind()}},Je.prototype._onBlur=function(r){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",r),this._pitchWithRotate&&this._fireEvent("pitchend",r),this._fireEvent("moveend",r);break;case"pending":this._state="enabled",this._unbind()}},Je.prototype._unbind=function(){l.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),l.window.document.removeEventListener("mouseup",this._onMouseUp),l.window.document.removeEventListener("touchmove",this._onMouseMove,{capture:!0}),l.window.document.removeEventListener("touchend",this._onMouseUp),l.window.removeEventListener("blur",this._onBlur),I.enableDrag()},Je.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._lastPos},Je.prototype._inertialRotate=function(r){var o=this;this._fireEvent("rotateend",r),this._drainInertiaBuffer();var n=this._map,s=n.getBearing(),p=this._inertia,f=function(){Math.abs(s)<o._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:r}):o._fireEvent("moveend",r),o._pitchWithRotate&&o._fireEvent("pitchend",r)};if(p.length<2)f();else{var y=p[0],g=p[p.length-1],k=n._normalizeBearing(s,p[p.length-2][1]),L=g[1]-y[1],U=L<0?-1:1,X=(g[0]-y[0])/1e3;if(0!==L&&0!==X){var W=Math.abs(L*(.25/X));W>180&&(W=180);var G=W/180;k+=U*W*(G/2),Math.abs(n._normalizeBearing(k,0))<this._bearingSnap&&(k=n._normalizeBearing(0,k)),n.rotateTo(k,{duration:1e3*G,easing:yi,noMoveStart:!0},{originalEvent:r})}else f()}},Je.prototype._fireEvent=function(r,o){return this._map.fire(new l.Event(r,o?{originalEvent:o}:{}))},Je.prototype._drainInertiaBuffer=function(){for(var r=this._inertia,o=l.browser.now();r.length>0&&o-r[0][0]>160;)r.shift()};var oe={linearity:.3,easing:l.bezier(0,0,.3,1),maxSpeed:1400,deceleration:2500},ci=function(r,o){this._map=r,this._el=r.getCanvasContainer(),this._state="disabled",this._clickTolerance=o.clickTolerance||1,this._inertiaOptions=oe,l.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};ci.prototype.isEnabled=function(){return"disabled"!==this._state},ci.prototype.isActive=function(){return"active"===this._state},ci.prototype.enable=function(r){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled",this._inertiaOptions=l.extend(oe,r))},ci.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},ci.prototype.onMouseDown=function(r){"enabled"===this._state&&(r.ctrlKey||0!==I.mouseButton(r)||(I.addEventListener(l.window.document,"mousemove",this._onMove,{capture:!0}),I.addEventListener(l.window.document,"mouseup",this._onMouseUp),this._start(r)))},ci.prototype.onTouchStart=function(r){this.isEnabled()&&(r.touches&&r.touches.length>1&&("pending"===this._state||"active"===this._state)||(I.addEventListener(l.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),I.addEventListener(l.window.document,"touchend",this._onTouchEnd),this._start(r)))},ci.prototype._start=function(r){l.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._prevPos=this._lastPos=I.mousePos(this._el,r),this._startTouch=this._lastTouch=l.window.TouchEvent&&r instanceof l.window.TouchEvent?I.touchPos(this._el,r):null,this._inertia=[[l.browser.now(),this._startPos]]},ci.prototype._touchesMatch=function(r,o){return!(!r||!o||r.length!==o.length)&&r.every(function(n,s){return o[s]===n})},ci.prototype._onMove=function(r){r.preventDefault();var o=l.window.TouchEvent&&r instanceof l.window.TouchEvent?I.touchPos(this._el,r):null,n=I.mousePos(this._el,r);(o?this._touchesMatch(this._lastTouch,o):this._lastPos.equals(n))||"pending"===this._state&&n.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=r,this._lastPos=n,this._lastTouch=o,this._drainInertiaBuffer(),this._inertia.push([l.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._shouldStart=!0),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},ci.prototype._onDragFrame=function(){this._frameId=null;var r=this._lastMoveEvent;if(r)if(this._map.touchZoomRotate.isActive())this._abort(r);else if(this._shouldStart&&(this._fireEvent("dragstart",r),this._fireEvent("movestart",r),this._shouldStart=!1),this.isActive()){var o=this._map.transform;o.setLocationAtPoint(o.pointLocation(this._prevPos),this._lastPos),this._fireEvent("drag",r),this._fireEvent("move",r),this._prevPos=this._lastPos,delete this._lastMoveEvent}},ci.prototype._onMouseUp=function(r){if(0===I.mouseButton(r))switch(this._state){case"active":this._state="enabled",I.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(r);break;case"pending":this._state="enabled",this._unbind()}},ci.prototype._onTouchEnd=function(r){if(r.touches&&0!==r.touches.length)switch(this._state){case"pending":case"active":break;case"enabled":this.onTouchStart(r)}else switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(r);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},ci.prototype._abort=function(r){switch(this._state){case"active":this._state="enabled",this._shouldStart||(this._fireEvent("dragend",r),this._fireEvent("moveend",r)),this._unbind(),this._deactivate(),l.window.TouchEvent&&r instanceof l.window.TouchEvent&&r.touches.length>1&&I.addEventListener(l.window.document,"touchend",this._onTouchEnd);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},ci.prototype._onBlur=function(r){this._abort(r)},ci.prototype._unbind=function(){I.removeEventListener(l.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),I.removeEventListener(l.window.document,"touchend",this._onTouchEnd),I.removeEventListener(l.window.document,"mousemove",this._onMove,{capture:!0}),I.removeEventListener(l.window.document,"mouseup",this._onMouseUp),I.removeEventListener(l.window,"blur",this._onBlur)},ci.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._mouseDownPos,delete this._lastPos,delete this._startTouch,delete this._lastTouch,delete this._shouldStart},ci.prototype._inertialPan=function(r){this._fireEvent("dragend",r),this._drainInertiaBuffer();var o=this._inertia;if(o.length<2)this._fireEvent("moveend",r);else{var n=o[o.length-1],s=o[0],p=n[1].sub(s[1]),f=(n[0]-s[0])/1e3;if(0===f||n[1].equals(s[1]))this._fireEvent("moveend",r);else{var y=this._inertiaOptions,g=y.linearity,S=y.easing,k=y.maxSpeed,L=y.deceleration,U=p.mult(g/f),X=U.mag();X>k&&(X=k,U._unit()._mult(X));var W=X/(L*g),G=U.mult(-W/2);this._map.panBy(G,{duration:1e3*W,easing:S,noMoveStart:!0},{originalEvent:r})}}},ci.prototype._fireEvent=function(r,o){return this._map.fire(new l.Event(r,o?{originalEvent:o}:{}))},ci.prototype._drainInertiaBuffer=function(){for(var r=this._inertia,o=l.browser.now();r.length>0&&o-r[0][0]>160;)r.shift()};var kr=function(r){this._map=r,this._el=r.getCanvasContainer(),l.bindAll(["_onKeyDown"],this)};function Br(r){return r*(2-r)}kr.prototype.isEnabled=function(){return!!this._enabled},kr.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},kr.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},kr.prototype._onKeyDown=function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var o=0,n=0,s=0,p=0,f=0;switch(r.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:r.shiftKey?n=-1:(r.preventDefault(),p=-1);break;case 39:r.shiftKey?n=1:(r.preventDefault(),p=1);break;case 38:r.shiftKey?s=1:(r.preventDefault(),f=-1);break;case 40:r.shiftKey?s=-1:(f=1,r.preventDefault());break;default:return}var y=this._map,g=y.getZoom(),S={duration:300,delayEndEvents:500,easing:Br,zoom:o?Math.round(g)+o*(r.shiftKey?2:1):g,bearing:y.getBearing()+15*n,pitch:y.getPitch()+10*s,offset:[100*-p,100*-f],center:y.getCenter()};y.easeTo(S,{originalEvent:r})}};var Vi=function(r){this._map=r,l.bindAll(["_onDblClick","_onZoomEnd"],this)};Vi.prototype.isEnabled=function(){return!!this._enabled},Vi.prototype.isActive=function(){return!!this._active},Vi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Vi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Vi.prototype.onTouchStart=function(r){var o=this;if(this.isEnabled()&&!(r.points.length>1))if(this._tapped){var s=this._tappedPoint;if(s&&s.dist(r.points[0])<=30){r.originalEvent.preventDefault();var p=function(){o._tapped&&o._zoom(r),o._map.off("touchcancel",f),o._resetTapped()},f=function(){o._map.off("touchend",p),o._resetTapped()};this._map.once("touchend",p),this._map.once("touchcancel",f)}else this._resetTapped()}else this._tappedPoint=r.points[0],this._tapped=setTimeout(function(){o._tapped=null,o._tappedPoint=null},300)},Vi.prototype._resetTapped=function(){clearTimeout(this._tapped),this._tapped=null,this._tappedPoint=null},Vi.prototype.onDblClick=function(r){this.isEnabled()&&(r.originalEvent.preventDefault(),this._zoom(r))},Vi.prototype._zoom=function(r){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(r.originalEvent.shiftKey?-1:1),{around:r.lngLat},r)},Vi.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var Gr=l.bezier(0,0,.15,1),Nr=function(r){this._map=r,this._el=r.getCanvasContainer(),l.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Nr.prototype.isEnabled=function(){return!!this._enabled},Nr.prototype.enable=function(r){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!r&&"center"===r.around)},Nr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},Nr.prototype.disableRotation=function(){this._rotationDisabled=!0},Nr.prototype.enableRotation=function(){this._rotationDisabled=!1},Nr.prototype.isActive=function(){return this.isEnabled()&&!!this._gestureIntent},Nr.prototype.onStart=function(r){if(this.isEnabled()&&2===r.touches.length){var o=I.mousePos(this._el,r.touches[0]),n=I.mousePos(this._el,r.touches[1]),s=o.add(n).div(2);this._startVec=o.sub(n),this._startAround=this._map.transform.pointLocation(s),this._gestureIntent=void 0,this._inertia=[],I.addEventListener(l.window.document,"touchmove",this._onMove,{passive:!1}),I.addEventListener(l.window.document,"touchend",this._onEnd)}},Nr.prototype._getTouchEventData=function(r){var o=I.mousePos(this._el,r.touches[0]),n=I.mousePos(this._el,r.touches[1]),s=o.sub(n);return{vec:s,center:o.add(n).div(2),scale:s.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*s.angleWith(this._startVec)/Math.PI}},Nr.prototype._onMove=function(r){if(2===r.touches.length){var o=this._getTouchEventData(r),n=o.vec,s=o.scale,p=o.bearing;if(!this._gestureIntent){var f=this._rotationDisabled&&1!==s||Math.abs(1-s)>.15;Math.abs(p)>10?this._gestureIntent="rotate":f&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new l.Event(this._gestureIntent+"start",{originalEvent:r})),this._map.fire(new l.Event("movestart",{originalEvent:r})),this._startVec=n)}this._lastTouchEvent=r,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),r.preventDefault()}},Nr.prototype._onTouchFrame=function(){this._frameId=null;var r=this._gestureIntent;if(r){var o=this._map.transform;this._startScale||(this._startScale=o.scale,this._startBearing=o.bearing);var n=this._getTouchEventData(this._lastTouchEvent),s=n.center,p=n.bearing,f=n.scale,y=o.pointLocation(s),g=o.locationPoint(y);"rotate"===r&&(o.bearing=this._startBearing+p),o.zoom=o.scaleZoom(this._startScale*f),o.setLocationAtPoint(this._startAround,g),this._map.fire(new l.Event(r,{originalEvent:this._lastTouchEvent})),this._map.fire(new l.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([l.browser.now(),f,s])}},Nr.prototype._onEnd=function(r){I.removeEventListener(l.window.document,"touchmove",this._onMove,{passive:!1}),I.removeEventListener(l.window.document,"touchend",this._onEnd);var o=this._gestureIntent,n=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,o){this._map.fire(new l.Event(o+"end",{originalEvent:r})),this._drainInertiaBuffer();var s=this._inertia,p=this._map;if(s.length<2)p.snapToNorth({},{originalEvent:r});else{var f=s[s.length-1],y=s[0],g=p.transform.scaleZoom(n*f[1]),S=p.transform.scaleZoom(n*y[1]),L=(f[0]-y[0])/1e3,U=f[2];if(0!==L&&g!==S){var X=.15*(g-S)/L;Math.abs(X)>2.5&&(X=X>0?2.5:-2.5);var W=1e3*Math.abs(X/(12*.15));p.easeTo({zoom:g+X*W/2e3,duration:W,easing:Gr,around:this._aroundCenter?p.getCenter():p.unproject(U),noMoveStart:!0},{originalEvent:r})}else p.snapToNorth({},{originalEvent:r})}}},Nr.prototype._drainInertiaBuffer=function(){for(var r=this._inertia,o=l.browser.now();r.length>2&&o-r[0][0]>160;)r.shift()};var ce={scrollZoom:Te,boxZoom:ve,dragRotate:Je,dragPan:ci,keyboard:kr,doubleClickZoom:Vi,touchZoomRotate:Nr},co=function(r){function o(n,s){r.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=s.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},o.prototype.setCenter=function(n,s){return this.jumpTo({center:n},s)},o.prototype.panBy=function(n,s,p){return n=l.Point.convert(n).mult(-1),this.panTo(this.transform.center,l.extend({offset:n},s),p)},o.prototype.panTo=function(n,s,p){return this.easeTo(l.extend({center:n},s),p)},o.prototype.getZoom=function(){return this.transform.zoom},o.prototype.setZoom=function(n,s){return this.jumpTo({zoom:n},s),this},o.prototype.zoomTo=function(n,s,p){return this.easeTo(l.extend({zoom:n},s),p)},o.prototype.zoomIn=function(n,s){return this.zoomTo(this.getZoom()+1,n,s),this},o.prototype.zoomOut=function(n,s){return this.zoomTo(this.getZoom()-1,n,s),this},o.prototype.getBearing=function(){return this.transform.bearing},o.prototype.setBearing=function(n,s){return this.jumpTo({bearing:n},s),this},o.prototype.rotateTo=function(n,s,p){return this.easeTo(l.extend({bearing:n},s),p)},o.prototype.resetNorth=function(n,s){return this.rotateTo(0,l.extend({duration:1e3},n),s),this},o.prototype.resetNorthPitch=function(n,s){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},n),s),this},o.prototype.snapToNorth=function(n,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,s):this},o.prototype.getPitch=function(){return this.transform.pitch},o.prototype.setPitch=function(n,s){return this.jumpTo({pitch:n},s),this},o.prototype.cameraForBounds=function(n,s){return n=l.LngLatBounds.convert(n),this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),0,s)},o.prototype._cameraForBoxAndBearing=function(n,s,p,f){if("number"==typeof(f=l.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding){var y=f.padding;f.padding={top:y,bottom:y,right:y,left:y}}if(l.deepEqual(Object.keys(f.padding).sort(function(te,le){return te<le?-1:te>le?1:0}),["bottom","left","right","top"])){var g=this.transform,S=g.project(l.LngLat.convert(n)),k=g.project(l.LngLat.convert(s)),L=S.rotate(-p*Math.PI/180),U=k.rotate(-p*Math.PI/180),X=new l.Point(Math.max(L.x,U.x),Math.max(L.y,U.y)),W=new l.Point(Math.min(L.x,U.x),Math.min(L.y,U.y)),G=X.sub(W),H=(g.width-f.padding.left-f.padding.right)/G.x,ft=(g.height-f.padding.top-f.padding.bottom)/G.y;if(!(ft<0||H<0)){var ut=Math.min(g.scaleZoom(g.scale*Math.min(H,ft)),f.maxZoom),_t=l.Point.convert(f.offset),Ut=new l.Point(_t.x+(f.padding.left-f.padding.right)/2,_t.y+(f.padding.top-f.padding.bottom)/2).mult(g.scale/g.zoomScale(ut));return{center:g.unproject(S.add(k).div(2).sub(Ut)),zoom:ut,bearing:p}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else l.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},o.prototype.fitBounds=function(n,s,p){return this._fitInternal(this.cameraForBounds(n,s),s,p)},o.prototype.fitScreenCoordinates=function(n,s,p,f,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(n)),this.transform.pointLocation(l.Point.convert(s)),p,f),f,y)},o.prototype._fitInternal=function(n,s,p){return n?(s=l.extend(n,s)).linear?this.easeTo(s,p):this.flyTo(s,p):this},o.prototype.jumpTo=function(n,s){this.stop();var p=this.transform,f=!1,y=!1,g=!1;return"zoom"in n&&p.zoom!==+n.zoom&&(f=!0,p.zoom=+n.zoom),void 0!==n.center&&(p.center=l.LngLat.convert(n.center)),"bearing"in n&&p.bearing!==+n.bearing&&(y=!0,p.bearing=+n.bearing),"pitch"in n&&p.pitch!==+n.pitch&&(g=!0,p.pitch=+n.pitch),this.fire(new l.Event("movestart",s)).fire(new l.Event("move",s)),f&&this.fire(new l.Event("zoomstart",s)).fire(new l.Event("zoom",s)).fire(new l.Event("zoomend",s)),y&&this.fire(new l.Event("rotatestart",s)).fire(new l.Event("rotate",s)).fire(new l.Event("rotateend",s)),g&&this.fire(new l.Event("pitchstart",s)).fire(new l.Event("pitch",s)).fire(new l.Event("pitchend",s)),this.fire(new l.Event("moveend",s))},o.prototype.easeTo=function(n,s){var p=this;this.stop(),(!1===(n=l.extend({offset:[0,0],duration:500,easing:l.ease},n)).animate||!n.essential&&l.browser.prefersReducedMotion)&&(n.duration=0);var f=this.transform,y=this.getZoom(),g=this.getBearing(),S=this.getPitch(),k="zoom"in n?+n.zoom:y,L="bearing"in n?this._normalizeBearing(n.bearing,g):g,U="pitch"in n?+n.pitch:S,X=f.centerPoint.add(l.Point.convert(n.offset)),W=f.pointLocation(X),G=l.LngLat.convert(n.center||W);this._normalizeCenter(G);var H,ft,ut=f.project(W),_t=f.project(G).sub(ut),St=f.zoomScale(k-y);return n.around&&(H=l.LngLat.convert(n.around),ft=f.locationPoint(H)),this._zooming=k!==y,this._rotating=g!==L,this._pitching=U!==S,this._prepareEase(s,n.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(Ct){if(p._zooming&&(f.zoom=l.number(y,k,Ct)),p._rotating&&(f.bearing=l.number(g,L,Ct)),p._pitching&&(f.pitch=l.number(S,U,Ct)),H)f.setLocationAtPoint(H,ft);else{var Ut=f.zoomScale(f.zoom-y),te=k>y?Math.min(2,St):Math.max(.5,St),le=Math.pow(te,1-Ct),De=f.unproject(ut.add(_t.mult(Ct*le)).mult(Ut));f.setLocationAtPoint(f.renderWorldCopies?De.wrap():De,X)}p._fireMoveEvents(s)},function(){n.delayEndEvents?p._easeEndTimeoutID=setTimeout(function(){return p._afterEase(s)},n.delayEndEvents):p._afterEase(s)},n),this},o.prototype._prepareEase=function(n,s){this._moving=!0,s||this.fire(new l.Event("movestart",n)),this._zooming&&this.fire(new l.Event("zoomstart",n)),this._rotating&&this.fire(new l.Event("rotatestart",n)),this._pitching&&this.fire(new l.Event("pitchstart",n))},o.prototype._fireMoveEvents=function(n){this.fire(new l.Event("move",n)),this._zooming&&this.fire(new l.Event("zoom",n)),this._rotating&&this.fire(new l.Event("rotate",n)),this._pitching&&this.fire(new l.Event("pitch",n))},o.prototype._afterEase=function(n){var s=this._zooming,p=this._rotating,f=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,s&&this.fire(new l.Event("zoomend",n)),p&&this.fire(new l.Event("rotateend",n)),f&&this.fire(new l.Event("pitchend",n)),this.fire(new l.Event("moveend",n))},o.prototype.flyTo=function(n,s){var p=this;if(!n.essential&&l.browser.prefersReducedMotion){var f=l.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(f,s)}this.stop(),n=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},n);var y=this.transform,g=this.getZoom(),S=this.getBearing(),k=this.getPitch(),L="zoom"in n?l.clamp(+n.zoom,y.minZoom,y.maxZoom):g,U="bearing"in n?this._normalizeBearing(n.bearing,S):S,X="pitch"in n?+n.pitch:k,W=y.zoomScale(L-g),G=y.centerPoint.add(l.Point.convert(n.offset)),H=y.pointLocation(G),ft=l.LngLat.convert(n.center||H);this._normalizeCenter(ft);var ut=y.project(H),_t=y.project(ft).sub(ut),St=n.curve,Ct=Math.max(y.width,y.height),Ut=Ct/W,te=_t.mag();if("minZoom"in n){var le=l.clamp(Math.min(n.minZoom,g,L),y.minZoom,y.maxZoom),De=Ct/y.zoomScale(le-g);St=Math.sqrt(De/te*2)}var Ce=St*St;function $e(xi){var hr=(Ut*Ut-Ct*Ct+(xi?-1:1)*Ce*Ce*te*te)/(2*(xi?Ut:Ct)*Ce*te);return Math.log(Math.sqrt(hr*hr+1)-hr)}function Se(xi){return(Math.exp(xi)-Math.exp(-xi))/2}function fi(xi){return(Math.exp(xi)+Math.exp(-xi))/2}var ni=$e(0),si=function(xi){return fi(ni)/fi(ni+St*xi)},li=function(xi){return Ct*((fi(ni)*(Se(hr=ni+St*xi)/fi(hr))-Se(ni))/Ce)/te;var hr},vi=($e(1)-ni)/St;if(Math.abs(te)<1e-6||!isFinite(vi)){if(Math.abs(Ct-Ut)<1e-6)return this.easeTo(n,s);var ui=Ut<Ct?-1:1;vi=Math.abs(Math.log(Ut/Ct))/St,li=function(){return 0},si=function(xi){return Math.exp(ui*St*xi)}}return n.duration="duration"in n?+n.duration:1e3*vi/("screenSpeed"in n?+n.screenSpeed/St:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=S!==U,this._pitching=X!==k,this._prepareEase(s,!1),this._ease(function(xi){var hr=xi*vi,Ji=1/si(hr);y.zoom=1===xi?L:g+y.scaleZoom(Ji),p._rotating&&(y.bearing=l.number(S,U,xi)),p._pitching&&(y.pitch=l.number(k,X,xi));var $i=1===xi?ft:y.unproject(ut.add(_t.mult(li(hr))).mult(Ji));y.setLocationAtPoint(y.renderWorldCopies?$i.wrap():$i,G),p._fireMoveEvents(s)},function(){return p._afterEase(s)},n),this},o.prototype.isEasing=function(){return!!this._easeFrameId},o.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this)}return this},o.prototype._ease=function(n,s,p){!1===p.animate||0===p.duration?(n(1),s()):(this._easeStart=l.browser.now(),this._easeOptions=p,this._onEaseFrame=n,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},o.prototype._renderFrameCallback=function(){var n=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},o.prototype._normalizeBearing=function(n,s){n=l.wrap(n,-180,180);var p=Math.abs(n-s);return Math.abs(n-360-s)<p&&(n-=360),Math.abs(n+360-s)<p&&(n+=360),n},o.prototype._normalizeCenter=function(n){var s=this.transform;if(s.renderWorldCopies&&!s.lngRange){var p=n.lng-s.center.lng;n.lng+=p>180?-360:p<-180?360:0}},o}(l.Evented),Cn=function(r){void 0===r&&(r={}),this.options=r,l.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Cn.prototype.getDefaultPosition=function(){return"bottom-right"},Cn.prototype.onAdd=function(r){var o=this.options&&this.options.compact;return this._map=r,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=I.create("div","mapboxgl-ctrl-attrib-inner",this._container),o&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===o&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Cn.prototype.onRemove=function(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Cn.prototype._updateEditLink=function(){var r=this._editLink;r||(r=this._editLink=this._container.querySelector(".mapbox-improve-map"));var o=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(r){var n=o.reduce(function(s,p,f){return p.value&&(s+=p.key+"="+p.value+(f<o.length-1?"&":"")),s},"?");r.href=l.config.FEEDBACK_URL+"/"+n+(this._map._hash?this._map._hash.getHashString(!0):""),r.rel="noopener nofollow"}},Cn.prototype._updateData=function(r){!r||"metadata"!==r.sourceDataType&&"style"!==r.dataType||(this._updateAttributions(),this._updateEditLink())},Cn.prototype._updateAttributions=function(){if(this._map.style){var r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(function(g){return"string"!=typeof g?"":g})):"string"==typeof this.options.customAttribution&&r.push(this.options.customAttribution)),this._map.style.stylesheet){var o=this._map.style.stylesheet;this.styleOwner=o.owner,this.styleId=o.id}var n=this._map.style.sourceCaches;for(var s in n){var p=n[s];if(p.used){var f=p.getSource();f.attribution&&r.indexOf(f.attribution)<0&&r.push(f.attribution)}}r.sort(function(g,S){return g.length-S.length});var y=(r=r.filter(function(g,S){for(var k=S+1;k<r.length;k++)if(r[k].indexOf(g)>=0)return!1;return!0})).join(" | ");y!==this._attribHTML&&(this._attribHTML=y,r.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Cn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Bn=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};Bn.prototype.onAdd=function(r){this._map=r,this._container=I.create("div","mapboxgl-ctrl");var o=I.create("a","mapboxgl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://www.mapbox.com/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Bn.prototype.onRemove=function(){I.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Bn.prototype.getDefaultPosition=function(){return"bottom-left"},Bn.prototype._updateLogo=function(r){r&&"metadata"!==r.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Bn.prototype._logoRequired=function(){if(this._map.style){var r=this._map.style.sourceCaches;for(var o in r)if(r[o].getSource().mapbox_logo)return!0;return!1}},Bn.prototype._updateCompact=function(){var r=this._container.children;if(r.length){var o=r[0];this._map.getCanvasContainer().offsetWidth<250?o.classList.add("mapboxgl-compact"):o.classList.remove("mapboxgl-compact")}};var fn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};fn.prototype.add=function(r){var o=++this._id;return this._queue.push({callback:r,id:o,cancelled:!1}),o},fn.prototype.remove=function(r){for(var o=this._currentlyRunning,n=0,s=o?this._queue.concat(o):this._queue;n<s.length;n+=1){var p=s[n];if(p.id===r)return void(p.cancelled=!0)}},fn.prototype.run=function(){var r=this._currentlyRunning=this._queue;this._queue=[];for(var o=0,n=r;o<n.length;o+=1){var s=n[o];if(!s.cancelled&&(s.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},fn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ra={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Po=l.window.HTMLImageElement,Mo=l.window.HTMLElement,no=l.window.ImageBitmap,Ds={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},oo=function(r){function o(s){var p=this;if(null!=(s=l.extend({},Ds,s)).minZoom&&null!=s.maxZoom&&s.minZoom>s.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=s.minPitch&&null!=s.maxPitch&&s.minPitch>s.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=s.minPitch&&s.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=s.maxPitch&&s.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var f=new ur(s.minZoom,s.maxZoom,s.minPitch,s.maxPitch,s.renderWorldCopies);if(r.call(this,f,s),this._interactive=s.interactive,this._maxTileCacheSize=s.maxTileCacheSize,this._failIfMajorPerformanceCaveat=s.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=s.preserveDrawingBuffer,this._antialias=s.antialias,this._trackResize=s.trackResize,this._bearingSnap=s.bearingSnap,this._refreshExpiredTiles=s.refreshExpiredTiles,this._fadeDuration=s.fadeDuration,this._crossSourceCollisions=s.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=s.collectResourceTiming,this._renderTaskQueue=new fn,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Ra,s.locale),this._requestManager=new l.RequestManager(s.transformRequest,s.accessToken),"string"==typeof s.container){if(this._container=l.window.document.getElementById(s.container),!this._container)throw new Error("Container '"+s.container+"' not found.")}else{if(!(s.container instanceof Mo))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=s.container}if(s.maxBounds&&this.setMaxBounds(s.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return p._update(!1)}),this.on("moveend",function(){return p._update(!1)}),this.on("zoom",function(){return p._update(!0)}),void 0!==l.window&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1)),function(g,S){var k=g.getCanvasContainer(),L=null,U=!1,X=null;for(var W in ce)g[W]=new ce[W](g,S),S.interactive&&S[W]&&g[W].enable(S[W]);I.addEventListener(k,"mouseout",function(G){g.fire(new kt("mouseout",g,G))}),I.addEventListener(k,"mousedown",function(G){U=!0,X=I.mousePos(k,G);var H=new kt("mousedown",g,G);g.fire(H),!H.defaultPrevented&&(S.interactive&&!g.doubleClickZoom.isActive()&&g.stop(),g.boxZoom.onMouseDown(G),g.boxZoom.isActive()||g.dragPan.isActive()||g.dragRotate.onMouseDown(G),g.boxZoom.isActive()||g.dragRotate.isActive()||g.dragPan.onMouseDown(G))}),I.addEventListener(k,"mouseup",function(G){var H=g.dragRotate.isActive();L&&!H&&g.fire(new kt("contextmenu",g,L)),L=null,U=!1,g.fire(new kt("mouseup",g,G))}),I.addEventListener(k,"mousemove",function(G){if(!g.dragPan.isActive()&&!g.dragRotate.isActive()){for(var H=G.target;H&&H!==k;)H=H.parentNode;H===k&&g.fire(new kt("mousemove",g,G))}}),I.addEventListener(k,"mouseover",function(G){for(var H=G.target;H&&H!==k;)H=H.parentNode;H===k&&g.fire(new kt("mouseover",g,G))}),I.addEventListener(k,"touchstart",function(G){var H=new Qt("touchstart",g,G);g.fire(H),!H.defaultPrevented&&(S.interactive&&g.stop(),g.boxZoom.isActive()||g.dragRotate.isActive()||g.dragPan.onTouchStart(G),g.touchZoomRotate.onStart(G),g.doubleClickZoom.onTouchStart(H))},{passive:!1}),I.addEventListener(k,"touchmove",function(G){g.fire(new Qt("touchmove",g,G))},{passive:!1}),I.addEventListener(k,"touchend",function(G){g.fire(new Qt("touchend",g,G))}),I.addEventListener(k,"touchcancel",function(G){g.fire(new Qt("touchcancel",g,G))}),I.addEventListener(k,"click",function(G){var H=I.mousePos(k,G);(!X||H.equals(X)||H.dist(X)<S.clickTolerance)&&g.fire(new kt("click",g,G))}),I.addEventListener(k,"dblclick",function(G){var H=new kt("dblclick",g,G);g.fire(H),!H.defaultPrevented&&g.doubleClickZoom.onDblClick(H)}),I.addEventListener(k,"contextmenu",function(G){var H=g.dragRotate.isActive();U||H?U&&(L=G):g.fire(new kt("contextmenu",g,G)),(g.dragRotate.isEnabled()||g.listens("contextmenu"))&&G.preventDefault()}),I.addEventListener(k,"wheel",function(G){S.interactive&&g.stop();var H=new de("wheel",g,G);g.fire(H),!H.defaultPrevented&&g.scrollZoom.onWheel(G)},{passive:!1})}(this,s),this._hash=s.hash&&new Ro("string"==typeof s.hash&&s.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}),s.bounds&&(this.resize(),this.fitBounds(s.bounds,l.extend({},s.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=s.localIdeographFontFamily,s.style&&this.setStyle(s.style,{localIdeographFontFamily:s.localIdeographFontFamily}),s.attributionControl&&this.addControl(new Cn({customAttribution:s.customAttribution})),this.addControl(new Bn,s.logoPosition),this.on("style.load",function(){p.transform.unmodified&&p.jumpTo(p.style.stylesheet)}),this.on("data",function(g){p._update("style"===g.dataType),p.fire(new l.Event(g.dataType+"data",g))}),this.on("dataloading",function(g){p.fire(new l.Event(g.dataType+"dataloading",g))})}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var n={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return o.prototype._getMapId=function(){return this._mapId},o.prototype.addControl=function(s,p){if(void 0===p&&s.getDefaultPosition&&(p=s.getDefaultPosition()),void 0===p&&(p="top-right"),!s||!s.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var f=s.onAdd(this);this._controls.push(s);var y=this._controlPositions[p];return-1!==p.indexOf("bottom")?y.insertBefore(f,y.firstChild):y.appendChild(f),this},o.prototype.removeControl=function(s){if(!s||!s.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var p=this._controls.indexOf(s);return p>-1&&this._controls.splice(p,1),s.onRemove(this),this},o.prototype.resize=function(s){var p=this._containerDimensions(),f=p[0],y=p[1];return this._resizeCanvas(f,y),this.transform.resize(f,y),this.painter.resize(f,y),this.fire(new l.Event("movestart",s)).fire(new l.Event("move",s)).fire(new l.Event("resize",s)).fire(new l.Event("moveend",s)),this},o.prototype.getBounds=function(){return this.transform.getBounds()},o.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},o.prototype.setMaxBounds=function(s){return this.transform.setMaxBounds(l.LngLatBounds.convert(s)),this._update()},o.prototype.setMinZoom=function(s){if((s=null==s?-2:s)>=-2&&s<=this.transform.maxZoom)return this.transform.minZoom=s,this._update(),this.getZoom()<s&&this.setZoom(s),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},o.prototype.getMinZoom=function(){return this.transform.minZoom},o.prototype.setMaxZoom=function(s){if((s=null==s?22:s)>=this.transform.minZoom)return this.transform.maxZoom=s,this._update(),this.getZoom()>s&&this.setZoom(s),this;throw new Error("maxZoom must be greater than the current minZoom")},o.prototype.getMaxZoom=function(){return this.transform.maxZoom},o.prototype.setMinPitch=function(s){if((s=null==s?0:s)<0)throw new Error("minPitch must be greater than or equal to 0");if(s>=0&&s<=this.transform.maxPitch)return this.transform.minPitch=s,this._update(),this.getPitch()<s&&this.setPitch(s),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},o.prototype.getMinPitch=function(){return this.transform.minPitch},o.prototype.setMaxPitch=function(s){if((s=null==s?60:s)>60)throw new Error("maxPitch must be less than or equal to 60");if(s>=this.transform.minPitch)return this.transform.maxPitch=s,this._update(),this.getPitch()>s&&this.setPitch(s),this;throw new Error("maxPitch must be greater than the current minPitch")},o.prototype.getMaxPitch=function(){return this.transform.maxPitch},o.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},o.prototype.setRenderWorldCopies=function(s){return this.transform.renderWorldCopies=s,this._update()},o.prototype.project=function(s){return this.transform.locationPoint(l.LngLat.convert(s))},o.prototype.unproject=function(s){return this.transform.pointLocation(l.Point.convert(s))},o.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},o.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},o.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},o.prototype._createDelegatedListener=function(s,p,f){var y,g=this;if("mouseenter"===s||"mouseover"===s){var S=!1;return{layer:p,listener:f,delegates:{mousemove:function(L){var U=g.getLayer(p)?g.queryRenderedFeatures(L.point,{layers:[p]}):[];U.length?S||(S=!0,f.call(g,new kt(s,g,L.originalEvent,{features:U}))):S=!1},mouseout:function(){S=!1}}}}if("mouseleave"===s||"mouseout"===s){var k=!1;return{layer:p,listener:f,delegates:{mousemove:function(L){(g.getLayer(p)?g.queryRenderedFeatures(L.point,{layers:[p]}):[]).length?k=!0:k&&(k=!1,f.call(g,new kt(s,g,L.originalEvent)))},mouseout:function(L){k&&(k=!1,f.call(g,new kt(s,g,L.originalEvent)))}}}}return{layer:p,listener:f,delegates:(y={},y[s]=function(L){var U=g.getLayer(p)?g.queryRenderedFeatures(L.point,{layers:[p]}):[];U.length&&(L.features=U,f.call(g,L),delete L.features)},y)}},o.prototype.on=function(s,p,f){if(void 0===f)return r.prototype.on.call(this,s,p);var y=this._createDelegatedListener(s,p,f);for(var g in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[s]=this._delegatedListeners[s]||[],this._delegatedListeners[s].push(y),y.delegates)this.on(g,y.delegates[g]);return this},o.prototype.once=function(s,p,f){if(void 0===f)return r.prototype.once.call(this,s,p);var y=this._createDelegatedListener(s,p,f);for(var g in y.delegates)this.once(g,y.delegates[g]);return this},o.prototype.off=function(s,p,f){var y=this;return void 0===f?r.prototype.off.call(this,s,p):(this._delegatedListeners&&this._delegatedListeners[s]&&function(g){for(var S=g[s],k=0;k<S.length;k++){var L=S[k];if(L.layer===p&&L.listener===f){for(var U in L.delegates)y.off(U,L.delegates[U]);return S.splice(k,1),y}}}(this._delegatedListeners),this)},o.prototype.queryRenderedFeatures=function(s,p){if(!this.style)return[];var f;if(void 0!==p||void 0===s||s instanceof l.Point||Array.isArray(s)||(p=s,s=void 0),p=p||{},(s=s||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||"number"==typeof s[0])f=[l.Point.convert(s)];else{var y=l.Point.convert(s[0]),g=l.Point.convert(s[1]);f=[y,new l.Point(g.x,y.y),g,new l.Point(y.x,g.y),y]}return this.style.queryRenderedFeatures(f,p,this.transform)},o.prototype.querySourceFeatures=function(s,p){return this.style.querySourceFeatures(s,p)},o.prototype.setStyle=function(s,p){return!1!==(p=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},p)).diff&&p.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&s?(this._diffStyle(s,p),this):(this._localIdeographFontFamily=p.localIdeographFontFamily,this._updateStyle(s,p))},o.prototype._getUIString=function(s){var p=this._locale[s];if(null==p)throw new Error("Missing UI string '"+s+"'");return p},o.prototype._updateStyle=function(s,p){return this.style&&(this.style.setEventedParent(null),this.style._remove()),s?(this.style=new uo(this,p||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof s?this.style.loadURL(s):this.style.loadJSON(s),this):(delete this.style,this)},o.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new uo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},o.prototype._diffStyle=function(s,p){var f=this;if("string"==typeof s){var y=this._requestManager.normalizeStyleURL(s),g=this._requestManager.transformRequest(y,l.ResourceType.Style);l.getJSON(g,function(S,k){S?f.fire(new l.ErrorEvent(S)):k&&f._updateDiff(k,p)})}else"object"==typeof s&&this._updateDiff(s,p)},o.prototype._updateDiff=function(s,p){try{this.style.setState(s)&&this._update(!0)}catch(f){l.warnOnce("Unable to perform style diff: "+(f.message||f.error||f)+".  Rebuilding the style from scratch."),this._updateStyle(s,p)}},o.prototype.getStyle=function(){if(this.style)return this.style.serialize()},o.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},o.prototype.addSource=function(s,p){return this._lazyInitEmptyStyle(),this.style.addSource(s,p),this._update(!0)},o.prototype.isSourceLoaded=function(s){var p=this.style&&this.style.sourceCaches[s];if(void 0!==p)return p.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+s+"'")))},o.prototype.areTilesLoaded=function(){var s=this.style&&this.style.sourceCaches;for(var p in s){var f=s[p]._tiles;for(var y in f){var g=f[y];if("loaded"!==g.state&&"errored"!==g.state)return!1}}return!0},o.prototype.addSourceType=function(s,p,f){return this._lazyInitEmptyStyle(),this.style.addSourceType(s,p,f)},o.prototype.removeSource=function(s){return this.style.removeSource(s),this._update(!0)},o.prototype.getSource=function(s){return this.style.getSource(s)},o.prototype.addImage=function(s,p,f){void 0===f&&(f={});var y=f.pixelRatio;void 0===y&&(y=1);var g=f.sdf;void 0===g&&(g=!1);var S=f.stretchX,k=f.stretchY,L=f.content;if(this._lazyInitEmptyStyle(),p instanceof Po||no&&p instanceof no){var U=l.browser.getImageData(p);this.style.addImage(s,{data:new l.RGBAImage({width:U.width,height:U.height},U.data),pixelRatio:y,stretchX:S,stretchY:k,content:L,sdf:g,version:0})}else{if(void 0===p.width||void 0===p.height)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var _t=p;this.style.addImage(s,{data:new l.RGBAImage({width:p.width,height:p.height},new Uint8Array(p.data)),pixelRatio:y,stretchX:S,stretchY:k,content:L,sdf:g,version:0,userImage:_t}),_t.onAdd&&_t.onAdd(this,s)}},o.prototype.updateImage=function(s,p){var f=this.style.getImage(s);if(!f)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var y=p instanceof Po||no&&p instanceof no?l.browser.getImageData(p):p,g=y.width,S=y.height,k=y.data;return void 0===g||void 0===S?this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):g!==f.data.width||S!==f.data.height?this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(f.data.replace(k,!(p instanceof Po||no&&p instanceof no)),void this.style.updateImage(s,f))},o.prototype.hasImage=function(s){return s?!!this.style.getImage(s):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},o.prototype.removeImage=function(s){this.style.removeImage(s)},o.prototype.loadImage=function(s,p){l.getImage(this._requestManager.transformRequest(s,l.ResourceType.Image),p)},o.prototype.listImages=function(){return this.style.listImages()},o.prototype.addLayer=function(s,p){return this._lazyInitEmptyStyle(),this.style.addLayer(s,p),this._update(!0)},o.prototype.moveLayer=function(s,p){return this.style.moveLayer(s,p),this._update(!0)},o.prototype.removeLayer=function(s){return this.style.removeLayer(s),this._update(!0)},o.prototype.getLayer=function(s){return this.style.getLayer(s)},o.prototype.setLayerZoomRange=function(s,p,f){return this.style.setLayerZoomRange(s,p,f),this._update(!0)},o.prototype.setFilter=function(s,p,f){return void 0===f&&(f={}),this.style.setFilter(s,p,f),this._update(!0)},o.prototype.getFilter=function(s){return this.style.getFilter(s)},o.prototype.setPaintProperty=function(s,p,f,y){return void 0===y&&(y={}),this.style.setPaintProperty(s,p,f,y),this._update(!0)},o.prototype.getPaintProperty=function(s,p){return this.style.getPaintProperty(s,p)},o.prototype.setLayoutProperty=function(s,p,f,y){return void 0===y&&(y={}),this.style.setLayoutProperty(s,p,f,y),this._update(!0)},o.prototype.getLayoutProperty=function(s,p){return this.style.getLayoutProperty(s,p)},o.prototype.setLight=function(s,p){return void 0===p&&(p={}),this._lazyInitEmptyStyle(),this.style.setLight(s,p),this._update(!0)},o.prototype.getLight=function(){return this.style.getLight()},o.prototype.setFeatureState=function(s,p){return this.style.setFeatureState(s,p),this._update()},o.prototype.removeFeatureState=function(s,p){return this.style.removeFeatureState(s,p),this._update()},o.prototype.getFeatureState=function(s){return this.style.getFeatureState(s)},o.prototype.getContainer=function(){return this._container},o.prototype.getCanvasContainer=function(){return this._canvasContainer},o.prototype.getCanvas=function(){return this._canvas},o.prototype._containerDimensions=function(){var s=0,p=0;return this._container&&(s=this._container.clientWidth||400,p=this._container.clientHeight||300),[s,p]},o.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},o.prototype._setupContainer=function(){var s=this._container;s.classList.add("mapboxgl-map"),(this._missingCSSCanary=I.create("div","mapboxgl-canary",s)).style.visibility="hidden",this._detectMissingCSS();var p=this._canvasContainer=I.create("div","mapboxgl-canvas-container",s);this._interactive&&p.classList.add("mapboxgl-interactive"),this._canvas=I.create("canvas","mapboxgl-canvas",p),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var f=this._containerDimensions();this._resizeCanvas(f[0],f[1]);var y=this._controlContainer=I.create("div","mapboxgl-control-container",s),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(S){g[S]=I.create("div","mapboxgl-ctrl-"+S,y)})},o.prototype._resizeCanvas=function(s,p){var f=l.browser.devicePixelRatio||1;this._canvas.width=f*s,this._canvas.height=f*p,this._canvas.style.width=s+"px",this._canvas.style.height=p+"px"},o.prototype._setupPainter=function(){var s=l.extend({},P.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),p=this._canvas.getContext("webgl",s)||this._canvas.getContext("experimental-webgl",s);p?(this.painter=new or(p,this.transform),l.webpSupported.testSupport(p)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},o.prototype._contextLost=function(s){s.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:s}))},o.prototype._contextRestored=function(s){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:s}))},o.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},o.prototype._update=function(s){return this.style?(this._styleDirty=this._styleDirty||s,this._sourcesDirty=!0,this.triggerRepaint(),this):this},o.prototype._requestRenderFrame=function(s){return this._update(),this._renderTaskQueue.add(s)},o.prototype._cancelRenderFrame=function(s){this._renderTaskQueue.remove(s)},o.prototype._render=function(){var s,p=this,f=0,y=this.painter.context.extTimerQuery;this.listens("gpu-timing-frame")&&(s=y.createQueryEXT(),y.beginQueryEXT(y.TIME_ELAPSED_EXT,s),f=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var g=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var S=this.transform.zoom,k=l.browser.now();this.style.zoomHistory.update(S,k);var L=new l.EvaluationParameters(S,{now:k,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),U=L.crossFadingFactor();1===U&&U===this._crossFadingFactor||(g=!0,this._crossFadingFactor=U),this.style.update(L)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),gpuTiming:!!this.listens("gpu-timing-layer"),fadeDuration:this._fadeDuration}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||g)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var X=l.browser.now()-f;y.endQueryEXT(y.TIME_ELAPSED_EXT,s),setTimeout(function(){var G=y.getQueryObjectEXT(s,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(s),p.fire(new l.Event("gpu-timing-frame",{cpuTime:X,gpuTime:G}))},50)}if(this.listens("gpu-timing-layer")){var W=this.painter.collectGpuTimers();setTimeout(function(){var G=p.painter.queryGpuTimers(W);p.fire(new l.Event("gpu-timing-layer",{layerTimes:G}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new l.Event("idle"))),this},o.prototype.remove=function(){this._hash&&this._hash.remove();for(var s=0,p=this._controls;s<p.length;s+=1)p[s].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==l.window&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),ea(this._canvasContainer),ea(this._controlContainer),ea(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new l.Event("remove"))},o.prototype.triggerRepaint=function(){var s=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(p){s._frame=null,s._render()}))},o.prototype._onWindowOnline=function(){this._update()},o.prototype._onWindowResize=function(s){this._trackResize&&this.resize({originalEvent:s})._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(s){this._showTileBoundaries!==s&&(this._showTileBoundaries=s,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(s){this._showCollisionBoxes!==s&&(this._showCollisionBoxes=s,s?this.style._generateCollisionBoxes():this._update())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(s){this._showOverdrawInspector!==s&&(this._showOverdrawInspector=s,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(s){this._repaint!==s&&(this._repaint=s,this.triggerRepaint())},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(s){this._vertices=s,this._update()},o.prototype._setCacheLimits=function(s,p){l.setCacheLimits(s,p)},n.version.get=function(){return l.version},Object.defineProperties(o.prototype,n),o}(co);function ea(r){r.parentNode&&r.parentNode.removeChild(r)}var Zl={showCompass:!0,showZoom:!0,visualizePitch:!1},ma=function(r){var o=this;this.options=l.extend({},Zl,r),this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(n){return n.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(n){return o._map.zoomIn({},{originalEvent:n})}),I.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(n){return o._map.zoomOut({},{originalEvent:n})}),I.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(n){o.options.visualizePitch?o._map.resetNorthPitch({},{originalEvent:n}):o._map.resetNorth({},{originalEvent:n})}),this._compassIcon=I.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};function Fs(r,o,n){if(r=new l.LngLat(r.lng,r.lat),o){var s=new l.LngLat(r.lng-360,r.lat),p=new l.LngLat(r.lng+360,r.lat),f=n.locationPoint(r).distSqr(o);n.locationPoint(s).distSqr(o)<f?r=s:n.locationPoint(p).distSqr(o)<f&&(r=p)}for(;Math.abs(r.lng-n.center.lng)>180;){var y=n.locationPoint(r);if(y.x>=0&&y.y>=0&&y.x<=n.width&&y.y<=n.height)break;r.lng>n.center.lng?r.lng-=360:r.lng+=360}return r}ma.prototype._updateZoomButtons=function(){var r=this._map.getZoom();this._zoomInButton.disabled=r===this._map.getMaxZoom(),this._zoomOutButton.disabled=r===this._map.getMinZoom()},ma.prototype._rotateCompassArrow=function(){var r=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=r},ma.prototype.onAdd=function(r){return this._map=r,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Je(r,{button:"left",element:this._compass,clickTolerance:r.dragRotate._clickTolerance}),I.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),I.addEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.enable()),this._container},ma.prototype.onRemove=function(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),I.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),I.removeEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.disable(),delete this._handler),delete this._map},ma.prototype._createButton=function(r,o){var n=I.create("button",r,this._container);return n.type="button",n.addEventListener("click",o),n},ma.prototype._setButtonTitle=function(r,o){var n=this._map._getUIString("NavigationControl."+o);r.title=n,r.setAttribute("aria-label",n)};var _s={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function dl(r,o,n){var s=r.classList;for(var p in _s)s.remove("mapboxgl-"+n+"-anchor-"+p);s.add("mapboxgl-"+n+"-anchor-"+o)}var kn,Pr=function(r){function o(n,s){var p=this;if(r.call(this),(n instanceof l.window.HTMLElement||s)&&(n=l.extend({element:n},s)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._draggable=n&&n.draggable||!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&"auto"!==n.pitchAlignment?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=l.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div"),this._element.setAttribute("aria-label","Map marker");var f=I.createNS("http://www.w3.org/2000/svg","svg");f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height","41px"),f.setAttributeNS(null,"width","27px"),f.setAttributeNS(null,"viewBox","0 0 27 41");var y=I.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");var g=I.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"fill-rule","nonzero");var S=I.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(3.0, 29.0)"),S.setAttributeNS(null,"fill","#000000");for(var k=0,L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];k<L.length;k+=1){var U=L[k],X=I.createNS("http://www.w3.org/2000/svg","ellipse");X.setAttributeNS(null,"opacity","0.04"),X.setAttributeNS(null,"cx","10.5"),X.setAttributeNS(null,"cy","5.80029008"),X.setAttributeNS(null,"rx",U.rx),X.setAttributeNS(null,"ry",U.ry),S.appendChild(X)}var W=I.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"fill",this._color);var G=I.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),W.appendChild(G);var H=I.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");var ft=I.createNS("http://www.w3.org/2000/svg","path");ft.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild(ft);var ut=I.createNS("http://www.w3.org/2000/svg","g");ut.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ut.setAttributeNS(null,"fill","#FFFFFF");var _t=I.createNS("http://www.w3.org/2000/svg","g");_t.setAttributeNS(null,"transform","translate(8.0, 8.0)");var St=I.createNS("http://www.w3.org/2000/svg","circle");St.setAttributeNS(null,"fill","#000000"),St.setAttributeNS(null,"opacity","0.25"),St.setAttributeNS(null,"cx","5.5"),St.setAttributeNS(null,"cy","5.5"),St.setAttributeNS(null,"r","5.4999962");var Ct=I.createNS("http://www.w3.org/2000/svg","circle");Ct.setAttributeNS(null,"fill","#FFFFFF"),Ct.setAttributeNS(null,"cx","5.5"),Ct.setAttributeNS(null,"cy","5.5"),Ct.setAttributeNS(null,"r","5.4999962"),_t.appendChild(St),_t.appendChild(Ct),g.appendChild(S),g.appendChild(W),g.appendChild(H),g.appendChild(ut),g.appendChild(_t),f.appendChild(g),this._element.appendChild(f),this._offset=l.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ut){Ut.preventDefault()}),this._element.addEventListener("mousedown",function(Ut){Ut.preventDefault()}),this._element.addEventListener("focus",function(){var Ut=p._map.getContainer();Ut.scrollTop=0,Ut.scrollLeft=0}),dl(this._element,this._anchor,"marker"),this._popup=null}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.addTo=function(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},o.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(n){return this._lngLat=l.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},o.prototype.getElement=function(){return this._element},o.prototype.setPopup=function(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){var s=Math.sqrt(Math.pow(13.5,2)/2);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[s,-1*(24.6+s)],"bottom-right":[-s,-1*(24.6+s)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},o.prototype._onKeyPress=function(n){var s=n.code,p=n.charCode||n.keyCode;"Space"!==s&&"Enter"!==s&&32!==p&&13!==p||this.togglePopup()},o.prototype._onMapClick=function(n){var s=n.originalEvent.target,p=this._element;this._popup&&(s===p||p.contains(s))&&this.togglePopup()},o.prototype.getPopup=function(){return this._popup},o.prototype.togglePopup=function(){var n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this},o.prototype._update=function(n){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Fs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var s="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?s="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(s="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var p="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?p="rotateX(0deg)":"map"===this._pitchAlignment&&(p="rotateX("+this._map.getPitch()+"deg)"),n&&"moveend"!==n.type||(this._pos=this._pos.round()),I.setTransform(this._element,_s[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+p+" "+s)}},o.prototype.getOffset=function(){return this._offset},o.prototype.setOffset=function(n){return this._offset=l.Point.convert(n),this._update(),this},o.prototype._onMove=function(n){this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))},o.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new l.Event("dragend")),this._state="inactive"},o.prototype._addDragHandler=function(n){this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},o.prototype.setDraggable=function(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},o.prototype.isDraggable=function(){return this._draggable},o.prototype.setRotation=function(n){return this._rotation=n||0,this._update(),this},o.prototype.getRotation=function(){return this._rotation},o.prototype.setRotationAlignment=function(n){return this._rotationAlignment=n||"auto",this._update(),this},o.prototype.getRotationAlignment=function(){return this._rotationAlignment},o.prototype.setPitchAlignment=function(n){return this._pitchAlignment=n&&"auto"!==n?n:this._rotationAlignment,this._update(),this},o.prototype.getPitchAlignment=function(){return this._pitchAlignment},o}(l.Evented),ls={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},qa=0,po=!1,fl=function(r){function o(n){r.call(this),this.options=l.extend({},ls,n),l.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.onAdd=function(n){var s;return this._map=n,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),s=this._setupUI,void 0!==kn?s(kn):void 0!==l.window.navigator.permissions?l.window.navigator.permissions.query({name:"geolocation"}).then(function(p){s(kn="denied"!==p.state)}):s(kn=!!l.window.navigator.geolocation),this._container},o.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),I.remove(this._container),this._map=void 0,qa=0,po=!1},o.prototype._isOutOfMapMaxBounds=function(n){var s=this._map.getMaxBounds(),p=n.coords;return s&&(p.longitude<s.getWest()||p.longitude>s.getEast()||p.latitude<s.getSouth()||p.latitude>s.getNorth())},o.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},o.prototype._onSuccess=function(n){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(n),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",n)),this._finish()},o.prototype._updateCamera=function(n){var s=new l.LngLat(n.coords.longitude,n.coords.latitude),p=n.coords.accuracy,f=this._map.getBearing(),y=l.extend({bearing:f},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(p),y,{geolocateSource:!0})},o.prototype._updateMarker=function(n){n?this._userLocationDotMarker.setLngLat([n.coords.longitude,n.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},o.prototype._onError=function(n){if(this.options.trackUserLocation)if(1===n.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===n.code&&po)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",n)),this._finish()},o.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},o.prototype._setupUI=function(n){var s=this;if(this._container.addEventListener("contextmenu",function(y){return y.preventDefault()}),this._geolocateButton=I.create("button","mapboxgl-ctrl-geolocate",this._container),I.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===n){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{var f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Pr(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(y){y.geolocateSource||"ACTIVE_LOCK"!==s._watchState||y.originalEvent&&"resize"===y.originalEvent.type||(s._watchState="BACKGROUND",s._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),s._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),s.fire(new l.Event("trackuserlocationend")))})},o.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":qa--,po=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var n;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++qa>1?(n={maximumAge:6e5,timeout:0},po=!0):(n=this.options.positionOptions,po=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,n)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},o.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},o}(l.Evented),Us={maxWidth:100,unit:"metric"},ia=function(r){this.options=l.extend({},Us,r),l.bindAll(["_onMove","setUnit"],this)};function io(r,o,n){var s,p,f,y,g,S,k=n&&n.maxWidth||100,L=r._container.clientHeight/2,U=(s=r.unproject([0,L]),p=r.unproject([k,L]),f=Math.PI/180,y=s.lat*f,g=p.lat*f,S=Math.sin(y)*Math.sin(g)+Math.cos(y)*Math.cos(g)*Math.cos((p.lng-s.lng)*f),6371e3*Math.acos(Math.min(S,1)));if(n&&"imperial"===n.unit){var X=3.2808*U;X>5280?Ha(o,k,X/5280,r._getUIString("ScaleControl.Miles")):Ha(o,k,X,r._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Ha(o,k,U/1852,r._getUIString("ScaleControl.NauticalMiles")):U>=1e3?Ha(o,k,U/1e3,r._getUIString("ScaleControl.Kilometers")):Ha(o,k,U,r._getUIString("ScaleControl.Meters"))}function Ha(r,o,n,s){var p,f,y,k,L,g=(p=n,(f=Math.pow(10,(""+Math.floor(p)).length-1))*(y=(y=p/f)>=10?10:y>=5?5:y>=3?3:y>=2?2:y>=1?1:(k=y,L=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10)),Math.round(k*L)/L)));r.style.width=o*(g/n)+"px",r.innerHTML=g+s}ia.prototype.getDefaultPosition=function(){return"bottom-left"},ia.prototype._onMove=function(){io(this._map,this._container,this.options)},ia.prototype.onAdd=function(r){return this._map=r,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",r.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ia.prototype.onRemove=function(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ia.prototype.setUnit=function(r){this.options.unit=r,io(this._map,this._container,this.options)};var Ve=function(r){this._fullscreen=!1,r&&r.container&&(r.container instanceof l.window.HTMLElement?this._container=r.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ve.prototype.onAdd=function(r){return this._map=r,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ve.prototype.onRemove=function(){I.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ve.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},Ve.prototype._setupUI=function(){var r=this._fullscreenButton=I.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);I.create("span","mapboxgl-ctrl-icon",r).setAttribute("aria-hidden",!0),r.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ve.prototype._updateTitle=function(){var r=this._getTitle();this._fullscreenButton.setAttribute("aria-label",r),this._fullscreenButton.title=r},Ve.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ve.prototype._isFullscreen=function(){return this._fullscreen},Ve.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ve.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var hi={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Ns=function(r){function o(n){r.call(this),this.options=l.extend(Object.create(hi),n),l.bindAll(["_update","_onClose","remove"],this)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.addTo=function(n){var s=this;return this._map=n,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",function(p){s._update(p.point)}),this._map.on("mouseup",function(p){s._update(p.point)}),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},o.prototype.isOpen=function(){return!!this._map},o.prototype.remove=function(){return this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove"),delete this._map),this.fire(new l.Event("close")),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(n){return this._lngLat=l.LngLat.convert(n),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove"),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},o.prototype.trackPointer=function(){var n=this;return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",function(s){n._update(s.point)}),this._map.on("drag",function(s){n._update(s.point)}),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},o.prototype.getElement=function(){return this._container},o.prototype.setText=function(n){return this.setDOMContent(l.window.document.createTextNode(n))},o.prototype.setHTML=function(n){var s,p=l.window.document.createDocumentFragment(),f=l.window.document.createElement("body");for(f.innerHTML=n;s=f.firstChild;)p.appendChild(s);return this.setDOMContent(p)},o.prototype.getMaxWidth=function(){return this._container.style.maxWidth},o.prototype.setMaxWidth=function(n){return this.options.maxWidth=n,this._update(),this},o.prototype.setDOMContent=function(n){return this._createContent(),this._content.appendChild(n),this._update(),this},o.prototype.addClassName=function(n){this._container.classList.add(n)},o.prototype.removeClassName=function(n){this._container.classList.remove(n)},o.prototype.toggleClassName=function(n){return this._container.classList.toggle(n)},o.prototype._createContent=function(){this._content&&I.remove(this._content),this._content=I.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=I.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},o.prototype._update=function(n){var s=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=I.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=I.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(X){return s._container.classList.add(X)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Fs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||n)){var f=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat),y=this.options.anchor,g=function X(W){if(W){if("number"==typeof W){var G=Math.round(Math.sqrt(.5*Math.pow(W,2)));return{center:new l.Point(0,0),top:new l.Point(0,W),"top-left":new l.Point(G,G),"top-right":new l.Point(-G,G),bottom:new l.Point(0,-W),"bottom-left":new l.Point(G,-G),"bottom-right":new l.Point(-G,-G),left:new l.Point(W,0),right:new l.Point(-W,0)}}if(W instanceof l.Point||Array.isArray(W)){var H=l.Point.convert(W);return{center:H,top:H,"top-left":H,"top-right":H,bottom:H,"bottom-left":H,"bottom-right":H,left:H,right:H}}return{center:l.Point.convert(W.center||[0,0]),top:l.Point.convert(W.top||[0,0]),"top-left":l.Point.convert(W["top-left"]||[0,0]),"top-right":l.Point.convert(W["top-right"]||[0,0]),bottom:l.Point.convert(W.bottom||[0,0]),"bottom-left":l.Point.convert(W["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(W["bottom-right"]||[0,0]),left:l.Point.convert(W.left||[0,0]),right:l.Point.convert(W.right||[0,0])}}return X(new l.Point(0,0))}(this.options.offset);if(!y){var S,k=this._container.offsetWidth,L=this._container.offsetHeight;S=f.y+g.bottom.y<L?["top"]:f.y>this._map.transform.height-L?["bottom"]:[],f.x<k/2?S.push("left"):f.x>this._map.transform.width-k/2&&S.push("right"),y=0===S.length?"bottom":S.join("-")}var U=f.add(g[y]).round();I.setTransform(this._container,_s[y]+" translate("+U.x+"px,"+U.y+"px)"),dl(this._container,y,"popup")}},o.prototype._onClose=function(){this.remove()},o}(l.Evented),Za={version:l.version,supported:P,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:oo,NavigationControl:ma,GeolocateControl:fl,AttributionControl:Cn,ScaleControl:ia,FullscreenControl:Ve,Popup:Ns,Marker:Pr,Style:uo,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(r){l.config.ACCESS_TOKEN=r},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(r){l.config.API_URL=r},get workerCount(){return j.workerCount},set workerCount(r){j.workerCount=r},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(r){l.config.MAX_PARALLEL_IMAGE_REQUESTS=r},clearStorage:function(r){l.clearTileCache(r)},workerUrl:""};return Za}),v}),function(F,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(F=F||self).mapboxgl=b()}(this,function(){"use strict";var F,b,v;function A(l,P){if(F)if(b){var I="var sharedChunk = {}; ("+F+")(sharedChunk); ("+b+")(sharedChunk);",N={};F(N),(v=P(N)).workerUrl=window.URL.createObjectURL(new Blob([I],{type:"text/javascript"}))}else b=P;else F=P}return A(0,function(l){function P(t,e){return t(e={exports:{}},e.exports),e.exports}var I=N;function N(t,e,i,a){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(a-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=a,this.p2x=i,this.p2y=a}N.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},N.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},N.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},N.prototype.solveCurveX=function(t,e){var i,a,u,c,h;for(void 0===e&&(e=1e-6),u=t,h=0;h<8;h++){if(c=this.sampleCurveX(u)-t,Math.abs(c)<e)return u;var m=this.sampleCurveDerivativeX(u);if(Math.abs(m)<1e-6)break;u-=c/m}if((u=t)<(i=0))return i;if(u>(a=1))return a;for(;i<a;){if(c=this.sampleCurveX(u),Math.abs(c-t)<e)return u;t>c?i=u:a=u,u=.5*(a-i)+i}return u},N.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var et=Lt;function Lt(t,e){this.x=t,this.y=e}function Zt(t,e,i,a){var u=new I(t,e,i,a);return function(c){return u.solve(c)}}Lt.prototype={clone:function(){return new Lt(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var i=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),u=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=u,this},_rotateAround:function(t,e){var i=Math.cos(t),a=Math.sin(t),c=e.y+a*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-a*(this.y-e.y),this.y=c,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Lt.convert=function(t){return t instanceof Lt?t:Array.isArray(t)?new Lt(t[0],t[1]):t};var Mt=Zt(.25,.1,.25,1);function Yt(t,e,i){return Math.min(i,Math.max(e,t))}function $t(t,e,i){var a=i-e,u=((t-e)%a+a)%a+e;return u===e?i:u}function vt(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var a=0,u=e;a<u.length;a+=1){var c=u[a];for(var h in c)t[h]=c[h]}return t}var lt=1;function Vt(){return lt++}function xe(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function Ze(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function Ye(t,e){t.forEach(function(i){e[i]&&(e[i]=e[i].bind(e))})}function Ui(t,e){return-1!==t.indexOf(e,t.length-e.length)}function q(t,e,i){var a={};for(var u in t)a[u]=e.call(i||this,t[u],u,t);return a}function Wi(t,e,i){var a={};for(var u in t)e.call(i||this,t[u],u,t)&&(a[u]=t[u]);return a}function Ti(t){return Array.isArray(t)?t.map(Ti):"object"==typeof t&&t?q(t,Ti):t}var ti={};function ae(t){ti[t]||("undefined"!=typeof console&&console.warn(t),ti[t]=!0)}function zt(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function Ht(t){for(var e=0,i=0,a=t.length,u=a-1,c=void 0,h=void 0;i<a;u=i++)e+=((h=t[u]).x-(c=t[i]).x)*(c.y+h.y);return e}function ht(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function mt(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(a,u,c,h){var m=c||h;return e[u]=!m||m.toLowerCase(),""}),e["max-age"]){var i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e}var rt=null;function J(t){if(null==rt){var e=t.navigator?t.navigator.userAgent:null;rt=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return rt}function d(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(i){return!1}}var Pt,Et,se,Ie,ei=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),_e=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Ri=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Gi={now:ei,frame:function(t){var e=_e(t);return{cancel:function(){return Ri(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var i=self.document.createElement("canvas"),a=i.getContext("2d");if(!a)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,a.drawImage(t,0,0,t.width,t.height),a.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return Pt||(Pt=self.document.createElement("a")),Pt.href=t,Pt.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==Et&&(Et=self.matchMedia("(prefers-reduced-motion: reduce)")),Et.matches)}},_i={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Hr={supported:!1,testSupport:function(t){Tr||!Ie||(sr?Tn(t):se=t)}},Tr=!1,sr=!1;function Tn(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,Ie),t.isContextLost())return;Hr.supported=!0}catch(i){}t.deleteTexture(e),Tr=!0}self.document&&((Ie=self.document.createElement("img")).onload=function(){se&&Tn(se),se=null,sr=!0},Ie.onerror=function(){Tr=!0,se=null},Ie.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ln="01",Dt=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function Ft(t){return 0===t.indexOf("mapbox:")}Dt.prototype._createSkuToken=function(){var t=function(){for(var e="",i=0;i<10;i++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ln,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},Dt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Dt.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},Dt.prototype.normalizeStyleURL=function(t,e){if(!Ft(t))return t;var i=Rt(t);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},Dt.prototype.normalizeGlyphsURL=function(t,e){if(!Ft(t))return t;var i=Rt(t);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},Dt.prototype.normalizeSourceURL=function(t,e){if(!Ft(t))return t;var i=Rt(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)},Dt.prototype.normalizeSpriteURL=function(t,e,i,a){var u=Rt(t);return Ft(t)?(u.path="/styles/v1"+u.path+"/sprite"+e+i,this._makeAPIURL(u,this._customAccessToken||a)):(u.path+=""+e+i,me(u))},Dt.prototype.normalizeTileURL=function(t,e,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),!e||!Ft(e))return t;var a=Rt(t);return a.path=a.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Gi.devicePixelRatio>=2||512===i?"@2x":"")+(Hr.supported?".webp":"$1")),a.path=a.path.replace(/^.+\/v4\//,"/"),a.path="/v4"+a.path,_i.REQUIRE_ACCESS_TOKEN&&(_i.ACCESS_TOKEN||this._customAccessToken)&&this._skuToken&&a.params.push("sku="+this._skuToken),this._makeAPIURL(a,this._customAccessToken)},Dt.prototype.canonicalizeTileURL=function(t){var e=Rt(t);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(/\.[\w]+$/))return t;var i="mapbox://tiles/";i+=e.path.replace("/v4/","");var a=e.params.filter(function(u){return!u.match(/^access_token=/)});return a.length&&(i+="?"+a.join("&")),i},Dt.prototype.canonicalizeTileset=function(t,e){if(!Ft(e))return t.tiles||[];for(var i=[],a=0,u=t.tiles;a<u.length;a+=1){var h=this.canonicalizeTileURL(u[a]);i.push(h)}return i},Dt.prototype._makeAPIURL=function(t,e){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",a=Rt(_i.API_URL);if(t.protocol=a.protocol,t.authority=a.authority,"/"!==a.path&&(t.path=""+a.path+t.path),!_i.REQUIRE_ACCESS_TOKEN)return me(t);if(!(e=e||_i.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return t.params=t.params.filter(function(u){return-1===u.indexOf("access_token")}),t.params.push("access_token="+e),me(t)};var Fe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Le(t){return Fe.test(t)}var st=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Rt(t){var e=t.match(st);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function me(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function Me(t){if(!t)return null;var i=t.split(".");if(!i||3!==i.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(i[1]).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(a){return null}}var ii=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ii.prototype.getStorageKey=function(t){var i=Me(_i.ACCESS_TOKEN),a="";return a=i&&i.u?self.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(u,c){return String.fromCharCode(Number("0x"+c))})):_i.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+a:"mapbox.eventData:"+a},ii.prototype.fetchEventData=function(){var t=d("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{var a=self.localStorage.getItem(e);a&&(this.eventData=JSON.parse(a));var u=self.localStorage.getItem(i);u&&(this.anonId=u)}catch(c){ae("Unable to read from LocalStorage")}},ii.prototype.saveEventData=function(){var t=d("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(a){ae("Unable to write to LocalStorage")}},ii.prototype.processRequests=function(t){},ii.prototype.postEvent=function(t,e,i,a){var u=this;if(_i.EVENTS_URL){var c=Rt(_i.EVENTS_URL);c.params.push("access_token="+(a||_i.ACCESS_TOKEN||""));var h={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.7.0",skuId:Ln,userId:this.anonId},m=e?vt(h,e):h,_={url:me(c),headers:{"Content-Type":"text/plain"},body:JSON.stringify([m])};this.pendingRequest=wi(_,function(T){u.pendingRequest=null,i(T),u.saveEventData(),u.processRequests(a)})}},ii.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var re,Bt,Kt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(i,a,u,c){this.skuToken=u,(_i.EVENTS_URL&&c||_i.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(h){return Ft(h)||Le(h)}))&&this.queueRequest({id:a,timestamp:Date.now()},c)},e.prototype.processRequests=function(i){var a=this;if(!this.pendingRequest&&0!==this.queue.length){var u=this.queue.shift(),c=u.id,h=u.timestamp;c&&this.success[c]||(this.anonId||this.fetchEventData(),Ze(this.anonId)||(this.anonId=xe()),this.postEvent(h,{skuToken:this.skuToken},function(m){m||c&&(a.success[c]=!0)},i))}},e}(ii),ne=new(function(t){function e(i){t.call(this,"appUserTurnstile"),this._customAccessToken=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(i,a){_i.EVENTS_URL&&_i.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(u){return Ft(u)||Le(u)})&&this.queueRequest(Date.now(),a)},e.prototype.processRequests=function(i){var a=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var u=Me(_i.ACCESS_TOKEN),c=u?u.u:_i.ACCESS_TOKEN,h=c!==this.eventData.tokenU;Ze(this.anonId)||(this.anonId=xe(),h=!0);var m=this.queue.shift();if(this.eventData.lastSuccess){var _=new Date(this.eventData.lastSuccess),T=new Date(m),C=(m-this.eventData.lastSuccess)/864e5;h=h||C>=1||C<-1||_.getDate()!==T.getDate()}else h=!0;if(!h)return this.processRequests();this.postEvent(m,{"enabled.telemetry":!1},function(M){M||(a.eventData.lastSuccess=m,a.eventData.tokenU=c)},i)}},e}(ii)),Pe=ne.postTurnstileEvent.bind(ne),oi=new Kt,Ci=oi.postMapLoadEvent.bind(oi),ar="mapbox-tiles",tr=500,Qr=50;function Xr(){self.caches&&!re&&(re=self.caches.open(ar))}function xt(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var Wt,ue=1/0;function We(){return null==Wt&&(Wt=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Wt}var ri={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ri);var Ne=function(t){function e(i,a,u){401===a&&Le(u)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,i),this.status=a,this.url=u,this.name=this.constructor.name,this.message=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),zi=ht()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};var Li,cr,Ni=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(zi())&&!/^\w+:/.test(i))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function Fi(t,e){var i,a=new self.AbortController,u=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:zi(),signal:a.signal}),c=!1,h=!1,m=(i=u.url).indexOf("sku=")>0&&Le(i);"json"===t.type&&u.headers.set("Accept","application/json");var _=function(C,M,R){if(!h){if(C&&"SecurityError"!==C.message&&ae(C),M&&R)return T(M);var O=Date.now();self.fetch(u).then(function(B){if(B.ok){var Y=m?B.clone():null;return T(B,Y,O)}return e(new Ne(B.statusText,B.status,t.url))}).catch(function(B){20!==B.code&&e(new Error(B.message))})}},T=function(C,M,R){("arrayBuffer"===t.type?C.arrayBuffer():"json"===t.type?C.json():C.text()).then(function(O){h||(M&&R&&function dn(t,e,i){if(Xr(),re){var a={status:e.status,statusText:e.statusText,headers:new self.Headers};e.headers.forEach(function(c,h){return a.headers.set(h,c)});var u=mt(e.headers.get("Cache-Control")||"");u["no-store"]||(u["max-age"]&&a.headers.set("Expires",new Date(i+1e3*u["max-age"]).toUTCString()),new Date(a.headers.get("Expires")).getTime()-i<42e4||function(c,h){if(void 0===Bt)try{new Response(new ReadableStream),Bt=!0}catch(m){Bt=!1}Bt?h(c.body):c.blob().then(h)}(e,function(c){var h=new self.Response(c,a);Xr(),re&&re.then(function(m){return m.put(xt(t.url),h)}).catch(function(m){return ae(m.message)})}))}}(u,M,R),c=!0,e(null,O,C.headers.get("Cache-Control"),C.headers.get("Expires")))}).catch(function(O){h||e(new Error(O.message))})};return m?function pt(t,e){if(Xr(),!re)return e(null);var i=xt(t.url);re.then(function(a){a.match(i).then(function(u){var c=function(h){if(!h)return!1;var m=new Date(h.headers.get("Expires")||0),_=mt(h.headers.get("Cache-Control")||"");return m>Date.now()&&!_["no-cache"]}(u);a.delete(i),c&&a.put(i,u.clone()),e(null,u,c)}).catch(e)}).catch(e)}(u,_):_(null,null),{cancel:function(){h=!0,c||a.abort()}}}(t,e);if(ht()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(a,u){var c=new self.XMLHttpRequest;for(var h in c.open(a.method||"GET",a.url,!0),"arrayBuffer"===a.type&&(c.responseType="arraybuffer"),a.headers)c.setRequestHeader(h,a.headers[h]);return"json"===a.type&&(c.responseType="text",c.setRequestHeader("Accept","application/json")),c.withCredentials="include"===a.credentials,c.onerror=function(){u(new Error(c.statusText))},c.onload=function(){if((c.status>=200&&c.status<300||0===c.status)&&null!==c.response){var m=c.response;if("json"===a.type)try{m=JSON.parse(c.response)}catch(_){return u(_)}u(null,m,c.getResponseHeader("Cache-Control"),c.getResponseHeader("Expires"))}else u(new Ne(c.statusText,c.status,a.url))},c.send(a.body),{cancel:function(){return c.abort()}}}(t,e)},Ii=function(t,e){return Ni(vt(t,{type:"arrayBuffer"}),e)},wi=function(t,e){return Ni(vt(t,{method:"POST"}),e)};Li=[],cr=0;var Mi=function(t,e){if(Hr.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),cr>=_i.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return Li.push(i),i}cr++;var a=!1,u=function(){if(!a)for(a=!0,cr--;Li.length&&cr<_i.MAX_PARALLEL_IMAGE_REQUESTS;){var h=Li.shift();h.cancelled||(h.cancel=Mi(h.requestParameters,h.callback).cancel)}},c=Ii(t,function(h,m,_,T){var M,R;u(),h?e(h):m&&(We()?(M=e,R=new self.Blob([new Uint8Array(m)],{type:"image/png"}),self.createImageBitmap(R).then(function(O){M(null,O)}).catch(function(O){M(new Error("Could not load image because of "+O.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(C,M,R,O){var B=new self.Image,Y=self.URL;B.onload=function(){M(null,B),Y.revokeObjectURL(B.src)},B.onerror=function(){return M(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var it=new self.Blob([new Uint8Array(C)],{type:"image/png"});B.cacheControl=R,B.expires=O,B.src=C.byteLength?Y.createObjectURL(it):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(m,e,_,T))});return{cancel:function(){c.cancel(),u()}}};function qi(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function _r(t,e,i){if(i&&i[t]){var a=i[t].indexOf(e);-1!==a&&i[t].splice(a,1)}}var ji=function(t,e){void 0===e&&(e={}),vt(this,e),this.type=t},Zr=function(t){function e(i,a){void 0===a&&(a={}),t.call(this,"error",vt({error:i},a))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(ji),ir=function(){};ir.prototype.on=function(t,e){return this._listeners=this._listeners||{},qi(t,e,this._listeners),this},ir.prototype.off=function(t,e){return _r(t,e,this._listeners),_r(t,e,this._oneTimeListeners),this},ir.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},qi(t,e,this._oneTimeListeners),this},ir.prototype.fire=function(t,e){"string"==typeof t&&(t=new ji(t,e||{}));var i=t.type;if(this.listens(i)){t.target=this;for(var a=0,u=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];a<u.length;a+=1)u[a].call(this,t);for(var c=0,h=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];c<h.length;c+=1){var m=h[c];_r(i,m,this._oneTimeListeners),m.call(this,t)}var _=this._eventedParent;_&&(vt(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),_.fire(t))}else t instanceof Zr&&console.error(t.error);return this},ir.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},ir.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var x={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},E=function(t,e,i,a){this.message=(t?t+": ":"")+i,a&&(this.identifier=a),null!=e&&e.__line__&&(this.line=e.__line__)};function D(t){var i=t.value;return i?[new E(t.key,i,"constants have been deprecated as of v8")]:[]}function j(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var a=0,u=e;a<u.length;a+=1){var c=u[a];for(var h in c)t[h]=c[h]}return t}function K(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function ct(t){if(Array.isArray(t))return t.map(ct);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var i in t)e[i]=ct(t[i]);return e}return K(t)}var yt=function(t){function e(i,a){t.call(this,a),this.message=a,this.key=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),at=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,a=e;i<a.length;i+=1){var u=a[i];this.bindings[u[0]]=u[1]}};at.prototype.concat=function(t){return new at(this,t)},at.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},at.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var nt={kind:"null"},tt={kind:"number"},Ot={kind:"string"},jt={kind:"boolean"},Nt={kind:"color"},fe={kind:"object"},he={kind:"value"},qe={kind:"collator"},Be={kind:"formatted"},ze={kind:"resolvedImage"};function ai(t,e){return{kind:"array",itemType:t,N:e}}function Qe(t){if("array"===t.kind){var e=Qe(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var di=[nt,tt,Ot,jt,Nt,Be,fe,ai(he),ze];function Ei(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Ei(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var i=0,a=di;i<a.length;i+=1)if(!Ei(a[i],e))return null}return"Expected "+Qe(t)+" but found "+Qe(e)+" instead."}var Cr=P(function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(_){return(_=Math.round(_))<0?0:_>255?255:_}function c(_){return a("%"===_[_.length-1]?parseFloat(_)/100*255:parseInt(_))}function h(_){return function u(_){return _<0?0:_>1?1:_}("%"===_[_.length-1]?parseFloat(_)/100:parseFloat(_))}function m(_,T,C){return C<0?C+=1:C>1&&(C-=1),6*C<1?_+(T-_)*C*6:2*C<1?T:3*C<2?_+(T-_)*(2/3-C)*6:_}try{e.parseCSSColor=function(_){var T,C=_.replace(/ /g,"").toLowerCase();if(C in i)return i[C].slice();if("#"===C[0])return 4===C.length?(T=parseInt(C.substr(1),16))>=0&&T<=4095?[(3840&T)>>4|(3840&T)>>8,240&T|(240&T)>>4,15&T|(15&T)<<4,1]:null:7===C.length&&(T=parseInt(C.substr(1),16))>=0&&T<=16777215?[(16711680&T)>>16,(65280&T)>>8,255&T,1]:null;var M=C.indexOf("("),R=C.indexOf(")");if(-1!==M&&R+1===C.length){var O=C.substr(0,M),B=C.substr(M+1,R-(M+1)).split(","),Y=1;switch(O){case"rgba":if(4!==B.length)return null;Y=h(B.pop());case"rgb":return 3!==B.length?null:[c(B[0]),c(B[1]),c(B[2]),Y];case"hsla":if(4!==B.length)return null;Y=h(B.pop());case"hsl":if(3!==B.length)return null;var it=(parseFloat(B[0])%360+360)%360/360,ot=h(B[1]),Tt=h(B[2]),wt=Tt<=.5?Tt*(ot+1):Tt+ot-Tt*ot,It=2*Tt-wt;return[a(255*m(It,wt,it+1/3)),a(255*m(It,wt,it)),a(255*m(It,wt,it-1/3)),Y];default:return null}}return null}}catch(_){}}).parseCSSColor,Ue=function(t,e,i,a){void 0===a&&(a=1),this.r=t,this.g=e,this.b=i,this.a=a};Ue.parse=function(t){if(t){if(t instanceof Ue)return t;if("string"==typeof t){var e=Cr(t);if(e)return new Ue(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Ue.prototype.toString=function(){var t=this.toArray(),i=t[1],a=t[2],u=t[3];return"rgba("+Math.round(t[0])+","+Math.round(i)+","+Math.round(a)+","+u+")"},Ue.prototype.toArray=function(){var a=this.a;return 0===a?[0,0,0,0]:[255*this.r/a,255*this.g/a,255*this.b/a,a]},Ue.black=new Ue(0,0,0,1),Ue.white=new Ue(1,1,1,1),Ue.transparent=new Ue(0,0,0,0),Ue.red=new Ue(1,0,0,1);var Sr=function(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Sr.prototype.compare=function(t,e){return this.collator.compare(t,e)},Sr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var tn=function(t,e,i,a,u){this.text=t,this.image=e,this.scale=i,this.fontStack=a,this.textColor=u},mr=function(t){this.sections=t};mr.fromString=function(t){return new mr([new tn(t,null,null,null,null)])},mr.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},mr.factory=function(t){return t instanceof mr?t:mr.fromString(t)},mr.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},mr.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var a=i[e];if(a.image)t.push(["image",a.image.name]);else{t.push(a.text);var u={};a.fontStack&&(u["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(u["font-scale"]=a.scale),a.textColor&&(u["text-color"]=["rgba"].concat(a.textColor.toArray())),t.push(u)}}return t};var Rr=function(t){this.name=t.name,this.available=t.available};function In(t,e,i,a){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===a||"number"==typeof a&&a>=0&&a<=1?null:"Invalid rgba value ["+[t,e,i,a].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof a?[t,e,i,a]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Xi(t){if(null===t)return nt;if("string"==typeof t)return Ot;if("boolean"==typeof t)return jt;if("number"==typeof t)return tt;if(t instanceof Ue)return Nt;if(t instanceof Sr)return qe;if(t instanceof mr)return Be;if(t instanceof Rr)return ze;if(Array.isArray(t)){for(var e,i=t.length,a=0,u=t;a<u.length;a+=1){var c=Xi(u[a]);if(e){if(e===c)continue;e=he;break}e=c}return ai(e||he,i)}return fe}function vr(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Ue||t instanceof mr||t instanceof Rr?t.toString():JSON.stringify(t)}Rr.prototype.toString=function(){return this.name},Rr.fromString=function(t){return new Rr({name:t,available:!1})},Rr.prototype.serialize=function(){return["image",this.name]};var Hi=function(t,e){this.type=t,this.value=e};Hi.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function c(h){if(null===h||"string"==typeof h||"boolean"==typeof h||"number"==typeof h||h instanceof Ue||h instanceof Sr||h instanceof mr||h instanceof Rr)return!0;if(Array.isArray(h)){for(var m=0,_=h;m<_.length;m+=1)if(!c(_[m]))return!1;return!0}if("object"==typeof h){for(var T in h)if(!c(h[T]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var i=t[1],a=Xi(i),u=e.expectedType;return"array"!==a.kind||0!==a.N||!u||"array"!==u.kind||"number"==typeof u.N&&0!==u.N||(a=u),new Hi(a,i)},Hi.prototype.evaluate=function(){return this.value},Hi.prototype.eachChild=function(){},Hi.prototype.possibleOutputs=function(){return[this.value]},Hi.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ue?["rgba"].concat(this.value.toArray()):this.value instanceof mr?this.value.serialize():this.value};var on=function(t){this.name="ExpressionEvaluationError",this.message=t};on.prototype.toJSON=function(){return this.message};var Ar={string:Ot,number:tt,boolean:jt,object:fe},an=function(t,e){this.type=t,this.args=e};an.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,a=1,u=t[0];if("array"===u){var c,h;if(t.length>2){var m=t[1];if("string"!=typeof m||!(m in Ar)||"object"===m)return e.error('The item type argument of "array" must be one of string, number, boolean',1);c=Ar[m],a++}else c=he;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);h=t[2],a++}i=ai(c,h)}else i=Ar[u];for(var _=[];a<t.length;a++){var T=e.parse(t[a],a,he);if(!T)return null;_.push(T)}return new an(i,_)},an.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!Ei(this.type,Xi(i)))return i;if(e===this.args.length-1)throw new on("Expected value to be of type "+Qe(this.type)+", but found "+Qe(Xi(i))+" instead.")}return null},an.prototype.eachChild=function(t){this.args.forEach(t)},an.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(e){return e.possibleOutputs()}))},an.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);var a=t.N;("number"==typeof a||this.args.length>1)&&e.push(a)}}return e.concat(this.args.map(function(u){return u.serialize()}))};var qn=function(t){this.type=Be,this.sections=t};qn.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var a=[],u=!1,c=1;c<=t.length-1;++c){var h=t[c];if(u&&"object"==typeof h&&!Array.isArray(h)){u=!1;var m=null;if(h["font-scale"]&&!(m=e.parse(h["font-scale"],1,tt)))return null;var _=null;if(h["text-font"]&&!(_=e.parse(h["text-font"],1,ai(Ot))))return null;var T=null;if(h["text-color"]&&!(T=e.parse(h["text-color"],1,Nt)))return null;var C=a[a.length-1];C.scale=m,C.font=_,C.textColor=T}else{var M=e.parse(t[c],1,he);if(!M)return null;var R=M.type.kind;if("string"!==R&&"value"!==R&&"null"!==R&&"resolvedImage"!==R)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,a.push({content:M,scale:null,font:null,textColor:null})}}return new qn(a)},qn.prototype.evaluate=function(t){return new mr(this.sections.map(function(e){var i=e.content.evaluate(t);return Xi(i)===ze?new tn("",i,null,null,null):new tn(vr(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))},qn.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var a=i[e];t(a.content),a.scale&&t(a.scale),a.font&&t(a.font),a.textColor&&t(a.textColor)}},qn.prototype.possibleOutputs=function(){return[void 0]},qn.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var a=i[e];t.push(a.content.serialize());var u={};a.scale&&(u["font-scale"]=a.scale.serialize()),a.font&&(u["text-font"]=a.font.serialize()),a.textColor&&(u["text-color"]=a.textColor.serialize()),t.push(u)}return t};var Zn=function(t){this.type=ze,this.input=t};Zn.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Ot);return i?new Zn(i):e.error("No image name provided.")},Zn.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=!1;return t.availableImages&&t.availableImages.indexOf(e)>-1&&(i=!0),new Rr({name:e,available:i})},Zn.prototype.eachChild=function(t){t(this.input)},Zn.prototype.possibleOutputs=function(){return[void 0]},Zn.prototype.serialize=function(){return["image",this.input.serialize()]};var ns={"to-boolean":jt,"to-color":Nt,"to-number":tt,"to-string":Ot},Wn=function(t,e){this.type=t,this.args=e};Wn.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var a=ns[i],u=[],c=1;c<t.length;c++){var h=e.parse(t[c],c,he);if(!h)return null;u.push(h)}return new Wn(a,u)},Wn.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,i,a=0,u=this.args;a<u.length;a+=1){if(i=null,(e=u[a].evaluate(t))instanceof Ue)return e;if("string"==typeof e){var c=t.parseColor(e);if(c)return c}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":In(e[0],e[1],e[2],e[3])))return new Ue(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new on(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var h=null,m=0,_=this.args;m<_.length;m+=1){if(null===(h=_[m].evaluate(t)))return 0;var T=Number(h);if(!isNaN(T))return T}throw new on("Could not convert "+JSON.stringify(h)+" to number.")}return"formatted"===this.type.kind?mr.fromString(vr(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Rr.fromString(vr(this.args[0].evaluate(t))):vr(this.args[0].evaluate(t))},Wn.prototype.eachChild=function(t){this.args.forEach(t)},Wn.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(e){return e.possibleOutputs()}))},Wn.prototype.serialize=function(){if("formatted"===this.type.kind)return new qn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Zn(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var Ls=["Unknown","Point","LineString","Polygon"],qo=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null};qo.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},qo.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Ls[this.feature.type]:this.feature.type:null},qo.prototype.properties=function(){return this.feature&&this.feature.properties||{}},qo.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Ue.parse(t)),e};var pr=function(t,e,i,a){this.name=t,this.type=e,this._evaluate=i,this.args=a};pr.prototype.evaluate=function(t){return this._evaluate(t,this.args)},pr.prototype.eachChild=function(t){this.args.forEach(t)},pr.prototype.possibleOutputs=function(){return[void 0]},pr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},pr.parse=function(t,e){var i,a=t[0],u=pr.definitions[a];if(!u)return e.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0);for(var c=Array.isArray(u)?u[0]:u.type,h=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,m=h.filter(function(Ke){var Re=Ke[0];return!Array.isArray(Re)||Re.length===t.length-1}),_=null,T=0,C=m;T<C.length;T+=1){var M=C[T],R=M[0],O=M[1];_=new Yo(e.registry,e.path,null,e.scope);for(var B=[],Y=!1,it=1;it<t.length;it++){var ot=t[it],Tt=Array.isArray(R)?R[it-1]:R.type,wt=_.parse(ot,1+B.length,Tt);if(!wt){Y=!0;break}B.push(wt)}if(!Y)if(Array.isArray(R)&&R.length!==B.length)_.error("Expected "+R.length+" arguments, but found "+B.length+" instead.");else{for(var It=0;It<B.length;It++){var qt=Array.isArray(R)?R[It]:R.type,Jt=B[It];_.concat(It+1).checkSubtype(qt,Jt.type)}if(0===_.errors.length)return new pr(a,c,O,B)}}if(1===m.length)(i=e.errors).push.apply(i,_.errors);else{for(var Gt=(m.length?m:h).map(function(Ke){var Re;return Re=Ke[0],Array.isArray(Re)?"("+Re.map(Qe).join(", ")+")":"("+Qe(Re.type)+"...)"}).join(" | "),be=[],He=1;He<t.length;He++){var Oe=e.parse(t[He],1+be.length);if(!Oe)return null;be.push(Qe(Oe.type))}e.error("Expected arguments of type "+Gt+", but found ("+be.join(", ")+") instead.")}return null},pr.register=function(t,e){for(var i in pr.definitions=e,e)t[i]=pr};var xn=function(t,e,i){this.type=qe,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e};function Ea(t){if(t instanceof pr&&("get"===t.name&&1===t.args.length||"feature-state"===t.name||"has"===t.name&&1===t.args.length||"properties"===t.name||"geometry-type"===t.name||"id"===t.name||/^filter-/.test(t.name)))return!1;var e=!0;return t.eachChild(function(i){e&&!Ea(i)&&(e=!1)}),e}function lo(t){if(t instanceof pr&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(i){e&&!lo(i)&&(e=!1)}),e}function os(t,e){if(t instanceof pr&&e.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild(function(a){i&&!os(a,e)&&(i=!1)}),i}xn.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var a=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,jt);if(!a)return null;var u=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,jt);if(!u)return null;var c=null;return i.locale&&!(c=e.parse(i.locale,1,Ot))?null:new xn(a,u,c)},xn.prototype.evaluate=function(t){return new Sr(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},xn.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},xn.prototype.possibleOutputs=function(){return[void 0]},xn.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Do=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Do.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new Do(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Do.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Do.prototype.eachChild=function(){},Do.prototype.possibleOutputs=function(){return[void 0]},Do.prototype.serialize=function(){return["var",this.name]};var Yo=function(t,e,i,a,u){void 0===e&&(e=[]),void 0===a&&(a=new at),void 0===u&&(u=[]),this.registry=t,this.path=e,this.key=e.map(function(c){return"["+c+"]"}).join(""),this.scope=a,this.errors=u,this.expectedType=i};function as(t,e){for(var i,u=t.length-1,c=0,h=u,m=0;c<=h;)if((i=t[m=Math.floor((c+h)/2)])<=e){if(m===u||e<t[m+1])return m;c=m+1}else{if(!(i>e))throw new on("Input is not a number.");h=m-1}return 0}Yo.prototype.parse=function(t,e,i,a,u){return void 0===u&&(u={}),e?this.concat(e,i,a)._parse(t,u):this._parse(t,u)},Yo.prototype._parse=function(t,e){function i(T,C,M){return"assert"===M?new an(C,[T]):"coerce"===M?new Wn(C,[T]):T}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var a=t[0];if("string"!=typeof a)return this.error("Expression name must be a string, but found "+typeof a+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var u=this.registry[a];if(u){var c=u.parse(t,this);if(!c)return null;if(this.expectedType){var h=this.expectedType,m=c.type;if("string"!==h.kind&&"number"!==h.kind&&"boolean"!==h.kind&&"object"!==h.kind&&"array"!==h.kind||"value"!==m.kind)if("color"!==h.kind&&"formatted"!==h.kind&&"resolvedImage"!==h.kind||"value"!==m.kind&&"string"!==m.kind){if(this.checkSubtype(h,m))return null}else c=i(c,h,e.typeAnnotation||"coerce");else c=i(c,h,e.typeAnnotation||"assert")}if(!(c instanceof Hi)&&"resolvedImage"!==c.type.kind&&function T(C){if(C instanceof Do)return T(C.boundExpression);if(C instanceof pr&&"error"===C.name||C instanceof xn)return!1;var M=C instanceof Wn||C instanceof an,R=!0;return C.eachChild(function(O){R=M?R&&T(O):R&&O instanceof Hi}),!!R&&Ea(C)&&os(C,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(c)){var _=new qo;try{c=new Hi(c.type,c.evaluate(_))}catch(T){return this.error(T.message),null}}return c}return this.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Yo.prototype.concat=function(t,e,i){var a="number"==typeof t?this.path.concat(t):this.path,u=i?this.scope.concat(i):this.scope;return new Yo(this.registry,a,e||null,u,this.errors)},Yo.prototype.error=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var a=""+this.key+e.map(function(u){return"["+u+"]"}).join("");this.errors.push(new yt(a,t))},Yo.prototype.checkSubtype=function(t,e){var i=Ei(t,e);return i&&this.error(i),i};var Lo=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var a=0,u=i;a<u.length;a+=1){var c=u[a],m=c[1];this.labels.push(c[0]),this.outputs.push(m)}};function $r(t,e,i){return t*(1-i)+e*i}Lo.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,tt);if(!i)return null;var a=[],u=null;e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=1;c<t.length;c+=2){var h=1===c?-1/0:t[c],m=t[c+1],_=c,T=c+1;if("number"!=typeof h)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_);if(a.length&&a[a.length-1][0]>=h)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_);var C=e.parse(m,T,u);if(!C)return null;u=u||C.type,a.push([h,C])}return new Lo(u,i,a)},Lo.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var a=this.input.evaluate(t);if(a<=e[0])return i[0].evaluate(t);var u=e.length;return a>=e[u-1]?i[u-1].evaluate(t):i[as(e,a)].evaluate(t)},Lo.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},Lo.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(e){return e.possibleOutputs()}))},Lo.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var ca=Object.freeze({__proto__:null,number:$r,color:function(t,e,i){return new Ue($r(t.r,e.r,i),$r(t.g,e.g,i),$r(t.b,e.b,i),$r(t.a,e.a,i))},array:function(t,e,i){return t.map(function(a,u){return $r(a,e[u],i)})}}),Ia=4/29,ko=6/29,pa=3*ko*ko,ha=Math.PI/180,Ms=180/Math.PI;function gs(t){return t>.008856451679035631?Math.pow(t,1/3):t/pa+Ia}function ss(t){return t>ko?t*t*t:pa*(t-Ia)}function uo(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function go(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ka(t){var e=go(t.r),i=go(t.g),a=go(t.b),u=gs((.4124564*e+.3575761*i+.1804375*a)/.95047),c=gs((.2126729*e+.7151522*i+.072175*a)/1);return{l:116*c-16,a:500*(u-c),b:200*(c-gs((.0193339*e+.119192*i+.9503041*a)/1.08883)),alpha:t.a}}function aa(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,a=isNaN(t.b)?e:e-t.b/200;return e=1*ss(e),i=.95047*ss(i),a=1.08883*ss(a),new Ue(uo(3.2404542*i-1.5371385*e-.4985314*a),uo(-.969266*i+1.8760108*e+.041556*a),uo(.0556434*i-.2040259*e+1.0572252*a),t.alpha)}function Rs(t,e,i){var a=e-t;return t+i*(a>180||a<-180?a-360*Math.round(a/360):a)}var Oa={forward:ka,reverse:aa,interpolate:function(t,e,i){return{l:$r(t.l,e.l,i),a:$r(t.a,e.a,i),b:$r(t.b,e.b,i),alpha:$r(t.alpha,e.alpha,i)}}},Fa={forward:function(t){var e=ka(t),i=e.l,a=e.a,u=e.b,c=Math.atan2(u,a)*Ms;return{h:c<0?c+360:c,c:Math.sqrt(a*a+u*u),l:i,alpha:t.a}},reverse:function(t){var e=t.h*ha,i=t.c;return aa({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:Rs(t.h,e.h,i),c:$r(t.c,e.c,i),l:$r(t.l,e.l,i),alpha:$r(t.alpha,e.alpha,i)}}},w=Object.freeze({__proto__:null,lab:Oa,hcl:Fa}),z=function(t,e,i,a,u){this.type=t,this.operator=e,this.interpolation=i,this.input=a,this.labels=[],this.outputs=[];for(var c=0,h=u;c<h.length;c+=1){var m=h[c],T=m[1];this.labels.push(m[0]),this.outputs.push(T)}};function V(t,e,i,a){var u=a-i,c=t-i;return 0===u?0:1===e?c/u:(Math.pow(e,c)-1)/(Math.pow(e,u)-1)}z.interpolationFactor=function(t,e,i,a){var u=0;if("exponential"===t.name)u=V(e,t.base,i,a);else if("linear"===t.name)u=V(e,1,i,a);else if("cubic-bezier"===t.name){var c=t.controlPoints;u=new I(c[0],c[1],c[2],c[3]).solve(V(e,1,i,a))}return u},z.parse=function(t,e){var i=t[0],a=t[1],u=t[2],c=t.slice(3);if(!Array.isArray(a)||0===a.length)return e.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var h=a[1];if("number"!=typeof h)return e.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:h}}else{if("cubic-bezier"!==a[0])return e.error("Unknown interpolation type "+String(a[0]),1,0);var m=a.slice(1);if(4!==m.length||m.some(function(it){return"number"!=typeof it||it<0||it>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:m}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(u=e.parse(u,2,tt)))return null;var _=[],T=null;"interpolate-hcl"===i||"interpolate-lab"===i?T=Nt:e.expectedType&&"value"!==e.expectedType.kind&&(T=e.expectedType);for(var C=0;C<c.length;C+=2){var M=c[C],R=c[C+1],O=C+3,B=C+4;if("number"!=typeof M)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(_.length&&_[_.length-1][0]>=M)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);var Y=e.parse(R,B,T);if(!Y)return null;T=T||Y.type,_.push([M,Y])}return"number"===T.kind||"color"===T.kind||"array"===T.kind&&"number"===T.itemType.kind&&"number"==typeof T.N?new z(T,i,a,u,_):e.error("Type "+Qe(T)+" is not interpolatable.")},z.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var a=this.input.evaluate(t);if(a<=e[0])return i[0].evaluate(t);var u=e.length;if(a>=e[u-1])return i[u-1].evaluate(t);var c=as(e,a),_=z.interpolationFactor(this.interpolation,a,e[c],e[c+1]),T=i[c].evaluate(t),C=i[c+1].evaluate(t);return"interpolate"===this.operator?ca[this.type.kind.toLowerCase()](T,C,_):"interpolate-hcl"===this.operator?Fa.reverse(Fa.interpolate(Fa.forward(T),Fa.forward(C),_)):Oa.reverse(Oa.interpolate(Oa.forward(T),Oa.forward(C),_))},z.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},z.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(e){return e.possibleOutputs()}))},z.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var Z=function(t,e){this.type=t,this.args=e};Z.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,a=e.expectedType;a&&"value"!==a.kind&&(i=a);for(var u=[],c=0,h=t.slice(1);c<h.length;c+=1){var _=e.parse(h[c],1+u.length,i,void 0,{typeAnnotation:"omit"});if(!_)return null;i=i||_.type,u.push(_)}var T=a&&u.some(function(C){return Ei(a,C.type)});return new Z(T?he:i,u)},Z.prototype.evaluate=function(t){for(var e,i=null,a=0,u=0,c=this.args;u<c.length&&(a++,(i=c[u].evaluate(t))&&i instanceof Rr&&!i.available&&(e||(e=i.name),i=null,a===this.args.length&&(i=e)),null===i);u+=1);return i},Z.prototype.eachChild=function(t){this.args.forEach(t)},Z.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(e){return e.possibleOutputs()}))},Z.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var dt=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};dt.prototype.evaluate=function(t){return this.result.evaluate(t)},dt.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},dt.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],a=1;a<t.length-1;a+=2){var u=t[a];if("string"!=typeof u)return e.error("Expected string, but found "+typeof u+" instead.",a);if(/[^a-zA-Z0-9_]/.test(u))return e.error("Variable names must contain only alphanumeric characters or '_'.",a);var c=e.parse(t[a+1],a+1);if(!c)return null;i.push([u,c])}var h=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return h?new dt(i,h):null},dt.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},dt.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var a=i[e];t.push(a[0],a[1].serialize())}return t.push(this.result.serialize()),t};var bt=function(t,e,i){this.type=t,this.index=e,this.input=i};bt.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,tt),a=e.parse(t[2],2,ai(e.expectedType||he));return i&&a?new bt(a.type.itemType,i,a):null},bt.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new on("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new on("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new on("Array index must be an integer, but found "+e+" instead.");return i[e]},bt.prototype.eachChild=function(t){t(this.index),t(this.input)},bt.prototype.possibleOutputs=function(){return[void 0]},bt.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var At=function(t,e){this.type=jt,this.needle=t,this.haystack=e};At.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i,a=e.parse(t[1],1,he),u=e.parse(t[2],2,he);return a&&u?"boolean"!==(i=a.type).kind&&"string"!==i.kind&&"number"!==i.kind&&"null"!==i.kind&&"value"!==i.kind?e.error("Expected first argument to be of type boolean, string, number or null, but found "+Qe(a.type)+" instead"):new At(a,u):null},At.prototype.evaluate=function(t){var a,e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!e||!i)return!1;if("boolean"!=typeof(a=e)&&"string"!=typeof a&&"number"!=typeof a)throw new on("Expected first argument to be of type boolean, string or number, but found "+Qe(Xi(e))+" instead.");if(!function(a){return Array.isArray(a)||"string"==typeof a}(i))throw new on("Expected second argument to be of type array or string, but found "+Qe(Xi(i))+" instead.");return i.indexOf(e)>=0},At.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},At.prototype.possibleOutputs=function(){return[!0,!1]},At.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Xt=function(t,e,i,a,u,c){this.inputType=t,this.type=e,this.input=i,this.cases=a,this.outputs=u,this.otherwise=c};Xt.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,a;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(var u={},c=[],h=2;h<t.length-1;h+=2){var m=t[h],_=t[h+1];Array.isArray(m)||(m=[m]);var T=e.concat(h);if(0===m.length)return T.error("Expected at least one branch label.");for(var C=0,M=m;C<M.length;C+=1){var R=M[C];if("number"!=typeof R&&"string"!=typeof R)return T.error("Branch labels must be numbers or strings.");if("number"==typeof R&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return T.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof R&&Math.floor(R)!==R)return T.error("Numeric branch labels must be integer values.");if(i){if(T.checkSubtype(i,Xi(R)))return null}else i=Xi(R);if(void 0!==u[String(R)])return T.error("Branch labels must be unique.");u[String(R)]=c.length}var O=e.parse(_,h,a);if(!O)return null;a=a||O.type,c.push(O)}var B=e.parse(t[1],1,he);if(!B)return null;var Y=e.parse(t[t.length-1],t.length-1,a);return Y?"value"!==B.type.kind&&e.concat(1).checkSubtype(i,B.type)?null:new Xt(i,a,B,u,c,Y):null},Xt.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(Xi(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Xt.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Xt.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(e){return e.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Xt.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],i=[],a={},u=0,c=Object.keys(this.cases).sort();u<c.length;u+=1){var h=c[u];void 0===(M=a[this.cases[h]])?(a[this.cases[h]]=i.length,i.push([this.cases[h],[h]])):i[M][1].push(h)}for(var m=function(O){return"number"===t.inputType.kind?Number(O):O},_=0,T=i;_<T.length;_+=1){var C=T[_],M=C[0],R=C[1];e.push(1===R.length?m(R[0]):R.map(m)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var ie=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};function ge(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Xe(t,e,i,a){return 0===a.compare(e,i)}function pi(t,e,i){var a="=="!==t&&"!="!==t;return function(){function u(c,h,m){this.type=jt,this.lhs=c,this.rhs=h,this.collator=m,this.hasUntypedArgument="value"===c.type.kind||"value"===h.type.kind}return u.parse=function(c,h){if(3!==c.length&&4!==c.length)return h.error("Expected two or three arguments.");var m=c[0],_=h.parse(c[1],1,he);if(!_)return null;if(!ge(m,_.type))return h.concat(1).error('"'+m+"\" comparisons are not supported for type '"+Qe(_.type)+"'.");var T=h.parse(c[2],2,he);if(!T)return null;if(!ge(m,T.type))return h.concat(2).error('"'+m+"\" comparisons are not supported for type '"+Qe(T.type)+"'.");if(_.type.kind!==T.type.kind&&"value"!==_.type.kind&&"value"!==T.type.kind)return h.error("Cannot compare types '"+Qe(_.type)+"' and '"+Qe(T.type)+"'.");a&&("value"===_.type.kind&&"value"!==T.type.kind?_=new an(T.type,[_]):"value"!==_.type.kind&&"value"===T.type.kind&&(T=new an(_.type,[T])));var C=null;if(4===c.length){if("string"!==_.type.kind&&"string"!==T.type.kind&&"value"!==_.type.kind&&"value"!==T.type.kind)return h.error("Cannot use collator to compare non-string types.");if(!(C=h.parse(c[3],3,qe)))return null}return new u(_,T,C)},u.prototype.evaluate=function(c){var h=this.lhs.evaluate(c),m=this.rhs.evaluate(c);if(a&&this.hasUntypedArgument){var _=Xi(h),T=Xi(m);if(_.kind!==T.kind||"string"!==_.kind&&"number"!==_.kind)throw new on('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+_.kind+", "+T.kind+") instead.")}if(this.collator&&!a&&this.hasUntypedArgument){var C=Xi(h),M=Xi(m);if("string"!==C.kind||"string"!==M.kind)return e(c,h,m)}return this.collator?i(c,h,m,this.collator.evaluate(c)):e(c,h,m)},u.prototype.eachChild=function(c){c(this.lhs),c(this.rhs),this.collator&&c(this.collator)},u.prototype.possibleOutputs=function(){return[!0,!1]},u.prototype.serialize=function(){var c=[t];return this.eachChild(function(h){c.push(h.serialize())}),c},u}()}ie.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var a=[],u=1;u<t.length-1;u+=2){var c=e.parse(t[u],u,jt);if(!c)return null;var h=e.parse(t[u+1],u+1,i);if(!h)return null;a.push([c,h]),i=i||h.type}var m=e.parse(t[t.length-1],t.length-1,i);return m?new ie(i,a,m):null},ie.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var a=i[e],c=a[1];if(a[0].evaluate(t))return c.evaluate(t)}return this.otherwise.evaluate(t)},ie.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var a=i[e],c=a[1];t(a[0]),t(c)}t(this.otherwise)},ie.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map(function(e){return e[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},ie.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var je=pi("==",function(t,e,i){return e===i},Xe),Ge=pi("!=",function(t,e,i){return e!==i},function(t,e,i,a){return!Xe(0,e,i,a)}),Ki=pi("<",function(t,e,i){return e<i},function(t,e,i,a){return a.compare(e,i)<0}),xr=pi(">",function(t,e,i){return e>i},function(t,e,i,a){return a.compare(e,i)>0}),Yi=pi("<=",function(t,e,i){return e<=i},function(t,e,i,a){return a.compare(e,i)<=0}),ro=pi(">=",function(t,e,i){return e>=i},function(t,e,i,a){return a.compare(e,i)>=0}),En=function(t,e,i,a,u){this.type=Ot,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=a,this.maxFractionDigits=u};En.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,tt);if(!i)return null;var a=t[2];if("object"!=typeof a||Array.isArray(a))return e.error("NumberFormat options argument must be an object.");var u=null;if(a.locale&&!(u=e.parse(a.locale,1,Ot)))return null;var c=null;if(a.currency&&!(c=e.parse(a.currency,1,Ot)))return null;var h=null;if(a["min-fraction-digits"]&&!(h=e.parse(a["min-fraction-digits"],1,tt)))return null;var m=null;return a["max-fraction-digits"]&&!(m=e.parse(a["max-fraction-digits"],1,tt))?null:new En(i,u,c,h,m)},En.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},En.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},En.prototype.possibleOutputs=function(){return[void 0]},En.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Gn=function(t){this.type=tt,this.input=t};Gn.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+Qe(i.type)+" instead."):new Gn(i):null},Gn.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e||Array.isArray(e))return e.length;throw new on("Expected value to be of type string or array, but found "+Qe(Xi(e))+" instead.")},Gn.prototype.eachChild=function(t){t(this.input)},Gn.prototype.possibleOutputs=function(){return[void 0]},Gn.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var sn={"==":je,"!=":Ge,">":xr,"<":Ki,">=":ro,"<=":Yi,array:an,at:bt,boolean:an,case:ie,coalesce:Z,collator:xn,format:qn,image:Zn,in:At,interpolate:z,"interpolate-hcl":z,"interpolate-lab":z,length:Gn,let:dt,literal:Hi,match:Xt,number:an,"number-format":En,object:an,step:Lo,string:an,"to-boolean":Wn,"to-color":Wn,"to-number":Wn,"to-string":Wn,var:Do};function gi(t,e){var i=e[0],a=e[1],u=e[2],c=e[3];i=i.evaluate(t),a=a.evaluate(t),u=u.evaluate(t);var h=c?c.evaluate(t):1,m=In(i,a,u,h);if(m)throw new on(m);return new Ue(i/255*h,a/255*h,u/255*h,h)}function Ho(t,e){return t in e}function Wr(t,e){var i=e[t];return void 0===i?null:i}function ln(t){return{type:t}}function Aa(t){return{result:"success",value:t}}function Oo(t){return{result:"error",value:t}}function Qn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function sa(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Zo(t){return!!t.expression&&t.expression.interpolated}function er(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Wo(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Ta(t){return t}function un(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function da(t,e,i,a,u){return un(typeof i===u?a[i]:void 0,t.default,e.default)}function Ao(t,e,i){if("number"!==er(i))return un(t.default,e.default);var a=t.stops.length;if(1===a||i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[a-1][0])return t.stops[a-1][1];var u=as(t.stops.map(function(c){return c[0]}),i);return t.stops[u][1]}function Jo(t,e,i){var a=void 0!==t.base?t.base:1;if("number"!==er(i))return un(t.default,e.default);var u=t.stops.length;if(1===u||i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[u-1][0])return t.stops[u-1][1];var R,O,Y,it,c=as(t.stops.map(function(M){return M[0]}),i),h=(R=a,it=i-(O=t.stops[c][0]),0==(Y=t.stops[c+1][0]-O)?0:1===R?it/Y:(Math.pow(R,it)-1)/(Math.pow(R,Y)-1)),m=t.stops[c][1],_=t.stops[c+1][1],T=ca[e.type]||Ta;if(t.colorSpace&&"rgb"!==t.colorSpace){var C=w[t.colorSpace];T=function(M,R){return C.reverse(C.interpolate(C.forward(M),C.forward(R),h))}}return"function"==typeof m.evaluate?{evaluate:function(){for(var M=[],R=arguments.length;R--;)M[R]=arguments[R];var O=m.evaluate.apply(void 0,M),B=_.evaluate.apply(void 0,M);if(void 0!==O&&void 0!==B)return T(O,B,h)}}:T(m,_,h)}function Kr(t,e,i){return"color"===e.type?i=Ue.parse(i):"formatted"===e.type?i=mr.fromString(i.toString()):"resolvedImage"===e.type?i=Rr.fromString(i.toString()):er(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),un(i,t.default,e.default)}pr.register(sn,{error:[{kind:"error"},[Ot],function(t,e){throw new on(e[0].evaluate(t))}],typeof:[Ot,[he],function(t,e){return Qe(Xi(e[0].evaluate(t)))}],"to-rgba":[ai(tt,4),[Nt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Nt,[tt,tt,tt],gi],rgba:[Nt,[tt,tt,tt,tt],gi],has:{type:jt,overloads:[[[Ot],function(t,e){return Ho(e[0].evaluate(t),t.properties())}],[[Ot,fe],function(t,e){var a=e[1];return Ho(e[0].evaluate(t),a.evaluate(t))}]]},get:{type:he,overloads:[[[Ot],function(t,e){return Wr(e[0].evaluate(t),t.properties())}],[[Ot,fe],function(t,e){var a=e[1];return Wr(e[0].evaluate(t),a.evaluate(t))}]]},"feature-state":[he,[Ot],function(t,e){return Wr(e[0].evaluate(t),t.featureState||{})}],properties:[fe,[],function(t){return t.properties()}],"geometry-type":[Ot,[],function(t){return t.geometryType()}],id:[he,[],function(t){return t.id()}],zoom:[tt,[],function(t){return t.globals.zoom}],"heatmap-density":[tt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[tt,[],function(t){return t.globals.lineProgress||0}],accumulated:[he,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[tt,ln(tt),function(t,e){for(var i=0,a=0,u=e;a<u.length;a+=1)i+=u[a].evaluate(t);return i}],"*":[tt,ln(tt),function(t,e){for(var i=1,a=0,u=e;a<u.length;a+=1)i*=u[a].evaluate(t);return i}],"-":{type:tt,overloads:[[[tt,tt],function(t,e){var a=e[1];return e[0].evaluate(t)-a.evaluate(t)}],[[tt],function(t,e){return-e[0].evaluate(t)}]]},"/":[tt,[tt,tt],function(t,e){var a=e[1];return e[0].evaluate(t)/a.evaluate(t)}],"%":[tt,[tt,tt],function(t,e){var a=e[1];return e[0].evaluate(t)%a.evaluate(t)}],ln2:[tt,[],function(){return Math.LN2}],pi:[tt,[],function(){return Math.PI}],e:[tt,[],function(){return Math.E}],"^":[tt,[tt,tt],function(t,e){var a=e[1];return Math.pow(e[0].evaluate(t),a.evaluate(t))}],sqrt:[tt,[tt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[tt,[tt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[tt,[tt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[tt,[tt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[tt,[tt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[tt,[tt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[tt,[tt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[tt,[tt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[tt,[tt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[tt,[tt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[tt,ln(tt),function(t,e){return Math.min.apply(Math,e.map(function(i){return i.evaluate(t)}))}],max:[tt,ln(tt),function(t,e){return Math.max.apply(Math,e.map(function(i){return i.evaluate(t)}))}],abs:[tt,[tt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[tt,[tt],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[tt,[tt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[tt,[tt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[jt,[Ot,he],function(t,e){var i=e[0],a=e[1];return t.properties()[i.value]===a.value}],"filter-id-==":[jt,[he],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[jt,[Ot],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[jt,[Ot,he],function(t,e){var i=e[0],a=e[1],u=t.properties()[i.value],c=a.value;return typeof u==typeof c&&u<c}],"filter-id-<":[jt,[he],function(t,e){var i=e[0],a=t.id(),u=i.value;return typeof a==typeof u&&a<u}],"filter->":[jt,[Ot,he],function(t,e){var i=e[0],a=e[1],u=t.properties()[i.value],c=a.value;return typeof u==typeof c&&u>c}],"filter-id->":[jt,[he],function(t,e){var i=e[0],a=t.id(),u=i.value;return typeof a==typeof u&&a>u}],"filter-<=":[jt,[Ot,he],function(t,e){var i=e[0],a=e[1],u=t.properties()[i.value],c=a.value;return typeof u==typeof c&&u<=c}],"filter-id-<=":[jt,[he],function(t,e){var i=e[0],a=t.id(),u=i.value;return typeof a==typeof u&&a<=u}],"filter->=":[jt,[Ot,he],function(t,e){var i=e[0],a=e[1],u=t.properties()[i.value],c=a.value;return typeof u==typeof c&&u>=c}],"filter-id->=":[jt,[he],function(t,e){var i=e[0],a=t.id(),u=i.value;return typeof a==typeof u&&a>=u}],"filter-has":[jt,[he],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[jt,[],function(t){return null!==t.id()}],"filter-type-in":[jt,[ai(Ot)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[jt,[ai(he)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[jt,[Ot,ai(he)],function(t,e){var i=e[0];return e[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[jt,[Ot,ai(he)],function(t,e){var i=e[0],a=e[1];return function(u,c,h,m){for(;h<=m;){var _=h+m>>1;if(c[_]===u)return!0;c[_]>u?m=_-1:h=_+1}return!1}(t.properties()[i.value],a.value,0,a.value.length-1)}],all:{type:jt,overloads:[[[jt,jt],function(t,e){var a=e[1];return e[0].evaluate(t)&&a.evaluate(t)}],[ln(jt),function(t,e){for(var i=0,a=e;i<a.length;i+=1)if(!a[i].evaluate(t))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],function(t,e){var a=e[1];return e[0].evaluate(t)||a.evaluate(t)}],[ln(jt),function(t,e){for(var i=0,a=e;i<a.length;i+=1)if(a[i].evaluate(t))return!0;return!1}]]},"!":[jt,[jt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[jt,[Ot],function(t,e){var a=t.globals&&t.globals.isSupportedScript;return!a||a(e[0].evaluate(t))}],upcase:[Ot,[Ot],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Ot,[Ot],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Ot,ln(he),function(t,e){return e.map(function(i){return vr(i.evaluate(t))}).join("")}],"resolved-locale":[Ot,[qe],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var en=function(t,e){var i;this.expression=t,this._warningHistory={},this._evaluator=new qo,this._defaultValue=e?"color"===(i=e).type&&Wo(i.default)?new Ue(0,0,0,0):"color"===i.type?Ue.parse(i.default)||null:void 0===i.default?null:i.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function to(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in sn}function vo(t,e){var u,c,i=new Yo(sn,[],e?(c={color:Nt,string:Ot,number:tt,enum:Ot,boolean:jt,formatted:Be,resolvedImage:ze},"array"===(u=e).type?ai(c[u.value]||he,u.length):c[u.type]):void 0),a=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return a?Aa(new en(a,e)):Oo(i.errors)}en.prototype.evaluateWithoutErrorHandling=function(t,e,i,a,u){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=u,this.expression.evaluate(this._evaluator)},en.prototype.evaluate=function(t,e,i,a,u){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=u||null;try{var c=this.expression.evaluate(this._evaluator);if(null==c||"number"==typeof c&&c!=c)return this._defaultValue;if(this._enumValues&&!(c in this._enumValues))throw new on("Expected value to be one of "+Object.keys(this._enumValues).map(function(h){return JSON.stringify(h)}).join(", ")+", but found "+JSON.stringify(c)+" instead.");return c}catch(h){return this._warningHistory[h.message]||(this._warningHistory[h.message]=!0,"undefined"!=typeof console&&console.warn(h.message)),this._defaultValue}};var Hn=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!lo(e.expression)};Hn.prototype.evaluateWithoutErrorHandling=function(t,e,i,a,u){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,a,u)},Hn.prototype.evaluate=function(t,e,i,a,u){return this._styleExpression.evaluate(t,e,i,a,u)};var Xn=function(t,e,i,a){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!lo(e.expression),this.interpolationType=a};function ts(t,e){if("error"===(t=vo(t,e)).result)return t;var i=t.value.expression,a=Ea(i);if(!a&&!Qn(e))return Oo([new yt("","data expressions not supported")]);var u=os(i,["zoom"]);if(!u&&!sa(e))return Oo([new yt("","zoom expressions not supported")]);var c=function m(_){var T=null;if(_ instanceof dt)T=m(_.result);else if(_ instanceof Z)for(var C=0,M=_.args;C<M.length&&!(T=m(M[C]));C+=1);else(_ instanceof Lo||_ instanceof z)&&_.input instanceof pr&&"zoom"===_.input.name&&(T=_);return T instanceof yt||_.eachChild(function(O){var B=m(O);B instanceof yt?T=B:!T&&B?T=new yt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):T&&B&&T!==B&&(T=new yt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),T}(i);return c||u?c instanceof yt?Oo([c]):c instanceof z&&!Zo(e)?Oo([new yt("",'"interpolate" expressions cannot be used with this property')]):Aa(c?new Xn(a?"camera":"composite",t.value,c.labels,c instanceof z?c.interpolation:void 0):new Hn(a?"constant":"source",t.value)):Oo([new yt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Xn.prototype.evaluateWithoutErrorHandling=function(t,e,i,a,u){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,a,u)},Xn.prototype.evaluate=function(t,e,i,a,u){return this._styleExpression.evaluate(t,e,i,a,u)},Xn.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?z.interpolationFactor(this.interpolationType,t,e,i):0};var Qo=function(t,e){this._parameters=t,this._specification=e,j(this,function i(a,u){var c,h,m,_="color"===u.type,T=a.stops&&"object"==typeof a.stops[0][0],M=T||!(T||void 0!==a.property),R=a.type||(Zo(u)?"exponential":"interval");if(_&&((a=j({},a)).stops&&(a.stops=a.stops.map(function(Ke){return[Ke[0],Ue.parse(Ke[1])]})),a.default=Ue.parse(a.default?a.default:u.default)),a.colorSpace&&"rgb"!==a.colorSpace&&!w[a.colorSpace])throw new Error("Unknown color space: "+a.colorSpace);if("exponential"===R)c=Jo;else if("interval"===R)c=Ao;else if("categorical"===R){c=da,h=Object.create(null);for(var O=0,B=a.stops;O<B.length;O+=1){var Y=B[O];h[Y[0]]=Y[1]}m=typeof a.stops[0][0]}else{if("identity"!==R)throw new Error('Unknown function type "'+R+'"');c=Kr}if(T){for(var it={},ot=[],Tt=0;Tt<a.stops.length;Tt++){var wt=a.stops[Tt],It=wt[0].zoom;void 0===it[It]&&(it[It]={zoom:It,type:a.type,property:a.property,default:a.default,stops:[]},ot.push(It)),it[It].stops.push([wt[0].value,wt[1]])}for(var qt=[],Jt=0,Gt=ot;Jt<Gt.length;Jt+=1){var be=Gt[Jt];qt.push([it[be].zoom,i(it[be],u)])}var He={name:"linear"};return{kind:"composite",interpolationType:He,interpolationFactor:z.interpolationFactor.bind(void 0,He),zoomStops:qt.map(function(Ke){return Ke[0]}),evaluate:function(Ke,Re){var Ee=Ke.zoom;return Jo({stops:qt,base:a.base},u,Ee).evaluate(Ee,Re)}}}if(M){var Oe="exponential"===R?{name:"exponential",base:void 0!==a.base?a.base:1}:null;return{kind:"camera",interpolationType:Oe,interpolationFactor:z.interpolationFactor.bind(void 0,Oe),zoomStops:a.stops.map(function(Ke){return Ke[0]}),evaluate:function(Ke){return c(a,u,Ke.zoom,h,m)}}}return{kind:"source",evaluate:function(Ke,Re){var Ee=Re&&Re.properties?Re.properties[a.property]:void 0;return void 0===Ee?un(a.default,u.default):c(a,u,Ee,h,m)}}}(this._parameters,this._specification))};function eo(t){var e=t.key,i=t.value,a=t.valueSpec||{},u=t.objectElementValidators||{},c=t.style,h=t.styleSpec,m=[],_=er(i);if("object"!==_)return[new E(e,i,"object expected, "+_+" found")];for(var T in i){var C=T.split(".")[0],M=a[C]||a["*"],R=void 0;if(u[C])R=u[C];else if(a[C])R=_n;else if(u["*"])R=u["*"];else{if(!a["*"]){m.push(new E(e,i[T],'unknown property "'+T+'"'));continue}R=_n}m=m.concat(R({key:(e&&e+".")+T,value:i[T],valueSpec:M,style:c,styleSpec:h,object:i,objectKey:T},i))}for(var O in a)u[O]||a[O].required&&void 0===a[O].default&&void 0===i[O]&&m.push(new E(e,i,'missing required property "'+O+'"'));return m}function es(t){var e=t.value,i=t.valueSpec,a=t.style,u=t.styleSpec,c=t.key,h=t.arrayElementValidator||_n;if("array"!==er(e))return[new E(c,e,"array expected, "+er(e)+" found")];if(i.length&&e.length!==i.length)return[new E(c,e,"array length "+i.length+" expected, length "+e.length+" found")];if(i["min-length"]&&e.length<i["min-length"])return[new E(c,e,"array length at least "+i["min-length"]+" expected, length "+e.length+" found")];var m={type:i.value,values:i.values};u.$version<7&&(m.function=i.function),"object"===er(i.value)&&(m=i.value);for(var _=[],T=0;T<e.length;T++)_=_.concat(h({array:e,arrayIndex:T,value:e[T],valueSpec:m,style:a,styleSpec:u,key:c+"["+T+"]"}));return _}function Ua(t){var e=t.key,i=t.value,a=t.valueSpec,u=er(i);return"number"===u&&i!=i&&(u="NaN"),"number"!==u?[new E(e,i,"number expected, "+u+" found")]:"minimum"in a&&i<a.minimum?[new E(e,i,i+" is less than the minimum value "+a.minimum)]:"maximum"in a&&i>a.maximum?[new E(e,i,i+" is greater than the maximum value "+a.maximum)]:[]}function vs(t){var e,i,a,u=t.valueSpec,c=K(t.value.type),h={},m="categorical"!==c&&void 0===t.value.property,_=!m,T="array"===er(t.value.stops)&&"array"===er(t.value.stops[0])&&"object"===er(t.value.stops[0][0]),C=eo({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(O){if("identity"===c)return[new E(O.key,O.value,'identity function may not have a "stops" property')];var B=[],Y=O.value;return B=B.concat(es({key:O.key,value:Y,valueSpec:O.valueSpec,style:O.style,styleSpec:O.styleSpec,arrayElementValidator:M})),"array"===er(Y)&&0===Y.length&&B.push(new E(O.key,Y,"array must have at least one stop")),B},default:function(O){return _n({key:O.key,value:O.value,valueSpec:u,style:O.style,styleSpec:O.styleSpec})}}});return"identity"===c&&m&&C.push(new E(t.key,t.value,'missing required property "property"')),"identity"===c||t.value.stops||C.push(new E(t.key,t.value,'missing required property "stops"')),"exponential"===c&&t.valueSpec.expression&&!Zo(t.valueSpec)&&C.push(new E(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(_&&!Qn(t.valueSpec)?C.push(new E(t.key,t.value,"property functions not supported")):m&&!sa(t.valueSpec)&&C.push(new E(t.key,t.value,"zoom functions not supported"))),"categorical"!==c&&!T||void 0!==t.value.property||C.push(new E(t.key,t.value,'"property" property is required')),C;function M(O){var B=[],Y=O.value,it=O.key;if("array"!==er(Y))return[new E(it,Y,"array expected, "+er(Y)+" found")];if(2!==Y.length)return[new E(it,Y,"array length 2 expected, length "+Y.length+" found")];if(T){if("object"!==er(Y[0]))return[new E(it,Y,"object expected, "+er(Y[0])+" found")];if(void 0===Y[0].zoom)return[new E(it,Y,"object stop key must have zoom")];if(void 0===Y[0].value)return[new E(it,Y,"object stop key must have value")];if(a&&a>K(Y[0].zoom))return[new E(it,Y[0].zoom,"stop zoom values must appear in ascending order")];K(Y[0].zoom)!==a&&(a=K(Y[0].zoom),i=void 0,h={}),B=B.concat(eo({key:it+"[0]",value:Y[0],valueSpec:{zoom:{}},style:O.style,styleSpec:O.styleSpec,objectElementValidators:{zoom:Ua,value:R}}))}else B=B.concat(R({key:it+"[0]",value:Y[0],valueSpec:{},style:O.style,styleSpec:O.styleSpec},Y));return to(ct(Y[1]))?B.concat([new E(it+"[1]",Y[1],"expressions are not allowed in function stops.")]):B.concat(_n({key:it+"[1]",value:Y[1],valueSpec:u,style:O.style,styleSpec:O.styleSpec}))}function R(O,B){var Y=er(O.value),it=K(O.value),ot=null!==O.value?O.value:B;if(e){if(Y!==e)return[new E(O.key,ot,Y+" stop domain type must match previous stop domain type "+e)]}else e=Y;if("number"!==Y&&"string"!==Y&&"boolean"!==Y)return[new E(O.key,ot,"stop domain value must be a number, string, or boolean")];if("number"!==Y&&"categorical"!==c){var Tt="number expected, "+Y+" found";return Qn(u)&&void 0===c&&(Tt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new E(O.key,ot,Tt)]}return"categorical"!==c||"number"!==Y||isFinite(it)&&Math.floor(it)===it?"categorical"!==c&&"number"===Y&&void 0!==i&&it<i?[new E(O.key,ot,"stop domain values must appear in ascending order")]:(i=it,"categorical"===c&&it in h?[new E(O.key,ot,"stop domain values must be unique")]:(h[it]=!0,[])):[new E(O.key,ot,"integer expected, found "+it)]}}function Go(t){var e=("property"===t.expressionContext?ts:vo)(ct(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(a){return new E(""+t.key+a.key,t.value,a.message)});var i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==i.possibleOutputs().indexOf(void 0))return[new E(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!lo(i))return[new E(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!lo(i))return[new E(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!os(i,["zoom","feature-state"]))return[new E(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Ea(i))return[new E(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Na(t){var e=t.key,i=t.value,a=t.valueSpec,u=[];return Array.isArray(a.values)?-1===a.values.indexOf(K(i))&&u.push(new E(e,i,"expected one of ["+a.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(a.values).indexOf(K(i))&&u.push(new E(e,i,"expected one of ["+Object.keys(a.values).join(", ")+"], "+JSON.stringify(i)+" found")),u}function is(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&Array.isArray(t[2]);case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var a=i[e];if(!is(a)&&"boolean"!=typeof a)return!1}return!0;default:return!0}}Qo.deserialize=function(t){return new Qo(t._parameters,t._specification)},Qo.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var ja={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function rs(t){if(null==t)return function(){return!0};is(t)||(t=Xo(t));var e=vo(t,ja);if("error"===e.result)throw new Error(e.value.map(function(i){return i.key+": "+i.message}).join(", "));return function(i,a){return e.value.evaluate(i,a)}}function Bs(t,e){return t<e?-1:t>e?1:0}function Xo(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?ta(t[1],t[2],"=="):"!="===i?ye(ta(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?ta(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(Xo))):"all"===i?["all"].concat(t.slice(1).map(Xo)):"none"===i?["all"].concat(t.slice(1).map(Xo).map(ye)):"in"===i?Va(t[1],t.slice(2)):"!in"===i?ye(Va(t[1],t.slice(2))):"has"===i?ke(t[1]):"!has"!==i||ye(ke(t[1]))}function ta(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function Va(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(i){return typeof i!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(Bs)]]:["filter-in-small",t,["literal",e]]}}function ke(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function ye(t){return["!",t]}function Q(t){return is(ct(t.value))?Go(j({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(i){var a=i.value,u=i.key;if("array"!==er(a))return[new E(u,a,"array expected, "+er(a)+" found")];var h,c=i.styleSpec,m=[];if(a.length<1)return[new E(u,a,"filter array must have at least 1 element")];switch(m=m.concat(Na({key:u+"[0]",value:a[0],valueSpec:c.filter_operator,style:i.style,styleSpec:i.styleSpec})),K(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&"$type"===K(a[1])&&m.push(new E(u,a,'"$type" cannot be use with operator "'+a[0]+'"'));case"==":case"!=":3!==a.length&&m.push(new E(u,a,'filter array for operator "'+a[0]+'" must have 3 elements'));case"in":case"!in":a.length>=2&&"string"!==(h=er(a[1]))&&m.push(new E(u+"[1]",a[1],"string expected, "+h+" found"));for(var _=2;_<a.length;_++)h=er(a[_]),"$type"===K(a[1])?m=m.concat(Na({key:u+"["+_+"]",value:a[_],valueSpec:c.geometry_type,style:i.style,styleSpec:i.styleSpec})):"string"!==h&&"number"!==h&&"boolean"!==h&&m.push(new E(u+"["+_+"]",a[_],"string, number, or boolean expected, "+h+" found"));break;case"any":case"all":case"none":for(var T=1;T<a.length;T++)m=m.concat(e({key:u+"["+T+"]",value:a[T],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":h=er(a[1]),2!==a.length?m.push(new E(u,a,'filter array for "'+a[0]+'" operator must have 2 elements')):"string"!==h&&m.push(new E(u+"[1]",a[1],"string expected, "+h+" found"))}return m}(t)}function gt(t,e){var i=t.key,a=t.style,u=t.styleSpec,c=t.value,h=t.objectKey,m=u[e+"_"+t.layerType];if(!m)return[];var _=h.match(/^(.*)-transition$/);if("paint"===e&&_&&m[_[1]]&&m[_[1]].transition)return _n({key:i,value:c,valueSpec:u.transition,style:a,styleSpec:u});var T,C=t.valueSpec||m[h];if(!C)return[new E(i,c,'unknown property "'+h+'"')];if("string"===er(c)&&Qn(C)&&!C.tokens&&(T=/^{([^}]+)}$/.exec(c)))return[new E(i,c,'"'+h+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(T[1])+" }`.")];var M=[];return"symbol"===t.layerType&&("text-field"===h&&a&&!a.glyphs&&M.push(new E(i,c,'use of "text-field" requires a style "glyphs" property')),"text-font"===h&&Wo(ct(c))&&"identity"===K(c.type)&&M.push(new E(i,c,'"text-font" does not support identity functions'))),M.concat(_n({key:t.key,value:c,valueSpec:C,style:a,styleSpec:u,expressionContext:"property",propertyType:e,propertyKey:h}))}function ee(t){return gt(t,"paint")}function we(t){return gt(t,"layout")}function Ae(t){var e=[],i=t.value,a=t.key,u=t.style,c=t.styleSpec;i.type||i.ref||e.push(new E(a,i,'either "type" or "ref" is required'));var h,m=K(i.type),_=K(i.ref);if(i.id)for(var T=K(i.id),C=0;C<t.arrayIndex;C++){var M=u.layers[C];K(M.id)===T&&e.push(new E(a,i.id,'duplicate layer id "'+i.id+'", previously used at line '+M.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(B){B in i&&e.push(new E(a,i[B],'"'+B+'" is prohibited for ref layers'))}),u.layers.forEach(function(B){K(B.id)===_&&(h=B)}),h?h.ref?e.push(new E(a,i.ref,"ref cannot reference another ref layer")):m=K(h.type):e.push(new E(a,i.ref,'ref layer "'+_+'" not found'));else if("background"!==m)if(i.source){var R=u.sources&&u.sources[i.source],O=R&&K(R.type);R?"vector"===O&&"raster"===m?e.push(new E(a,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===O&&"raster"!==m?e.push(new E(a,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==O||i["source-layer"]?"raster-dem"===O&&"hillshade"!==m?e.push(new E(a,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==m||!i.paint||!i.paint["line-gradient"]||"geojson"===O&&R.lineMetrics||e.push(new E(a,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new E(a,i,'layer "'+i.id+'" must specify a "source-layer"')):e.push(new E(a,i.source,'source "'+i.source+'" not found'))}else e.push(new E(a,i,'missing required property "source"'));return e=e.concat(eo({key:a,value:i,valueSpec:c.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return _n({key:a+".type",value:i.type,valueSpec:c.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"})},filter:Q,layout:function(B){return eo({layer:i,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,objectElementValidators:{"*":function(Y){return we(j({layerType:m},Y))}}})},paint:function(B){return eo({layer:i,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,objectElementValidators:{"*":function(Y){return ee(j({layerType:m},Y))}}})}}}))}function Di(t){var e=t.value,i=t.key,a=er(e);return"string"!==a?[new E(i,e,"string expected, "+a+" found")]:[]}var zr={promoteId:function(t){var e=t.key,i=t.value;if("string"===er(i))return Di({key:e,value:i});var a=[];for(var u in i)a.push.apply(a,Di({key:e+"."+u,value:i[u]}));return a}};function Rn(t){var e=t.value,i=t.key,a=t.styleSpec,u=t.style;if(!e.type)return[new E(i,e,'"type" is required')];var c,h=K(e.type);switch(h){case"vector":case"raster":case"raster-dem":return eo({key:i,value:e,valueSpec:a["source_"+h.replace("-","_")],style:t.style,styleSpec:a,objectElementValidators:zr});case"geojson":if(c=eo({key:i,value:e,valueSpec:a.source_geojson,style:u,styleSpec:a,objectElementValidators:zr}),e.cluster)for(var m in e.clusterProperties){var _=e.clusterProperties[m],T=_[0],M="string"==typeof T?[T,["accumulated"],["get",m]]:T;c.push.apply(c,Go({key:i+"."+m+".map",value:_[1],expressionContext:"cluster-map"})),c.push.apply(c,Go({key:i+"."+m+".reduce",value:M,expressionContext:"cluster-reduce"}))}return c;case"video":return eo({key:i,value:e,valueSpec:a.source_video,style:u,styleSpec:a});case"image":return eo({key:i,value:e,valueSpec:a.source_image,style:u,styleSpec:a});case"canvas":return[new E(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Na({key:i+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:u,styleSpec:a})}}function On(t){var e=t.value,i=t.styleSpec,a=i.light,u=t.style,c=[],h=er(e);if(void 0===e)return c;if("object"!==h)return c.concat([new E("light",e,"object expected, "+h+" found")]);for(var m in e){var _=m.match(/^(.*)-transition$/);c=c.concat(_&&a[_[1]]&&a[_[1]].transition?_n({key:m,value:e[m],valueSpec:i.transition,style:u,styleSpec:i}):a[m]?_n({key:m,value:e[m],valueSpec:a[m],style:u,styleSpec:i}):[new E(m,e[m],'unknown property "'+m+'"')])}return c}var $o={"*":function(){return[]},array:es,boolean:function(t){var e=t.value,i=t.key,a=er(e);return"boolean"!==a?[new E(i,e,"boolean expected, "+a+" found")]:[]},number:Ua,color:function(t){var e=t.key,i=t.value,a=er(i);return"string"!==a?[new E(e,i,"color expected, "+a+" found")]:null===Cr(i)?[new E(e,i,'color expected, "'+i+'" found')]:[]},constants:D,enum:Na,filter:Q,function:vs,layer:Ae,object:eo,source:Rn,light:On,string:Di,formatted:function(t){return 0===Di(t).length?[]:Go(t)},resolvedImage:function(t){return 0===Di(t).length?[]:Go(t)}};function _n(t){var e=t.value,i=t.valueSpec,a=t.styleSpec;return i.expression&&Wo(K(e))?vs(t):i.expression&&to(ct(e))?Go(t):i.type&&$o[i.type]?$o[i.type](t):eo(j({},t,{valueSpec:i.type?a[i.type]:i}))}function Ko(t){var e=t.value,i=t.key,a=Di(t);return a.length||(-1===e.indexOf("{fontstack}")&&a.push(new E(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&a.push(new E(i,e,'"glyphs" url must include a "{range}" token'))),a}function or(t,e){void 0===e&&(e=x);var i=[];return i=i.concat(_n({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Ko,"*":function(){return[]}}})),t.constants&&(i=i.concat(D({key:"constants",value:t.constants,style:t,styleSpec:e}))),fa(i)}function fa(t){return[].concat(t).sort(function(e,i){return e.line-i.line})}function zo(t){return function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return fa(t.apply(this,e))}}or.source=zo(Rn),or.light=zo(On),or.layer=zo(Ae),or.filter=zo(Q),or.paintProperty=zo(ee),or.layoutProperty=zo(we);var la=or,ur=la.light,Ir=la.paintProperty,Ro=la.layoutProperty;function kt(t,e){var i=!1;if(e&&e.length)for(var a=0,u=e;a<u.length;a+=1)t.fire(new Zr(new Error(u[a].message))),i=!0;return i}var Qt=Te;function Te(t,e,i){var a=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var u=new Int32Array(this.arrayBuffer);t=u[0],this.d=(e=u[1])+2*(i=u[2]);for(var c=0;c<this.d*this.d;c++){var h=u[3+c],m=u[3+c+1];a.push(h===m?null:u.subarray(h,m))}var T=u[3+a.length+1];this.keys=u.subarray(u[3+a.length],T),this.bboxes=u.subarray(T),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var C=0;C<this.d*this.d;C++)a.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var M=i/e*t;this.min=-M,this.max=t+M}Te.prototype.insert=function(t,e,i,a,u){this._forEachCell(e,i,a,u,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(u)},Te.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Te.prototype._insertCell=function(t,e,i,a,u,c){this.cells[u].push(c)},Te.prototype.query=function(t,e,i,a,u){var c=this.min,h=this.max;if(t<=c&&e<=c&&h<=i&&h<=a&&!u)return Array.prototype.slice.call(this.keys);var m=[];return this._forEachCell(t,e,i,a,this._queryCell,m,{},u),m},Te.prototype._queryCell=function(t,e,i,a,u,c,h,m){var _=this.cells[u];if(null!==_)for(var T=this.keys,C=this.bboxes,M=0;M<_.length;M++){var R=_[M];if(void 0===h[R]){var O=4*R;(m?m(C[O+0],C[O+1],C[O+2],C[O+3]):t<=C[O+2]&&e<=C[O+3]&&i>=C[O+0]&&a>=C[O+1])?(h[R]=!0,c.push(T[R])):h[R]=!1}}},Te.prototype._forEachCell=function(t,e,i,a,u,c,h,m){for(var _=this._convertToCellCoord(t),T=this._convertToCellCoord(e),C=this._convertToCellCoord(i),M=this._convertToCellCoord(a),R=_;R<=C;R++)for(var O=T;O<=M;O++){var B=this.d*O+R;if((!m||m(this._convertFromCellCoord(R),this._convertFromCellCoord(O),this._convertFromCellCoord(R+1),this._convertFromCellCoord(O+1)))&&u.call(this,t,e,i,a,B,c,h,m))return}},Te.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Te.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Te.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,a=0;a<this.cells.length;a++)i+=this.cells[a].length;var u=new Int32Array(e+i+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var c=e,h=0;h<t.length;h++){var m=t[h];u[3+h]=c,u.set(m,c),c+=m.length}return u[3+t.length]=c,u.set(this.keys,c),u[3+t.length+1]=c+=this.keys.length,u.set(this.bboxes,c),c+=this.bboxes.length,u.buffer};var ve=self.ImageData,yi=self.ImageBitmap,Je={};function oe(t,e,i){void 0===i&&(i={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Je[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}for(var ci in oe("Object",Object),Qt.serialize=function(t,e){var i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},Qt.deserialize=function(t){return new Qt(t.buffer)},oe("Grid",Qt),oe("Color",Ue),oe("Error",Error),oe("ResolvedImage",Rr),oe("StylePropertyFunction",Qo),oe("StyleExpression",en,{omit:["_evaluator"]}),oe("ZoomDependentExpression",Xn),oe("ZoomConstantExpression",Hn),oe("CompoundExpression",pr,{omit:["_evaluate"]}),sn)sn[ci]._classRegistryKey||oe("Expression_"+ci,sn[ci]);function kr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Br(t){return yi&&t instanceof yi}function Vi(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(kr(t)||Br(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var i=t;return e&&e.push(i.buffer),i}if(t instanceof ve)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var a=[],u=0,c=t;u<c.length;u+=1)a.push(Vi(c[u],e));return a}if("object"==typeof t){var m=t.constructor,_=m._classRegistryKey;if(!_)throw new Error("can't serialize object of unregistered class");var T=m.serialize?m.serialize(t,e):{};if(!m.serialize){for(var C in t)if(t.hasOwnProperty(C)&&!(Je[_].omit.indexOf(C)>=0)){var M=t[C];T[C]=Je[_].shallow.indexOf(C)>=0?M:Vi(M,e)}t instanceof Error&&(T.message=t.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==_&&(T.$name=_),T}throw new Error("can't serialize object of type "+typeof t)}function Gr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||kr(t)||Br(t)||ArrayBuffer.isView(t)||t instanceof ve)return t;if(Array.isArray(t))return t.map(Gr);if("object"==typeof t){var e=t.$name||"Object",i=Je[e].klass;if(!i)throw new Error("can't deserialize unregistered class "+e);if(i.deserialize)return i.deserialize(t);for(var a=Object.create(i.prototype),u=0,c=Object.keys(t);u<c.length;u+=1){var h=c[u];if("$name"!==h){var m=t[h];a[h]=Je[e].shallow.indexOf(h)>=0?m:Gr(m)}}return a}throw new Error("can't deserialize object of type "+typeof t)}var Nr=function(){this.first=!0};Nr.prototype.update=function(t,e){var i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))};var ce={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function co(t){for(var e=0,i=t;e<i.length;e+=1)if(Bn(i[e].charCodeAt(0)))return!0;return!1}function Cn(t){return!(ce.Arabic(t)||ce["Arabic Supplement"](t)||ce["Arabic Extended-A"](t)||ce["Arabic Presentation Forms-A"](t)||ce["Arabic Presentation Forms-B"](t))}function Bn(t){return!(746!==t&&747!==t&&(t<4352||!(ce["Bopomofo Extended"](t)||ce.Bopomofo(t)||ce["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||ce["CJK Compatibility Ideographs"](t)||ce["CJK Compatibility"](t)||ce["CJK Radicals Supplement"](t)||ce["CJK Strokes"](t)||!(!ce["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||ce["CJK Unified Ideographs Extension A"](t)||ce["CJK Unified Ideographs"](t)||ce["Enclosed CJK Letters and Months"](t)||ce["Hangul Compatibility Jamo"](t)||ce["Hangul Jamo Extended-A"](t)||ce["Hangul Jamo Extended-B"](t)||ce["Hangul Jamo"](t)||ce["Hangul Syllables"](t)||ce.Hiragana(t)||ce["Ideographic Description Characters"](t)||ce.Kanbun(t)||ce["Kangxi Radicals"](t)||ce["Katakana Phonetic Extensions"](t)||ce.Katakana(t)&&12540!==t||!(!ce["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!ce["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||ce["Unified Canadian Aboriginal Syllabics"](t)||ce["Unified Canadian Aboriginal Syllabics Extended"](t)||ce["Vertical Forms"](t)||ce["Yijing Hexagram Symbols"](t)||ce["Yi Syllables"](t)||ce["Yi Radicals"](t))))}function fn(t){return!(Bn(t)||(e=t,ce["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||ce["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||ce["Letterlike Symbols"](e)||ce["Number Forms"](e)||ce["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||ce["Control Pictures"](e)&&9251!==e||ce["Optical Character Recognition"](e)||ce["Enclosed Alphanumerics"](e)||ce["Geometric Shapes"](e)||ce["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||ce["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||ce["CJK Symbols and Punctuation"](e)||ce.Katakana(e)||ce["Private Use Area"](e)||ce["CJK Compatibility Forms"](e)||ce["Small Form Variants"](e)||ce["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function Ra(t){return t>=1424&&t<=2303||ce["Arabic Presentation Forms-A"](t)||ce["Arabic Presentation Forms-B"](t)}function Po(t,e){return!(!e&&Ra(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||ce.Khmer(t))}function Mo(t){for(var e=0,i=t;e<i.length;e+=1)if(Ra(i[e].charCodeAt(0)))return!0;return!1}var no="deferred",_o="loading",ua="loaded",Ds=null,oo="unavailable",ea=null,Zl=function(t){Ds&&Ds(t)};function ma(){Fs.fire(new ji("pluginStateChange",{pluginStatus:oo,pluginURL:ea}))}var Fs=new ir,_s=function(){return oo},dl=function(){if(oo!==no||!ea)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");oo=_o,ma(),ea&&Ii({url:ea},function(t){t?Zl(t):(oo=ua,ma())})},kn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return oo===ua||null!=kn.applyArabicShaping},isLoading:function(){return oo===_o},setState:function(t){oo=t.pluginStatus,ea=t.pluginURL},isParsed:function(){return null!=kn.applyArabicShaping&&null!=kn.processBidirectionalText&&null!=kn.processStyledBidirectionalText},getPluginURL:function(){return ea}},Pr=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Nr,this.transition={})};Pr.prototype.isSupportedScript=function(t){return function(e,i){for(var a=0,u=e;a<u.length;a+=1)if(!Po(u[a].charCodeAt(0),i))return!1;return!0}(t,kn.isLoaded())},Pr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Pr.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}};var ls=function(t,e){this.property=t,this.value=e,this.expression=function(i,a){if(Wo(i))return new Qo(i,a);if(to(i)){var u=ts(i,a);if("error"===u.result)throw new Error(u.value.map(function(h){return h.key+": "+h.message}).join(", "));return u.value}var c=i;return"string"==typeof i&&"color"===a.type&&(c=Ue.parse(i)),{kind:"constant",evaluate:function(){return c}}}(void 0===e?t.specification.default:e,t.specification)};ls.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ls.prototype.possiblyEvaluate=function(t,e){return this.property.possiblyEvaluate(this,t,e)};var qa=function(t){this.property=t,this.value=new ls(t,void 0)};qa.prototype.transitioned=function(t,e){return new fl(this.property,this.value,e,vt({},t.transition,this.transition),t.now)},qa.prototype.untransitioned=function(){return new fl(this.property,this.value,null,{},0)};var po=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};po.prototype.getValue=function(t){return Ti(this._values[t].value.value)},po.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new qa(this._values[t].property)),this._values[t].value=new ls(this._values[t].property,null===e?void 0:Ti(e))},po.prototype.getTransition=function(t){return Ti(this._values[t].transition)},po.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new qa(this._values[t].property)),this._values[t].transition=Ti(e)||void 0},po.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var a=i[e],u=this.getValue(a);void 0!==u&&(t[a]=u);var c=this.getTransition(a);void 0!==c&&(t[a+"-transition"]=c)}return t},po.prototype.transitioned=function(t,e){for(var i=new Us(this._properties),a=0,u=Object.keys(this._values);a<u.length;a+=1){var c=u[a];i._values[c]=this._values[c].transitioned(t,e._values[c])}return i},po.prototype.untransitioned=function(){for(var t=new Us(this._properties),e=0,i=Object.keys(this._values);e<i.length;e+=1){var a=i[e];t._values[a]=this._values[a].untransitioned()}return t};var fl=function(t,e,i,a,u){this.property=t,this.value=e,this.begin=u+a.delay||0,this.end=this.begin+a.duration||0,t.specification.transition&&(a.delay||a.duration)&&(this.prior=i)};fl.prototype.possiblyEvaluate=function(t,e){var i=t.now||0,a=this.value.possiblyEvaluate(t,e),u=this.prior;if(u){if(i>this.end)return this.prior=null,a;if(this.value.isDataDriven())return this.prior=null,a;if(i<this.begin)return u.possiblyEvaluate(t,e);var c=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(u.possiblyEvaluate(t,e),a,function(h){if(h<=0)return 0;if(h>=1)return 1;var m=h*h,_=m*h;return 4*(h<.5?_:3*(h-m)+_-.75)}(c))}return a};var Us=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Us.prototype.possiblyEvaluate=function(t,e){for(var i=new Ha(this._properties),a=0,u=Object.keys(this._values);a<u.length;a+=1){var c=u[a];i._values[c]=this._values[c].possiblyEvaluate(t,e)}return i},Us.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var ia=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};ia.prototype.getValue=function(t){return Ti(this._values[t].value)},ia.prototype.setValue=function(t,e){this._values[t]=new ls(this._values[t].property,null===e?void 0:Ti(e))},ia.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var a=i[e],u=this.getValue(a);void 0!==u&&(t[a]=u)}return t},ia.prototype.possiblyEvaluate=function(t,e){for(var i=new Ha(this._properties),a=0,u=Object.keys(this._values);a<u.length;a+=1){var c=u[a];i._values[c]=this._values[c].possiblyEvaluate(t,e)}return i};var io=function(t,e,i){this.property=t,this.value=e,this.parameters=i};io.prototype.isConstant=function(){return"constant"===this.value.kind},io.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},io.prototype.evaluate=function(t,e,i){return this.property.evaluate(this.value,this.parameters,t,e,i)};var Ha=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Ha.prototype.get=function(t){return this._values[t]};var Ve=function(t){this.specification=t};Ve.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Ve.prototype.interpolate=function(t,e,i){var a=ca[this.specification.type];return a?a(t,e,i):t};var hi=function(t,e){this.specification=t,this.overrides=e};hi.prototype.possiblyEvaluate=function(t,e,i){return new io(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i)}:t.expression,e)},hi.prototype.interpolate=function(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new io(this,{kind:"constant",value:void 0},t.parameters);var a=ca[this.specification.type];return a?new io(this,{kind:"constant",value:a(t.value.value,e.value.value,i)},t.parameters):t},hi.prototype.evaluate=function(t,e,i,a,u){return"constant"===t.kind?t.value:t.evaluate(e,i,a,u)};var Ns=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(i,a,u){if(void 0===i.value)return new io(this,{kind:"constant",value:void 0},a);if("constant"===i.expression.kind){var c=i.expression.evaluate(a,null,{},u),h="resolvedImage"===i.property.specification.type&&"string"!=typeof c?c.name:c,m=this._calculate(h,h,h,a);return new io(this,{kind:"constant",value:m},a)}if("camera"===i.expression.kind){var _=this._calculate(i.expression.evaluate({zoom:a.zoom-1}),i.expression.evaluate({zoom:a.zoom}),i.expression.evaluate({zoom:a.zoom+1}),a);return new io(this,{kind:"constant",value:_},a)}return new io(this,i.expression,a)},e.prototype.evaluate=function(i,a,u,c,h){if("source"===i.kind){var m=i.evaluate(a,u,c,h);return this._calculate(m,m,m,a)}return"composite"===i.kind?this._calculate(i.evaluate({zoom:Math.floor(a.zoom)-1},u,c),i.evaluate({zoom:Math.floor(a.zoom)},u,c),i.evaluate({zoom:Math.floor(a.zoom)+1},u,c),a):i.value},e.prototype._calculate=function(i,a,u,c){return c.zoom>c.zoomHistory.lastIntegerZoom?{from:i,to:a}:{from:u,to:a}},e.prototype.interpolate=function(i){return i},e}(hi),Za=function(t){this.specification=t};Za.prototype.possiblyEvaluate=function(t,e,i){if(void 0!==t.value){if("constant"===t.expression.kind){var a=t.expression.evaluate(e,null,{},i);return this._calculate(a,a,a,e)}return this._calculate(t.expression.evaluate(new Pr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Pr(Math.floor(e.zoom),e)),t.expression.evaluate(new Pr(Math.floor(e.zoom+1),e)),e)}},Za.prototype._calculate=function(t,e,i,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},Za.prototype.interpolate=function(t){return t};var r=function(t){this.specification=t};r.prototype.possiblyEvaluate=function(t,e,i){return!!t.expression.evaluate(e,null,{},i)},r.prototype.interpolate=function(){return!1};var o=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[e];i.specification.overridable&&this.overridableProperties.push(e);var a=this.defaultPropertyValues[e]=new ls(i,void 0),u=this.defaultTransitionablePropertyValues[e]=new qa(i);this.defaultTransitioningPropertyValues[e]=u.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=a.possiblyEvaluate({})}};oe("DataDrivenProperty",hi),oe("DataConstantProperty",Ve),oe("CrossFadedDataDrivenProperty",Ns),oe("CrossFadedProperty",Za),oe("ColorRampProperty",r);var n=function(t){function e(i,a){if(t.call(this),this.id=i.id,this.type=i.type,this._featureFilter=function(){return!0},"custom"!==i.type&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,"background"!==i.type&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),a.layout&&(this._unevaluatedLayout=new ia(a.layout)),a.paint)){for(var u in this._transitionablePaint=new po(a.paint),i.paint)this.setPaintProperty(u,i.paint[u],{validate:!1});for(var c in i.layout)this.setLayoutProperty(c,i.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(i){return"visibility"===i?this.visibility:this._unevaluatedLayout.getValue(i)},e.prototype.setLayoutProperty=function(i,a,u){void 0===u&&(u={}),null!=a&&this._validate(Ro,"layers."+this.id+".layout."+i,i,a,u)||("visibility"!==i?this._unevaluatedLayout.setValue(i,a):this.visibility=a)},e.prototype.getPaintProperty=function(i){return Ui(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},e.prototype.setPaintProperty=function(i,a,u){if(void 0===u&&(u={}),null!=a&&this._validate(Ir,"layers."+this.id+".paint."+i,i,a,u))return!1;if(Ui(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),a||void 0),!1;var h=this._transitionablePaint._values[i],m="cross-faded-data-driven"===h.property.specification["property-type"],_=h.value.isDataDriven(),T=h.value;this._transitionablePaint.setValue(i,a),this._handleSpecialPaintPropertyUpdate(i);var C=this._transitionablePaint._values[i].value;return C.isDataDriven()||_||m||this._handleOverridablePaintPropertyUpdate(i,T,C)},e.prototype._handleSpecialPaintPropertyUpdate=function(i){},e.prototype._handleOverridablePaintPropertyUpdate=function(i,a,u){return!1},e.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(i,a){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,a)),this.paint=this._transitioningPaint.possiblyEvaluate(i,a)},e.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Wi(i,function(a,u){return!(void 0===a||"layout"===u&&!Object.keys(a).length||"paint"===u&&!Object.keys(a).length)})},e.prototype._validate=function(i,a,u,c,h){return void 0===h&&(h={}),(!h||!1!==h.validate)&&kt(this,i.call(la,{key:a,layerType:this.type,objectKey:u,value:c,styleSpec:x,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var i in this.paint._values){var a=this.paint.get(i);if(a instanceof io&&Qn(a.property.specification)&&("source"===a.value.kind||"composite"===a.value.kind)&&a.value.isStateDependent)return!0}return!1},e}(ir),s={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},p=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},f=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function y(t,e){void 0===e&&(e=1);var i=0,a=0;return{members:t.map(function(u){var h=s[u.type].BYTES_PER_ELEMENT,m=i=g(i,Math.max(e,h)),_=u.components||1;return a=Math.max(a,h),i+=h*_,{name:u.name,type:u.type,components:_,offset:m}}),size:g(i,Math.max(a,e)),alignment:e}}function g(t,e){return Math.ceil(t/e)*e}f.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},f.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},f.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},f.prototype.clear=function(){this.length=0},f.prototype.resize=function(t){this.reserve(t),this.length=t},f.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},f.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var S=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a){var u=this.length;return this.resize(u+1),this.emplace(u,i,a)},e.prototype.emplace=function(i,a,u){var c=2*i;return this.int16[c+0]=a,this.int16[c+1]=u,i},e}(f);S.prototype.bytesPerElement=4,oe("StructArrayLayout2i4",S);var k=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c){var h=this.length;return this.resize(h+1),this.emplace(h,i,a,u,c)},e.prototype.emplace=function(i,a,u,c,h){var m=4*i;return this.int16[m+0]=a,this.int16[m+1]=u,this.int16[m+2]=c,this.int16[m+3]=h,i},e}(f);k.prototype.bytesPerElement=8,oe("StructArrayLayout4i8",k);var L=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m){var _=this.length;return this.resize(_+1),this.emplace(_,i,a,u,c,h,m)},e.prototype.emplace=function(i,a,u,c,h,m,_){var T=6*i;return this.int16[T+0]=a,this.int16[T+1]=u,this.int16[T+2]=c,this.int16[T+3]=h,this.int16[T+4]=m,this.int16[T+5]=_,i},e}(f);L.prototype.bytesPerElement=12,oe("StructArrayLayout2i4i12",L);var U=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m){var _=this.length;return this.resize(_+1),this.emplace(_,i,a,u,c,h,m)},e.prototype.emplace=function(i,a,u,c,h,m,_){var T=4*i,C=8*i;return this.int16[T+0]=a,this.int16[T+1]=u,this.uint8[C+4]=c,this.uint8[C+5]=h,this.uint8[C+6]=m,this.uint8[C+7]=_,i},e}(f);U.prototype.bytesPerElement=8,oe("StructArrayLayout2i4ub8",U);var X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m,_,T){var C=this.length;return this.resize(C+1),this.emplace(C,i,a,u,c,h,m,_,T)},e.prototype.emplace=function(i,a,u,c,h,m,_,T,C){var M=8*i;return this.uint16[M+0]=a,this.uint16[M+1]=u,this.uint16[M+2]=c,this.uint16[M+3]=h,this.uint16[M+4]=m,this.uint16[M+5]=_,this.uint16[M+6]=T,this.uint16[M+7]=C,i},e}(f);X.prototype.bytesPerElement=16,oe("StructArrayLayout8ui16",X);var W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m,_,T,C,M,R,O){var B=this.length;return this.resize(B+1),this.emplace(B,i,a,u,c,h,m,_,T,C,M,R,O)},e.prototype.emplace=function(i,a,u,c,h,m,_,T,C,M,R,O,B){var Y=12*i;return this.int16[Y+0]=a,this.int16[Y+1]=u,this.int16[Y+2]=c,this.int16[Y+3]=h,this.uint16[Y+4]=m,this.uint16[Y+5]=_,this.uint16[Y+6]=T,this.uint16[Y+7]=C,this.int16[Y+8]=M,this.int16[Y+9]=R,this.int16[Y+10]=O,this.int16[Y+11]=B,i},e}(f);W.prototype.bytesPerElement=24,oe("StructArrayLayout4i4ui4i24",W);var G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u){var c=this.length;return this.resize(c+1),this.emplace(c,i,a,u)},e.prototype.emplace=function(i,a,u,c){var h=3*i;return this.float32[h+0]=a,this.float32[h+1]=u,this.float32[h+2]=c,i},e}(f);G.prototype.bytesPerElement=12,oe("StructArrayLayout3f12",G);var H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i){var a=this.length;return this.resize(a+1),this.emplace(a,i)},e.prototype.emplace=function(i,a){return this.uint32[1*i+0]=a,i},e}(f);H.prototype.bytesPerElement=4,oe("StructArrayLayout1ul4",H);var ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m,_,T,C,M,R){var O=this.length;return this.resize(O+1),this.emplace(O,i,a,u,c,h,m,_,T,C,M,R)},e.prototype.emplace=function(i,a,u,c,h,m,_,T,C,M,R,O){var B=12*i,Y=6*i;return this.int16[B+0]=a,this.int16[B+1]=u,this.int16[B+2]=c,this.int16[B+3]=h,this.int16[B+4]=m,this.int16[B+5]=_,this.uint32[Y+3]=T,this.uint16[B+8]=C,this.uint16[B+9]=M,this.int16[B+10]=R,this.int16[B+11]=O,i},e}(f);ft.prototype.bytesPerElement=24,oe("StructArrayLayout6i1ul2ui2i24",ft);var ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m){var _=this.length;return this.resize(_+1),this.emplace(_,i,a,u,c,h,m)},e.prototype.emplace=function(i,a,u,c,h,m,_){var T=6*i;return this.int16[T+0]=a,this.int16[T+1]=u,this.int16[T+2]=c,this.int16[T+3]=h,this.int16[T+4]=m,this.int16[T+5]=_,i},e}(f);ut.prototype.bytesPerElement=12,oe("StructArrayLayout2i2i2i12",ut);var _t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c){var h=this.length;return this.resize(h+1),this.emplace(h,i,a,u,c)},e.prototype.emplace=function(i,a,u,c,h){var m=12*i,_=3*i;return this.uint8[m+0]=a,this.uint8[m+1]=u,this.float32[_+1]=c,this.float32[_+2]=h,i},e}(f);_t.prototype.bytesPerElement=12,oe("StructArrayLayout2ub2f12",_t);var St=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m,_,T,C,M,R,O,B,Y,it,ot,Tt){var wt=this.length;return this.resize(wt+1),this.emplace(wt,i,a,u,c,h,m,_,T,C,M,R,O,B,Y,it,ot,Tt)},e.prototype.emplace=function(i,a,u,c,h,m,_,T,C,M,R,O,B,Y,it,ot,Tt,wt){var It=24*i,qt=12*i,Jt=48*i;return this.int16[It+0]=a,this.int16[It+1]=u,this.uint16[It+2]=c,this.uint16[It+3]=h,this.uint32[qt+2]=m,this.uint32[qt+3]=_,this.uint32[qt+4]=T,this.uint16[It+10]=C,this.uint16[It+11]=M,this.uint16[It+12]=R,this.float32[qt+7]=O,this.float32[qt+8]=B,this.uint8[Jt+36]=Y,this.uint8[Jt+37]=it,this.uint8[Jt+38]=ot,this.uint32[qt+10]=Tt,this.int16[It+22]=wt,i},e}(f);St.prototype.bytesPerElement=48,oe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",St);var Ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c,h,m,_,T,C,M,R,O,B,Y,it,ot,Tt,wt,It,qt,Jt,Gt,be,He,Oe,Ke){var Re=this.length;return this.resize(Re+1),this.emplace(Re,i,a,u,c,h,m,_,T,C,M,R,O,B,Y,it,ot,Tt,wt,It,qt,Jt,Gt,be,He,Oe,Ke)},e.prototype.emplace=function(i,a,u,c,h,m,_,T,C,M,R,O,B,Y,it,ot,Tt,wt,It,qt,Jt,Gt,be,He,Oe,Ke,Re){var Ee=30*i,pe=15*i;return this.int16[Ee+0]=a,this.int16[Ee+1]=u,this.int16[Ee+2]=c,this.int16[Ee+3]=h,this.int16[Ee+4]=m,this.int16[Ee+5]=_,this.int16[Ee+6]=T,this.int16[Ee+7]=C,this.uint16[Ee+8]=M,this.uint16[Ee+9]=R,this.uint16[Ee+10]=O,this.uint16[Ee+11]=B,this.uint16[Ee+12]=Y,this.uint16[Ee+13]=it,this.uint16[Ee+14]=ot,this.uint16[Ee+15]=Tt,this.uint16[Ee+16]=wt,this.uint16[Ee+17]=It,this.uint16[Ee+18]=qt,this.uint16[Ee+19]=Jt,this.uint16[Ee+20]=Gt,this.uint16[Ee+21]=be,this.uint32[pe+11]=He,this.float32[pe+12]=Oe,this.float32[pe+13]=Ke,this.float32[pe+14]=Re,i},e}(f);Ct.prototype.bytesPerElement=60,oe("StructArrayLayout8i14ui1ul3f60",Ct);var Ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i){var a=this.length;return this.resize(a+1),this.emplace(a,i)},e.prototype.emplace=function(i,a){return this.float32[1*i+0]=a,i},e}(f);Ut.prototype.bytesPerElement=4,oe("StructArrayLayout1f4",Ut);var te=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u){var c=this.length;return this.resize(c+1),this.emplace(c,i,a,u)},e.prototype.emplace=function(i,a,u,c){var h=3*i;return this.int16[h+0]=a,this.int16[h+1]=u,this.int16[h+2]=c,i},e}(f);te.prototype.bytesPerElement=6,oe("StructArrayLayout3i6",te);var le=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u){var c=this.length;return this.resize(c+1),this.emplace(c,i,a,u)},e.prototype.emplace=function(i,a,u,c){var m=4*i;return this.uint32[2*i+0]=a,this.uint16[m+2]=u,this.uint16[m+3]=c,i},e}(f);le.prototype.bytesPerElement=8,oe("StructArrayLayout1ul2ui8",le);var De=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u){var c=this.length;return this.resize(c+1),this.emplace(c,i,a,u)},e.prototype.emplace=function(i,a,u,c){var h=3*i;return this.uint16[h+0]=a,this.uint16[h+1]=u,this.uint16[h+2]=c,i},e}(f);De.prototype.bytesPerElement=6,oe("StructArrayLayout3ui6",De);var Ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a){var u=this.length;return this.resize(u+1),this.emplace(u,i,a)},e.prototype.emplace=function(i,a,u){var c=2*i;return this.uint16[c+0]=a,this.uint16[c+1]=u,i},e}(f);Ce.prototype.bytesPerElement=4,oe("StructArrayLayout2ui4",Ce);var $e=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i){var a=this.length;return this.resize(a+1),this.emplace(a,i)},e.prototype.emplace=function(i,a){return this.uint16[1*i+0]=a,i},e}(f);$e.prototype.bytesPerElement=2,oe("StructArrayLayout1ui2",$e);var Se=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a){var u=this.length;return this.resize(u+1),this.emplace(u,i,a)},e.prototype.emplace=function(i,a,u){var c=2*i;return this.float32[c+0]=a,this.float32[c+1]=u,i},e}(f);Se.prototype.bytesPerElement=8,oe("StructArrayLayout2f8",Se);var fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,a,u,c){var h=this.length;return this.resize(h+1),this.emplace(h,i,a,u,c)},e.prototype.emplace=function(i,a,u,c,h){var m=4*i;return this.float32[m+0]=a,this.float32[m+1]=u,this.float32[m+2]=c,this.float32[m+3]=h,i},e}(f);fi.prototype.bytesPerElement=16,oe("StructArrayLayout4f16",fi);var ni=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointX.set=function(a){this._structArray.int16[this._pos2+0]=a},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.anchorPointY.set=function(a){this._structArray.int16[this._pos2+1]=a},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.x1.set=function(a){this._structArray.int16[this._pos2+2]=a},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.y1.set=function(a){this._structArray.int16[this._pos2+3]=a},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.x2.set=function(a){this._structArray.int16[this._pos2+4]=a},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.y2.set=function(a){this._structArray.int16[this._pos2+5]=a},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.featureIndex.set=function(a){this._structArray.uint32[this._pos4+3]=a},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.sourceLayerIndex.set=function(a){this._structArray.uint16[this._pos2+8]=a},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.bucketIndex.set=function(a){this._structArray.uint16[this._pos2+9]=a},i.radius.get=function(){return this._structArray.int16[this._pos2+10]},i.radius.set=function(a){this._structArray.int16[this._pos2+10]=a},i.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},i.signedDistanceFromAnchor.set=function(a){this._structArray.int16[this._pos2+11]=a},i.anchorPoint.get=function(){return new et(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,i),e}(p);ni.prototype.size=24;var si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return new ni(this,i)},e}(ft);oe("CollisionBoxArray",si);var li=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorX.set=function(a){this._structArray.int16[this._pos2+0]=a},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.anchorY.set=function(a){this._structArray.int16[this._pos2+1]=a},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.glyphStartIndex.set=function(a){this._structArray.uint16[this._pos2+2]=a},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.numGlyphs.set=function(a){this._structArray.uint16[this._pos2+3]=a},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.vertexStartIndex.set=function(a){this._structArray.uint32[this._pos4+2]=a},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineStartIndex.set=function(a){this._structArray.uint32[this._pos4+3]=a},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.lineLength.set=function(a){this._structArray.uint32[this._pos4+4]=a},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.segment.set=function(a){this._structArray.uint16[this._pos2+10]=a},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.lowerSize.set=function(a){this._structArray.uint16[this._pos2+11]=a},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.upperSize.set=function(a){this._structArray.uint16[this._pos2+12]=a},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetX.set=function(a){this._structArray.float32[this._pos4+7]=a},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.lineOffsetY.set=function(a){this._structArray.float32[this._pos4+8]=a},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.writingMode.set=function(a){this._structArray.uint8[this._pos1+36]=a},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(a){this._structArray.uint8[this._pos1+37]=a},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(a){this._structArray.uint8[this._pos1+38]=a},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(a){this._structArray.uint32[this._pos4+10]=a},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},i.associatedIconIndex.set=function(a){this._structArray.int16[this._pos2+22]=a},Object.defineProperties(e.prototype,i),e}(p);li.prototype.size=48;var vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return new li(this,i)},e}(St);oe("PlacedSymbolArray",vi);var ui=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorX.set=function(a){this._structArray.int16[this._pos2+0]=a},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.anchorY.set=function(a){this._structArray.int16[this._pos2+1]=a},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.rightJustifiedTextSymbolIndex.set=function(a){this._structArray.int16[this._pos2+2]=a},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.centerJustifiedTextSymbolIndex.set=function(a){this._structArray.int16[this._pos2+3]=a},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.leftJustifiedTextSymbolIndex.set=function(a){this._structArray.int16[this._pos2+4]=a},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.verticalPlacedTextSymbolIndex.set=function(a){this._structArray.int16[this._pos2+5]=a},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.placedIconSymbolIndex.set=function(a){this._structArray.int16[this._pos2+6]=a},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.verticalPlacedIconSymbolIndex.set=function(a){this._structArray.int16[this._pos2+7]=a},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.key.set=function(a){this._structArray.uint16[this._pos2+8]=a},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxStartIndex.set=function(a){this._structArray.uint16[this._pos2+9]=a},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.textBoxEndIndex.set=function(a){this._structArray.uint16[this._pos2+10]=a},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxStartIndex.set=function(a){this._structArray.uint16[this._pos2+11]=a},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.verticalTextBoxEndIndex.set=function(a){this._structArray.uint16[this._pos2+12]=a},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxStartIndex.set=function(a){this._structArray.uint16[this._pos2+13]=a},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.iconBoxEndIndex.set=function(a){this._structArray.uint16[this._pos2+14]=a},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxStartIndex.set=function(a){this._structArray.uint16[this._pos2+15]=a},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.verticalIconBoxEndIndex.set=function(a){this._structArray.uint16[this._pos2+16]=a},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.featureIndex.set=function(a){this._structArray.uint16[this._pos2+17]=a},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numHorizontalGlyphVertices.set=function(a){this._structArray.uint16[this._pos2+18]=a},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numVerticalGlyphVertices.set=function(a){this._structArray.uint16[this._pos2+19]=a},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numIconVertices.set=function(a){this._structArray.uint16[this._pos2+20]=a},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.numVerticalIconVertices.set=function(a){this._structArray.uint16[this._pos2+21]=a},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+11]},i.crossTileID.set=function(a){this._structArray.uint32[this._pos4+11]=a},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+12]},i.textBoxScale.set=function(a){this._structArray.float32[this._pos4+12]=a},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.set=function(a){this._structArray.float32[this._pos4+13]=a},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.set=function(a){this._structArray.float32[this._pos4+14]=a},Object.defineProperties(e.prototype,i),e}(p);ui.prototype.size=60;var lr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return new ui(this,i)},e}(Ct);oe("SymbolInstanceArray",lr);var xi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={offsetX:{configurable:!0}};return i.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},i.offsetX.set=function(a){this._structArray.float32[this._pos4+0]=a},Object.defineProperties(e.prototype,i),e}(p);xi.prototype.size=4;var hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(i){return this.float32[1*i+0]},e.prototype.get=function(i){return new xi(this,i)},e}(Ut);oe("GlyphOffsetArray",hr);var Ji=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return i.x.get=function(){return this._structArray.int16[this._pos2+0]},i.x.set=function(a){this._structArray.int16[this._pos2+0]=a},i.y.get=function(){return this._structArray.int16[this._pos2+1]},i.y.set=function(a){this._structArray.int16[this._pos2+1]=a},i.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},i.tileUnitDistanceFromAnchor.set=function(a){this._structArray.int16[this._pos2+2]=a},Object.defineProperties(e.prototype,i),e}(p);Ji.prototype.size=6;var $i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(i){return this.int16[3*i+0]},e.prototype.gety=function(i){return this.int16[3*i+1]},e.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},e.prototype.get=function(i){return new Ji(this,i)},e}(te);oe("SymbolLineVertexArray",$i);var br=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.featureIndex.set=function(a){this._structArray.uint32[this._pos4+0]=a},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.sourceLayerIndex.set=function(a){this._structArray.uint16[this._pos2+2]=a},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},i.bucketIndex.set=function(a){this._structArray.uint16[this._pos2+3]=a},Object.defineProperties(e.prototype,i),e}(p);br.prototype.size=8;var rn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return new br(this,i)},e}(le);oe("FeatureIndexArray",rn);var Yr=y([{name:"a_pos",components:2,type:"Int16"}],4).members,Er=function(t){void 0===t&&(t=[]),this.segments=t};function ra(t,e){return 256*(t=Yt(Math.floor(t),0,255))+Yt(Math.floor(e),0,255)}Er.prototype.prepareSegment=function(t,e,i,a){var u=this.segments[this.segments.length-1];return t>Er.MAX_VERTEX_ARRAY_LENGTH&&ae("Max vertices per segment is "+Er.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!u||u.vertexLength+t>Er.MAX_VERTEX_ARRAY_LENGTH||u.sortKey!==a)&&(u={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==a&&(u.sortKey=a),this.segments.push(u)),u},Er.prototype.get=function(){return this.segments},Er.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var i=e[t];for(var a in i.vaos)i.vaos[a].destroy()}},Er.simpleSegment=function(t,e,i,a){return new Er([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:a,vaos:{},sortKey:0}])},Er.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,oe("SegmentVector",Er);var Bo=P(function(t){t.exports=function(e,i){var a,u,c,h,m,_,T,C;for(u=e.length-(a=3&e.length),c=i,m=3432918353,_=461845907,C=0;C<u;)T=255&e.charCodeAt(C)|(255&e.charCodeAt(++C))<<8|(255&e.charCodeAt(++C))<<16|(255&e.charCodeAt(++C))<<24,++C,c=27492+(65535&(h=5*(65535&(c=(c^=T=(65535&(T=(T=(65535&T)*m+(((T>>>16)*m&65535)<<16)&4294967295)<<15|T>>>17))*_+(((T>>>16)*_&65535)<<16)&4294967295)<<13|c>>>19))+((5*(c>>>16)&65535)<<16)&4294967295))+((58964+(h>>>16)&65535)<<16);switch(T=0,a){case 3:T^=(255&e.charCodeAt(C+2))<<16;case 2:T^=(255&e.charCodeAt(C+1))<<8;case 1:c^=T=(65535&(T=(T=(65535&(T^=255&e.charCodeAt(C)))*m+(((T>>>16)*m&65535)<<16)&4294967295)<<15|T>>>17))*_+(((T>>>16)*_&65535)<<16)&4294967295}return c^=e.length,c=2246822507*(65535&(c^=c>>>16))+((2246822507*(c>>>16)&65535)<<16)&4294967295,c=3266489909*(65535&(c^=c>>>13))+((3266489909*(c>>>16)&65535)<<16)&4294967295,(c^=c>>>16)>>>0}}),Wa=P(function(t){t.exports=function(e,i){for(var a,u=e.length,c=i^u,h=0;u>=4;)a=1540483477*(65535&(a=255&e.charCodeAt(h)|(255&e.charCodeAt(++h))<<8|(255&e.charCodeAt(++h))<<16|(255&e.charCodeAt(++h))<<24))+((1540483477*(a>>>16)&65535)<<16),c=1540483477*(65535&c)+((1540483477*(c>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),u-=4,++h;switch(u){case 3:c^=(255&e.charCodeAt(h+2))<<16;case 2:c^=(255&e.charCodeAt(h+1))<<8;case 1:c=1540483477*(65535&(c^=255&e.charCodeAt(h)))+((1540483477*(c>>>16)&65535)<<16)}return c=1540483477*(65535&(c^=c>>>13))+((1540483477*(c>>>16)&65535)<<16),(c^=c>>>15)>>>0}}),Fo=Bo,Ga=Wa;Fo.murmur3=Bo,Fo.murmur2=Ga;var xo=function(){this.ids=[],this.positions=[],this.indexed=!1};xo.prototype.add=function(t,e,i,a){this.ids.push(us(t)),this.positions.push(e,i,a)},xo.prototype.getPositions=function(t){for(var e=us(t),i=0,a=this.ids.length-1;i<a;){var u=i+a>>1;this.ids[u]>=e?a=u:i=u+1}for(var c=[];this.ids[i]===e;)c.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return c},xo.serialize=function(t,e){var i=new Float64Array(t.ids),a=new Uint32Array(t.positions);return function u(c,h,m,_){if(!(m>=_)){for(var T=c[m+_>>1],C=m-1,M=_+1;;){do{C++}while(c[C]<T);do{M--}while(c[M]>T);if(C>=M)break;za(c,C,M),za(h,3*C,3*M),za(h,3*C+1,3*M+1),za(h,3*C+2,3*M+2)}u(c,h,m,M),u(c,h,M+1,_)}}(i,a,0,i.length-1),e&&e.push(i.buffer,a.buffer),{ids:i,positions:a}},xo.deserialize=function(t){var e=new xo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var xs=Math.pow(2,53)-1;function us(t){var e=+t;return!isNaN(e)&&e<=xs?e:Fo(String(t))}function za(t,e,i){var a=t[e];t[e]=t[i],t[i]=a}oe("FeaturePositionMap",xo);var bo=function(t,e){this.gl=t.gl,this.location=e},bs=function(t){function e(i,a){t.call(this,i,a),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},e}(bo),Pa=function(t){function e(i,a){t.call(this,i,a),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},e}(bo),cs=function(t){function e(i,a){t.call(this,i,a),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},e}(bo),ws=function(t){function e(i,a){t.call(this,i,a),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},e}(bo),Xa=function(t){function e(i,a){t.call(this,i,a),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},e}(bo),Zi=function(t){function e(i,a){t.call(this,i,a),this.current=Ue.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},e}(bo),An=new Float32Array(16),$n=function(t){function e(i,a){t.call(this,i,a),this.current=An}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var a=1;a<16;a++)if(i[a]!==this.current[a]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},e}(bo);function Uo(t){return[ra(255*t.r,255*t.g),ra(255*t.b,255*t.a)]}var ao=function(t,e,i){this.value=t,this.names=e,this.uniformNames=this.names.map(function(a){return"u_"+a}),this.type=i,this.maxValue=-1/0};ao.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},ao.prototype.setConstantPatternPositions=function(){},ao.prototype.populatePaintArray=function(){},ao.prototype.updatePaintArray=function(){},ao.prototype.upload=function(){},ao.prototype.destroy=function(){},ao.prototype.setUniforms=function(t,e,i,a){e.set(a.constantOr(this.value))},ao.prototype.getBinding=function(t,e){return"color"===this.type?new Zi(t,e):new Pa(t,e)},ao.serialize=function(t){var i=t.names,a=t.type;return{value:Vi(t.value),names:i,type:a}},ao.deserialize=function(t){var i=t.names,a=t.type;return new ao(Gr(t.value),i,a)};var No=function(t,e,i){this.value=t,this.names=e,this.uniformNames=this.names.map(function(a){return"u_"+a}),this.type=i,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};No.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},No.prototype.populatePaintArray=function(){},No.prototype.updatePaintArray=function(){},No.prototype.upload=function(){},No.prototype.destroy=function(){},No.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},No.prototype.setUniforms=function(t,e,i,a,u){var c=this.patternPositions;"u_pattern_to"===u&&c.patternTo&&e.set(c.patternTo),"u_pattern_from"===u&&c.patternFrom&&e.set(c.patternFrom)},No.prototype.getBinding=function(t,e){return new Xa(t,e)};var wo=function(t,e,i,a){this.expression=t,this.names=e,this.type=i,this.uniformNames=this.names.map(function(u){return"a_"+u}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(u){return{name:"a_"+u,type:"Float32",components:"color"===i?2:1,offset:0}}),this.paintVertexArray=new a};wo.prototype.defines=function(){return[]},wo.prototype.setConstantPatternPositions=function(){},wo.prototype.populatePaintArray=function(t,e,i,a){var u=this.paintVertexArray,c=u.length;u.reserve(t);var h=this.expression.evaluate(new Pr(0),e,{},[],a);if("color"===this.type)for(var m=Uo(h),_=c;_<t;_++)u.emplaceBack(m[0],m[1]);else{for(var T=c;T<t;T++)u.emplaceBack(h);this.maxValue=Math.max(this.maxValue,h)}},wo.prototype.updatePaintArray=function(t,e,i,a){var u=this.paintVertexArray,c=this.expression.evaluate({zoom:0},i,a);if("color"===this.type)for(var h=Uo(c),m=t;m<e;m++)u.emplace(m,h[0],h[1]);else{for(var _=t;_<e;_++)u.emplace(_,c);this.maxValue=Math.max(this.maxValue,c)}},wo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},wo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},wo.prototype.setUniforms=function(t,e){e.set(0)},wo.prototype.getBinding=function(t,e){return new Pa(t,e)};var Kn=function(t,e,i,a,u,c){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(m){return"u_"+m+"_t"}),this.type=i,this.useIntegerZoom=a,this.zoom=u,this.maxValue=-1/0;var h=c;this.paintVertexAttributes=e.map(function(m){return{name:"a_"+m,type:"Float32",components:"color"===i?4:2,offset:0}}),this.paintVertexArray=new h};Kn.prototype.defines=function(){return[]},Kn.prototype.setConstantPatternPositions=function(){},Kn.prototype.populatePaintArray=function(t,e,i,a){var u=this.paintVertexArray,c=u.length;u.reserve(t);var h=this.expression.evaluate(new Pr(this.zoom),e,{},[],a),m=this.expression.evaluate(new Pr(this.zoom+1),e,{},[],a);if("color"===this.type)for(var _=Uo(h),T=Uo(m),C=c;C<t;C++)u.emplaceBack(_[0],_[1],T[0],T[1]);else{for(var M=c;M<t;M++)u.emplaceBack(h,m);this.maxValue=Math.max(this.maxValue,h,m)}},Kn.prototype.updatePaintArray=function(t,e,i,a){var u=this.paintVertexArray,c=this.expression.evaluate({zoom:this.zoom},i,a),h=this.expression.evaluate({zoom:this.zoom+1},i,a);if("color"===this.type)for(var m=Uo(c),_=Uo(h),T=t;T<e;T++)u.emplace(T,m[0],m[1],_[0],_[1]);else{for(var C=t;C<e;C++)u.emplace(C,c,h);this.maxValue=Math.max(this.maxValue,c,h)}},Kn.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Kn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Kn.prototype.interpolationFactor=function(t){return this.useIntegerZoom&&(t=Math.floor(t)),Yt(this.expression.interpolationFactor(t,this.zoom,this.zoom+1),0,1)},Kn.prototype.setUniforms=function(t,e,i){e.set(this.interpolationFactor(i.zoom))},Kn.prototype.getBinding=function(t,e){return new Pa(t,e)};var jo=function(t,e,i,a,u,c,h){this.expression=t,this.names=e,this.type=i,this.uniformNames=this.names.map(function(m){return"u_"+m+"_t"}),this.useIntegerZoom=a,this.zoom=u,this.maxValue=-1/0,this.layerId=h,this.paintVertexAttributes=e.map(function(m){return{name:"a_"+m,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new c,this.zoomOutPaintVertexArray=new c};jo.prototype.defines=function(){return[]},jo.prototype.setConstantPatternPositions=function(){},jo.prototype.populatePaintArray=function(t,e,i){var a=this.zoomInPaintVertexArray,u=this.zoomOutPaintVertexArray,c=this.layerId,h=a.length;if(a.reserve(t),u.reserve(t),i&&e.patterns&&e.patterns[c]){var m=e.patterns[c],M=i[m.min],R=i[m.mid],O=i[m.max];if(!M||!R||!O)return;for(var B=h;B<t;B++)a.emplaceBack(R.tl[0],R.tl[1],R.br[0],R.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1]),u.emplaceBack(R.tl[0],R.tl[1],R.br[0],R.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1])}},jo.prototype.updatePaintArray=function(t,e,i,a,u){var c=this.zoomInPaintVertexArray,h=this.zoomOutPaintVertexArray,m=this.layerId;if(u&&i.patterns&&i.patterns[m]){var _=i.patterns[m],R=u[_.min],O=u[_.mid],B=u[_.max];if(!R||!O||!B)return;for(var Y=t;Y<e;Y++)c.emplace(Y,O.tl[0],O.tl[1],O.br[0],O.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1]),h.emplace(Y,O.tl[0],O.tl[1],O.br[0],O.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1])}},jo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},jo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},jo.prototype.setUniforms=function(t,e){e.set(0)},jo.prototype.getBinding=function(t,e){return new Pa(t,e)};var zn=function(){this.binders={},this.cacheKey="",this._buffers=[]};zn.createDynamic=function(t,e,i){var a=new zn,u=[];for(var c in t.paint._values)if(i(c)){var h=t.paint.get(c);if(h instanceof io&&Qn(h.property.specification)){var m=Cu(c,t.type),_=h.property.specification.type,T=h.property.useIntegerZoom;if("cross-faded"===h.property.specification["property-type"]||"cross-faded-data-driven"===h.property.specification["property-type"])if("constant"===h.value.kind)a.binders[c]=new No(h.value.value,m,_),u.push("/u_"+c);else{var C=Ss(c,_,"source");a.binders[c]=new jo(h.value,m,_,T,e,C,t.id),u.push("/a_"+c)}else if("constant"===h.value.kind)a.binders[c]=new ao(h.value.value,m,_),u.push("/u_"+c);else if("source"===h.value.kind){var M=Ss(c,_,"source");a.binders[c]=new wo(h.value,m,_,M),u.push("/a_"+c)}else{var R=Ss(c,_,"composite");a.binders[c]=new Kn(h.value,m,_,T,e,R),u.push("/z_"+c)}}}return a.cacheKey=u.sort().join(""),a},zn.prototype.populatePaintArrays=function(t,e,i,a,u){for(var c in this.binders)this.binders[c].populatePaintArray(t,e,a,u)},zn.prototype.setConstantPatternPositions=function(t,e){for(var i in this.binders)this.binders[i].setConstantPatternPositions(t,e)},zn.prototype.updatePaintArrays=function(t,e,i,a,u){var c=!1;for(var h in t)for(var m=0,_=e.getPositions(h);m<_.length;m+=1){var T=_[m],C=i.feature(T.index);for(var M in this.binders){var R=this.binders[M];if(!(R instanceof ao||R instanceof No)&&!0===R.expression.isStateDependent){var O=a.paint.get(M);R.expression=O.value,R.updatePaintArray(T.start,T.end,C,t[h],u),c=!0}}}return c},zn.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},zn.prototype.getPaintVertexBuffers=function(){return this._buffers},zn.prototype.getUniforms=function(t,e){var i=[];for(var a in this.binders)for(var u=this.binders[a],c=0,h=u.uniformNames;c<h.length;c+=1){var m=h[c];if(e[m]){var _=u.getBinding(t,e[m]);i.push({name:m,property:a,binding:_})}}return i},zn.prototype.setUniforms=function(t,e,i,a){for(var u=0,c=e;u<c.length;u+=1){var h=c[u],m=h.name,_=h.property;this.binders[_].setUniforms(t,h.binding,a,i.get(_),m)}},zn.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var i in this.binders){var a=this.binders[i];if(a instanceof jo){var u=2===t.fromScale?a.zoomInPaintVertexBuffer:a.zoomOutPaintVertexBuffer;u&&e.push(u)}else(a instanceof wo||a instanceof Kn)&&a.paintVertexBuffer&&e.push(a.paintVertexBuffer)}this._buffers=e},zn.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var i=[];for(var a in this.binders){var u=this.binders[a];(u instanceof wo||u instanceof Kn)&&u.paintVertexBuffer&&i.push(u.paintVertexBuffer)}this._buffers=i},zn.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var So=function(t,e,i,a){void 0===a&&(a=function(){return!0}),this.programConfigurations={};for(var u=0,c=e;u<c.length;u+=1){var h=c[u];this.programConfigurations[h.id]=zn.createDynamic(h,i,a),this.programConfigurations[h.id].layoutAttributes=t}this.needsUpload=!1,this._featureMap=new xo,this._bufferOffset=0};function Cu(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Ss(t,e,i){var u={"line-pattern":{source:X,composite:X},"fill-pattern":{source:X,composite:X},"fill-extrusion-pattern":{source:X,composite:X}}[t];return u&&u[i]||{color:{source:Se,composite:fi},number:{source:Ut,composite:Se}}[e][i]}So.prototype.populatePaintArrays=function(t,e,i,a,u){for(var c in this.programConfigurations)this.programConfigurations[c].populatePaintArrays(t,e,i,a,u);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},So.prototype.updatePaintArrays=function(t,e,i,a){for(var u=0,c=i;u<c.length;u+=1){var h=c[u];this.needsUpload=this.programConfigurations[h.id].updatePaintArrays(t,this._featureMap,e,h,a)||this.needsUpload}},So.prototype.get=function(t){return this.programConfigurations[t]},So.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},So.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},oe("ConstantBinder",ao),oe("CrossFadedConstantBinder",No),oe("SourceExpressionBinder",wo),oe("CrossFadedCompositeBinder",jo),oe("CompositeExpressionBinder",Kn),oe("ProgramConfiguration",zn,{omit:["_buffers"]}),oe("ProgramConfigurationSet",So);var mn=8192,ps={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function js(t){for(var e=mn/t.extent,i=t.loadGeometry(),a=0;a<i.length;a++)for(var u=i[a],c=0;c<u.length;c++){var h=u[c];h.x=Math.round(h.x*e),h.y=Math.round(h.y*e),(h.x<ps.min||h.x>ps.max||h.y<ps.min||h.y>ps.max)&&(ae("Geometry exceeds allowed extent, reduce your vector tile buffer size"),h.x=Yt(h.x,ps.min,ps.max),h.y=Yt(h.y,ps.min,ps.max))}return i}function Wl(t,e,i,a,u){t.emplaceBack(2*e+(a+1)/2,2*i+(u+1)/2)}var Ma=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new S,this.indexArray=new De,this.segments=new Er,this.programConfigurations=new So(Yr,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function pc(t,e){for(var i=0;i<t.length;i++)if(Vs(e,t[i]))return!0;for(var a=0;a<e.length;a++)if(Vs(t,e[a]))return!0;return!!ku(t,e)}function Fp(t,e,i){return!!Vs(t,e)||!!Au(e,t,i)}function hc(t,e){if(1===t.length)return fc(e,t[0]);for(var i=0;i<e.length;i++)for(var a=e[i],u=0;u<a.length;u++)if(Vs(t,a[u]))return!0;for(var c=0;c<t.length;c++)if(fc(e,t[c]))return!0;for(var h=0;h<e.length;h++)if(ku(t,e[h]))return!0;return!1}function Up(t,e,i){if(t.length>1){if(ku(t,e))return!0;for(var a=0;a<e.length;a++)if(Au(e[a],t,i))return!0}for(var u=0;u<t.length;u++)if(Au(t[u],e,i))return!0;return!1}function ku(t,e){if(0===t.length||0===e.length)return!1;for(var i=0;i<t.length-1;i++)for(var a=t[i],u=t[i+1],c=0;c<e.length-1;c++)if(Np(a,u,e[c],e[c+1]))return!0;return!1}function Np(t,e,i,a){return zt(t,i,a)!==zt(e,i,a)&&zt(t,e,i)!==zt(t,e,a)}function Au(t,e,i){var a=i*i;if(1===e.length)return t.distSqr(e[0])<a;for(var u=1;u<e.length;u++)if(dc(t,e[u-1],e[u])<a)return!0;return!1}function dc(t,e,i){var a=e.distSqr(i);if(0===a)return t.distSqr(e);var u=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/a;return t.distSqr(u<0?e:u>1?i:i.sub(e)._mult(u)._add(e))}function fc(t,e){for(var i,a,u,c=!1,h=0;h<t.length;h++)for(var m=0,_=(i=t[h]).length-1;m<i.length;_=m++)(a=i[m]).y>e.y!=(u=i[_]).y>e.y&&e.x<(u.x-a.x)*(e.y-a.y)/(u.y-a.y)+a.x&&(c=!c);return c}function Vs(t,e){for(var i=!1,a=0,u=t.length-1;a<t.length;u=a++){var c=t[a],h=t[u];c.y>e.y!=h.y>e.y&&e.x<(h.x-c.x)*(e.y-c.y)/(h.y-c.y)+c.x&&(i=!i)}return i}function jp(t,e,i){var a=i[0],u=i[2];if(t.x<a.x&&e.x<a.x||t.x>u.x&&e.x>u.x||t.y<a.y&&e.y<a.y||t.y>u.y&&e.y>u.y)return!1;var c=zt(t,e,i[0]);return c!==zt(t,e,i[1])||c!==zt(t,e,i[2])||c!==zt(t,e,i[3])}function ml(t,e,i){var a=e.paint.get(t).value;return"constant"===a.kind?a.value:i.programConfigurations.get(e.id).binders[t].maxValue}function Gl(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Xl(t,e,i,a,u){if(!e[0]&&!e[1])return t;var c=et.convert(e)._mult(u);"viewport"===i&&c._rotate(-a);for(var h=[],m=0;m<t.length;m++)h.push(t[m].sub(c));return h}Ma.prototype.populate=function(t,e){var i=this.layers[0],a=[],u=null;"circle"===i.type&&(u=i.layout.get("circle-sort-key"));for(var c=0,h=t;c<h.length;c+=1){var m=h[c],_=m.feature,T=m.id,C=m.index,M=m.sourceLayerIndex;if(this.layers[0]._featureFilter(new Pr(this.zoom),_)){var R=js(_),O=u?u.evaluate(_,{}):void 0;a.push({id:T,properties:_.properties,type:_.type,sourceLayerIndex:M,index:C,geometry:R,patterns:{},sortKey:O})}}u&&a.sort(function(Gt,be){return Gt.sortKey-be.sortKey});for(var Y=0,it=a;Y<it.length;Y+=1){var ot=it[Y],wt=ot.geometry,It=ot.index,qt=ot.sourceLayerIndex,Jt=t[It].feature;this.addFeature(ot,wt,It),e.featureIndex.insert(Jt,wt,It,qt,this.index)}},Ma.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Ma.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ma.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ma.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Yr),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ma.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ma.prototype.addFeature=function(t,e,i){for(var a=0,u=e;a<u.length;a+=1)for(var c=0,h=u[a];c<h.length;c+=1){var m=h[c],_=m.x,T=m.y;if(!(_<0||_>=mn||T<0||T>=mn)){var C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),M=C.vertexLength;Wl(this.layoutVertexArray,_,T,-1,-1),Wl(this.layoutVertexArray,_,T,1,-1),Wl(this.layoutVertexArray,_,T,1,1),Wl(this.layoutVertexArray,_,T,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),C.vertexLength+=4,C.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{})},oe("CircleBucket",Ma,{omit:["layers"]});var yl,e,Vp=new o({"circle-sort-key":new hi(x.layout_circle["circle-sort-key"])}),qp={paint:new o({"circle-radius":new hi(x.paint_circle["circle-radius"]),"circle-color":new hi(x.paint_circle["circle-color"]),"circle-blur":new hi(x.paint_circle["circle-blur"]),"circle-opacity":new hi(x.paint_circle["circle-opacity"]),"circle-translate":new Ve(x.paint_circle["circle-translate"]),"circle-translate-anchor":new Ve(x.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ve(x.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ve(x.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new hi(x.paint_circle["circle-stroke-width"]),"circle-stroke-color":new hi(x.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new hi(x.paint_circle["circle-stroke-opacity"])}),layout:Vp},ya="undefined"!=typeof Float32Array?Float32Array:Array;function $l(t,e,i){var a=e[0],u=e[1],c=e[2],h=e[3];return t[0]=i[0]*a+i[4]*u+i[8]*c+i[12]*h,t[1]=i[1]*a+i[5]*u+i[9]*c+i[13]*h,t[2]=i[2]*a+i[6]*u+i[10]*c+i[14]*h,t[3]=i[3]*a+i[7]*u+i[11]*c+i[15]*h,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,i=arguments.length;i--;)e+=t[i]*t[i];return Math.sqrt(e)}),yl=new ya(3),ya!=Float32Array&&(yl[0]=0,yl[1]=0,yl[2]=0),e=new ya(4),ya!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0);var Zp=function(t){function e(i){t.call(this,i,qp)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(i){return new Ma(i)},e.prototype.queryRadius=function(i){var a=i;return ml("circle-radius",this,a)+ml("circle-stroke-width",this,a)+Gl(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(i,a,u,c,h,m,_,T){for(var C=Xl(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,_),M=this.paint.get("circle-radius").evaluate(a,u)+this.paint.get("circle-stroke-width").evaluate(a,u),R="map"===this.paint.get("circle-pitch-alignment"),O=R?C:function(Gt,be){return Gt.map(function(He){return mc(He,be)})}(C,T),B=R?M*_:M,Y=0,it=c;Y<it.length;Y+=1)for(var ot=0,Tt=it[Y];ot<Tt.length;ot+=1){var wt=Tt[ot],It=R?wt:mc(wt,T),qt=B,Jt=$l([],[wt.x,wt.y,0,1],T);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?qt*=Jt[3]/m.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(qt*=m.cameraToCenterDistance/Jt[3]),Fp(O,It,qt))return!0}return!1},e}(n);function mc(t,e){var i=$l([],[t.x,t.y,0,1],e);return new et(i[0]/i[3],i[1]/i[3])}var yc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ma);function zu(t,e,i,a){var u=e.width,c=e.height;if(a){if(a instanceof Uint8ClampedArray)a=new Uint8Array(a.buffer);else if(a.length!==u*c*i)throw new RangeError("mismatched image size")}else a=new Uint8Array(u*c*i);return t.width=u,t.height=c,t.data=a,t}function gc(t,e,i){var a=e.width,u=e.height;if(a!==t.width||u!==t.height){var c=zu({},{width:a,height:u},i);Pu(t,c,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,a),height:Math.min(t.height,u)},i),t.width=a,t.height=u,t.data=c.data}}function Pu(t,e,i,a,u,c){if(0===u.width||0===u.height)return e;if(u.width>t.width||u.height>t.height||i.x>t.width-u.width||i.y>t.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>e.width||u.height>e.height||a.x>e.width-u.width||a.y>e.height-u.height)throw new RangeError("out of range destination coordinates for image copy");for(var h=t.data,m=e.data,_=0;_<u.height;_++)for(var T=((i.y+_)*t.width+i.x)*c,C=((a.y+_)*e.width+a.x)*c,M=0;M<u.width*c;M++)m[C+M]=h[T+M];return e}oe("HeatmapBucket",yc,{omit:["layers"]});var Ts=function(t,e){zu(this,t,1,e)};Ts.prototype.resize=function(t){gc(this,t,1)},Ts.prototype.clone=function(){return new Ts({width:this.width,height:this.height},new Uint8Array(this.data))},Ts.copy=function(t,e,i,a,u){Pu(t,e,i,a,u,1)};var so=function(t,e){zu(this,t,4,e)};so.prototype.resize=function(t){gc(this,t,4)},so.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},so.prototype.clone=function(){return new so({width:this.width,height:this.height},new Uint8Array(this.data))},so.copy=function(t,e,i,a,u){Pu(t,e,i,a,u,4)},oe("AlphaImage",Ts),oe("RGBAImage",so);var Wp={paint:new o({"heatmap-radius":new hi(x.paint_heatmap["heatmap-radius"]),"heatmap-weight":new hi(x.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ve(x.paint_heatmap["heatmap-intensity"]),"heatmap-color":new r(x.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ve(x.paint_heatmap["heatmap-opacity"])})};function vc(t,e){for(var i=new Uint8Array(1024),a={},u=0,c=0;u<256;u++,c+=4){a[e]=u/255;var h=t.evaluate(a);i[c+0]=Math.floor(255*h.r/h.a),i[c+1]=Math.floor(255*h.g/h.a),i[c+2]=Math.floor(255*h.b/h.a),i[c+3]=Math.floor(255*h.a)}return new so({width:256,height:1},i)}var Gp=function(t){function e(i){t.call(this,i,Wp),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(i){return new yc(i)},e.prototype._handleSpecialPaintPropertyUpdate=function(i){"heatmap-color"===i&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=vc(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(n),Xp={paint:new o({"hillshade-illumination-direction":new Ve(x.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ve(x.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ve(x.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ve(x.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ve(x.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ve(x.paint_hillshade["hillshade-accent-color"])})},$p=function(t){function e(i){t.call(this,i,Xp)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(n),_c=y([{name:"a_pos",components:2,type:"Int16"}],4).members,Mu=Kl,Kp=Kl;function Kl(t,e,i){i=i||2;var a,u,c,h,m,_,T,C=e&&e.length,M=C?e[0]*i:t.length,R=xc(t,0,M,i,!0),O=[];if(!R||R.next===R.prev)return O;if(C&&(R=function(Y,it,ot,Tt){var wt,It,Gt,be=[];for(wt=0,It=it.length;wt<It;wt++)(Gt=xc(Y,it[wt]*Tt,wt<It-1?it[wt+1]*Tt:Y.length,Tt,!1))===Gt.next&&(Gt.steiner=!0),be.push(nh(Gt));for(be.sort(eh),wt=0;wt<be.length;wt++)ih(be[wt],ot),ot=hs(ot,ot.next);return ot}(t,e,R,i)),t.length>80*i){a=c=t[0],u=h=t[1];for(var B=i;B<M;B+=i)(m=t[B])<a&&(a=m),(_=t[B+1])<u&&(u=_),m>c&&(c=m),_>h&&(h=_);T=0!==(T=Math.max(c-a,h-u))?1/T:0}return gl(R,O,i,a,u,T),O}function xc(t,e,i,a,u){var c,h;if(u===Ou(t,e,i,a)>0)for(c=e;c<i;c+=a)h=Sc(c,t[c],t[c+1],h);else for(c=i-a;c>=e;c-=a)h=Sc(c,t[c],t[c+1],h);return h&&Yl(h,h.next)&&(_l(h),h=h.next),h}function hs(t,e){if(!t)return t;e||(e=t);var i,a=t;do{if(i=!1,a.steiner||!Yl(a,a.next)&&0!==cn(a.prev,a,a.next))a=a.next;else{if(_l(a),(a=e=a.prev)===a.next)break;i=!0}}while(i||a!==e);return e}function gl(t,e,i,a,u,c,h){if(t){!h&&c&&function(C,M,R,O){var B=C;do{null===B.z&&(B.z=Du(B.x,B.y,M,R,O)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next}while(B!==C);B.prevZ.nextZ=null,B.prevZ=null,function(Y){var it,ot,Tt,wt,It,qt,Jt,Gt,be=1;do{for(ot=Y,Y=null,It=null,qt=0;ot;){for(qt++,Tt=ot,Jt=0,it=0;it<be&&(Jt++,Tt=Tt.nextZ);it++);for(Gt=be;Jt>0||Gt>0&&Tt;)0!==Jt&&(0===Gt||!Tt||ot.z<=Tt.z)?(wt=ot,ot=ot.nextZ,Jt--):(wt=Tt,Tt=Tt.nextZ,Gt--),It?It.nextZ=wt:Y=wt,wt.prevZ=It,It=wt;ot=Tt}It.nextZ=null,be*=2}while(qt>1)}(B)}(t,a,u,c);for(var m,_,T=t;t.prev!==t.next;)if(m=t.prev,_=t.next,c?Jp(t,a,u,c):Yp(t))e.push(m.i/i),e.push(t.i/i),e.push(_.i/i),_l(t),t=_.next,T=_.next;else if((t=_)===T){h?1===h?gl(t=Qp(hs(t),e,i),e,i,a,u,c,2):2===h&&th(t,e,i,a,u,c):gl(hs(t),e,i,a,u,c,1);break}}}function Yp(t){var e=t.prev,i=t,a=t.next;if(cn(e,i,a)>=0)return!1;for(var u=t.next.next;u!==t.prev;){if(qs(e.x,e.y,i.x,i.y,a.x,a.y,u.x,u.y)&&cn(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function Jp(t,e,i,a){var u=t.prev,c=t,h=t.next;if(cn(u,c,h)>=0)return!1;for(var T=u.x>c.x?u.x>h.x?u.x:h.x:c.x>h.x?c.x:h.x,C=u.y>c.y?u.y>h.y?u.y:h.y:c.y>h.y?c.y:h.y,M=Du(u.x<c.x?u.x<h.x?u.x:h.x:c.x<h.x?c.x:h.x,u.y<c.y?u.y<h.y?u.y:h.y:c.y<h.y?c.y:h.y,e,i,a),R=Du(T,C,e,i,a),O=t.prevZ,B=t.nextZ;O&&O.z>=M&&B&&B.z<=R;){if(O!==t.prev&&O!==t.next&&qs(u.x,u.y,c.x,c.y,h.x,h.y,O.x,O.y)&&cn(O.prev,O,O.next)>=0||(O=O.prevZ,B!==t.prev&&B!==t.next&&qs(u.x,u.y,c.x,c.y,h.x,h.y,B.x,B.y)&&cn(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;O&&O.z>=M;){if(O!==t.prev&&O!==t.next&&qs(u.x,u.y,c.x,c.y,h.x,h.y,O.x,O.y)&&cn(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;B&&B.z<=R;){if(B!==t.prev&&B!==t.next&&qs(u.x,u.y,c.x,c.y,h.x,h.y,B.x,B.y)&&cn(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function Qp(t,e,i){var a=t;do{var u=a.prev,c=a.next.next;!Yl(u,c)&&bc(u,a,a.next,c)&&vl(u,c)&&vl(c,u)&&(e.push(u.i/i),e.push(a.i/i),e.push(c.i/i),_l(a),_l(a.next),a=t=c),a=a.next}while(a!==t);return hs(a)}function th(t,e,i,a,u,c){var h=t;do{for(var m=h.next.next;m!==h.prev;){if(h.i!==m.i&&oh(h,m)){var _=wc(h,m);return h=hs(h,h.next),_=hs(_,_.next),gl(h,e,i,a,u,c),void gl(_,e,i,a,u,c)}m=m.next}h=h.next}while(h!==t)}function eh(t,e){return t.x-e.x}function ih(t,e){if(e=function(a,u){var c,h=u,m=a.x,_=a.y,T=-1/0;do{if(_<=h.y&&_>=h.next.y&&h.next.y!==h.y){var C=h.x+(_-h.y)*(h.next.x-h.x)/(h.next.y-h.y);if(C<=m&&C>T){if(T=C,C===m){if(_===h.y)return h;if(_===h.next.y)return h.next}c=h.x<h.next.x?h:h.next}}h=h.next}while(h!==u);if(!c)return null;if(m===T)return c;var M,R=c,O=c.x,B=c.y,Y=1/0;h=c;do{m>=h.x&&h.x>=O&&m!==h.x&&qs(_<B?m:T,_,O,B,_<B?T:m,_,h.x,h.y)&&(M=Math.abs(_-h.y)/(m-h.x),vl(h,a)&&(M<Y||M===Y&&(h.x>c.x||h.x===c.x&&rh(c,h)))&&(c=h,Y=M)),h=h.next}while(h!==R);return c}(t,e)){var i=wc(e,t);hs(e,e.next),hs(i,i.next)}}function rh(t,e){return cn(t.prev,t,e.prev)<0&&cn(e.next,t,t.next)<0}function Du(t,e,i,a,u){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*u)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-a)*u)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function nh(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function qs(t,e,i,a,u,c,h,m){return(u-h)*(e-m)-(t-h)*(c-m)>=0&&(t-h)*(a-m)-(i-h)*(e-m)>=0&&(i-h)*(c-m)-(u-h)*(a-m)>=0}function oh(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(i,a){var u=i;do{if(u.i!==i.i&&u.next.i!==i.i&&u.i!==a.i&&u.next.i!==a.i&&bc(u,u.next,i,a))return!0;u=u.next}while(u!==i);return!1}(t,e)&&(vl(t,e)&&vl(e,t)&&function(i,a){var u=i,c=!1,h=(i.x+a.x)/2,m=(i.y+a.y)/2;do{u.y>m!=u.next.y>m&&u.next.y!==u.y&&h<(u.next.x-u.x)*(m-u.y)/(u.next.y-u.y)+u.x&&(c=!c),u=u.next}while(u!==i);return c}(t,e)&&(cn(t.prev,t,e.prev)||cn(t,e.prev,e))||Yl(t,e)&&cn(t.prev,t,t.next)>0&&cn(e.prev,e,e.next)>0)}function cn(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Yl(t,e){return t.x===e.x&&t.y===e.y}function bc(t,e,i,a){var u=Ql(cn(t,e,i)),c=Ql(cn(t,e,a)),h=Ql(cn(i,a,t)),m=Ql(cn(i,a,e));return u!==c&&h!==m||!(0!==u||!Jl(t,i,e))||!(0!==c||!Jl(t,a,e))||!(0!==h||!Jl(i,t,a))||!(0!==m||!Jl(i,e,a))}function Jl(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Ql(t){return t>0?1:t<0?-1:0}function vl(t,e){return cn(t.prev,t,t.next)<0?cn(t,e,t.next)>=0&&cn(t,t.prev,e)>=0:cn(t,e,t.prev)<0||cn(t,t.next,e)<0}function wc(t,e){var i=new Lu(t.i,t.x,t.y),a=new Lu(e.i,e.x,e.y),u=t.next,c=e.prev;return t.next=e,e.prev=t,i.next=u,u.prev=i,a.next=i,i.prev=a,c.next=a,a.prev=c,a}function Sc(t,e,i,a){var u=new Lu(t,e,i);return a?(u.next=a.next,u.prev=a,a.next.prev=u,a.next=u):(u.prev=u,u.next=u),u}function _l(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Lu(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ou(t,e,i,a){for(var u=0,c=e,h=i-a;c<i;c+=a)u+=(t[h]-t[c])*(t[c+1]+t[h+1]),h=c;return u}function ah(t,e,i,a,u){!function c(h,m,_,T,C){for(;T>_;){if(T-_>600){var M=T-_+1,R=m-_+1,O=Math.log(M),B=.5*Math.exp(2*O/3),Y=.5*Math.sqrt(O*B*(M-B)/M)*(R-M/2<0?-1:1);c(h,m,Math.max(_,Math.floor(m-R*B/M+Y)),Math.min(T,Math.floor(m+(M-R)*B/M+Y)),C)}var Tt=h[m],wt=_,It=T;for(xl(h,_,m),C(h[T],Tt)>0&&xl(h,_,T);wt<It;){for(xl(h,wt,It),wt++,It--;C(h[wt],Tt)<0;)wt++;for(;C(h[It],Tt)>0;)It--}0===C(h[_],Tt)?xl(h,_,It):xl(h,++It,T),It<=m&&(_=It+1),m<=It&&(T=It-1)}}(t,e,i||0,a||t.length-1,u||sh)}function xl(t,e,i){var a=t[e];t[e]=t[i],t[i]=a}function sh(t,e){return t<e?-1:t>e?1:0}function Ru(t,e){var i=t.length;if(i<=1)return[t];for(var a,u,c=[],h=0;h<i;h++){var m=Ht(t[h]);0!==m&&(t[h].area=Math.abs(m),void 0===u&&(u=m<0),u===m<0?(a&&c.push(a),a=[t[h]]):a.push(t[h]))}if(a&&c.push(a),e>1)for(var _=0;_<c.length;_++)c[_].length<=e||(ah(c[_],e,1,c[_].length-1,lh),c[_]=c[_].slice(0,e));return c}function lh(t,e){return e.area-t.area}function Bu(t,e,i){for(var a=i.patternDependencies,u=!1,c=0,h=e;c<h.length;c+=1){var m=h[c].paint.get(t+"-pattern");m.isConstant()||(u=!0);var _=m.constantOr(null);_&&(u=!0,a[_.to]=!0,a[_.from]=!0)}return u}function Fu(t,e,i,a,u){for(var c=u.patternDependencies,h=0,m=e;h<m.length;h+=1){var _=m[h],T=_.paint.get(t+"-pattern").value;if("constant"!==T.kind){var C=T.evaluate({zoom:a-1},i,{},u.availableImages),M=T.evaluate({zoom:a},i,{},u.availableImages),R=T.evaluate({zoom:a+1},i,{},u.availableImages);M=M&&M.name?M.name:M,R=R&&R.name?R.name:R,c[C=C&&C.name?C.name:C]=!0,c[M]=!0,c[R]=!0,i.patterns[_.id]={min:C,mid:M,max:R}}}return i}Kl.deviation=function(t,e,i,a){var u=e&&e.length,h=Math.abs(Ou(t,0,u?e[0]*i:t.length,i));if(u)for(var m=0,_=e.length;m<_;m++)h-=Math.abs(Ou(t,e[m]*i,m<_-1?e[m+1]*i:t.length,i));var M=0;for(m=0;m<a.length;m+=3){var R=a[m]*i,O=a[m+1]*i,B=a[m+2]*i;M+=Math.abs((t[R]-t[B])*(t[O+1]-t[R+1])-(t[R]-t[O])*(t[B+1]-t[R+1]))}return 0===h&&0===M?0:Math.abs((M-h)/h)},Kl.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},a=0,u=0;u<t.length;u++){for(var c=0;c<t[u].length;c++)for(var h=0;h<e;h++)i.vertices.push(t[u][c][h]);u>0&&i.holes.push(a+=t[u-1].length)}return i},Mu.default=Kp;var ga=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new S,this.indexArray=new De,this.indexArray2=new Ce,this.programConfigurations=new So(_c,t.layers,t.zoom),this.segments=new Er,this.segments2=new Er,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};ga.prototype.populate=function(t,e){this.hasPattern=Bu("fill",this.layers,e);for(var i=this.layers[0].layout.get("fill-sort-key"),a=[],u=0,c=t;u<c.length;u+=1){var h=c[u],m=h.feature,_=h.id,T=h.index,C=h.sourceLayerIndex;if(this.layers[0]._featureFilter(new Pr(this.zoom),m)){var M=js(m),R=i?i.evaluate(m,{},e.availableImages):void 0;a.push({id:_,properties:m.properties,type:m.type,sourceLayerIndex:C,index:T,geometry:M,patterns:{},sortKey:R})}}i&&a.sort(function(Gt,be){return Gt.sortKey-be.sortKey});for(var B=0,Y=a;B<Y.length;B+=1){var it=Y[B],Tt=it.geometry,wt=it.index,It=it.sourceLayerIndex;if(this.hasPattern){var qt=Fu("fill",this.layers,it,this.zoom,e);this.patternFeatures.push(qt)}else this.addFeature(it,Tt,wt,{});e.featureIndex.insert(t[wt].feature,Tt,wt,It,this.index)}},ga.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},ga.prototype.addFeatures=function(t,e){for(var i=0,a=this.patternFeatures;i<a.length;i+=1){var u=a[i];this.addFeature(u,u.geometry,u.index,e)}},ga.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ga.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ga.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_c),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},ga.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ga.prototype.addFeature=function(t,e,i,a){for(var u=0,c=Ru(e,500);u<c.length;u+=1){for(var h=c[u],m=0,_=0,T=h;_<T.length;_+=1)m+=T[_].length;for(var C=this.segments.prepareSegment(m,this.layoutVertexArray,this.indexArray),M=C.vertexLength,R=[],O=[],B=0,Y=h;B<Y.length;B+=1){var it=Y[B];if(0!==it.length){it!==h[0]&&O.push(R.length/2);var ot=this.segments2.prepareSegment(it.length,this.layoutVertexArray,this.indexArray2),Tt=ot.vertexLength;this.layoutVertexArray.emplaceBack(it[0].x,it[0].y),this.indexArray2.emplaceBack(Tt+it.length-1,Tt),R.push(it[0].x),R.push(it[0].y);for(var wt=1;wt<it.length;wt++)this.layoutVertexArray.emplaceBack(it[wt].x,it[wt].y),this.indexArray2.emplaceBack(Tt+wt-1,Tt+wt),R.push(it[wt].x),R.push(it[wt].y);ot.vertexLength+=it.length,ot.primitiveLength+=it.length}}for(var It=Mu(R,O),qt=0;qt<It.length;qt+=3)this.indexArray.emplaceBack(M+It[qt],M+It[qt+1],M+It[qt+2]);C.vertexLength+=m,C.primitiveLength+=It.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,a)},oe("FillBucket",ga,{omit:["layers","patternFeatures"]});var uh=new o({"fill-sort-key":new hi(x.layout_fill["fill-sort-key"])}),ch={paint:new o({"fill-antialias":new Ve(x.paint_fill["fill-antialias"]),"fill-opacity":new hi(x.paint_fill["fill-opacity"]),"fill-color":new hi(x.paint_fill["fill-color"]),"fill-outline-color":new hi(x.paint_fill["fill-outline-color"]),"fill-translate":new Ve(x.paint_fill["fill-translate"]),"fill-translate-anchor":new Ve(x.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ns(x.paint_fill["fill-pattern"])}),layout:uh},ph=function(t){function e(i){t.call(this,i,ch)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(i,a){t.prototype.recalculate.call(this,i,a);var u=this.paint._values["fill-outline-color"];"constant"===u.value.kind&&void 0===u.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(i){return new ga(i)},e.prototype.queryRadius=function(){return Gl(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(i,a,u,c,h,m,_){return hc(Xl(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,_),c)},e.prototype.isTileClipped=function(){return!0},e}(n),Tc=y([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Ec=Hs;function Hs(t,e,i,a,u){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=a,this._values=u,t.readFields(hh,this,e)}function hh(t,e,i){1==t?e.id=i.readVarint():2==t?function(a,u){for(var c=a.readVarint()+a.pos;a.pos<c;){var h=u._keys[a.readVarint()],m=u._values[a.readVarint()];u.properties[h]=m}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function dh(t){for(var e,i,a=0,u=0,c=t.length,h=c-1;u<c;h=u++)a+=((i=t[h]).x-(e=t[u]).x)*(e.y+i.y);return a}Hs.types=["Unknown","Point","LineString","Polygon"],Hs.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,a=1,u=0,c=0,h=0,m=[];t.pos<i;){if(u<=0){var _=t.readVarint();a=7&_,u=_>>3}if(u--,1===a||2===a)c+=t.readSVarint(),h+=t.readSVarint(),1===a&&(e&&m.push(e),e=[]),e.push(new et(c,h));else{if(7!==a)throw new Error("unknown command "+a);e&&e.push(e[0].clone())}}return e&&m.push(e),m},Hs.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,a=0,u=0,c=0,h=1/0,m=-1/0,_=1/0,T=-1/0;t.pos<e;){if(a<=0){var C=t.readVarint();i=7&C,a=C>>3}if(a--,1===i||2===i)(u+=t.readSVarint())<h&&(h=u),u>m&&(m=u),(c+=t.readSVarint())<_&&(_=c),c>T&&(T=c);else if(7!==i)throw new Error("unknown command "+i)}return[h,_,m,T]},Hs.prototype.toGeoJSON=function(t,e,i){var a,u,c=this.extent*Math.pow(2,i),h=this.extent*t,m=this.extent*e,_=this.loadGeometry(),T=Hs.types[this.type];function C(O){for(var B=0;B<O.length;B++){var Y=O[B];O[B]=[360*(Y.x+h)/c-180,360/Math.PI*Math.atan(Math.exp((180-360*(Y.y+m)/c)*Math.PI/180))-90]}}switch(this.type){case 1:var M=[];for(a=0;a<_.length;a++)M[a]=_[a][0];C(_=M);break;case 2:for(a=0;a<_.length;a++)C(_[a]);break;case 3:for(_=function(O){var B=O.length;if(B<=1)return[O];for(var Y,it,ot=[],Tt=0;Tt<B;Tt++){var wt=dh(O[Tt]);0!==wt&&(void 0===it&&(it=wt<0),it===wt<0?(Y&&ot.push(Y),Y=[O[Tt]]):Y.push(O[Tt]))}return Y&&ot.push(Y),ot}(_),a=0;a<_.length;a++)for(u=0;u<_[a].length;u++)C(_[a][u])}1===_.length?_=_[0]:T="Multi"+T;var R={type:"Feature",geometry:{type:T,coordinates:_},properties:this.properties};return"id"in this&&(R.id=this.id),R};var Cc=Ic;function Ic(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(fh,this,e),this.length=this._features.length}function fh(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(a){for(var u=null,c=a.readVarint()+a.pos;a.pos<c;){var h=a.readVarint()>>3;u=1===h?a.readString():2===h?a.readFloat():3===h?a.readDouble():4===h?a.readVarint64():5===h?a.readVarint():6===h?a.readSVarint():7===h?a.readBoolean():null}return u}(i))}function mh(t,e,i){if(3===t){var a=new Cc(i,i.readVarint()+i.pos);a.length&&(e[a.name]=a)}}Ic.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Ec(this._pbf,e,this.extent,this._keys,this._values)};var Zs={VectorTile:function(t,e){this.layers=t.readFields(mh,{},e)},VectorTileFeature:Ec,VectorTileLayer:Cc},yh=Zs.VectorTileFeature.types,Uu=Math.pow(2,13);function bl(t,e,i,a,u,c,h,m){t.emplaceBack(e,i,2*Math.floor(a*Uu)+h,u*Uu*2,c*Uu*2,Math.round(m))}var va=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new L,this.indexArray=new De,this.programConfigurations=new So(Tc,t.layers,t.zoom),this.segments=new Er,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function gh(t,e){return t.x===e.x&&(t.x<0||t.x>mn)||t.y===e.y&&(t.y<0||t.y>mn)}function vh(t){return t.every(function(e){return e.x<0})||t.every(function(e){return e.x>mn})||t.every(function(e){return e.y<0})||t.every(function(e){return e.y>mn})}va.prototype.populate=function(t,e){this.features=[],this.hasPattern=Bu("fill-extrusion",this.layers,e);for(var i=0,a=t;i<a.length;i+=1){var u=a[i],c=u.feature,h=u.id,m=u.index,_=u.sourceLayerIndex;if(this.layers[0]._featureFilter(new Pr(this.zoom),c)){var T=js(c),C={id:h,sourceLayerIndex:_,index:m,geometry:T,properties:c.properties,type:c.type,patterns:{}};void 0!==c.id&&(C.id=c.id),this.hasPattern?this.features.push(Fu("fill-extrusion",this.layers,C,this.zoom,e)):this.addFeature(C,T,m,{}),e.featureIndex.insert(c,T,m,_,this.index,!0)}}},va.prototype.addFeatures=function(t,e){for(var i=0,a=this.features;i<a.length;i+=1){var u=a[i];this.addFeature(u,u.geometry,u.index,e)}},va.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},va.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},va.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},va.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Tc),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},va.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},va.prototype.addFeature=function(t,e,i,a){for(var u=0,c=Ru(e,500);u<c.length;u+=1){for(var h=c[u],m=0,_=0,T=h;_<T.length;_+=1)m+=T[_].length;for(var C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),M=0,R=h;M<R.length;M+=1){var O=R[M];if(0!==O.length&&!vh(O))for(var B=0,Y=0;Y<O.length;Y++){var it=O[Y];if(Y>=1){var ot=O[Y-1];if(!gh(it,ot)){C.vertexLength+4>Er.MAX_VERTEX_ARRAY_LENGTH&&(C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Tt=it.sub(ot)._perp()._unit(),wt=ot.dist(it);B+wt>32768&&(B=0),bl(this.layoutVertexArray,it.x,it.y,Tt.x,Tt.y,0,0,B),bl(this.layoutVertexArray,it.x,it.y,Tt.x,Tt.y,0,1,B),bl(this.layoutVertexArray,ot.x,ot.y,Tt.x,Tt.y,0,0,B+=wt),bl(this.layoutVertexArray,ot.x,ot.y,Tt.x,Tt.y,0,1,B);var It=C.vertexLength;this.indexArray.emplaceBack(It,It+2,It+1),this.indexArray.emplaceBack(It+1,It+2,It+3),C.vertexLength+=4,C.primitiveLength+=2}}}}if(C.vertexLength+m>Er.MAX_VERTEX_ARRAY_LENGTH&&(C=this.segments.prepareSegment(m,this.layoutVertexArray,this.indexArray)),"Polygon"===yh[t.type]){for(var qt=[],Jt=[],Gt=C.vertexLength,be=0,He=h;be<He.length;be+=1){var Oe=He[be];if(0!==Oe.length){Oe!==h[0]&&Jt.push(qt.length/2);for(var Ke=0;Ke<Oe.length;Ke++){var Re=Oe[Ke];bl(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),qt.push(Re.x),qt.push(Re.y)}}}for(var Ee=Mu(qt,Jt),pe=0;pe<Ee.length;pe+=3)this.indexArray.emplaceBack(Gt+Ee[pe],Gt+Ee[pe+2],Gt+Ee[pe+1]);C.primitiveLength+=Ee.length/3,C.vertexLength+=m}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,a)},oe("FillExtrusionBucket",va,{omit:["layers","features"]});var _h={paint:new o({"fill-extrusion-opacity":new Ve(x["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new hi(x["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ve(x["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ve(x["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ns(x["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new hi(x["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new hi(x["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ve(x["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},xh=function(t){function e(i){t.call(this,i,_h)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(i){return new va(i)},e.prototype.queryRadius=function(){return Gl(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(i,a,u,c,h,m,_,T){var C=Xl(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,_),M=this.paint.get("fill-extrusion-height").evaluate(a,u),R=this.paint.get("fill-extrusion-base").evaluate(a,u),O=function(Y,it,ot,Tt){for(var wt=[],It=0,qt=Y;It<qt.length;It+=1){var Jt=qt[It],Gt=[Jt.x,Jt.y,0,1];$l(Gt,Gt,it),wt.push(new et(Gt[0]/Gt[3],Gt[1]/Gt[3]))}return wt}(C,T),B=function(Y,it,ot,Tt){for(var wt=[],It=[],qt=Tt[8]*it,Jt=Tt[9]*it,Gt=Tt[10]*it,be=Tt[11]*it,He=Tt[8]*ot,Oe=Tt[9]*ot,Ke=Tt[10]*ot,Re=Tt[11]*ot,Ee=0,pe=Y;Ee<pe.length;Ee+=1){for(var gr=[],Qi=[],mi=0,Ai=pe[Ee];mi<Ai.length;mi+=1){var Oi=Ai[mi],bi=Oi.x,Pi=Oi.y,rr=Tt[0]*bi+Tt[4]*Pi+Tt[12],Fr=Tt[1]*bi+Tt[5]*Pi+Tt[13],Vr=Tt[2]*bi+Tt[6]*Pi+Tt[14],Un=Tt[3]*bi+Tt[7]*Pi+Tt[15],Nn=Vr+Gt,nn=Un+be,wn=rr+He,Pn=Fr+Oe,jn=Vr+Ke,yn=Un+Re,Ur=new et((rr+qt)/nn,(Fr+Jt)/nn);Ur.z=Nn/nn,gr.push(Ur);var Jr=new et(wn/yn,Pn/yn);Jr.z=jn/yn,Qi.push(Jr)}wt.push(gr),It.push(Qi)}return[wt,It]}(c,R,M,T);return function(Y,it,ot){var Tt=1/0;hc(ot,it)&&(Tt=kc(ot,it[0]));for(var wt=0;wt<it.length;wt++)for(var It=it[wt],qt=Y[wt],Jt=0;Jt<It.length-1;Jt++){var Gt=It[Jt],Ke=[Gt,It[Jt+1],qt[Jt+1],qt[Jt],Gt];pc(ot,Ke)&&(Tt=Math.min(Tt,kc(ot,Ke)))}return Tt!==1/0&&Tt}(B[0],B[1],O)},e}(n);function wl(t,e){return t.x*e.x+t.y*e.y}function kc(t,e){if(1===t.length){for(var i,a,u=0,c=e[u++];!i||c.equals(i);)if(!(i=e[u++]))return 1/0;for(;!a||c.equals(a)||i.equals(a);)if(!(a=e[u++]))return 1/0;var h=t[0],m=i.sub(c),_=a.sub(c),T=h.sub(c),C=wl(m,m),M=wl(m,_),R=wl(_,_),O=wl(T,m),B=wl(T,_),Y=C*R-M*M,it=(R*O-M*B)/Y,ot=(C*B-M*O)/Y;return c.z*(1-it-ot)+i.z*it+a.z*ot}for(var wt=1/0,It=0,qt=e;It<qt.length;It+=1)wt=Math.min(wt,qt[It].z);return wt}var Ac=y([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,bh=Zs.VectorTileFeature.types,wh=Math.cos(Math.PI/180*37.5),zc=Math.pow(2,14)/.5,ho=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new U,this.indexArray=new De,this.programConfigurations=new So(Ac,t.layers,t.zoom),this.segments=new Er,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};ho.prototype.populate=function(t,e){this.hasPattern=Bu("line",this.layers,e);for(var i=this.layers[0].layout.get("line-sort-key"),a=[],u=0,c=t;u<c.length;u+=1){var h=c[u],m=h.feature,_=h.id,T=h.index,C=h.sourceLayerIndex;if(this.layers[0]._featureFilter(new Pr(this.zoom),m)){var M=js(m),R=i?i.evaluate(m,{}):void 0;a.push({id:_,properties:m.properties,type:m.type,sourceLayerIndex:C,index:T,geometry:M,patterns:{},sortKey:R})}}i&&a.sort(function(Gt,be){return Gt.sortKey-be.sortKey});for(var B=0,Y=a;B<Y.length;B+=1){var it=Y[B],Tt=it.geometry,wt=it.index,It=it.sourceLayerIndex;if(this.hasPattern){var qt=Fu("line",this.layers,it,this.zoom,e);this.patternFeatures.push(qt)}else this.addFeature(it,Tt,wt,{});e.featureIndex.insert(t[wt].feature,Tt,wt,It,this.index)}},ho.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},ho.prototype.addFeatures=function(t,e){for(var i=0,a=this.patternFeatures;i<a.length;i+=1){var u=a[i];this.addFeature(u,u.geometry,u.index,e)}},ho.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ho.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ho.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ac),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ho.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ho.prototype.addFeature=function(t,e,i,a){for(var u=this.layers[0].layout,c=u.get("line-join").evaluate(t,{}),h=u.get("line-cap"),m=u.get("line-miter-limit"),_=u.get("line-round-limit"),T=0,C=e;T<C.length;T+=1)this.addLine(C[T],t,c,h,m,_,i,a)},ho.prototype.addLine=function(t,e,i,a,u,c,h,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var _=0;_<t.length-1;_++)this.totalDistance+=t[_].dist(t[_+1])}for(var T="Polygon"===bh[e.type],C=t.length;C>=2&&t[C-1].equals(t[C-2]);)C--;for(var M=0;M<C-1&&t[M].equals(t[M+1]);)M++;if(!(C<(T?3:2))){"bevel"===i&&(u=1.05);var R,O=this.overscaling<=16?15*mn/(512*this.overscaling):0,B=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),Y=void 0,it=void 0,ot=void 0,Tt=void 0;this.e1=this.e2=-1,T&&(Tt=t[M].sub(R=t[C-2])._unit()._perp());for(var wt=M;wt<C;wt++)if(!(it=T&&wt===C-1?t[M+1]:t[wt+1])||!t[wt].equals(it)){Tt&&(ot=Tt),R&&(Y=R),R=t[wt],Tt=it?it.sub(R)._unit()._perp():ot;var It=(ot=ot||Tt).add(Tt);0===It.x&&0===It.y||It._unit();var qt=ot.x*Tt.x+ot.y*Tt.y,Jt=It.x*Tt.x+It.y*Tt.y,Gt=0!==Jt?1/Jt:1/0,be=2*Math.sqrt(2-2*Jt),He=Jt<wh&&Y&&it,Oe=ot.x*Tt.y-ot.y*Tt.x>0;if(He&&wt>M){var Ke=R.dist(Y);if(Ke>2*O){var Re=R.sub(R.sub(Y)._mult(O/Ke)._round());this.updateDistance(Y,Re),this.addCurrentVertex(Re,ot,0,0,B),Y=Re}}var Ee=Y&&it,pe=Ee?i:T?"butt":a;if(Ee&&"round"===pe&&(Gt<c?pe="miter":Gt<=2&&(pe="fakeround")),"miter"===pe&&Gt>u&&(pe="bevel"),"bevel"===pe&&(Gt>2&&(pe="flipbevel"),Gt<u&&(pe="miter")),Y&&this.updateDistance(Y,R),"miter"===pe)It._mult(Gt),this.addCurrentVertex(R,It,0,0,B);else if("flipbevel"===pe){if(Gt>100)It=Tt.mult(-1);else{var ki=Gt*ot.add(Tt).mag()/ot.sub(Tt).mag();It._perp()._mult(ki*(Oe?-1:1))}this.addCurrentVertex(R,It,0,0,B),this.addCurrentVertex(R,It.mult(-1),0,0,B)}else if("bevel"===pe||"fakeround"===pe){var gr=-Math.sqrt(Gt*Gt-1),Qi=Oe?gr:0,mi=Oe?0:gr;if(Y&&this.addCurrentVertex(R,ot,Qi,mi,B),"fakeround"===pe)for(var Ai=Math.round(180*be/Math.PI/20),Oi=1;Oi<Ai;Oi++){var bi=Oi/Ai;if(.5!==bi){var Pi=bi-.5;bi+=bi*Pi*(bi-1)*((1.0904+qt*(qt*(3.55645-1.43519*qt)-3.2452))*Pi*Pi+(.848013+qt*(.215638*qt-1.06021)))}var rr=Tt.sub(ot)._mult(bi)._add(ot)._unit()._mult(Oe?-1:1);this.addHalfVertex(R,rr.x,rr.y,!1,Oe,0,B)}it&&this.addCurrentVertex(R,Tt,-Qi,-mi,B)}else if("butt"===pe)this.addCurrentVertex(R,It,0,0,B);else if("square"===pe){var Fr=Y?1:-1;this.addCurrentVertex(R,It,Fr,Fr,B)}else"round"===pe&&(Y&&(this.addCurrentVertex(R,ot,0,0,B),this.addCurrentVertex(R,ot,1,1,B,!0)),it&&(this.addCurrentVertex(R,Tt,-1,-1,B,!0),this.addCurrentVertex(R,Tt,0,0,B)));if(He&&wt<C-1){var Vr=R.dist(it);if(Vr>2*O){var Un=R.add(it.sub(R)._mult(O/Vr)._round());this.updateDistance(R,Un),this.addCurrentVertex(Un,Tt,0,0,B),R=Un}}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,m)}},ho.prototype.addCurrentVertex=function(t,e,i,a,u,c){void 0===c&&(c=!1);var _=e.y*a-e.x,T=-e.y-e.x*a;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,c,!1,i,u),this.addHalfVertex(t,_,T,c,!0,-a,u),this.distance>zc/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,a,u,c))},ho.prototype.addHalfVertex=function(t,e,i,a,u,c,h){var T=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((t.x<<1)+(a?1:0),(t.y<<1)+(u?1:0),Math.round(63*e)+128,Math.round(63*i)+128,1+(0===c?0:c<0?-1:1)|(63&T)<<2,T>>6);var C=h.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),h.primitiveLength++),u?this.e2=C:this.e1=C},ho.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(zc-1):this.distance},oe("LineBucket",ho,{omit:["layers","patternFeatures"]});var Sh=new o({"line-cap":new Ve(x.layout_line["line-cap"]),"line-join":new hi(x.layout_line["line-join"]),"line-miter-limit":new Ve(x.layout_line["line-miter-limit"]),"line-round-limit":new Ve(x.layout_line["line-round-limit"]),"line-sort-key":new hi(x.layout_line["line-sort-key"])}),Pc={paint:new o({"line-opacity":new hi(x.paint_line["line-opacity"]),"line-color":new hi(x.paint_line["line-color"]),"line-translate":new Ve(x.paint_line["line-translate"]),"line-translate-anchor":new Ve(x.paint_line["line-translate-anchor"]),"line-width":new hi(x.paint_line["line-width"]),"line-gap-width":new hi(x.paint_line["line-gap-width"]),"line-offset":new hi(x.paint_line["line-offset"]),"line-blur":new hi(x.paint_line["line-blur"]),"line-dasharray":new Za(x.paint_line["line-dasharray"]),"line-pattern":new Ns(x.paint_line["line-pattern"]),"line-gradient":new r(x.paint_line["line-gradient"])}),layout:Sh},Mc=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(i,a){return a=new Pr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),t.prototype.possiblyEvaluate.call(this,i,a)},e.prototype.evaluate=function(i,a,u,c){return a=vt({},a,{zoom:Math.floor(a.zoom)}),t.prototype.evaluate.call(this,i,a,u,c)},e}(hi))(Pc.paint.properties["line-width"].specification);Mc.useIntegerZoom=!0;var Th=function(t){function e(i){t.call(this,i,Pc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(i){"line-gradient"===i&&this._updateGradient()},e.prototype._updateGradient=function(){this.gradient=vc(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(i,a){t.prototype.recalculate.call(this,i,a),this.paint._values["line-floorwidth"]=Mc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},e.prototype.createBucket=function(i){return new ho(i)},e.prototype.queryRadius=function(i){var a=i,u=Dc(ml("line-width",this,a),ml("line-gap-width",this,a)),c=ml("line-offset",this,a);return u/2+Math.abs(c)+Gl(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(i,a,u,c,h,m,_){var T=Xl(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,_),C=_/2*Dc(this.paint.get("line-width").evaluate(a,u),this.paint.get("line-gap-width").evaluate(a,u)),M=this.paint.get("line-offset").evaluate(a,u);return M&&(c=function(R,O){for(var B=[],Y=new et(0,0),it=0;it<R.length;it++){for(var ot=R[it],Tt=[],wt=0;wt<ot.length;wt++){var qt=ot[wt],Jt=ot[wt+1],Gt=0===wt?Y:qt.sub(ot[wt-1])._unit()._perp(),be=wt===ot.length-1?Y:Jt.sub(qt)._unit()._perp(),He=Gt._add(be)._unit();He._mult(1/(He.x*be.x+He.y*be.y)),Tt.push(He._mult(O)._add(qt))}B.push(Tt)}return B}(c,M*_)),function(R,O,B){for(var Y=0;Y<O.length;Y++){var it=O[Y];if(R.length>=3)for(var ot=0;ot<it.length;ot++)if(Vs(R,it[ot]))return!0;if(Up(R,it,B))return!0}return!1}(T,c,C)},e.prototype.isTileClipped=function(){return!0},e}(n);function Dc(t,e){return e>0?e+2*t:t}var Nu=y([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Eh=y([{name:"a_projected_pos",components:3,type:"Float32"}],4),Ch=(y([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),y([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Lc=(y([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),y([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Oc=y([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Ih(t,e,i){return t.sections.forEach(function(a){var u,h,m;a.text=(u=a.text,h=i,"uppercase"===(m=e.layout.get("text-transform").evaluate(h,{}))?u=u.toLocaleUpperCase():"lowercase"===m&&(u=u.toLocaleLowerCase()),kn.applyArabicShaping&&(u=kn.applyArabicShaping(u)),u)}),t}y([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),y([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"}]),y([{type:"Float32",name:"offsetX"}]),y([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Sl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Rc=function(t,e,i,a,u){var c,h,m=8*u-a-1,_=(1<<m)-1,T=_>>1,C=-7,M=i?u-1:0,R=i?-1:1,O=t[e+M];for(M+=R,c=O&(1<<-C)-1,O>>=-C,C+=m;C>0;c=256*c+t[e+M],M+=R,C-=8);for(h=c&(1<<-C)-1,c>>=-C,C+=a;C>0;h=256*h+t[e+M],M+=R,C-=8);if(0===c)c=1-T;else{if(c===_)return h?NaN:1/0*(O?-1:1);h+=Math.pow(2,a),c-=T}return(O?-1:1)*h*Math.pow(2,c-a)},Bc=function(t,e,i,a,u,c){var h,m,_,T=8*c-u-1,C=(1<<T)-1,M=C>>1,R=23===u?Math.pow(2,-24)-Math.pow(2,-77):0,O=a?0:c-1,B=a?1:-1,Y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(m=isNaN(e)?1:0,h=C):(h=Math.floor(Math.log(e)/Math.LN2),e*(_=Math.pow(2,-h))<1&&(h--,_*=2),(e+=h+M>=1?R/_:R*Math.pow(2,1-M))*_>=2&&(h++,_/=2),h+M>=C?(m=0,h=C):h+M>=1?(m=(e*_-1)*Math.pow(2,u),h+=M):(m=e*Math.pow(2,M-1)*Math.pow(2,u),h=0));u>=8;t[i+O]=255&m,O+=B,m/=256,u-=8);for(h=h<<u|m,T+=u;T>0;t[i+O]=255&h,O+=B,h/=256,T-=8);t[i+O-B]|=128*Y},tu=Mr;function Mr(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Mr.Varint=0,Mr.Fixed64=1,Mr.Bytes=2,Mr.Fixed32=5;var Fc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function $a(t){return t.type===Mr.Bytes?t.readVarint()+t.pos:t.pos+1}function Uc(t,e,i){var a=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(a);for(var u=i.pos-1;u>=t;u--)i.buf[u+a]=i.buf[u]}function kh(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function Ah(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function zh(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function Ph(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Mh(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function Dh(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function Lh(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function Oh(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function Rh(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function eu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Gs(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function Nc(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Bh(t,e,i){1===t&&i.readMessage(Fh,e)}function Fh(t,e,i){if(3===t){var a=i.readMessage(Uh,{}),h=a.width,m=a.height,_=a.left,T=a.top,C=a.advance;e.push({id:a.id,bitmap:new Ts({width:h+6,height:m+6},a.bitmap),metrics:{width:h,height:m,left:_,top:T,advance:C}})}}function Uh(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function Vc(t){for(var e=0,i=0,a=0,u=t;a<u.length;a+=1){var c=u[a];e+=c.w*c.h,i=Math.max(i,c.w)}t.sort(function(Y,it){return it.h-Y.h});for(var h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],m=0,_=0,T=0,C=t;T<C.length;T+=1)for(var M=C[T],R=h.length-1;R>=0;R--){var O=h[R];if(!(M.w>O.w||M.h>O.h)){if(M.x=O.x,M.y=O.y,_=Math.max(_,M.y+M.h),m=Math.max(m,M.x+M.w),M.w===O.w&&M.h===O.h){var B=h.pop();R<h.length&&(h[R]=B)}else M.h===O.h?(O.x+=M.w,O.w-=M.w):M.w===O.w?(O.y+=M.h,O.h-=M.h):(h.push({x:O.x+M.w,y:O.y,w:O.w-M.w,h:M.h}),O.y+=M.h,O.h-=M.h);break}}return{w:m,h:_,fill:e/(m*_)||0}}Mr.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),u=a>>3,c=this.pos;this.type=7&a,t(u,e,this),this.pos===c&&this.skip(a)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=eu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Nc(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=eu(this.buf,this.pos)+4294967296*eu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=eu(this.buf,this.pos)+4294967296*Nc(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Rc(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Rc(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,a=this.buf;return e=127&(i=a[this.pos++]),i<128?e:(e|=(127&(i=a[this.pos++]))<<7,i<128?e:(e|=(127&(i=a[this.pos++]))<<14,i<128?e:(e|=(127&(i=a[this.pos++]))<<21,i<128?e:function(u,c,h){var m,_,T=h.buf;if(m=(112&(_=T[h.pos++]))>>4,_<128||(m|=(127&(_=T[h.pos++]))<<3,_<128)||(m|=(127&(_=T[h.pos++]))<<10,_<128)||(m|=(127&(_=T[h.pos++]))<<17,_<128)||(m|=(127&(_=T[h.pos++]))<<24,_<128)||(m|=(1&(_=T[h.pos++]))<<31,_<128))return function Ws(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}(u,m,c);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=a[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Fc?Fc.decode(this.buf.subarray(e,t)):function(i,a,u){for(var c="",h=a;h<u;){var m,_,T,C=i[h],M=null,R=C>239?4:C>223?3:C>191?2:1;if(h+R>u)break;1===R?C<128&&(M=C):2===R?128==(192&(m=i[h+1]))&&(M=(31&C)<<6|63&m)<=127&&(M=null):3===R?(_=i[h+2],128==(192&(m=i[h+1]))&&128==(192&_)&&((M=(15&C)<<12|(63&m)<<6|63&_)<=2047||M>=55296&&M<=57343)&&(M=null)):4===R&&(_=i[h+2],T=i[h+3],128==(192&(m=i[h+1]))&&128==(192&_)&&128==(192&T)&&((M=(15&C)<<18|(63&m)<<12|(63&_)<<6|63&T)<=65535||M>=1114112)&&(M=null)),null===M?(M=65533,R=1):M>65535&&(M-=65536,c+=String.fromCharCode(M>>>10&1023|55296),M=56320|1023&M),c+=String.fromCharCode(M),h+=R}return c}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Mr.Bytes)return t.push(this.readVarint(e));var i=$a(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Mr.Bytes)return t.push(this.readSVarint());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Mr.Bytes)return t.push(this.readBoolean());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Mr.Bytes)return t.push(this.readFloat());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Mr.Bytes)return t.push(this.readDouble());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Mr.Bytes)return t.push(this.readFixed32());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Mr.Bytes)return t.push(this.readSFixed32());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Mr.Bytes)return t.push(this.readFixed64());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Mr.Bytes)return t.push(this.readSFixed64());var e=$a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Mr.Varint)for(;this.buf[this.pos++]>127;);else if(e===Mr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Mr.Fixed32)this.pos+=4;else{if(e!==Mr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Gs(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Gs(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Gs(this.buf,-1&t,this.pos),Gs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Gs(this.buf,-1&t,this.pos),Gs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(e,i){var a,u,c,m;if(e>=0?(a=e%4294967296|0,u=e/4294967296|0):(u=~(-e/4294967296),4294967295^(a=~(-e%4294967296))?a=a+1|0:(a=0,u=u+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),c=a,(m=i).buf[m.pos++]=127&c|128,c>>>=7,m.buf[m.pos++]=127&c|128,c>>>=7,m.buf[m.pos++]=127&c|128,c>>>=7,m.buf[m.pos++]=127&c|128,m.buf[m.pos]=127&(c>>>=7),function(c,h){var m=(7&c)<<4;h.buf[h.pos++]|=m|((c>>>=3)?128:0),c&&(h.buf[h.pos++]=127&c|((c>>>=7)?128:0),c&&(h.buf[h.pos++]=127&c|((c>>>=7)?128:0),c&&(h.buf[h.pos++]=127&c|((c>>>=7)?128:0),c&&(h.buf[h.pos++]=127&c|((c>>>=7)?128:0),c&&(h.buf[h.pos++]=127&c)))))}(u,i)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(a,u,c){for(var h,m,_=0;_<u.length;_++){if((h=u.charCodeAt(_))>55295&&h<57344){if(!m){h>56319||_+1===u.length?(a[c++]=239,a[c++]=191,a[c++]=189):m=h;continue}if(h<56320){a[c++]=239,a[c++]=191,a[c++]=189,m=h;continue}h=m-55296<<10|h-56320|65536,m=null}else m&&(a[c++]=239,a[c++]=191,a[c++]=189,m=null);h<128?a[c++]=h:(h<2048?a[c++]=h>>6|192:(h<65536?a[c++]=h>>12|224:(a[c++]=h>>18|240,a[c++]=h>>12&63|128),a[c++]=h>>6&63|128),a[c++]=63&h|128)}return c}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&Uc(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Bc(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Bc(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var a=this.pos-i;a>=128&&Uc(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(t,e,i){this.writeTag(t,Mr.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,kh,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Ah,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Mh,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,zh,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Ph,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Dh,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Lh,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Oh,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Rh,e)},writeBytesField:function(t,e){this.writeTag(t,Mr.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Mr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Mr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Mr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Mr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Mr.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Mr.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Mr.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Mr.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Mr.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var iu=function(t,e){var i=e.pixelRatio,a=e.version,u=e.stretchX,c=e.stretchY,h=e.content;this.paddedRect=t,this.pixelRatio=i,this.stretchX=u,this.stretchY=c,this.content=h,this.version=a},Tl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Tl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Tl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Tl.tlbr.get=function(){return this.tl.concat(this.br)},Tl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(iu.prototype,Tl);var El=function(t,e){var i={},a={};this.haveRenderCallbacks=[];var u=[];this.addImages(t,i,u),this.addImages(e,a,u);var c=Vc(u),_=new so({width:c.w||1,height:c.h||1});for(var T in t){var C=t[T],M=i[T].paddedRect;so.copy(C.data,_,{x:0,y:0},{x:M.x+1,y:M.y+1},C.data)}for(var R in e){var O=e[R],B=a[R].paddedRect,Y=B.x+1,it=B.y+1,ot=O.data.width,Tt=O.data.height;so.copy(O.data,_,{x:0,y:0},{x:Y,y:it},O.data),so.copy(O.data,_,{x:0,y:Tt-1},{x:Y,y:it-1},{width:ot,height:1}),so.copy(O.data,_,{x:0,y:0},{x:Y,y:it+Tt},{width:ot,height:1}),so.copy(O.data,_,{x:ot-1,y:0},{x:Y-1,y:it},{width:1,height:Tt}),so.copy(O.data,_,{x:0,y:0},{x:Y+ot,y:it},{width:1,height:Tt})}this.image=_,this.iconPositions=i,this.patternPositions=a};El.prototype.addImages=function(t,e,i){for(var a in t){var u=t[a],c={x:0,y:0,w:u.data.width+2,h:u.data.height+2};i.push(c),e[a]=new iu(c,u),u.hasRenderCallback&&this.haveRenderCallbacks.push(a)}},El.prototype.patchUpdatedImages=function(t,e){for(var i in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)},El.prototype.patchUpdatedImage=function(t,e,i){if(t&&e&&t.version!==e.version){t.version=e.version;var a=t.tl;i.update(e.data,void 0,{x:a[0],y:a[1]})}},oe("ImagePosition",iu),oe("ImageAtlas",El);var To={horizontal:1,vertical:2,horizontalOnly:3},Xs=function(){this.scale=1,this.fontStack="",this.imageName=null};Xs.forText=function(t,e){var i=new Xs;return i.scale=t||1,i.fontStack=e,i},Xs.forImage=function(t){var e=new Xs;return e.imageName=t,e};var Yn=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ru(t,e,i,a,u,c,h,m,_,T,C,M,R,O,B,Y){var it,ot=Yn.fromFeature(t,u);M===To.vertical&&ot.verticalizePunctuation();var Tt=kn.processBidirectionalText,wt=kn.processStyledBidirectionalText;if(Tt&&1===ot.sections.length){it=[];for(var It=0,qt=Tt(ot.toString(),Vu(ot,T,c,e,a,O,B));It<qt.length;It+=1){var Jt=qt[It],Gt=new Yn;Gt.text=Jt,Gt.sections=ot.sections;for(var be=0;be<Jt.length;be++)Gt.sectionIndex.push(0);it.push(Gt)}}else if(wt){it=[];for(var He=0,Oe=wt(ot.text,ot.sectionIndex,Vu(ot,T,c,e,a,O,B));He<Oe.length;He+=1){var Ke=Oe[He],Re=new Yn;Re.text=Ke[0],Re.sectionIndex=Ke[1],Re.sections=ot.sections,it.push(Re)}}else it=function(ki,gr){for(var Qi=[],mi=ki.text,Ai=0,Oi=0,bi=gr;Oi<bi.length;Oi+=1){var Pi=bi[Oi];Qi.push(ki.substring(Ai,Pi)),Ai=Pi}return Ai<mi.length&&Qi.push(ki.substring(Ai,mi.length)),Qi}(ot,Vu(ot,T,c,e,a,O,B));var Ee=[],pe={positionedLines:Ee,text:ot.toString(),top:C[1],bottom:C[1],left:C[0],right:C[0],writingMode:M,iconsInText:!1,verticalizable:!1};return function(ki,gr,Qi,mi,Ai,Oi,bi,Pi,rr,Fr,Vr,Un){for(var Nn=0,nn=-17,wn=0,Pn=0,jn="right"===Pi?1:"left"===Pi?0:.5,yn=0,Ur=0,Jr=Ai;Ur<Jr.length;Ur+=1){var Bi=Jr[Ur];Bi.trim();var dr=Bi.getMaxScale(),Dr=24*(dr-1),Lr={positionedGlyphs:[],lineOffset:0};ki.positionedLines[yn]=Lr;var gn=Lr.positionedGlyphs,wr=0;if(Bi.length()){for(var Mn=0;Mn<Bi.length();Mn++){var qr=Bi.getSection(Mn),xa=Bi.getSectionIndex(Mn),Vn=Bi.getCharCode(Mn),Jn=0,Vo=null,Sn=null,oa=null,Da=24,ba=!(rr===To.horizontal||!Vr&&!Bn(Vn)||Vr&&(nu[Vn]||(ms=Vn,ce.Arabic(ms)||ce["Arabic Supplement"](ms)||ce["Arabic Extended-A"](ms)||ce["Arabic Presentation Forms-A"](ms)||ce["Arabic Presentation Forms-B"](ms))));if(qr.imageName){var Pl=mi[qr.imageName];if(!Pl)continue;oa=qr.imageName,ki.iconsInText=ki.iconsInText||!0,Sn=Pl.paddedRect;var La=Pl.displaySize;qr.scale=24*qr.scale/Un,Jn=Dr+(24-La[1]*qr.scale),Da=(Vo={width:La[0],height:La[1],left:1,top:-3,advance:ba?La[1]:La[0]}).advance;var rl=ba?La[0]*qr.scale-24*dr:La[1]*qr.scale-24*dr;rl>0&&rl>wr&&(wr=rl)}else{var du=Qi[qr.fontStack],nl=du&&du[Vn];if(nl&&nl.rect)Sn=nl.rect,Vo=nl.metrics;else{var Ml=gr[qr.fontStack],fu=Ml&&Ml[Vn];if(!fu)continue;Vo=fu.metrics}Jn=24*(dr-qr.scale)}ba?(ki.verticalizable=!0,gn.push({glyph:Vn,imageName:oa,x:Nn,y:nn+Jn,vertical:ba,scale:qr.scale,fontStack:qr.fontStack,sectionIndex:xa,metrics:Vo,rect:Sn}),Nn+=Da*qr.scale+Fr):(gn.push({glyph:Vn,imageName:oa,x:Nn,y:nn+Jn,vertical:ba,scale:qr.scale,fontStack:qr.fontStack,sectionIndex:xa,metrics:Vo,rect:Sn}),Nn+=Vo.advance*qr.scale+Fr)}0!==gn.length&&(wn=Math.max(Nn-Fr,wn),jh(gn,0,gn.length-1,jn,wr)),Nn=0;var Dl=Oi*dr+wr;Lr.lineOffset=Math.max(wr,Dr),nn+=Dl,Pn=Math.max(Dl,Pn),++yn}else nn+=Oi,++yn}var ms,As=nn- -17,ys=qu(bi),ol=ys.horizontalAlign,Ll=ys.verticalAlign;(function(mu,Qu,Ol,Rl,yu,gu,al,vu,Bl){var sl,_u=(Qu-Ol)*yu;sl=gu!==al?-vu*Rl- -17:(-Rl*Bl+.5)*al;for(var ll=0,Fl=mu;ll<Fl.length;ll+=1)for(var zs=0,Ul=Fl[ll].positionedGlyphs;zs<Ul.length;zs+=1){var ul=Ul[zs];ul.x+=_u,ul.y+=sl}})(ki.positionedLines,jn,ol,Ll,wn,Pn,Oi,As,Ai.length),ki.top+=-Ll*As,ki.bottom=ki.top+As,ki.left+=-ol*wn,ki.right=ki.left+wn}(pe,e,i,a,it,h,m,_,M,T,R,Y),!function(ki){for(var gr=0,Qi=ki;gr<Qi.length;gr+=1)if(0!==Qi[gr].positionedGlyphs.length)return!1;return!0}(Ee)&&pe}Yn.fromFeature=function(t,e){for(var i=new Yn,a=0;a<t.sections.length;a++){var u=t.sections[a];u.image?i.addImageSection(u):i.addTextSection(u,e)}return i},Yn.prototype.length=function(){return this.text.length},Yn.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Yn.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},Yn.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Yn.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",i=0;i<t.length;i++){var a=t.charCodeAt(i+1)||null,u=t.charCodeAt(i-1)||null;a&&fn(a)&&!Sl[t[i+1]]||u&&fn(u)&&!Sl[t[i-1]]||!Sl[t[i]]?e+=t[i]:e+=Sl[t[i]]}return e}(this.text)},Yn.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&nu[this.text.charCodeAt(e)];e++)t++;for(var i=this.text.length,a=this.text.length-1;a>=0&&a>=t&&nu[this.text.charCodeAt(a)];a--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)},Yn.prototype.substring=function(t,e){var i=new Yn;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i},Yn.prototype.toString=function(){return this.text},Yn.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,i){return Math.max(e,t.sections[i].scale)},0)},Yn.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(Xs.forText(t.scale,t.fontStack||e));for(var i=this.sections.length-1,a=0;a<t.text.length;++a)this.sectionIndex.push(i)},Yn.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(Xs.forImage(e)),this.sectionIndex.push(this.sections.length-1)):ae("Reached maximum number of images 6401")}else ae("Can't add FormattedSection with an empty image.")},Yn.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var nu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},mo={};function qc(t,e,i,a,u,c){if(e.imageName){var h=a[e.imageName];return h?h.displaySize[0]*e.scale*24/c+u:0}var m=i[e.fontStack],_=m&&m[t];return _?_.metrics.advance*e.scale+u:0}function Hc(t,e,i,a){var u=Math.pow(t-e,2);return a?t<e?u/2:2*u:u+Math.abs(i)*i}function Nh(t,e,i){var a=0;return 10===t&&(a-=1e4),i&&(a+=150),40!==t&&65288!==t||(a+=50),41!==e&&65289!==e||(a+=50),a}function Zc(t,e,i,a,u,c){for(var h=null,m=Hc(e,i,u,c),_=0,T=a;_<T.length;_+=1){var C=T[_],M=Hc(e-C.x,i,u,c)+C.badness;M<=m&&(h=C,m=M)}return{index:t,x:e,priorBreak:h,badness:m}}function Vu(t,e,i,a,u,c,h){if("point"!==c)return[];if(!t)return[];for(var m,_=[],T=function(it,ot,Tt,wt,It,qt){for(var Jt=0,Gt=0;Gt<it.length();Gt++){var be=it.getSection(Gt);Jt+=qc(it.getCharCode(Gt),be,wt,It,ot,qt)}return Jt/Math.max(1,Math.ceil(Jt/Tt))}(t,e,i,a,u,h),C=t.text.indexOf("\u200b")>=0,M=0,R=0;R<t.length();R++){var O=t.getSection(R),B=t.getCharCode(R);if(nu[B]||(M+=qc(B,O,a,u,e,h)),R<t.length()-1){var Y=!((m=B)<11904||!(ce["Bopomofo Extended"](m)||ce.Bopomofo(m)||ce["CJK Compatibility Forms"](m)||ce["CJK Compatibility Ideographs"](m)||ce["CJK Compatibility"](m)||ce["CJK Radicals Supplement"](m)||ce["CJK Strokes"](m)||ce["CJK Symbols and Punctuation"](m)||ce["CJK Unified Ideographs Extension A"](m)||ce["CJK Unified Ideographs"](m)||ce["Enclosed CJK Letters and Months"](m)||ce["Halfwidth and Fullwidth Forms"](m)||ce.Hiragana(m)||ce["Ideographic Description Characters"](m)||ce["Kangxi Radicals"](m)||ce["Katakana Phonetic Extensions"](m)||ce.Katakana(m)||ce["Vertical Forms"](m)||ce["Yi Radicals"](m)||ce["Yi Syllables"](m)));(mo[B]||Y||O.imageName)&&_.push(Zc(R+1,M,T,_,Nh(B,t.getCharCode(R+1),Y&&C),!1))}}return function it(ot){return ot?it(ot.priorBreak).concat(ot.index):[]}(Zc(t.length(),M,T,_,0,!0))}function qu(t){var e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function jh(t,e,i,a,u){if(a||u)for(var c=t[i],m=(t[i].x+c.metrics.advance*c.scale)*a,_=e;_<=i;_++)t[_].x-=m,t[_].y+=u}function Wc(t,e,i,a,u,c){var h,m=t.image;if(m.content){var _=m.content,T=m.pixelRatio||1;h=[_[0]/T,_[1]/T,m.displaySize[0]-_[2]/T,m.displaySize[1]-_[3]/T]}var C,M,R,O,B=e.left*c,Y=e.right*c;"width"===i||"both"===i?(O=u[0]+B-a[3],M=u[0]+Y+a[1]):M=(O=u[0]+(B+Y-m.displaySize[0])/2)+m.displaySize[0];var it=e.top*c,ot=e.bottom*c;return"height"===i||"both"===i?(C=u[1]+it-a[0],R=u[1]+ot+a[2]):R=(C=u[1]+(it+ot-m.displaySize[1])/2)+m.displaySize[1],{image:m,top:C,right:M,bottom:R,left:O,collisionPadding:h}}mo[10]=!0,mo[32]=!0,mo[38]=!0,mo[40]=!0,mo[41]=!0,mo[43]=!0,mo[45]=!0,mo[47]=!0,mo[173]=!0,mo[183]=!0,mo[8203]=!0,mo[8208]=!0,mo[8211]=!0,mo[8231]=!0;var $s=function(t){function e(i,a,u,c){t.call(this,i,a),this.angle=u,void 0!==c&&(this.segment=c)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(et);oe("Anchor",$s);var _a=128;function Hu(t,e){var i=e.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new Pr(t+1))};if("source"===i.kind)return{kind:"source"};for(var a=i.zoomStops,u=i.interpolationType,c=0;c<a.length&&a[c]<=t;)c++;for(var h=c=Math.max(0,c-1);h<a.length&&a[h]<t+1;)h++;h=Math.min(a.length-1,h);var m=a[c],_=a[h];return"composite"===i.kind?{kind:"composite",minZoom:m,maxZoom:_,interpolationType:u}:{kind:"camera",minZoom:m,maxZoom:_,minSize:i.evaluate(new Pr(m)),maxSize:i.evaluate(new Pr(_)),interpolationType:u}}function Gc(t,e,i){var a=e.uSize,c=i.lowerSize;return"source"===t.kind?c/_a:"composite"===t.kind?$r(c/_a,i.upperSize/_a,e.uSizeT):a}function Xc(t,e){var i=0,a=0;if("constant"===t.kind)a=t.layoutSize;else if("source"!==t.kind){var u=t.interpolationType,m=u?Yt(z.interpolationFactor(u,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?a=$r(t.minSize,t.maxSize,m):i=m}return{uSizeT:i,uSize:a}}var Vh=Object.freeze({__proto__:null,getSizeData:Hu,evaluateSizeForFeature:Gc,evaluateSizeForZoom:Xc,SIZE_PACK_FACTOR:_a});function $c(t,e,i,a,u){if(void 0===e.segment)return!0;for(var c=e,h=e.segment+1,m=0;m>-i/2;){if(--h<0)return!1;m-=t[h].dist(c),c=t[h]}m+=t[h].dist(t[h+1]),h++;for(var _=[],T=0;m<i/2;){var M=t[h],R=t[h+1];if(!R)return!1;var O=t[h-1].angleTo(M)-M.angleTo(R);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),_.push({distance:m,angleDelta:O}),T+=O;m-_[0].distance>a;)T-=_.shift().angleDelta;if(T>u)return!1;h++,m+=M.dist(R)}return!0}function Kc(t){for(var e=0,i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function Yc(t,e,i){return t?.6*e*i:0}function Jc(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function qh(t,e,i,a,u,c){for(var h=Yc(i,u,c),m=Jc(i,a)*c,_=0,T=Kc(t)/2,C=0;C<t.length-1;C++){var M=t[C],R=t[C+1],O=M.dist(R);if(_+O>T){var B=(T-_)/O,Y=$r(M.x,R.x,B),it=$r(M.y,R.y,B),ot=new $s(Y,it,R.angleTo(M),C);return ot._round(),!h||$c(t,ot,m,h,e)?ot:void 0}_+=O}}function Hh(t,e,i,a,u,c,h,m,_){var T=Yc(a,c,h),C=Jc(a,u),M=C*h,R=0===t[0].x||t[0].x===_||0===t[0].y||t[0].y===_;return e-M<e/4&&(e=M+e/4),function O(B,Y,it,ot,Tt,wt,It,qt,Jt){for(var Gt=wt/2,be=Kc(B),He=0,Oe=Y-it,Ke=[],Re=0;Re<B.length-1;Re++){for(var Ee=B[Re],pe=B[Re+1],ki=Ee.dist(pe),gr=pe.angleTo(Ee);Oe+it<He+ki;){var Qi=((Oe+=it)-He)/ki,mi=$r(Ee.x,pe.x,Qi),Ai=$r(Ee.y,pe.y,Qi);if(mi>=0&&mi<Jt&&Ai>=0&&Ai<Jt&&Oe-Gt>=0&&Oe+Gt<=be){var Oi=new $s(mi,Ai,gr,Re);Oi._round(),ot&&!$c(B,Oi,wt,ot,Tt)||Ke.push(Oi)}}He+=ki}return qt||Ke.length||It||(Ke=O(B,He/2,it,ot,Tt,wt,It,!0,Jt)),Ke}(t,R?e/2*m%e:(C/2+2*c)*h*m%e,e,T,i,M,R,!1,_)}function Qc(t,e,i,a){var u=[],c=t.image,h=c.pixelRatio,m=c.paddedRect.w-2,_=c.paddedRect.h-2,T=t.right-t.left,C=t.bottom-t.top,M=c.stretchX||[[0,m]],R=c.stretchY||[[0,_]],O=function(Oi,bi){return Oi+bi[1]-bi[0]},B=M.reduce(O,0),Y=R.reduce(O,0),it=m-B,ot=_-Y,Tt=0,wt=B,It=0,qt=Y,Jt=0,Gt=it,be=0,He=ot;if(c.content&&a){var Oe=c.content;Tt=ou(M,0,Oe[0]),It=ou(R,0,Oe[1]),wt=ou(M,Oe[0],Oe[2]),qt=ou(R,Oe[1],Oe[3]),Jt=Oe[0]-Tt,be=Oe[1]-It,Gt=Oe[2]-Oe[0]-wt,He=Oe[3]-Oe[1]-qt}var Ke=function(Oi,bi,Pi,rr){var Fr=au(Oi.stretch-Tt,wt,T,t.left),Vr=su(Oi.fixed-Jt,Gt,Oi.stretch,B),Un=au(bi.stretch-It,qt,C,t.top),Nn=su(bi.fixed-be,He,bi.stretch,Y),nn=au(Pi.stretch-Tt,wt,T,t.left),wn=su(Pi.fixed-Jt,Gt,Pi.stretch,B),Pn=au(rr.stretch-It,qt,C,t.top),jn=su(rr.fixed-be,He,rr.stretch,Y),yn=new et(Fr,Un),Ur=new et(nn,Un),Jr=new et(nn,Pn),Bi=new et(Fr,Pn),dr=new et(Vr/h,Nn/h),Dr=new et(wn/h,jn/h),Lr=e*Math.PI/180;if(Lr){var gn=Math.sin(Lr),wr=Math.cos(Lr),Mn=[wr,-gn,gn,wr];yn._matMult(Mn),Ur._matMult(Mn),Bi._matMult(Mn),Jr._matMult(Mn)}var qr=Oi.stretch+Oi.fixed,Vn=bi.stretch+bi.fixed;return{tl:yn,tr:Ur,bl:Bi,br:Jr,tex:{x:c.paddedRect.x+1+qr,y:c.paddedRect.y+1+Vn,w:Pi.stretch+Pi.fixed-qr,h:rr.stretch+rr.fixed-Vn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:dr,pixelOffsetBR:Dr,minFontScaleX:Gt/h/T,minFontScaleY:He/h/C,isSDF:i}};if(a&&(c.stretchX||c.stretchY))for(var Re=tp(M,it,B),Ee=tp(R,ot,Y),pe=0;pe<Re.length-1;pe++)for(var ki=Re[pe],gr=Re[pe+1],Qi=0;Qi<Ee.length-1;Qi++)u.push(Ke(ki,Ee[Qi],gr,Ee[Qi+1]));else u.push(Ke({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:m+1},{fixed:0,stretch:_+1}));return u}function ou(t,e,i){for(var a=0,u=0,c=t;u<c.length;u+=1){var h=c[u];a+=Math.max(e,Math.min(i,h[1]))-Math.max(e,Math.min(i,h[0]))}return a}function tp(t,e,i){for(var a=[{fixed:-1,stretch:0}],u=0,c=t;u<c.length;u+=1){var h=c[u],m=h[0],_=h[1],T=a[a.length-1];a.push({fixed:m-T.stretch,stretch:T.stretch}),a.push({fixed:m-T.stretch,stretch:T.stretch+(_-m)})}return a.push({fixed:e+1,stretch:i}),a}function au(t,e,i,a){return t/e*i+a}function su(t,e,i,a){return t-e*i/a}var Il=function(t,e,i,a,u,c,h,m,_,T,C,M){var R=h.top*m-_,O=h.bottom*m+_,B=h.left*m-_,Y=h.right*m+_,it=h.collisionPadding;if(it&&(B-=it[0]*m,R-=it[1]*m,Y+=it[2]*m,O+=it[3]*m),this.boxStartIndex=t.length,T){var ot=O-R,Tt=Y-B;ot>0&&(ot=Math.max(10*m,ot),this._addLineCollisionCircles(t,e,i,i.segment,Tt,ot,a,u,c,C))}else{if(M){var wt=new et(B,R),It=new et(Y,R),qt=new et(B,O),Jt=new et(Y,O),Gt=M*Math.PI/180;wt._rotate(Gt),It._rotate(Gt),qt._rotate(Gt),Jt._rotate(Gt),B=Math.min(wt.x,It.x,qt.x,Jt.x),Y=Math.max(wt.x,It.x,qt.x,Jt.x),R=Math.min(wt.y,It.y,qt.y,Jt.y),O=Math.max(wt.y,It.y,qt.y,Jt.y)}t.emplaceBack(i.x,i.y,B,R,Y,O,a,u,c,0,0)}this.boxEndIndex=t.length};Il.prototype._addLineCollisionCircles=function(t,e,i,a,u,c,h,m,_,T){var C=c/2,M=Math.floor(u/C)||1,R=1+.4*Math.log(T)/Math.LN2,O=Math.floor(M*R/2),B=-c/2,Y=i,it=a+1,ot=B,Tt=-u/2,wt=Tt-u/4;do{if(--it<0){if(ot>Tt)return;it=0;break}ot-=e[it].dist(Y),Y=e[it]}while(ot>wt);for(var It=e[it].dist(e[it+1]),qt=-O;qt<M+O;qt++){var Jt=qt*C,Gt=Tt+Jt;if(Jt<0&&(Gt+=Jt),Jt>u&&(Gt+=Jt-u),!(Gt<ot)){for(;ot+It<Gt;){if(ot+=It,1+ ++it>=e.length)return;It=e[it].dist(e[it+1])}var be=Gt-ot,He=e[it],Oe=e[it+1].sub(He)._unit()._mult(be)._add(He)._round(),Ke=Math.abs(Gt-B)<C?0:.8*(Gt-B);t.emplaceBack(Oe.x,Oe.y,-c/2,-c/2,c/2,c/2,h,m,_,c/2,Ke)}}};var Ys=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Zh),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Zh(t,e){return t<e?-1:t>e?1:0}function Wh(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);for(var a=1/0,u=1/0,c=-1/0,h=-1/0,m=t[0],_=0;_<m.length;_++){var T=m[_];(!_||T.x<a)&&(a=T.x),(!_||T.y<u)&&(u=T.y),(!_||T.x>c)&&(c=T.x),(!_||T.y>h)&&(h=T.y)}var R=Math.min(c-a,h-u),O=R/2,B=new Ys([],Gh);if(0===R)return new et(a,u);for(var Y=a;Y<c;Y+=R)for(var it=u;it<h;it+=R)B.push(new Js(Y+O,it+O,O,t));for(var ot=function(It){for(var qt=0,Jt=0,Gt=0,be=It[0],He=0,Oe=be.length,Ke=Oe-1;He<Oe;Ke=He++){var Re=be[He],Ee=be[Ke],pe=Re.x*Ee.y-Ee.x*Re.y;Jt+=(Re.x+Ee.x)*pe,Gt+=(Re.y+Ee.y)*pe,qt+=3*pe}return new Js(Jt/qt,Gt/qt,0,It)}(t),Tt=B.length;B.length;){var wt=B.pop();(wt.d>ot.d||!ot.d)&&(ot=wt,i&&console.log("found best %d after %d probes",Math.round(1e4*wt.d)/1e4,Tt)),wt.max-ot.d<=e||(B.push(new Js(wt.p.x-(O=wt.h/2),wt.p.y-O,O,t)),B.push(new Js(wt.p.x+O,wt.p.y-O,O,t)),B.push(new Js(wt.p.x-O,wt.p.y+O,O,t)),B.push(new Js(wt.p.x+O,wt.p.y+O,O,t)),Tt+=4)}return i&&(console.log("num probes: "+Tt),console.log("best distance: "+ot.d)),ot.p}function Gh(t,e){return e.max-t.max}function Js(t,e,i,a){this.p=new et(t,e),this.h=i,this.d=function(u,c){for(var h=!1,m=1/0,_=0;_<c.length;_++)for(var T=c[_],C=0,M=T.length,R=M-1;C<M;R=C++){var O=T[C],B=T[R];O.y>u.y!=B.y>u.y&&u.x<(B.x-O.x)*(u.y-O.y)/(B.y-O.y)+O.x&&(h=!h),m=Math.min(m,dc(u,O,B))}return(h?1:-1)*Math.sqrt(m)}(this.p,a),this.max=this.d+this.h*Math.SQRT2}Ys.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Ys.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Ys.prototype.peek=function(){return this.data[0]},Ys.prototype._up=function(t){for(var e=this.data,i=this.compare,a=e[t];t>0;){var u=t-1>>1,c=e[u];if(i(a,c)>=0)break;e[t]=c,t=u}e[t]=a},Ys.prototype._down=function(t){for(var e=this.data,i=this.compare,a=this.length>>1,u=e[t];t<a;){var c=1+(t<<1),h=e[c],m=c+1;if(m<this.length&&i(e[m],h)<0&&(c=m,h=e[m]),i(h,u)>=0)break;e[t]=h,t=c}e[t]=u};var Zu=Number.POSITIVE_INFINITY;function ep(t,e){return e[1]!==Zu?function(i,a,u){var c=0,h=0;switch(a=Math.abs(a),u=Math.abs(u),i){case"top-right":case"top-left":case"top":h=u-7;break;case"bottom-right":case"bottom-left":case"bottom":h=7-u}switch(i){case"top-right":case"bottom-right":case"right":c=-a;break;case"top-left":case"bottom-left":case"left":c=a}return[c,h]}(t,e[0],e[1]):function(i,a){var u=0,c=0;a<0&&(a=0);var h=a/Math.sqrt(2);switch(i){case"top-right":case"top-left":c=h-7;break;case"bottom-right":case"bottom-left":c=7-h;break;case"bottom":c=7-a;break;case"top":c=a-7}switch(i){case"top-right":case"bottom-right":u=-h;break;case"top-left":case"bottom-left":u=h;break;case"left":u=a;break;case"right":u=-a}return[u,c]}(t,e[0])}function Wu(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var ds=32640;function ip(t,e,i,a,u,c,h,m,_,T,C,M,R,O){var B=function(wt,It,qt,Jt,Gt,be,He,Oe){for(var Ke=Jt.layout.get("text-rotate").evaluate(be,{})*Math.PI/180,Re=[],Ee=0,pe=It.positionedLines;Ee<pe.length;Ee+=1)for(var ki=pe[Ee],gr=0,Qi=ki.positionedGlyphs;gr<Qi.length;gr+=1){var mi=Qi[gr];if(mi.rect){var Ai=mi.rect||{},Oi=4,bi=!0,Pi=1,rr=0,Fr=(Gt||Oe)&&mi.vertical,Vr=mi.metrics.advance*mi.scale/2;if(Oe&&It.verticalizable&&(rr=ki.lineOffset/2-(mi.imageName?-(24-mi.metrics.width*mi.scale)/2:24*(mi.scale-1))),mi.imageName){var nn=He[mi.imageName];bi=nn.sdf,Oi=1/(Pi=nn.pixelRatio)}var wn=Gt?[mi.x+Vr,mi.y]:[0,0],Pn=Gt?[0,0]:[mi.x+Vr+qt[0],mi.y+qt[1]-rr],jn=[0,0];Fr&&(jn=Pn,Pn=[0,0]);var yn=(mi.metrics.left-Oi)*mi.scale-Vr+Pn[0],Ur=(-mi.metrics.top-Oi)*mi.scale+Pn[1],Jr=yn+Ai.w*mi.scale/Pi,Bi=Ur+Ai.h*mi.scale/Pi,dr=new et(yn,Ur),Dr=new et(Jr,Ur),Lr=new et(yn,Bi),gn=new et(Jr,Bi);if(Fr){var wr=new et(-Vr,Vr- -17),Mn=-Math.PI/2,qr=12-Vr,Vn=new et(22-qr,-(mi.imageName?qr:0)),Jn=new(Function.prototype.bind.apply(et,[null].concat(jn)));dr._rotateAround(Mn,wr)._add(Vn)._add(Jn),Dr._rotateAround(Mn,wr)._add(Vn)._add(Jn),Lr._rotateAround(Mn,wr)._add(Vn)._add(Jn),gn._rotateAround(Mn,wr)._add(Vn)._add(Jn)}if(Ke){var Vo=Math.sin(Ke),Sn=Math.cos(Ke),oa=[Sn,-Vo,Vo,Sn];dr._matMult(oa),Dr._matMult(oa),Lr._matMult(oa),gn._matMult(oa)}var Da=new et(0,0),ba=new et(0,0);Re.push({tl:dr,tr:Dr,bl:Lr,br:gn,tex:Ai,writingMode:It.writingMode,glyphOffset:wn,sectionIndex:mi.sectionIndex,isSDF:bi,pixelOffsetTL:Da,pixelOffsetBR:ba,minFontScaleX:0,minFontScaleY:0})}}return Re}(0,i,m,u,c,h,a,t.allowVerticalPlacement),Y=t.textSizeData,it=null;"source"===Y.kind?(it=[_a*u.layout.get("text-size").evaluate(h,{})])[0]>ds&&ae(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Y.kind&&((it=[_a*O.compositeTextSizes[0].evaluate(h,{}),_a*O.compositeTextSizes[1].evaluate(h,{})])[0]>ds||it[1]>ds)&&ae(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,B,it,m,c,h,T,e,_.lineStartIndex,_.lineLength,R);for(var ot=0,Tt=C;ot<Tt.length;ot+=1)M[Tt[ot]]=t.text.placedSymbolArray.length-1;return 4*B.length}function rp(t){for(var e in t)return t[e];return null}function Xh(t,e,i,a){var u=t.compareText;if(e in u){for(var c=u[e],h=c.length-1;h>=0;h--)if(a.dist(c[h])<i)return!0}else u[e]=[];return u[e].push(a),!1}var $h=Zs.VectorTileFeature.types,Kh=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lu(t,e,i,a,u,c,h,m,_,T,C,M,R){var O=m?Math.min(ds,Math.round(m[0])):0,B=m?Math.min(ds,Math.round(m[1])):0;t.emplaceBack(e,i,Math.round(32*a),Math.round(32*u),c,h,(O<<1)+(_?1:0),B,16*T,16*C,256*M,256*R)}function Gu(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function Yh(t){for(var e=0,i=t.sections;e<i.length;e+=1)if(Mo(i[e].text))return!0;return!1}var Al=function(t){this.layoutVertexArray=new W,this.indexArray=new De,this.programConfigurations=t,this.segments=new Er,this.dynamicLayoutVertexArray=new G,this.opacityVertexArray=new H,this.placedSymbolArray=new vi};Al.prototype.upload=function(t,e,i,a){i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Nu.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Eh.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Kh,!0),this.opacityVertexBuffer.itemSize=1),(i||a)&&this.programConfigurations.upload(t)},Al.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},oe("SymbolBuffers",Al);var Es=function(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new Er,this.collisionVertexArray=new _t};Es.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Ch.members,!0)},Es.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},oe("CollisionBuffers",Es);var yr=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(h){return h.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasPaintOverrides=!1,this.hasRTLText=!1,this.sortKeyRanges=[];var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Hu(this.zoom,e["text-size"]),this.iconSizeData=Hu(this.zoom,e["icon-size"]);var i=this.layers[0].layout,a=i.get("symbol-sort-key"),u=i.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==u&&void 0!==a.constantOr(1),this.sortFeaturesByY=("viewport-y"===u||"auto"===u&&!this.sortFeaturesByKey)&&(i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement")),"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(function(h){return To[h]})),this.stateDependentLayerIds=this.layers.filter(function(h){return h.isStateDependent()}).map(function(h){return h.id}),this.sourceID=t.sourceID};yr.prototype.createArrays=function(){this.hasPaintOverrides=np.hasPaintOverrides(this.layers[0].layout),this.text=new Al(new So(Nu.members,this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Al(new So(Nu.members,this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.textCollisionBox=new Es(ut,Lc.members,Ce),this.iconCollisionBox=new Es(ut,Lc.members,Ce),this.textCollisionCircle=new Es(ut,Oc.members,De),this.iconCollisionCircle=new Es(ut,Oc.members,De),this.glyphOffsetArray=new hr,this.lineVertexArray=new $i,this.symbolInstances=new lr},yr.prototype.calculateGlyphDependencies=function(t,e,i,a,u){for(var c=0;c<t.length;c++)if(e[t.charCodeAt(c)]=!0,(i||a)&&u){var h=Sl[t.charAt(c)];h&&(e[h.charCodeAt(0)]=!0)}},yr.prototype.populate=function(t,e){var i=this.layers[0],a=i.layout,u=a.get("text-font"),c=a.get("text-field"),h=a.get("icon-image"),m=("constant"!==c.value.kind||c.value.value instanceof mr&&!c.value.value.isEmpty()||c.value.value.toString().length>0)&&("constant"!==u.value.kind||u.value.value.length>0),_=("constant"!==h.value.kind||!!h.value.value)&&Object.keys(h.parameters).length>0,T=a.get("symbol-sort-key");if(this.features=[],m||_){for(var C=e.iconDependencies,M=e.glyphDependencies,R=e.availableImages,O=new Pr(this.zoom),B=0,Y=t;B<Y.length;B+=1){var it=Y[B],ot=it.feature,Tt=it.id,wt=it.index,It=it.sourceLayerIndex;if(i._featureFilter(O,ot)){var qt=void 0;if(m){var Jt=i.getValueAndResolveTokens("text-field",ot,R),Gt=mr.factory(Jt);Yh(Gt)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===_s()||this.hasRTLText&&kn.isParsed())&&(qt=Ih(Gt,i,ot))}var be=void 0;if(_){var He=i.getValueAndResolveTokens("icon-image",ot,R);be=He instanceof Rr?He:Rr.fromString(He)}if(qt||be){var Oe=this.sortFeaturesByKey?T.evaluate(ot,{}):void 0,Ke={id:Tt,text:qt,icon:be,index:wt,sourceLayerIndex:It,geometry:js(ot),properties:ot.properties,type:$h[ot.type],sortKey:Oe};if(this.features.push(Ke),be&&(C[be.name]=!0),qt){var Re=u.evaluate(ot,{}).join(","),Ee="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(To.vertical)>=0;for(var pe=0,ki=qt.sections;pe<ki.length;pe+=1){var gr=ki[pe];if(gr.image)C[gr.image.name]=!0;else{var Qi=co(qt.toString()),mi=gr.fontStack||Re,Ai=M[mi]=M[mi]||{};this.calculateGlyphDependencies(gr.text,Ai,Ee,this.allowVerticalPlacement,Qi)}}}}}}"line"===a.get("symbol-placement")&&(this.features=function(Oi){var bi={},Pi={},rr=[],Fr=0;function Vr(Dr){rr.push(Oi[Dr]),Fr++}function Un(Dr,Lr,gn){var wr=Pi[Dr];return delete Pi[Dr],Pi[Lr]=wr,rr[wr].geometry[0].pop(),rr[wr].geometry[0]=rr[wr].geometry[0].concat(gn[0]),wr}function Nn(Dr,Lr,gn){var wr=bi[Lr];return delete bi[Lr],bi[Dr]=wr,rr[wr].geometry[0].shift(),rr[wr].geometry[0]=gn[0].concat(rr[wr].geometry[0]),wr}function nn(Dr,Lr,gn){var wr=gn?Lr[0][Lr[0].length-1]:Lr[0][0];return Dr+":"+wr.x+":"+wr.y}for(var wn=0;wn<Oi.length;wn++){var Pn=Oi[wn],jn=Pn.geometry,yn=Pn.text?Pn.text.toString():null;if(yn){var Ur=nn(yn,jn),Jr=nn(yn,jn,!0);if(Ur in Pi&&Jr in bi&&Pi[Ur]!==bi[Jr]){var Bi=Nn(Ur,Jr,jn),dr=Un(Ur,Jr,rr[Bi].geometry);delete bi[Ur],delete Pi[Jr],Pi[nn(yn,rr[dr].geometry,!0)]=dr,rr[Bi].geometry=null}else Ur in Pi?Un(Ur,Jr,jn):Jr in bi?Nn(Ur,Jr,jn):(Vr(wn),bi[Ur]=Fr-1,Pi[Jr]=Fr-1)}else Vr(wn)}return rr.filter(function(Dr){return Dr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Oi,bi){return Oi.sortKey-bi.sortKey})}},yr.prototype.update=function(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))},yr.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},yr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},yr.prototype.upload=function(t){this.uploaded||(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t),this.textCollisionCircle.upload(t),this.iconCollisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},yr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.textCollisionBox.destroy(),this.iconCollisionBox.destroy(),this.textCollisionCircle.destroy(),this.iconCollisionCircle.destroy()},yr.prototype.addToLineVertexArray=function(t,e){var i=this.lineVertexArray.length;if(void 0!==t.segment){for(var a=t.dist(e[t.segment+1]),u=t.dist(e[t.segment]),c={},h=t.segment+1;h<e.length;h++)c[h]={x:e[h].x,y:e[h].y,tileUnitDistanceFromAnchor:a},h<e.length-1&&(a+=e[h+1].dist(e[h]));for(var m=t.segment||0;m>=0;m--)c[m]={x:e[m].x,y:e[m].y,tileUnitDistanceFromAnchor:u},m>0&&(u+=e[m-1].dist(e[m]));for(var _=0;_<e.length;_++){var T=c[_];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},yr.prototype.addSymbols=function(t,e,i,a,u,c,h,m,_,T,C){var M=this,R=t.indexArray,O=t.layoutVertexArray,B=t.dynamicLayoutVertexArray,Y=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,c.sortKey),it=this.glyphOffsetArray.length,ot=Y.vertexLength,Tt=this.allowVerticalPlacement&&h===To.vertical?Math.PI/2:0,wt=function(pe){var ki=pe.tl,gr=pe.tr,Qi=pe.bl,mi=pe.br,Ai=pe.tex,Oi=pe.pixelOffsetTL,bi=pe.pixelOffsetBR,Pi=pe.minFontScaleX,rr=pe.minFontScaleY,Fr=Y.vertexLength,Vr=pe.glyphOffset[1];lu(O,m.x,m.y,ki.x,Vr+ki.y,Ai.x,Ai.y,i,pe.isSDF,Oi.x,Oi.y,Pi,rr),lu(O,m.x,m.y,gr.x,Vr+gr.y,Ai.x+Ai.w,Ai.y,i,pe.isSDF,bi.x,Oi.y,Pi,rr),lu(O,m.x,m.y,Qi.x,Vr+Qi.y,Ai.x,Ai.y+Ai.h,i,pe.isSDF,Oi.x,bi.y,Pi,rr),lu(O,m.x,m.y,mi.x,Vr+mi.y,Ai.x+Ai.w,Ai.y+Ai.h,i,pe.isSDF,bi.x,bi.y,Pi,rr),Gu(B,m,Tt),R.emplaceBack(Fr,Fr+1,Fr+2),R.emplaceBack(Fr+1,Fr+2,Fr+3),Y.vertexLength+=4,Y.primitiveLength+=2,M.glyphOffsetArray.emplaceBack(pe.glyphOffset[0])};if(c.text&&c.text.sections){var It=c.text.sections;if(this.hasPaintOverrides){for(var qt,Jt=function(pe,ki){void 0===qt||qt===pe&&!ki||t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,c,c.index,{},It[qt]),qt=pe},Gt=0,be=e;Gt<be.length;Gt+=1){var He=be[Gt];Jt(He.sectionIndex,!1),wt(He)}Jt(qt,!0)}else{for(var Oe=0,Ke=e;Oe<Ke.length;Oe+=1)wt(Ke[Oe]);t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,c,c.index,{},It[0])}}else{for(var Re=0,Ee=e;Re<Ee.length;Re+=1)wt(Ee[Re]);t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,c,c.index,{})}t.placedSymbolArray.emplaceBack(m.x,m.y,it,this.glyphOffsetArray.length-it,ot,_,T,m.segment,i?i[0]:0,i?i[1]:0,a[0],a[1],h,0,!1,0,C)},yr.prototype._addCollisionDebugVertex=function(t,e,i,a,u,c){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,a,u,Math.round(c.x),Math.round(c.y))},yr.prototype.addCollisionDebugVertices=function(t,e,i,a,u,c,h,m){var _=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),T=_.vertexLength,C=u.layoutVertexArray,M=u.collisionVertexArray,R=h.anchorX,O=h.anchorY;if(this._addCollisionDebugVertex(C,M,c,R,O,new et(t,e)),this._addCollisionDebugVertex(C,M,c,R,O,new et(i,e)),this._addCollisionDebugVertex(C,M,c,R,O,new et(i,a)),this._addCollisionDebugVertex(C,M,c,R,O,new et(t,a)),_.vertexLength+=4,m){var B=u.indexArray;B.emplaceBack(T,T+1,T+2),B.emplaceBack(T,T+2,T+3),_.primitiveLength+=2}else{var Y=u.indexArray;Y.emplaceBack(T,T+1),Y.emplaceBack(T+1,T+2),Y.emplaceBack(T+2,T+3),Y.emplaceBack(T+3,T),_.primitiveLength+=4}},yr.prototype.addDebugCollisionBoxes=function(t,e,i,a){for(var u=t;u<e;u++){var c=this.collisionBoxArray.get(u),C=c.radius>0;this.addCollisionDebugVertices(c.x1,c.y1,c.x2,c.y2,C?a?this.textCollisionCircle:this.iconCollisionCircle:a?this.textCollisionBox:this.iconCollisionBox,c.anchorPoint,i,C)}},yr.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},yr.prototype._deserializeCollisionBoxesForSymbol=function(t,e,i,a,u,c,h,m,_){for(var T={},C=e;C<i;C++){var M=t.get(C);if(0===M.radius){T.textBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},T.textFeatureIndex=M.featureIndex;break}T.textCircles||(T.textCircles=[],T.textFeatureIndex=M.featureIndex),T.textCircles.push(M.anchorPointX,M.anchorPointY,M.radius,M.signedDistanceFromAnchor,1)}for(var R=a;R<u;R++){var O=t.get(R);if(0===O.radius){T.verticalTextBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},T.verticalTextFeatureIndex=O.featureIndex;break}}for(var B=c;B<h;B++){var Y=t.get(B);if(0===Y.radius){T.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},T.iconFeatureIndex=Y.featureIndex;break}}for(var it=m;it<_;it++){var ot=t.get(it);if(0===ot.radius){T.verticalIconBox={x1:ot.x1,y1:ot.y1,x2:ot.x2,y2:ot.y2,anchorPointX:ot.anchorPointX,anchorPointY:ot.anchorPointY},T.verticalIconFeatureIndex=ot.featureIndex;break}}return T},yr.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},yr.prototype.hasTextData=function(){return this.text.segments.get().length>0},yr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},yr.prototype.hasTextCollisionBoxData=function(){return this.textCollisionBox.segments.get().length>0},yr.prototype.hasIconCollisionBoxData=function(){return this.iconCollisionBox.segments.get().length>0},yr.prototype.hasTextCollisionCircleData=function(){return this.textCollisionCircle.segments.get().length>0},yr.prototype.hasIconCollisionCircleData=function(){return this.iconCollisionCircle.segments.get().length>0},yr.prototype.addIndicesForPlacedSymbol=function(t,e){for(var i=t.placedSymbolArray.get(e),a=i.vertexStartIndex+4*i.numGlyphs,u=i.vertexStartIndex;u<a;u+=4)t.indexArray.emplaceBack(u,u+1,u+2),t.indexArray.emplaceBack(u+1,u+2,u+3)},yr.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),i=Math.cos(t),a=[],u=[],c=[],h=0;h<this.symbolInstances.length;++h){c.push(h);var m=this.symbolInstances.get(h);a.push(0|Math.round(e*m.anchorX+i*m.anchorY)),u.push(m.featureIndex)}return c.sort(function(_,T){return a[_]-a[T]||u[T]-u[_]}),c},yr.prototype.addToSortKeyRanges=function(t,e){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},yr.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,a=this.symbolInstanceIndexes;i<a.length;i+=1){var c=this.symbolInstances.get(a[i]);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach(function(h,m,_){h>=0&&_.indexOf(h)===m&&e.addIndicesForPlacedSymbol(e.text,h)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},oe("SymbolBucket",yr,{omit:["layers","collisionBoxArray","features","compareText"]}),yr.MAX_GLYPHS=65535,yr.addDynamicAttributes=Gu;var Jh=new o({"symbol-placement":new Ve(x.layout_symbol["symbol-placement"]),"symbol-spacing":new Ve(x.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ve(x.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new hi(x.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ve(x.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ve(x.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ve(x.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ve(x.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ve(x.layout_symbol["icon-rotation-alignment"]),"icon-size":new hi(x.layout_symbol["icon-size"]),"icon-text-fit":new Ve(x.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ve(x.layout_symbol["icon-text-fit-padding"]),"icon-image":new hi(x.layout_symbol["icon-image"]),"icon-rotate":new hi(x.layout_symbol["icon-rotate"]),"icon-padding":new Ve(x.layout_symbol["icon-padding"]),"icon-keep-upright":new Ve(x.layout_symbol["icon-keep-upright"]),"icon-offset":new hi(x.layout_symbol["icon-offset"]),"icon-anchor":new hi(x.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ve(x.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ve(x.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ve(x.layout_symbol["text-rotation-alignment"]),"text-field":new hi(x.layout_symbol["text-field"]),"text-font":new hi(x.layout_symbol["text-font"]),"text-size":new hi(x.layout_symbol["text-size"]),"text-max-width":new hi(x.layout_symbol["text-max-width"]),"text-line-height":new Ve(x.layout_symbol["text-line-height"]),"text-letter-spacing":new hi(x.layout_symbol["text-letter-spacing"]),"text-justify":new hi(x.layout_symbol["text-justify"]),"text-radial-offset":new hi(x.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ve(x.layout_symbol["text-variable-anchor"]),"text-anchor":new hi(x.layout_symbol["text-anchor"]),"text-max-angle":new Ve(x.layout_symbol["text-max-angle"]),"text-writing-mode":new Ve(x.layout_symbol["text-writing-mode"]),"text-rotate":new hi(x.layout_symbol["text-rotate"]),"text-padding":new Ve(x.layout_symbol["text-padding"]),"text-keep-upright":new Ve(x.layout_symbol["text-keep-upright"]),"text-transform":new hi(x.layout_symbol["text-transform"]),"text-offset":new hi(x.layout_symbol["text-offset"]),"text-allow-overlap":new Ve(x.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ve(x.layout_symbol["text-ignore-placement"]),"text-optional":new Ve(x.layout_symbol["text-optional"])}),uu={paint:new o({"icon-opacity":new hi(x.paint_symbol["icon-opacity"]),"icon-color":new hi(x.paint_symbol["icon-color"]),"icon-halo-color":new hi(x.paint_symbol["icon-halo-color"]),"icon-halo-width":new hi(x.paint_symbol["icon-halo-width"]),"icon-halo-blur":new hi(x.paint_symbol["icon-halo-blur"]),"icon-translate":new Ve(x.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ve(x.paint_symbol["icon-translate-anchor"]),"text-opacity":new hi(x.paint_symbol["text-opacity"]),"text-color":new hi(x.paint_symbol["text-color"],{runtimeType:Nt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new hi(x.paint_symbol["text-halo-color"]),"text-halo-width":new hi(x.paint_symbol["text-halo-width"]),"text-halo-blur":new hi(x.paint_symbol["text-halo-blur"]),"text-translate":new Ve(x.paint_symbol["text-translate"]),"text-translate-anchor":new Ve(x.paint_symbol["text-translate-anchor"])}),layout:Jh},tl=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:nt,this.defaultValue=t};tl.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},tl.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},tl.prototype.possibleOutputs=function(){return[void 0]},tl.prototype.serialize=function(){return null},oe("FormatSectionOverride",tl,{omit:["defaultValue"]});var np=function(t){function e(i){t.call(this,i,uu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(i,a){if(t.prototype.recalculate.call(this,i,a),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var u=this.layout.get("text-writing-mode");if(u){for(var c=[],h=0,m=u;h<m.length;h+=1){var _=m[h];c.indexOf(_)<0&&c.push(_)}this.layout._values["text-writing-mode"]=c}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(i,a,u){var m,c=this.layout.get(i).evaluate(a,{},u),h=this._unevaluatedLayout._values[i];return h.isDataDriven()||to(h.value)||!c?c:(m=a.properties,c.replace(/{([^{}]+)}/g,function(T,C){return C in m?String(m[C]):""}))},e.prototype.createBucket=function(i){return new yr(i)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var i=0,a=uu.paint.overridableProperties;i<a.length;i+=1){var u=a[i];if(e.hasPaintOverride(this.layout,u)){var _,c=this.paint.get(u),h=new tl(c),m=new en(h,c.property.specification);_="constant"===c.value.kind||"source"===c.value.kind?new Hn("source",m):new Xn("composite",m,c.value.zoomStops,c.value._interpolationType),this.paint._values[u]=new io(c.property,_,c.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(i,a,u){return!(!this.layout||a.isDataDriven()||u.isDataDriven())&&e.hasPaintOverride(this.layout,i)},e.hasPaintOverride=function(i,a){var u=i.get("text-field"),c=uu.paint.properties[a],h=!1,m=function(C){for(var M=0,R=C;M<R.length;M+=1)if(c.overrides&&c.overrides.hasOverride(R[M]))return void(h=!0)};if("constant"===u.value.kind&&u.value.value instanceof mr)m(u.value.value.sections);else if("source"===u.value.kind){var _=function(C){h||(C instanceof Hi&&Xi(C.value)===Be?m(C.value.sections):C instanceof qn?m(C.sections):C.eachChild(_))},T=u.value;T._styleExpression&&_(T._styleExpression.expression)}return h},e.hasPaintOverrides=function(i){for(var a=0,u=uu.paint.overridableProperties;a<u.length;a+=1)if(e.hasPaintOverride(i,u[a]))return!0;return!1},e}(n),Qh={paint:new o({"background-color":new Ve(x.paint_background["background-color"]),"background-pattern":new Za(x.paint_background["background-pattern"]),"background-opacity":new Ve(x.paint_background["background-opacity"])})},td=function(t){function e(i){t.call(this,i,Qh)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(n),ed={paint:new o({"raster-opacity":new Ve(x.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ve(x.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ve(x.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ve(x.paint_raster["raster-brightness-max"]),"raster-saturation":new Ve(x.paint_raster["raster-saturation"]),"raster-contrast":new Ve(x.paint_raster["raster-contrast"]),"raster-resampling":new Ve(x.paint_raster["raster-resampling"]),"raster-fade-duration":new Ve(x.paint_raster["raster-fade-duration"])})},id=function(t){function e(i){t.call(this,i,ed)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(n),rd=function(t){function e(i){t.call(this,i,{}),this.implementation=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},e.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},e}(n),nd={circle:Zp,heatmap:Gp,hillshade:$p,fill:ph,"fill-extrusion":xh,line:Th,symbol:np,background:td,raster:id},op=self.HTMLImageElement,ap=self.HTMLCanvasElement,sp=self.HTMLVideoElement,lp=self.ImageData,cu=self.ImageBitmap,Cs=function(t,e,i,a){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,a)};Cs.prototype.update=function(t,e,i){var a=t.width,u=t.height,c=!(this.size&&this.size[0]===a&&this.size[1]===u||i),h=this.context,m=h.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),m.bindTexture(m.TEXTURE_2D,this.texture),h.pixelStoreUnpackFlipY.set(!1),h.pixelStoreUnpack.set(1),h.pixelStoreUnpackPremultiplyAlpha.set(this.format===m.RGBA&&(!e||!1!==e.premultiply)),c)this.size=[a,u],t instanceof op||t instanceof ap||t instanceof sp||t instanceof lp||cu&&t instanceof cu?m.texImage2D(m.TEXTURE_2D,0,this.format,this.format,m.UNSIGNED_BYTE,t):m.texImage2D(m.TEXTURE_2D,0,this.format,a,u,0,this.format,m.UNSIGNED_BYTE,t.data);else{var _=i||{x:0,y:0},T=_.x,C=_.y;t instanceof op||t instanceof ap||t instanceof sp||t instanceof lp||cu&&t instanceof cu?m.texSubImage2D(m.TEXTURE_2D,0,T,C,m.RGBA,m.UNSIGNED_BYTE,t):m.texSubImage2D(m.TEXTURE_2D,0,T,C,a,u,m.RGBA,m.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&m.generateMipmap(m.TEXTURE_2D)},Cs.prototype.bind=function(t,e,i){var a=this.context.gl;a.bindTexture(a.TEXTURE_2D,this.texture),i!==a.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=a.LINEAR),t!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,e),this.wrap=e)},Cs.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Cs.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Xu=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Xu.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1,t._callback()},0))},Xu.prototype.remove=function(){delete this._channel,this._callback=function(){}};var el=function(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ye(["receive","process"],this),this.invoker=new Xu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ht()?t:self};function up(t,e,i){var a=2*Math.PI*6378137/256/Math.pow(2,i);return[t*a-2*Math.PI*6378137/2,e*a-2*Math.PI*6378137/2]}el.prototype.send=function(t,e,i,a,u){var c=this;void 0===u&&(u=!1);var h=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[h]=i);var m=J(this.globalScope)?void 0:[];return this.target.postMessage({id:h,type:t,hasCallback:!!i,targetMapId:a,mustQueue:u,sourceMapId:this.mapId,data:Vi(e,m)},m),{cancel:function(){i&&delete c.callbacks[h],c.target.postMessage({id:h,type:"<cancel>",targetMapId:a,sourceMapId:c.mapId})}}},el.prototype.receive=function(t){var e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];var a=this.cancelCallbacks[i];delete this.cancelCallbacks[i],a&&a()}else ht()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)},el.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},el.prototype.processTask=function(t,e){var i=this;if("<response>"===e.type){var a=this.callbacks[t];delete this.callbacks[t],a&&(e.error?a(Gr(e.error)):a(null,Gr(e.data)))}else{var u=!1,c=J(this.globalScope)?void 0:[],h=e.hasCallback?function(C,M){u=!0,delete i.cancelCallbacks[t],i.target.postMessage({id:t,type:"<response>",sourceMapId:i.mapId,error:C?Vi(C):null,data:Vi(M,c)},c)}:function(C){u=!0},m=null,_=Gr(e.data);if(this.parent[e.type])m=this.parent[e.type](e.sourceMapId,_,h);else if(this.parent.getWorkerSource){var T=e.type.split(".");m=this.parent.getWorkerSource(e.sourceMapId,T[0],_.source)[T[1]](_,h)}else h(new Error("Could not find function "+e.type));!u&&m&&m.cancel&&(this.cancelCallbacks[t]=m.cancel)}},el.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var pn=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};pn.prototype.setNorthEast=function(t){return this._ne=t instanceof jr?new jr(t.lng,t.lat):jr.convert(t),this},pn.prototype.setSouthWest=function(t){return this._sw=t instanceof jr?new jr(t.lng,t.lat):jr.convert(t),this},pn.prototype.extend=function(t){var e,i,a=this._sw,u=this._ne;if(t instanceof jr)e=t,i=t;else{if(!(t instanceof pn))return Array.isArray(t)?t.every(Array.isArray)?this.extend(pn.convert(t)):this.extend(jr.convert(t)):this;if(i=t._ne,!(e=t._sw)||!i)return this}return a||u?(a.lng=Math.min(e.lng,a.lng),a.lat=Math.min(e.lat,a.lat),u.lng=Math.max(i.lng,u.lng),u.lat=Math.max(i.lat,u.lat)):(this._sw=new jr(e.lng,e.lat),this._ne=new jr(i.lng,i.lat)),this},pn.prototype.getCenter=function(){return new jr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},pn.prototype.getSouthWest=function(){return this._sw},pn.prototype.getNorthEast=function(){return this._ne},pn.prototype.getNorthWest=function(){return new jr(this.getWest(),this.getNorth())},pn.prototype.getSouthEast=function(){return new jr(this.getEast(),this.getSouth())},pn.prototype.getWest=function(){return this._sw.lng},pn.prototype.getSouth=function(){return this._sw.lat},pn.prototype.getEast=function(){return this._ne.lng},pn.prototype.getNorth=function(){return this._ne.lat},pn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},pn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},pn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},pn.prototype.contains=function(t){var e=jr.convert(t),i=e.lng,a=e.lat,c=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(c=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&c},pn.convert=function(t){return!t||t instanceof pn?t:new pn(t)};var jr=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};jr.prototype.wrap=function(){return new jr($t(this.lng,-180,180),this.lat)},jr.prototype.toArray=function(){return[this.lng,this.lat]},jr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},jr.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new pn(new jr(this.lng-i,this.lat-e),new jr(this.lng+i,this.lat+e))},jr.convert=function(t){if(t instanceof jr)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new jr(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new jr(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var cp=2*Math.PI*6378137;function pp(t){return cp*Math.cos(t*Math.PI/180)}function hp(t){return(180+t)/360}function dp(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function fp(t,e){return t/pp(e)}function $u(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Is=function(t,e,i){void 0===i&&(i=0),this.x=+t,this.y=+e,this.z=+i};Is.fromLngLat=function(t,e){void 0===e&&(e=0);var i=jr.convert(t);return new Is(hp(i.lng),dp(i.lat),fp(e,i.lat))},Is.prototype.toLngLat=function(){return new jr(360*this.x-180,$u(this.y))},Is.prototype.toAltitude=function(){return this.z*pp($u(this.y))},Is.prototype.meterInMercatorCoordinateUnits=function(){return 1/cp*(t=$u(this.y),1/Math.cos(t*Math.PI/180));var t};var ks=function(t,e,i){this.z=t,this.x=e,this.y=i,this.key=zl(0,t,t,e,i)};ks.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},ks.prototype.url=function(t,e){var i,a,u,c,h,m=(a=this.y,u=this.z,c=up(256*(i=this.x),256*(a=Math.pow(2,u)-a-1),u),h=up(256*(i+1),256*(a+1),u),c[0]+","+c[1]+","+h[0]+","+h[1]),_=function(T,C,M){for(var R,O="",B=T;B>0;B--)O+=(C&(R=1<<B-1)?1:0)+(M&R?2:0);return O}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_).replace("{bbox-epsg-3857}",m)},ks.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new et((t.x*e-this.x)*mn,(t.y*e-this.y)*mn)},ks.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var mp=function(t,e){this.wrap=t,this.canonical=e,this.key=zl(t,e.z,e.z,e.x,e.y)},hn=function(t,e,i,a,u){this.overscaledZ=t,this.wrap=e,this.canonical=new ks(i,+a,+u),this.key=zl(e,t,i,a,u)};function zl(t,e,i,a,u){(t*=2)<0&&(t=-1*t-1);var c=1<<i;return(c*c*t+c*u+a).toString(36)+i.toString(36)+e.toString(36)}hn.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},hn.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new hn(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new hn(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},hn.prototype.calculateScaledKey=function(t,e){var i=this.canonical.z-t;return t>this.canonical.z?zl(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):zl(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)},hn.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},hn.prototype.children=function(t){if(this.overscaledZ>=t)return[new hn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,i=2*this.canonical.x,a=2*this.canonical.y;return[new hn(e,this.wrap,e,i,a),new hn(e,this.wrap,e,i+1,a),new hn(e,this.wrap,e,i,a+1),new hn(e,this.wrap,e,i+1,a+1)]},hn.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},hn.prototype.wrapped=function(){return new hn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},hn.prototype.unwrapTo=function(t){return new hn(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},hn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},hn.prototype.toUnwrapped=function(){return new mp(this.wrap,this.canonical)},hn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},hn.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Is(t.x-this.wrap,t.y))},oe("CanonicalTileID",ks),oe("OverscaledTileID",hn,{omit:["posMatrix"]});var Ka=function(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return ae('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var a=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(var u=0;u<a;u++)this.data[this._idx(-1,u)]=this.data[this._idx(0,u)],this.data[this._idx(a,u)]=this.data[this._idx(a-1,u)],this.data[this._idx(u,-1)]=this.data[this._idx(u,0)],this.data[this._idx(u,a)]=this.data[this._idx(u,a-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)],this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)],this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)]};Ka.prototype.get=function(t,e){var i=new Uint8Array(this.data.buffer),a=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[a],i[a+1],i[a+2])},Ka.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ka.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Ka.prototype._unpackMapbox=function(t,e,i){return(256*t*256+256*e+i)/10-1e4},Ka.prototype._unpackTerrarium=function(t,e,i){return 256*t+e+i/256-32768},Ka.prototype.getPixels=function(){return new so({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ka.prototype.backfillBorder=function(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var a=e*this.dim,u=e*this.dim+this.dim,c=i*this.dim,h=i*this.dim+this.dim;switch(e){case-1:a=u-1;break;case 1:u=a+1}switch(i){case-1:c=h-1;break;case 1:h=c+1}for(var m=-e*this.dim,_=-i*this.dim,T=c;T<h;T++)for(var C=a;C<u;C++)this.data[this._idx(C,T)]=t.data[this._idx(C+m,T+_)]},oe("DEMData",Ka);var pu=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}};pu.prototype.encode=function(t){return this._stringToNumber[t]},pu.prototype.decode=function(t){return this._numberToString[t]};var hu=function(t,e,i,a,u){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=a,this.properties=t.properties,this.id=u},Ku={geometry:{configurable:!0}};Ku.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Ku.geometry.set=function(t){this._geometry=t},hu.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(hu.prototype,Ku);var il=function(){this.state={},this.stateChanges={},this.deletedStates={}};il.prototype.updateState=function(t,e,i){var a=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][a]=this.stateChanges[t][a]||{},vt(this.stateChanges[t][a],i),null===this.deletedStates[t])for(var u in this.deletedStates[t]={},this.state[t])u!==a&&(this.deletedStates[t][u]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][a])for(var c in this.deletedStates[t][a]={},this.state[t][a])i[c]||(this.deletedStates[t][a][c]=null);else for(var h in i)this.deletedStates[t]&&this.deletedStates[t][a]&&null===this.deletedStates[t][a][h]&&delete this.deletedStates[t][a][h]},il.prototype.removeFeatureState=function(t,e,i){if(null!==this.deletedStates[t]){var a=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][a]&&(this.deletedStates[t][a]=this.deletedStates[t][a]||{},this.deletedStates[t][a][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][a])for(i in this.deletedStates[t][a]={},this.stateChanges[t][a])this.deletedStates[t][a][i]=null;else this.deletedStates[t][a]=null;else this.deletedStates[t]=null}},il.prototype.getState=function(t,e){var i=String(e),c=vt({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var h=this.deletedStates[t][e];if(null===h)return{};for(var m in h)delete c[m]}return c},il.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},il.prototype.coalesceChanges=function(t,e){var i={};for(var a in this.stateChanges){this.state[a]=this.state[a]||{};var u={};for(var c in this.stateChanges[a])this.state[a][c]||(this.state[a][c]={}),vt(this.state[a][c],this.stateChanges[a][c]),u[c]=this.state[a][c];i[a]=u}for(var h in this.deletedStates){this.state[h]=this.state[h]||{};var m={};if(null===this.deletedStates[h])for(var _ in this.state[h])m[_]={},this.state[h][_]={};else for(var T in this.deletedStates[h]){if(null===this.deletedStates[h][T])this.state[h][T]={};else for(var C=0,M=Object.keys(this.deletedStates[h][T]);C<M.length;C+=1)delete this.state[h][T][M[C]];m[T]=this.state[h][T]}i[h]=i[h]||{},vt(i[h],m)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var O in t)t[O].setFeatureState(i,e)};var Ya=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Qt(mn,16,0),this.grid3D=new Qt(mn,16,0),this.featureIndexArray=new rn,this.promoteId=e};function yp(t){for(var e=1/0,i=1/0,a=-1/0,u=-1/0,c=0,h=t;c<h.length;c+=1){var m=h[c];e=Math.min(e,m.x),i=Math.min(i,m.y),a=Math.max(a,m.x),u=Math.max(u,m.y)}return{minX:e,minY:i,maxX:a,maxY:u}}function od(t,e){return e-t}Ya.prototype.insert=function(t,e,i,a,u,c){var h=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,a,u);for(var m=c?this.grid3D:this.grid,_=0;_<e.length;_++){for(var T=e[_],C=[1/0,1/0,-1/0,-1/0],M=0;M<T.length;M++){var R=T[M];C[0]=Math.min(C[0],R.x),C[1]=Math.min(C[1],R.y),C[2]=Math.max(C[2],R.x),C[3]=Math.max(C[3],R.y)}C[0]<mn&&C[1]<mn&&C[2]>=0&&C[3]>=0&&m.insert(h,C[0],C[1],C[2],C[3])}},Ya.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Zs.VectorTile(new tu(this.rawTileData)).layers,this.sourceLayerCoder=new pu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ya.prototype.query=function(t,e,i){var a=this;this.loadVTLayers();for(var u=t.params||{},c=mn/t.tileSize/t.scale,h=rs(u.filter),m=t.queryGeometry,_=t.queryPadding*c,T=yp(m),C=this.grid.query(T.minX-_,T.minY-_,T.maxX+_,T.maxY+_),M=yp(t.cameraQueryGeometry),O=0,B=this.grid3D.query(M.minX-_,M.minY-_,M.maxX+_,M.maxY+_,function(It,qt,Jt,Gt){return function(be,He,Oe,Ke,Re){for(var Ee=0,pe=be;Ee<pe.length;Ee+=1){var ki=pe[Ee];if(He<=ki.x&&Oe<=ki.y&&Ke>=ki.x&&Re>=ki.y)return!0}var gr=[new et(He,Oe),new et(He,Re),new et(Ke,Re),new et(Ke,Oe)];if(be.length>2)for(var Qi=0,mi=gr;Qi<mi.length;Qi+=1)if(Vs(be,mi[Qi]))return!0;for(var Ai=0;Ai<be.length-1;Ai++)if(jp(be[Ai],be[Ai+1],gr))return!0;return!1}(t.cameraQueryGeometry,It-_,qt-_,Jt+_,Gt+_)});O<B.length;O+=1)C.push(B[O]);C.sort(od);for(var it,ot={},Tt=function(It){var qt=C[It];if(qt!==it){it=qt;var Jt=a.featureIndexArray.get(qt),Gt=null;a.loadMatchingFeature(ot,Jt.bucketIndex,Jt.sourceLayerIndex,Jt.featureIndex,h,u.layers,e,function(be,He,Oe){Gt||(Gt=js(be));var Ke={};return void 0!==Oe&&(Ke=i.getState(He.sourceLayer||"_geojsonTileLayer",Oe)),He.queryIntersectsFeature(m,be,Ke,Gt,a.z,t.transform,c,t.pixelPosMatrix)})}},wt=0;wt<C.length;wt++)Tt(wt);return ot},Ya.prototype.loadMatchingFeature=function(t,e,i,a,u,c,h,m){var _=this.bucketLayerIDs[e];if(!c||function(Tt,wt){for(var It=0;It<Tt.length;It++)if(wt.indexOf(Tt[It])>=0)return!0;return!1}(c,_)){var T=this.sourceLayerCoder.decode(i),C=this.vtLayers[T].feature(a);if(u(new Pr(this.tileID.overscaledZ),C))for(var M=this.getId(C,T),R=0;R<_.length;R++){var O=_[R];if(!(c&&c.indexOf(O)<0)){var B=h[O];if(B){var Y=!m||m(C,B,M);if(Y){var it=new hu(C,this.z,this.x,this.y,M);it.layer=B.serialize();var ot=t[O];void 0===ot&&(ot=t[O]=[]),ot.push({featureIndex:a,feature:it,intersectionZ:Y})}}}}}},Ya.prototype.lookupSymbolFeatures=function(t,e,i,a,u,c){var h={};this.loadVTLayers();for(var m=rs(a),_=0,T=t;_<T.length;_+=1)this.loadMatchingFeature(h,e,i,T[_],m,u,c);return h},Ya.prototype.hasLayer=function(t){for(var e=0,i=this.bucketLayerIDs;e<i.length;e+=1)for(var a=0,u=i[e];a<u.length;a+=1)if(t===u[a])return!0;return!1},Ya.prototype.getId=function(t,e){var i=t.id;return this.promoteId&&"boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i)),i},oe("FeatureIndex",Ya,{omit:["rawTileData","sourceLayerCoder"]});var bn=function(t,e){this.tileID=t,this.uid=Vt(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};bn.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<Gi.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},bn.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},bn.prototype.loadVectorData=function(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var a in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(T,C){var M={};if(!C)return M;for(var R=function(){var Y=B[O],it=Y.layerIds.map(function(It){return C.getLayer(It)}).filter(Boolean);if(0!==it.length){Y.layers=it,Y.stateDependentLayerIds&&(Y.stateDependentLayers=Y.stateDependentLayerIds.map(function(It){return it.filter(function(qt){return qt.id===It})[0]}));for(var ot=0,Tt=it;ot<Tt.length;ot+=1)M[Tt[ot].id]=Y}},O=0,B=T;O<B.length;O+=1)R();return M}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var u=this.buckets[a];if(u instanceof yr){if(this.hasSymbolBuckets=!0,!i)break;u.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var c in this.buckets){var h=this.buckets[c];if(h instanceof yr&&h.hasRTLText){this.hasRTLText=!0,kn.isLoading()||kn.isLoaded()||"deferred"!==_s()||dl();break}}for(var m in this.queryPadding=0,this.buckets){var _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(m).queryRadius(_))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new si},bn.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},bn.prototype.getBucket=function(t){return this.buckets[t.id]},bn.prototype.upload=function(t){for(var e in this.buckets){var i=this.buckets[e];i.uploadPending()&&i.upload(t)}var a=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Cs(t,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Cs(t,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)},bn.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},bn.prototype.queryRenderedFeatures=function(t,e,i,a,u,c,h,m,_){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:a,scale:u,tileSize:this.tileSize,pixelPosMatrix:_,transform:h,params:c,queryPadding:this.queryPadding*m},t,e):{}},bn.prototype.querySourceFeatures=function(t,e){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var a=i.loadVTLayers(),u=e?e.sourceLayer:"",c=a._geojsonTileLayer||a[u];if(c)for(var h=rs(e&&e.filter),m=this.tileID.canonical,_=m.z,T=m.x,C=m.y,M={z:_,x:T,y:C},R=0;R<c.length;R++){var O=c.feature(R);if(h(new Pr(this.tileID.overscaledZ),O)){var B=i.getId(O,u),Y=new hu(O,_,T,C,B);Y.tile=M,t.push(Y)}}}},bn.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},bn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},bn.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var i=mt(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var a=Date.now(),u=!1;if(this.expirationTime>a)u=!1;else if(e)if(this.expirationTime<e)u=!0;else{var c=this.expirationTime-e;c?this.expirationTime=a+Math.max(c,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},bn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},bn.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var i=this.latestFeatureIndex.loadVTLayers();for(var a in this.buckets){var u=this.buckets[a],c=u.layers[0].sourceLayer||"_geojsonTileLayer",h=i[c],m=t[c];h&&m&&0!==Object.keys(m).length&&(u.update(m,h,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(a).queryRadius(u))))}}},bn.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},bn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Gi.now()},bn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},bn.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=Gi.now()+t},bn.prototype.setDependencies=function(t,e){for(var i={},a=0,u=e;a<u.length;a+=1)i[u[a]]=!0;this.dependencies[t]=i},bn.prototype.hasDependency=function(t,e){for(var i=0,a=t;i<a.length;i+=1){var c=this.dependencies[a[i]];if(c)for(var h=0,m=e;h<m.length;h+=1)if(c[m[h]])return!0}return!1};var fs=self.performance,gp=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},fs.mark(this._marks.start)};gp.prototype.finish=function(){fs.mark(this._marks.end);var t=fs.getEntriesByName(this._marks.measure);return 0===t.length&&(fs.measure(this._marks.measure,this._marks.start,this._marks.end),t=fs.getEntriesByName(this._marks.measure),fs.clearMarks(this._marks.start),fs.clearMarks(this._marks.end),fs.clearMeasures(this._marks.measure)),t},l.Actor=el,l.AlphaImage=Ts,l.CanonicalTileID=ks,l.CollisionBoxArray=si,l.Color=Ue,l.DEMData=Ka,l.DataConstantProperty=Ve,l.DictionaryCoder=pu,l.EXTENT=mn,l.ErrorEvent=Zr,l.EvaluationParameters=Pr,l.Event=ji,l.Evented=ir,l.FeatureIndex=Ya,l.FillBucket=ga,l.FillExtrusionBucket=va,l.ImageAtlas=El,l.ImagePosition=iu,l.LineBucket=ho,l.LngLat=jr,l.LngLatBounds=pn,l.MercatorCoordinate=Is,l.ONE_EM=24,l.OverscaledTileID=hn,l.Point=et,l.Point$1=et,l.ProgramConfiguration=zn,l.Properties=o,l.Protobuf=tu,l.RGBAImage=so,l.RequestManager=Dt,l.RequestPerformance=gp,l.ResourceType=ri,l.SegmentVector=Er,l.SourceFeatureState=il,l.StructArrayLayout1ui2=$e,l.StructArrayLayout2i4=S,l.StructArrayLayout2ui4=Ce,l.StructArrayLayout3ui6=De,l.StructArrayLayout4i8=k,l.SymbolBucket=yr,l.Texture=Cs,l.Tile=bn,l.Transitionable=po,l.Uniform1f=Pa,l.Uniform1i=bs,l.Uniform2f=cs,l.Uniform3f=ws,l.Uniform4f=Xa,l.UniformColor=Zi,l.UniformMatrix4f=$n,l.UnwrappedTileID=mp,l.ValidationError=E,l.WritingMode=To,l.ZoomHistory=Nr,l.addDynamicAttributes=Gu,l.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);var a=t.length,u=new Array(t.length),c=null;t.forEach(function(h,m){e(h,function(_,T){_&&(c=_),u[m]=T,0==--a&&i(c,u)})})},l.bezier=Zt,l.bindAll=Ye,l.browser=Gi,l.cacheEntryPossiblyAdded=function(t){++ue>Qr&&(t.getActor().send("enforceCacheSizeLimit",tr),ue=0)},l.clamp=Yt,l.clearTileCache=function(t){var e=self.caches.delete(ar);t&&e.catch(t).then(function(){return t()})},l.clone=function(t){var e=new ya(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},l.clone$1=Ti,l.config=_i,l.create=function(){var t=new ya(16);return ya!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},l.create$1=function(){var t=new ya(9);return ya!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},l.create$2=function(){var t=new ya(4);return ya!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},l.createCommonjsModule=P,l.createExpression=vo,l.createLayout=y,l.createStyleLayer=function(t){return"custom"===t.type?new rd(t):new nd[t.type](t)},l.deepEqual=function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(var a=0;a<e.length;a++)if(!t(e[a],i[a]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==i){if("object"!=typeof i||Object.keys(e).length!==Object.keys(i).length)return!1;for(var u in e)if(!t(e[u],i[u]))return!1;return!0}return e===i},l.ease=Mt,l.emitValidationErrors=kt,l.endsWith=Ui,l.enforceCacheSizeLimit=function(t){Xr(),re&&re.then(function(e){e.keys().then(function(i){for(var a=0;a<i.length-t;a++)e.delete(i[a])})})},l.evaluateSizeForFeature=Gc,l.evaluateSizeForZoom=Xc,l.evaluateVariableOffset=ep,l.evented=Fs,l.extend=vt,l.featureFilter=rs,l.filterObject=Wi,l.fromRotation=function(t,e){var i=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=i,t[2]=0,t[3]=-i,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},l.getAnchorAlignment=qu,l.getAnchorJustification=Wu,l.getArrayBuffer=Ii,l.getImage=Mi,l.getJSON=function(t,e){return Ni(vt(t,{type:"json"}),e)},l.getRTLTextPluginStatus=_s,l.getReferrer=zi,l.getVideo=function(t,e){var i,a,u=self.document.createElement("video");u.muted=!0,u.onloadstart=function(){e(null,u)};for(var c=0;c<t.length;c++){var h=self.document.createElement("source");i=t[c],a=void 0,(a=self.document.createElement("a")).href=i,(a.protocol!==self.document.location.protocol||a.host!==self.document.location.host)&&(u.crossOrigin="Anonymous"),h.src=t[c],u.appendChild(h)}return{cancel:function(){}}},l.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.invert=function(t,e){var i=e[0],a=e[1],u=e[2],c=e[3],h=e[4],m=e[5],_=e[6],T=e[7],C=e[8],M=e[9],R=e[10],O=e[11],B=e[12],Y=e[13],it=e[14],ot=e[15],Tt=i*m-a*h,wt=i*_-u*h,It=i*T-c*h,qt=a*_-u*m,Jt=a*T-c*m,Gt=u*T-c*_,be=C*Y-M*B,He=C*it-R*B,Oe=C*ot-O*B,Ke=M*it-R*Y,Re=M*ot-O*Y,Ee=R*ot-O*it,pe=Tt*Ee-wt*Re+It*Ke+qt*Oe-Jt*He+Gt*be;return pe?(t[0]=(m*Ee-_*Re+T*Ke)*(pe=1/pe),t[1]=(u*Re-a*Ee-c*Ke)*pe,t[2]=(Y*Gt-it*Jt+ot*qt)*pe,t[3]=(R*Jt-M*Gt-O*qt)*pe,t[4]=(_*Oe-h*Ee-T*He)*pe,t[5]=(i*Ee-u*Oe+c*He)*pe,t[6]=(it*It-B*Gt-ot*wt)*pe,t[7]=(C*Gt-R*It+O*wt)*pe,t[8]=(h*Re-m*Oe+T*be)*pe,t[9]=(a*Oe-i*Re-c*be)*pe,t[10]=(B*Jt-Y*It+ot*Tt)*pe,t[11]=(M*It-C*Jt-O*Tt)*pe,t[12]=(m*He-h*Ke-_*be)*pe,t[13]=(i*Ke-a*He+u*be)*pe,t[14]=(Y*wt-B*qt-it*Tt)*pe,t[15]=(C*qt-M*wt+R*Tt)*pe,t):null},l.isChar=ce,l.isMapboxURL=Ft,l.keysDifference=function(t,e){var i=[];for(var a in t)a in e||i.push(a);return i},l.makeRequest=Ni,l.mapObject=q,l.mercatorXfromLng=hp,l.mercatorYfromLat=dp,l.mercatorZfromAltitude=fp,l.multiply=function(t,e,i){var a=e[0],u=e[1],c=e[2],h=e[3],m=e[4],_=e[5],T=e[6],C=e[7],M=e[8],R=e[9],O=e[10],B=e[11],Y=e[12],it=e[13],ot=e[14],Tt=e[15],wt=i[0],It=i[1],qt=i[2],Jt=i[3];return t[0]=wt*a+It*m+qt*M+Jt*Y,t[1]=wt*u+It*_+qt*R+Jt*it,t[2]=wt*c+It*T+qt*O+Jt*ot,t[3]=wt*h+It*C+qt*B+Jt*Tt,t[4]=(wt=i[4])*a+(It=i[5])*m+(qt=i[6])*M+(Jt=i[7])*Y,t[5]=wt*u+It*_+qt*R+Jt*it,t[6]=wt*c+It*T+qt*O+Jt*ot,t[7]=wt*h+It*C+qt*B+Jt*Tt,t[8]=(wt=i[8])*a+(It=i[9])*m+(qt=i[10])*M+(Jt=i[11])*Y,t[9]=wt*u+It*_+qt*R+Jt*it,t[10]=wt*c+It*T+qt*O+Jt*ot,t[11]=wt*h+It*C+qt*B+Jt*Tt,t[12]=(wt=i[12])*a+(It=i[13])*m+(qt=i[14])*M+(Jt=i[15])*Y,t[13]=wt*u+It*_+qt*R+Jt*it,t[14]=wt*c+It*T+qt*O+Jt*ot,t[15]=wt*h+It*C+qt*B+Jt*Tt,t},l.mvt=Zs,l.number=$r,l.offscreenCanvasSupported=We,l.ortho=function(t,e,i,a,u,c,h){var m=1/(e-i),_=1/(a-u),T=1/(c-h);return t[0]=-2*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*_,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*T,t[11]=0,t[12]=(e+i)*m,t[13]=(u+a)*_,t[14]=(h+c)*T,t[15]=1,t},l.parseGlyphPBF=function(t){return new tu(t).readFields(Bh,[])},l.pbf=tu,l.performSymbolLayout=function(t,e,i,a,u,c){t.createArrays(),t.tilePixelRatio=mn/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var m=t.layers[0].layout,_=t.layers[0]._unevaluatedLayout._values,T={};if("composite"===t.textSizeData.kind){var C=t.textSizeData,R=C.maxZoom;T.compositeTextSizes=[_["text-size"].possiblyEvaluate(new Pr(C.minZoom)),_["text-size"].possiblyEvaluate(new Pr(R))]}if("composite"===t.iconSizeData.kind){var O=t.iconSizeData,Y=O.maxZoom;T.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new Pr(O.minZoom)),_["icon-size"].possiblyEvaluate(new Pr(Y))]}T.layoutTextSize=_["text-size"].possiblyEvaluate(new Pr(t.zoom+1)),T.layoutIconSize=_["icon-size"].possiblyEvaluate(new Pr(t.zoom+1)),T.textMaxSize=_["text-size"].possiblyEvaluate(new Pr(18));for(var it=24*m.get("text-line-height"),ot="map"===m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement"),Tt=m.get("text-keep-upright"),wt=m.get("text-size"),It=function(){var Gt=Jt[qt],be=m.get("text-font").evaluate(Gt,{}).join(","),He=wt.evaluate(Gt,{}),Oe=T.layoutTextSize.evaluate(Gt,{}),Ke=T.layoutIconSize.evaluate(Gt,{}),Re={horizontal:{},vertical:void 0},Ee=Gt.text,pe=[0,0];if(Ee){var ki=Ee.toString(),gr=24*m.get("text-letter-spacing").evaluate(Gt,{}),Qi=function(Bi){for(var dr=0,Dr=Bi;dr<Dr.length;dr+=1)if(!Cn(Dr[dr].charCodeAt(0)))return!1;return!0}(ki)?gr:0,mi=m.get("text-anchor").evaluate(Gt,{}),Ai=m.get("text-variable-anchor");if(!Ai){var Oi=m.get("text-radial-offset").evaluate(Gt,{});pe=Oi?ep(mi,[24*Oi,Zu]):m.get("text-offset").evaluate(Gt,{}).map(function(Bi){return 24*Bi})}var bi=ot?"center":m.get("text-justify").evaluate(Gt,{}),Pi=m.get("symbol-placement"),rr="point"===Pi?24*m.get("text-max-width").evaluate(Gt,{}):0,Fr=function(){t.allowVerticalPlacement&&co(ki)&&(Re.vertical=ru(Ee,e,i,u,be,rr,it,mi,"left",Qi,pe,To.vertical,!0,Pi,Oe,He))};if(!ot&&Ai){for(var Vr="auto"===bi?Ai.map(function(Bi){return Wu(Bi)}):[bi],Un=!1,Nn=0;Nn<Vr.length;Nn++){var nn=Vr[Nn];if(!Re.horizontal[nn])if(Un)Re.horizontal[nn]=Re.horizontal[0];else{var wn=ru(Ee,e,i,u,be,rr,it,"center",nn,Qi,pe,To.horizontal,!1,Pi,Oe,He);wn&&(Re.horizontal[nn]=wn,Un=1===wn.positionedLines.length)}}Fr()}else{"auto"===bi&&(bi=Wu(mi));var Pn=ru(Ee,e,i,u,be,rr,it,mi,bi,Qi,pe,To.horizontal,!1,Pi,Oe,He);Pn&&(Re.horizontal[bi]=Pn),Fr(),co(ki)&&ot&&Tt&&(Re.vertical=ru(Ee,e,i,u,be,rr,it,mi,bi,Qi,pe,To.vertical,!1,Pi,Oe,He))}}var Bi,dr,Lr,xa,Jn,jn=void 0,yn=!1;if(Gt.icon&&Gt.icon.name){var Ur=a[Gt.icon.name];Ur&&(Bi=u[Gt.icon.name],dr=m.get("icon-offset").evaluate(Gt,{}),Lr=qu(m.get("icon-anchor").evaluate(Gt,{})),jn={image:Bi,top:Jn=dr[1]-Bi.displaySize[1]*Lr.verticalAlign,bottom:Jn+Bi.displaySize[1],left:xa=dr[0]-Bi.displaySize[0]*Lr.horizontalAlign,right:xa+Bi.displaySize[0]},yn=Ur.sdf,void 0===t.sdfIcons?t.sdfIcons=Ur.sdf:t.sdfIcons!==Ur.sdf&&ae("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ur.pixelRatio!==t.pixelRatio||0!==m.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var Jr=rp(Re.horizontal)||Re.vertical;t.iconsInText=!!Jr&&Jr.iconsInText,(Jr||jn)&&function(Bi,dr,Dr,Lr,gn,wr,Mn,qr,xa,Vn){var Jn=wr.textMaxSize.evaluate(dr,{});void 0===Jn&&(Jn=Mn);var Vo,Sn=Bi.layers[0].layout,oa=Sn.get("icon-offset").evaluate(dr,{}),Da=rp(Dr.horizontal),ba=Mn/24,Pl=Bi.tilePixelRatio*ba,La=Bi.tilePixelRatio*Jn/24,Yu=Bi.tilePixelRatio*qr,rl=Bi.tilePixelRatio*Sn.get("symbol-spacing"),du=Sn.get("text-padding")*Bi.tilePixelRatio,nl=Sn.get("icon-padding")*Bi.tilePixelRatio,Ml=Sn.get("text-max-angle")/180*Math.PI,fu="map"===Sn.get("text-rotation-alignment")&&"point"!==Sn.get("symbol-placement"),Ju="map"===Sn.get("icon-rotation-alignment")&&"point"!==Sn.get("symbol-placement"),Dl=Sn.get("symbol-placement"),ms=rl/2,As=Sn.get("icon-text-fit");Lr&&"none"!==As&&(Bi.allowVerticalPlacement&&Dr.vertical&&(Vo=Wc(Lr,Dr.vertical,As,Sn.get("icon-text-fit-padding"),oa,ba)),Da&&(Lr=Wc(Lr,Da,As,Sn.get("icon-text-fit-padding"),oa,ba)));var ys=function(bu,Eo){Eo.x<0||Eo.x>=mn||Eo.y<0||Eo.y>=mn||function(nr,Dn,Co,wa,Ps,cl,Sa,yo,Si,fr,wu,Su,rc,xp,Nl,bp,wp,Sp,Tp,Ep,Io,Tu,Cp){var nc,pl,jl,Vl,ql,hl=nr.addToLineVertexArray(Dn,Co),Ip=0,kp=0,Ap=0,zp=0,oc=-1,ac=-1,Ja={},Pp=Fo(""),sc=0,lc=0;if(void 0===yo._unevaluatedLayout.getValue("text-radial-offset")?(sc=(nc=yo.layout.get("text-offset").evaluate(Io,{}).map(function(gd){return 24*gd}))[0],lc=nc[1]):(sc=24*yo.layout.get("text-radial-offset").evaluate(Io,{}),lc=Zu),nr.allowVerticalPlacement&&wa.vertical){var Mp=yo.layout.get("text-rotate").evaluate(Io,{})+90;Vl=new Il(Si,Co,Dn,fr,wu,Su,wa.vertical,rc,xp,Nl,nr.overscaling,Mp),Sa&&(ql=new Il(Si,Co,Dn,fr,wu,Su,Sa,wp,Sp,Nl,nr.overscaling,Mp))}if(Ps){var uc=yo.layout.get("icon-rotate").evaluate(Io,{}),Dp="none"!==yo.layout.get("icon-text-fit"),Lp=Qc(Ps,uc,Cp,Dp),cc=Sa?Qc(Sa,uc,Cp,Dp):void 0;jl=new Il(Si,Co,Dn,fr,wu,Su,Ps,wp,Sp,!1,nr.overscaling,uc),Ip=4*Lp.length;var Op=nr.iconSizeData,Hl=null;"source"===Op.kind?(Hl=[_a*yo.layout.get("icon-size").evaluate(Io,{})])[0]>ds&&ae(nr.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Op.kind&&((Hl=[_a*Tu.compositeIconSizes[0].evaluate(Io,{}),_a*Tu.compositeIconSizes[1].evaluate(Io,{})])[0]>ds||Hl[1]>ds)&&ae(nr.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),nr.addSymbols(nr.icon,Lp,Hl,Ep,Tp,Io,!1,Dn,hl.lineStartIndex,hl.lineLength,-1),oc=nr.icon.placedSymbolArray.length-1,cc&&(kp=4*cc.length,nr.addSymbols(nr.icon,cc,Hl,Ep,Tp,Io,To.vertical,Dn,hl.lineStartIndex,hl.lineLength,-1),ac=nr.icon.placedSymbolArray.length-1)}for(var Rp in wa.horizontal){var Eu=wa.horizontal[Rp];if(!pl){Pp=Fo(Eu.text);var ld=yo.layout.get("text-rotate").evaluate(Io,{});pl=new Il(Si,Co,Dn,fr,wu,Su,Eu,rc,xp,Nl,nr.overscaling,ld)}var Bp=1===Eu.positionedLines.length;if(Ap+=ip(nr,Dn,Eu,cl,yo,Nl,Io,bp,hl,wa.vertical?To.horizontal:To.horizontalOnly,Bp?Object.keys(wa.horizontal):[Rp],Ja,oc,Tu),Bp)break}wa.vertical&&(zp+=ip(nr,Dn,wa.vertical,cl,yo,Nl,Io,bp,hl,To.vertical,["vertical"],Ja,ac,Tu));var ud=pl?pl.boxStartIndex:nr.collisionBoxArray.length,cd=pl?pl.boxEndIndex:nr.collisionBoxArray.length,pd=Vl?Vl.boxStartIndex:nr.collisionBoxArray.length,hd=Vl?Vl.boxEndIndex:nr.collisionBoxArray.length,dd=jl?jl.boxStartIndex:nr.collisionBoxArray.length,fd=jl?jl.boxEndIndex:nr.collisionBoxArray.length,md=ql?ql.boxStartIndex:nr.collisionBoxArray.length,yd=ql?ql.boxEndIndex:nr.collisionBoxArray.length;nr.glyphOffsetArray.length>=yr.MAX_GLYPHS&&ae("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Io.sortKey&&nr.addToSortKeyRanges(nr.symbolInstances.length,Io.sortKey),nr.symbolInstances.emplaceBack(Dn.x,Dn.y,Ja.right>=0?Ja.right:-1,Ja.center>=0?Ja.center:-1,Ja.left>=0?Ja.left:-1,Ja.vertical||-1,oc,ac,Pp,ud,cd,pd,hd,dd,fd,md,yd,fr,Ap,zp,Ip,kp,0,rc,sc,lc)}(Bi,Eo,bu,Dr,Lr,gn,Vo,Bi.layers[0],Bi.collisionBoxArray,dr.index,dr.sourceLayerIndex,Bi.index,Pl,du,fu,xa,Yu,nl,Ju,oa,dr,wr,Vn)};if("line"===Dl)for(var ol=0,Ll=function(bu,Eo,nr,Dn,Co){for(var wa=[],Ps=0;Ps<bu.length;Ps++)for(var cl=bu[Ps],Sa=void 0,yo=0;yo<cl.length-1;yo++){var Si=cl[yo],fr=cl[yo+1];Si.x<0&&fr.x<0||(Si.x<0?Si=new et(0,Si.y+(0-Si.x)/(fr.x-Si.x)*(fr.y-Si.y))._round():fr.x<0&&(fr=new et(0,Si.y+(0-Si.x)/(fr.x-Si.x)*(fr.y-Si.y))._round()),Si.y<0&&fr.y<0||(Si.y<0?Si=new et(Si.x+(0-Si.y)/(fr.y-Si.y)*(fr.x-Si.x),0)._round():fr.y<0&&(fr=new et(Si.x+(0-Si.y)/(fr.y-Si.y)*(fr.x-Si.x),0)._round()),Si.x>=Dn&&fr.x>=Dn||(Si.x>=Dn?Si=new et(Dn,Si.y+(Dn-Si.x)/(fr.x-Si.x)*(fr.y-Si.y))._round():fr.x>=Dn&&(fr=new et(Dn,Si.y+(Dn-Si.x)/(fr.x-Si.x)*(fr.y-Si.y))._round()),Si.y>=Co&&fr.y>=Co||(Si.y>=Co?Si=new et(Si.x+(Co-Si.y)/(fr.y-Si.y)*(fr.x-Si.x),Co)._round():fr.y>=Co&&(fr=new et(Si.x+(Co-Si.y)/(fr.y-Si.y)*(fr.x-Si.x),Co)._round()),Sa&&Si.equals(Sa[Sa.length-1])||wa.push(Sa=[Si]),Sa.push(fr)))))}return wa}(dr.geometry,0,0,mn,mn);ol<Ll.length;ol+=1)for(var mu=Ll[ol],Ol=0,Rl=Hh(mu,rl,Ml,Dr.vertical||Da,Lr,24,La,Bi.overscaling,mn);Ol<Rl.length;Ol+=1){var yu=Rl[Ol];Da&&Xh(Bi,Da.text,ms,yu)||ys(mu,yu)}else if("line-center"===Dl)for(var al=0,vu=dr.geometry;al<vu.length;al+=1){var Bl=vu[al];if(Bl.length>1){var _u=qh(Bl,Ml,Dr.vertical||Da,Lr,24,La);_u&&ys(Bl,_u)}}else if("Polygon"===dr.type)for(var sl=0,ll=Ru(dr.geometry,0);sl<ll.length;sl+=1){var Fl=ll[sl],xu=Wh(Fl,16);ys(Fl[0],new $s(xu.x,xu.y,0))}else if("LineString"===dr.type)for(var zs=0,Ul=dr.geometry;zs<Ul.length;zs+=1){var ul=Ul[zs];ys(ul,new $s(ul[0].x,ul[0].y,0))}else if("Point"===dr.type)for(var tc=0,vp=dr.geometry;tc<vp.length;tc+=1)for(var ec=0,_p=vp[tc];ec<_p.length;ec+=1){var ic=_p[ec];ys([ic],new $s(ic.x,ic.y,0))}}(t,Gt,Re,jn,a,T,Oe,Ke,pe,yn)},qt=0,Jt=t.features;qt<Jt.length;qt+=1)It();c&&t.generateCollisionDebugBuffers()},l.perspective=function(t,e,i,a,u){var c,h=1/Math.tan(e/2);return t[0]=h/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=u&&u!==1/0?(t[10]=(u+a)*(c=1/(a-u)),t[14]=2*u*a*c):(t[10]=-1,t[14]=-2*a),t},l.pick=function(t,e){for(var i={},a=0;a<e.length;a++){var u=e[a];u in t&&(i[u]=t[u])}return i},l.plugin=kn,l.polygonIntersectsPolygon=pc,l.postMapLoadEvent=Ci,l.postTurnstileEvent=Pe,l.potpack=Vc,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=oe,l.registerForPluginStateChange=function(t){return t({pluginStatus:oo,pluginURL:ea}),Fs.on("pluginStateChange",t),t},l.rotate=function(t,e,i){var a=e[0],u=e[1],c=e[2],h=e[3],m=Math.sin(i),_=Math.cos(i);return t[0]=a*_+c*m,t[1]=u*_+h*m,t[2]=a*-m+c*_,t[3]=u*-m+h*_,t},l.rotateX=function(t,e,i){var a=Math.sin(i),u=Math.cos(i),c=e[4],h=e[5],m=e[6],_=e[7],T=e[8],C=e[9],M=e[10],R=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=c*u+T*a,t[5]=h*u+C*a,t[6]=m*u+M*a,t[7]=_*u+R*a,t[8]=T*u-c*a,t[9]=C*u-h*a,t[10]=M*u-m*a,t[11]=R*u-_*a,t},l.rotateZ=function(t,e,i){var a=Math.sin(i),u=Math.cos(i),c=e[0],h=e[1],m=e[2],_=e[3],T=e[4],C=e[5],M=e[6],R=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=c*u+T*a,t[1]=h*u+C*a,t[2]=m*u+M*a,t[3]=_*u+R*a,t[4]=T*u-c*a,t[5]=C*u-h*a,t[6]=M*u-m*a,t[7]=R*u-_*a,t},l.scale=function(t,e,i){var a=i[0],u=i[1],c=i[2];return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*u,t[5]=e[5]*u,t[6]=e[6]*u,t[7]=e[7]*u,t[8]=e[8]*c,t[9]=e[9]*c,t[10]=e[10]*c,t[11]=e[11]*c,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},l.setCacheLimits=function(t,e){tr=t,Qr=e},l.setRTLTextPlugin=function(t,e,i){if(void 0===i&&(i=!1),oo===no||oo===_o||oo===ua)throw new Error("setRTLTextPlugin cannot be called multiple times.");ea=Gi.resolveURL(t),oo=no,Ds=e,ma(),i||dl()},l.sphericalToCartesian=function(t){var e=t[0],i=t[1],a=t[2];return i+=90,i*=Math.PI/180,a*=Math.PI/180,{x:e*Math.cos(i)*Math.sin(a),y:e*Math.sin(i)*Math.sin(a),z:e*Math.cos(a)}},l.styleSpec=x,l.symbolSize=Vh,l.transformMat3=function(t,e,i){var a=e[0],u=e[1],c=e[2];return t[0]=a*i[0]+u*i[3]+c*i[6],t[1]=a*i[1]+u*i[4]+c*i[7],t[2]=a*i[2]+u*i[5]+c*i[8],t},l.transformMat4=$l,l.translate=function(t,e,i){var a,u,c,h,m,_,T,C,M,R,O,B,Y=i[0],it=i[1],ot=i[2];return e===t?(t[12]=e[0]*Y+e[4]*it+e[8]*ot+e[12],t[13]=e[1]*Y+e[5]*it+e[9]*ot+e[13],t[14]=e[2]*Y+e[6]*it+e[10]*ot+e[14],t[15]=e[3]*Y+e[7]*it+e[11]*ot+e[15]):(u=e[1],c=e[2],h=e[3],m=e[4],_=e[5],T=e[6],C=e[7],M=e[8],R=e[9],O=e[10],B=e[11],t[0]=a=e[0],t[1]=u,t[2]=c,t[3]=h,t[4]=m,t[5]=_,t[6]=T,t[7]=C,t[8]=M,t[9]=R,t[10]=O,t[11]=B,t[12]=a*Y+m*it+M*ot+e[12],t[13]=u*Y+_*it+R*ot+e[13],t[14]=c*Y+T*it+O*ot+e[14],t[15]=h*Y+C*it+B*ot+e[15]),t},l.triggerPluginCompletionEvent=Zl,l.uniqueId=Vt,l.validateCustomStyleLayer=function(t){var e=[],i=t.id;return void 0===i&&e.push({message:"layers."+i+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+i+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),e},l.validateLight=ur,l.validateStyle=la,l.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},l.vectorTile=Zs,l.version="1.7.0",l.warnOnce=ae,l.webpSupported=Hr,l.window=self,l.wrap=$t}),A(0,function(l){function P(x){var E=typeof x;if("number"===E||"boolean"===E||"string"===E||null==x)return JSON.stringify(x);if(Array.isArray(x)){for(var D="[",j=0,K=x;j<K.length;j+=1)D+=P(K[j])+",";return D+"]"}for(var ct=Object.keys(x).sort(),yt="{",at=0;at<ct.length;at++)yt+=JSON.stringify(ct[at])+":"+P(x[ct[at]])+",";return yt+"}"}function I(x){for(var E="",D=0,j=l.refProperties;D<j.length;D+=1)E+="/"+P(x[j[D]]);return E}var N=function(x){this.keyCache={},x&&this.replace(x)};N.prototype.replace=function(x){this._layerConfigs={},this._layers={},this.update(x,[])},N.prototype.update=function(x,E){for(var D=this,j=0,K=x;j<K.length;j+=1){var ct=K[j];this._layerConfigs[ct.id]=ct;var yt=this._layers[ct.id]=l.createStyleLayer(ct);yt._featureFilter=l.featureFilter(yt.filter),this.keyCache[ct.id]&&delete this.keyCache[ct.id]}for(var at=0,nt=E;at<nt.length;at+=1){var tt=nt[at];delete this.keyCache[tt],delete this._layerConfigs[tt],delete this._layers[tt]}this.familiesBySource={};for(var Ot=0,jt=function(ai,Qe){for(var di={},Ei=0;Ei<ai.length;Ei++){var Cr=Qe&&Qe[ai[Ei].id]||I(ai[Ei]);Qe&&(Qe[ai[Ei].id]=Cr);var Ue=di[Cr];Ue||(Ue=di[Cr]=[]),Ue.push(ai[Ei])}var Sr=[];for(var tn in di)Sr.push(di[tn]);return Sr}(l.values(this._layerConfigs),this.keyCache);Ot<jt.length;Ot+=1){var Nt=jt[Ot].map(function(ai){return D._layers[ai.id]}),fe=Nt[0];if("none"!==fe.visibility){var he=fe.source||"",qe=this.familiesBySource[he];qe||(qe=this.familiesBySource[he]={});var Be=fe.sourceLayer||"_geojsonTileLayer",ze=qe[Be];ze||(ze=qe[Be]=[]),ze.push(Nt)}}};var et=function(x){var E={},D=[];for(var j in x){var K=x[j],ct=E[j]={};for(var yt in K){var at=K[+yt];if(at&&0!==at.bitmap.width&&0!==at.bitmap.height){var nt={x:0,y:0,w:at.bitmap.width+2,h:at.bitmap.height+2};D.push(nt),ct[yt]={rect:nt,metrics:at.metrics}}}}var tt=l.potpack(D),Nt=new l.AlphaImage({width:tt.w||1,height:tt.h||1});for(var fe in x){var he=x[fe];for(var qe in he){var Be=he[+qe];if(Be&&0!==Be.bitmap.width&&0!==Be.bitmap.height){var ze=E[fe][qe].rect;l.AlphaImage.copy(Be.bitmap,Nt,{x:0,y:0},{x:ze.x+1,y:ze.y+1},Be.bitmap)}}}this.image=Nt,this.positions=E};l.register("GlyphAtlas",et);var Lt=function(x){this.tileID=new l.OverscaledTileID(x.tileID.overscaledZ,x.tileID.wrap,x.tileID.canonical.z,x.tileID.canonical.x,x.tileID.canonical.y),this.uid=x.uid,this.zoom=x.zoom,this.pixelRatio=x.pixelRatio,this.tileSize=x.tileSize,this.source=x.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=x.showCollisionBoxes,this.collectResourceTiming=!!x.collectResourceTiming,this.returnDependencies=!!x.returnDependencies,this.promoteId=x.promoteId};function Zt(x,E,D){for(var j=new l.EvaluationParameters(E),K=0,ct=x;K<ct.length;K+=1)ct[K].recalculate(j,D)}function Mt(x,E){var D=l.getArrayBuffer(x.request,function(j,K,ct,yt){j?E(j):K&&E(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(K)),rawData:K,cacheControl:ct,expires:yt})});return function(){D.cancel(),E()}}Lt.prototype.parse=function(x,E,D,j,K){var ct=this;this.status="parsing",this.data=x,this.collisionBoxArray=new l.CollisionBoxArray;var yt=new l.DictionaryCoder(Object.keys(x.layers).sort()),at=new l.FeatureIndex(this.tileID,this.promoteId);at.bucketLayerIDs=[];var nt,tt,Ot,jt,Nt={},fe={featureIndex:at,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:D},he=E.familiesBySource[this.source];for(var qe in he){var Be=x.layers[qe];if(Be){1===Be.version&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+qe+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var ze=yt.encode(qe),ai=[],Qe=0;Qe<Be.length;Qe++){var di=Be.feature(Qe),Ei=at.getId(di,qe);ai.push({feature:di,id:Ei,index:Qe,sourceLayerIndex:ze})}for(var Cr=0,Ue=he[qe];Cr<Ue.length;Cr+=1){var Sr=Ue[Cr],tn=Sr[0];tn.minzoom&&this.zoom<Math.floor(tn.minzoom)||tn.maxzoom&&this.zoom>=tn.maxzoom||"none"!==tn.visibility&&(Zt(Sr,this.zoom,D),(Nt[tn.id]=tn.createBucket({index:at.bucketLayerIDs.length,layers:Sr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ze,sourceID:this.source})).populate(ai,fe),at.bucketLayerIDs.push(Sr.map(function(vr){return vr.id})))}}}var mr=l.mapObject(fe.glyphDependencies,function(vr){return Object.keys(vr).map(Number)});Object.keys(mr).length?j.send("getGlyphs",{uid:this.uid,stacks:mr},function(vr,Hi){nt||(nt=vr,tt=Hi,Xi.call(ct))}):tt={};var Rr=Object.keys(fe.iconDependencies);Rr.length?j.send("getImages",{icons:Rr,source:this.source,tileID:this.tileID,type:"icons"},function(vr,Hi){nt||(nt=vr,Ot=Hi,Xi.call(ct))}):Ot={};var In=Object.keys(fe.patternDependencies);function Xi(){if(nt)return K(nt);if(tt&&Ot&&jt){var vr=new et(tt),Hi=new l.ImageAtlas(Ot,jt);for(var on in Nt){var Ar=Nt[on];Ar instanceof l.SymbolBucket?(Zt(Ar.layers,this.zoom,D),l.performSymbolLayout(Ar,tt,vr.positions,Ot,Hi.iconPositions,this.showCollisionBoxes)):Ar.hasPattern&&(Ar instanceof l.LineBucket||Ar instanceof l.FillBucket||Ar instanceof l.FillExtrusionBucket)&&(Zt(Ar.layers,this.zoom,D),Ar.addFeatures(fe,Hi.patternPositions))}this.status="done",K(null,{buckets:l.values(Nt).filter(function(an){return!an.isEmpty()}),featureIndex:at,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:vr.image,imageAtlas:Hi,glyphMap:this.returnDependencies?tt:null,iconMap:this.returnDependencies?Ot:null,glyphPositions:this.returnDependencies?vr.positions:null})}}In.length?j.send("getImages",{icons:In,source:this.source,tileID:this.tileID,type:"patterns"},function(vr,Hi){nt||(nt=vr,jt=Hi,Xi.call(ct))}):jt={},Xi.call(this)};var Yt=function(x,E,D,j){this.actor=x,this.layerIndex=E,this.availableImages=D,this.loadVectorData=j||Mt,this.loading={},this.loaded={}};Yt.prototype.loadTile=function(x,E){var D=this,j=x.uid;this.loading||(this.loading={});var K=!!(x&&x.request&&x.request.collectResourceTiming)&&new l.RequestPerformance(x.request),ct=this.loading[j]=new Lt(x);ct.abort=this.loadVectorData(x,function(yt,at){if(delete D.loading[j],yt||!at)return ct.status="done",D.loaded[j]=ct,E(yt);var nt=at.rawData,tt={};at.expires&&(tt.expires=at.expires),at.cacheControl&&(tt.cacheControl=at.cacheControl);var Ot={};if(K){var jt=K.finish();jt&&(Ot.resourceTiming=JSON.parse(JSON.stringify(jt)))}ct.vectorTile=at.vectorTile,ct.parse(at.vectorTile,D.layerIndex,D.availableImages,D.actor,function(Nt,fe){if(Nt||!fe)return E(Nt);E(null,l.extend({rawTileData:nt.slice(0)},fe,tt,Ot))}),D.loaded=D.loaded||{},D.loaded[j]=ct})},Yt.prototype.reloadTile=function(x,E){var D=this,j=this.loaded,K=x.uid,ct=this;if(j&&j[K]){var yt=j[K];yt.showCollisionBoxes=x.showCollisionBoxes;var at=function(nt,tt){var Ot=yt.reloadCallback;Ot&&(delete yt.reloadCallback,yt.parse(yt.vectorTile,ct.layerIndex,D.availableImages,ct.actor,Ot)),E(nt,tt)};"parsing"===yt.status?yt.reloadCallback=at:"done"===yt.status&&(yt.vectorTile?yt.parse(yt.vectorTile,this.layerIndex,this.availableImages,this.actor,at):at())}},Yt.prototype.abortTile=function(x,E){var D=this.loading,j=x.uid;D&&D[j]&&D[j].abort&&(D[j].abort(),delete D[j]),E()},Yt.prototype.removeTile=function(x,E){var D=this.loaded,j=x.uid;D&&D[j]&&delete D[j],E()};var $t=l.window.ImageBitmap,vt=function(){this.loaded={}};vt.prototype.loadTile=function(x,E){var D=x.uid,j=x.encoding,K=x.rawImageData,ct=$t&&K instanceof $t?this.getImageData(K):K,yt=new l.DEMData(D,ct,j);this.loaded=this.loaded||{},this.loaded[D]=yt,E(null,yt)},vt.prototype.getImageData=function(x){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(x.width,x.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=x.width,this.offscreenCanvas.height=x.height,this.offscreenCanvasContext.drawImage(x,0,0,x.width,x.height);var E=this.offscreenCanvasContext.getImageData(-1,-1,x.width+2,x.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:E.width,height:E.height},E.data)},vt.prototype.removeTile=function(x){var E=this.loaded,D=x.uid;E&&E[D]&&delete E[D]};function Vt(x){var E=0;if(x&&x.length>0){E+=Math.abs(xe(x[0]));for(var D=1;D<x.length;D++)E-=Math.abs(xe(x[D]))}return E}function xe(x){var E,D,j,K,ct,yt,at=0,nt=x.length;if(nt>2){for(yt=0;yt<nt;yt++)yt===nt-2?(j=nt-2,K=nt-1,ct=0):yt===nt-1?(j=nt-1,K=0,ct=1):(j=yt,K=yt+1,ct=yt+2),E=x[j],D=x[K],at+=(Ze(x[ct][0])-Ze(E[0]))*Math.sin(Ze(D[1]));at=6378137*at*6378137/2}return at}function Ze(x){return x*Math.PI/180}var Ye={geometry:function x(E){var D,j=0;switch(E.type){case"Polygon":return Vt(E.coordinates);case"MultiPolygon":for(D=0;D<E.coordinates.length;D++)j+=Vt(E.coordinates[D]);return j;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(D=0;D<E.geometries.length;D++)j+=x(E.geometries[D]);return j}},ring:xe},Ui=function x(E,D){switch(E&&E.type||null){case"FeatureCollection":return E.features=E.features.map(q(x,D)),E;case"GeometryCollection":return E.geometries=E.geometries.map(q(x,D)),E;case"Feature":return E.geometry=x(E.geometry,D),E;case"Polygon":case"MultiPolygon":return K=D,"Polygon"===(j=E).type?j.coordinates=Wi(j.coordinates,K):"MultiPolygon"===j.type&&(j.coordinates=j.coordinates.map(q(Wi,K))),j;default:return E}var j,K};function q(x,E){return function(D){return x(D,E)}}function Wi(x,E){x[0]=Ti(x[0],E=!!E);for(var D=1;D<x.length;D++)x[D]=Ti(x[D],!E);return x}function Ti(x,E){return Ye.ring(x)>=0===E?x:x.reverse()}var ti=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,ae=function(x){this._feature=x,this.extent=l.EXTENT,this.type=x.type,this.properties=x.tags,"id"in x&&!isNaN(x.id)&&(this.id=parseInt(x.id,10))};ae.prototype.loadGeometry=function(){if(1===this._feature.type){for(var x=[],E=0,D=this._feature.geometry;E<D.length;E+=1){var j=D[E];x.push([new l.Point$1(j[0],j[1])])}return x}for(var K=[],ct=0,yt=this._feature.geometry;ct<yt.length;ct+=1){for(var at=[],nt=0,tt=yt[ct];nt<tt.length;nt+=1){var Ot=tt[nt];at.push(new l.Point$1(Ot[0],Ot[1]))}K.push(at)}return K},ae.prototype.toGeoJSON=function(x,E,D){return ti.call(this,x,E,D)};var zt=function(x){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=x.length,this._features=x};zt.prototype.feature=function(x){return new ae(this._features[x])};var Ht=l.vectorTile.VectorTileFeature,ht=mt;function mt(x,E){this.options=E||{},this.features=x,this.length=x.length}function rt(x,E){this.id="number"==typeof x.id?x.id:void 0,this.type=x.type,this.rawGeometry=1===x.type?[x.geometry]:x.geometry,this.properties=x.tags,this.extent=E||4096}mt.prototype.feature=function(x){return new rt(this.features[x],this.options.extent)},rt.prototype.loadGeometry=function(){var x=this.rawGeometry;this.geometry=[];for(var E=0;E<x.length;E++){for(var D=x[E],j=[],K=0;K<D.length;K++)j.push(new l.Point$1(D[K][0],D[K][1]));this.geometry.push(j)}return this.geometry},rt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var x=this.geometry,E=1/0,D=-1/0,j=1/0,K=-1/0,ct=0;ct<x.length;ct++)for(var yt=x[ct],at=0;at<yt.length;at++){var nt=yt[at];E=Math.min(E,nt.x),D=Math.max(D,nt.x),j=Math.min(j,nt.y),K=Math.max(K,nt.y)}return[E,j,D,K]},rt.prototype.toGeoJSON=Ht.prototype.toGeoJSON;var J=se,Et=ht;function se(x){var E=new l.pbf;return function(D,j){for(var K in D.layers)j.writeMessage(3,Ie,D.layers[K])}(x,E),E.finish()}function Ie(x,E){var D;E.writeVarintField(15,x.version||1),E.writeStringField(1,x.name||""),E.writeVarintField(5,x.extent||4096);var j={keys:[],values:[],keycache:{},valuecache:{}};for(D=0;D<x.length;D++)j.feature=x.feature(D),E.writeMessage(2,ei,j);var K=j.keys;for(D=0;D<K.length;D++)E.writeStringField(3,K[D]);var ct=j.values;for(D=0;D<ct.length;D++)E.writeMessage(4,Hr,ct[D])}function ei(x,E){var D=x.feature;void 0!==D.id&&E.writeVarintField(1,D.id),E.writeMessage(2,_e,x),E.writeVarintField(3,D.type),E.writeMessage(4,_i,D)}function _e(x,E){var D=x.feature,j=x.keys,K=x.values,ct=x.keycache,yt=x.valuecache;for(var at in D.properties){var nt=ct[at];void 0===nt&&(j.push(at),ct[at]=nt=j.length-1),E.writeVarint(nt);var tt=D.properties[at],Ot=typeof tt;"string"!==Ot&&"boolean"!==Ot&&"number"!==Ot&&(tt=JSON.stringify(tt));var jt=Ot+":"+tt,Nt=yt[jt];void 0===Nt&&(K.push(tt),yt[jt]=Nt=K.length-1),E.writeVarint(Nt)}}function Ri(x,E){return(E<<3)+(7&x)}function Gi(x){return x<<1^x>>31}function _i(x,E){for(var D=x.loadGeometry(),j=x.type,K=0,ct=0,yt=D.length,at=0;at<yt;at++){var nt=D[at],tt=1;1===j&&(tt=nt.length),E.writeVarint(Ri(1,tt));for(var Ot=3===j?nt.length-1:nt.length,jt=0;jt<Ot;jt++){1===jt&&1!==j&&E.writeVarint(Ri(2,Ot-1));var Nt=nt[jt].x-K,fe=nt[jt].y-ct;E.writeVarint(Gi(Nt)),E.writeVarint(Gi(fe)),K+=Nt,ct+=fe}3===j&&E.writeVarint(Ri(7,1))}}function Hr(x,E){var D=typeof x;"string"===D?E.writeStringField(1,x):"boolean"===D?E.writeBooleanField(7,x):"number"===D&&(x%1!=0?E.writeDoubleField(3,x):x<0?E.writeSVarintField(6,x):E.writeVarintField(5,x))}function Tr(x,E,D,j,K,ct){if(!(K-j<=D)){var yt=j+K>>1;(function at(nt,tt,Ot,jt,Nt,fe){for(;Nt>jt;){if(Nt-jt>600){var he=Nt-jt+1,qe=Ot-jt+1,Be=Math.log(he),ze=.5*Math.exp(2*Be/3),ai=.5*Math.sqrt(Be*ze*(he-ze)/he)*(qe-he/2<0?-1:1);at(nt,tt,Ot,Math.max(jt,Math.floor(Ot-qe*ze/he+ai)),Math.min(Nt,Math.floor(Ot+(he-qe)*ze/he+ai)),fe)}var Ei=tt[2*Ot+fe],Cr=jt,Ue=Nt;for(sr(nt,tt,jt,Ot),tt[2*Nt+fe]>Ei&&sr(nt,tt,jt,Nt);Cr<Ue;){for(sr(nt,tt,Cr,Ue),Cr++,Ue--;tt[2*Cr+fe]<Ei;)Cr++;for(;tt[2*Ue+fe]>Ei;)Ue--}tt[2*jt+fe]===Ei?sr(nt,tt,jt,Ue):sr(nt,tt,++Ue,Nt),Ue<=Ot&&(jt=Ue+1),Ot<=Ue&&(Nt=Ue-1)}})(x,E,yt,j,K,ct%2),Tr(x,E,D,j,yt-1,ct+1),Tr(x,E,D,yt+1,K,ct+1)}}function sr(x,E,D,j){Tn(x,D,j),Tn(E,2*D,2*j),Tn(E,2*D+1,2*j+1)}function Tn(x,E,D){var j=x[E];x[E]=x[D],x[D]=j}function Ln(x,E,D,j){var K=x-D,ct=E-j;return K*K+ct*ct}J.fromVectorTileJs=se,J.fromGeojsonVt=function(x,E){E=E||{};var D={};for(var j in x)D[j]=new ht(x[j].features,E),D[j].name=j,D[j].version=E.version,D[j].extent=E.extent;return se({layers:D})},J.GeoJSONWrapper=Et;var Dt=function(x){return x[0]},Ft=function(x){return x[1]},Fe=function(x,E,D,j,K){void 0===E&&(E=Dt),void 0===D&&(D=Ft),void 0===j&&(j=64),void 0===K&&(K=Float64Array),this.nodeSize=j,this.points=x;for(var ct=x.length<65536?Uint16Array:Uint32Array,yt=this.ids=new ct(x.length),at=this.coords=new K(2*x.length),nt=0;nt<x.length;nt++)yt[nt]=nt,at[2*nt]=E(x[nt]),at[2*nt+1]=D(x[nt]);Tr(yt,at,j,0,yt.length-1,0)};Fe.prototype.range=function(x,E,D,j){return function(K,ct,yt,at,nt,tt,Ot){for(var jt,Nt,fe=[0,K.length-1,0],he=[];fe.length;){var qe=fe.pop(),Be=fe.pop(),ze=fe.pop();if(Be-ze<=Ot)for(var ai=ze;ai<=Be;ai++)Nt=ct[2*ai+1],(jt=ct[2*ai])>=yt&&jt<=nt&&Nt>=at&&Nt<=tt&&he.push(K[ai]);else{var Qe=Math.floor((ze+Be)/2);Nt=ct[2*Qe+1],(jt=ct[2*Qe])>=yt&&jt<=nt&&Nt>=at&&Nt<=tt&&he.push(K[Qe]);var di=(qe+1)%2;(0===qe?yt<=jt:at<=Nt)&&(fe.push(ze),fe.push(Qe-1),fe.push(di)),(0===qe?nt>=jt:tt>=Nt)&&(fe.push(Qe+1),fe.push(Be),fe.push(di))}}return he}(this.ids,this.coords,x,E,D,j,this.nodeSize)},Fe.prototype.within=function(x,E,D){return function(j,K,ct,yt,at,nt){for(var tt=[0,j.length-1,0],Ot=[],jt=at*at;tt.length;){var Nt=tt.pop(),fe=tt.pop(),he=tt.pop();if(fe-he<=nt)for(var qe=he;qe<=fe;qe++)Ln(K[2*qe],K[2*qe+1],ct,yt)<=jt&&Ot.push(j[qe]);else{var Be=Math.floor((he+fe)/2),ze=K[2*Be],ai=K[2*Be+1];Ln(ze,ai,ct,yt)<=jt&&Ot.push(j[Be]);var Qe=(Nt+1)%2;(0===Nt?ct-at<=ze:yt-at<=ai)&&(tt.push(he),tt.push(Be-1),tt.push(Qe)),(0===Nt?ct+at>=ze:yt+at>=ai)&&(tt.push(Be+1),tt.push(fe),tt.push(Qe))}}return Ot}(this.ids,this.coords,x,E,D,this.nodeSize)};var Le={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(x){return x}},st=function(x){this.options=Kt(Object.create(Le),x),this.trees=new Array(this.options.maxZoom+1)};function Rt(x,E,D,j,K){return{x,y:E,zoom:1/0,id:D,parentId:-1,numPoints:j,properties:K}}function me(x,E){var D=x.geometry.coordinates,K=D[1];return{x:re(D[0]),y:Bt(K),zoom:1/0,index:E,parentId:-1}}function Me(x){return{type:"Feature",id:x.id,properties:ii(x),geometry:{type:"Point",coordinates:[(j=x.x,360*(j-.5)),(E=x.y,D=(180-360*E)*Math.PI/180,360*Math.atan(Math.exp(D))/Math.PI-90)]}};var E,D,j}function ii(x){var E=x.numPoints,D=E>=1e4?Math.round(E/1e3)+"k":E>=1e3?Math.round(E/100)/10+"k":E;return Kt(Kt({},x.properties),{cluster:!0,cluster_id:x.id,point_count:E,point_count_abbreviated:D})}function re(x){return x/360+.5}function Bt(x){var E=Math.sin(x*Math.PI/180),D=.5-.25*Math.log((1+E)/(1-E))/Math.PI;return D<0?0:D>1?1:D}function Kt(x,E){for(var D in E)x[D]=E[D];return x}function ne(x){return x.x}function Pe(x){return x.y}function oi(x,E,D,j,K,ct){var yt=K-D,at=ct-j;if(0!==yt||0!==at){var nt=((x-D)*yt+(E-j)*at)/(yt*yt+at*at);nt>1?(D=K,j=ct):nt>0&&(D+=yt*nt,j+=at*nt)}return(yt=x-D)*yt+(at=E-j)*at}function Ci(x,E,D,j){var K={id:void 0===x?null:x,type:E,geometry:D,tags:j,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ct){var yt=ct.geometry,at=ct.type;if("Point"===at||"MultiPoint"===at||"LineString"===at)ar(ct,yt);else if("Polygon"===at||"MultiLineString"===at)for(var nt=0;nt<yt.length;nt++)ar(ct,yt[nt]);else if("MultiPolygon"===at)for(nt=0;nt<yt.length;nt++)for(var tt=0;tt<yt[nt].length;tt++)ar(ct,yt[nt][tt])}(K),K}function ar(x,E){for(var D=0;D<E.length;D+=3)x.minX=Math.min(x.minX,E[D]),x.minY=Math.min(x.minY,E[D+1]),x.maxX=Math.max(x.maxX,E[D]),x.maxY=Math.max(x.maxY,E[D+1])}function tr(x,E,D,j){if(E.geometry){var K=E.geometry.coordinates,ct=E.geometry.type,yt=Math.pow(D.tolerance/((1<<D.maxZoom)*D.extent),2),at=[],nt=E.id;if(D.promoteId?nt=E.properties[D.promoteId]:D.generateId&&(nt=j||0),"Point"===ct)Qr(K,at);else if("MultiPoint"===ct)for(var tt=0;tt<K.length;tt++)Qr(K[tt],at);else if("LineString"===ct)vn(K,at,yt,!1);else if("MultiLineString"===ct){if(D.lineMetrics){for(tt=0;tt<K.length;tt++)vn(K[tt],at=[],yt,!1),x.push(Ci(nt,"LineString",at,E.properties));return}Xr(K,at,yt,!1)}else if("Polygon"===ct)Xr(K,at,yt,!0);else{if("MultiPolygon"!==ct){if("GeometryCollection"===ct){for(tt=0;tt<E.geometry.geometries.length;tt++)tr(x,{id:nt,geometry:E.geometry.geometries[tt],properties:E.properties},D,j);return}throw new Error("Input data is not a valid GeoJSON object.")}for(tt=0;tt<K.length;tt++){var Ot=[];Xr(K[tt],Ot,yt,!0),at.push(Ot)}}x.push(Ci(nt,ct,at,E.properties))}}function Qr(x,E){E.push(dn(x[0])),E.push(xt(x[1])),E.push(0)}function vn(x,E,D,j){for(var K,ct,yt=0,at=0;at<x.length;at++){var nt=dn(x[at][0]),tt=xt(x[at][1]);E.push(nt),E.push(tt),E.push(0),at>0&&(yt+=j?(K*tt-nt*ct)/2:Math.sqrt(Math.pow(nt-K,2)+Math.pow(tt-ct,2))),K=nt,ct=tt}var Ot=E.length-3;E[2]=1,function jt(Nt,fe,he,qe){for(var Be,ze=qe,ai=he-fe>>1,Qe=he-fe,di=Nt[fe],Ei=Nt[fe+1],Cr=Nt[he],Ue=Nt[he+1],Sr=fe+3;Sr<he;Sr+=3){var tn=oi(Nt[Sr],Nt[Sr+1],di,Ei,Cr,Ue);if(tn>ze)Be=Sr,ze=tn;else if(tn===ze){var mr=Math.abs(Sr-ai);mr<Qe&&(Be=Sr,Qe=mr)}}ze>qe&&(Be-fe>3&&jt(Nt,fe,Be,qe),Nt[Be+2]=ze,he-Be>3&&jt(Nt,Be,he,qe))}(E,0,Ot,D),E[Ot+2]=1,E.size=Math.abs(yt),E.start=0,E.end=E.size}function Xr(x,E,D,j){for(var K=0;K<x.length;K++){var ct=[];vn(x[K],ct,D,j),E.push(ct)}}function dn(x){return x/360+.5}function xt(x){var E=Math.sin(x*Math.PI/180),D=.5-.25*Math.log((1+E)/(1-E))/Math.PI;return D<0?0:D>1?1:D}function pt(x,E,D,j,K,ct,yt,at){if(j/=E,ct>=(D/=E)&&yt<j)return x;if(yt<D||ct>=j)return null;for(var nt=[],tt=0;tt<x.length;tt++){var Ot=x[tt],jt=Ot.geometry,Nt=Ot.type,fe=0===K?Ot.minX:Ot.minY,he=0===K?Ot.maxX:Ot.maxY;if(fe>=D&&he<j)nt.push(Ot);else if(!(he<D||fe>=j)){var qe=[];if("Point"===Nt||"MultiPoint"===Nt)Wt(jt,qe,D,j,K);else if("LineString"===Nt)ue(jt,qe,D,j,K,!1,at.lineMetrics);else if("MultiLineString"===Nt)ri(jt,qe,D,j,K,!1);else if("Polygon"===Nt)ri(jt,qe,D,j,K,!0);else if("MultiPolygon"===Nt)for(var Be=0;Be<jt.length;Be++){var ze=[];ri(jt[Be],ze,D,j,K,!0),ze.length&&qe.push(ze)}if(qe.length){if(at.lineMetrics&&"LineString"===Nt){for(Be=0;Be<qe.length;Be++)nt.push(Ci(Ot.id,Nt,qe[Be],Ot.tags));continue}"LineString"!==Nt&&"MultiLineString"!==Nt||(1===qe.length?(Nt="LineString",qe=qe[0]):Nt="MultiLineString"),"Point"!==Nt&&"MultiPoint"!==Nt||(Nt=3===qe.length?"Point":"MultiPoint"),nt.push(Ci(Ot.id,Nt,qe,Ot.tags))}}}return nt.length?nt:null}function Wt(x,E,D,j,K){for(var ct=0;ct<x.length;ct+=3){var yt=x[ct+K];yt>=D&&yt<=j&&(E.push(x[ct]),E.push(x[ct+1]),E.push(x[ct+2]))}}function ue(x,E,D,j,K,ct,yt){for(var at,nt,tt=We(x),Ot=0===K?zi:Fi,jt=x.start,Nt=0;Nt<x.length-3;Nt+=3){var fe=x[Nt],he=x[Nt+1],qe=x[Nt+2],Be=x[Nt+3],ze=x[Nt+4],ai=0===K?fe:he,Qe=0===K?Be:ze,di=!1;yt&&(at=Math.sqrt(Math.pow(fe-Be,2)+Math.pow(he-ze,2))),ai<D?Qe>D&&(nt=Ot(tt,fe,he,Be,ze,D),yt&&(tt.start=jt+at*nt)):ai>j?Qe<j&&(nt=Ot(tt,fe,he,Be,ze,j),yt&&(tt.start=jt+at*nt)):Ne(tt,fe,he,qe),Qe<D&&ai>=D&&(nt=Ot(tt,fe,he,Be,ze,D),di=!0),Qe>j&&ai<=j&&(nt=Ot(tt,fe,he,Be,ze,j),di=!0),!ct&&di&&(yt&&(tt.end=jt+at*nt),E.push(tt),tt=We(x)),yt&&(jt+=at)}var Ei=x.length-3;fe=x[Ei],he=x[Ei+1],qe=x[Ei+2],(ai=0===K?fe:he)>=D&&ai<=j&&Ne(tt,fe,he,qe),Ei=tt.length-3,ct&&Ei>=3&&(tt[Ei]!==tt[0]||tt[Ei+1]!==tt[1])&&Ne(tt,tt[0],tt[1],tt[2]),tt.length&&E.push(tt)}function We(x){var E=[];return E.size=x.size,E.start=x.start,E.end=x.end,E}function ri(x,E,D,j,K,ct){for(var yt=0;yt<x.length;yt++)ue(x[yt],E,D,j,K,ct,!1)}function Ne(x,E,D,j){x.push(E),x.push(D),x.push(j)}function zi(x,E,D,j,K,ct){var yt=(ct-E)/(j-E);return x.push(ct),x.push(D+(K-D)*yt),x.push(1),yt}function Fi(x,E,D,j,K,ct){var yt=(ct-D)/(K-D);return x.push(E+(j-E)*yt),x.push(ct),x.push(1),yt}function Ni(x,E){for(var D=[],j=0;j<x.length;j++){var K,ct=x[j],yt=ct.type;if("Point"===yt||"MultiPoint"===yt||"LineString"===yt)K=Ii(ct.geometry,E);else if("MultiLineString"===yt||"Polygon"===yt){K=[];for(var at=0;at<ct.geometry.length;at++)K.push(Ii(ct.geometry[at],E))}else if("MultiPolygon"===yt)for(K=[],at=0;at<ct.geometry.length;at++){for(var nt=[],tt=0;tt<ct.geometry[at].length;tt++)nt.push(Ii(ct.geometry[at][tt],E));K.push(nt)}D.push(Ci(ct.id,yt,K,ct.tags))}return D}function Ii(x,E){var D=[];D.size=x.size,void 0!==x.start&&(D.start=x.start,D.end=x.end);for(var j=0;j<x.length;j+=3)D.push(x[j]+E,x[j+1],x[j+2]);return D}function wi(x,E){if(x.transformed)return x;var D,j,K,ct=1<<x.z,yt=x.x,at=x.y;for(D=0;D<x.features.length;D++){var nt=x.features[D],tt=nt.geometry,Ot=nt.type;if(nt.geometry=[],1===Ot)for(j=0;j<tt.length;j+=2)nt.geometry.push(Li(tt[j],tt[j+1],E,ct,yt,at));else for(j=0;j<tt.length;j++){var jt=[];for(K=0;K<tt[j].length;K+=2)jt.push(Li(tt[j][K],tt[j][K+1],E,ct,yt,at));nt.geometry.push(jt)}}return x.transformed=!0,x}function Li(x,E,D,j,K,ct){return[Math.round(D*(x*j-K)),Math.round(D*(E*j-ct))]}function cr(x,E,D,j,K){for(var ct=E===K.maxZoom?0:K.tolerance/((1<<E)*K.extent),yt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:D,y:j,z:E,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},at=0;at<x.length;at++){yt.numFeatures++,Or(yt,x[at],ct,K);var nt=x[at].minX,tt=x[at].minY,Ot=x[at].maxX,jt=x[at].maxY;nt<yt.minX&&(yt.minX=nt),tt<yt.minY&&(yt.minY=tt),Ot>yt.maxX&&(yt.maxX=Ot),jt>yt.maxY&&(yt.maxY=jt)}return yt}function Or(x,E,D,j){var K=E.geometry,ct=E.type,yt=[];if("Point"===ct||"MultiPoint"===ct)for(var at=0;at<K.length;at+=3)yt.push(K[at]),yt.push(K[at+1]),x.numPoints++,x.numSimplified++;else if("LineString"===ct)Mi(yt,K,x,D,!1,!1);else if("MultiLineString"===ct||"Polygon"===ct)for(at=0;at<K.length;at++)Mi(yt,K[at],x,D,"Polygon"===ct,0===at);else if("MultiPolygon"===ct)for(var nt=0;nt<K.length;nt++){var tt=K[nt];for(at=0;at<tt.length;at++)Mi(yt,tt[at],x,D,!0,0===at)}if(yt.length){var Ot=E.tags||null;if("LineString"===ct&&j.lineMetrics){for(var jt in Ot={},E.tags)Ot[jt]=E.tags[jt];Ot.mapbox_clip_start=K.start/K.size,Ot.mapbox_clip_end=K.end/K.size}var Nt={geometry:yt,type:"Polygon"===ct||"MultiPolygon"===ct?3:"LineString"===ct||"MultiLineString"===ct?2:1,tags:Ot};null!==E.id&&(Nt.id=E.id),x.features.push(Nt)}}function Mi(x,E,D,j,K,ct){var yt=j*j;if(j>0&&E.size<(K?yt:j))D.numPoints+=E.length/3;else{for(var at=[],nt=0;nt<E.length;nt+=3)(0===j||E[nt+2]>yt)&&(D.numSimplified++,at.push(E[nt]),at.push(E[nt+1])),D.numPoints++;K&&function(tt,Ot){for(var jt=0,Nt=0,fe=tt.length,he=fe-2;Nt<fe;he=Nt,Nt+=2)jt+=(tt[Nt]-tt[he])*(tt[Nt+1]+tt[he+1]);if(jt>0===Ot)for(Nt=0,fe=tt.length;Nt<fe/2;Nt+=2){var qe=tt[Nt],Be=tt[Nt+1];tt[Nt]=tt[fe-2-Nt],tt[Nt+1]=tt[fe-1-Nt],tt[fe-2-Nt]=qe,tt[fe-1-Nt]=Be}}(at,ct),x.push(at)}}function qi(x,E){var D=(E=this.options=function(K,ct){for(var yt in ct)K[yt]=ct[yt];return K}(Object.create(this.options),E)).debug;if(D&&console.time("preprocess data"),E.maxZoom<0||E.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(E.promoteId&&E.generateId)throw new Error("promoteId and generateId cannot be used together.");var K,ct,yt,at,nt,tt,j=function(K,ct){var yt=[];if("FeatureCollection"===K.type)for(var at=0;at<K.features.length;at++)tr(yt,K.features[at],ct,at);else tr(yt,"Feature"===K.type?K:{geometry:K},ct);return yt}(x,E);this.tiles={},this.tileCoords=[],D&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",E.indexMaxZoom,E.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(K=j,ct=E,yt=ct.buffer/ct.extent,at=K,nt=pt(K,1,-1-yt,yt,0,-1,2,ct),tt=pt(K,1,1-yt,2+yt,0,-1,2,ct),(nt||tt)&&(at=pt(K,1,-yt,1+yt,0,-1,2,ct)||[],nt&&(at=Ni(nt,1).concat(at)),tt&&(at=at.concat(Ni(tt,-1)))),j=at).length&&this.splitTile(j,0,0,0),D&&(j.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function _r(x,E,D){return 32*((1<<x)*D+E)+x}function ji(x,E){var D=x.tileID.canonical;if(!this._geoJSONIndex)return E(null,null);var j=this._geoJSONIndex.getTile(D.z,D.x,D.y);if(!j)return E(null,null);var K=new zt(j.features),ct=J(K);0===ct.byteOffset&&ct.byteLength===ct.buffer.byteLength||(ct=new Uint8Array(ct)),E(null,{vectorTile:K,rawData:ct.buffer})}st.prototype.load=function(x){var E=this.options,D=E.log,j=E.minZoom,K=E.maxZoom,ct=E.nodeSize;D&&console.time("total time");var yt="prepare "+x.length+" points";D&&console.time(yt),this.points=x;for(var at=[],nt=0;nt<x.length;nt++)x[nt].geometry&&at.push(me(x[nt],nt));this.trees[K+1]=new Fe(at,ne,Pe,ct,Float32Array),D&&console.timeEnd(yt);for(var tt=K;tt>=j;tt--){var Ot=+Date.now();at=this._cluster(at,tt),this.trees[tt]=new Fe(at,ne,Pe,ct,Float32Array),D&&console.log("z%d: %d clusters in %dms",tt,at.length,+Date.now()-Ot)}return D&&console.timeEnd("total time"),this},st.prototype.getClusters=function(x,E){var D=((x[0]+180)%360+360)%360-180,j=Math.max(-90,Math.min(90,x[1])),K=180===x[2]?180:((x[2]+180)%360+360)%360-180,ct=Math.max(-90,Math.min(90,x[3]));if(x[2]-x[0]>=360)D=-180,K=180;else if(D>K){var yt=this.getClusters([D,j,180,ct],E),at=this.getClusters([-180,j,K,ct],E);return yt.concat(at)}for(var nt=this.trees[this._limitZoom(E)],tt=[],Ot=0,jt=nt.range(re(D),Bt(ct),re(K),Bt(j));Ot<jt.length;Ot+=1){var fe=nt.points[jt[Ot]];tt.push(fe.numPoints?Me(fe):this.points[fe.index])}return tt},st.prototype.getChildren=function(x){var E=this._getOriginId(x),D=this._getOriginZoom(x),j="No cluster with the specified id.",K=this.trees[D];if(!K)throw new Error(j);var ct=K.points[E];if(!ct)throw new Error(j);for(var yt=this.options.radius/(this.options.extent*Math.pow(2,D-1)),at=[],nt=0,tt=K.within(ct.x,ct.y,yt);nt<tt.length;nt+=1){var jt=K.points[tt[nt]];jt.parentId===x&&at.push(jt.numPoints?Me(jt):this.points[jt.index])}if(0===at.length)throw new Error(j);return at},st.prototype.getLeaves=function(x,E,D){var j=[];return this._appendLeaves(j,x,E=E||10,D=D||0,0),j},st.prototype.getTile=function(x,E,D){var j=this.trees[this._limitZoom(x)],K=Math.pow(2,x),ct=this.options,at=ct.radius/ct.extent,nt=(D-at)/K,tt=(D+1+at)/K,Ot={features:[]};return this._addTileFeatures(j.range((E-at)/K,nt,(E+1+at)/K,tt),j.points,E,D,K,Ot),0===E&&this._addTileFeatures(j.range(1-at/K,nt,1,tt),j.points,K,D,K,Ot),E===K-1&&this._addTileFeatures(j.range(0,nt,at/K,tt),j.points,-1,D,K,Ot),Ot.features.length?Ot:null},st.prototype.getClusterExpansionZoom=function(x){for(var E=this._getOriginZoom(x)-1;E<=this.options.maxZoom;){var D=this.getChildren(x);if(E++,1!==D.length)break;x=D[0].properties.cluster_id}return E},st.prototype._appendLeaves=function(x,E,D,j,K){for(var ct=0,yt=this.getChildren(E);ct<yt.length;ct+=1){var at=yt[ct],nt=at.properties;if(nt&&nt.cluster?K+nt.point_count<=j?K+=nt.point_count:K=this._appendLeaves(x,nt.cluster_id,D,j,K):K<j?K++:x.push(at),x.length===D)break}return K},st.prototype._addTileFeatures=function(x,E,D,j,K,ct){for(var yt=0,at=x;yt<at.length;yt+=1){var nt=E[at[yt]],tt=nt.numPoints,Ot={type:1,geometry:[[Math.round(this.options.extent*(nt.x*K-D)),Math.round(this.options.extent*(nt.y*K-j))]],tags:tt?ii(nt):this.points[nt.index].properties},jt=void 0;tt?jt=nt.id:this.options.generateId?jt=nt.index:this.points[nt.index].id&&(jt=this.points[nt.index].id),void 0!==jt&&(Ot.id=jt),ct.features.push(Ot)}},st.prototype._limitZoom=function(x){return Math.max(this.options.minZoom,Math.min(x,this.options.maxZoom+1))},st.prototype._cluster=function(x,E){for(var D=[],j=this.options,yt=j.reduce,at=j.radius/(j.extent*Math.pow(2,E)),nt=0;nt<x.length;nt++){var tt=x[nt];if(!(tt.zoom<=E)){tt.zoom=E;for(var Ot=this.trees[E+1],jt=Ot.within(tt.x,tt.y,at),Nt=tt.numPoints||1,fe=tt.x*Nt,he=tt.y*Nt,qe=yt&&Nt>1?this._map(tt,!0):null,Be=(nt<<5)+(E+1)+this.points.length,ze=0,ai=jt;ze<ai.length;ze+=1){var di=Ot.points[ai[ze]];if(!(di.zoom<=E)){di.zoom=E;var Ei=di.numPoints||1;fe+=di.x*Ei,he+=di.y*Ei,Nt+=Ei,di.parentId=Be,yt&&(qe||(qe=this._map(tt,!0)),yt(qe,this._map(di)))}}1===Nt?D.push(tt):(tt.parentId=Be,D.push(Rt(fe/Nt,he/Nt,Be,Nt,qe)))}}return D},st.prototype._getOriginId=function(x){return x-this.points.length>>5},st.prototype._getOriginZoom=function(x){return(x-this.points.length)%32},st.prototype._map=function(x,E){if(x.numPoints)return E?Kt({},x.properties):x.properties;var D=this.points[x.index].properties,j=this.options.map(D);return E&&j===D?Kt({},j):j},qi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},qi.prototype.splitTile=function(x,E,D,j,K,ct,yt){for(var at=[x,E,D,j],nt=this.options,tt=nt.debug;at.length;){j=at.pop(),D=at.pop(),E=at.pop(),x=at.pop();var Ot=1<<E,jt=_r(E,D,j),Nt=this.tiles[jt];if(!Nt&&(tt>1&&console.time("creation"),Nt=this.tiles[jt]=cr(x,E,D,j,nt),this.tileCoords.push({z:E,x:D,y:j}),tt)){tt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",E,D,j,Nt.numFeatures,Nt.numPoints,Nt.numSimplified),console.timeEnd("creation"));var fe="z"+E;this.stats[fe]=(this.stats[fe]||0)+1,this.total++}if(Nt.source=x,K){if(E===nt.maxZoom||E===K)continue;var he=1<<K-E;if(D!==Math.floor(ct/he)||j!==Math.floor(yt/he))continue}else if(E===nt.indexMaxZoom||Nt.numPoints<=nt.indexMaxPoints)continue;if(Nt.source=null,0!==x.length){tt>1&&console.time("clipping");var qe,Be,ze,ai,Qe,di,Ei=.5*nt.buffer/nt.extent,Cr=.5-Ei,Ue=.5+Ei,Sr=1+Ei;qe=Be=ze=ai=null,Qe=pt(x,Ot,D-Ei,D+Ue,0,Nt.minX,Nt.maxX,nt),di=pt(x,Ot,D+Cr,D+Sr,0,Nt.minX,Nt.maxX,nt),x=null,Qe&&(qe=pt(Qe,Ot,j-Ei,j+Ue,1,Nt.minY,Nt.maxY,nt),Be=pt(Qe,Ot,j+Cr,j+Sr,1,Nt.minY,Nt.maxY,nt),Qe=null),di&&(ze=pt(di,Ot,j-Ei,j+Ue,1,Nt.minY,Nt.maxY,nt),ai=pt(di,Ot,j+Cr,j+Sr,1,Nt.minY,Nt.maxY,nt),di=null),tt>1&&console.timeEnd("clipping"),at.push(qe||[],E+1,2*D,2*j),at.push(Be||[],E+1,2*D,2*j+1),at.push(ze||[],E+1,2*D+1,2*j),at.push(ai||[],E+1,2*D+1,2*j+1)}}},qi.prototype.getTile=function(x,E,D){var j=this.options,K=j.extent,ct=j.debug;if(x<0||x>24)return null;var yt=1<<x,at=_r(x,E=(E%yt+yt)%yt,D);if(this.tiles[at])return wi(this.tiles[at],K);ct>1&&console.log("drilling down to z%d-%d-%d",x,E,D);for(var nt,tt=x,Ot=E,jt=D;!nt&&tt>0;)tt--,Ot=Math.floor(Ot/2),jt=Math.floor(jt/2),nt=this.tiles[_r(tt,Ot,jt)];return nt&&nt.source?(ct>1&&console.log("found parent tile z%d-%d-%d",tt,Ot,jt),ct>1&&console.time("drilling down"),this.splitTile(nt.source,tt,Ot,jt,x,E,D),ct>1&&console.timeEnd("drilling down"),this.tiles[at]?wi(this.tiles[at],K):null):null};var Zr=function(x){function E(D,j,K,ct){x.call(this,D,j,K,ji),ct&&(this.loadGeoJSON=ct)}return x&&(E.__proto__=x),(E.prototype=Object.create(x&&x.prototype)).constructor=E,E.prototype.loadData=function(D,j){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=j,this._pendingLoadDataParams=D,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},E.prototype._loadData=function(){var D=this;if(this._pendingCallback&&this._pendingLoadDataParams){var j=this._pendingCallback,K=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ct=!!(K&&K.request&&K.request.collectResourceTiming)&&new l.RequestPerformance(K.request);this.loadGeoJSON(K,function(yt,at){if(yt||!at)return j(yt);if("object"!=typeof at)return j(new Error("Input data given to '"+K.source+"' is not a valid GeoJSON object."));Ui(at,!0);try{D._geoJSONIndex=K.cluster?new st(function(Ot){var jt=Ot.superclusterOptions,Nt=Ot.clusterProperties;if(!Nt||!jt)return jt;for(var fe={},he={},qe={accumulated:null,zoom:0},Be={properties:null},ze=Object.keys(Nt),ai=0,Qe=ze;ai<Qe.length;ai+=1){var di=Qe[ai],Ei=Nt[di],Cr=Ei[0],Sr=l.createExpression(Ei[1]),tn=l.createExpression("string"==typeof Cr?[Cr,["accumulated"],["get",di]]:Cr);fe[di]=Sr.value,he[di]=tn.value}return jt.map=function(mr){Be.properties=mr;for(var Rr={},In=0,Xi=ze;In<Xi.length;In+=1){var vr=Xi[In];Rr[vr]=fe[vr].evaluate(qe,Be)}return Rr},jt.reduce=function(mr,Rr){Be.properties=Rr;for(var In=0,Xi=ze;In<Xi.length;In+=1){var vr=Xi[In];qe.accumulated=mr[vr],mr[vr]=he[vr].evaluate(qe,Be)}},jt}(K)).load(at.features):new qi(Ot=at,K.geojsonVtOptions)}catch(Ot){return j(Ot)}var Ot;D.loaded={};var nt={};if(ct){var tt=ct.finish();tt&&(nt.resourceTiming={},nt.resourceTiming[K.source]=JSON.parse(JSON.stringify(tt)))}j(null,nt)})}},E.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},E.prototype.reloadTile=function(D,j){var K=this.loaded;return K&&K[D.uid]?x.prototype.reloadTile.call(this,D,j):this.loadTile(D,j)},E.prototype.loadGeoJSON=function(D,j){if(D.request)l.getJSON(D.request,j);else{if("string"!=typeof D.data)return j(new Error("Input data given to '"+D.source+"' is not a valid GeoJSON object."));try{return j(null,JSON.parse(D.data))}catch(K){return j(new Error("Input data given to '"+D.source+"' is not a valid GeoJSON object."))}}},E.prototype.removeSource=function(D,j){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),j()},E.prototype.getClusterExpansionZoom=function(D,j){j(null,this._geoJSONIndex.getClusterExpansionZoom(D.clusterId))},E.prototype.getClusterChildren=function(D,j){j(null,this._geoJSONIndex.getChildren(D.clusterId))},E.prototype.getClusterLeaves=function(D,j){j(null,this._geoJSONIndex.getLeaves(D.clusterId,D.limit,D.offset))},E}(Yt),ir=function(x){var E=this;this.self=x,this.actor=new l.Actor(x,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Yt,geojson:Zr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(D,j){if(E.workerSourceTypes[D])throw new Error('Worker source with name "'+D+'" already registered.');E.workerSourceTypes[D]=j},this.self.registerRTLTextPlugin=function(D){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=D.applyArabicShaping,l.plugin.processBidirectionalText=D.processBidirectionalText,l.plugin.processStyledBidirectionalText=D.processStyledBidirectionalText}};return ir.prototype.setReferrer=function(x,E){this.referrer=E},ir.prototype.setImages=function(x,E,D){this.availableImages[x]=E,D()},ir.prototype.setLayers=function(x,E,D){this.getLayerIndex(x).replace(E),D()},ir.prototype.updateLayers=function(x,E,D){this.getLayerIndex(x).update(E.layers,E.removedIds),D()},ir.prototype.loadTile=function(x,E,D){this.getWorkerSource(x,E.type,E.source).loadTile(E,D)},ir.prototype.loadDEMTile=function(x,E,D){this.getDEMWorkerSource(x,E.source).loadTile(E,D)},ir.prototype.reloadTile=function(x,E,D){this.getWorkerSource(x,E.type,E.source).reloadTile(E,D)},ir.prototype.abortTile=function(x,E,D){this.getWorkerSource(x,E.type,E.source).abortTile(E,D)},ir.prototype.removeTile=function(x,E,D){this.getWorkerSource(x,E.type,E.source).removeTile(E,D)},ir.prototype.removeDEMTile=function(x,E){this.getDEMWorkerSource(x,E.source).removeTile(E)},ir.prototype.removeSource=function(x,E,D){if(this.workerSources[x]&&this.workerSources[x][E.type]&&this.workerSources[x][E.type][E.source]){var j=this.workerSources[x][E.type][E.source];delete this.workerSources[x][E.type][E.source],void 0!==j.removeSource?j.removeSource(E,D):D()}},ir.prototype.loadWorkerSource=function(x,E,D){try{this.self.importScripts(E.url),D()}catch(j){D(j.toString())}},ir.prototype.syncRTLPluginState=function(x,E,D){try{l.plugin.setState(E);var j=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&null!=j){this.self.importScripts(j);var K=l.plugin.isParsed();D(K?void 0:new Error("RTL Text Plugin failed to import scripts from "+j),K)}}catch(ct){D(ct.toString())}},ir.prototype.getAvailableImages=function(x){var E=this.availableImages[x];return E||(E=[]),E},ir.prototype.getLayerIndex=function(x){var E=this.layerIndexes[x];return E||(E=this.layerIndexes[x]=new N),E},ir.prototype.getWorkerSource=function(x,E,D){var j=this;return this.workerSources[x]||(this.workerSources[x]={}),this.workerSources[x][E]||(this.workerSources[x][E]={}),this.workerSources[x][E][D]||(this.workerSources[x][E][D]=new this.workerSourceTypes[E]({send:function(ct,yt,at){j.actor.send(ct,yt,at,x)}},this.getLayerIndex(x),this.getAvailableImages(x))),this.workerSources[x][E][D]},ir.prototype.getDEMWorkerSource=function(x,E){return this.demWorkerSources[x]||(this.demWorkerSources[x]={}),this.demWorkerSources[x][E]||(this.demWorkerSources[x][E]=new vt),this.demWorkerSources[x][E]},ir.prototype.enforceCacheSizeLimit=function(x,E){l.enforceCacheSizeLimit(E)},"undefined"!=typeof WorkerGlobalScope&&void 0!==l.window&&l.window instanceof WorkerGlobalScope&&(l.window.worker=new ir(l.window)),ir}),A(0,function(l){var P=l.createCommonjsModule(function(r){function o(s){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,f,y=new Blob([""],{type:"text/javascript"}),g=URL.createObjectURL(y);try{f=new Worker(g),p=!0}catch(S){p=!1}return f&&f.terminate(),URL.revokeObjectURL(g),p}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&(p=s&&s.failIfMajorPerformanceCaveat,void 0===n[p]&&(n[p]=(f=p,y=document.createElement("canvas"),(g=Object.create(o.webGLContextAttributes)).failIfMajorPerformanceCaveat=f,y.probablySupportsContext?y.probablySupportsContext("webgl",g)||y.probablySupportsContext("experimental-webgl",g):y.supportsContext?y.supportsContext("webgl",g)||y.supportsContext("experimental-webgl",g):y.getContext("webgl",g)||y.getContext("experimental-webgl",g))),n[p]));var p,f,y,g}r.exports?r.exports=o:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=o);var n={};o.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),I={create:function(r,o,n){var s=l.window.document.createElement(r);return void 0!==o&&(s.className=o),n&&n.appendChild(s),s},createNS:function(r,o){return l.window.document.createElementNS(r,o)}},N=l.window.document.documentElement.style;function et(r){if(!N)return r[0];for(var o=0;o<r.length;o++)if(r[o]in N)return r[o];return r[0]}var Lt,Zt=et(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);I.disableDrag=function(){N&&Zt&&(Lt=N[Zt],N[Zt]="none")},I.enableDrag=function(){N&&Zt&&(N[Zt]=Lt)};var Mt=et(["transform","WebkitTransform"]);I.setTransform=function(r,o){r.style[Mt]=o};var Yt=!1;try{var $t=Object.defineProperty({},"passive",{get:function(){Yt=!0}});l.window.addEventListener("test",$t,$t),l.window.removeEventListener("test",$t,$t)}catch(r){Yt=!1}I.addEventListener=function(r,o,n,s){void 0===s&&(s={}),r.addEventListener(o,n,"passive"in s&&Yt?s:s.capture)},I.removeEventListener=function(r,o,n,s){void 0===s&&(s={}),r.removeEventListener(o,n,"passive"in s&&Yt?s:s.capture)};var vt=function(r){r.preventDefault(),r.stopPropagation(),l.window.removeEventListener("click",vt,!0)};function lt(r){var o=r.userImage;return!!(o&&o.render&&o.render())&&(r.data.replace(new Uint8Array(o.data.buffer)),!0)}I.suppressClick=function(){l.window.addEventListener("click",vt,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",vt,!0)},0)},I.mousePos=function(r,o){var n=r.getBoundingClientRect(),s=l.window.TouchEvent&&o instanceof l.window.TouchEvent?o.touches[0]:o;return new l.Point(s.clientX-n.left-r.clientLeft,s.clientY-n.top-r.clientTop)},I.touchPos=function(r,o){for(var n=r.getBoundingClientRect(),s=[],p="touchend"===o.type?o.changedTouches:o.touches,f=0;f<p.length;f++)s.push(new l.Point(p[f].clientX-n.left-r.clientLeft,p[f].clientY-n.top-r.clientTop));return s},I.mouseButton=function(r){return void 0!==l.window.InstallTrigger&&2===r.button&&r.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:r.button},I.remove=function(r){r.parentNode&&r.parentNode.removeChild(r)};var Vt=function(r){function o(){r.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.isLoaded=function(){return this.loaded},o.prototype.setLoaded=function(n){if(this.loaded!==n&&(this.loaded=n,n)){for(var s=0,p=this.requestors;s<p.length;s+=1){var f=p[s];this._notify(f.ids,f.callback)}this.requestors=[]}},o.prototype.getImage=function(n){return this.images[n]},o.prototype.addImage=function(n,s){this._validate(n,s)&&(this.images[n]=s)},o.prototype._validate=function(n,s){var p=!0;return this._validateStretch(s.stretchX,s.data&&s.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+n+'" has invalid "stretchX" value'))),p=!1),this._validateStretch(s.stretchY,s.data&&s.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+n+'" has invalid "stretchY" value'))),p=!1),this._validateContent(s.content,s)||(this.fire(new l.ErrorEvent(new Error('Image "'+n+'" has invalid "content" value'))),p=!1),p},o.prototype._validateStretch=function(n,s){if(!n)return!0;for(var p=0,f=0,y=n;f<y.length;f+=1){var g=y[f];if(g[0]<p||g[1]<g[0]||s<g[1])return!1;p=g[1]}return!0},o.prototype._validateContent=function(n,s){return!(n&&(4!==n.length||n[0]<0||s.data.width<n[0]||n[1]<0||s.data.height<n[1]||n[2]<0||s.data.width<n[2]||n[3]<0||s.data.height<n[3]||n[2]<n[0]||n[3]<n[1]))},o.prototype.updateImage=function(n,s){s.version=this.images[n].version+1,this.images[n]=s,this.updatedImages[n]=!0},o.prototype.removeImage=function(n){var s=this.images[n];delete this.images[n],delete this.patterns[n],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()},o.prototype.listImages=function(){return Object.keys(this.images)},o.prototype.getImages=function(n,s){var p=!0;if(!this.isLoaded())for(var f=0,y=n;f<y.length;f+=1)this.images[y[f]]||(p=!1);this.isLoaded()||p?this._notify(n,s):this.requestors.push({ids:n,callback:s})},o.prototype._notify=function(n,s){for(var p={},f=0,y=n;f<y.length;f+=1){var g=y[f];this.images[g]||this.fire(new l.Event("styleimagemissing",{id:g}));var S=this.images[g];S?p[g]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:Boolean(S.userImage&&S.userImage.render)}:l.warnOnce('Image "'+g+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}s(null,p)},o.prototype.getPixelSize=function(){var n=this.atlasImage;return{width:n.width,height:n.height}},o.prototype.getPattern=function(n){var s=this.patterns[n],p=this.getImage(n);if(!p)return null;if(s&&s.position.version===p.version)return s.position;if(s)s.position.version=p.version;else{var f={w:p.data.width+2,h:p.data.height+2,x:0,y:0},y=new l.ImagePosition(f,p);this.patterns[n]={bin:f,position:y}}return this._updatePatternAtlas(),this.patterns[n].position},o.prototype.bind=function(n){var s=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(n,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)},o.prototype._updatePatternAtlas=function(){var n=[];for(var s in this.patterns)n.push(this.patterns[s].bin);var p=l.potpack(n),f=p.w,y=p.h,g=this.atlasImage;for(var S in g.resize({width:f||1,height:y||1}),this.patterns){var k=this.patterns[S].bin,L=k.x+1,U=k.y+1,X=this.images[S].data,W=X.width,G=X.height;l.RGBAImage.copy(X,g,{x:0,y:0},{x:L,y:U},{width:W,height:G}),l.RGBAImage.copy(X,g,{x:0,y:G-1},{x:L,y:U-1},{width:W,height:1}),l.RGBAImage.copy(X,g,{x:0,y:0},{x:L,y:U+G},{width:W,height:1}),l.RGBAImage.copy(X,g,{x:W-1,y:0},{x:L-1,y:U},{width:1,height:G}),l.RGBAImage.copy(X,g,{x:0,y:0},{x:L+W,y:U},{width:1,height:G})}this.dirty=!0},o.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},o.prototype.dispatchRenderCallbacks=function(n){for(var s=0,p=n;s<p.length;s+=1){var f=p[s];if(!this.callbackDispatchedThisFrame[f]){this.callbackDispatchedThisFrame[f]=!0;var y=this.images[f];lt(y)&&this.updateImage(f,y)}}},o}(l.Evented),xe=Ui,Ze=Ui,Ye=1e20;function Ui(r,o,n,s,p,f){this.fontSize=r||24,this.buffer=void 0===o?3:o,this.cutoff=s||.25,this.fontFamily=p||"sans-serif",this.fontWeight=f||"normal",this.radius=n||8;var y=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=y,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(y*y),this.gridInner=new Float64Array(y*y),this.f=new Float64Array(y),this.d=new Float64Array(y),this.z=new Float64Array(y+1),this.v=new Int16Array(y),this.middle=Math.round(y/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function q(r,o,n,s,p,f,y){for(var g=0;g<o;g++){for(var S=0;S<n;S++)s[S]=r[S*o+g];for(Wi(s,p,f,y,n),S=0;S<n;S++)r[S*o+g]=p[S]}for(S=0;S<n;S++){for(g=0;g<o;g++)s[g]=r[S*o+g];for(Wi(s,p,f,y,o),g=0;g<o;g++)r[S*o+g]=Math.sqrt(p[g])}}function Wi(r,o,n,s,p){n[0]=0,s[0]=-Ye,s[1]=+Ye;for(var f=1,y=0;f<p;f++){for(var g=(r[f]+f*f-(r[n[y]]+n[y]*n[y]))/(2*f-2*n[y]);g<=s[y];)y--,g=(r[f]+f*f-(r[n[y]]+n[y]*n[y]))/(2*f-2*n[y]);n[++y]=f,s[y]=g,s[y+1]=+Ye}for(f=0,y=0;f<p;f++){for(;s[y+1]<f;)y++;o[f]=(f-n[y])*(f-n[y])+r[n[y]]}}Ui.prototype.draw=function(r){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(r,this.buffer,this.middle);for(var o=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),s=0;s<this.size*this.size;s++){var p=o.data[4*s+3]/255;this.gridOuter[s]=1===p?0:0===p?Ye:Math.pow(Math.max(0,.5-p),2),this.gridInner[s]=1===p?Ye:0===p?0:Math.pow(Math.max(0,p-.5),2)}for(q(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),q(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),s=0;s<this.size*this.size;s++)n[s]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[s]-this.gridInner[s])/this.radius+this.cutoff))));return n},xe.default=Ze;var Ti=function(r,o){this.requestManager=r,this.localIdeographFontFamily=o,this.entries={}};Ti.prototype.setURL=function(r){this.url=r},Ti.prototype.getGlyphs=function(r,o){var n=this,s=[];for(var p in r)for(var f=0,y=r[p];f<y.length;f+=1)s.push({stack:p,id:y[f]});l.asyncAll(s,function(S,k){var L=S.stack,U=S.id,X=n.entries[L];X||(X=n.entries[L]={glyphs:{},requests:{}});var W=X.glyphs[U];if(void 0===W){if(W=n._tinySDF(X,L,U))return X.glyphs[U]=W,void k(null,{stack:L,id:U,glyph:W});var G=Math.floor(U/256);if(256*G>65535)k(new Error("glyphs > 65535 not supported"));else{var H=X.requests[G];H||(H=X.requests[G]=[],Ti.loadGlyphRange(L,G,n.url,n.requestManager,function(ft,ut){if(ut)for(var _t in ut)n._doesCharSupportLocalGlyph(+_t)||(X.glyphs[+_t]=ut[+_t]);for(var St=0,Ct=H;St<Ct.length;St+=1)(0,Ct[St])(ft,ut);delete X.requests[G]})),H.push(function(ft,ut){ft?k(ft):ut&&k(null,{stack:L,id:U,glyph:ut[U]||null})})}}else k(null,{stack:L,id:U,glyph:W})},function(S,k){if(S)o(S);else if(k){for(var L={},U=0,X=k;U<X.length;U+=1){var W=X[U],G=W.stack,H=W.id,ft=W.glyph;(L[G]||(L[G]={}))[H]=ft&&{id:ft.id,bitmap:ft.bitmap.clone(),metrics:ft.metrics}}o(null,L)}})},Ti.prototype._doesCharSupportLocalGlyph=function(r){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](r)||l.isChar["Hangul Syllables"](r)||l.isChar.Hiragana(r)||l.isChar.Katakana(r))},Ti.prototype._tinySDF=function(r,o,n){var s=this.localIdeographFontFamily;if(s&&this._doesCharSupportLocalGlyph(n)){var p=r.tinySDF;if(!p){var f="400";/bold/i.test(o)?f="900":/medium/i.test(o)?f="500":/light/i.test(o)&&(f="200"),p=r.tinySDF=new Ti.TinySDF(24,3,8,.25,s,f)}return{id:n,bitmap:new l.AlphaImage({width:30,height:30},p.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Ti.loadGlyphRange=function(r,o,n,s,p){var f=256*o,y=f+255,g=s.transformRequest(s.normalizeGlyphsURL(n).replace("{fontstack}",r).replace("{range}",f+"-"+y),l.ResourceType.Glyphs);l.getArrayBuffer(g,function(S,k){if(S)p(S);else if(k){for(var L={},U=0,X=l.parseGlyphPBF(k);U<X.length;U+=1){var W=X[U];L[W.id]=W}p(null,L)}})},Ti.TinySDF=xe;var ti=function(){this.specification=l.styleSpec.light.position};ti.prototype.possiblyEvaluate=function(r,o){return l.sphericalToCartesian(r.expression.evaluate(o))},ti.prototype.interpolate=function(r,o,n){return{x:l.number(r.x,o.x,n),y:l.number(r.y,o.y,n),z:l.number(r.z,o.z,n)}};var ae=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new ti,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),zt=function(r){function o(n){r.call(this),this._transitionable=new l.Transitionable(ae),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getLight=function(){return this._transitionable.serialize()},o.prototype.setLight=function(n,s){if(void 0===s&&(s={}),!this._validate(l.validateLight,n,s))for(var p in n){var f=n[p];l.endsWith(p,"-transition")?this._transitionable.setTransition(p.slice(0,-11),f):this._transitionable.setValue(p,f)}},o.prototype.updateTransitions=function(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)},o.prototype.hasTransition=function(){return this._transitioning.hasTransition()},o.prototype.recalculate=function(n){this.properties=this._transitioning.possiblyEvaluate(n)},o.prototype._validate=function(n,s,p){return(!p||!1!==p.validate)&&l.emitValidationErrors(this,n.call(l.validateStyle,l.extend({value:s,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},o}(l.Evented),Ht=function(r,o){this.width=r,this.height=o,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};Ht.prototype.getDash=function(r,o){var n=r.join(",")+String(o);return this.positions[n]||(this.positions[n]=this.addDash(r,o)),this.positions[n]},Ht.prototype.addDash=function(r,o){var n=o?7:0,s=2*n+1;if(this.nextRow+s>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var p=0,f=0;f<r.length;f++)p+=r[f];for(var y=this.width/p,g=y/2,S=r.length%2==1,k=-n;k<=n;k++)for(var U=this.width*(this.nextRow+n+k),X=S?-r[r.length-1]:0,W=r[0],G=1,H=0;H<this.width;H++){for(;W<H/y;)X=W,W+=r[G],S&&G===r.length-1&&(W+=r[0]),G++;var ft=Math.abs(H-X*y),ut=Math.abs(H-W*y),_t=Math.min(ft,ut),St=G%2==1,Ct=void 0;if(o){var Ut=n?k/n*(g+1):0;if(St){var te=g-Math.abs(Ut);Ct=Math.sqrt(_t*_t+te*te)}else Ct=g-Math.sqrt(_t*_t+Ut*Ut)}else Ct=(St?1:-1)*_t;this.data[3+4*(U+H)]=Math.max(0,Math.min(255,Ct+128))}var le={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:p};return this.nextRow+=s,this.dirty=!0,le},Ht.prototype.bind=function(r){var o=r.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.RGBA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,this.width,this.height,0,o.RGBA,o.UNSIGNED_BYTE,this.data))};var ht=function r(o,n){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var s=this.workerPool.acquire(this.id),p=0;p<s.length;p++){var y=new r.Actor(s[p],n,this.id);y.name="Worker "+p,this.actors.push(y)}};function mt(r,o,n){var s=function(p,f){if(p)return n(p);if(f){var y=l.pick(l.extend(f,r),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);f.vector_layers&&(y.vectorLayers=f.vector_layers,y.vectorLayerIds=y.vectorLayers.map(function(g){return g.id})),r.url&&(y.tiles=o.canonicalizeTileset(y,r.url)),n(null,y)}};return r.url?l.getJSON(o.transformRequest(o.normalizeSourceURL(r.url),l.ResourceType.Source),s):l.browser.frame(function(){return s(null,r)})}ht.prototype.broadcast=function(r,o,n){l.asyncAll(this.actors,function(s,p){s.send(r,o,p)},n=n||function(){})},ht.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},ht.prototype.remove=function(){this.actors.forEach(function(r){r.remove()}),this.actors=[],this.workerPool.release(this.id)},ht.Actor=l.Actor;var rt=function(r,o,n){this.bounds=l.LngLatBounds.convert(this.validateBounds(r)),this.minzoom=o||0,this.maxzoom=n||24};rt.prototype.validateBounds=function(r){return Array.isArray(r)&&4===r.length?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]},rt.prototype.contains=function(r){var o=Math.pow(2,r.z),n=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*o),s=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*o),p=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*o),f=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*o);return r.x>=n&&r.x<p&&r.y>=s&&r.y<f};var J=function(r){function o(n,s,p,f){if(r.call(this),this.id=n,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(s,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.load=function(){var n=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=mt(this._options,this.map._requestManager,function(s,p){n._tileJSONRequest=null,n._loaded=!0,s?n.fire(new l.ErrorEvent(s)):p&&(l.extend(n,p),p.bounds&&(n.tileBounds=new rt(p.bounds,n.minzoom,n.maxzoom)),l.postTurnstileEvent(p.tiles,n.map._requestManager._customAccessToken),l.postMapLoadEvent(p.tiles,n.map._getMapId(),n.map._requestManager._skuToken,n.map._requestManager._customAccessToken),n.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},o.prototype.loaded=function(){return this._loaded},o.prototype.hasTile=function(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)},o.prototype.onAdd=function(n){this.map=n,this.load()},o.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},o.prototype.serialize=function(){return l.extend({},this._options)},o.prototype.loadTile=function(n,s){var p=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.url,null),f={request:this.map._requestManager.transformRequest(p,l.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function y(g,S){return delete n.request,n.aborted?s(null):g&&404!==g.status?s(g):(S&&S.resourceTiming&&(n.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&n.setExpiryData(S),n.loadVectorData(S,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),s(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}f.request.collectResourceTiming=this._collectResourceTiming,n.actor&&"expired"!==n.state?"loading"===n.state?n.reloadCallback=s:n.request=n.actor.send("reloadTile",f,y.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",f,y.bind(this)))},o.prototype.abortTile=function(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0)},o.prototype.unloadTile=function(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0)},o.prototype.hasTransition=function(){return!1},o}(l.Evented),d=function(r){function o(n,s,p,f){r.call(this),this.id=n,this.dispatcher=p,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},s),l.extend(this,l.pick(s,["url","scheme","tileSize"]))}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.load=function(){var n=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=mt(this._options,this.map._requestManager,function(s,p){n._tileJSONRequest=null,n._loaded=!0,s?n.fire(new l.ErrorEvent(s)):p&&(l.extend(n,p),p.bounds&&(n.tileBounds=new rt(p.bounds,n.minzoom,n.maxzoom)),l.postTurnstileEvent(p.tiles),l.postMapLoadEvent(p.tiles,n.map._getMapId(),n.map._requestManager._skuToken),n.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},o.prototype.loaded=function(){return this._loaded},o.prototype.onAdd=function(n){this.map=n,this.load()},o.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},o.prototype.serialize=function(){return l.extend({},this._options)},o.prototype.hasTile=function(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)},o.prototype.loadTile=function(n,s){var p=this,f=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);n.request=l.getImage(this.map._requestManager.transformRequest(f,l.ResourceType.Tile),function(y,g){if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(y)n.state="errored",s(y);else if(g){p.map._refreshExpiredTiles&&n.setExpiryData(g),delete g.cacheControl,delete g.expires;var S=p.map.painter.context,k=S.gl;n.texture=p.map.painter.getTileTexture(g.width),n.texture?n.texture.update(g,{useMipmap:!0}):(n.texture=new l.Texture(S,g,k.RGBA,{useMipmap:!0}),n.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),S.extTextureFilterAnisotropic&&k.texParameterf(k.TEXTURE_2D,S.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,S.extTextureFilterAnisotropicMax)),n.state="loaded",l.cacheEntryPossiblyAdded(p.dispatcher),s(null)}})},o.prototype.abortTile=function(n,s){n.request&&(n.request.cancel(),delete n.request),s()},o.prototype.unloadTile=function(n,s){n.texture&&this.map.painter.saveTileTexture(n.texture),s()},o.prototype.hasTransition=function(){return!1},o}(l.Evented),Pt=function(r){function o(n,s,p,f){r.call(this,n,s,p,f),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},o.prototype.loadTile=function(n,s){var p=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);function f(y,g){y&&(n.state="errored",s(y)),g&&(n.dem=g,n.needsHillshadePrepare=!0,n.state="loaded",s(null))}n.request=l.getImage(this.map._requestManager.transformRequest(p,l.ResourceType.Tile),function(y,g){if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(y)n.state="errored",s(y);else if(g){this.map._refreshExpiredTiles&&n.setExpiryData(g),delete g.cacheControl,delete g.expires;var S=l.window.ImageBitmap&&g instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?g:l.browser.getImageData(g,1),k={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:S,encoding:this.encoding};n.actor&&"expired"!==n.state||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",k,f.bind(this)))}}.bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)},o.prototype._getNeighboringTiles=function(n){var s=n.canonical,p=Math.pow(2,s.z),f=(s.x-1+p)%p,y=0===s.x?n.wrap-1:n.wrap,g=(s.x+1+p)%p,S=s.x+1===p?n.wrap+1:n.wrap,k={};return k[new l.OverscaledTileID(n.overscaledZ,y,s.z,f,s.y).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,S,s.z,g,s.y).key]={backfilled:!1},s.y>0&&(k[new l.OverscaledTileID(n.overscaledZ,y,s.z,f,s.y-1).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,S,s.z,g,s.y-1).key]={backfilled:!1}),s.y+1<p&&(k[new l.OverscaledTileID(n.overscaledZ,y,s.z,f,s.y+1).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},k[new l.OverscaledTileID(n.overscaledZ,S,s.z,g,s.y+1).key]={backfilled:!1}),k},o.prototype.unloadTile=function(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id})},o}(d),Et=function(r){function o(n,s,p,f){r.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=p.getActor(),this.setEventedParent(f),this._data=s.data,this._options=l.extend({},s),this._collectResourceTiming=s.collectResourceTiming,this._resourceTiming=[],void 0!==s.maxzoom&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;var y=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(void 0!==s.buffer?s.buffer:128)*y,tolerance:(void 0!==s.tolerance?s.tolerance:.375)*y,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:void 0!==s.clusterMaxZoom?Math.min(s.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:l.EXTENT,radius:(s.clusterRadius||50)*y,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties},s.workerOptions)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.load=function(){var n=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(s){if(s)n.fire(new l.ErrorEvent(s));else{var p={dataType:"source",sourceDataType:"metadata"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(p.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new l.Event("data",p))}})},o.prototype.onAdd=function(n){this.map=n,this.load()},o.prototype.setData=function(n){var s=this;return this._data=n,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(p){if(p)s.fire(new l.ErrorEvent(p));else{var f={dataType:"source",sourceDataType:"content"};s._collectResourceTiming&&s._resourceTiming&&s._resourceTiming.length>0&&(f.resourceTiming=s._resourceTiming,s._resourceTiming=[]),s.fire(new l.Event("data",f))}}),this},o.prototype.getClusterExpansionZoom=function(n,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},s),this},o.prototype.getClusterChildren=function(n,s){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},s),this},o.prototype.getClusterLeaves=function(n,s,p,f){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:s,offset:p},f),this},o.prototype._updateWorkerData=function(n){var s=this;this._loaded=!1;var p=l.extend({},this.workerOptions),f=this._data;"string"==typeof f?(p.request=this.map._requestManager.transformRequest(l.browser.resolveURL(f),l.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(f),this.actor.send(this.type+".loadData",p,function(y,g){s._removed||g&&g.abandoned||(s._loaded=!0,g&&g.resourceTiming&&g.resourceTiming[s.id]&&(s._resourceTiming=g.resourceTiming[s.id].slice(0)),s.actor.send(s.type+".coalesce",{source:p.source},null),n(y))})},o.prototype.loaded=function(){return this._loaded},o.prototype.loadTile=function(n,s){var p=this,f=n.actor?"reloadTile":"loadTile";n.actor=this.actor,n.request=this.actor.send(f,{type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(g,S){return delete n.request,n.unloadVectorData(),n.aborted?s(null):g?s(g):(n.loadVectorData(S,p.map.painter,"reloadTile"===f),s(null))})},o.prototype.abortTile=function(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0},o.prototype.unloadTile=function(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})},o.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},o.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},o.prototype.hasTransition=function(){return!1},o}(l.Evented),se=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ie=function(r){function o(n,s,p,f){r.call(this),this.id=n,this.dispatcher=p,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=s}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.load=function(n,s){var p=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(f,y){p._loaded=!0,f?p.fire(new l.ErrorEvent(f)):y&&(p.image=y,n&&(p.coordinates=n),s&&s(),p._finishLoading())})},o.prototype.loaded=function(){return this._loaded},o.prototype.updateImage=function(n){var s=this;return this.image&&n.url?(this.options.url=n.url,this.load(n.coordinates,function(){s.texture=null}),this):this},o.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},o.prototype.onAdd=function(n){this.map=n,this.load()},o.prototype.setCoordinates=function(n){var s=this;this.coordinates=n;var p=n.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(y){for(var g=1/0,S=1/0,k=-1/0,L=-1/0,U=0,X=y;U<X.length;U+=1){var W=X[U];g=Math.min(g,W.x),S=Math.min(S,W.y),k=Math.max(k,W.x),L=Math.max(L,W.y)}var ft=Math.max(k-g,L-S),ut=Math.max(0,Math.floor(-Math.log(ft)/Math.LN2)),_t=Math.pow(2,ut);return new l.CanonicalTileID(ut,Math.floor((g+k)/2*_t),Math.floor((S+L)/2*_t))}(p),this.minzoom=this.maxzoom=this.tileID.z;var f=p.map(function(y){return s.tileID.getTilePoint(y)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(f[2].x,f[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},o.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var n=this.map.painter.context,s=n.gl;for(var p in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,se.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE)),this.tiles){var f=this.tiles[p];"loaded"!==f.state&&(f.state="loaded",f.texture=this.texture)}}},o.prototype.loadTile=function(n,s){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},s(null)):(n.state="errored",s(null))},o.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},o.prototype.hasTransition=function(){return!1},o}(l.Evented),ei=function(r){function o(n,s,p,f){r.call(this,n,s,p,f),this.roundZoom=!0,this.type="video",this.options=s}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.load=function(){var n=this;this._loaded=!1;var s=this.options;this.urls=[];for(var p=0,f=s.urls;p<f.length;p+=1)this.urls.push(this.map._requestManager.transformRequest(f[p],l.ResourceType.Source).url);l.getVideo(this.urls,function(g,S){n._loaded=!0,g?n.fire(new l.ErrorEvent(g)):S&&(n.video=S,n.video.loop=!0,n.video.addEventListener("playing",function(){n.map.triggerRepaint()}),n.map&&n.video.play(),n._finishLoading())})},o.prototype.pause=function(){this.video&&this.video.pause()},o.prototype.play=function(){this.video&&this.video.play()},o.prototype.seek=function(n){if(this.video){var s=this.video.seekable;n<s.start(0)||n>s.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+s.start(0)+" and "+s.end(0)+"-second mark."))):this.video.currentTime=n}},o.prototype.getVideo=function(){return this.video},o.prototype.onAdd=function(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},o.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var n=this.map.painter.context,s=n.gl;for(var p in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,se.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(n,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE)),this.tiles){var f=this.tiles[p];"loaded"!==f.state&&(f.state="loaded",f.texture=this.texture)}}},o.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},o.prototype.hasTransition=function(){return this.video&&!this.video.paused},o}(Ie),_e=function(r){function o(n,s,p,f){r.call(this,n,s,p,f),s.coordinates?Array.isArray(s.coordinates)&&4===s.coordinates.length&&!s.coordinates.some(function(y){return!Array.isArray(y)||2!==y.length||y.some(function(g){return"number"!=typeof g})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+n,null,'missing required property "coordinates"'))),s.animate&&"boolean"!=typeof s.animate&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),s.canvas?"string"==typeof s.canvas||s.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=s,this.animate=void 0===s.animate||s.animate}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},o.prototype.getCanvas=function(){return this.canvas},o.prototype.onAdd=function(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()},o.prototype.onRemove=function(){this.pause()},o.prototype.prepare=function(){var n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var s=this.map.painter.context,p=s.gl;for(var f in this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,se.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(s,this.canvas,p.RGBA,{premultiply:!0}),this.tiles){var y=this.tiles[f];"loaded"!==y.state&&(y.state="loaded",y.texture=this.texture)}}},o.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},o.prototype.hasTransition=function(){return this._playing},o.prototype._hasInvalidDimensions=function(){for(var n=0,s=[this.canvas.width,this.canvas.height];n<s.length;n+=1){var p=s[n];if(isNaN(p)||p<=0)return!0}return!1},o}(Ie),Ri={vector:J,raster:d,"raster-dem":Pt,geojson:Et,video:ei,image:Ie,canvas:_e};function _i(r,o){var n=l.identity([]);return l.translate(n,n,[1,1,0]),l.scale(n,n,[.5*r.width,.5*r.height,1]),l.multiply(n,n,r.calculatePosMatrix(o.toUnwrapped()))}function Hr(r,o,n,s,p){var f=function(G,H,ft){if(G)for(var ut=0,_t=G;ut<_t.length;ut+=1){var St=H[_t[ut]];if(St&&St.source===ft&&"fill-extrusion"===St.type)return!0}else for(var Ct in H){var Ut=H[Ct];if(Ut.source===ft&&"fill-extrusion"===Ut.type)return!0}return!1}(s&&s.layers,o,r.id),y=p.maxPitchScaleFactor(),g=r.tilesIn(n,y,f);g.sort(Tr);for(var S=[],k=0,L=g;k<L.length;k+=1){var U=L[k];S.push({wrappedTileID:U.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(o,r._state,U.queryGeometry,U.cameraQueryGeometry,U.scale,s,p,y,_i(r.transform,U.tileID))})}var X=function(G){for(var H={},ft={},ut=0,_t=G;ut<_t.length;ut+=1){var St=_t[ut],Ct=St.queryResults,Ut=St.wrappedTileID,te=ft[Ut]=ft[Ut]||{};for(var le in Ct)for(var De=Ct[le],Ce=te[le]=te[le]||{},$e=H[le]=H[le]||[],Se=0,fi=De;Se<fi.length;Se+=1){var ni=fi[Se];Ce[ni.featureIndex]||(Ce[ni.featureIndex]=!0,$e.push(ni))}}return H}(S);for(var W in X)X[W].forEach(function(G){var H=G.feature,ft=r.getFeatureState(H.layer["source-layer"],H.id);H.source=H.layer.source,H.layer["source-layer"]&&(H.sourceLayer=H.layer["source-layer"]),H.state=ft});return X}function Tr(r,o){var n=r.tileID,s=o.tileID;return n.overscaledZ-s.overscaledZ||n.canonical.y-s.canonical.y||n.wrap-s.wrap||n.canonical.x-s.canonical.x}var sr=function(r,o){this.max=r,this.onRemove=o,this.reset()};sr.prototype.reset=function(){for(var r in this.data)for(var o=0,n=this.data[r];o<n.length;o+=1){var s=n[o];s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value)}return this.data={},this.order=[],this},sr.prototype.add=function(r,o,n){var s=this,p=r.wrapped().key;void 0===this.data[p]&&(this.data[p]=[]);var f={value:o,timeout:void 0};if(void 0!==n&&(f.timeout=setTimeout(function(){s.remove(r,f)},n)),this.data[p].push(f),this.order.push(p),this.order.length>this.max){var y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this},sr.prototype.has=function(r){return r.wrapped().key in this.data},sr.prototype.getAndRemove=function(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null},sr.prototype._getAndRemoveByKey=function(r){var o=this.data[r].shift();return o.timeout&&clearTimeout(o.timeout),0===this.data[r].length&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),o.value},sr.prototype.getByKey=function(r){var o=this.data[r];return o?o[0].value:null},sr.prototype.get=function(r){return this.has(r)?this.data[r.wrapped().key][0].value:null},sr.prototype.remove=function(r,o){if(!this.has(r))return this;var n=r.wrapped().key,s=void 0===o?0:this.data[n].indexOf(o),p=this.data[n][s];return this.data[n].splice(s,1),p.timeout&&clearTimeout(p.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(p.value),this.order.splice(this.order.indexOf(n),1),this},sr.prototype.setMaxSize=function(r){for(this.max=r;this.order.length>this.max;){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},sr.prototype.filter=function(r){var o=[];for(var n in this.data)for(var s=0,p=this.data[n];s<p.length;s+=1){var f=p[s];r(f.value)||o.push(f)}for(var y=0,g=o;y<g.length;y+=1){var S=g[y];this.remove(S.value.tileID,S)}};var Tn=function(r,o,n){this.context=r;var s=r.gl;this.buffer=s.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),s.bufferData(s.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?s.DYNAMIC_DRAW:s.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer};Tn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Tn.prototype.updateData=function(r){var o=this.context.gl;this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)},Tn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ln={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Dt=function(r,o,n,s){this.length=o.length,this.attributes=n,this.itemSize=o.bytesPerElement,this.dynamicDraw=s,this.context=r;var p=r.gl;this.buffer=p.createBuffer(),r.bindVertexBuffer.set(this.buffer),p.bufferData(p.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer};Dt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Dt.prototype.updateData=function(r){var o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,r.arrayBuffer)},Dt.prototype.enableAttributes=function(r,o){for(var n=0;n<this.attributes.length;n++){var p=o.attributes[this.attributes[n].name];void 0!==p&&r.enableVertexAttribArray(p)}},Dt.prototype.setVertexAttribPointers=function(r,o,n){for(var s=0;s<this.attributes.length;s++){var p=this.attributes[s],f=o.attributes[p.name];void 0!==f&&r.vertexAttribPointer(f,p.components,r[Ln[p.type]],!1,this.itemSize,p.offset+this.itemSize*(n||0))}},Dt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ft=function(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ft.prototype.get=function(){return this.current},Ft.prototype.set=function(r){},Ft.prototype.getDefault=function(){return this.default},Ft.prototype.setDefault=function(){this.set(this.default)};var Fe=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return l.Color.transparent},o.prototype.set=function(n){var s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)},o}(Ft),Le=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return 1},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)},o}(Ft),st=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return 0},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)},o}(Ft),Rt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return[!0,!0,!0,!0]},o.prototype.set=function(n){var s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)},o}(Ft),me=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!0},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)},o}(Ft),Me=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return 255},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)},o}(Ft),ii=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},o.prototype.set=function(n){var s=this.current;(n.func!==s.func||n.ref!==s.ref||n.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)},o}(Ft),re=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){var n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]},o.prototype.set=function(n){var s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)},o}(Ft),Bt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!1},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;n?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=n,this.dirty=!1}},o}(Ft),Kt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return[0,1]},o.prototype.set=function(n){var s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)},o}(Ft),ne=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!1},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;n?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=n,this.dirty=!1}},o}(Ft),Pe=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return this.gl.LESS},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)},o}(Ft),oi=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!1},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;n?s.enable(s.BLEND):s.disable(s.BLEND),this.current=n,this.dirty=!1}},o}(Ft),Ci=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){var n=this.gl;return[n.ONE,n.ZERO]},o.prototype.set=function(n){var s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)},o}(Ft),ar=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return l.Color.transparent},o.prototype.set=function(n){var s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)},o}(Ft),tr=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return this.gl.FUNC_ADD},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)},o}(Ft),Qr=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!1},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;n?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=n,this.dirty=!1}},o}(Ft),vn=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return this.gl.BACK},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)},o}(Ft),Xr=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return this.gl.CCW},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)},o}(Ft),dn=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)},o}(Ft),xt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return this.gl.TEXTURE0},o.prototype.set=function(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)},o}(Ft),pt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){var n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]},o.prototype.set=function(n){var s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)},o}(Ft),Wt=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,n),this.current=n,this.dirty=!1}},o}(Ft),ue=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,n),this.current=n,this.dirty=!1}},o}(Ft),We=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.bindTexture(s.TEXTURE_2D,n),this.current=n,this.dirty=!1}},o}(Ft),ri=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}},o}(Ft),Ne=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){var s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1},o}(Ft),zi=function(r){function o(n){r.call(this,n),this.vao=n.extVertexArrayObject}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o.prototype.set=function(n){this.vao&&(n!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(n),this.current=n,this.dirty=!1)},o}(Ft),Fi=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return 4},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}},o}(Ft),Ni=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!1},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}},o}(Ft),Ii=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return!1},o.prototype.set=function(n){if(n!==this.current||this.dirty){var s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}},o}(Ft),wi=function(r){function o(n,s){r.call(this,n),this.context=n,this.parent=s}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getDefault=function(){return null},o}(Ft),Li=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.setDirty=function(){this.dirty=!0},o.prototype.set=function(n){if(n!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}},o}(wi),cr=function(r){function o(){r.apply(this,arguments)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.set=function(n){if(n!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}},o}(wi),Or=function(r,o,n){this.context=r,this.width=o,this.height=n;var p=this.framebuffer=r.gl.createFramebuffer();this.colorAttachment=new Li(r,p),this.depthAttachment=new cr(r,p)};Or.prototype.destroy=function(){var r=this.context.gl,o=this.colorAttachment.get();o&&r.deleteTexture(o);var n=this.depthAttachment.get();n&&r.deleteRenderbuffer(n),r.deleteFramebuffer(this.framebuffer)};var Mi=function(r,o,n){this.func=r,this.mask=o,this.range=n};Mi.ReadOnly=!1,Mi.ReadWrite=!0,Mi.disabled=new Mi(519,Mi.ReadOnly,[0,1]);var qi=function(r,o,n,s,p,f){this.test=r,this.ref=o,this.mask=n,this.fail=s,this.depthFail=p,this.pass=f};qi.disabled=new qi({func:519,mask:0},0,0,7680,7680,7680);var _r=function(r,o,n){this.blendFunction=r,this.blendColor=o,this.mask=n};_r.disabled=new _r(_r.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),_r.unblended=new _r(_r.Replace,l.Color.transparent,[!0,!0,!0,!0]),_r.alphaBlended=new _r([1,771],l.Color.transparent,[!0,!0,!0,!0]);var ji=function(r,o,n){this.enable=r,this.mode=o,this.frontFace=n};ji.disabled=new ji(!1,1029,2305),ji.backCCW=new ji(!0,1029,2305);var Zr=function(r){this.gl=r,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Fe(this),this.clearDepth=new Le(this),this.clearStencil=new st(this),this.colorMask=new Rt(this),this.depthMask=new me(this),this.stencilMask=new Me(this),this.stencilFunc=new ii(this),this.stencilOp=new re(this),this.stencilTest=new Bt(this),this.depthRange=new Kt(this),this.depthTest=new ne(this),this.depthFunc=new Pe(this),this.blend=new oi(this),this.blendFunc=new Ci(this),this.blendColor=new ar(this),this.blendEquation=new tr(this),this.cullFace=new Qr(this),this.cullFaceSide=new vn(this),this.frontFace=new Xr(this),this.program=new dn(this),this.activeTexture=new xt(this),this.viewport=new pt(this),this.bindFramebuffer=new Wt(this),this.bindRenderbuffer=new ue(this),this.bindTexture=new We(this),this.bindVertexBuffer=new ri(this),this.bindElementBuffer=new Ne(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new zi(this),this.pixelStoreUnpack=new Fi(this),this.pixelStoreUnpackPremultiplyAlpha=new Ni(this),this.pixelStoreUnpackFlipY=new Ii(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=r.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&r.getExtension("OES_texture_half_float_linear"),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query")};Zr.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Zr.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Zr.prototype.createIndexBuffer=function(r,o){return new Tn(this,r,o)},Zr.prototype.createVertexBuffer=function(r,o,n){return new Dt(this,r,o,n)},Zr.prototype.createRenderbuffer=function(r,o,n){var s=this.gl,p=s.createRenderbuffer();return this.bindRenderbuffer.set(p),s.renderbufferStorage(s.RENDERBUFFER,r,o,n),this.bindRenderbuffer.set(null),p},Zr.prototype.createFramebuffer=function(r,o){return new Or(this,r,o)},Zr.prototype.clear=function(r){var o=r.color,n=r.depth,s=this.gl,p=0;o&&(p|=s.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(p|=s.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),s.clear(p)},Zr.prototype.setCullFace=function(r){!1===r.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))},Zr.prototype.setDepthMode=function(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)},Zr.prototype.setStencilMode=function(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)},Zr.prototype.setColorMode=function(r){l.deepEqual(r.blendFunction,_r.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)},Zr.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ir=function(r){function o(n,s,p){var f=this;r.call(this),this.id=n,this.dispatcher=p,this.on("data",function(y){"source"===y.dataType&&"metadata"===y.sourceDataType&&(f._sourceLoaded=!0),f._sourceLoaded&&!f._paused&&"source"===y.dataType&&"content"===y.sourceDataType&&(f.reload(),f.transform&&f.update(f.transform))}),this.on("error",function(){f._sourceErrored=!0}),this._source=function(r,o,n,s){var p=new Ri[o.type](r,o,n,s);if(p.id!==r)throw new Error("Expected Source id to be "+r+" instead of "+p.id);return l.bindAll(["load","abort","unload","serialize","prepare"],p),p}(n,s,p,this),this._tiles={},this._cache=new sr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.onAdd=function(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(n)},o.prototype.onRemove=function(n){this._source&&this._source.onRemove&&this._source.onRemove(n)},o.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var n in this._tiles){var s=this._tiles[n];if("loaded"!==s.state&&"errored"!==s.state)return!1}return!0},o.prototype.getSource=function(){return this._source},o.prototype.pause=function(){this._paused=!0},o.prototype.resume=function(){if(this._paused){var n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}},o.prototype._loadTile=function(n,s){return this._source.loadTile(n,s)},o.prototype._unloadTile=function(n){if(this._source.unloadTile)return this._source.unloadTile(n,function(){})},o.prototype._abortTile=function(n){if(this._source.abortTile)return this._source.abortTile(n,function(){})},o.prototype.serialize=function(){return this._source.serialize()},o.prototype.prepare=function(n){for(var s in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var p=this._tiles[s];p.upload(n),p.prepare(this.map.style.imageManager)}},o.prototype.getIds=function(){return l.values(this._tiles).map(function(n){return n.tileID}).sort(x).map(function(n){return n.key})},o.prototype.getRenderableIds=function(n){var s=this,p=[];for(var f in this._tiles)this._isIdRenderable(f,n)&&p.push(this._tiles[f]);return n?p.sort(function(y,g){var S=y.tileID,k=g.tileID,L=new l.Point(S.canonical.x,S.canonical.y)._rotate(s.transform.angle),U=new l.Point(k.canonical.x,k.canonical.y)._rotate(s.transform.angle);return S.overscaledZ-k.overscaledZ||U.y-L.y||U.x-L.x}).map(function(y){return y.tileID.key}):p.map(function(y){return y.tileID}).sort(x).map(function(y){return y.key})},o.prototype.hasRenderableParent=function(n){var s=this.findLoadedParent(n,0);return!!s&&this._isIdRenderable(s.tileID.key)},o.prototype._isIdRenderable=function(n,s){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(s||!this._tiles[n].holdingForFade())},o.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var n in this._cache.reset(),this._tiles)"errored"!==this._tiles[n].state&&this._reloadTile(n,"reloading")},o.prototype._reloadTile=function(n,s){var p=this._tiles[n];p&&("loading"!==p.state&&(p.state=s),this._loadTile(p,this._tileLoaded.bind(this,p,n,s)))},o.prototype._tileLoaded=function(n,s,p,f){if(f)return n.state="errored",void(404!==f.status?this._source.fire(new l.ErrorEvent(f,{tile:n})):this.update(this.transform));n.timeAdded=l.browser.now(),"expired"===p&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(s,n),"raster-dem"===this.getSource().type&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:n,coord:n.tileID}))},o.prototype._backfillDEM=function(n){for(var s=this.getRenderableIds(),p=0;p<s.length;p++){var f=s[p];if(n.neighboringTiles&&n.neighboringTiles[f]){var y=this.getTileByID(f);g(n,y),g(y,n)}}function g(S,k){S.needsHillshadePrepare=!0;var L=k.tileID.canonical.x-S.tileID.canonical.x,U=k.tileID.canonical.y-S.tileID.canonical.y,X=Math.pow(2,S.tileID.canonical.z),W=k.tileID.key;0===L&&0===U||Math.abs(U)>1||(Math.abs(L)>1&&(1===Math.abs(L+X)?L+=X:1===Math.abs(L-X)&&(L-=X)),k.dem&&S.dem&&(S.dem.backfillBorder(k.dem,L,U),S.neighboringTiles&&S.neighboringTiles[W]&&(S.neighboringTiles[W].backfilled=!0)))}},o.prototype.getTile=function(n){return this.getTileByID(n.key)},o.prototype.getTileByID=function(n){return this._tiles[n]},o.prototype._retainLoadedChildren=function(n,s,p,f){for(var y in this._tiles){var g=this._tiles[y];if(!(f[y]||!g.hasData()||g.tileID.overscaledZ<=s||g.tileID.overscaledZ>p)){for(var S=g.tileID;g&&g.tileID.overscaledZ>s+1;){var k=g.tileID.scaledTo(g.tileID.overscaledZ-1);(g=this._tiles[k.key])&&g.hasData()&&(S=k)}for(var L=S;L.overscaledZ>s;)if(n[(L=L.scaledTo(L.overscaledZ-1)).key]){f[S.key]=S;break}}}},o.prototype.findLoadedParent=function(n,s){if(n.key in this._loadedParentTiles){var p=this._loadedParentTiles[n.key];return p&&p.tileID.overscaledZ>=s?p:null}for(var f=n.overscaledZ-1;f>=s;f--){var y=n.scaledTo(f),g=this._getLoadedTile(y);if(g)return g}},o.prototype._getLoadedTile=function(n){var s=this._tiles[n.key];return s&&s.hasData()?s:this._cache.getByKey(n.wrapped().key)},o.prototype.updateCacheSize=function(n){var s=(Math.ceil(n.width/this._source.tileSize)+1)*(Math.ceil(n.height/this._source.tileSize)+1),p=Math.floor(5*s),f="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(f)},o.prototype.handleWrapJump=function(n){var p=Math.round((n-(void 0===this._prevLng?n:this._prevLng))/360);if(this._prevLng=n,p){var f={};for(var y in this._tiles){var g=this._tiles[y];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+p),f[g.tileID.key]=g}for(var S in this._tiles=f,this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(var k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}},o.prototype.update=function(n){var s=this;if(this.transform=n,this._sourceLoaded&&!this._paused){var p;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?p=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(le){return new l.OverscaledTileID(le.canonical.z,le.wrap,le.canonical.z,le.canonical.x,le.canonical.y)}):(p=n.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(p=p.filter(function(le){return s._source.hasTile(le)}))):p=[];var f=n.coveringZoomLevel(this._source),y=Math.max(f-o.maxOverzooming,this._source.minzoom),g=Math.max(f+o.maxUnderzooming,this._source.minzoom),S=this._updateRetainedTiles(p,f);if(E(this._source.type)){for(var k={},L={},U=0,X=Object.keys(S);U<X.length;U+=1){var W=X[U],G=S[W],H=this._tiles[W];if(H&&!(H.fadeEndTime&&H.fadeEndTime<=l.browser.now())){var ft=this.findLoadedParent(G,y);ft&&(this._addTile(ft.tileID),k[ft.tileID.key]=ft.tileID),L[W]=G}}for(var ut in this._retainLoadedChildren(L,f,g,S),k)S[ut]||(this._coveredTiles[ut]=!0,S[ut]=k[ut])}for(var _t in S)this._tiles[_t].clearFadeHold();for(var St=0,Ct=l.keysDifference(this._tiles,S);St<Ct.length;St+=1){var Ut=Ct[St],te=this._tiles[Ut];te.hasSymbolBuckets&&!te.holdingForFade()?te.setHoldDuration(this.map._fadeDuration):te.hasSymbolBuckets&&!te.symbolFadeFinished()||this._removeTile(Ut)}this._updateLoadedParentTileCache()}},o.prototype.releaseSymbolFadeTiles=function(){for(var n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)},o.prototype._updateRetainedTiles=function(n,s){for(var p={},f={},y=Math.max(s-o.maxOverzooming,this._source.minzoom),g=Math.max(s+o.maxUnderzooming,this._source.minzoom),S={},k=0,L=n;k<L.length;k+=1){var U=L[k],X=this._addTile(U);p[U.key]=U,X.hasData()||s<this._source.maxzoom&&(S[U.key]=U)}this._retainLoadedChildren(S,s,g,p);for(var W=0,G=n;W<G.length;W+=1){var H=G[W],ft=this._tiles[H.key];if(!ft.hasData()){if(s+1>this._source.maxzoom){var ut=H.children(this._source.maxzoom)[0],_t=this.getTile(ut);if(_t&&_t.hasData()){p[ut.key]=ut;continue}}else{var St=H.children(this._source.maxzoom);if(p[St[0].key]&&p[St[1].key]&&p[St[2].key]&&p[St[3].key])continue}for(var Ct=ft.wasRequested(),Ut=H.overscaledZ-1;Ut>=y;--Ut){var te=H.scaledTo(Ut);if(f[te.key]||(f[te.key]=!0,!(ft=this.getTile(te))&&Ct&&(ft=this._addTile(te)),ft&&(p[te.key]=te,Ct=ft.wasRequested(),ft.hasData())))break}}}return p},o.prototype._updateLoadedParentTileCache=function(){for(var n in this._loadedParentTiles={},this._tiles){for(var s=[],p=void 0,f=this._tiles[n].tileID;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){p=this._loadedParentTiles[f.key];break}s.push(f.key);var y=f.scaledTo(f.overscaledZ-1);if(p=this._getLoadedTile(y))break;f=y}for(var g=0,S=s;g<S.length;g+=1)this._loadedParentTiles[S[g]]=p}},o.prototype._addTile=function(n){var s=this._tiles[n.key];if(s)return s;(s=this._cache.getAndRemove(n))&&(this._setTileReloadTimer(n.key,s),s.tileID=n,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,s)));var p=Boolean(s);return p||(s=new l.Tile(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(s,this._tileLoaded.bind(this,s,n.key,s.state))),s?(s.uses++,this._tiles[n.key]=s,p||this._source.fire(new l.Event("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null},o.prototype._setTileReloadTimer=function(n,s){var p=this;n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);var f=s.getExpiryTimeout();f&&(this._timers[n]=setTimeout(function(){p._reloadTile(n,"expired"),delete p._timers[n]},f))},o.prototype._removeTile=function(n){var s=this._tiles[n];s&&(s.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),s.uses>0||(s.hasData()&&"reloading"!==s.state?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))},o.prototype.clearTiles=function(){for(var n in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(n);this._cache.reset()},o.prototype.tilesIn=function(n,s,p){var f=this,y=[],g=this.transform;if(!g)return y;for(var S=p?g.getCameraQueryGeometry(n):n,k=n.map(function(Ut){return g.pointCoordinate(Ut)}),L=S.map(function(Ut){return g.pointCoordinate(Ut)}),U=this.getIds(),X=1/0,W=1/0,G=-1/0,H=-1/0,ft=0,ut=L;ft<ut.length;ft+=1){var _t=ut[ft];X=Math.min(X,_t.x),W=Math.min(W,_t.y),G=Math.max(G,_t.x),H=Math.max(H,_t.y)}for(var St=function(Ut){var te=f._tiles[U[Ut]];if(!te.holdingForFade()){var le=te.tileID,De=Math.pow(2,g.zoom-te.tileID.overscaledZ),Ce=s*te.queryPadding*l.EXTENT/te.tileSize/De,$e=[le.getTilePoint(new l.MercatorCoordinate(X,W)),le.getTilePoint(new l.MercatorCoordinate(G,H))];if($e[0].x-Ce<l.EXTENT&&$e[0].y-Ce<l.EXTENT&&$e[1].x+Ce>=0&&$e[1].y+Ce>=0){var Se=k.map(function(ni){return le.getTilePoint(ni)}),fi=L.map(function(ni){return le.getTilePoint(ni)});y.push({tile:te,tileID:le,queryGeometry:Se,cameraQueryGeometry:fi,scale:De})}}},Ct=0;Ct<U.length;Ct++)St(Ct);return y},o.prototype.getVisibleCoordinates=function(n){for(var s=this,p=this.getRenderableIds(n).map(function(S){return s._tiles[S].tileID}),f=0,y=p;f<y.length;f+=1){var g=y[f];g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped())}return p},o.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(E(this._source.type))for(var n in this._tiles){var s=this._tiles[n];if(void 0!==s.fadeEndTime&&s.fadeEndTime>=l.browser.now())return!0}return!1},o.prototype.setFeatureState=function(n,s,p){this._state.updateState(n=n||"_geojsonTileLayer",s,p)},o.prototype.removeFeatureState=function(n,s,p){this._state.removeFeatureState(n=n||"_geojsonTileLayer",s,p)},o.prototype.getFeatureState=function(n,s){return this._state.getState(n=n||"_geojsonTileLayer",s)},o.prototype.setDependencies=function(n,s,p){var f=this._tiles[n];f&&f.setDependencies(s,p)},o.prototype.reloadTilesForDependencies=function(n,s){for(var p in this._tiles)this._tiles[p].hasDependency(n,s)&&this._reloadTile(p,"reloading");this._cache.filter(function(f){return!f.hasDependency(n,s)})},o}(l.Evented);function x(r,o){var n=Math.abs(2*r.wrap)-+(r.wrap<0),s=Math.abs(2*o.wrap)-+(o.wrap<0);return r.overscaledZ-o.overscaledZ||s-n||o.canonical.y-r.canonical.y||o.canonical.x-r.canonical.x}function E(r){return"raster"===r||"image"===r||"video"===r}function D(){return new l.window.Worker(Za.workerUrl)}ir.maxOverzooming=10,ir.maxUnderzooming=3;var j=function(){this.active={}};j.prototype.acquire=function(r){if(!this.workers)for(this.workers=[];this.workers.length<j.workerCount;)this.workers.push(new D);return this.active[r]=!0,this.workers.slice()},j.prototype.release=function(r){delete this.active[r],0===Object.keys(this.active).length&&(this.workers.forEach(function(o){o.terminate()}),this.workers=null)};var K,ct=Math.floor(l.browser.hardwareConcurrency/2);function yt(r,o){var n={};for(var s in r)"ref"!==s&&(n[s]=r[s]);return l.refProperties.forEach(function(p){p in o&&(n[p]=o[p])}),n}function at(r){r=r.slice();for(var o=Object.create(null),n=0;n<r.length;n++)o[r[n].id]=r[n];for(var s=0;s<r.length;s++)"ref"in r[s]&&(r[s]=yt(r[s],o[r[s].ref]));return r}j.workerCount=Math.max(Math.min(ct,6),1);var nt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function tt(r,o,n){n.push({command:nt.addSource,args:[r,o[r]]})}function Ot(r,o,n){o.push({command:nt.removeSource,args:[r]}),n[r]=!0}function jt(r,o,n,s){Ot(r,n,s),tt(r,o,n)}function Nt(r,o,n){var s;for(s in r[n])if(r[n].hasOwnProperty(s)&&"data"!==s&&!l.deepEqual(r[n][s],o[n][s]))return!1;for(s in o[n])if(o[n].hasOwnProperty(s)&&"data"!==s&&!l.deepEqual(r[n][s],o[n][s]))return!1;return!0}function fe(r,o,n,s,p,f){var y;for(y in o=o||{},r=r||{})r.hasOwnProperty(y)&&(l.deepEqual(r[y],o[y])||n.push({command:f,args:[s,y,o[y],p]}));for(y in o)o.hasOwnProperty(y)&&!r.hasOwnProperty(y)&&(l.deepEqual(r[y],o[y])||n.push({command:f,args:[s,y,o[y],p]}))}function he(r){return r.id}function qe(r,o){return r[o.id]=o,r}var ze=function(r,o,n){var s=this.boxCells=[],p=this.circleCells=[];this.xCellCount=Math.ceil(r/n),this.yCellCount=Math.ceil(o/n);for(var f=0;f<this.xCellCount*this.yCellCount;f++)s.push([]),p.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=o,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0};function ai(r,o,n,s,p){var f=l.create();return o?(l.scale(f,f,[1/p,1/p,1]),n||l.rotateZ(f,f,s.angle)):l.multiply(f,s.labelPlaneMatrix,r),f}function Qe(r,o,n,s,p){if(o){var f=l.clone(r);return l.scale(f,f,[p,p,1]),n||l.rotateZ(f,f,-s.angle),f}return s.glCoordMatrix}function di(r,o){var n=[r.x,r.y,0,1];vr(n,n,o);var s=n[3];return{point:new l.Point(n[0]/s,n[1]/s),signedDistanceFromCamera:s}}function Ei(r,o){var n=r[0]/r[3],s=r[1]/r[3];return n>=-o[0]&&n<=o[0]&&s>=-o[1]&&s<=o[1]}function Cr(r,o,n,s,p,f,y,g){var S=s?r.textSizeData:r.iconSizeData,k=l.evaluateSizeForZoom(S,n.transform.zoom),L=[256/n.width*2+1,256/n.height*2+1],U=s?r.text.dynamicLayoutVertexArray:r.icon.dynamicLayoutVertexArray;U.clear();for(var X=r.lineVertexArray,W=s?r.text.placedSymbolArray:r.icon.placedSymbolArray,G=n.transform.width/n.transform.height,H=!1,ft=0;ft<W.length;ft++){var ut=W.get(ft);if(ut.hidden||ut.writingMode===l.WritingMode.vertical&&!H)Xi(ut.numGlyphs,U);else{H=!1;var _t=[ut.anchorX,ut.anchorY,0,1];if(l.transformMat4(_t,_t,o),Ei(_t,L)){var St=.5+_t[3]/n.transform.cameraToCenterDistance*.5,Ct=l.evaluateSizeForFeature(S,k,ut),Ut=y?Ct*St:Ct/St,te=new l.Point(ut.anchorX,ut.anchorY),le=di(te,p).point,De={},Ce=tn(ut,Ut,!1,g,o,p,f,r.glyphOffsetArray,X,U,le,te,De,G);H=Ce.useVertical,(Ce.notEnoughRoom||H||Ce.needsFlipping&&tn(ut,Ut,!0,g,o,p,f,r.glyphOffsetArray,X,U,le,te,De,G).notEnoughRoom)&&Xi(ut.numGlyphs,U)}else Xi(ut.numGlyphs,U)}}s?r.text.dynamicLayoutVertexBuffer.updateData(U):r.icon.dynamicLayoutVertexBuffer.updateData(U)}function Ue(r,o,n,s,p,f,y,g,S,k,L,U){var X=g.glyphStartIndex+g.numGlyphs,W=g.lineStartIndex,G=g.lineStartIndex+g.lineLength,H=o.getoffsetX(g.glyphStartIndex),ft=o.getoffsetX(X-1),ut=Rr(r*H,n,s,p,f,y,g.segment,W,G,S,k,L,U);if(!ut)return null;var _t=Rr(r*ft,n,s,p,f,y,g.segment,W,G,S,k,L,U);return _t?{first:ut,last:_t}:null}function Sr(r,o,n,s){return r===l.WritingMode.horizontal&&Math.abs(n.y-o.y)>Math.abs(n.x-o.x)*s?{useVertical:!0}:(r===l.WritingMode.vertical?o.y<n.y:o.x>n.x)?{needsFlipping:!0}:null}function tn(r,o,n,s,p,f,y,g,S,k,L,U,X,W){var G,H=o/24,ft=r.lineOffsetX*H,ut=r.lineOffsetY*H;if(r.numGlyphs>1){var _t=r.glyphStartIndex+r.numGlyphs,St=r.lineStartIndex,Ct=r.lineStartIndex+r.lineLength,Ut=Ue(H,g,ft,ut,n,L,U,r,S,f,X,!1);if(!Ut)return{notEnoughRoom:!0};var te=di(Ut.first.point,y).point,le=di(Ut.last.point,y).point;if(s&&!n){var De=Sr(r.writingMode,te,le,W);if(De)return De}G=[Ut.first];for(var Ce=r.glyphStartIndex+1;Ce<_t-1;Ce++)G.push(Rr(H*g.getoffsetX(Ce),ft,ut,n,L,U,r.segment,St,Ct,S,f,X,!1));G.push(Ut.last)}else{if(s&&!n){var $e=di(U,p).point,Se=r.lineStartIndex+r.segment+1,fi=new l.Point(S.getx(Se),S.gety(Se)),ni=di(fi,p),si=ni.signedDistanceFromCamera>0?ni.point:mr(U,fi,$e,1,p),li=Sr(r.writingMode,$e,si,W);if(li)return li}var vi=Rr(H*g.getoffsetX(r.glyphStartIndex),ft,ut,n,L,U,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,S,f,X,!1);if(!vi)return{notEnoughRoom:!0};G=[vi]}for(var ui=0,lr=G;ui<lr.length;ui+=1){var xi=lr[ui];l.addDynamicAttributes(k,xi.point,xi.angle)}return{}}function mr(r,o,n,s,p){var f=di(r.add(r.sub(o)._unit()),p).point,y=n.sub(f);return n.add(y._mult(s/y.mag()))}function Rr(r,o,n,s,p,f,y,g,S,k,L,U,X){var W=s?r-o:r+o,G=W>0?1:-1,H=0;s&&(G*=-1,H=Math.PI),G<0&&(H+=Math.PI);for(var ft=G>0?g+y:g+y+1,ut=ft,_t=p,St=p,Ct=0,Ut=0,te=Math.abs(W);Ct+Ut<=te;){if((ft+=G)<g||ft>=S)return null;if(St=_t,void 0===(_t=U[ft])){var le=new l.Point(k.getx(ft),k.gety(ft)),De=di(le,L);if(De.signedDistanceFromCamera>0)_t=U[ft]=De.point;else{var Ce=ft-G;_t=mr(0===Ct?f:new l.Point(k.getx(Ce),k.gety(Ce)),le,St,te-Ct+1,L)}}Ct+=Ut,Ut=St.dist(_t)}var $e=(te-Ct)/Ut,Se=_t.sub(St),fi=Se.mult($e)._add(St);return fi._add(Se._unit()._perp()._mult(n*G)),{point:fi,angle:H+Math.atan2(_t.y-St.y,_t.x-St.x),tileDistance:X?{prevTileDistance:ft-G===ut?0:k.gettileUnitDistanceFromAnchor(ft-G),lastSegmentViewportDistance:te-Ct}:null}}ze.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},ze.prototype.insert=function(r,o,n,s,p){this._forEachCell(o,n,s,p,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(o),this.bboxes.push(n),this.bboxes.push(s),this.bboxes.push(p)},ze.prototype.insertCircle=function(r,o,n,s){this._forEachCell(o-s,n-s,o+s,n+s,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(o),this.circles.push(n),this.circles.push(s)},ze.prototype._insertBoxCell=function(r,o,n,s,p,f){this.boxCells[p].push(f)},ze.prototype._insertCircleCell=function(r,o,n,s,p,f){this.circleCells[p].push(f)},ze.prototype._query=function(r,o,n,s,p,f){if(n<0||r>this.width||s<0||o>this.height)return!p&&[];var y=[];if(r<=0&&o<=0&&this.width<=n&&this.height<=s){if(p)return!0;for(var g=0;g<this.boxKeys.length;g++)y.push({key:this.boxKeys[g],x1:this.bboxes[4*g],y1:this.bboxes[4*g+1],x2:this.bboxes[4*g+2],y2:this.bboxes[4*g+3]});for(var S=0;S<this.circleKeys.length;S++){var k=this.circles[3*S],L=this.circles[3*S+1],U=this.circles[3*S+2];y.push({key:this.circleKeys[S],x1:k-U,y1:L-U,x2:k+U,y2:L+U})}return f?y.filter(f):y}return this._forEachCell(r,o,n,s,this._queryCell,y,{hitTest:p,seenUids:{box:{},circle:{}}},f),p?y.length>0:y},ze.prototype._queryCircle=function(r,o,n,s,p){var f=r-n,y=r+n,g=o-n,S=o+n;if(y<0||f>this.width||S<0||g>this.height)return!s&&[];var k=[];return this._forEachCell(f,g,y,S,this._queryCellCircle,k,{hitTest:s,circle:{x:r,y:o,radius:n},seenUids:{box:{},circle:{}}},p),s?k.length>0:k},ze.prototype.query=function(r,o,n,s,p){return this._query(r,o,n,s,!1,p)},ze.prototype.hitTest=function(r,o,n,s,p){return this._query(r,o,n,s,!0,p)},ze.prototype.hitTestCircle=function(r,o,n,s){return this._queryCircle(r,o,n,!0,s)},ze.prototype._queryCell=function(r,o,n,s,p,f,y,g){var S=y.seenUids,k=this.boxCells[p];if(null!==k)for(var L=this.bboxes,U=0,X=k;U<X.length;U+=1){var W=X[U];if(!S.box[W]){S.box[W]=!0;var G=4*W;if(r<=L[G+2]&&o<=L[G+3]&&n>=L[G+0]&&s>=L[G+1]&&(!g||g(this.boxKeys[W]))){if(y.hitTest)return f.push(!0),!0;f.push({key:this.boxKeys[W],x1:L[G],y1:L[G+1],x2:L[G+2],y2:L[G+3]})}}}var H=this.circleCells[p];if(null!==H)for(var ft=this.circles,ut=0,_t=H;ut<_t.length;ut+=1){var St=_t[ut];if(!S.circle[St]){S.circle[St]=!0;var Ct=3*St;if(this._circleAndRectCollide(ft[Ct],ft[Ct+1],ft[Ct+2],r,o,n,s)&&(!g||g(this.circleKeys[St]))){if(y.hitTest)return f.push(!0),!0;var Ut=ft[Ct],te=ft[Ct+1],le=ft[Ct+2];f.push({key:this.circleKeys[St],x1:Ut-le,y1:te-le,x2:Ut+le,y2:te+le})}}}},ze.prototype._queryCellCircle=function(r,o,n,s,p,f,y,g){var S=y.circle,k=y.seenUids,L=this.boxCells[p];if(null!==L)for(var U=this.bboxes,X=0,W=L;X<W.length;X+=1){var G=W[X];if(!k.box[G]){k.box[G]=!0;var H=4*G;if(this._circleAndRectCollide(S.x,S.y,S.radius,U[H+0],U[H+1],U[H+2],U[H+3])&&(!g||g(this.boxKeys[G])))return f.push(!0),!0}}var ft=this.circleCells[p];if(null!==ft)for(var ut=this.circles,_t=0,St=ft;_t<St.length;_t+=1){var Ct=St[_t];if(!k.circle[Ct]){k.circle[Ct]=!0;var Ut=3*Ct;if(this._circlesCollide(ut[Ut],ut[Ut+1],ut[Ut+2],S.x,S.y,S.radius)&&(!g||g(this.circleKeys[Ct])))return f.push(!0),!0}}},ze.prototype._forEachCell=function(r,o,n,s,p,f,y,g){for(var S=this._convertToXCellCoord(r),k=this._convertToYCellCoord(o),L=this._convertToXCellCoord(n),U=this._convertToYCellCoord(s),X=S;X<=L;X++)for(var W=k;W<=U;W++)if(p.call(this,r,o,n,s,this.xCellCount*W+X,f,y,g))return},ze.prototype._convertToXCellCoord=function(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))},ze.prototype._convertToYCellCoord=function(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))},ze.prototype._circlesCollide=function(r,o,n,s,p,f){var y=s-r,g=p-o,S=n+f;return S*S>y*y+g*g},ze.prototype._circleAndRectCollide=function(r,o,n,s,p,f,y){var g=(f-s)/2,S=Math.abs(r-(s+g));if(S>g+n)return!1;var k=(y-p)/2,L=Math.abs(o-(p+k));if(L>k+n)return!1;if(S<=g||L<=k)return!0;var U=S-g,X=L-k;return U*U+X*X<=n*n};var In=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xi(r,o){for(var n=0;n<r;n++){var s=o.length;o.resize(s+4),o.float32.set(In,3*s)}}function vr(r,o,n){var s=o[0],p=o[1];return r[0]=n[0]*s+n[4]*p+n[12],r[1]=n[1]*s+n[5]*p+n[13],r[3]=n[3]*s+n[7]*p+n[15],r}var Hi=function(r,o,n){void 0===o&&(o=new ze(r.width+200,r.height+200,25)),void 0===n&&(n=new ze(r.width+200,r.height+200,25)),this.transform=r,this.grid=o,this.ignoredGrid=n,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+100,this.screenBottomBoundary=r.height+100,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200};function on(r,o,n){r[o+4]=n?1:0}function Ar(r,o,n){return o*(l.EXTENT/(r.tileSize*Math.pow(2,n-r.tileID.overscaledZ)))}Hi.prototype.placeCollisionBox=function(r,o,n,s,p){var f=this.projectAndGetPerspectiveRatio(s,r.anchorPointX,r.anchorPointY),y=n*f.perspectiveRatio,g=r.x1*y+f.point.x,S=r.y1*y+f.point.y,k=r.x2*y+f.point.x,L=r.y2*y+f.point.y;return!this.isInsideGrid(g,S,k,L)||!o&&this.grid.hitTest(g,S,k,L,p)?{box:[],offscreen:!1}:{box:[g,S,k,L],offscreen:this.isOffscreen(g,S,k,L)}},Hi.prototype.approximateTileDistance=function(r,o,n,s,p){var y=r.lastSegmentViewportDistance*n;return r.prevTileDistance+y+((p?1:s/this.pitchfactor)-1)*y*Math.abs(Math.sin(o))},Hi.prototype.placeCollisionCircles=function(r,o,n,s,p,f,y,g,S,k,L,U,X){var W=[],G=this.projectAnchor(S,p.anchorX,p.anchorY),H=g/24,ft=p.lineOffsetX*g,ut=p.lineOffsetY*g,_t=new l.Point(p.anchorX,p.anchorY),St=Ue(H,y,ft,ut,!1,di(_t,k).point,_t,p,f,k,{},!0),Ct=!1,Ut=!1,te=!0,le=G.perspectiveRatio*s,De=1/(s*n),Ce=0,$e=0;St&&(Ce=this.approximateTileDistance(St.first.tileDistance,St.first.angle,De,G.cameraDistance,U),$e=this.approximateTileDistance(St.last.tileDistance,St.last.angle,De,G.cameraDistance,U));for(var Se=0;Se<r.length;Se+=5){var fi=r[Se],ni=r[Se+1],si=r[Se+2],li=r[Se+3];if(!St||li<-Ce||li>$e)on(r,Se,!1);else{var vi=this.projectPoint(S,fi,ni),ui=si*le;if(W.length>0){var lr=vi.x-W[W.length-4],xi=vi.y-W[W.length-3];if(ui*ui*2>lr*lr+xi*xi&&Se+8<r.length){var hr=r[Se+8];if(hr>-Ce&&hr<$e){on(r,Se,!1);continue}}}W.push(vi.x,vi.y,ui,Se/5),on(r,Se,!0);var $i=vi.x-ui,br=vi.y-ui,rn=vi.x+ui,Yr=vi.y+ui;if(te=te&&this.isOffscreen($i,br,rn,Yr),Ut=Ut||this.isInsideGrid($i,br,rn,Yr),!o&&this.grid.hitTestCircle(vi.x,vi.y,ui,X)){if(!L)return{circles:[],offscreen:!1};Ct=!0}}}return{circles:Ct||!Ut?[]:W,offscreen:te}},Hi.prototype.queryRenderedSymbols=function(r){if(0===r.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var o=[],n=1/0,s=1/0,p=-1/0,f=-1/0,y=0,g=r;y<g.length;y+=1){var S=g[y],k=new l.Point(S.x+100,S.y+100);n=Math.min(n,k.x),s=Math.min(s,k.y),p=Math.max(p,k.x),f=Math.max(f,k.y),o.push(k)}for(var L={},U={},X=0,W=this.grid.query(n,s,p,f).concat(this.ignoredGrid.query(n,s,p,f));X<W.length;X+=1){var G=W[X],H=G.key;if(void 0===L[H.bucketInstanceId]&&(L[H.bucketInstanceId]={}),!L[H.bucketInstanceId][H.featureIndex]){var ft=[new l.Point(G.x1,G.y1),new l.Point(G.x2,G.y1),new l.Point(G.x2,G.y2),new l.Point(G.x1,G.y2)];l.polygonIntersectsPolygon(o,ft)&&(L[H.bucketInstanceId][H.featureIndex]=!0,void 0===U[H.bucketInstanceId]&&(U[H.bucketInstanceId]=[]),U[H.bucketInstanceId].push(H.featureIndex))}}return U},Hi.prototype.insertCollisionBox=function(r,o,n,s,p){(o?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:s,collisionGroupID:p},r[0],r[1],r[2],r[3])},Hi.prototype.insertCollisionCircles=function(r,o,n,s,p){for(var f=o?this.ignoredGrid:this.grid,y={bucketInstanceId:n,featureIndex:s,collisionGroupID:p},g=0;g<r.length;g+=4)f.insertCircle(y,r[g],r[g+1],r[g+2])},Hi.prototype.projectAnchor=function(r,o,n){var s=[o,n,0,1];return vr(s,s,r),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/s[3]*.5,cameraDistance:s[3]}},Hi.prototype.projectPoint=function(r,o,n){var s=[o,n,0,1];return vr(s,s,r),new l.Point((s[0]/s[3]+1)/2*this.transform.width+100,(-s[1]/s[3]+1)/2*this.transform.height+100)},Hi.prototype.projectAndGetPerspectiveRatio=function(r,o,n){var s=[o,n,0,1];return vr(s,s,r),{point:new l.Point((s[0]/s[3]+1)/2*this.transform.width+100,(-s[1]/s[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/s[3]*.5}},Hi.prototype.isOffscreen=function(r,o,n,s){return n<100||r>=this.screenRightBoundary||s<100||o>this.screenBottomBoundary},Hi.prototype.isInsideGrid=function(r,o,n,s){return n>=0&&r<this.gridRightBoundary&&s>=0&&o<this.gridBottomBoundary};var an=function(r,o,n,s){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?o:-o))):s&&n?1:0,this.placed=n};an.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var qn=function(r,o,n,s,p){this.text=new an(r?r.text:null,o,n,p),this.icon=new an(r?r.icon:null,o,s,p)};qn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Zn=function(r,o,n){this.text=r,this.icon=o,this.skipFade=n},ns=function(r,o,n,s,p){this.bucketInstanceId=r,this.featureIndex=o,this.sourceLayerIndex=n,this.bucketIndex=s,this.tileID=p},Wn=function(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}};function Ls(r,o,n,s,p){var f=l.getAnchorAlignment(r),y=-(f.horizontalAlign-.5)*o,g=-(f.verticalAlign-.5)*n,S=l.evaluateVariableOffset(r,s);return new l.Point(y+S[0]*p,g+S[1]*p)}function qo(r,o,n,s,p,f){var y=r.x1,g=r.x2,S=r.y1,k=r.y2,L=r.anchorPointX,U=r.anchorPointY,X=new l.Point(o,n);return s&&X._rotate(p?f:-f),{x1:y+X.x,y1:S+X.y,x2:g+X.x,y2:k+X.y,anchorPointX:L,anchorPointY:U}}Wn.prototype.get=function(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){var o=++this.maxGroupID;this.collisionGroups[r]={ID:o,predicate:function(n){return n.collisionGroupID===o}}}return this.collisionGroups[r]};var pr=function(r,o,n,s){this.transform=r.clone(),this.collisionIndex=new Hi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=o,this.retainedQueryData={},this.collisionGroups=new Wn(n),this.prevPlacement=s,s&&(s.prevPlacement=void 0),this.placedOrientations={}};function xn(r,o,n,s,p){r.emplaceBack(o?1:0,n?1:0,s||0,p||0),r.emplaceBack(o?1:0,n?1:0,s||0,p||0),r.emplaceBack(o?1:0,n?1:0,s||0,p||0),r.emplaceBack(o?1:0,n?1:0,s||0,p||0)}pr.prototype.getBucketParts=function(r,o,n,s){var p=n.getBucket(o),f=n.latestFeatureIndex;if(p&&f&&o.id===p.layerIds[0]){var y=n.collisionBoxArray,g=p.layers[0].layout,S=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),k=n.tileSize/l.EXTENT,L=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),U=ai(L,"map"===g.get("text-pitch-alignment"),"map"===g.get("text-rotation-alignment"),this.transform,Ar(n,1,this.transform.zoom));this.retainedQueryData[p.bucketInstanceId]=new ns(p.bucketInstanceId,f,p.sourceLayerIndex,p.index,n.tileID);var X={bucket:p,layout:g,posMatrix:L,textLabelPlaneMatrix:U,scale:S,textPixelRatio:k,holdingForFade:n.holdingForFade(),collisionBoxArray:y,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(p.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(p.sourceID)};if(s)for(var W=0,G=p.sortKeyRanges;W<G.length;W+=1){var H=G[W];r.push({sortKey:H.sortKey,symbolInstanceStart:H.symbolInstanceStart,symbolInstanceEnd:H.symbolInstanceEnd,parameters:X})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:p.symbolInstances.length,parameters:X})}},pr.prototype.attemptAnchorPlacement=function(r,o,n,s,p,f,y,g,S,k,L,U,X,W,G){var H,ft=[U.textOffset0,U.textOffset1],ut=Ls(r,n,s,ft,p),_t=this.collisionIndex.placeCollisionBox(qo(o,ut.x,ut.y,f,y,this.transform.angle),L,g,S,k.predicate);if((!G||0!==this.collisionIndex.placeCollisionBox(qo(G,ut.x,ut.y,f,y,this.transform.angle),L,g,S,k.predicate).box.length)&&_t.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID].text&&(H=this.prevPlacement.variableOffsets[U.crossTileID].anchor),this.variableOffsets[U.crossTileID]={textOffset:ft,width:n,height:s,anchor:r,textBoxScale:p,prevAnchor:H},this.markUsedJustification(X,r,U,W),X.allowVerticalPlacement&&(this.markUsedOrientation(X,W,U),this.placedOrientations[U.crossTileID]=W),{shift:ut,placedGlyphBoxes:_t}},pr.prototype.placeLayerBucketPart=function(r,o,n){var s=this,p=r.parameters,f=p.bucket,y=p.layout,g=p.posMatrix,S=p.textLabelPlaneMatrix,k=p.scale,L=p.textPixelRatio,U=p.holdingForFade,X=p.collisionBoxArray,W=p.partiallyEvaluatedTextSize,G=p.collisionGroup,H=y.get("text-optional"),ft=y.get("icon-optional"),ut=y.get("text-allow-overlap"),_t=y.get("icon-allow-overlap"),St="map"===y.get("text-rotation-alignment"),Ct="map"===y.get("text-pitch-alignment"),Ut="none"!==y.get("icon-text-fit"),te="viewport-y"===y.get("symbol-z-order"),le=ut&&(_t||!f.hasIconData()||ft),De=_t&&(ut||!f.hasTextData()||H);!f.collisionArrays&&X&&f.deserializeCollisionBoxes(X);var Ce=function(si,li){if(!o[si.crossTileID])if(U)s.placements[si.crossTileID]=new Zn(!1,!1,!1);else{var vi,ui=!1,lr=!1,xi=!0,hr=null,Ji={box:null,offscreen:null},$i={box:null,offscreen:null},br=null,rn=null,Yr=0,Er=0,ra=0;li.textFeatureIndex&&(Yr=li.textFeatureIndex),li.verticalTextFeatureIndex&&(Er=li.verticalTextFeatureIndex);var Bo=li.textBox;if(Bo){var Wa=function(Zi){var An=l.WritingMode.horizontal;if(f.allowVerticalPlacement&&!Zi&&s.prevPlacement){var $n=s.prevPlacement.placedOrientations[si.crossTileID];$n&&(s.placedOrientations[si.crossTileID]=$n,s.markUsedOrientation(f,An=$n,si))}return An},Fo=function(Zi,An){if(f.allowVerticalPlacement&&si.numVerticalGlyphVertices>0&&li.verticalTextBox)for(var $n=0,Uo=f.writingModes;$n<Uo.length&&(Uo[$n]===l.WritingMode.vertical?(Ji=An(),$i=Ji):Ji=Zi(),!(Ji&&Ji.box&&Ji.box.length));$n+=1);else Ji=Zi()};if(y.get("text-variable-anchor")){var na=y.get("text-variable-anchor");if(s.prevPlacement&&s.prevPlacement.variableOffsets[si.crossTileID]){var Ga=s.prevPlacement.variableOffsets[si.crossTileID];na.indexOf(Ga.anchor)>0&&(na=na.filter(function(Zi){return Zi!==Ga.anchor})).unshift(Ga.anchor)}var xo=function(Zi,An,$n){for(var Uo=Zi.x2-Zi.x1,ao=Zi.y2-Zi.y1,No=si.textBoxScale,wo=Ut&&!_t?An:null,Kn={box:[],offscreen:!1},jo=ut?2*na.length:na.length,zn=0;zn<jo;++zn){var Ss=s.attemptAnchorPlacement(na[zn%na.length],Zi,Uo,ao,No,St,Ct,L,g,G,zn>=na.length,si,f,$n,wo);if(Ss&&(Kn=Ss.placedGlyphBoxes)&&Kn.box&&Kn.box.length){ui=!0,hr=Ss.shift;break}}return Kn};Fo(function(){return xo(Bo,li.iconBox,l.WritingMode.horizontal)},function(){var Zi=li.verticalTextBox;return f.allowVerticalPlacement&&!(Ji&&Ji.box&&Ji.box.length)&&si.numVerticalGlyphVertices>0&&Zi?xo(Zi,li.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Ji&&(ui=Ji.box,xi=Ji.offscreen);var xs=Wa(Ji&&Ji.box);if(!ui&&s.prevPlacement){var us=s.prevPlacement.variableOffsets[si.crossTileID];us&&(s.variableOffsets[si.crossTileID]=us,s.markUsedJustification(f,us.anchor,si,xs))}}else{var za=function(Zi,An){var $n=s.collisionIndex.placeCollisionBox(Zi,ut,L,g,G.predicate);return $n&&$n.box&&$n.box.length&&(s.markUsedOrientation(f,An,si),s.placedOrientations[si.crossTileID]=An),$n};Fo(function(){return za(Bo,l.WritingMode.horizontal)},function(){var Zi=li.verticalTextBox;return f.allowVerticalPlacement&&si.numVerticalGlyphVertices>0&&Zi?za(Zi,l.WritingMode.vertical):{box:null,offscreen:null}}),Wa(Ji&&Ji.box&&Ji.box.length)}}ui=(vi=Ji)&&vi.box&&vi.box.length>0,xi=vi&&vi.offscreen;var bo=li.textCircles;if(bo){var bs=f.text.placedSymbolArray.get(si.centerJustifiedTextSymbolIndex),Pa=l.evaluateSizeForFeature(f.textSizeData,W,bs);br=s.collisionIndex.placeCollisionCircles(bo,ut,k,L,bs,f.lineVertexArray,f.glyphOffsetArray,Pa,g,S,n,Ct,G.predicate),ui=ut||br.circles.length>0,xi=xi&&br.offscreen}if(li.iconFeatureIndex&&(ra=li.iconFeatureIndex),li.iconBox){var cs=function(Zi){var An=Ut&&hr?qo(Zi,hr.x,hr.y,St,Ct,s.transform.angle):Zi;return s.collisionIndex.placeCollisionBox(An,_t,L,g,G.predicate)};lr=$i&&$i.box&&$i.box.length&&li.verticalIconBox?(rn=cs(li.verticalIconBox)).box.length>0:(rn=cs(li.iconBox)).box.length>0,xi=xi&&rn.offscreen}var ws=H||0===si.numHorizontalGlyphVertices&&0===si.numVerticalGlyphVertices,Xa=ft||0===si.numIconVertices;ws||Xa?Xa?ws||(lr=lr&&ui):ui=lr&&ui:lr=ui=lr&&ui,ui&&vi&&vi.box&&s.collisionIndex.insertCollisionBox(vi.box,y.get("text-ignore-placement"),f.bucketInstanceId,$i&&$i.box&&Er?Er:Yr,G.ID),lr&&rn&&s.collisionIndex.insertCollisionBox(rn.box,y.get("icon-ignore-placement"),f.bucketInstanceId,ra,G.ID),ui&&br&&s.collisionIndex.insertCollisionCircles(br.circles,y.get("text-ignore-placement"),f.bucketInstanceId,Yr,G.ID),s.placements[si.crossTileID]=new Zn(ui||le,lr||De,xi||f.justReloaded),o[si.crossTileID]=!0}};if(te)for(var $e=f.getSortedSymbolIndexes(this.transform.angle),Se=$e.length-1;Se>=0;--Se){var fi=$e[Se];Ce(f.symbolInstances.get(fi),f.collisionArrays[fi])}else for(var ni=r.symbolInstanceStart;ni<r.symbolInstanceEnd;ni++)Ce(f.symbolInstances.get(ni),f.collisionArrays[ni]);f.justReloaded=!1},pr.prototype.markUsedJustification=function(r,o,n,s){var p;p=s===l.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(o)];for(var y=0,g=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];y<g.length;y+=1){var S=g[y];S>=0&&(r.text.placedSymbolArray.get(S).crossTileID=p>=0&&S!==p?0:n.crossTileID)}},pr.prototype.markUsedOrientation=function(r,o,n){for(var s=o===l.WritingMode.horizontal||o===l.WritingMode.horizontalOnly?o:0,p=o===l.WritingMode.vertical?o:0,f=0,y=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];f<y.length;f+=1)r.text.placedSymbolArray.get(y[f]).placedOrientation=s;n.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=p)},pr.prototype.commit=function(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;var o=this.prevPlacement,n=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;var s=o?o.symbolFadeChange(r):1,p=o?o.opacities:{},f=o?o.variableOffsets:{},y=o?o.placedOrientations:{};for(var g in this.placements){var S=this.placements[g],k=p[g];k?(this.opacities[g]=new qn(k,s,S.text,S.icon),n=n||S.text!==k.text.placed||S.icon!==k.icon.placed):(this.opacities[g]=new qn(null,s,S.text,S.icon,S.skipFade),n=n||S.text||S.icon)}for(var L in p){var U=p[L];if(!this.opacities[L]){var X=new qn(U,s,!1,!1);X.isHidden()||(this.opacities[L]=X,n=n||U.text.placed||U.icon.placed)}}for(var W in f)this.variableOffsets[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.variableOffsets[W]=f[W]);for(var G in y)this.placedOrientations[G]||!this.opacities[G]||this.opacities[G].isHidden()||(this.placedOrientations[G]=y[G]);n?this.lastPlacementChangeTime=r:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:r)},pr.prototype.updateLayerOpacities=function(r,o){for(var n={},s=0,p=o;s<p.length;s+=1){var f=p[s],y=f.getBucket(r);y&&f.latestFeatureIndex&&r.id===y.layerIds[0]&&this.updateBucketOpacities(y,n,f.collisionBoxArray)}},pr.prototype.updateBucketOpacities=function(r,o,n){var s=this;r.hasTextData()&&r.text.opacityVertexArray.clear(),r.hasIconData()&&r.icon.opacityVertexArray.clear(),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear(),r.hasIconCollisionCircleData()&&r.iconCollisionCircle.collisionVertexArray.clear(),r.hasTextCollisionCircleData()&&r.textCollisionCircle.collisionVertexArray.clear();var p=r.layers[0].layout,f=new qn(null,0,!1,!1,!0),y=p.get("text-allow-overlap"),g=p.get("icon-allow-overlap"),S=p.get("text-variable-anchor"),k="map"===p.get("text-rotation-alignment"),L="map"===p.get("text-pitch-alignment"),U="none"!==p.get("icon-text-fit"),X=new qn(null,0,y&&(g||!r.hasIconData()||p.get("icon-optional")),g&&(y||!r.hasTextData()||p.get("text-optional")),!0);!r.collisionArrays&&n&&(r.hasIconCollisionBoxData()||r.hasIconCollisionCircleData()||r.hasTextCollisionBoxData()||r.hasTextCollisionCircleData())&&r.deserializeCollisionBoxes(n);for(var W=function(ft,ut,_t){for(var St=0;St<ut/4;St++)ft.opacityVertexArray.emplaceBack(_t)},G=function(ft){var ut=r.symbolInstances.get(ft),_t=ut.numHorizontalGlyphVertices,St=ut.numVerticalGlyphVertices,Ct=ut.crossTileID,Ut=o[Ct],te=s.opacities[Ct];Ut?te=f:te||(s.opacities[Ct]=te=X),o[Ct]=!0;var De=ut.numIconVertices>0,Ce=s.placedOrientations[ut.crossTileID],$e=Ce===l.WritingMode.vertical,Se=Ce===l.WritingMode.horizontal||Ce===l.WritingMode.horizontalOnly;if(_t>0||St>0){var fi=$r(te.text);W(r.text,_t,$e?ca:fi),W(r.text,St,Se?ca:fi);var li=te.text.isHidden();[ut.rightJustifiedTextSymbolIndex,ut.centerJustifiedTextSymbolIndex,ut.leftJustifiedTextSymbolIndex].forEach(function(Fo){Fo>=0&&(r.text.placedSymbolArray.get(Fo).hidden=li||$e?1:0)}),ut.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ut.verticalPlacedTextSymbolIndex).hidden=li||Se?1:0);var vi=s.variableOffsets[ut.crossTileID];vi&&s.markUsedJustification(r,vi.anchor,ut,Ce);var ui=s.placedOrientations[ut.crossTileID];ui&&(s.markUsedJustification(r,"left",ut,ui),s.markUsedOrientation(r,ui,ut))}if(De){var lr=$r(te.icon),xi=!(U&&ut.verticalPlacedIconSymbolIndex&&$e);ut.placedIconSymbolIndex>=0&&(W(r.icon,ut.numIconVertices,xi?lr:ca),r.icon.placedSymbolArray.get(ut.placedIconSymbolIndex).hidden=te.icon.isHidden()),ut.verticalPlacedIconSymbolIndex>=0&&(W(r.icon,ut.numVerticalIconVertices,xi?ca:lr),r.icon.placedSymbolArray.get(ut.verticalPlacedIconSymbolIndex).hidden=te.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasIconCollisionCircleData()||r.hasTextCollisionBoxData()||r.hasTextCollisionCircleData()){var $i=r.collisionArrays[ft];if($i){var br=new l.Point(0,0);if($i.textBox||$i.verticalTextBox){var rn=!0;if(S){var Yr=s.variableOffsets[Ct];Yr?(br=Ls(Yr.anchor,Yr.width,Yr.height,Yr.textOffset,Yr.textBoxScale),k&&br._rotate(L?s.transform.angle:-s.transform.angle)):rn=!1}$i.textBox&&xn(r.textCollisionBox.collisionVertexArray,te.text.placed,!rn||$e,br.x,br.y),$i.verticalTextBox&&xn(r.textCollisionBox.collisionVertexArray,te.text.placed,!rn||Se,br.x,br.y)}var Er=Boolean(!Se&&$i.verticalIconBox);$i.iconBox&&xn(r.iconCollisionBox.collisionVertexArray,te.icon.placed,Er,U?br.x:0,U?br.y:0),$i.verticalIconBox&&xn(r.iconCollisionBox.collisionVertexArray,te.icon.placed,!Er,U?br.x:0,U?br.y:0);var ra=$i.textCircles;if(ra&&r.hasTextCollisionCircleData())for(var Bo=0;Bo<ra.length;Bo+=5)xn(r.textCollisionCircle.collisionVertexArray,te.text.placed,Ut||0===ra[Bo+4])}}},H=0;H<r.symbolInstances.length;H++)G(H);r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.hasIconCollisionCircleData()&&r.iconCollisionCircle.collisionVertexBuffer&&r.iconCollisionCircle.collisionVertexBuffer.updateData(r.iconCollisionCircle.collisionVertexArray),r.hasTextCollisionCircleData()&&r.textCollisionCircle.collisionVertexBuffer&&r.textCollisionCircle.collisionVertexBuffer.updateData(r.textCollisionCircle.collisionVertexArray)},pr.prototype.symbolFadeChange=function(r){return 0===this.fadeDuration?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},pr.prototype.zoomAdjustment=function(r){return Math.max(0,(this.transform.zoom-r)/1.5)},pr.prototype.hasTransitions=function(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration},pr.prototype.stillRecent=function(r,o){var n=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*n>r},pr.prototype.setStale=function(){this.stale=!0};var Ea=Math.pow(2,25),lo=Math.pow(2,24),os=Math.pow(2,17),Do=Math.pow(2,16),Yo=Math.pow(2,9),as=Math.pow(2,8),Lo=Math.pow(2,1);function $r(r){if(0===r.opacity&&!r.placed)return 0;if(1===r.opacity&&r.placed)return 4294967295;var o=r.placed?1:0,n=Math.floor(127*r.opacity);return n*Ea+o*lo+n*os+o*Do+n*Yo+o*as+n*Lo+o}var ca=0,Ba=function(r){this._sortAcrossTiles="viewport-y"!==r.layout.get("symbol-z-order")&&void 0!==r.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ba.prototype.continuePlacement=function(r,o,n,s,p){for(var f=this._bucketParts;this._currentTileIndex<r.length;)if(o.getBucketParts(f,s,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,p())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,f.sort(function(S,k){return S.sortKey-k.sortKey}));this._currentPartIndex<f.length;)if(o.placeLayerBucketPart(f[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,p())return!0;return!1};var Ca=function(r,o,n,s,p,f,y){this.placement=new pr(r,p,f,y),this._currentPlacementIndex=o.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=s,this._done=!1};Ca.prototype.isDone=function(){return this._done},Ca.prototype.continuePlacement=function(r,o,n){for(var s=this,p=l.browser.now(),f=function(){var S=l.browser.now()-p;return!s._forceFullPlacement&&S>2};this._currentPlacementIndex>=0;){var y=o[r[this._currentPlacementIndex]],g=this.placement.collisionIndex.transform.zoom;if("symbol"===y.type&&(!y.minzoom||y.minzoom<=g)&&(!y.maxzoom||y.maxzoom>g)){if(this._inProgressLayer||(this._inProgressLayer=new Ba(y)),this._inProgressLayer.continuePlacement(n[y.source],this.placement,this._showCollisionBoxes,y,f))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ca.prototype.commit=function(r){return this.placement.commit(r),this.placement};var Os=512/l.EXTENT/2,Ia=function(r,o,n){this.tileID=r,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var s=0;s<o.length;s++){var p=o.get(s),f=p.key;this.indexedSymbolInstances[f]||(this.indexedSymbolInstances[f]=[]),this.indexedSymbolInstances[f].push({crossTileID:p.crossTileID,coord:this.getScaledCoordinates(p,r)})}};Ia.prototype.getScaledCoordinates=function(r,o){var s=Os/Math.pow(2,o.canonical.z-this.tileID.canonical.z);return{x:Math.floor((o.canonical.x*l.EXTENT+r.anchorX)*s),y:Math.floor((o.canonical.y*l.EXTENT+r.anchorY)*s)}},Ia.prototype.findMatches=function(r,o,n){for(var s=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z),p=0;p<r.length;p++){var f=r.get(p);if(!f.crossTileID){var y=this.indexedSymbolInstances[f.key];if(y)for(var g=this.getScaledCoordinates(f,o),S=0,k=y;S<k.length;S+=1){var L=k[S];if(Math.abs(L.coord.x-g.x)<=s&&Math.abs(L.coord.y-g.y)<=s&&!n[L.crossTileID]){n[L.crossTileID]=!0,f.crossTileID=L.crossTileID;break}}}}};var ko=function(){this.maxCrossTileID=0};ko.prototype.generate=function(){return++this.maxCrossTileID};var pa=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};pa.prototype.handleWrapJump=function(r){var o=Math.round((r-this.lng)/360);if(0!==o)for(var n in this.indexes){var s=this.indexes[n],p={};for(var f in s){var y=s[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+o),p[y.tileID.key]=y}this.indexes[n]=p}this.lng=r},pa.prototype.addBucket=function(r,o,n){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(var s=0;s<o.symbolInstances.length;s++)o.symbolInstances.get(s).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});var p=this.usedCrossTileIDs[r.overscaledZ];for(var f in this.indexes){var y=this.indexes[f];if(Number(f)>r.overscaledZ)for(var g in y){var S=y[g];S.tileID.isChildOf(r)&&S.findMatches(o.symbolInstances,r,p)}else{var k=y[r.scaledTo(Number(f)).key];k&&k.findMatches(o.symbolInstances,r,p)}}for(var L=0;L<o.symbolInstances.length;L++){var U=o.symbolInstances.get(L);U.crossTileID||(U.crossTileID=n.generate(),p[U.crossTileID]=!0)}return void 0===this.indexes[r.overscaledZ]&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ia(r,o.symbolInstances,o.bucketInstanceId),!0},pa.prototype.removeBucketCrossTileIDs=function(r,o){for(var n in o.indexedSymbolInstances)for(var s=0,p=o.indexedSymbolInstances[n];s<p.length;s+=1)delete this.usedCrossTileIDs[r][p[s].crossTileID]},pa.prototype.removeStaleBuckets=function(r){var o=!1;for(var n in this.indexes){var s=this.indexes[n];for(var p in s)r[s[p].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,s[p]),delete s[p],o=!0)}return o};var Qa=function(){this.layerIndexes={},this.crossTileIDs=new ko,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Qa.prototype.addLayer=function(r,o,n){var s=this.layerIndexes[r.id];void 0===s&&(s=this.layerIndexes[r.id]=new pa);var p=!1,f={};s.handleWrapJump(n);for(var y=0,g=o;y<g.length;y+=1){var S=g[y],k=S.getBucket(r);k&&r.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),s.addBucket(S.tileID,k,this.crossTileIDs)&&(p=!0),f[k.bucketInstanceId]=!0)}return s.removeStaleBuckets(f)&&(p=!0),p},Qa.prototype.pruneUnusedLayers=function(r){var o={};for(var n in r.forEach(function(s){o[s]=!0}),this.layerIndexes)o[n]||delete this.layerIndexes[n]};var ha=function(r,o){return l.emitValidationErrors(r,o&&o.filter(function(n){return"source.canvas"!==n.identifier}))},Ms=l.pick(nt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),gs=l.pick(nt,["setCenter","setZoom","setBearing","setPitch"]),ss=function(){var r={},o=l.styleSpec.$version;for(var n in l.styleSpec.$root){var p,s=l.styleSpec.$root[n];if(s.required)null!=(p="version"===n?o:"array"===s.type?[]:{})&&(r[n]=p)}return r}(),uo=function(r){function o(n,s){var p=this;void 0===s&&(s={}),r.call(this),this.map=n,this.dispatcher=new ht((K||(K=new j),K),this),this.imageManager=new Vt,this.imageManager.setEventedParent(this),this.glyphManager=new Ti(n._requestManager,s.localIdeographFontFamily),this.lineAtlas=new Ht(256,512),this.crossTileSymbolIndex=new Qa,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var f=this;this._rtlTextPluginCallback=o.registerForPluginStateChange(function(y){f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},function(S,k){if(l.triggerPluginCompletionEvent(S),k&&k.every(function(U){return U}))for(var L in f.sourceCaches)f.sourceCaches[L].reload()})}),this.on("data",function(y){if("source"===y.dataType&&"metadata"===y.sourceDataType){var g=p.sourceCaches[y.sourceId];if(g){var S=g.getSource();if(S&&S.vectorLayerIds)for(var k in p._layers){var L=p._layers[k];L.source===S.id&&p._validateLayer(L)}}}})}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.loadURL=function(n,s){var p=this;void 0===s&&(s={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var f="boolean"==typeof s.validate?s.validate:!l.isMapboxURL(n);n=this.map._requestManager.normalizeStyleURL(n,s.accessToken);var y=this.map._requestManager.transformRequest(n,l.ResourceType.Style);this._request=l.getJSON(y,function(g,S){p._request=null,g?p.fire(new l.ErrorEvent(g)):S&&p._load(S,f)})},o.prototype.loadJSON=function(n,s){var p=this;void 0===s&&(s={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){p._request=null,p._load(n,!1!==s.validate)})},o.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(ss,!1)},o.prototype._load=function(n,s){var p=this;if(!s||!ha(this,l.validateStyle(n))){for(var f in this._loaded=!0,this.stylesheet=n,n.sources)this.addSource(f,n.sources[f],{validate:!1});n.sprite?this._spriteRequest=function(L,U,X){var W,G,H,ft=l.browser.devicePixelRatio>1?"@2x":"",ut=l.getJSON(U.transformRequest(U.normalizeSpriteURL(L,ft,".json"),l.ResourceType.SpriteJSON),function(Ct,Ut){ut=null,H||(H=Ct,W=Ut,St())}),_t=l.getImage(U.transformRequest(U.normalizeSpriteURL(L,ft,".png"),l.ResourceType.SpriteImage),function(Ct,Ut){_t=null,H||(H=Ct,G=Ut,St())});function St(){if(H)X(H);else if(W&&G){var Ct=l.browser.getImageData(G),Ut={};for(var te in W){var le=W[te],De=le.width,Ce=le.height,$e=le.x,Se=le.y,fi=le.sdf,ni=le.pixelRatio,si=le.stretchX,li=le.stretchY,vi=le.content,ui=new l.RGBAImage({width:De,height:Ce});l.RGBAImage.copy(Ct,ui,{x:$e,y:Se},{x:0,y:0},{width:De,height:Ce}),Ut[te]={data:ui,pixelRatio:ni,sdf:fi,stretchX:si,stretchY:li,content:vi}}X(null,Ut)}}return{cancel:function(){ut&&(ut.cancel(),ut=null),_t&&(_t.cancel(),_t=null)}}}(n.sprite,this.map._requestManager,function(L,U){if(p._spriteRequest=null,L)p.fire(new l.ErrorEvent(L));else if(U)for(var X in U)p.imageManager.addImage(X,U[X]);p.imageManager.setLoaded(!0),p.dispatcher.broadcast("setImages",p.imageManager.listImages()),p.fire(new l.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(n.glyphs);var y=at(this.stylesheet.layers);this._order=y.map(function(L){return L.id}),this._layers={};for(var g=0,S=y;g<S.length;g+=1){var k=S[g];(k=l.createStyleLayer(k)).setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=k}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new zt(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},o.prototype._validateLayer=function(n){var s=this.sourceCaches[n.source];if(s){var p=n.sourceLayer;if(p){var f=s.getSource();("geojson"===f.type||f.vectorLayerIds&&-1===f.vectorLayerIds.indexOf(p))&&this.fire(new l.ErrorEvent(new Error('Source layer "'+p+'" does not exist on source "'+f.id+'" as specified by style layer "'+n.id+'"')))}}},o.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()},o.prototype._serializeLayers=function(n){for(var s=[],p=0,f=n;p<f.length;p+=1){var g=this._layers[f[p]];"custom"!==g.type&&s.push(g.serialize())}return s},o.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(var s in this._layers)if(this._layers[s].hasTransition())return!0;return!1},o.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},o.prototype.update=function(n){if(this._loaded){var s=this._changed;if(this._changed){var p=Object.keys(this._updatedLayers),f=Object.keys(this._removedLayers);for(var y in(p.length||f.length)&&this._updateWorkerLayers(p,f),this._updatedSources){var g=this._updatedSources[y];"reload"===g?this._reloadSource(y):"clear"===g&&this._clearSource(y)}for(var S in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[S].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}for(var k in this.sourceCaches)this.sourceCaches[k].used=!1;for(var L=0,U=this._order;L<U.length;L+=1){var W=this._layers[U[L]];W.recalculate(n,this.imageManager.listImages()),!W.isHidden(n.zoom)&&W.source&&(this.sourceCaches[W.source].used=!0)}this.light.recalculate(n),this.z=n.zoom,s&&this.fire(new l.Event("data",{dataType:"style"}))}},o.prototype._updateTilesForChangedImages=function(){var n=Object.keys(this._changedImages);if(n.length){for(var s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}},o.prototype._updateWorkerLayers=function(n,s){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(n),removedIds:s})},o.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},o.prototype.setState=function(n){var s=this;if(this._checkLoaded(),ha(this,l.validateStyle(n)))return!1;(n=l.clone$1(n)).layers=at(n.layers);var p=function Be(r,o){if(!r)return[{command:nt.setStyle,args:[o]}];var n=[];try{if(!l.deepEqual(r.version,o.version))return[{command:nt.setStyle,args:[o]}];l.deepEqual(r.center,o.center)||n.push({command:nt.setCenter,args:[o.center]}),l.deepEqual(r.zoom,o.zoom)||n.push({command:nt.setZoom,args:[o.zoom]}),l.deepEqual(r.bearing,o.bearing)||n.push({command:nt.setBearing,args:[o.bearing]}),l.deepEqual(r.pitch,o.pitch)||n.push({command:nt.setPitch,args:[o.pitch]}),l.deepEqual(r.sprite,o.sprite)||n.push({command:nt.setSprite,args:[o.sprite]}),l.deepEqual(r.glyphs,o.glyphs)||n.push({command:nt.setGlyphs,args:[o.glyphs]}),l.deepEqual(r.transition,o.transition)||n.push({command:nt.setTransition,args:[o.transition]}),l.deepEqual(r.light,o.light)||n.push({command:nt.setLight,args:[o.light]});var s={},p=[];!function(y,g,S,k){var L;for(L in g=g||{},y=y||{})y.hasOwnProperty(L)&&(g.hasOwnProperty(L)||Ot(L,S,k));for(L in g)g.hasOwnProperty(L)&&(y.hasOwnProperty(L)?l.deepEqual(y[L],g[L])||("geojson"===y[L].type&&"geojson"===g[L].type&&Nt(y,g,L)?S.push({command:nt.setGeoJSONSourceData,args:[L,g[L].data]}):jt(L,g,S,k)):tt(L,g,S))}(r.sources,o.sources,p,s);var f=[];r.layers&&r.layers.forEach(function(y){s[y.source]?n.push({command:nt.removeLayer,args:[y.id]}):f.push(y)}),n=n.concat(p),function(y,g,S){g=g||[];var k,L,U,X,W,G,H,ft=(y=y||[]).map(he),ut=g.map(he),_t=y.reduce(qe,{}),St=g.reduce(qe,{}),Ct=ft.slice(),Ut=Object.create(null);for(k=0,L=0;k<ft.length;k++)St.hasOwnProperty(U=ft[k])?L++:(S.push({command:nt.removeLayer,args:[U]}),Ct.splice(Ct.indexOf(U,L),1));for(k=0,L=0;k<ut.length;k++)Ct[Ct.length-1-k]!==(U=ut[ut.length-1-k])&&(_t.hasOwnProperty(U)?(S.push({command:nt.removeLayer,args:[U]}),Ct.splice(Ct.lastIndexOf(U,Ct.length-L),1)):L++,S.push({command:nt.addLayer,args:[St[U],G=Ct[Ct.length-k]]}),Ct.splice(Ct.length-k,0,U),Ut[U]=!0);for(k=0;k<ut.length;k++)if(X=_t[U=ut[k]],W=St[U],!Ut[U]&&!l.deepEqual(X,W))if(l.deepEqual(X.source,W.source)&&l.deepEqual(X["source-layer"],W["source-layer"])&&l.deepEqual(X.type,W.type)){for(H in fe(X.layout,W.layout,S,U,null,nt.setLayoutProperty),fe(X.paint,W.paint,S,U,null,nt.setPaintProperty),l.deepEqual(X.filter,W.filter)||S.push({command:nt.setFilter,args:[U,W.filter]}),l.deepEqual(X.minzoom,W.minzoom)&&l.deepEqual(X.maxzoom,W.maxzoom)||S.push({command:nt.setLayerZoomRange,args:[U,W.minzoom,W.maxzoom]}),X)X.hasOwnProperty(H)&&"layout"!==H&&"paint"!==H&&"filter"!==H&&"metadata"!==H&&"minzoom"!==H&&"maxzoom"!==H&&(0===H.indexOf("paint.")?fe(X[H],W[H],S,U,H.slice(6),nt.setPaintProperty):l.deepEqual(X[H],W[H])||S.push({command:nt.setLayerProperty,args:[U,H,W[H]]}));for(H in W)W.hasOwnProperty(H)&&!X.hasOwnProperty(H)&&"layout"!==H&&"paint"!==H&&"filter"!==H&&"metadata"!==H&&"minzoom"!==H&&"maxzoom"!==H&&(0===H.indexOf("paint.")?fe(X[H],W[H],S,U,H.slice(6),nt.setPaintProperty):l.deepEqual(X[H],W[H])||S.push({command:nt.setLayerProperty,args:[U,H,W[H]]}))}else S.push({command:nt.removeLayer,args:[U]}),G=Ct[Ct.lastIndexOf(U)+1],S.push({command:nt.addLayer,args:[W,G]})}(f,o.layers,n)}catch(y){console.warn("Unable to compute style diff:",y),n=[{command:nt.setStyle,args:[o]}]}return n}(this.serialize(),n).filter(function(y){return!(y.command in gs)});if(0===p.length)return!1;var f=p.filter(function(y){return!(y.command in Ms)});if(f.length>0)throw new Error("Unimplemented: "+f.map(function(y){return y.command}).join(", ")+".");return p.forEach(function(y){"setTransition"!==y.command&&s[y.command].apply(s,y.args)}),this.stylesheet=n,!0},o.prototype.addImage=function(n,s){if(this.getImage(n))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(n,s),this._changedImages[n]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},o.prototype.updateImage=function(n,s){this.imageManager.updateImage(n,s)},o.prototype.getImage=function(n){return this.imageManager.getImage(n)},o.prototype.removeImage=function(n){if(!this.getImage(n))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(n),this._changedImages[n]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},o.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},o.prototype.addSource=function(n,s,p){var f=this;if(void 0===p&&(p={}),this._checkLoaded(),void 0!==this.sourceCaches[n])throw new Error("There is already a source with this ID");if(!s.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(s).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(l.validateStyle.source,"sources."+n,s,null,p))){this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);var y=this.sourceCaches[n]=new ir(n,s,this.dispatcher);y.style=this,y.setEventedParent(this,function(){return{isSourceLoaded:f.loaded(),source:y.serialize(),sourceId:n}}),y.onAdd(this.map),this._changed=!0}},o.prototype.removeSource=function(n){if(this._checkLoaded(),void 0===this.sourceCaches[n])throw new Error("There is no source with this ID");for(var s in this._layers)if(this._layers[s].source===n)return this.fire(new l.ErrorEvent(new Error('Source "'+n+'" cannot be removed while layer "'+s+'" is using it.')));var p=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],p.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),p.setEventedParent(null),p.clearTiles(),p.onRemove&&p.onRemove(this.map),this._changed=!0},o.prototype.setGeoJSONSourceData=function(n,s){this._checkLoaded(),this.sourceCaches[n].getSource().setData(s),this._changed=!0},o.prototype.getSource=function(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()},o.prototype.addLayer=function(n,s,p){void 0===p&&(p={}),this._checkLoaded();var f=n.id;if(this.getLayer(f))this.fire(new l.ErrorEvent(new Error('Layer with id "'+f+'" already exists on this map')));else{var y;if("custom"===n.type){if(ha(this,l.validateCustomStyleLayer(n)))return;y=l.createStyleLayer(n)}else{if("object"==typeof n.source&&(this.addSource(f,n.source),n=l.clone$1(n),n=l.extend(n,{source:f})),this._validate(l.validateStyle.layer,"layers."+f,n,{arrayIndex:-1},p))return;y=l.createStyleLayer(n),this._validateLayer(y),y.setEventedParent(this,{layer:{id:f}})}var g=s?this._order.indexOf(s):this._order.length;if(s&&-1===g)this.fire(new l.ErrorEvent(new Error('Layer with id "'+s+'" does not exist on this map.')));else{if(this._order.splice(g,0,f),this._layerOrderChanged=!0,this._layers[f]=y,this._removedLayers[f]&&y.source&&"custom"!==y.type){var S=this._removedLayers[f];delete this._removedLayers[f],S.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}},o.prototype.moveLayer=function(n,s){if(this._checkLoaded(),this._changed=!0,this._layers[n]){if(n!==s){var p=this._order.indexOf(n);this._order.splice(p,1);var f=s?this._order.indexOf(s):this._order.length;s&&-1===f?this.fire(new l.ErrorEvent(new Error('Layer with id "'+s+'" does not exist on this map.'))):(this._order.splice(f,0,n),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style and cannot be moved.")))},o.prototype.removeLayer=function(n){this._checkLoaded();var s=this._layers[n];if(s){s.setEventedParent(null);var p=this._order.indexOf(n);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=s,delete this._layers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],s.onRemove&&s.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style and cannot be removed.")))},o.prototype.getLayer=function(n){return this._layers[n]},o.prototype.setLayerZoomRange=function(n,s,p){this._checkLoaded();var f=this.getLayer(n);f?f.minzoom===s&&f.maxzoom===p||(null!=s&&(f.minzoom=s),null!=p&&(f.maxzoom=p),this._updateLayer(f)):this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style and cannot have zoom extent.")))},o.prototype.setFilter=function(n,s,p){void 0===p&&(p={}),this._checkLoaded();var f=this.getLayer(n);if(f){if(!l.deepEqual(f.filter,s))return null==s?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(l.validateStyle.filter,"layers."+f.id+".filter",s,null,p)||(f.filter=l.clone$1(s),this._updateLayer(f)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style and cannot be filtered.")))},o.prototype.getFilter=function(n){return l.clone$1(this.getLayer(n).filter)},o.prototype.setLayoutProperty=function(n,s,p,f){void 0===f&&(f={}),this._checkLoaded();var y=this.getLayer(n);y?l.deepEqual(y.getLayoutProperty(s),p)||(y.setLayoutProperty(s,p,f),this._updateLayer(y)):this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style and cannot be styled.")))},o.prototype.getLayoutProperty=function(n,s){var p=this.getLayer(n);if(p)return p.getLayoutProperty(s);this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style.")))},o.prototype.setPaintProperty=function(n,s,p,f){void 0===f&&(f={}),this._checkLoaded();var y=this.getLayer(n);y?l.deepEqual(y.getPaintProperty(s),p)||(y.setPaintProperty(s,p,f)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+n+"' does not exist in the map's style and cannot be styled.")))},o.prototype.getPaintProperty=function(n,s){return this.getLayer(n).getPaintProperty(s)},o.prototype.setFeatureState=function(n,s){this._checkLoaded();var p=n.source,f=n.sourceLayer,y=this.sourceCaches[p];if(void 0!==y){var g=y.getSource().type;"geojson"===g&&f?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==g||f?(void 0===n.id&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),y.setFeatureState(f,n.id,s)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+p+"' does not exist in the map's style.")))},o.prototype.removeFeatureState=function(n,s){this._checkLoaded();var p=n.source,f=this.sourceCaches[p];if(void 0!==f){var y=f.getSource().type,g="vector"===y?n.sourceLayer:void 0;"vector"!==y||g?s&&"string"!=typeof n.id&&"number"!=typeof n.id?this.fire(new l.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):f.removeFeatureState(g,n.id,s):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+p+"' does not exist in the map's style.")))},o.prototype.getFeatureState=function(n){this._checkLoaded();var s=n.source,p=n.sourceLayer,f=this.sourceCaches[s];if(void 0!==f){if("vector"!==f.getSource().type||p)return void 0===n.id&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),f.getFeatureState(p,n.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+s+"' does not exist in the map's style.")))},o.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},o.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(n){return n.serialize()}),layers:this._serializeLayers(this._order)},function(n){return void 0!==n})},o.prototype._updateLayer=function(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&"raster"!==this.sourceCaches[n.source].getSource().type&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._changed=!0},o.prototype._flattenAndSortRenderedFeatures=function(n){for(var s=this,p=function($e){return"fill-extrusion"===s._layers[$e].type},f={},y=[],g=this._order.length-1;g>=0;g--){var S=this._order[g];if(p(S)){f[S]=g;for(var k=0,L=n;k<L.length;k+=1){var U=L[k][S];if(U)for(var X=0,W=U;X<W.length;X+=1)y.push(W[X])}}}y.sort(function($e,Se){return Se.intersectionZ-$e.intersectionZ});for(var H=[],ft=this._order.length-1;ft>=0;ft--){var ut=this._order[ft];if(p(ut))for(var _t=y.length-1;_t>=0;_t--){var St=y[_t].feature;if(f[St.layer.id]<ft)break;H.push(St),y.pop()}else for(var Ct=0,Ut=n;Ct<Ut.length;Ct+=1){var te=Ut[Ct][ut];if(te)for(var le=0,De=te;le<De.length;le+=1)H.push(De[le].feature)}}return H},o.prototype.queryRenderedFeatures=function(n,s,p){s&&s.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",s.filter,null,s);var f={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var y=0,g=s.layers;y<g.length;y+=1){var S=g[y],k=this._layers[S];if(!k)return this.fire(new l.ErrorEvent(new Error("The layer '"+S+"' does not exist in the map's style and cannot be queried for features."))),[];f[k.source]=!0}}var L=[];for(var U in this.sourceCaches)s.layers&&!f[U]||L.push(Hr(this.sourceCaches[U],this._layers,n,s,p));return this.placement&&L.push(function(X,W,G,H,ft,ut){for(var _t={},St=ft.queryRenderedSymbols(G),Ct=[],Ut=0,te=Object.keys(St).map(Number);Ut<te.length;Ut+=1)Ct.push(ut[te[Ut]]);Ct.sort(Tr);for(var De=function(){var ni=$e[Ce],si=ni.featureIndex.lookupSymbolFeatures(St[ni.bucketInstanceId],ni.bucketIndex,ni.sourceLayerIndex,H.filter,H.layers,X);for(var li in si){var vi=_t[li]=_t[li]||[],ui=si[li];ui.sort(function(Ji,$i){var br=ni.featureSortOrder;if(br){var rn=br.indexOf(Ji.featureIndex);return br.indexOf($i.featureIndex)-rn}return $i.featureIndex-Ji.featureIndex});for(var lr=0,xi=ui;lr<xi.length;lr+=1)vi.push(xi[lr])}},Ce=0,$e=Ct;Ce<$e.length;Ce+=1)De();var Se=function(ni){_t[ni].forEach(function(si){var li=si.feature,ui=W[X[ni].source].getFeatureState(li.layer["source-layer"],li.id);li.source=li.layer.source,li.layer["source-layer"]&&(li.sourceLayer=li.layer["source-layer"]),li.state=ui})};for(var fi in _t)Se(fi);return _t}(this._layers,this.sourceCaches,n,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(L)},o.prototype.querySourceFeatures=function(n,s){s&&s.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",s.filter,null,s);var p=this.sourceCaches[n];return p?function(f,y){for(var g=f.getRenderableIds().map(function(W){return f.getTileByID(W)}),S=[],k={},L=0;L<g.length;L++){var U=g[L],X=U.tileID.canonical.key;k[X]||(k[X]=!0,U.querySourceFeatures(S,y))}return S}(p,s):[]},o.prototype.addSourceType=function(n,s,p){return o.getSourceType(n)?p(new Error('A source type called "'+n+'" already exists.')):(o.setSourceType(n,s),s.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:s.workerSourceURL},p):p(null,null))},o.prototype.getLight=function(){return this.light.getLight()},o.prototype.setLight=function(n,s){void 0===s&&(s={}),this._checkLoaded();var p=this.light.getLight(),f=!1;for(var y in n)if(!l.deepEqual(n[y],p[y])){f=!0;break}if(f){var g={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,s),this.light.updateTransitions(g)}},o.prototype._validate=function(n,s,p,f,y){return void 0===y&&(y={}),(!y||!1!==y.validate)&&ha(this,n.call(l.validateStyle,l.extend({key:s,style:this.serialize(),value:p,styleSpec:l.styleSpec},f)))},o.prototype._remove=function(){for(var n in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[n].setEventedParent(null);for(var s in this.sourceCaches)this.sourceCaches[s].clearTiles(),this.sourceCaches[s].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},o.prototype._clearSource=function(n){this.sourceCaches[n].clearTiles()},o.prototype._reloadSource=function(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()},o.prototype._updateSources=function(n){for(var s in this.sourceCaches)this.sourceCaches[s].update(n)},o.prototype._generateCollisionBoxes=function(){for(var n in this.sourceCaches)this._reloadSource(n)},o.prototype._updatePlacement=function(n,s,p,f,y){void 0===y&&(y=!1);for(var g=!1,S=!1,k={},L=0,U=this._order;L<U.length;L+=1){var W=this._layers[U[L]];if("symbol"===W.type){if(!k[W.source]){var G=this.sourceCaches[W.source];k[W.source]=G.getRenderableIds(!0).map(function(Ct){return G.getTileByID(Ct)}).sort(function(Ct,Ut){return Ut.tileID.overscaledZ-Ct.tileID.overscaledZ||(Ct.tileID.isLessThan(Ut.tileID)?-1:1)})}var H=this.crossTileSymbolIndex.addLayer(W,k[W.source],n.center.lng);g=g||H}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||0===p)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),n.zoom))&&(this.pauseablePlacement=new Ca(n,this._order,y,s,p,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),S=!0),g&&this.pauseablePlacement.placement.setStale()),S||g)for(var ft=0,ut=this._order;ft<ut.length;ft+=1){var St=this._layers[ut[ft]];"symbol"===St.type&&this.placement.updateLayerOpacities(St,k[St.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},o.prototype._releaseSymbolFadeTiles=function(){for(var n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()},o.prototype.getImages=function(n,s,p){this.imageManager.getImages(s.icons,p),this._updateTilesForChangedImages();var f=this.sourceCaches[s.source];f&&f.setDependencies(s.tileID.key,s.type,s.icons)},o.prototype.getGlyphs=function(n,s,p){this.glyphManager.getGlyphs(s.stacks,p)},o.prototype.getResource=function(n,s,p){return l.makeRequest(s,p)},o}(l.Evented);uo.getSourceType=function(r){return Ri[r]},uo.setSourceType=function(r,o){Ri[r]=o},uo.registerForPluginStateChange=l.registerForPluginStateChange;var go=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),ka=gi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),aa=gi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rs=gi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Oa=gi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Fa=gi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),w=gi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),z=gi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),V=gi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Z=gi("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),dt=gi("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),bt=gi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),At=gi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Xt=gi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ie=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ge=gi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Xe=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),pi=gi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),je=gi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ge=gi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Ki=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),xr=gi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),Yi=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ro=gi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),En=gi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Gn=gi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),sn=gi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function gi(r,o){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,s={};return{fragmentSource:r=r.replace(n,function(p,f,y,g,S){return s[S]=!0,"define"===f?"\n#ifndef HAS_UNIFORM_u_"+S+"\nvarying "+y+" "+g+" "+S+";\n#else\nuniform "+y+" "+g+" u_"+S+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+S+"\n    "+y+" "+g+" "+S+" = u_"+S+";\n#endif\n"}),vertexSource:o=o.replace(n,function(p,f,y,g,S){var k="float"===g?"vec2":"vec4",L=S.match(/color/)?"color":k;return s[S]?"define"===f?"\n#ifndef HAS_UNIFORM_u_"+S+"\nuniform lowp float u_"+S+"_t;\nattribute "+y+" "+k+" a_"+S+";\nvarying "+y+" "+g+" "+S+";\n#else\nuniform "+y+" "+g+" u_"+S+";\n#endif\n":"vec4"===L?"\n#ifndef HAS_UNIFORM_u_"+S+"\n    "+S+" = a_"+S+";\n#else\n    "+y+" "+g+" "+S+" = u_"+S+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+S+"\n    "+S+" = unpack_mix_"+L+"(a_"+S+", u_"+S+"_t);\n#else\n    "+y+" "+g+" "+S+" = u_"+S+";\n#endif\n":"define"===f?"\n#ifndef HAS_UNIFORM_u_"+S+"\nuniform lowp float u_"+S+"_t;\nattribute "+y+" "+k+" a_"+S+";\n#else\nuniform "+y+" "+g+" u_"+S+";\n#endif\n":"vec4"===L?"\n#ifndef HAS_UNIFORM_u_"+S+"\n    "+y+" "+g+" "+S+" = a_"+S+";\n#else\n    "+y+" "+g+" "+S+" = u_"+S+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+S+"\n    "+y+" "+g+" "+S+" = unpack_mix_"+L+"(a_"+S+", u_"+S+"_t);\n#else\n    "+y+" "+g+" "+S+" = u_"+S+";\n#endif\n"})}}var Ho=Object.freeze({__proto__:null,prelude:ka,background:aa,backgroundPattern:Rs,circle:Oa,clippingMask:Fa,heatmap:w,heatmapTexture:z,collisionBox:V,collisionCircle:Z,debug:dt,fill:bt,fillOutline:At,fillOutlinePattern:Xt,fillPattern:ie,fillExtrusion:ge,fillExtrusionPattern:Xe,hillshadePrepare:pi,hillshade:je,line:Ge,lineGradient:Ki,linePattern:xr,lineSDF:Yi,raster:ro,symbolIcon:En,symbolSDF:Gn,symbolTextAndIcon:sn}),Wr=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Wr.prototype.bind=function(r,o,n,s,p,f,y,g){this.context=r;for(var S=this.boundPaintVertexBuffers.length!==s.length,k=0;!S&&k<s.length;k++)this.boundPaintVertexBuffers[k]!==s[k]&&(S=!0);r.extVertexArrayObject&&this.vao&&this.boundProgram===o&&this.boundLayoutVertexBuffer===n&&!S&&this.boundIndexBuffer===p&&this.boundVertexOffset===f&&this.boundDynamicVertexBuffer===y&&this.boundDynamicVertexBuffer2===g?(r.bindVertexArrayOES.set(this.vao),y&&y.bind(),p&&p.dynamicDraw&&p.bind(),g&&g.bind()):this.freshBind(o,n,s,p,f,y,g)},Wr.prototype.freshBind=function(r,o,n,s,p,f,y){var g,S=r.numAttributes,k=this.context,L=k.gl;if(k.extVertexArrayObject)this.vao&&this.destroy(),this.vao=k.extVertexArrayObject.createVertexArrayOES(),k.bindVertexArrayOES.set(this.vao),g=0,this.boundProgram=r,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=s,this.boundVertexOffset=p,this.boundDynamicVertexBuffer=f,this.boundDynamicVertexBuffer2=y;else{g=k.currentNumAttributes||0;for(var U=S;U<g;U++)L.disableVertexAttribArray(U)}o.enableAttributes(L,r);for(var X=0,W=n;X<W.length;X+=1)W[X].enableAttributes(L,r);f&&f.enableAttributes(L,r),y&&y.enableAttributes(L,r),o.bind(),o.setVertexAttribPointers(L,r,p);for(var G=0,H=n;G<H.length;G+=1){var ft=H[G];ft.bind(),ft.setVertexAttribPointers(L,r,p)}f&&(f.bind(),f.setVertexAttribPointers(L,r,p)),s&&s.bind(),y&&(y.bind(),y.setVertexAttribPointers(L,r,p)),k.currentNumAttributes=S},Wr.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ln=function(r,o,n,s,p){var f=r.gl;this.program=f.createProgram();var y=n.defines();p&&y.push("#define OVERDRAW_INSPECTOR;");var g=y.concat(ka.fragmentSource,o.fragmentSource).join("\n"),S=y.concat(ka.vertexSource,o.vertexSource).join("\n"),k=f.createShader(f.FRAGMENT_SHADER);if(f.isContextLost())this.failedToCreate=!0;else{f.shaderSource(k,g),f.compileShader(k),f.attachShader(this.program,k);var L=f.createShader(f.VERTEX_SHADER);if(f.isContextLost())this.failedToCreate=!0;else{f.shaderSource(L,S),f.compileShader(L),f.attachShader(this.program,L);for(var U=n.layoutAttributes||[],X=0;X<U.length;X++)f.bindAttribLocation(this.program,X,U[X].name);f.linkProgram(this.program),this.numAttributes=f.getProgramParameter(this.program,f.ACTIVE_ATTRIBUTES),this.attributes={};for(var W={},G=0;G<this.numAttributes;G++){var H=f.getActiveAttrib(this.program,G);H&&(this.attributes[H.name]=f.getAttribLocation(this.program,H.name))}for(var ft=f.getProgramParameter(this.program,f.ACTIVE_UNIFORMS),ut=0;ut<ft;ut++){var _t=f.getActiveUniform(this.program,ut);_t&&(W[_t.name]=f.getUniformLocation(this.program,_t.name))}this.fixedUniforms=s(r,W),this.binderUniforms=n.getUniforms(r,W)}}};function Aa(r,o,n){var s=1/Ar(n,1,o.transform.tileZoom),p=Math.pow(2,n.tileID.overscaledZ),f=n.tileSize*Math.pow(2,o.transform.tileZoom)/p,y=f*(n.tileID.canonical.x+n.tileID.wrap*p),g=f*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[l.browser.devicePixelRatio,s,r.fromScale,r.toScale],u_fade:r.t,u_pixel_coord_upper:[y>>16,g>>16],u_pixel_coord_lower:[65535&y,65535&g]}}ln.prototype.draw=function(r,o,n,s,p,f,y,g,S,k,L,U,X,W,G,H){var ft,ut=r.gl;if(!this.failedToCreate){for(var _t in r.program.set(this.program),r.setDepthMode(n),r.setStencilMode(s),r.setColorMode(p),r.setCullFace(f),this.fixedUniforms)this.fixedUniforms[_t].set(y[_t]);W&&W.setUniforms(r,this.binderUniforms,U,{zoom:X});for(var St=(ft={},ft[ut.LINES]=2,ft[ut.TRIANGLES]=3,ft[ut.LINE_STRIP]=1,ft)[o],Ct=0,Ut=L.get();Ct<Ut.length;Ct+=1){var te=Ut[Ct],le=te.vaos||(te.vaos={});(le[g]||(le[g]=new Wr)).bind(r,this,S,W?W.getPaintVertexBuffers():[],k,te.vertexOffset,G,H),ut.drawElements(o,te.primitiveLength*St,ut.UNSIGNED_SHORT,te.primitiveOffset*St*2)}}};var Oo=function(r,o,n,s){var p=o.style.light,f=p.properties.get("position"),y=[f.x,f.y,f.z],g=l.create$1();"viewport"===p.properties.get("anchor")&&l.fromRotation(g,-o.transform.angle),l.transformMat3(y,y,g);var S=p.properties.get("color");return{u_matrix:r,u_lightpos:y,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[S.r,S.g,S.b],u_vertical_gradient:+n,u_opacity:s}},Qn=function(r,o,n,s,p,f,y){return l.extend(Oo(r,o,n,s),Aa(f,o,y),{u_height_factor:-Math.pow(2,p.overscaledZ)/y.tileSize/8})},sa=function(r){return{u_matrix:r}},Zo=function(r,o,n,s){return l.extend(sa(r),Aa(n,o,s))},er=function(r,o){return{u_matrix:r,u_world:o}},Wo=function(r,o,n,s,p){return l.extend(Zo(r,o,n,s),{u_world:p})},Ta=function(r,o,n,s){var p,f,y=r.transform;if("map"===s.paint.get("circle-pitch-alignment")){var g=Ar(n,1,y.zoom);p=!0,f=[g,g]}else p=!1,f=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+("map"===s.paint.get("circle-pitch-scale")),u_matrix:r.translatePosMatrix(o.posMatrix,n,s.paint.get("circle-translate"),s.paint.get("circle-translate-anchor")),u_pitch_with_map:+p,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:f}},un=function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_camera_to_center_distance:new l.Uniform1f(r,o.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(r,o.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(r,o.u_extrude_scale),u_overscale_factor:new l.Uniform1f(r,o.u_overscale_factor)}},da=function(r,o,n){var s=Ar(n,1,o.zoom),p=Math.pow(2,o.zoom-n.tileID.overscaledZ),f=n.tileID.overscaleFactor();return{u_matrix:r,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:s,u_extrude_scale:[o.pixelsToGLUnits[0]/(s*p),o.pixelsToGLUnits[1]/(s*p)],u_overscale_factor:f}},Ao=function(r,o){return{u_matrix:r,u_color:o}},Jo=function(r){return{u_matrix:r}},Kr=function(r,o,n,s){return{u_matrix:r,u_extrude_scale:Ar(o,1,n),u_intensity:s}};function Hn(r,o){var n=Math.pow(2,o.canonical.z),s=o.canonical.y;return[new l.MercatorCoordinate(0,s/n).toLngLat().lat,new l.MercatorCoordinate(0,(s+1)/n).toLngLat().lat]}var Xn=function(r,o,n){var s=r.transform;return{u_matrix:Ua(r,o,n),u_ratio:1/Ar(o,1,s.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]]}},ts=function(r,o,n){return l.extend(Xn(r,o,n),{u_image:0})},Qo=function(r,o,n,s){var p=r.transform,f=es(o,p);return{u_matrix:Ua(r,o,n),u_texsize:o.imageAtlasTexture.size,u_ratio:1/Ar(o,1,p.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[l.browser.devicePixelRatio,f,s.fromScale,s.toScale],u_fade:s.t,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},eo=function(r,o,n,s,p){var y=r.lineAtlas,g=es(o,r.transform),S="round"===n.layout.get("line-cap"),k=y.getDash(s.from,S),L=y.getDash(s.to,S),U=k.width*p.fromScale,X=L.width*p.toScale;return l.extend(Xn(r,o,n),{u_patternscale_a:[g/U,-k.height/2],u_patternscale_b:[g/X,-L.height/2],u_sdfgamma:y.width/(256*Math.min(U,X)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:L.y,u_mix:p.t})};function es(r,o){return 1/Ar(r,1,o.tileZoom)}function Ua(r,o,n){return r.translatePosMatrix(o.tileID.posMatrix,o,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var vs=function(r,o,n,s,p){return{u_matrix:r,u_tl_parent:o,u_scale_parent:n,u_buffer_scale:1,u_fade_t:s.mix,u_opacity:s.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(y=p.paint.get("raster-saturation"),y>0?1-1/(1.001-y):-y),u_contrast_factor:(f=p.paint.get("raster-contrast"),f>0?1/(1-f):1+f),u_spin_weights:Go(p.paint.get("raster-hue-rotate"))};var f,y};function Go(r){r*=Math.PI/180;var o=Math.sin(r),n=Math.cos(r);return[(2*n+1)/3,(-Math.sqrt(3)*o-n+1)/3,(Math.sqrt(3)*o-n+1)/3]}var Na=function(r,o,n,s,p,f,y,g,S,k){var L=p.transform;return{u_is_size_zoom_constant:+("constant"===r||"source"===r),u_is_size_feature_constant:+("constant"===r||"camera"===r),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:L.cameraToCenterDistance,u_pitch:L.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:L.width/L.height,u_fade_change:p.options.fadeDuration?p.symbolFadeChange:1,u_matrix:f,u_label_plane_matrix:y,u_coord_matrix:g,u_is_text:+S,u_pitch_with_map:+s,u_texsize:k,u_texture:0}},is=function(r,o,n,s,p,f,y,g,S,k,L){var U=p.transform;return l.extend(Na(r,o,n,s,p,f,y,g,S,k),{u_gamma_scale:s?Math.cos(U._pitch)*U.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+L})},ja=function(r,o,n,s,p,f,y,g,S,k){return l.extend(is(r,o,n,s,p,f,y,g,!0,S,!0),{u_texsize_icon:k,u_texture_icon:1})},rs=function(r,o,n){return{u_matrix:r,u_opacity:o,u_color:n}},Bs=function(r,o,n,s,p,f){return l.extend((g=f,k=p,L=(S=n).imageManager.getPattern((y=s).from.toString()),U=S.imageManager.getPattern(y.to.toString()),W=(X=S.imageManager.getPixelSize()).width,G=X.height,H=Math.pow(2,k.tileID.overscaledZ),ut=(ft=k.tileSize*Math.pow(2,S.transform.tileZoom)/H)*(k.tileID.canonical.x+k.tileID.wrap*H),_t=ft*k.tileID.canonical.y,{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[W,G],u_mix:g.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:g.fromScale,u_scale_b:g.toScale,u_tile_units_to_pixels:1/Ar(k,1,S.transform.tileZoom),u_pixel_coord_upper:[ut>>16,_t>>16],u_pixel_coord_lower:[65535&ut,65535&_t]}),{u_matrix:r,u_opacity:o});var y,g,S,k,L,U,X,W,G,H,ft,ut,_t},Xo={fillExtrusion:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_lightpos:new l.Uniform3f(r,o.u_lightpos),u_lightintensity:new l.Uniform1f(r,o.u_lightintensity),u_lightcolor:new l.Uniform3f(r,o.u_lightcolor),u_vertical_gradient:new l.Uniform1f(r,o.u_vertical_gradient),u_opacity:new l.Uniform1f(r,o.u_opacity)}},fillExtrusionPattern:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_lightpos:new l.Uniform3f(r,o.u_lightpos),u_lightintensity:new l.Uniform1f(r,o.u_lightintensity),u_lightcolor:new l.Uniform3f(r,o.u_lightcolor),u_vertical_gradient:new l.Uniform1f(r,o.u_vertical_gradient),u_height_factor:new l.Uniform1f(r,o.u_height_factor),u_image:new l.Uniform1i(r,o.u_image),u_texsize:new l.Uniform2f(r,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(r,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(r,o.u_pixel_coord_lower),u_scale:new l.Uniform4f(r,o.u_scale),u_fade:new l.Uniform1f(r,o.u_fade),u_opacity:new l.Uniform1f(r,o.u_opacity)}},fill:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix)}},fillPattern:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_image:new l.Uniform1i(r,o.u_image),u_texsize:new l.Uniform2f(r,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(r,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(r,o.u_pixel_coord_lower),u_scale:new l.Uniform4f(r,o.u_scale),u_fade:new l.Uniform1f(r,o.u_fade)}},fillOutline:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_world:new l.Uniform2f(r,o.u_world)}},fillOutlinePattern:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_world:new l.Uniform2f(r,o.u_world),u_image:new l.Uniform1i(r,o.u_image),u_texsize:new l.Uniform2f(r,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(r,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(r,o.u_pixel_coord_lower),u_scale:new l.Uniform4f(r,o.u_scale),u_fade:new l.Uniform1f(r,o.u_fade)}},circle:function(r,o){return{u_camera_to_center_distance:new l.Uniform1f(r,o.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(r,o.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(r,o.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(r,o.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(r,o.u_matrix)}},collisionBox:un,collisionCircle:un,debug:function(r,o){return{u_color:new l.UniformColor(r,o.u_color),u_matrix:new l.UniformMatrix4f(r,o.u_matrix)}},clippingMask:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix)}},heatmap:function(r,o){return{u_extrude_scale:new l.Uniform1f(r,o.u_extrude_scale),u_intensity:new l.Uniform1f(r,o.u_intensity),u_matrix:new l.UniformMatrix4f(r,o.u_matrix)}},heatmapTexture:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_world:new l.Uniform2f(r,o.u_world),u_image:new l.Uniform1i(r,o.u_image),u_color_ramp:new l.Uniform1i(r,o.u_color_ramp),u_opacity:new l.Uniform1f(r,o.u_opacity)}},hillshade:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_image:new l.Uniform1i(r,o.u_image),u_latrange:new l.Uniform2f(r,o.u_latrange),u_light:new l.Uniform2f(r,o.u_light),u_shadow:new l.UniformColor(r,o.u_shadow),u_highlight:new l.UniformColor(r,o.u_highlight),u_accent:new l.UniformColor(r,o.u_accent)}},hillshadePrepare:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_image:new l.Uniform1i(r,o.u_image),u_dimension:new l.Uniform2f(r,o.u_dimension),u_zoom:new l.Uniform1f(r,o.u_zoom),u_maxzoom:new l.Uniform1f(r,o.u_maxzoom),u_unpack:new l.Uniform4f(r,o.u_unpack)}},line:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_ratio:new l.Uniform1f(r,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(r,o.u_units_to_pixels)}},lineGradient:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_ratio:new l.Uniform1f(r,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(r,o.u_units_to_pixels),u_image:new l.Uniform1i(r,o.u_image)}},linePattern:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_texsize:new l.Uniform2f(r,o.u_texsize),u_ratio:new l.Uniform1f(r,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_image:new l.Uniform1i(r,o.u_image),u_units_to_pixels:new l.Uniform2f(r,o.u_units_to_pixels),u_scale:new l.Uniform4f(r,o.u_scale),u_fade:new l.Uniform1f(r,o.u_fade)}},lineSDF:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_ratio:new l.Uniform1f(r,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(r,o.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(r,o.u_patternscale_a),u_patternscale_b:new l.Uniform2f(r,o.u_patternscale_b),u_sdfgamma:new l.Uniform1f(r,o.u_sdfgamma),u_image:new l.Uniform1i(r,o.u_image),u_tex_y_a:new l.Uniform1f(r,o.u_tex_y_a),u_tex_y_b:new l.Uniform1f(r,o.u_tex_y_b),u_mix:new l.Uniform1f(r,o.u_mix)}},raster:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_tl_parent:new l.Uniform2f(r,o.u_tl_parent),u_scale_parent:new l.Uniform1f(r,o.u_scale_parent),u_buffer_scale:new l.Uniform1f(r,o.u_buffer_scale),u_fade_t:new l.Uniform1f(r,o.u_fade_t),u_opacity:new l.Uniform1f(r,o.u_opacity),u_image0:new l.Uniform1i(r,o.u_image0),u_image1:new l.Uniform1i(r,o.u_image1),u_brightness_low:new l.Uniform1f(r,o.u_brightness_low),u_brightness_high:new l.Uniform1f(r,o.u_brightness_high),u_saturation_factor:new l.Uniform1f(r,o.u_saturation_factor),u_contrast_factor:new l.Uniform1f(r,o.u_contrast_factor),u_spin_weights:new l.Uniform3f(r,o.u_spin_weights)}},symbolIcon:function(r,o){return{u_is_size_zoom_constant:new l.Uniform1i(r,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(r,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(r,o.u_size_t),u_size:new l.Uniform1f(r,o.u_size),u_camera_to_center_distance:new l.Uniform1f(r,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(r,o.u_pitch),u_rotate_symbol:new l.Uniform1i(r,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(r,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(r,o.u_fade_change),u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(r,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(r,o.u_coord_matrix),u_is_text:new l.Uniform1f(r,o.u_is_text),u_pitch_with_map:new l.Uniform1i(r,o.u_pitch_with_map),u_texsize:new l.Uniform2f(r,o.u_texsize),u_texture:new l.Uniform1i(r,o.u_texture)}},symbolSDF:function(r,o){return{u_is_size_zoom_constant:new l.Uniform1i(r,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(r,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(r,o.u_size_t),u_size:new l.Uniform1f(r,o.u_size),u_camera_to_center_distance:new l.Uniform1f(r,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(r,o.u_pitch),u_rotate_symbol:new l.Uniform1i(r,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(r,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(r,o.u_fade_change),u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(r,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(r,o.u_coord_matrix),u_is_text:new l.Uniform1f(r,o.u_is_text),u_pitch_with_map:new l.Uniform1i(r,o.u_pitch_with_map),u_texsize:new l.Uniform2f(r,o.u_texsize),u_texture:new l.Uniform1i(r,o.u_texture),u_gamma_scale:new l.Uniform1f(r,o.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_is_halo:new l.Uniform1f(r,o.u_is_halo)}},symbolTextAndIcon:function(r,o){return{u_is_size_zoom_constant:new l.Uniform1i(r,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(r,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(r,o.u_size_t),u_size:new l.Uniform1f(r,o.u_size),u_camera_to_center_distance:new l.Uniform1f(r,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(r,o.u_pitch),u_rotate_symbol:new l.Uniform1i(r,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(r,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(r,o.u_fade_change),u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(r,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(r,o.u_coord_matrix),u_is_text:new l.Uniform1f(r,o.u_is_text),u_pitch_with_map:new l.Uniform1i(r,o.u_pitch_with_map),u_texsize:new l.Uniform2f(r,o.u_texsize),u_texsize_icon:new l.Uniform2f(r,o.u_texsize_icon),u_texture:new l.Uniform1i(r,o.u_texture),u_texture_icon:new l.Uniform1i(r,o.u_texture_icon),u_gamma_scale:new l.Uniform1f(r,o.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(r,o.u_device_pixel_ratio),u_is_halo:new l.Uniform1f(r,o.u_is_halo)}},background:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_opacity:new l.Uniform1f(r,o.u_opacity),u_color:new l.UniformColor(r,o.u_color)}},backgroundPattern:function(r,o){return{u_matrix:new l.UniformMatrix4f(r,o.u_matrix),u_opacity:new l.Uniform1f(r,o.u_opacity),u_image:new l.Uniform1i(r,o.u_image),u_pattern_tl_a:new l.Uniform2f(r,o.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(r,o.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(r,o.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(r,o.u_pattern_br_b),u_texsize:new l.Uniform2f(r,o.u_texsize),u_mix:new l.Uniform1f(r,o.u_mix),u_pattern_size_a:new l.Uniform2f(r,o.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(r,o.u_pattern_size_b),u_scale_a:new l.Uniform1f(r,o.u_scale_a),u_scale_b:new l.Uniform1f(r,o.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(r,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(r,o.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(r,o.u_tile_units_to_pixels)}}};function ta(r,o,n,s,p,f,y,g){for(var S=r.context,k=S.gl,L=r.useProgram(p?"collisionCircle":"collisionBox"),U=0;U<s.length;U++){var X=s[U],W=o.getTile(X),G=W.getBucket(n);if(G){var H=p?g?G.textCollisionCircle:G.iconCollisionCircle:g?G.textCollisionBox:G.iconCollisionBox;if(H){var ft=X.posMatrix;0===f[0]&&0===f[1]||(ft=r.translatePosMatrix(X.posMatrix,W,f,y)),L.draw(S,p?k.TRIANGLES:k.LINES,Mi.disabled,qi.disabled,r.colorModeForRenderPass(),ji.disabled,da(ft,r.transform,W),n.id,H.layoutVertexBuffer,H.indexBuffer,H.segments,null,r.transform.zoom,null,null,H.collisionVertexBuffer)}}}}function Va(r,o,n,s,p,f,y){ta(r,o,n,s,!1,p,f,y),ta(r,o,n,s,!0,p,f,y)}var ke=l.identity(new Float32Array(16));function ye(r,o,n,s,p,f){var y=l.getAnchorAlignment(r),g=-(y.horizontalAlign-.5)*o,S=-(y.verticalAlign-.5)*n,k=l.evaluateVariableOffset(r,s);return new l.Point((g/p+k[0])*f,(S/p+k[1])*f)}function Q(r,o,n,s,p,f,y,g,S,k,L){var U=r.text.placedSymbolArray,X=r.text.dynamicLayoutVertexArray,W=r.icon.dynamicLayoutVertexArray,G={};X.clear();for(var H=0;H<U.length;H++){var ft=U.get(H),_t=ft.hidden||!ft.crossTileID||r.allowVerticalPlacement&&!ft.placedOrientation?null:s[ft.crossTileID];if(_t){var St=new l.Point(ft.anchorX,ft.anchorY),Ct=di(St,n?g:y),Ut=.5+f.cameraToCenterDistance/Ct.signedDistanceFromCamera*.5,te=p.evaluateSizeForFeature(r.textSizeData,k,ft)*Ut/l.ONE_EM;n&&(te*=r.tilePixelRatio/S);for(var Ce=ye(_t.anchor,_t.width,_t.height,_t.textOffset,_t.textBoxScale,te),$e=n?di(St.add(Ce),y).point:Ct.point.add(o?Ce.rotate(-f.angle):Ce),Se=r.allowVerticalPlacement&&ft.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,fi=0;fi<ft.numGlyphs;fi++)l.addDynamicAttributes(X,$e,Se);L&&ft.associatedIconIndex>=0&&(G[ft.associatedIconIndex]={shiftedAnchor:$e,angle:Se})}else Xi(ft.numGlyphs,X)}if(L){W.clear();for(var ni=r.icon.placedSymbolArray,si=0;si<ni.length;si++){var li=ni.get(si);if(li.hidden)Xi(li.numGlyphs,W);else{var vi=G[si];if(vi)for(var ui=0;ui<li.numGlyphs;ui++)l.addDynamicAttributes(W,vi.shiftedAnchor,vi.angle);else Xi(li.numGlyphs,W)}}r.icon.dynamicLayoutVertexBuffer.updateData(W)}r.text.dynamicLayoutVertexBuffer.updateData(X)}function gt(r,o,n){return n.iconsInText&&o?"symbolTextAndIcon":r?"symbolSDF":"symbolIcon"}function ee(r,o,n,s,p,f,y,g,S,k,L,U){for(var X,W,G=r.context,H=G.gl,ft=r.transform,ut="map"===g,_t="map"===S,St=ut&&"point"!==n.layout.get("symbol-placement"),Ct=ut&&!_t&&!St,Ut=void 0!==n.layout.get("symbol-sort-key").constantOr(1),te=r.depthModeForSublayer(0,Mi.ReadOnly),le=n.layout.get("text-variable-anchor"),De=[],Ce=0,$e=s;Ce<$e.length;Ce+=1){var Se=$e[Ce],fi=o.getTile(Se),ni=fi.getBucket(n);if(ni){var si=p?ni.text:ni.icon;if(si&&si.segments.get().length){var li=si.programConfigurations.get(n.id),vi=p||ni.sdfIcons,ui=p?ni.textSizeData:ni.iconSizeData,lr=_t||0!==ft.pitch;X||(X=r.useProgram(gt(vi,p,ni),li),W=l.evaluateSizeForZoom(ui,ft.zoom));var xi=void 0,hr=[0,0],Ji=void 0,$i=void 0,br=null,rn=void 0;if(p)Ji=fi.glyphAtlasTexture,$i=H.LINEAR,xi=fi.glyphAtlasTexture.size,ni.iconsInText&&(hr=fi.imageAtlasTexture.size,br=fi.imageAtlasTexture,rn=lr||r.options.rotating||r.options.zooming||"composite"===ui.kind||"camera"===ui.kind?H.LINEAR:H.NEAREST);else{var Er=1!==n.layout.get("icon-size").constantOr(0)||ni.iconsNeedLinear;Ji=fi.imageAtlasTexture,$i=vi||r.options.rotating||r.options.zooming||Er||lr?H.LINEAR:H.NEAREST,xi=fi.imageAtlasTexture.size}var ra=Ar(fi,1,r.transform.zoom),Bo=ai(Se.posMatrix,_t,ut,r.transform,ra),Wa=Qe(Se.posMatrix,_t,ut,r.transform,ra),Fo=le&&ni.hasTextData(),na="none"!==n.layout.get("icon-text-fit")&&Fo&&ni.hasIconData();St&&Cr(ni,Se.posMatrix,r,p,Bo,Wa,_t,k);var Ga=r.translatePosMatrix(Se.posMatrix,fi,f,y),xo=St||p&&le||na?ke:Bo,xs=r.translatePosMatrix(Wa,fi,f,y,!0),us=vi&&0!==n.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1),za={program:X,buffers:si,uniformValues:vi?ni.iconsInText?ja(ui.kind,W,Ct,_t,r,Ga,xo,xs,xi,hr):is(ui.kind,W,Ct,_t,r,Ga,xo,xs,p,xi,!0):Na(ui.kind,W,Ct,_t,r,Ga,xo,xs,p,xi),atlasTexture:Ji,atlasTextureIcon:br,atlasInterpolation:$i,atlasInterpolationIcon:rn,isSDF:vi,hasHalo:us};if(Ut)for(var bo=0,bs=si.segments.get();bo<bs.length;bo+=1){var Pa=bs[bo];De.push({segments:new l.SegmentVector([Pa]),sortKey:Pa.sortKey,state:za})}else De.push({segments:si.segments,sortKey:0,state:za})}}}Ut&&De.sort(function($n,Uo){return $n.sortKey-Uo.sortKey});for(var cs=0,ws=De;cs<ws.length;cs+=1){var Xa=ws[cs],Zi=Xa.state;if(G.activeTexture.set(H.TEXTURE0),Zi.atlasTexture.bind(Zi.atlasInterpolation,H.CLAMP_TO_EDGE),Zi.atlasTextureIcon&&(G.activeTexture.set(H.TEXTURE1),Zi.atlasTextureIcon&&Zi.atlasTextureIcon.bind(Zi.atlasInterpolationIcon,H.CLAMP_TO_EDGE)),Zi.isSDF){var An=Zi.uniformValues;Zi.hasHalo&&(An.u_is_halo=1,we(Zi.buffers,Xa.segments,n,r,Zi.program,te,L,U,An)),An.u_is_halo=0}we(Zi.buffers,Xa.segments,n,r,Zi.program,te,L,U,Zi.uniformValues)}}function we(r,o,n,s,p,f,y,g,S){var k=s.context;p.draw(k,k.gl.TRIANGLES,f,y,g,ji.disabled,S,n.id,r.layoutVertexBuffer,r.indexBuffer,o,n.paint,s.transform.zoom,r.programConfigurations.get(n.id),r.dynamicLayoutVertexBuffer,r.opacityVertexBuffer)}function Ae(r,o,n,s,p,f,y){var g,S,k,L,U,X=r.context.gl,W=n.paint.get("fill-pattern"),G=W&&W.constantOr(1),H=n.getCrossfadeParameters();y?(S=G&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",g=X.LINES):(S=G?"fillPattern":"fill",g=X.TRIANGLES);for(var ft=0,ut=s;ft<ut.length;ft+=1){var _t=ut[ft],St=o.getTile(_t);if(!G||St.patternsLoaded()){var Ct=St.getBucket(n);if(Ct){var Ut=Ct.programConfigurations.get(n.id),te=r.useProgram(S,Ut);G&&(r.context.activeTexture.set(X.TEXTURE0),St.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Ut.updatePatternPaintBuffers(H));var le=W.constantOr(null);if(le&&St.imageAtlas){var De=St.imageAtlas,Ce=De.patternPositions[le.to.toString()],$e=De.patternPositions[le.from.toString()];Ce&&$e&&Ut.setConstantPatternPositions(Ce,$e)}var Se=r.translatePosMatrix(_t.posMatrix,St,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(y){L=Ct.indexBuffer2,U=Ct.segments2;var fi=[X.drawingBufferWidth,X.drawingBufferHeight];k="fillOutlinePattern"===S&&G?Wo(Se,r,H,St,fi):er(Se,fi)}else L=Ct.indexBuffer,U=Ct.segments,k=G?Zo(Se,r,H,St):sa(Se);te.draw(r.context,g,p,r.stencilModeForClipping(_t),f,ji.disabled,k,n.id,Ct.layoutVertexBuffer,L,U,n.paint,r.transform.zoom,Ut)}}}}function Di(r,o,n,s,p,f,y){for(var g=r.context,S=g.gl,k=n.paint.get("fill-extrusion-pattern"),L=k.constantOr(1),U=n.getCrossfadeParameters(),X=n.paint.get("fill-extrusion-opacity"),W=0,G=s;W<G.length;W+=1){var H=G[W],ft=o.getTile(H),ut=ft.getBucket(n);if(ut){var _t=ut.programConfigurations.get(n.id),St=r.useProgram(L?"fillExtrusionPattern":"fillExtrusion",_t);L&&(r.context.activeTexture.set(S.TEXTURE0),ft.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),_t.updatePatternPaintBuffers(U));var Ct=k.constantOr(null);if(Ct&&ft.imageAtlas){var Ut=ft.imageAtlas,te=Ut.patternPositions[Ct.to.toString()],le=Ut.patternPositions[Ct.from.toString()];te&&le&&_t.setConstantPatternPositions(te,le)}var De=r.translatePosMatrix(H.posMatrix,ft,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),Ce=n.paint.get("fill-extrusion-vertical-gradient"),$e=L?Qn(De,r,Ce,X,H,U,ft):Oo(De,r,Ce,X);St.draw(g,g.gl.TRIANGLES,p,f,y,ji.backCCW,$e,n.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,n.paint,r.transform.zoom,_t)}}}function zr(r,o,n,s,p,f){var y=r.context,g=y.gl,S=o.fbo;if(S){var k=r.useProgram("hillshade");y.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,S.colorAttachment.get());var L=function(r,o,n){var s=n.paint.get("hillshade-shadow-color"),p=n.paint.get("hillshade-highlight-color"),f=n.paint.get("hillshade-accent-color"),y=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(y-=r.transform.angle);var g=!r.options.moving;return{u_matrix:r.transform.calculatePosMatrix(o.tileID.toUnwrapped(),g),u_image:0,u_latrange:Hn(0,o.tileID),u_light:[n.paint.get("hillshade-exaggeration"),y],u_shadow:s,u_highlight:p,u_accent:f}}(r,o,n);k.draw(y,g.TRIANGLES,s,p,f,ji.disabled,L,n.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments)}}function Rn(r,o,n,s,p,f,y){var g=r.context,S=g.gl,k=o.dem;if(k&&k.data){var L=k.dim,U=k.stride,X=k.getPixels();if(g.activeTexture.set(S.TEXTURE1),g.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||r.getTileTexture(U),o.demTexture){var W=o.demTexture;W.update(X,{premultiply:!1}),W.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else o.demTexture=new l.Texture(g,X,S.RGBA,{premultiply:!1}),o.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);g.activeTexture.set(S.TEXTURE0);var G=o.fbo;if(!G){var H=new l.Texture(g,{width:L,height:L,data:null},S.RGBA);H.bind(S.LINEAR,S.CLAMP_TO_EDGE),(G=o.fbo=g.createFramebuffer(L,L)).colorAttachment.set(H.texture)}g.bindFramebuffer.set(G.framebuffer),g.viewport.set([0,0,L,L]),r.useProgram("hillshadePrepare").draw(g,S.TRIANGLES,p,f,y,ji.disabled,function(r,o,n){var s=o.stride,p=l.create();return l.ortho(p,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(p,p,[0,-l.EXTENT,0]),{u_matrix:p,u_image:1,u_dimension:[s,s],u_zoom:r.overscaledZ,u_maxzoom:n,u_unpack:o.getUnpackVector()}}(o.tileID,k,s),n.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function On(r,o,n,s,p){var f=s.paint.get("raster-fade-duration");if(f>0){var y=l.browser.now(),g=(y-r.timeAdded)/f,S=o?(y-o.timeAdded)/f:-1,k=n.getSource(),L=p.coveringZoomLevel({tileSize:k.tileSize,roundZoom:k.roundZoom}),U=!o||Math.abs(o.tileID.overscaledZ-L)>Math.abs(r.tileID.overscaledZ-L),X=U&&r.refreshedUponExpiration?1:l.clamp(U?g:1-S,0,1);return r.refreshedUponExpiration&&g>=1&&(r.refreshedUponExpiration=!1),o?{opacity:1,mix:1-X}:{opacity:X,mix:0}}return{opacity:1,mix:0}}function $o(r,o,n){var s=r.context,p=s.gl,f=n.posMatrix,y=r.useProgram("debug"),g=Mi.disabled,S=qi.disabled,k=r.colorModeForRenderPass(),L="$debug";y.draw(s,p.LINE_STRIP,g,S,k,ji.disabled,Ao(f,l.Color.red),L,r.debugBuffer,r.tileBorderIndexBuffer,r.debugSegments);var U=o.getTileByID(n.key).latestRawTileData,W=Math.floor((U&&U.byteLength||0)/1024),G=o.getTile(n).tileSize,H=512/Math.min(G,512),ft=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(ft+=" => "+n.overscaledZ);for(var ut=function(si,li,vi,ui){ui=ui||1;var lr,xi,hr,Ji,$i,br,rn,Yr,Er=[];for(lr=0,xi=si.length;lr<xi;lr++)if($i=_n[si[lr]]){for(Yr=null,hr=0,Ji=$i[1].length;hr<Ji;hr+=2)-1===$i[1][hr]&&-1===$i[1][hr+1]?Yr=null:(br=li+$i[1][hr]*ui,rn=vi-$i[1][hr+1]*ui,Yr&&Er.push(Yr.x,Yr.y,br,rn),Yr={x:br,y:rn});li+=$i[0]*ui}return Er}(ft+" "+W+"kb",50,200*H,5*H),_t=new l.StructArrayLayout2i4,St=new l.StructArrayLayout2ui4,Ct=0;Ct<ut.length;Ct+=2)_t.emplaceBack(ut[Ct],ut[Ct+1]),St.emplaceBack(Ct,Ct+1);for(var Ut=s.createVertexBuffer(_t,go.members),te=s.createIndexBuffer(St),le=l.SegmentVector.simpleSegment(0,0,_t.length/2,_t.length/2),De=l.EXTENT/(Math.pow(2,r.transform.zoom-n.overscaledZ)*G*H),Ce=[],$e=-1;$e<=1;$e++)for(var Se=-1;Se<=1&&(0!==$e||0!==Se);Se++)Ce.push([$e,Se]);for(var fi=0;fi<Ce.length;fi++){var ni=Ce[fi];y.draw(s,p.LINES,g,S,k,ji.disabled,Ao(l.translate([],f,[De*ni[0],De*ni[1],0]),l.Color.white),L,Ut,te,le)}y.draw(s,p.LINES,g,S,k,ji.disabled,Ao(f,l.Color.black),L,Ut,te,le),Ut.destroy(),te.destroy(),le.destroy()}var _n={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Ko={symbol:function(r,o,n,s,p){if("translucent"===r.renderPass){var f=qi.disabled,y=r.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(g,S,k,L,U,X,W){for(var G=S.transform,H="map"===U,ft="map"===X,ut=0,_t=g;ut<_t.length;ut+=1){var St=_t[ut],Ct=L.getTile(St),Ut=Ct.getBucket(k);if(Ut&&Ut.text&&Ut.text.segments.get().length){var le=l.evaluateSizeForZoom(Ut.textSizeData,G.zoom),De=Ar(Ct,1,S.transform.zoom),Ce=ai(St.posMatrix,ft,H,S.transform,De),$e="none"!==k.layout.get("icon-text-fit")&&Ut.hasIconData();if(le){var Se=Math.pow(2,G.zoom-Ct.tileID.overscaledZ);Q(Ut,H,ft,W,l.symbolSize,G,Ce,St.posMatrix,Se,le,$e)}}}}(s,r,n,o,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),p),0!==n.paint.get("icon-opacity").constantOr(1)&&ee(r,o,n,s,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),f,y),0!==n.paint.get("text-opacity").constantOr(1)&&ee(r,o,n,s,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),f,y),o.map.showCollisionBoxes&&(Va(r,o,n,s,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),Va(r,o,n,s,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))}},circle:function(r,o,n,s){if("translucent"===r.renderPass){var p=n.paint.get("circle-opacity"),f=n.paint.get("circle-stroke-width"),y=n.paint.get("circle-stroke-opacity"),g=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0!==p.constantOr(1)||0!==f.constantOr(1)&&0!==y.constantOr(1)){for(var S=r.context,k=S.gl,L=r.depthModeForSublayer(0,Mi.ReadOnly),U=qi.disabled,X=r.colorModeForRenderPass(),W=[],G=0;G<s.length;G++){var H=s[G],ft=o.getTile(H),ut=ft.getBucket(n);if(ut){var _t=ut.programConfigurations.get(n.id),St={programConfiguration:_t,program:r.useProgram("circle",_t),layoutVertexBuffer:ut.layoutVertexBuffer,indexBuffer:ut.indexBuffer,uniformValues:Ta(r,H,ft,n)};if(g)for(var Ct=0,Ut=ut.segments.get();Ct<Ut.length;Ct+=1){var te=Ut[Ct];W.push({segments:new l.SegmentVector([te]),sortKey:te.sortKey,state:St})}else W.push({segments:ut.segments,sortKey:0,state:St})}}g&&W.sort(function(ui,lr){return ui.sortKey-lr.sortKey});for(var le=0,De=W;le<De.length;le+=1){var Ce=De[le],$e=Ce.state;$e.program.draw(S,k.TRIANGLES,L,U,X,ji.disabled,$e.uniformValues,n.id,$e.layoutVertexBuffer,$e.indexBuffer,Ce.segments,n.paint,r.transform.zoom,$e.programConfiguration)}}}},heatmap:function(r,o,n,s){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===r.renderPass){var p=r.context,f=p.gl,y=r.depthModeForSublayer(0,Mi.ReadOnly),g=qi.disabled,S=new _r([f.ONE,f.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(ft,ut,_t){var St=ft.gl;ft.activeTexture.set(St.TEXTURE1),ft.viewport.set([0,0,ut.width/4,ut.height/4]);var Ct=_t.heatmapFbo;if(Ct)St.bindTexture(St.TEXTURE_2D,Ct.colorAttachment.get()),ft.bindFramebuffer.set(Ct.framebuffer);else{var Ut=St.createTexture();St.bindTexture(St.TEXTURE_2D,Ut),St.texParameteri(St.TEXTURE_2D,St.TEXTURE_WRAP_S,St.CLAMP_TO_EDGE),St.texParameteri(St.TEXTURE_2D,St.TEXTURE_WRAP_T,St.CLAMP_TO_EDGE),St.texParameteri(St.TEXTURE_2D,St.TEXTURE_MIN_FILTER,St.LINEAR),St.texParameteri(St.TEXTURE_2D,St.TEXTURE_MAG_FILTER,St.LINEAR),Ct=_t.heatmapFbo=ft.createFramebuffer(ut.width/4,ut.height/4),function te(le,De,Ce,$e){var Se=le.gl;Se.texImage2D(Se.TEXTURE_2D,0,Se.RGBA,De.width/4,De.height/4,0,Se.RGBA,le.extTextureHalfFloat?le.extTextureHalfFloat.HALF_FLOAT_OES:Se.UNSIGNED_BYTE,null),$e.colorAttachment.set(Ce),le.extTextureHalfFloat&&Se.checkFramebufferStatus(Se.FRAMEBUFFER)!==Se.FRAMEBUFFER_COMPLETE&&(le.extTextureHalfFloat=null,$e.colorAttachment.setDirty(),te(le,De,Ce,$e))}(ft,ut,Ut,Ct)}})(p,r,n),p.clear({color:l.Color.transparent});for(var k=0;k<s.length;k++){var L=s[k];if(!o.hasRenderableParent(L)){var U=o.getTile(L),X=U.getBucket(n);if(X){var W=X.programConfigurations.get(n.id);r.useProgram("heatmap",W).draw(p,f.TRIANGLES,y,g,S,ji.disabled,Kr(L.posMatrix,U,r.transform.zoom,n.paint.get("heatmap-intensity")),n.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,n.paint,r.transform.zoom,W)}}}p.viewport.set([0,0,r.width,r.height])}else"translucent"===r.renderPass&&(r.context.setColorMode(r.colorModeForRenderPass()),function(ft,ut){var _t=ft.context,St=_t.gl,Ct=ut.heatmapFbo;if(Ct){_t.activeTexture.set(St.TEXTURE0),St.bindTexture(St.TEXTURE_2D,Ct.colorAttachment.get()),_t.activeTexture.set(St.TEXTURE1);var Ut=ut.colorRampTexture;Ut||(Ut=ut.colorRampTexture=new l.Texture(_t,ut.colorRamp,St.RGBA)),Ut.bind(St.LINEAR,St.CLAMP_TO_EDGE),ft.useProgram("heatmapTexture").draw(_t,St.TRIANGLES,Mi.disabled,qi.disabled,ft.colorModeForRenderPass(),ji.disabled,function(r,o,n,s){var p=l.create();l.ortho(p,0,r.width,r.height,0,0,1);var f=r.context.gl;return{u_matrix:p,u_world:[f.drawingBufferWidth,f.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:o.paint.get("heatmap-opacity")}}(ft,ut),ut.id,ft.viewportBuffer,ft.quadTriangleIndexBuffer,ft.viewportSegments,ut.paint,ft.transform.zoom)}}(r,n))},line:function(r,o,n,s){if("translucent"===r.renderPass){var p=n.paint.get("line-opacity"),f=n.paint.get("line-width");if(0!==p.constantOr(1)&&0!==f.constantOr(1)){var y=r.depthModeForSublayer(0,Mi.ReadOnly),g=r.colorModeForRenderPass(),S=n.paint.get("line-dasharray"),k=n.paint.get("line-pattern"),L=k.constantOr(1),U=n.paint.get("line-gradient"),X=n.getCrossfadeParameters(),W=S?"lineSDF":L?"linePattern":U?"lineGradient":"line",G=r.context,H=G.gl,ft=!0;if(U){G.activeTexture.set(H.TEXTURE0);var ut=n.gradientTexture;if(!n.gradient)return;ut||(ut=n.gradientTexture=new l.Texture(G,n.gradient,H.RGBA)),ut.bind(H.LINEAR,H.CLAMP_TO_EDGE)}for(var _t=0,St=s;_t<St.length;_t+=1){var Ct=St[_t],Ut=o.getTile(Ct);if(!L||Ut.patternsLoaded()){var te=Ut.getBucket(n);if(te){var le=te.programConfigurations.get(n.id),De=r.context.program.get(),Ce=r.useProgram(W,le),$e=ft||Ce.program!==De,Se=k.constantOr(null);if(Se&&Ut.imageAtlas){var fi=Ut.imageAtlas,ni=fi.patternPositions[Se.to.toString()],si=fi.patternPositions[Se.from.toString()];ni&&si&&le.setConstantPatternPositions(ni,si)}var li=S?eo(r,Ut,n,S,X):L?Qo(r,Ut,n,X):U?ts(r,Ut,n):Xn(r,Ut,n);S&&($e||r.lineAtlas.dirty)?(G.activeTexture.set(H.TEXTURE0),r.lineAtlas.bind(G)):L&&(G.activeTexture.set(H.TEXTURE0),Ut.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),le.updatePatternPaintBuffers(X)),Ce.draw(G,H.TRIANGLES,y,r.stencilModeForClipping(Ct),g,ji.disabled,li,n.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,n.paint,r.transform.zoom,le),ft=!1}}}}}},fill:function(r,o,n,s){var p=n.paint.get("fill-color"),f=n.paint.get("fill-opacity");if(0!==f.constantOr(1)){var y=r.colorModeForRenderPass(),g=n.paint.get("fill-pattern"),S=r.opaquePassEnabledForLayer()&&!g.constantOr(1)&&1===p.constantOr(l.Color.transparent).a&&1===f.constantOr(0)?"opaque":"translucent";if(r.renderPass===S){var k=r.depthModeForSublayer(1,"opaque"===r.renderPass?Mi.ReadWrite:Mi.ReadOnly);Ae(r,o,n,s,k,y,!1)}if("translucent"===r.renderPass&&n.paint.get("fill-antialias")){var L=r.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Mi.ReadOnly);Ae(r,o,n,s,L,y,!0)}}},"fill-extrusion":function(r,o,n,s){var p=n.paint.get("fill-extrusion-opacity");if(0!==p&&"translucent"===r.renderPass){var f=new Mi(r.context.gl.LEQUAL,Mi.ReadWrite,r.depthRangeFor3D);if(1!==p||n.paint.get("fill-extrusion-pattern").constantOr(1))Di(r,o,n,s,f,qi.disabled,_r.disabled),Di(r,o,n,s,f,r.stencilModeFor3D(),r.colorModeForRenderPass());else{var y=r.colorModeForRenderPass();Di(r,o,n,s,f,qi.disabled,y)}}},hillshade:function(r,o,n,s){if("offscreen"===r.renderPass||"translucent"===r.renderPass){for(var p=r.context,f=o.getSource().maxzoom,y=r.depthModeForSublayer(0,Mi.ReadOnly),g=r.colorModeForRenderPass(),S="translucent"===r.renderPass?r.stencilConfigForOverlap(s):[{},s],k=S[0],L=0,U=S[1];L<U.length;L+=1){var X=U[L],W=o.getTile(X);W.needsHillshadePrepare&&"offscreen"===r.renderPass?Rn(r,W,n,f,y,qi.disabled,g):"translucent"===r.renderPass&&zr(r,W,n,y,k[X.overscaledZ],g)}p.viewport.set([0,0,r.width,r.height])}},raster:function(r,o,n,s){if("translucent"===r.renderPass&&0!==n.paint.get("raster-opacity")&&s.length)for(var p=r.context,f=p.gl,y=o.getSource(),g=r.useProgram("raster"),S=r.colorModeForRenderPass(),k=y instanceof Ie?[{},s]:r.stencilConfigForOverlap(s),L=k[0],U=k[1],X=U[U.length-1].overscaledZ,W=!r.options.moving,G=0,H=U;G<H.length;G+=1){var ft=H[G],ut=r.depthModeForSublayer(ft.overscaledZ-X,1===n.paint.get("raster-opacity")?Mi.ReadWrite:Mi.ReadOnly,f.LESS),_t=o.getTile(ft),St=r.transform.calculatePosMatrix(ft.toUnwrapped(),W);_t.registerFadeDuration(n.paint.get("raster-fade-duration"));var Ct=o.findLoadedParent(ft,0),Ut=On(_t,Ct,o,n,r.transform),te=void 0,le=void 0,De="nearest"===n.paint.get("raster-resampling")?f.NEAREST:f.LINEAR;p.activeTexture.set(f.TEXTURE0),_t.texture.bind(De,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),p.activeTexture.set(f.TEXTURE1),Ct?(Ct.texture.bind(De,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),te=Math.pow(2,Ct.tileID.overscaledZ-_t.tileID.overscaledZ),le=[_t.tileID.canonical.x*te%1,_t.tileID.canonical.y*te%1]):_t.texture.bind(De,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST);var Ce=vs(St,le||[0,0],te||1,Ut,n);y instanceof Ie?g.draw(p,f.TRIANGLES,ut,qi.disabled,S,ji.disabled,Ce,n.id,y.boundsBuffer,r.quadTriangleIndexBuffer,y.boundsSegments):g.draw(p,f.TRIANGLES,ut,L[ft.overscaledZ],S,ji.disabled,Ce,n.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments)}},background:function(r,o,n){var s=n.paint.get("background-color"),p=n.paint.get("background-opacity");if(0!==p){var f=r.context,y=f.gl,g=r.transform,S=g.tileSize,k=n.paint.get("background-pattern");if(!r.isPatternMissing(k)){var L=!k&&1===s.a&&1===p&&r.opaquePassEnabledForLayer()?"opaque":"translucent";if(r.renderPass===L){var U=qi.disabled,X=r.depthModeForSublayer(0,"opaque"===L?Mi.ReadWrite:Mi.ReadOnly),W=r.colorModeForRenderPass(),G=r.useProgram(k?"backgroundPattern":"background"),H=g.coveringTiles({tileSize:S});k&&(f.activeTexture.set(y.TEXTURE0),r.imageManager.bind(r.context));for(var ft=n.getCrossfadeParameters(),ut=0,_t=H;ut<_t.length;ut+=1){var St=_t[ut],Ct=r.transform.calculatePosMatrix(St.toUnwrapped()),Ut=k?Bs(Ct,p,r,k,{tileID:St,tileSize:S},ft):rs(Ct,p,s);G.draw(f,y.TRIANGLES,X,U,W,ji.disabled,Ut,n.id,r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}}}},debug:function(r,o,n){for(var s=0;s<n.length;s++)$o(r,o,n[s])},custom:function(r,o,n){var s=r.context,p=n.implementation;if("offscreen"===r.renderPass){var f=p.prerender;f&&(r.setCustomLayerDefaults(),s.setColorMode(r.colorModeForRenderPass()),f.call(p,s.gl,r.transform.customLayerMatrix()),s.setDirty(),r.setBaseState())}else if("translucent"===r.renderPass){r.setCustomLayerDefaults(),s.setColorMode(r.colorModeForRenderPass()),s.setStencilMode(qi.disabled);var y="3d"===p.renderingMode?new Mi(r.context.gl.LEQUAL,Mi.ReadWrite,r.depthRangeFor3D):r.depthModeForSublayer(0,Mi.ReadOnly);s.setDepthMode(y),p.render(s.gl,r.transform.customLayerMatrix()),s.setDirty(),r.setBaseState(),s.bindFramebuffer.set(null)}}},or=function(r,o){this.context=new Zr(r),this.transform=o,this._tileTextures={},this.setup(),this.numSublayers=ir.maxUnderzooming+ir.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new l.ProgramConfiguration,this.crossTileSymbolIndex=new Qa,this.gpuTimers={}};function fa(r,o){if(r.y>o.y){var n=r;r=o,o=n}return{x0:r.x,y0:r.y,x1:o.x,y1:o.y,dx:o.x-r.x,dy:o.y-r.y}}function zo(r,o,n,s,p){var f=Math.max(n,Math.floor(o.y0)),y=Math.min(s,Math.ceil(o.y1));if(r.x0===o.x0&&r.y0===o.y0?r.x0+o.dy/r.dy*r.dx<o.x1:r.x1-o.dy/r.dy*r.dx<o.x0){var g=r;r=o,o=g}for(var S=r.dx/r.dy,k=o.dx/o.dy,L=r.dx>0,U=o.dx<0,X=f;X<y;X++){var W=S*Math.max(0,Math.min(r.dy,X+L-r.y0))+r.x0,G=k*Math.max(0,Math.min(o.dy,X+U-o.y0))+o.x0;p(Math.floor(G),Math.ceil(W),X)}}function la(r,o,n,s,p,f){var y,g=fa(r,o),S=fa(o,n),k=fa(n,r);g.dy>S.dy&&(y=g,g=S,S=y),g.dy>k.dy&&(y=g,g=k,k=y),S.dy>k.dy&&(y=S,S=k,k=y),g.dy&&zo(k,g,s,p,f),S.dy&&zo(k,S,s,p,f)}or.prototype.resize=function(r,o){var n=this.context.gl;if(this.width=r*l.browser.devicePixelRatio,this.height=o*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var s=0,p=this.style._order;s<p.length;s+=1)this.style._layers[p[s]].resize();this.depthRbo&&(n.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},or.prototype.setup=function(){var r=this.context,o=new l.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(l.EXTENT,0),o.emplaceBack(0,l.EXTENT),o.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(o,go.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var n=new l.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(l.EXTENT,0),n.emplaceBack(0,l.EXTENT),n.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=r.createVertexBuffer(n,go.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var s=new l.StructArrayLayout4i8;s.emplaceBack(0,0,0,0),s.emplaceBack(l.EXTENT,0,l.EXTENT,0),s.emplaceBack(0,l.EXTENT,0,l.EXTENT),s.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(s,se.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var p=new l.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(1,0),p.emplaceBack(0,1),p.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(p,go.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var f=new l.StructArrayLayout1ui2;f.emplaceBack(0),f.emplaceBack(1),f.emplaceBack(3),f.emplaceBack(2),f.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(f);var y=new l.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(y);var g=this.context.gl;this.stencilClearMode=new qi({func:g.ALWAYS,mask:0},0,255,g.ZERO,g.ZERO,g.ZERO)},or.prototype.clearStencil=function(){var r=this.context,o=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var n=l.create();l.ortho(n,0,this.width,this.height,0,0,1),l.scale(n,n,[o.drawingBufferWidth,o.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,o.TRIANGLES,Mi.disabled,this.stencilClearMode,_r.disabled,ji.disabled,Jo(n),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},or.prototype._renderTileClippingMasks=function(r,o){if(this.currentStencilSource!==r.source&&r.isTileClipped()&&o&&o.length){this.currentStencilSource=r.source;var n=this.context,s=n.gl;this.nextStencilID+o.length>256&&this.clearStencil(),n.setColorMode(_r.disabled),n.setDepthMode(Mi.disabled);var p=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var f=0,y=o;f<y.length;f+=1){var g=y[f],S=this._tileClippingMaskIDs[g.key]=this.nextStencilID++;p.draw(n,s.TRIANGLES,Mi.disabled,new qi({func:s.ALWAYS,mask:0},S,255,s.KEEP,s.KEEP,s.REPLACE),_r.disabled,ji.disabled,Jo(g.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},or.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var r=this.nextStencilID++,o=this.context.gl;return new qi({func:o.NOTEQUAL,mask:255},r,255,o.KEEP,o.KEEP,o.REPLACE)},or.prototype.stencilModeForClipping=function(r){var o=this.context.gl;return new qi({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,o.KEEP,o.KEEP,o.REPLACE)},or.prototype.stencilConfigForOverlap=function(r){var o,n=this.context.gl,s=r.sort(function(S,k){return k.overscaledZ-S.overscaledZ}),p=s[s.length-1].overscaledZ,f=s[0].overscaledZ-p+1;if(f>1){this.currentStencilSource=void 0,this.nextStencilID+f>256&&this.clearStencil();for(var y={},g=0;g<f;g++)y[g+p]=new qi({func:n.GEQUAL,mask:255},g+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=f,[y,s]}return[(o={},o[p]=qi.disabled,o),s]},or.prototype.colorModeForRenderPass=function(){var r=this.context.gl;return this._showOverdrawInspector?new _r([r.CONSTANT_COLOR,r.ONE],new l.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?_r.unblended:_r.alphaBlended},or.prototype.depthModeForSublayer=function(r,o,n){if(!this.opaquePassEnabledForLayer())return Mi.disabled;var s=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Mi(n||this.context.gl.LEQUAL,o,[s,s])},or.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},or.prototype.render=function(r,o){var n=this;this.style=r,this.options=o,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var s=this.style._order,p=this.style.sourceCaches;for(var f in p){var y=p[f];y.used&&y.prepare(this.context)}var g,S,k={},L={},U={};for(var X in p){var W=p[X];k[X]=W.getVisibleCoordinates(),L[X]=k[X].slice().reverse(),U[X]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var G=0;G<s.length;G++)if(this.style._layers[s[G]].is3D()){this.opaquePassCutoff=G;break}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var ft=0,ut=s;ft<ut.length;ft+=1){var St=this.style._layers[ut[ft]];if(St.hasOffscreenPass()&&!St.isHidden(this.transform.zoom)){var Ct=L[St.source];("custom"===St.type||Ct.length)&&this.renderLayer(this,p[St.source],St,Ct)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=s.length-1;this.currentLayer>=0;this.currentLayer--){var Ut=this.style._layers[s[this.currentLayer]],te=p[Ut.source],le=k[Ut.source];this._renderTileClippingMasks(Ut,le),this.renderLayer(this,te,Ut,le)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<s.length;this.currentLayer++){var De=this.style._layers[s[this.currentLayer]],Ce=p[De.source],$e=("symbol"===De.type?U:L)[De.source];this._renderTileClippingMasks(De,k[De.source]),this.renderLayer(this,Ce,De,$e)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(Se){Se.source&&!Se.isHidden(n.transform.zoom)&&(Se.source!==(S&&S.id)&&(S=n.style.sourceCaches[Se.source]),(!g||g.getSource().maxzoom<S.getSource().maxzoom)&&(g=S))}),g&&Ko.debug(this,g,g.getVisibleCoordinates())),this.context.setDefault()},or.prototype.setupOffscreenDepthRenderbuffer=function(){var r=this.context;this.depthRbo||(this.depthRbo=r.createRenderbuffer(r.gl.DEPTH_COMPONENT16,this.width,this.height))},or.prototype.renderLayer=function(r,o,n,s){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||s.length)&&(this.id=n.id,this.gpuTimingStart(n),Ko[n.type](r,o,n,s,this.style.placement.variableOffsets),this.gpuTimingEnd())},or.prototype.gpuTimingStart=function(r){if(this.options.gpuTiming){var o=this.context.extTimerQuery,n=this.gpuTimers[r.id];n||(n=this.gpuTimers[r.id]={calls:0,cpuTime:0,query:o.createQueryEXT()}),n.calls++,o.beginQueryEXT(o.TIME_ELAPSED_EXT,n.query)}},or.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var r=this.context.extTimerQuery;r.endQueryEXT(r.TIME_ELAPSED_EXT)}},or.prototype.collectGpuTimers=function(){var r=this.gpuTimers;return this.gpuTimers={},r},or.prototype.queryGpuTimers=function(r){var o={};for(var n in r){var s=r[n],p=this.context.extTimerQuery,f=p.getQueryObjectEXT(s.query,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(s.query),o[n]=f}return o},or.prototype.translatePosMatrix=function(r,o,n,s,p){if(!n[0]&&!n[1])return r;var f=p?"map"===s?this.transform.angle:0:"viewport"===s?-this.transform.angle:0;if(f){var y=Math.sin(f),g=Math.cos(f);n=[n[0]*g-n[1]*y,n[0]*y+n[1]*g]}var S=[p?n[0]:Ar(o,n[0],this.transform.zoom),p?n[1]:Ar(o,n[1],this.transform.zoom),0],k=new Float32Array(16);return l.translate(k,r,S),k},or.prototype.saveTileTexture=function(r){var o=this._tileTextures[r.size[0]];o?o.push(r):this._tileTextures[r.size[0]]=[r]},or.prototype.getTileTexture=function(r){var o=this._tileTextures[r];return o&&o.length>0?o.pop():null},or.prototype.isPatternMissing=function(r){if(!r)return!1;var o=this.imageManager.getPattern(r.from.toString()),n=this.imageManager.getPattern(r.to.toString());return!o||!n},or.prototype.useProgram=function(r,o){void 0===o&&(o=this.emptyProgramConfiguration),this.cache=this.cache||{};var n=""+r+(o.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new ln(this.context,Ho[r],o,Xo[r],this._showOverdrawInspector)),this.cache[n]},or.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},or.prototype.setBaseState=function(){var r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)};var ur=function(r,o,n,s,p){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===p||p,this._minZoom=r||0,this._maxZoom=o||22,this._minPitch=null==n?0:n,this._maxPitch=null==s?60:s,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ir={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ur.prototype.clone=function(){var r=new ur(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r._center=this._center,r.zoom=this.zoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._unmodified=this._unmodified,r._calcMatrices(),r},Ir.minZoom.get=function(){return this._minZoom},Ir.minZoom.set=function(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))},Ir.maxZoom.get=function(){return this._maxZoom},Ir.maxZoom.set=function(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))},Ir.minPitch.get=function(){return this._minPitch},Ir.minPitch.set=function(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))},Ir.maxPitch.get=function(){return this._maxPitch},Ir.maxPitch.set=function(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))},Ir.renderWorldCopies.get=function(){return this._renderWorldCopies},Ir.renderWorldCopies.set=function(r){void 0===r?r=!0:null===r&&(r=!1),this._renderWorldCopies=r},Ir.worldSize.get=function(){return this.tileSize*this.scale},Ir.centerPoint.get=function(){return this.size._div(2)},Ir.size.get=function(){return new l.Point(this.width,this.height)},Ir.bearing.get=function(){return-this.angle/Math.PI*180},Ir.bearing.set=function(r){var o=-l.wrap(r,-180,180)*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ir.pitch.get=function(){return this._pitch/Math.PI*180},Ir.pitch.set=function(r){var o=l.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())},Ir.fov.get=function(){return this._fov/Math.PI*180},Ir.fov.set=function(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())},Ir.zoom.get=function(){return this._zoom},Ir.zoom.set=function(r){var o=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom,this._constrain(),this._calcMatrices())},Ir.center.get=function(){return this._center},Ir.center.set=function(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())},ur.prototype.coveringZoomLevel=function(r){var o=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,o)},ur.prototype.getVisibleUnwrappedCoordinates=function(r){var o=[new l.UnwrappedTileID(0,r)];if(this._renderWorldCopies)for(var n=this.pointCoordinate(new l.Point(0,0)),s=this.pointCoordinate(new l.Point(this.width,0)),p=this.pointCoordinate(new l.Point(this.width,this.height)),f=this.pointCoordinate(new l.Point(0,this.height)),y=Math.floor(Math.min(n.x,s.x,p.x,f.x)),g=Math.floor(Math.max(n.x,s.x,p.x,f.x)),S=y-1;S<=g+1;S++)0!==S&&o.push(new l.UnwrappedTileID(S,r));return o},ur.prototype.coveringTiles=function(r){var o=this.coveringZoomLevel(r),n=o;if(void 0!==r.minzoom&&o<r.minzoom)return[];void 0!==r.maxzoom&&o>r.maxzoom&&(o=r.maxzoom);var s=l.MercatorCoordinate.fromLngLat(this.center),p=Math.pow(2,o),f=new l.Point(p*s.x-.5,p*s.y-.5);return function(y,g,S,k){void 0===k&&(k=!0);var L=1<<y,U={};function X(G,H,ft){var ut,_t,Ct;if(ft>=0&&ft<=L)for(ut=G;ut<H;ut++)0!==(_t=Math.floor(ut/L))&&!0!==k||(Ct=new l.OverscaledTileID(S,_t,y,(ut%L+L)%L,ft),U[Ct.key]=Ct)}var W=g.map(function(G){return new l.Point(G.x,G.y)._mult(L)});return la(W[0],W[1],W[2],0,L,X),la(W[2],W[3],W[0],0,L,X),Object.keys(U).map(function(G){return U[G]})}(o,[this.pointCoordinate(new l.Point(0,0)),this.pointCoordinate(new l.Point(this.width,0)),this.pointCoordinate(new l.Point(this.width,this.height)),this.pointCoordinate(new l.Point(0,this.height))],r.reparseOverscaled?n:o,this._renderWorldCopies).sort(function(y,g){return f.dist(y.canonical)-f.dist(g.canonical)})},ur.prototype.resize=function(r,o){this.width=r,this.height=o,this.pixelsToGLUnits=[2/r,-2/o],this._constrain(),this._calcMatrices()},Ir.unmodified.get=function(){return this._unmodified},ur.prototype.zoomScale=function(r){return Math.pow(2,r)},ur.prototype.scaleZoom=function(r){return Math.log(r)/Math.LN2},ur.prototype.project=function(r){var o=l.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(r.lng)*this.worldSize,l.mercatorYfromLat(o)*this.worldSize)},ur.prototype.unproject=function(r){return new l.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()},Ir.point.get=function(){return this.project(this.center)},ur.prototype.setLocationAtPoint=function(r,o){var n=this.pointCoordinate(o),s=this.pointCoordinate(this.centerPoint),p=this.locationCoordinate(r),f=new l.MercatorCoordinate(p.x-(n.x-s.x),p.y-(n.y-s.y));this.center=this.coordinateLocation(f),this._renderWorldCopies&&(this.center=this.center.wrap())},ur.prototype.locationPoint=function(r){return this.coordinatePoint(this.locationCoordinate(r))},ur.prototype.pointLocation=function(r){return this.coordinateLocation(this.pointCoordinate(r))},ur.prototype.locationCoordinate=function(r){return l.MercatorCoordinate.fromLngLat(r)},ur.prototype.coordinateLocation=function(r){return r.toLngLat()},ur.prototype.pointCoordinate=function(r){var o=[r.x,r.y,0,1],n=[r.x,r.y,1,1];l.transformMat4(o,o,this.pixelMatrixInverse),l.transformMat4(n,n,this.pixelMatrixInverse);var s=o[3],p=n[3],g=o[1]/s,S=n[1]/p,k=o[2]/s,L=n[2]/p,U=k===L?0:(0-k)/(L-k);return new l.MercatorCoordinate(l.number(o[0]/s,n[0]/p,U)/this.worldSize,l.number(g,S,U)/this.worldSize)},ur.prototype.coordinatePoint=function(r){var o=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.transformMat4(o,o,this.pixelMatrix),new l.Point(o[0]/o[3],o[1]/o[3])},ur.prototype.getBounds=function(){return(new l.LngLatBounds).extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},ur.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ur.prototype.setMaxBounds=function(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ur.prototype.calculatePosMatrix=function(r,o){void 0===o&&(o=!1);var n=r.key,s=o?this._alignedPosMatrixCache:this._posMatrixCache;if(s[n])return s[n];var p=r.canonical,f=this.worldSize/this.zoomScale(p.z),y=p.x+Math.pow(2,p.z)*r.wrap,g=l.identity(new Float64Array(16));return l.translate(g,g,[y*f,p.y*f,0]),l.scale(g,g,[f/l.EXTENT,f/l.EXTENT,1]),l.multiply(g,o?this.alignedProjMatrix:this.projMatrix,g),s[n]=new Float32Array(g),s[n]},ur.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ur.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var r,o,n,s,p=-90,f=90,y=-180,g=180,S=this.size,k=this._unmodified;if(this.latRange){var L=this.latRange;p=l.mercatorYfromLat(L[1])*this.worldSize,r=(f=l.mercatorYfromLat(L[0])*this.worldSize)-p<S.y?S.y/(f-p):0}if(this.lngRange){var U=this.lngRange;y=l.mercatorXfromLng(U[0])*this.worldSize,o=(g=l.mercatorXfromLng(U[1])*this.worldSize)-y<S.x?S.x/(g-y):0}var X=this.point,W=Math.max(o||0,r||0);if(W)return this.center=this.unproject(new l.Point(o?(g+y)/2:X.x,r?(f+p)/2:X.y)),this.zoom+=this.scaleZoom(W),this._unmodified=k,void(this._constraining=!1);if(this.latRange){var G=X.y,H=S.y/2;G-H<p&&(s=p+H),G+H>f&&(s=f-H)}if(this.lngRange){var ft=X.x,ut=S.x/2;ft-ut<y&&(n=y+ut),ft+ut>g&&(n=g-ut)}void 0===n&&void 0===s||(this.center=this.unproject(new l.Point(void 0!==n?n:X.x,void 0!==s?s:X.y))),this._unmodified=k,this._constraining=!1}},ur.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var r=this._fov/2,o=Math.PI/2+this._pitch,n=Math.sin(r)*this.cameraToCenterDistance/Math.sin(Math.PI-o-r),s=this.point,p=s.x,f=s.y,y=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),g=this.height/50,S=new Float64Array(16);l.perspective(S,this._fov,this.width/this.height,g,y),l.scale(S,S,[1,-1,1]),l.translate(S,S,[0,0,-this.cameraToCenterDistance]),l.rotateX(S,S,this._pitch),l.rotateZ(S,S,this.angle),l.translate(S,S,[-p,-f,0]),this.mercatorMatrix=l.scale([],S,[this.worldSize,this.worldSize,this.worldSize]),l.scale(S,S,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=S;var k=this.width%2/2,L=this.height%2/2,U=Math.cos(this.angle),X=Math.sin(this.angle),W=p-Math.round(p)+U*k+X*L,G=f-Math.round(f)+U*L+X*k,H=new Float64Array(S);if(l.translate(H,H,[W>.5?W-1:W,G>.5?G-1:G,0]),this.alignedProjMatrix=H,S=l.create(),l.scale(S,S,[this.width/2,-this.height/2,1]),l.translate(S,S,[1,-1,0]),this.labelPlaneMatrix=S,S=l.create(),l.scale(S,S,[1,-1,1]),l.translate(S,S,[-1,-1,0]),l.scale(S,S,[2/this.width,2/this.height,1]),this.glCoordMatrix=S,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(S=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=S,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ur.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var r=this.pointCoordinate(new l.Point(0,0)),o=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.transformMat4(o,o,this.pixelMatrix)[3]/this.cameraToCenterDistance},ur.prototype.getCameraPoint=function(){var o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,o))},ur.prototype.getCameraQueryGeometry=function(r){var o=this.getCameraPoint();if(1===r.length)return[r[0],o];for(var n=o.x,s=o.y,p=o.x,f=o.y,y=0,g=r;y<g.length;y+=1){var S=g[y];n=Math.min(n,S.x),s=Math.min(s,S.y),p=Math.max(p,S.x),f=Math.max(f,S.y)}return[new l.Point(n,s),new l.Point(p,s),new l.Point(p,f),new l.Point(n,f),new l.Point(n,s)]},Object.defineProperties(ur.prototype,Ir);var Ro=function(r){var o,s,p,f;this._hashName=r&&encodeURIComponent(r),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(o=this._updateHashUnthrottled.bind(this),s=!1,p=null,f=function(){p=null,s&&(o(),p=setTimeout(f,300),s=!1)},function(){return s=!0,p||f(),p})};Ro.prototype.addTo=function(r){return this._map=r,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ro.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ro.prototype.getHashString=function(r){var o=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,s=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),p=Math.pow(10,s),f=Math.round(o.lng*p)/p,y=Math.round(o.lat*p)/p,g=this._map.getBearing(),S=this._map.getPitch(),k="";if(k+=r?"/"+f+"/"+y+"/"+n:n+"/"+y+"/"+f,(g||S)&&(k+="/"+Math.round(10*g)/10),S&&(k+="/"+Math.round(S)),this._hashName){var L=this._hashName,U=!1,X=l.window.location.hash.slice(1).split("&").map(function(W){var G=W.split("=")[0];return G===L?(U=!0,G+"="+k):W}).filter(function(W){return W});return U||X.push(L+"="+k),"#"+X.join("&")}return"#"+k},Ro.prototype._getCurrentHash=function(){var r,o=this,n=l.window.location.hash.replace("#","");return this._hashName?(n.split("&").map(function(s){return s.split("=")}).forEach(function(s){s[0]===o._hashName&&(r=s)}),(r&&r[1]||"").split("/")):n.split("/")},Ro.prototype._onHashChange=function(){var r=this._getCurrentHash();if(r.length>=3&&!r.some(function(n){return isNaN(n)})){var o=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:o,pitch:+(r[4]||0)}),!0}return!1},Ro.prototype._updateHashUnthrottled=function(){var r=this.getHashString();try{l.window.history.replaceState(l.window.history.state,"",r)}catch(o){}};var kt=function(r){function o(s,p,f,y){void 0===y&&(y={});var g=I.mousePos(p.getCanvasContainer(),f),S=p.unproject(g);r.call(this,s,l.extend({point:g,lngLat:S,originalEvent:f},y)),this._defaultPrevented=!1,this.target=p}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var n={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,n),o}(l.Event),Qt=function(r){function o(s,p,f){var y=I.touchPos(p.getCanvasContainer(),f),g=y.map(function(L){return p.unproject(L)}),S=y.reduce(function(L,U,X,W){return L.add(U.div(W.length))},new l.Point(0,0)),k=p.unproject(S);r.call(this,s,{points:y,point:S,lngLats:g,lngLat:k,originalEvent:f}),this._defaultPrevented=!1}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var n={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,n),o}(l.Event),de=function(r){function o(s,p,f){r.call(this,s,{originalEvent:f}),this._defaultPrevented=!1}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var n={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,n),o}(l.Event),Te=function(r){this._map=r,this._el=r.getCanvasContainer(),this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,l.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Te.prototype.setZoomRate=function(r){this._defaultZoomRate=r},Te.prototype.setWheelZoomRate=function(r){this._wheelZoomRate=r},Te.prototype.isEnabled=function(){return!!this._enabled},Te.prototype.isActive=function(){return!!this._active},Te.prototype.isZooming=function(){return!!this._zooming},Te.prototype.enable=function(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=r&&"center"===r.around)},Te.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Te.prototype.onWheel=function(r){if(this.isEnabled()){var o=r.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY,n=l.browser.now(),s=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==o&&o%4.000244140625==0?this._type="wheel":0!==o&&Math.abs(o)<4?this._type="trackpad":s>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(s*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),r.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=r,this._delta-=o,this.isActive()||this._start(r)),r.preventDefault()}},Te.prototype._onTimeout=function(r){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(r)},Te.prototype._start=function(r){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new l.Event("movestart",{originalEvent:r})),this._map.fire(new l.Event("zoomstart",{originalEvent:r}))),this._finishTimeout&&clearTimeout(this._finishTimeout);var o=I.mousePos(this._el,r);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(o)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},Te.prototype._onScrollFrame=function(){var r=this;if(this._frameId=null,this.isActive()){var o=this._map.transform;if(0!==this._delta){var n="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,s=2/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==s&&(s=1/s);var p="number"==typeof this._targetZoom?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(p*s))),"wheel"===this._type&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var f="number"==typeof this._targetZoom?this._targetZoom:o.zoom,y=this._startZoom,g=this._easing,S=!1;if("wheel"===this._type&&y&&g){var k=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),L=g(k);o.zoom=l.number(y,f,L),k<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):S=!0}else o.zoom=f,S=!0;o.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new l.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new l.Event("zoom",{originalEvent:this._lastWheelEvent})),S&&(this._active=!1,this._finishTimeout=setTimeout(function(){r._zooming=!1,r._map.fire(new l.Event("zoomend",{originalEvent:r._lastWheelEvent})),r._map.fire(new l.Event("moveend",{originalEvent:r._lastWheelEvent})),delete r._targetZoom},200))}},Te.prototype._smoothOutEasing=function(r){var o=l.ease;if(this._prevEase){var n=this._prevEase,s=(l.browser.now()-n.start)/n.duration,p=n.easing(s+.01)-n.easing(s),f=.27/Math.sqrt(p*p+1e-4)*.01,y=Math.sqrt(.0729-f*f);o=l.bezier(f,y,.25,1)}return this._prevEase={start:l.browser.now(),duration:r,easing:o},o};var ve=function(r,o){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=o.clickTolerance||1,l.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};ve.prototype.isEnabled=function(){return!!this._enabled},ve.prototype.isActive=function(){return!!this._active},ve.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ve.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ve.prototype.onMouseDown=function(r){this.isEnabled()&&r.shiftKey&&0===r.button&&(l.window.document.addEventListener("mousemove",this._onMouseMove,!1),l.window.document.addEventListener("keydown",this._onKeyDown,!1),l.window.document.addEventListener("mouseup",this._onMouseUp,!1),I.disableDrag(),this._startPos=this._lastPos=I.mousePos(this._el,r),this._active=!0)},ve.prototype._onMouseMove=function(r){var o=I.mousePos(this._el,r);if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=o,this._box||(this._box=I.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));var s=Math.min(n.x,o.x),p=Math.max(n.x,o.x),f=Math.min(n.y,o.y),y=Math.max(n.y,o.y);I.setTransform(this._box,"translate("+s+"px,"+f+"px)"),this._box.style.width=p-s+"px",this._box.style.height=y-f+"px"}},ve.prototype._onMouseUp=function(r){if(0===r.button){var o=this._startPos,n=I.mousePos(this._el,r);this._finish(),I.suppressClick(),o.x===n.x&&o.y===n.y?this._fireEvent("boxzoomcancel",r):this._map.fitScreenCoordinates(o,n,this._map.getBearing(),{linear:!0}).fire(new l.Event("boxzoomend",{originalEvent:r}))}},ve.prototype._onKeyDown=function(r){27===r.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",r))},ve.prototype._finish=function(){this._active=!1,l.window.document.removeEventListener("mousemove",this._onMouseMove,!1),l.window.document.removeEventListener("keydown",this._onKeyDown,!1),l.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos},ve.prototype._fireEvent=function(r,o){return this._map.fire(new l.Event(r,{originalEvent:o}))};var yi=l.bezier(0,0,.25,1),Je=function(r,o){this._map=r,this._el=o.element||r.getCanvasContainer(),this._state="disabled",this._button=o.button||"right",this._bearingSnap=o.bearingSnap||0,this._pitchWithRotate=!1!==o.pitchWithRotate,this._clickTolerance=o.clickTolerance||1,l.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};Je.prototype.isEnabled=function(){return"disabled"!==this._state},Je.prototype.isActive=function(){return"active"===this._state},Je.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Je.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Je.prototype.onMouseDown=function(r){if("enabled"===this._state){var o="touchstart"===r.type;if(o)this._startTime=Date.now();else if("right"===this._button){if(this._eventButton=I.mouseButton(r),this._eventButton!==(r.ctrlKey?0:2))return}else{if(r.ctrlKey||0!==I.mouseButton(r))return;this._eventButton=0}I.disableDrag(),o?(l.window.document.addEventListener("touchmove",this._onMouseMove,{capture:!0}),l.window.document.addEventListener("touchend",this._onMouseUp)):(l.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),l.window.document.addEventListener("mouseup",this._onMouseUp)),l.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[l.browser.now(),this._map.getBearing()]],this._startPos=this._prevPos=this._lastPos=I.mousePos(this._el,r),this._center=this._map.transform.centerPoint,r.preventDefault()}},Je.prototype._onMouseMove=function(r){var o=I.mousePos(this._el,r);this._lastPos.equals(o)||"pending"===this._state&&o.dist(this._startPos)<this._clickTolerance||(this._lastMoveEvent=r,this._lastPos=o,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",r),this._fireEvent("movestart",r),this._pitchWithRotate&&this._fireEvent("pitchstart",r)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Je.prototype._onDragFrame=function(){this._frameId=null;var r=this._lastMoveEvent;if(r){var o=this._map.transform,n=this._prevPos,s=this._lastPos,y=o.bearing-.8*(n.x-s.x),g=o.pitch- -.5*(n.y-s.y),S=this._inertia,k=S[S.length-1];this._drainInertiaBuffer(),S.push([l.browser.now(),this._map._normalizeBearing(y,k[1])]);var L=o.bearing;if(o.bearing=y,this._pitchWithRotate){var U=o.pitch;o.pitch=g,o.pitch!==U&&this._fireEvent("pitch",r)}o.bearing!==L&&this._fireEvent("rotate",r),this._fireEvent("move",r),delete this._lastMoveEvent,this._prevPos=this._lastPos}},Je.prototype._onMouseUp=function(r){var o="touchend"===r.type;if(o&&this._startPos===this._lastPos&&Date.now()-this._startTime<300&&this._el.click(),o||I.mouseButton(r)===this._eventButton)switch(this._state){case"active":this._state="enabled",I.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(r);break;case"pending":this._state="enabled",this._unbind()}},Je.prototype._onBlur=function(r){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",r),this._pitchWithRotate&&this._fireEvent("pitchend",r),this._fireEvent("moveend",r);break;case"pending":this._state="enabled",this._unbind()}},Je.prototype._unbind=function(){l.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),l.window.document.removeEventListener("mouseup",this._onMouseUp),l.window.document.removeEventListener("touchmove",this._onMouseMove,{capture:!0}),l.window.document.removeEventListener("touchend",this._onMouseUp),l.window.removeEventListener("blur",this._onBlur),I.enableDrag()},Je.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._lastPos},Je.prototype._inertialRotate=function(r){var o=this;this._fireEvent("rotateend",r),this._drainInertiaBuffer();var n=this._map,s=n.getBearing(),p=this._inertia,f=function(){Math.abs(s)<o._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:r}):o._fireEvent("moveend",r),o._pitchWithRotate&&o._fireEvent("pitchend",r)};if(p.length<2)f();else{var y=p[0],g=p[p.length-1],k=n._normalizeBearing(s,p[p.length-2][1]),L=g[1]-y[1],U=L<0?-1:1,X=(g[0]-y[0])/1e3;if(0!==L&&0!==X){var W=Math.abs(L*(.25/X));W>180&&(W=180);var G=W/180;k+=U*W*(G/2),Math.abs(n._normalizeBearing(k,0))<this._bearingSnap&&(k=n._normalizeBearing(0,k)),n.rotateTo(k,{duration:1e3*G,easing:yi,noMoveStart:!0},{originalEvent:r})}else f()}},Je.prototype._fireEvent=function(r,o){return this._map.fire(new l.Event(r,o?{originalEvent:o}:{}))},Je.prototype._drainInertiaBuffer=function(){for(var r=this._inertia,o=l.browser.now();r.length>0&&o-r[0][0]>160;)r.shift()};var oe={linearity:.3,easing:l.bezier(0,0,.3,1),maxSpeed:1400,deceleration:2500},ci=function(r,o){this._map=r,this._el=r.getCanvasContainer(),this._state="disabled",this._clickTolerance=o.clickTolerance||1,this._inertiaOptions=oe,l.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};ci.prototype.isEnabled=function(){return"disabled"!==this._state},ci.prototype.isActive=function(){return"active"===this._state},ci.prototype.enable=function(r){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled",this._inertiaOptions=l.extend(oe,r))},ci.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},ci.prototype.onMouseDown=function(r){"enabled"===this._state&&(r.ctrlKey||0!==I.mouseButton(r)||(I.addEventListener(l.window.document,"mousemove",this._onMove,{capture:!0}),I.addEventListener(l.window.document,"mouseup",this._onMouseUp),this._start(r)))},ci.prototype.onTouchStart=function(r){this.isEnabled()&&(r.touches&&r.touches.length>1&&("pending"===this._state||"active"===this._state)||(I.addEventListener(l.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),I.addEventListener(l.window.document,"touchend",this._onTouchEnd),this._start(r)))},ci.prototype._start=function(r){l.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._prevPos=this._lastPos=I.mousePos(this._el,r),this._startTouch=this._lastTouch=l.window.TouchEvent&&r instanceof l.window.TouchEvent?I.touchPos(this._el,r):null,this._inertia=[[l.browser.now(),this._startPos]]},ci.prototype._touchesMatch=function(r,o){return!(!r||!o||r.length!==o.length)&&r.every(function(n,s){return o[s]===n})},ci.prototype._onMove=function(r){r.preventDefault();var o=l.window.TouchEvent&&r instanceof l.window.TouchEvent?I.touchPos(this._el,r):null,n=I.mousePos(this._el,r);(o?this._touchesMatch(this._lastTouch,o):this._lastPos.equals(n))||"pending"===this._state&&n.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=r,this._lastPos=n,this._lastTouch=o,this._drainInertiaBuffer(),this._inertia.push([l.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._shouldStart=!0),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},ci.prototype._onDragFrame=function(){this._frameId=null;var r=this._lastMoveEvent;if(r)if(this._map.touchZoomRotate.isActive())this._abort(r);else if(this._shouldStart&&(this._fireEvent("dragstart",r),this._fireEvent("movestart",r),this._shouldStart=!1),this.isActive()){var o=this._map.transform;o.setLocationAtPoint(o.pointLocation(this._prevPos),this._lastPos),this._fireEvent("drag",r),this._fireEvent("move",r),this._prevPos=this._lastPos,delete this._lastMoveEvent}},ci.prototype._onMouseUp=function(r){if(0===I.mouseButton(r))switch(this._state){case"active":this._state="enabled",I.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(r);break;case"pending":this._state="enabled",this._unbind()}},ci.prototype._onTouchEnd=function(r){if(r.touches&&0!==r.touches.length)switch(this._state){case"pending":case"active":break;case"enabled":this.onTouchStart(r)}else switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(r);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},ci.prototype._abort=function(r){switch(this._state){case"active":this._state="enabled",this._shouldStart||(this._fireEvent("dragend",r),this._fireEvent("moveend",r)),this._unbind(),this._deactivate(),l.window.TouchEvent&&r instanceof l.window.TouchEvent&&r.touches.length>1&&I.addEventListener(l.window.document,"touchend",this._onTouchEnd);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},ci.prototype._onBlur=function(r){this._abort(r)},ci.prototype._unbind=function(){I.removeEventListener(l.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),I.removeEventListener(l.window.document,"touchend",this._onTouchEnd),I.removeEventListener(l.window.document,"mousemove",this._onMove,{capture:!0}),I.removeEventListener(l.window.document,"mouseup",this._onMouseUp),I.removeEventListener(l.window,"blur",this._onBlur)},ci.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._mouseDownPos,delete this._lastPos,delete this._startTouch,delete this._lastTouch,delete this._shouldStart},ci.prototype._inertialPan=function(r){this._fireEvent("dragend",r),this._drainInertiaBuffer();var o=this._inertia;if(o.length<2)this._fireEvent("moveend",r);else{var n=o[o.length-1],s=o[0],p=n[1].sub(s[1]),f=(n[0]-s[0])/1e3;if(0===f||n[1].equals(s[1]))this._fireEvent("moveend",r);else{var y=this._inertiaOptions,g=y.linearity,S=y.easing,k=y.maxSpeed,L=y.deceleration,U=p.mult(g/f),X=U.mag();X>k&&(X=k,U._unit()._mult(X));var W=X/(L*g),G=U.mult(-W/2);this._map.panBy(G,{duration:1e3*W,easing:S,noMoveStart:!0},{originalEvent:r})}}},ci.prototype._fireEvent=function(r,o){return this._map.fire(new l.Event(r,o?{originalEvent:o}:{}))},ci.prototype._drainInertiaBuffer=function(){for(var r=this._inertia,o=l.browser.now();r.length>0&&o-r[0][0]>160;)r.shift()};var kr=function(r){this._map=r,this._el=r.getCanvasContainer(),l.bindAll(["_onKeyDown"],this)};function Br(r){return r*(2-r)}kr.prototype.isEnabled=function(){return!!this._enabled},kr.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},kr.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},kr.prototype._onKeyDown=function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var o=0,n=0,s=0,p=0,f=0;switch(r.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:r.shiftKey?n=-1:(r.preventDefault(),p=-1);break;case 39:r.shiftKey?n=1:(r.preventDefault(),p=1);break;case 38:r.shiftKey?s=1:(r.preventDefault(),f=-1);break;case 40:r.shiftKey?s=-1:(f=1,r.preventDefault());break;default:return}var y=this._map,g=y.getZoom(),S={duration:300,delayEndEvents:500,easing:Br,zoom:o?Math.round(g)+o*(r.shiftKey?2:1):g,bearing:y.getBearing()+15*n,pitch:y.getPitch()+10*s,offset:[100*-p,100*-f],center:y.getCenter()};y.easeTo(S,{originalEvent:r})}};var Vi=function(r){this._map=r,l.bindAll(["_onDblClick","_onZoomEnd"],this)};Vi.prototype.isEnabled=function(){return!!this._enabled},Vi.prototype.isActive=function(){return!!this._active},Vi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Vi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Vi.prototype.onTouchStart=function(r){var o=this;if(this.isEnabled()&&!(r.points.length>1))if(this._tapped){var s=this._tappedPoint;if(s&&s.dist(r.points[0])<=30){r.originalEvent.preventDefault();var p=function(){o._tapped&&o._zoom(r),o._map.off("touchcancel",f),o._resetTapped()},f=function(){o._map.off("touchend",p),o._resetTapped()};this._map.once("touchend",p),this._map.once("touchcancel",f)}else this._resetTapped()}else this._tappedPoint=r.points[0],this._tapped=setTimeout(function(){o._tapped=null,o._tappedPoint=null},300)},Vi.prototype._resetTapped=function(){clearTimeout(this._tapped),this._tapped=null,this._tappedPoint=null},Vi.prototype.onDblClick=function(r){this.isEnabled()&&(r.originalEvent.preventDefault(),this._zoom(r))},Vi.prototype._zoom=function(r){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(r.originalEvent.shiftKey?-1:1),{around:r.lngLat},r)},Vi.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var Gr=l.bezier(0,0,.15,1),Nr=function(r){this._map=r,this._el=r.getCanvasContainer(),l.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Nr.prototype.isEnabled=function(){return!!this._enabled},Nr.prototype.enable=function(r){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!r&&"center"===r.around)},Nr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},Nr.prototype.disableRotation=function(){this._rotationDisabled=!0},Nr.prototype.enableRotation=function(){this._rotationDisabled=!1},Nr.prototype.isActive=function(){return this.isEnabled()&&!!this._gestureIntent},Nr.prototype.onStart=function(r){if(this.isEnabled()&&2===r.touches.length){var o=I.mousePos(this._el,r.touches[0]),n=I.mousePos(this._el,r.touches[1]),s=o.add(n).div(2);this._startVec=o.sub(n),this._startAround=this._map.transform.pointLocation(s),this._gestureIntent=void 0,this._inertia=[],I.addEventListener(l.window.document,"touchmove",this._onMove,{passive:!1}),I.addEventListener(l.window.document,"touchend",this._onEnd)}},Nr.prototype._getTouchEventData=function(r){var o=I.mousePos(this._el,r.touches[0]),n=I.mousePos(this._el,r.touches[1]),s=o.sub(n);return{vec:s,center:o.add(n).div(2),scale:s.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*s.angleWith(this._startVec)/Math.PI}},Nr.prototype._onMove=function(r){if(2===r.touches.length){var o=this._getTouchEventData(r),n=o.vec,s=o.scale,p=o.bearing;if(!this._gestureIntent){var f=this._rotationDisabled&&1!==s||Math.abs(1-s)>.15;Math.abs(p)>10?this._gestureIntent="rotate":f&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new l.Event(this._gestureIntent+"start",{originalEvent:r})),this._map.fire(new l.Event("movestart",{originalEvent:r})),this._startVec=n)}this._lastTouchEvent=r,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),r.preventDefault()}},Nr.prototype._onTouchFrame=function(){this._frameId=null;var r=this._gestureIntent;if(r){var o=this._map.transform;this._startScale||(this._startScale=o.scale,this._startBearing=o.bearing);var n=this._getTouchEventData(this._lastTouchEvent),s=n.center,p=n.bearing,f=n.scale,y=o.pointLocation(s),g=o.locationPoint(y);"rotate"===r&&(o.bearing=this._startBearing+p),o.zoom=o.scaleZoom(this._startScale*f),o.setLocationAtPoint(this._startAround,g),this._map.fire(new l.Event(r,{originalEvent:this._lastTouchEvent})),this._map.fire(new l.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([l.browser.now(),f,s])}},Nr.prototype._onEnd=function(r){I.removeEventListener(l.window.document,"touchmove",this._onMove,{passive:!1}),I.removeEventListener(l.window.document,"touchend",this._onEnd);var o=this._gestureIntent,n=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,o){this._map.fire(new l.Event(o+"end",{originalEvent:r})),this._drainInertiaBuffer();var s=this._inertia,p=this._map;if(s.length<2)p.snapToNorth({},{originalEvent:r});else{var f=s[s.length-1],y=s[0],g=p.transform.scaleZoom(n*f[1]),S=p.transform.scaleZoom(n*y[1]),L=(f[0]-y[0])/1e3,U=f[2];if(0!==L&&g!==S){var X=.15*(g-S)/L;Math.abs(X)>2.5&&(X=X>0?2.5:-2.5);var W=1e3*Math.abs(X/(12*.15));p.easeTo({zoom:g+X*W/2e3,duration:W,easing:Gr,around:this._aroundCenter?p.getCenter():p.unproject(U),noMoveStart:!0},{originalEvent:r})}else p.snapToNorth({},{originalEvent:r})}}},Nr.prototype._drainInertiaBuffer=function(){for(var r=this._inertia,o=l.browser.now();r.length>2&&o-r[0][0]>160;)r.shift()};var ce={scrollZoom:Te,boxZoom:ve,dragRotate:Je,dragPan:ci,keyboard:kr,doubleClickZoom:Vi,touchZoomRotate:Nr},co=function(r){function o(n,s){r.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=s.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},o.prototype.setCenter=function(n,s){return this.jumpTo({center:n},s)},o.prototype.panBy=function(n,s,p){return n=l.Point.convert(n).mult(-1),this.panTo(this.transform.center,l.extend({offset:n},s),p)},o.prototype.panTo=function(n,s,p){return this.easeTo(l.extend({center:n},s),p)},o.prototype.getZoom=function(){return this.transform.zoom},o.prototype.setZoom=function(n,s){return this.jumpTo({zoom:n},s),this},o.prototype.zoomTo=function(n,s,p){return this.easeTo(l.extend({zoom:n},s),p)},o.prototype.zoomIn=function(n,s){return this.zoomTo(this.getZoom()+1,n,s),this},o.prototype.zoomOut=function(n,s){return this.zoomTo(this.getZoom()-1,n,s),this},o.prototype.getBearing=function(){return this.transform.bearing},o.prototype.setBearing=function(n,s){return this.jumpTo({bearing:n},s),this},o.prototype.rotateTo=function(n,s,p){return this.easeTo(l.extend({bearing:n},s),p)},o.prototype.resetNorth=function(n,s){return this.rotateTo(0,l.extend({duration:1e3},n),s),this},o.prototype.resetNorthPitch=function(n,s){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},n),s),this},o.prototype.snapToNorth=function(n,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,s):this},o.prototype.getPitch=function(){return this.transform.pitch},o.prototype.setPitch=function(n,s){return this.jumpTo({pitch:n},s),this},o.prototype.cameraForBounds=function(n,s){return n=l.LngLatBounds.convert(n),this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),0,s)},o.prototype._cameraForBoxAndBearing=function(n,s,p,f){if("number"==typeof(f=l.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding){var y=f.padding;f.padding={top:y,bottom:y,right:y,left:y}}if(l.deepEqual(Object.keys(f.padding).sort(function(te,le){return te<le?-1:te>le?1:0}),["bottom","left","right","top"])){var g=this.transform,S=g.project(l.LngLat.convert(n)),k=g.project(l.LngLat.convert(s)),L=S.rotate(-p*Math.PI/180),U=k.rotate(-p*Math.PI/180),X=new l.Point(Math.max(L.x,U.x),Math.max(L.y,U.y)),W=new l.Point(Math.min(L.x,U.x),Math.min(L.y,U.y)),G=X.sub(W),H=(g.width-f.padding.left-f.padding.right)/G.x,ft=(g.height-f.padding.top-f.padding.bottom)/G.y;if(!(ft<0||H<0)){var ut=Math.min(g.scaleZoom(g.scale*Math.min(H,ft)),f.maxZoom),_t=l.Point.convert(f.offset),Ut=new l.Point(_t.x+(f.padding.left-f.padding.right)/2,_t.y+(f.padding.top-f.padding.bottom)/2).mult(g.scale/g.zoomScale(ut));return{center:g.unproject(S.add(k).div(2).sub(Ut)),zoom:ut,bearing:p}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else l.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},o.prototype.fitBounds=function(n,s,p){return this._fitInternal(this.cameraForBounds(n,s),s,p)},o.prototype.fitScreenCoordinates=function(n,s,p,f,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(n)),this.transform.pointLocation(l.Point.convert(s)),p,f),f,y)},o.prototype._fitInternal=function(n,s,p){return n?(s=l.extend(n,s)).linear?this.easeTo(s,p):this.flyTo(s,p):this},o.prototype.jumpTo=function(n,s){this.stop();var p=this.transform,f=!1,y=!1,g=!1;return"zoom"in n&&p.zoom!==+n.zoom&&(f=!0,p.zoom=+n.zoom),void 0!==n.center&&(p.center=l.LngLat.convert(n.center)),"bearing"in n&&p.bearing!==+n.bearing&&(y=!0,p.bearing=+n.bearing),"pitch"in n&&p.pitch!==+n.pitch&&(g=!0,p.pitch=+n.pitch),this.fire(new l.Event("movestart",s)).fire(new l.Event("move",s)),f&&this.fire(new l.Event("zoomstart",s)).fire(new l.Event("zoom",s)).fire(new l.Event("zoomend",s)),y&&this.fire(new l.Event("rotatestart",s)).fire(new l.Event("rotate",s)).fire(new l.Event("rotateend",s)),g&&this.fire(new l.Event("pitchstart",s)).fire(new l.Event("pitch",s)).fire(new l.Event("pitchend",s)),this.fire(new l.Event("moveend",s))},o.prototype.easeTo=function(n,s){var p=this;this.stop(),(!1===(n=l.extend({offset:[0,0],duration:500,easing:l.ease},n)).animate||!n.essential&&l.browser.prefersReducedMotion)&&(n.duration=0);var f=this.transform,y=this.getZoom(),g=this.getBearing(),S=this.getPitch(),k="zoom"in n?+n.zoom:y,L="bearing"in n?this._normalizeBearing(n.bearing,g):g,U="pitch"in n?+n.pitch:S,X=f.centerPoint.add(l.Point.convert(n.offset)),W=f.pointLocation(X),G=l.LngLat.convert(n.center||W);this._normalizeCenter(G);var H,ft,ut=f.project(W),_t=f.project(G).sub(ut),St=f.zoomScale(k-y);return n.around&&(H=l.LngLat.convert(n.around),ft=f.locationPoint(H)),this._zooming=k!==y,this._rotating=g!==L,this._pitching=U!==S,this._prepareEase(s,n.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(Ct){if(p._zooming&&(f.zoom=l.number(y,k,Ct)),p._rotating&&(f.bearing=l.number(g,L,Ct)),p._pitching&&(f.pitch=l.number(S,U,Ct)),H)f.setLocationAtPoint(H,ft);else{var Ut=f.zoomScale(f.zoom-y),te=k>y?Math.min(2,St):Math.max(.5,St),le=Math.pow(te,1-Ct),De=f.unproject(ut.add(_t.mult(Ct*le)).mult(Ut));f.setLocationAtPoint(f.renderWorldCopies?De.wrap():De,X)}p._fireMoveEvents(s)},function(){n.delayEndEvents?p._easeEndTimeoutID=setTimeout(function(){return p._afterEase(s)},n.delayEndEvents):p._afterEase(s)},n),this},o.prototype._prepareEase=function(n,s){this._moving=!0,s||this.fire(new l.Event("movestart",n)),this._zooming&&this.fire(new l.Event("zoomstart",n)),this._rotating&&this.fire(new l.Event("rotatestart",n)),this._pitching&&this.fire(new l.Event("pitchstart",n))},o.prototype._fireMoveEvents=function(n){this.fire(new l.Event("move",n)),this._zooming&&this.fire(new l.Event("zoom",n)),this._rotating&&this.fire(new l.Event("rotate",n)),this._pitching&&this.fire(new l.Event("pitch",n))},o.prototype._afterEase=function(n){var s=this._zooming,p=this._rotating,f=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,s&&this.fire(new l.Event("zoomend",n)),p&&this.fire(new l.Event("rotateend",n)),f&&this.fire(new l.Event("pitchend",n)),this.fire(new l.Event("moveend",n))},o.prototype.flyTo=function(n,s){var p=this;if(!n.essential&&l.browser.prefersReducedMotion){var f=l.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(f,s)}this.stop(),n=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},n);var y=this.transform,g=this.getZoom(),S=this.getBearing(),k=this.getPitch(),L="zoom"in n?l.clamp(+n.zoom,y.minZoom,y.maxZoom):g,U="bearing"in n?this._normalizeBearing(n.bearing,S):S,X="pitch"in n?+n.pitch:k,W=y.zoomScale(L-g),G=y.centerPoint.add(l.Point.convert(n.offset)),H=y.pointLocation(G),ft=l.LngLat.convert(n.center||H);this._normalizeCenter(ft);var ut=y.project(H),_t=y.project(ft).sub(ut),St=n.curve,Ct=Math.max(y.width,y.height),Ut=Ct/W,te=_t.mag();if("minZoom"in n){var le=l.clamp(Math.min(n.minZoom,g,L),y.minZoom,y.maxZoom),De=Ct/y.zoomScale(le-g);St=Math.sqrt(De/te*2)}var Ce=St*St;function $e(xi){var hr=(Ut*Ut-Ct*Ct+(xi?-1:1)*Ce*Ce*te*te)/(2*(xi?Ut:Ct)*Ce*te);return Math.log(Math.sqrt(hr*hr+1)-hr)}function Se(xi){return(Math.exp(xi)-Math.exp(-xi))/2}function fi(xi){return(Math.exp(xi)+Math.exp(-xi))/2}var ni=$e(0),si=function(xi){return fi(ni)/fi(ni+St*xi)},li=function(xi){return Ct*((fi(ni)*(Se(hr=ni+St*xi)/fi(hr))-Se(ni))/Ce)/te;var hr},vi=($e(1)-ni)/St;if(Math.abs(te)<1e-6||!isFinite(vi)){if(Math.abs(Ct-Ut)<1e-6)return this.easeTo(n,s);var ui=Ut<Ct?-1:1;vi=Math.abs(Math.log(Ut/Ct))/St,li=function(){return 0},si=function(xi){return Math.exp(ui*St*xi)}}return n.duration="duration"in n?+n.duration:1e3*vi/("screenSpeed"in n?+n.screenSpeed/St:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=S!==U,this._pitching=X!==k,this._prepareEase(s,!1),this._ease(function(xi){var hr=xi*vi,Ji=1/si(hr);y.zoom=1===xi?L:g+y.scaleZoom(Ji),p._rotating&&(y.bearing=l.number(S,U,xi)),p._pitching&&(y.pitch=l.number(k,X,xi));var $i=1===xi?ft:y.unproject(ut.add(_t.mult(li(hr))).mult(Ji));y.setLocationAtPoint(y.renderWorldCopies?$i.wrap():$i,G),p._fireMoveEvents(s)},function(){return p._afterEase(s)},n),this},o.prototype.isEasing=function(){return!!this._easeFrameId},o.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this)}return this},o.prototype._ease=function(n,s,p){!1===p.animate||0===p.duration?(n(1),s()):(this._easeStart=l.browser.now(),this._easeOptions=p,this._onEaseFrame=n,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},o.prototype._renderFrameCallback=function(){var n=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},o.prototype._normalizeBearing=function(n,s){n=l.wrap(n,-180,180);var p=Math.abs(n-s);return Math.abs(n-360-s)<p&&(n-=360),Math.abs(n+360-s)<p&&(n+=360),n},o.prototype._normalizeCenter=function(n){var s=this.transform;if(s.renderWorldCopies&&!s.lngRange){var p=n.lng-s.center.lng;n.lng+=p>180?-360:p<-180?360:0}},o}(l.Evented),Cn=function(r){void 0===r&&(r={}),this.options=r,l.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Cn.prototype.getDefaultPosition=function(){return"bottom-right"},Cn.prototype.onAdd=function(r){var o=this.options&&this.options.compact;return this._map=r,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=I.create("div","mapboxgl-ctrl-attrib-inner",this._container),o&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===o&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Cn.prototype.onRemove=function(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Cn.prototype._updateEditLink=function(){var r=this._editLink;r||(r=this._editLink=this._container.querySelector(".mapbox-improve-map"));var o=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(r){var n=o.reduce(function(s,p,f){return p.value&&(s+=p.key+"="+p.value+(f<o.length-1?"&":"")),s},"?");r.href=l.config.FEEDBACK_URL+"/"+n+(this._map._hash?this._map._hash.getHashString(!0):""),r.rel="noopener nofollow"}},Cn.prototype._updateData=function(r){!r||"metadata"!==r.sourceDataType&&"style"!==r.dataType||(this._updateAttributions(),this._updateEditLink())},Cn.prototype._updateAttributions=function(){if(this._map.style){var r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(function(g){return"string"!=typeof g?"":g})):"string"==typeof this.options.customAttribution&&r.push(this.options.customAttribution)),this._map.style.stylesheet){var o=this._map.style.stylesheet;this.styleOwner=o.owner,this.styleId=o.id}var n=this._map.style.sourceCaches;for(var s in n){var p=n[s];if(p.used){var f=p.getSource();f.attribution&&r.indexOf(f.attribution)<0&&r.push(f.attribution)}}r.sort(function(g,S){return g.length-S.length});var y=(r=r.filter(function(g,S){for(var k=S+1;k<r.length;k++)if(r[k].indexOf(g)>=0)return!1;return!0})).join(" | ");y!==this._attribHTML&&(this._attribHTML=y,r.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Cn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Bn=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};Bn.prototype.onAdd=function(r){this._map=r,this._container=I.create("div","mapboxgl-ctrl");var o=I.create("a","mapboxgl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://www.mapbox.com/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Bn.prototype.onRemove=function(){I.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Bn.prototype.getDefaultPosition=function(){return"bottom-left"},Bn.prototype._updateLogo=function(r){r&&"metadata"!==r.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Bn.prototype._logoRequired=function(){if(this._map.style){var r=this._map.style.sourceCaches;for(var o in r)if(r[o].getSource().mapbox_logo)return!0;return!1}},Bn.prototype._updateCompact=function(){var r=this._container.children;if(r.length){var o=r[0];this._map.getCanvasContainer().offsetWidth<250?o.classList.add("mapboxgl-compact"):o.classList.remove("mapboxgl-compact")}};var fn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};fn.prototype.add=function(r){var o=++this._id;return this._queue.push({callback:r,id:o,cancelled:!1}),o},fn.prototype.remove=function(r){for(var o=this._currentlyRunning,n=0,s=o?this._queue.concat(o):this._queue;n<s.length;n+=1){var p=s[n];if(p.id===r)return void(p.cancelled=!0)}},fn.prototype.run=function(){var r=this._currentlyRunning=this._queue;this._queue=[];for(var o=0,n=r;o<n.length;o+=1){var s=n[o];if(!s.cancelled&&(s.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},fn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ra={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Po=l.window.HTMLImageElement,Mo=l.window.HTMLElement,no=l.window.ImageBitmap,Ds={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},oo=function(r){function o(s){var p=this;if(null!=(s=l.extend({},Ds,s)).minZoom&&null!=s.maxZoom&&s.minZoom>s.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=s.minPitch&&null!=s.maxPitch&&s.minPitch>s.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=s.minPitch&&s.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=s.maxPitch&&s.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var f=new ur(s.minZoom,s.maxZoom,s.minPitch,s.maxPitch,s.renderWorldCopies);if(r.call(this,f,s),this._interactive=s.interactive,this._maxTileCacheSize=s.maxTileCacheSize,this._failIfMajorPerformanceCaveat=s.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=s.preserveDrawingBuffer,this._antialias=s.antialias,this._trackResize=s.trackResize,this._bearingSnap=s.bearingSnap,this._refreshExpiredTiles=s.refreshExpiredTiles,this._fadeDuration=s.fadeDuration,this._crossSourceCollisions=s.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=s.collectResourceTiming,this._renderTaskQueue=new fn,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Ra,s.locale),this._requestManager=new l.RequestManager(s.transformRequest,s.accessToken),"string"==typeof s.container){if(this._container=l.window.document.getElementById(s.container),!this._container)throw new Error("Container '"+s.container+"' not found.")}else{if(!(s.container instanceof Mo))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=s.container}if(s.maxBounds&&this.setMaxBounds(s.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return p._update(!1)}),this.on("moveend",function(){return p._update(!1)}),this.on("zoom",function(){return p._update(!0)}),void 0!==l.window&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1)),function(g,S){var k=g.getCanvasContainer(),L=null,U=!1,X=null;for(var W in ce)g[W]=new ce[W](g,S),S.interactive&&S[W]&&g[W].enable(S[W]);I.addEventListener(k,"mouseout",function(G){g.fire(new kt("mouseout",g,G))}),I.addEventListener(k,"mousedown",function(G){U=!0,X=I.mousePos(k,G);var H=new kt("mousedown",g,G);g.fire(H),!H.defaultPrevented&&(S.interactive&&!g.doubleClickZoom.isActive()&&g.stop(),g.boxZoom.onMouseDown(G),g.boxZoom.isActive()||g.dragPan.isActive()||g.dragRotate.onMouseDown(G),g.boxZoom.isActive()||g.dragRotate.isActive()||g.dragPan.onMouseDown(G))}),I.addEventListener(k,"mouseup",function(G){var H=g.dragRotate.isActive();L&&!H&&g.fire(new kt("contextmenu",g,L)),L=null,U=!1,g.fire(new kt("mouseup",g,G))}),I.addEventListener(k,"mousemove",function(G){if(!g.dragPan.isActive()&&!g.dragRotate.isActive()){for(var H=G.target;H&&H!==k;)H=H.parentNode;H===k&&g.fire(new kt("mousemove",g,G))}}),I.addEventListener(k,"mouseover",function(G){for(var H=G.target;H&&H!==k;)H=H.parentNode;H===k&&g.fire(new kt("mouseover",g,G))}),I.addEventListener(k,"touchstart",function(G){var H=new Qt("touchstart",g,G);g.fire(H),!H.defaultPrevented&&(S.interactive&&g.stop(),g.boxZoom.isActive()||g.dragRotate.isActive()||g.dragPan.onTouchStart(G),g.touchZoomRotate.onStart(G),g.doubleClickZoom.onTouchStart(H))},{passive:!1}),I.addEventListener(k,"touchmove",function(G){g.fire(new Qt("touchmove",g,G))},{passive:!1}),I.addEventListener(k,"touchend",function(G){g.fire(new Qt("touchend",g,G))}),I.addEventListener(k,"touchcancel",function(G){g.fire(new Qt("touchcancel",g,G))}),I.addEventListener(k,"click",function(G){var H=I.mousePos(k,G);(!X||H.equals(X)||H.dist(X)<S.clickTolerance)&&g.fire(new kt("click",g,G))}),I.addEventListener(k,"dblclick",function(G){var H=new kt("dblclick",g,G);g.fire(H),!H.defaultPrevented&&g.doubleClickZoom.onDblClick(H)}),I.addEventListener(k,"contextmenu",function(G){var H=g.dragRotate.isActive();U||H?U&&(L=G):g.fire(new kt("contextmenu",g,G)),(g.dragRotate.isEnabled()||g.listens("contextmenu"))&&G.preventDefault()}),I.addEventListener(k,"wheel",function(G){S.interactive&&g.stop();var H=new de("wheel",g,G);g.fire(H),!H.defaultPrevented&&g.scrollZoom.onWheel(G)},{passive:!1})}(this,s),this._hash=s.hash&&new Ro("string"==typeof s.hash&&s.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}),s.bounds&&(this.resize(),this.fitBounds(s.bounds,l.extend({},s.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=s.localIdeographFontFamily,s.style&&this.setStyle(s.style,{localIdeographFontFamily:s.localIdeographFontFamily}),s.attributionControl&&this.addControl(new Cn({customAttribution:s.customAttribution})),this.addControl(new Bn,s.logoPosition),this.on("style.load",function(){p.transform.unmodified&&p.jumpTo(p.style.stylesheet)}),this.on("data",function(g){p._update("style"===g.dataType),p.fire(new l.Event(g.dataType+"data",g))}),this.on("dataloading",function(g){p.fire(new l.Event(g.dataType+"dataloading",g))})}r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o;var n={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return o.prototype._getMapId=function(){return this._mapId},o.prototype.addControl=function(s,p){if(void 0===p&&s.getDefaultPosition&&(p=s.getDefaultPosition()),void 0===p&&(p="top-right"),!s||!s.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var f=s.onAdd(this);this._controls.push(s);var y=this._controlPositions[p];return-1!==p.indexOf("bottom")?y.insertBefore(f,y.firstChild):y.appendChild(f),this},o.prototype.removeControl=function(s){if(!s||!s.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var p=this._controls.indexOf(s);return p>-1&&this._controls.splice(p,1),s.onRemove(this),this},o.prototype.resize=function(s){var p=this._containerDimensions(),f=p[0],y=p[1];return this._resizeCanvas(f,y),this.transform.resize(f,y),this.painter.resize(f,y),this.fire(new l.Event("movestart",s)).fire(new l.Event("move",s)).fire(new l.Event("resize",s)).fire(new l.Event("moveend",s)),this},o.prototype.getBounds=function(){return this.transform.getBounds()},o.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},o.prototype.setMaxBounds=function(s){return this.transform.setMaxBounds(l.LngLatBounds.convert(s)),this._update()},o.prototype.setMinZoom=function(s){if((s=null==s?-2:s)>=-2&&s<=this.transform.maxZoom)return this.transform.minZoom=s,this._update(),this.getZoom()<s&&this.setZoom(s),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},o.prototype.getMinZoom=function(){return this.transform.minZoom},o.prototype.setMaxZoom=function(s){if((s=null==s?22:s)>=this.transform.minZoom)return this.transform.maxZoom=s,this._update(),this.getZoom()>s&&this.setZoom(s),this;throw new Error("maxZoom must be greater than the current minZoom")},o.prototype.getMaxZoom=function(){return this.transform.maxZoom},o.prototype.setMinPitch=function(s){if((s=null==s?0:s)<0)throw new Error("minPitch must be greater than or equal to 0");if(s>=0&&s<=this.transform.maxPitch)return this.transform.minPitch=s,this._update(),this.getPitch()<s&&this.setPitch(s),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},o.prototype.getMinPitch=function(){return this.transform.minPitch},o.prototype.setMaxPitch=function(s){if((s=null==s?60:s)>60)throw new Error("maxPitch must be less than or equal to 60");if(s>=this.transform.minPitch)return this.transform.maxPitch=s,this._update(),this.getPitch()>s&&this.setPitch(s),this;throw new Error("maxPitch must be greater than the current minPitch")},o.prototype.getMaxPitch=function(){return this.transform.maxPitch},o.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},o.prototype.setRenderWorldCopies=function(s){return this.transform.renderWorldCopies=s,this._update()},o.prototype.project=function(s){return this.transform.locationPoint(l.LngLat.convert(s))},o.prototype.unproject=function(s){return this.transform.pointLocation(l.Point.convert(s))},o.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},o.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},o.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},o.prototype._createDelegatedListener=function(s,p,f){var y,g=this;if("mouseenter"===s||"mouseover"===s){var S=!1;return{layer:p,listener:f,delegates:{mousemove:function(L){var U=g.getLayer(p)?g.queryRenderedFeatures(L.point,{layers:[p]}):[];U.length?S||(S=!0,f.call(g,new kt(s,g,L.originalEvent,{features:U}))):S=!1},mouseout:function(){S=!1}}}}if("mouseleave"===s||"mouseout"===s){var k=!1;return{layer:p,listener:f,delegates:{mousemove:function(L){(g.getLayer(p)?g.queryRenderedFeatures(L.point,{layers:[p]}):[]).length?k=!0:k&&(k=!1,f.call(g,new kt(s,g,L.originalEvent)))},mouseout:function(L){k&&(k=!1,f.call(g,new kt(s,g,L.originalEvent)))}}}}return{layer:p,listener:f,delegates:(y={},y[s]=function(L){var U=g.getLayer(p)?g.queryRenderedFeatures(L.point,{layers:[p]}):[];U.length&&(L.features=U,f.call(g,L),delete L.features)},y)}},o.prototype.on=function(s,p,f){if(void 0===f)return r.prototype.on.call(this,s,p);var y=this._createDelegatedListener(s,p,f);for(var g in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[s]=this._delegatedListeners[s]||[],this._delegatedListeners[s].push(y),y.delegates)this.on(g,y.delegates[g]);return this},o.prototype.once=function(s,p,f){if(void 0===f)return r.prototype.once.call(this,s,p);var y=this._createDelegatedListener(s,p,f);for(var g in y.delegates)this.once(g,y.delegates[g]);return this},o.prototype.off=function(s,p,f){var y=this;return void 0===f?r.prototype.off.call(this,s,p):(this._delegatedListeners&&this._delegatedListeners[s]&&function(g){for(var S=g[s],k=0;k<S.length;k++){var L=S[k];if(L.layer===p&&L.listener===f){for(var U in L.delegates)y.off(U,L.delegates[U]);return S.splice(k,1),y}}}(this._delegatedListeners),this)},o.prototype.queryRenderedFeatures=function(s,p){if(!this.style)return[];var f;if(void 0!==p||void 0===s||s instanceof l.Point||Array.isArray(s)||(p=s,s=void 0),p=p||{},(s=s||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||"number"==typeof s[0])f=[l.Point.convert(s)];else{var y=l.Point.convert(s[0]),g=l.Point.convert(s[1]);f=[y,new l.Point(g.x,y.y),g,new l.Point(y.x,g.y),y]}return this.style.queryRenderedFeatures(f,p,this.transform)},o.prototype.querySourceFeatures=function(s,p){return this.style.querySourceFeatures(s,p)},o.prototype.setStyle=function(s,p){return!1!==(p=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},p)).diff&&p.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&s?(this._diffStyle(s,p),this):(this._localIdeographFontFamily=p.localIdeographFontFamily,this._updateStyle(s,p))},o.prototype._getUIString=function(s){var p=this._locale[s];if(null==p)throw new Error("Missing UI string '"+s+"'");return p},o.prototype._updateStyle=function(s,p){return this.style&&(this.style.setEventedParent(null),this.style._remove()),s?(this.style=new uo(this,p||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof s?this.style.loadURL(s):this.style.loadJSON(s),this):(delete this.style,this)},o.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new uo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},o.prototype._diffStyle=function(s,p){var f=this;if("string"==typeof s){var y=this._requestManager.normalizeStyleURL(s),g=this._requestManager.transformRequest(y,l.ResourceType.Style);l.getJSON(g,function(S,k){S?f.fire(new l.ErrorEvent(S)):k&&f._updateDiff(k,p)})}else"object"==typeof s&&this._updateDiff(s,p)},o.prototype._updateDiff=function(s,p){try{this.style.setState(s)&&this._update(!0)}catch(f){l.warnOnce("Unable to perform style diff: "+(f.message||f.error||f)+".  Rebuilding the style from scratch."),this._updateStyle(s,p)}},o.prototype.getStyle=function(){if(this.style)return this.style.serialize()},o.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},o.prototype.addSource=function(s,p){return this._lazyInitEmptyStyle(),this.style.addSource(s,p),this._update(!0)},o.prototype.isSourceLoaded=function(s){var p=this.style&&this.style.sourceCaches[s];if(void 0!==p)return p.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+s+"'")))},o.prototype.areTilesLoaded=function(){var s=this.style&&this.style.sourceCaches;for(var p in s){var f=s[p]._tiles;for(var y in f){var g=f[y];if("loaded"!==g.state&&"errored"!==g.state)return!1}}return!0},o.prototype.addSourceType=function(s,p,f){return this._lazyInitEmptyStyle(),this.style.addSourceType(s,p,f)},o.prototype.removeSource=function(s){return this.style.removeSource(s),this._update(!0)},o.prototype.getSource=function(s){return this.style.getSource(s)},o.prototype.addImage=function(s,p,f){void 0===f&&(f={});var y=f.pixelRatio;void 0===y&&(y=1);var g=f.sdf;void 0===g&&(g=!1);var S=f.stretchX,k=f.stretchY,L=f.content;if(this._lazyInitEmptyStyle(),p instanceof Po||no&&p instanceof no){var U=l.browser.getImageData(p);this.style.addImage(s,{data:new l.RGBAImage({width:U.width,height:U.height},U.data),pixelRatio:y,stretchX:S,stretchY:k,content:L,sdf:g,version:0})}else{if(void 0===p.width||void 0===p.height)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var _t=p;this.style.addImage(s,{data:new l.RGBAImage({width:p.width,height:p.height},new Uint8Array(p.data)),pixelRatio:y,stretchX:S,stretchY:k,content:L,sdf:g,version:0,userImage:_t}),_t.onAdd&&_t.onAdd(this,s)}},o.prototype.updateImage=function(s,p){var f=this.style.getImage(s);if(!f)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var y=p instanceof Po||no&&p instanceof no?l.browser.getImageData(p):p,g=y.width,S=y.height,k=y.data;return void 0===g||void 0===S?this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):g!==f.data.width||S!==f.data.height?this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(f.data.replace(k,!(p instanceof Po||no&&p instanceof no)),void this.style.updateImage(s,f))},o.prototype.hasImage=function(s){return s?!!this.style.getImage(s):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},o.prototype.removeImage=function(s){this.style.removeImage(s)},o.prototype.loadImage=function(s,p){l.getImage(this._requestManager.transformRequest(s,l.ResourceType.Image),p)},o.prototype.listImages=function(){return this.style.listImages()},o.prototype.addLayer=function(s,p){return this._lazyInitEmptyStyle(),this.style.addLayer(s,p),this._update(!0)},o.prototype.moveLayer=function(s,p){return this.style.moveLayer(s,p),this._update(!0)},o.prototype.removeLayer=function(s){return this.style.removeLayer(s),this._update(!0)},o.prototype.getLayer=function(s){return this.style.getLayer(s)},o.prototype.setLayerZoomRange=function(s,p,f){return this.style.setLayerZoomRange(s,p,f),this._update(!0)},o.prototype.setFilter=function(s,p,f){return void 0===f&&(f={}),this.style.setFilter(s,p,f),this._update(!0)},o.prototype.getFilter=function(s){return this.style.getFilter(s)},o.prototype.setPaintProperty=function(s,p,f,y){return void 0===y&&(y={}),this.style.setPaintProperty(s,p,f,y),this._update(!0)},o.prototype.getPaintProperty=function(s,p){return this.style.getPaintProperty(s,p)},o.prototype.setLayoutProperty=function(s,p,f,y){return void 0===y&&(y={}),this.style.setLayoutProperty(s,p,f,y),this._update(!0)},o.prototype.getLayoutProperty=function(s,p){return this.style.getLayoutProperty(s,p)},o.prototype.setLight=function(s,p){return void 0===p&&(p={}),this._lazyInitEmptyStyle(),this.style.setLight(s,p),this._update(!0)},o.prototype.getLight=function(){return this.style.getLight()},o.prototype.setFeatureState=function(s,p){return this.style.setFeatureState(s,p),this._update()},o.prototype.removeFeatureState=function(s,p){return this.style.removeFeatureState(s,p),this._update()},o.prototype.getFeatureState=function(s){return this.style.getFeatureState(s)},o.prototype.getContainer=function(){return this._container},o.prototype.getCanvasContainer=function(){return this._canvasContainer},o.prototype.getCanvas=function(){return this._canvas},o.prototype._containerDimensions=function(){var s=0,p=0;return this._container&&(s=this._container.clientWidth||400,p=this._container.clientHeight||300),[s,p]},o.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},o.prototype._setupContainer=function(){var s=this._container;s.classList.add("mapboxgl-map"),(this._missingCSSCanary=I.create("div","mapboxgl-canary",s)).style.visibility="hidden",this._detectMissingCSS();var p=this._canvasContainer=I.create("div","mapboxgl-canvas-container",s);this._interactive&&p.classList.add("mapboxgl-interactive"),this._canvas=I.create("canvas","mapboxgl-canvas",p),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var f=this._containerDimensions();this._resizeCanvas(f[0],f[1]);var y=this._controlContainer=I.create("div","mapboxgl-control-container",s),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(S){g[S]=I.create("div","mapboxgl-ctrl-"+S,y)})},o.prototype._resizeCanvas=function(s,p){var f=l.browser.devicePixelRatio||1;this._canvas.width=f*s,this._canvas.height=f*p,this._canvas.style.width=s+"px",this._canvas.style.height=p+"px"},o.prototype._setupPainter=function(){var s=l.extend({},P.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),p=this._canvas.getContext("webgl",s)||this._canvas.getContext("experimental-webgl",s);p?(this.painter=new or(p,this.transform),l.webpSupported.testSupport(p)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},o.prototype._contextLost=function(s){s.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:s}))},o.prototype._contextRestored=function(s){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:s}))},o.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},o.prototype._update=function(s){return this.style?(this._styleDirty=this._styleDirty||s,this._sourcesDirty=!0,this.triggerRepaint(),this):this},o.prototype._requestRenderFrame=function(s){return this._update(),this._renderTaskQueue.add(s)},o.prototype._cancelRenderFrame=function(s){this._renderTaskQueue.remove(s)},o.prototype._render=function(){var s,p=this,f=0,y=this.painter.context.extTimerQuery;this.listens("gpu-timing-frame")&&(s=y.createQueryEXT(),y.beginQueryEXT(y.TIME_ELAPSED_EXT,s),f=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var g=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var S=this.transform.zoom,k=l.browser.now();this.style.zoomHistory.update(S,k);var L=new l.EvaluationParameters(S,{now:k,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),U=L.crossFadingFactor();1===U&&U===this._crossFadingFactor||(g=!0,this._crossFadingFactor=U),this.style.update(L)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),gpuTiming:!!this.listens("gpu-timing-layer"),fadeDuration:this._fadeDuration}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||g)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var X=l.browser.now()-f;y.endQueryEXT(y.TIME_ELAPSED_EXT,s),setTimeout(function(){var G=y.getQueryObjectEXT(s,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(s),p.fire(new l.Event("gpu-timing-frame",{cpuTime:X,gpuTime:G}))},50)}if(this.listens("gpu-timing-layer")){var W=this.painter.collectGpuTimers();setTimeout(function(){var G=p.painter.queryGpuTimers(W);p.fire(new l.Event("gpu-timing-layer",{layerTimes:G}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new l.Event("idle"))),this},o.prototype.remove=function(){this._hash&&this._hash.remove();for(var s=0,p=this._controls;s<p.length;s+=1)p[s].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==l.window&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),ea(this._canvasContainer),ea(this._controlContainer),ea(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new l.Event("remove"))},o.prototype.triggerRepaint=function(){var s=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(p){s._frame=null,s._render()}))},o.prototype._onWindowOnline=function(){this._update()},o.prototype._onWindowResize=function(s){this._trackResize&&this.resize({originalEvent:s})._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(s){this._showTileBoundaries!==s&&(this._showTileBoundaries=s,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(s){this._showCollisionBoxes!==s&&(this._showCollisionBoxes=s,s?this.style._generateCollisionBoxes():this._update())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(s){this._showOverdrawInspector!==s&&(this._showOverdrawInspector=s,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(s){this._repaint!==s&&(this._repaint=s,this.triggerRepaint())},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(s){this._vertices=s,this._update()},o.prototype._setCacheLimits=function(s,p){l.setCacheLimits(s,p)},n.version.get=function(){return l.version},Object.defineProperties(o.prototype,n),o}(co);function ea(r){r.parentNode&&r.parentNode.removeChild(r)}var Zl={showCompass:!0,showZoom:!0,visualizePitch:!1},ma=function(r){var o=this;this.options=l.extend({},Zl,r),this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(n){return n.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(n){return o._map.zoomIn({},{originalEvent:n})}),I.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(n){return o._map.zoomOut({},{originalEvent:n})}),I.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(n){o.options.visualizePitch?o._map.resetNorthPitch({},{originalEvent:n}):o._map.resetNorth({},{originalEvent:n})}),this._compassIcon=I.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};function Fs(r,o,n){if(r=new l.LngLat(r.lng,r.lat),o){var s=new l.LngLat(r.lng-360,r.lat),p=new l.LngLat(r.lng+360,r.lat),f=n.locationPoint(r).distSqr(o);n.locationPoint(s).distSqr(o)<f?r=s:n.locationPoint(p).distSqr(o)<f&&(r=p)}for(;Math.abs(r.lng-n.center.lng)>180;){var y=n.locationPoint(r);if(y.x>=0&&y.y>=0&&y.x<=n.width&&y.y<=n.height)break;r.lng>n.center.lng?r.lng-=360:r.lng+=360}return r}ma.prototype._updateZoomButtons=function(){var r=this._map.getZoom();this._zoomInButton.disabled=r===this._map.getMaxZoom(),this._zoomOutButton.disabled=r===this._map.getMinZoom()},ma.prototype._rotateCompassArrow=function(){var r=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=r},ma.prototype.onAdd=function(r){return this._map=r,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Je(r,{button:"left",element:this._compass,clickTolerance:r.dragRotate._clickTolerance}),I.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),I.addEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.enable()),this._container},ma.prototype.onRemove=function(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),I.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),I.removeEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.disable(),delete this._handler),delete this._map},ma.prototype._createButton=function(r,o){var n=I.create("button",r,this._container);return n.type="button",n.addEventListener("click",o),n},ma.prototype._setButtonTitle=function(r,o){var n=this._map._getUIString("NavigationControl."+o);r.title=n,r.setAttribute("aria-label",n)};var _s={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function dl(r,o,n){var s=r.classList;for(var p in _s)s.remove("mapboxgl-"+n+"-anchor-"+p);s.add("mapboxgl-"+n+"-anchor-"+o)}var kn,Pr=function(r){function o(n,s){var p=this;if(r.call(this),(n instanceof l.window.HTMLElement||s)&&(n=l.extend({element:n},s)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._draggable=n&&n.draggable||!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&"auto"!==n.pitchAlignment?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=l.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div"),this._element.setAttribute("aria-label","Map marker");var f=I.createNS("http://www.w3.org/2000/svg","svg");f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height","41px"),f.setAttributeNS(null,"width","27px"),f.setAttributeNS(null,"viewBox","0 0 27 41");var y=I.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");var g=I.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"fill-rule","nonzero");var S=I.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(3.0, 29.0)"),S.setAttributeNS(null,"fill","#000000");for(var k=0,L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];k<L.length;k+=1){var U=L[k],X=I.createNS("http://www.w3.org/2000/svg","ellipse");X.setAttributeNS(null,"opacity","0.04"),X.setAttributeNS(null,"cx","10.5"),X.setAttributeNS(null,"cy","5.80029008"),X.setAttributeNS(null,"rx",U.rx),X.setAttributeNS(null,"ry",U.ry),S.appendChild(X)}var W=I.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"fill",this._color);var G=I.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),W.appendChild(G);var H=I.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");var ft=I.createNS("http://www.w3.org/2000/svg","path");ft.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild(ft);var ut=I.createNS("http://www.w3.org/2000/svg","g");ut.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ut.setAttributeNS(null,"fill","#FFFFFF");var _t=I.createNS("http://www.w3.org/2000/svg","g");_t.setAttributeNS(null,"transform","translate(8.0, 8.0)");var St=I.createNS("http://www.w3.org/2000/svg","circle");St.setAttributeNS(null,"fill","#000000"),St.setAttributeNS(null,"opacity","0.25"),St.setAttributeNS(null,"cx","5.5"),St.setAttributeNS(null,"cy","5.5"),St.setAttributeNS(null,"r","5.4999962");var Ct=I.createNS("http://www.w3.org/2000/svg","circle");Ct.setAttributeNS(null,"fill","#FFFFFF"),Ct.setAttributeNS(null,"cx","5.5"),Ct.setAttributeNS(null,"cy","5.5"),Ct.setAttributeNS(null,"r","5.4999962"),_t.appendChild(St),_t.appendChild(Ct),g.appendChild(S),g.appendChild(W),g.appendChild(H),g.appendChild(ut),g.appendChild(_t),f.appendChild(g),this._element.appendChild(f),this._offset=l.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ut){Ut.preventDefault()}),this._element.addEventListener("mousedown",function(Ut){Ut.preventDefault()}),this._element.addEventListener("focus",function(){var Ut=p._map.getContainer();Ut.scrollTop=0,Ut.scrollLeft=0}),dl(this._element,this._anchor,"marker"),this._popup=null}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.addTo=function(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},o.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(n){return this._lngLat=l.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},o.prototype.getElement=function(){return this._element},o.prototype.setPopup=function(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){var s=Math.sqrt(Math.pow(13.5,2)/2);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[s,-1*(24.6+s)],"bottom-right":[-s,-1*(24.6+s)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},o.prototype._onKeyPress=function(n){var s=n.code,p=n.charCode||n.keyCode;"Space"!==s&&"Enter"!==s&&32!==p&&13!==p||this.togglePopup()},o.prototype._onMapClick=function(n){var s=n.originalEvent.target,p=this._element;this._popup&&(s===p||p.contains(s))&&this.togglePopup()},o.prototype.getPopup=function(){return this._popup},o.prototype.togglePopup=function(){var n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this},o.prototype._update=function(n){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Fs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var s="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?s="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(s="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var p="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?p="rotateX(0deg)":"map"===this._pitchAlignment&&(p="rotateX("+this._map.getPitch()+"deg)"),n&&"moveend"!==n.type||(this._pos=this._pos.round()),I.setTransform(this._element,_s[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+p+" "+s)}},o.prototype.getOffset=function(){return this._offset},o.prototype.setOffset=function(n){return this._offset=l.Point.convert(n),this._update(),this},o.prototype._onMove=function(n){this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))},o.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new l.Event("dragend")),this._state="inactive"},o.prototype._addDragHandler=function(n){this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},o.prototype.setDraggable=function(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},o.prototype.isDraggable=function(){return this._draggable},o.prototype.setRotation=function(n){return this._rotation=n||0,this._update(),this},o.prototype.getRotation=function(){return this._rotation},o.prototype.setRotationAlignment=function(n){return this._rotationAlignment=n||"auto",this._update(),this},o.prototype.getRotationAlignment=function(){return this._rotationAlignment},o.prototype.setPitchAlignment=function(n){return this._pitchAlignment=n&&"auto"!==n?n:this._rotationAlignment,this._update(),this},o.prototype.getPitchAlignment=function(){return this._pitchAlignment},o}(l.Evented),ls={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},qa=0,po=!1,fl=function(r){function o(n){r.call(this),this.options=l.extend({},ls,n),l.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.onAdd=function(n){var s;return this._map=n,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),s=this._setupUI,void 0!==kn?s(kn):void 0!==l.window.navigator.permissions?l.window.navigator.permissions.query({name:"geolocation"}).then(function(p){s(kn="denied"!==p.state)}):s(kn=!!l.window.navigator.geolocation),this._container},o.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),I.remove(this._container),this._map=void 0,qa=0,po=!1},o.prototype._isOutOfMapMaxBounds=function(n){var s=this._map.getMaxBounds(),p=n.coords;return s&&(p.longitude<s.getWest()||p.longitude>s.getEast()||p.latitude<s.getSouth()||p.latitude>s.getNorth())},o.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},o.prototype._onSuccess=function(n){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(n),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",n)),this._finish()},o.prototype._updateCamera=function(n){var s=new l.LngLat(n.coords.longitude,n.coords.latitude),p=n.coords.accuracy,f=this._map.getBearing(),y=l.extend({bearing:f},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(p),y,{geolocateSource:!0})},o.prototype._updateMarker=function(n){n?this._userLocationDotMarker.setLngLat([n.coords.longitude,n.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},o.prototype._onError=function(n){if(this.options.trackUserLocation)if(1===n.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===n.code&&po)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",n)),this._finish()},o.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},o.prototype._setupUI=function(n){var s=this;if(this._container.addEventListener("contextmenu",function(y){return y.preventDefault()}),this._geolocateButton=I.create("button","mapboxgl-ctrl-geolocate",this._container),I.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===n){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{var f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Pr(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(y){y.geolocateSource||"ACTIVE_LOCK"!==s._watchState||y.originalEvent&&"resize"===y.originalEvent.type||(s._watchState="BACKGROUND",s._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),s._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),s.fire(new l.Event("trackuserlocationend")))})},o.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":qa--,po=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var n;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++qa>1?(n={maximumAge:6e5,timeout:0},po=!0):(n=this.options.positionOptions,po=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,n)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},o.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},o}(l.Evented),Us={maxWidth:100,unit:"metric"},ia=function(r){this.options=l.extend({},Us,r),l.bindAll(["_onMove","setUnit"],this)};function io(r,o,n){var s,p,f,y,g,S,k=n&&n.maxWidth||100,L=r._container.clientHeight/2,U=(s=r.unproject([0,L]),p=r.unproject([k,L]),f=Math.PI/180,y=s.lat*f,g=p.lat*f,S=Math.sin(y)*Math.sin(g)+Math.cos(y)*Math.cos(g)*Math.cos((p.lng-s.lng)*f),6371e3*Math.acos(Math.min(S,1)));if(n&&"imperial"===n.unit){var X=3.2808*U;X>5280?Ha(o,k,X/5280,r._getUIString("ScaleControl.Miles")):Ha(o,k,X,r._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Ha(o,k,U/1852,r._getUIString("ScaleControl.NauticalMiles")):U>=1e3?Ha(o,k,U/1e3,r._getUIString("ScaleControl.Kilometers")):Ha(o,k,U,r._getUIString("ScaleControl.Meters"))}function Ha(r,o,n,s){var p,f,y,k,L,g=(p=n,(f=Math.pow(10,(""+Math.floor(p)).length-1))*(y=(y=p/f)>=10?10:y>=5?5:y>=3?3:y>=2?2:y>=1?1:(k=y,L=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10)),Math.round(k*L)/L)));r.style.width=o*(g/n)+"px",r.innerHTML=g+s}ia.prototype.getDefaultPosition=function(){return"bottom-left"},ia.prototype._onMove=function(){io(this._map,this._container,this.options)},ia.prototype.onAdd=function(r){return this._map=r,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",r.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ia.prototype.onRemove=function(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ia.prototype.setUnit=function(r){this.options.unit=r,io(this._map,this._container,this.options)};var Ve=function(r){this._fullscreen=!1,r&&r.container&&(r.container instanceof l.window.HTMLElement?this._container=r.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ve.prototype.onAdd=function(r){return this._map=r,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ve.prototype.onRemove=function(){I.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ve.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},Ve.prototype._setupUI=function(){var r=this._fullscreenButton=I.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);I.create("span","mapboxgl-ctrl-icon",r).setAttribute("aria-hidden",!0),r.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ve.prototype._updateTitle=function(){var r=this._getTitle();this._fullscreenButton.setAttribute("aria-label",r),this._fullscreenButton.title=r},Ve.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ve.prototype._isFullscreen=function(){return this._fullscreen},Ve.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ve.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var hi={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Ns=function(r){function o(n){r.call(this),this.options=l.extend(Object.create(hi),n),l.bindAll(["_update","_onClose","remove"],this)}return r&&(o.__proto__=r),(o.prototype=Object.create(r&&r.prototype)).constructor=o,o.prototype.addTo=function(n){var s=this;return this._map=n,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",function(p){s._update(p.point)}),this._map.on("mouseup",function(p){s._update(p.point)}),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},o.prototype.isOpen=function(){return!!this._map},o.prototype.remove=function(){return this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove"),delete this._map),this.fire(new l.Event("close")),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(n){return this._lngLat=l.LngLat.convert(n),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove"),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},o.prototype.trackPointer=function(){var n=this;return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",function(s){n._update(s.point)}),this._map.on("drag",function(s){n._update(s.point)}),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},o.prototype.getElement=function(){return this._container},o.prototype.setText=function(n){return this.setDOMContent(l.window.document.createTextNode(n))},o.prototype.setHTML=function(n){var s,p=l.window.document.createDocumentFragment(),f=l.window.document.createElement("body");for(f.innerHTML=n;s=f.firstChild;)p.appendChild(s);return this.setDOMContent(p)},o.prototype.getMaxWidth=function(){return this._container.style.maxWidth},o.prototype.setMaxWidth=function(n){return this.options.maxWidth=n,this._update(),this},o.prototype.setDOMContent=function(n){return this._createContent(),this._content.appendChild(n),this._update(),this},o.prototype.addClassName=function(n){this._container.classList.add(n)},o.prototype.removeClassName=function(n){this._container.classList.remove(n)},o.prototype.toggleClassName=function(n){return this._container.classList.toggle(n)},o.prototype._createContent=function(){this._content&&I.remove(this._content),this._content=I.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=I.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},o.prototype._update=function(n){var s=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=I.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=I.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(X){return s._container.classList.add(X)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Fs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||n)){var f=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat),y=this.options.anchor,g=function X(W){if(W){if("number"==typeof W){var G=Math.round(Math.sqrt(.5*Math.pow(W,2)));return{center:new l.Point(0,0),top:new l.Point(0,W),"top-left":new l.Point(G,G),"top-right":new l.Point(-G,G),bottom:new l.Point(0,-W),"bottom-left":new l.Point(G,-G),"bottom-right":new l.Point(-G,-G),left:new l.Point(W,0),right:new l.Point(-W,0)}}if(W instanceof l.Point||Array.isArray(W)){var H=l.Point.convert(W);return{center:H,top:H,"top-left":H,"top-right":H,bottom:H,"bottom-left":H,"bottom-right":H,left:H,right:H}}return{center:l.Point.convert(W.center||[0,0]),top:l.Point.convert(W.top||[0,0]),"top-left":l.Point.convert(W["top-left"]||[0,0]),"top-right":l.Point.convert(W["top-right"]||[0,0]),bottom:l.Point.convert(W.bottom||[0,0]),"bottom-left":l.Point.convert(W["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(W["bottom-right"]||[0,0]),left:l.Point.convert(W.left||[0,0]),right:l.Point.convert(W.right||[0,0])}}return X(new l.Point(0,0))}(this.options.offset);if(!y){var S,k=this._container.offsetWidth,L=this._container.offsetHeight;S=f.y+g.bottom.y<L?["top"]:f.y>this._map.transform.height-L?["bottom"]:[],f.x<k/2?S.push("left"):f.x>this._map.transform.width-k/2&&S.push("right"),y=0===S.length?"bottom":S.join("-")}var U=f.add(g[y]).round();I.setTransform(this._container,_s[y]+" translate("+U.x+"px,"+U.y+"px)"),dl(this._container,y,"popup")}},o.prototype._onClose=function(){this.remove()},o}(l.Evented),Za={version:l.version,supported:P,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:oo,NavigationControl:ma,GeolocateControl:fl,AttributionControl:Cn,ScaleControl:ia,FullscreenControl:Ve,Popup:Ns,Marker:Pr,Style:uo,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(r){l.config.ACCESS_TOKEN=r},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(r){l.config.API_URL=r},get workerCount(){return j.workerCount},set workerCount(r){j.workerCount=r},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(r){l.config.MAX_PARALLEL_IMAGE_REQUESTS=r},clearStorage:function(r){l.clearTileCache(r)},workerUrl:""};return Za}),v});